/*! For license information please see chunk.main.10f75314.js.LICENSE */
(self.webpackJsonp=self.webpackJsonp||[]).push([[22,6,11],{"+/tv":function(e,t,n){"use strict";n("pNMO"),n("ma9I"),n("TeQF"),n("fbCW"),n("x0AG"),n("yXV3"),n("2B1R"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("rePB"),i=n("L2JU"),r=n("WmPt"),a=n("JBdv"),o=n("9oRF"),l=n("4PS8"),c=n("hSdx"),u={components:{DiffText:o.a,OutputFormatted:{functional:!0,render:function(e,t){var n=t.props.output;if(!n)return e("span",{staticClass:"no-output"},["No output"]);var s=function(){return e("span",{staticClass:"tab",attrs:{title:"Tab"}},["→"])},i=function(){return e("span",{attrs:{title:"Carriage Return"}},["␍"])},r=c.stringReplaceArray(n,/(\s+$)|(\t)|(\r)/gm,(function(t,n,r,a){return n?c.stringReplaceArray(n,/( )|(\t)|(\r)/g,(function(t,n,r,a){return n?e("span",{staticClass:"space",attrs:{title:"Trailing Space"}},[" "]):r?s():a?i():t})):r?s():a?i():t}));return"\n"!==n[n.length-1]&&(r.push(e("span",{staticClass:"missing-newline",attrs:{title:"Missing Newline"}},["↵"])),r.push("\n")),r}}},props:{check:{type:Object,required:!0}},data:function(){return{selectedTab:"diff"}},computed:{diff:function(){return Object(l.d)(this.check.value.diff)}},methods:{selectTab:function(e){this.selectedTab=e},isTabSelected:function(e){return this.selectedTab===e}}},d=(n("0m4+"),n("KHd+")),h=Object(d.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"check-diff-result"},[n("div",{staticClass:"cdr-tabs"},[n("div",{staticClass:"cdr-tab",class:{selected:e.isTabSelected("diff")},on:{click:function(t){return e.selectTab("diff")}}},[e._v("Diff")]),e._v(" "),n("div",{staticClass:"cdr-tab",class:{selected:e.isTabSelected("observed")},on:{click:function(t){return e.selectTab("observed")}}},[e._v("Your output")]),e._v(" "),n("div",{staticClass:"cdr-tab",class:{selected:e.isTabSelected("expected")},on:{click:function(t){return e.selectTab("expected")}}},[e._v("Expected output")])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isTabSelected("diff"),expression:"isTabSelected('diff')"}],staticClass:"cdr-pane"},[e.check.value.truncated?n("div",{staticClass:"cdr-diff-truncated"},[e._v("Diff generated too many lines and has been truncated.")]):e._e(),e._v(" "),n("DiffText",{attrs:{diff:e.diff}})],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isTabSelected("observed"),expression:"isTabSelected('observed')"}],staticClass:"cdr-pane padded"},[n("div",{staticClass:"cdr-code"},[n("OutputFormatted",{attrs:{output:e.check.value.observed}})],1)]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isTabSelected("expected"),expression:"isTabSelected('expected')"}],staticClass:"cdr-pane padded"},[n("div",{staticClass:"cdr-code"},[n("OutputFormatted",{attrs:{output:e.check.value.expected}})],1)])])}),[],!1,null,null,null).exports,p={props:{check:{type:Object,required:!0}}},f=(n("GlaT"),Object(d.a)(p,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"check-status-result"},[t("pre",[this._v(this._s(this.check.value.run.output))])])}),[],!1,null,null,null).exports),m={props:{check:{type:Object,required:!0}}},v=Object(d.a)(m,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"check-text-result"},[this._v(this._s(this.check.feedback))])}),[],!1,null,null,null).exports,b={props:{check:{type:Object,required:!0}},methods:{lineClass:function(e){switch(e.type){case"-":return"remove";case"+":return"add";default:return null}}}},g=(n("CYdp"),Object(d.a)(b,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("table",{staticClass:"dcd-table"},[n("thead",[n("tr",e._l(e.check.value.columns,(function(t,s){return n("th",{key:s},[e._v(e._s(t))])})),0)]),e._v(" "),n("tbody",e._l(e.check.value.diff,(function(t,s){return n("tr",{key:s,staticClass:"dcd-line",class:e.lineClass(t)},e._l(t.words,(function(t,s){return n("td",{key:s},["!="===t.type?[n("span",{staticClass:"dcd-value-incorrect"},[e._v(e._s(t.incorrect))]),e._v(" "),n("span",{staticClass:"dcd-value-correct"},[e._v(e._s(t.correct))])]:[e._v(e._s(t.correct))]],2)})),0)})),0)])}),[],!1,null,null,null).exports),y={props:{check:{type:String,default:""}}},w=(n("sC4w"),Object(d.a)(y,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"dce-message"},[this._v(this._s(this.check.value))])}),[],!1,null,null,null).exports),_=(n("Rm1S"),n("EnZy"),n("ODXe")),k={props:{type:{type:String,required:!0}},computed:{text:function(){switch(this.type){case"global":return"S";case"native":return"N";case"function":return"f"}}}};n("fXXr");function C(e){switch(e){case"global code":return"Global Code";default:return e}}function x(e,t){return"global code"===e?"global":"[native code]"===t?"native":e?"function":void 0}var j={components:{JscoreIcon:Object(d.a)(k,(function(){var e=this.$createElement;return(this._self._c||e)("span",{staticClass:"jscore-icon",class:"jscore-icon-"+this.type},[this._v(this._s(this.text))])}),[],!1,null,null,null).exports},props:{stacktrace:{type:String,default:""}},computed:{lines:function(){return this.stacktrace.split("\n").map((function(e){var t=e.match(/^(?:([^@]+)@)?(?:file:\/\/\/)(.*?)(?:(?::)(\d+:\d+))?$/);if(!t)return{type:"text",text:e};var n=Object(_.a)(t,4),s=n[1],i=n[2],r=n[3];return{type:"parsed",name:C(s),icon:x(s,i),path:i,location:r}}))}}},O=(n("/AAE"),Object(d.a)(j,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"jscore-stacktrace"},[n("div",{staticClass:"jscst-padding"},[n("table",{staticClass:"jscst-layout",attrs:{role:"presentation"}},e._l(e.lines,(function(t,s){return n("tr",{key:s},["text"===t.type?[n("td",{attrs:{colspan:"2"}},[e._v(e._s(t.text))])]:e._e(),e._v(" "),"parsed"===t.type?[n("td",{staticClass:"jscst-name"},[t.icon?n("JscoreIcon",{attrs:{type:t.icon}}):e._e(),e._v(" "+e._s(t.name))],1),e._v(" "),n("td",{staticClass:"jscst-path"},[e._v(e._s(t.path)+" "),n("span",{staticClass:"jscst-location"},[e._v(e._s(t.location))])])]:e._e()],2)})),0)])])}),[],!1,null,null,null).exports),S={props:{stacktrace:{type:String,default:""}},data:function(){return{open:!1}},methods:{toggle:function(){this.open=!this.open}}},E=(n("sBop"),Object(d.a)(S,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"stacktrace"},[n("button",{staticClass:"stacktrace-toggle ed-btn-compact",on:{click:e.toggle}},[e._v(e._s(e.open?"Hide":"Show")+" stacktrace")]),e._v(" "),n("pre",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],staticClass:"stacktrace-content"},[n("code",[e._v(e._s(e.stacktrace))])])])}),[],!1,null,null,null).exports),T=(n("4mDm"),n("Tskq"),n("07d7"),n("PKPk"),n("UxlC"),n("3bBZ"),{props:{lines:{type:Array,required:!0}},computed:{computedLines:function(){var e=new Map([[1,"log"],[2,"warn"],[3,"err"]]);return this.lines.map((function(t){return{source:t.source_id.replace(/^file:\/\/\/\/home\//,""),line:t.line,text:t.text,level:e.get(t.level)||"log"}}))}}}),I=(n("aFKc"),Object(d.a)(T,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"console-display"},e._l(e.computedLines,(function(t,s){return n("div",{key:s,staticClass:"condis-line",class:"condis-line-"+t.level},[n("span",{staticClass:"condis-source"},[e._v(e._s(t.source)+":"+e._s(t.line))]),e._v(" "),n("span",{staticClass:"condis-line-text"},[e._v(e._s(t.text))])])})),0)}),[],!1,null,null,null).exports),D=n("9Arg");function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var A={components:{Icon:r.a,DateDisplay:a.a,CheckDiffResult:h,CheckStatusResult:f,CheckTextResult:v,DbCheckDiff:g,DbCheckExec:w,JscoreStacktrace:O,Stacktrace:E,ConsoleDisplay:I},props:{challengeType:{type:String,default:"code"},submission:{type:Object,required:!0},autoOpen:{type:Boolean,default:!1},perTestcaseScores:{type:Boolean,default:!1}},data:function(){return{selectedTestIndex:-1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(i.c)(["isStaff"]),{result:function(){return this.submission.result},build:function(){return this.result.build},run:function(){return this.result.run},outcomeLabel:function(){switch(this.submission.status){case"passed":return"Passed";case"failed":return"Not yet";case"errored":return"Errored";case"queued":return"Queued";case"marking":return"Marking...";case"submitted":return"Submitted"}},asideLabel:function(){if("none"===this.submission.type||"errored"===this.submission.status||!this.submission.result.testcases.length)return"";var e=this.submission.result.testcases,t=e.filter((function(e){return e.passed})).length,n=e.length;return"".concat(t," / ").concat(n," passed")},testcaseItems:function(){var e=this;return this.result.testcases.map((function(t,n){var s={name:t.private?"".concat(t.name," (private)"):t.hidden?t.name?"".concat(t.name," (hidden)"):t.name||"Hidden testcase":t.name,icon:t.passed?"tick":"cross",score:t.score,max_score:t.max_score?t.max_score:0,feedback:t.feedback,expandFeedback:t.expand_feedback,hidden:t.hidden,passed:t.passed,stacktrace:t.stacktrace,checks:t.checks},i=!t.hidden||e.isStaff,r=!t.passed||t.feedback&&"custom"===e.submission.type||t.expand_feedback;return s.selectable=i&&r,s.class={clickable:s.selectable,expanded:e.selectedTestIndex===n,passed:t.passed,failed:!t.passed},s}))}}),watch:{result:{immediate:!0,handler:function(){this.selectedTestIndex=this.result&&this.autoOpen?this.testcaseItems.findIndex((function(e){return e.selectable&&(!e.passed||e.expandFeedback)})):-1}},selectedTestIndex:function(){var e=this;this.$nextTick((function(){var t=e.$refs.testDivs.find((function(e){return e.classList.contains("active")}));if(t){var n=D.o(t.parentNode);n&&D.D(n,t)}}))}},methods:{pluralize:c.pluralize,selectTest:function(e){if(e.selectable){var t=this.testcaseItems.indexOf(e);this.selectedTestIndex=this.selectedTestIndex===t?-1:t}},checkComponent:function(e){switch(e.type){case"check_diff":return"CheckDiffResult";case"check_status":return"CheckStatusResult";case"check_text":return"CheckTextResult";case"check_postgres_diff":return"DbCheckDiff";case"check_postgres_exec":return"DbCheckExec"}}}},N=(n("Ftro"),Object(d.a)(A,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"challenge-submission"},[e.outcomeLabel?n("h1",{staticClass:"csub-header",class:"csub-header-"+e.submission.status},[e._v("\n\t\t"+e._s(e.outcomeLabel)+"\n\t")]):e._e(),e._v(" "),e.submission.git_hash?n("div",{staticClass:"csub-container"},[n("div",{staticClass:"csub-git"},[e._v("\n\t\t\tGit commit "),n("code",[e._v(e._s(e.submission.git_hash))])])]):e._e(),e._v(" "),"none"===e.submission.type?n("div",{staticClass:"csub-container"},[n("p",[e._v("\n\t\t\tSubmission dated "),n("DateDisplay",{attrs:{date:e.submission.created_at}}),e._v(".\n\t\t")],1)]):e.result?[n("div",{staticClass:"csub-container"},[e.build?[e.build.ok?e._e():n("p",[e._v("Unable to build program")]),e._v(" "),e.build.output?[e._m(0),e._v(" "),n("pre",{staticClass:"csub-build"},[n("code",[e._v(e._s(e.build.output))])])]:e._e()]:e._e(),e._v(" "),e.result.feedback?n("p",{staticClass:"csub-feedback"},[e._v(e._s(e.result.feedback))]):e._e(),e._v(" "),e.run&&e.run.output?n("p",{staticClass:"csub-feedback"},[e._v(e._s(e.run.output))]):e._e(),e._v(" "),"custom"===e.submission.type&&e.run&&e.run.output?[e._m(1),e._v(" "),n("pre",{staticClass:"csub-run"},[n("code",[e._v(e._s(e.run.output))])])]:e._e(),e._v(" "),e.result.console_output&&e.result.console_output.length?[e._m(2),e._v(" "),n("ConsoleDisplay",{attrs:{lines:e.result.console_output}})]:e._e()],2),e._v(" "),e.build&&!e.build.ok||!e.testcaseItems.length?e._e():n("div",{staticClass:"csub-tests"},[n("div",{staticClass:"csub-container"},[n("h2",{staticClass:"csub-subheader"},[n("div",{staticClass:"csub-subheader-title"},[e._v("Testcases")]),e._v(" "),n("div",{staticClass:"csub-subheader-aside"},[e._v(e._s(e.asideLabel))])])]),e._v(" "),e._l(e.testcaseItems,(function(t,s){return n("div",{key:s,staticClass:"csub-test"},[n("div",{ref:"testDivs",refInFor:!0,staticClass:"csub-test-item",class:t.class,on:{click:function(n){return e.selectTest(t)}}},[n("Icon",{staticClass:"csub-test-chevron",attrs:{icon:"chevron-right"}}),e._v(" "),n("div",{staticClass:"csub-test-item-content"},[n("span",{staticClass:"csub-test-name"},[e._v(e._s(t.name))]),e._v(" "),n("Icon",{staticClass:"csub-test-icon",attrs:{icon:t.icon}}),e._v(" "),e.perTestcaseScores?n("span",{staticClass:"csub-test-score"},[e._v(e._s(t.max_score?t.score+" / "+t.max_score:t.score)+" "+e._s(e.pluralize(t.score,"point")))]):e._e()],1)],1),e._v(" "),e.selectedTestIndex===s?n("div",{staticClass:"csub-container"},[n("div",{staticClass:"csub-test-detail"},[t.feedback?n("p",{staticClass:"csub-test-feedback"},[e._v(e._s(t.feedback))]):e._e(),e._v(" "),e._l(t.checks,(function(t,s){return n(e.checkComponent(t),{key:s,tag:"component",attrs:{check:t}})})),e._v(" "),t.stacktrace?["web"===e.challengeType?n("JscoreStacktrace",{attrs:{stacktrace:t.stacktrace}}):n("Stacktrace",{attrs:{stacktrace:t.stacktrace}})]:e._e()],2)]):e._e()])}))],2)]:e._e()],2)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{staticClass:"csub-subheader"},[t("div",{staticClass:"csub-subheader-title"},[this._v("Build output")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{staticClass:"csub-subheader"},[t("div",{staticClass:"csub-subheader-title"},[this._v("Run output")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{staticClass:"csub-subheader"},[t("div",{staticClass:"csub-subheader-title"},[this._v("Console Output")])])}],!1,null,null,null));t.a=N.exports},"+Afr":function(e,t,n){"use strict";var s=n("oezD");n.n(s).a},"+D3M":function(e,t,n){},"+K8I":function(e,t,n){},"+KDJ":function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return v})),n.d(t,"a",(function(){return g}));n("pNMO"),n("4Brf"),n("0oug"),n("TeQF"),n("yq1k"),n("yXV3"),n("4mDm"),n("2B1R"),n("+2oP"),n("pDQq"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("PKPk"),n("FZtP"),n("3bBZ");var s=n("rePB"),i=n("o0o1"),r=n.n(i),a=(n("ls82"),n("vuIU")),o=n("md7G"),l=n("foSv"),c=n("Ji7U"),u=n("1OyB");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function e(){Object(u.a)(this,e),this.id=e.nextId++,this.parent=null,this.layout=null};p.nextId=1;var f=function(e){function t(){return Object(u.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(a.a)(t,[{key:"render",value:function(e){}},{key:"remove",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.parent&&this.parent.removeItem(this,e)}},{key:"activate",value:function(){this.parent&&(this.parent.selectedItem=this)}}]),t}(p),m=function(e){function t(){return Object(u.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(a.a)(t,[{key:"split",value:function(e){if(!this.layout)throw new Error("Detached from layout");var t=["up","down"].includes(e)?"vertical":"horizontal",n=["left","up"].includes(e)?"before":"after";if(!this.parent||this.parent.orientation!==t){var s=new b;s.orientation=t,s.frac=this.frac,this.parent?this.parent.replaceChild(this,s):this.layout.setRoot(s),s.insertChild(this,0),this.frac=1}var i=new v,r=this.parent.children.indexOf(this);return this.parent.insertChild(i,r+("after"===n?1:0)),i}}]),t}(p),v=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(o.a)(this,Object(l.a)(t).call(this))).frac=1,e.selectedItem=null,e.items=[],e}return Object(c.a)(t,e),Object(a.a)(t,[{key:"serialize",value:function(){return{type:this.type,frac:this.frac,selectedIndex:this.selectedIndex,items:this.items.slice()}}},{key:"fixSelectedIndex",value:function(){this.selectedIndex=0===this.items.length?-1:Math.max(0,Math.min(this.items.length-1,this.selectedIndex))}},{key:"remove",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.parent?this.parent.removeChild(this,e):this.layout&&this.layout.root===this&&this.layout.setRoot(null)}},{key:"insertItem",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e.remove(e.parent!==this),this.items.splice(t,0,e),e.parent=this,e.layout=this.layout,n&&(this.selectedItem=e)}},{key:"appendItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.insertItem(e,this.items.length,t)}},{key:"replaceItem",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t.remove();var s=this.items.indexOf(e);if(-1===s)throw new Error("oldItem is not an item of this pane");this.items.splice(s,1,t),e.parent=null,e.layout=null,t.parent=this,t.layout=this.layout,n&&(this.selectedItem=t)}},{key:"removeItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.items.indexOf(e);-1!==n&&(this.items.splice(n,1),e.parent=null,e.layout=null,this.fixSelectedIndex(),t&&this.removeSelfIfEmpty())}},{key:"removeSelfIfEmpty",value:function(){0===this.items.length&&this.remove()}},{key:"selectedIndex",get:function(){return this.items.indexOf(this.selectedItem)},set:function(e){this.selectedItem=this.items[e]||null}}]),t}(m);v.prototype.type="pane";var b=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(o.a)(this,Object(l.a)(t).call(this))).frac=1,e.orientation="horizontal",e.children=[],e.unwrapping=!1,e}return Object(c.a)(t,e),Object(a.a)(t,[{key:"serialize",value:function(){return{type:this.type,frac:this.frac,orientation:this.orientation,children:this.children.map((function(e){return e.serialize()}))}}},{key:"remove",value:function(){this.parent?this.parent.removeChild(this):this.layout&&this.layout.root===this&&this.layout.setRoot(null)}},{key:"insertChild",value:function(e,t){e.remove(),this.children.splice(t,0,e),e.parent=this,e.layout=this.layout}},{key:"appendChild",value:function(e){this.insertChild(e,this.children.length)}},{key:"removeChild",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.children.indexOf(e);-1!==n&&(this.children.splice(n,1),e.parent=null,e.layout=null,this.unwrapping||(1===this.children.length?this.unwrap():t&&this.removeSelfIfEmpty()))}},{key:"unwrap",value:function(){if(!this.unwrapping){this.unwrapping=!0;try{if(this.parent){for(var e=this.parent.children.indexOf(this),t=this.children.length-1;t>=0;t--)this.parent.insertChild(this.children[t],e);this.remove()}else this.layout&&1===this.children.length&&(this.layout.root=this.children[0],this.layout.root.parent=null,this.layout=null)}finally{this.unwrapping=!1}}}},{key:"removeSelfIfEmpty",value:function(){0===this.children.length&&this.remove()}},{key:"replaceChild",value:function(e,t){t.remove();var n=this.children.indexOf(e);if(-1===n)throw new Error("oldChild is not a child of this axis");this.children.splice(n,1,t),e.parent=null,e.layout=null,t.parent=this,t.layout=this.layout}},{key:"panes",value:r.a.mark((function e(){var t,n,s,i,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,n=!1,s=void 0,e.prev=3,i=this.children[Symbol.iterator]();case 5:if(t=(a=i.next()).done){e.next=16;break}if(!((o=a.value)instanceof v)){e.next=12;break}return e.next=10,o;case 10:e.next=13;break;case 12:return e.delegateYield(o.panes(),"t0",13);case 13:t=!0,e.next=5;break;case 16:e.next=22;break;case 18:e.prev=18,e.t1=e.catch(3),n=!0,s=e.t1;case 22:e.prev=22,e.prev=23,t||null==i.return||i.return();case 25:if(e.prev=25,!n){e.next=28;break}throw s;case 28:return e.finish(25);case 29:return e.finish(22);case 30:case"end":return e.stop()}}),e,this,[[3,18,22,30],[23,,25,29]])}))},{key:"items",value:r.a.mark((function e(){var t,n,s,i,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,n=!1,s=void 0,e.prev=3,i=this.panes()[Symbol.iterator]();case 5:if(t=(a=i.next()).done){e.next=11;break}return o=a.value,e.delegateYield(o.items(),"t0",8);case 8:t=!0,e.next=5;break;case 11:e.next=17;break;case 13:e.prev=13,e.t1=e.catch(3),n=!0,s=e.t1;case 17:e.prev=17,e.prev=18,t||null==i.return||i.return();case 20:if(e.prev=20,!n){e.next=23;break}throw s;case 23:return e.finish(20);case 24:return e.finish(17);case 25:case"end":return e.stop()}}),e,this,[[3,13,17,25],[18,,20,24]])}))}]),t}(m);b.prototype.type="axis";var g=function(){function e(){Object(u.a)(this,e),this.root=null}return Object(a.a)(e,null,[{key:"deserializePaneItem",value:function(e){if(!(e instanceof f)){var t=new f;return t.render=e.render,t}return e}},{key:"deserializePane",value:function(t,n){t=h({frac:1,selectedIndex:-1,items:[]},t);var s=new v;return s.items=t.items.map((function(t){return(t=e.deserializePaneItem(t)).parent=s,t})),s.layout=n,s.frac=t.frac,s.selectedIndex=t.selectedIndex,s}},{key:"deserializeAxis",value:function(t,n){t=h({frac:1,orientation:"horizontal",children:[]},t);var s=new b;return s.children=t.children.map((function(t){return(t=e.deserializeNode(t,n)).parent=s,t})),s.layout=n,s.frac=t.frac,s.orientation=t.orientation,s}},{key:"deserializeNode",value:function(t,n){switch(t.type){case"pane":return e.deserializePane(t,n);case"axis":return e.deserializeAxis(t,n)}}},{key:"deserialize",value:function(t){var n=new e;return n.root=e.deserializeNode(t,n),n}},{key:"relocateItem",value:function(e,t,n,s){var i=e.items[t];n.insertItem(i,s-(e===n&&t<s?1:0))}}]),Object(a.a)(e,[{key:"serialize",value:function(){return this.root.serialize()}},{key:"setRoot",value:function(e){this.root&&(this.root.layout=null,this.root=null),e&&(e.remove(),this.root=e,this.root.layout=this)}},{key:"panes",value:r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.root){e.next=7;break}if(!(this.root instanceof v)){e.next=6;break}return e.next=4,this.root;case 4:e.next=7;break;case 6:return e.delegateYield(this.root.panes(),"t0",7);case 7:case"end":return e.stop()}}),e,this)}))},{key:"getOrCreateFirstPane",value:function(){var e=this.panes().next().value;if(e)return e;var t=new v;return this.root?this.root.appendChild(t):this.setRoot(t),t}},{key:"findPane",value:function(e){var t=!0,n=!1,s=void 0;try{for(var i,r=this.panes()[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;if(e(a))return a}}catch(o){n=!0,s=o}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}}},{key:"items",value:r.a.mark((function e(){var t,n,s,i,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,n=!1,s=void 0,e.prev=3,i=this.panes()[Symbol.iterator]();case 5:if(t=(a=i.next()).done){e.next=11;break}return o=a.value,e.delegateYield(o.items,"t0",8);case 8:t=!0,e.next=5;break;case 11:e.next=17;break;case 13:e.prev=13,e.t1=e.catch(3),n=!0,s=e.t1;case 17:e.prev=17,e.prev=18,t||null==i.return||i.return();case 20:if(e.prev=20,!n){e.next=23;break}throw s;case 23:return e.finish(20);case 24:return e.finish(17);case 25:case"end":return e.stop()}}),e,this,[[3,13,17,25],[18,,20,24]])}))},{key:"itemsOfType",value:r.a.mark((function e(){var t,n,s,i,a,o,l,c,u,d=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=d.length,n=new Array(t),s=0;s<t;s++)n[s]=d[s];i=!0,a=!1,o=void 0,e.prev=4,l=r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.value,!n.some((function(e){return t instanceof e}))){e.next=4;break}return e.next=4,t;case 4:case"end":return e.stop()}}),e)})),c=this.items()[Symbol.iterator]();case 7:if(i=(u=c.next()).done){e.next=12;break}return e.delegateYield(l(),"t0",9);case 9:i=!0,e.next=7;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(4),a=!0,o=e.t1;case 18:e.prev=18,e.prev=19,i||null==c.return||c.return();case 21:if(e.prev=21,!a){e.next=24;break}throw o;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}}),e,this,[[4,14,18,26],[19,,21,25]])}))},{key:"findItem",value:function(e){var t=!0,n=!1,s=void 0;try{for(var i,r=this.items()[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;if(e(a))return a}}catch(o){n=!0,s=o}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}}}]),e}()},"+Nfg":function(e,t,n){},"+O0b":function(e,t,n){},"+Rd/":function(e,t,n){},"+c/7":function(e,t,n){},"+iXx":function(e,t,n){},"+inH":function(e,t,n){},"+kKW":function(e,t,n){"use strict";var s=n("Gk3n");n.n(s).a},"+qff":function(e,t,n){},"+sSL":function(e,t,n){},"+sZi":function(e,t,n){"use strict";var s=n("GKT2");n.n(s).a},"+vuJ":function(e,t,n){},"+zYh":function(e,t,n){"use strict";var s=n("kGqS");n.n(s).a},"/6WO":function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("fbCW"),n("qePV"),n("5DmW"),n("27RR"),n("tkto"),n("UxlC"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("L2JU"),l=n("Q2AE"),c=n("5/Cn"),u=n("43W2"),d=n("tjHA");function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f,m,v={name:"Course",components:{StatusMessage:u.a,EdButtonLink:d.a},inject:["streamService","eventBus","courseApi"],props:{courseId:{type:Number,required:!0}},data:function(){return{statusMessage:null,forceLocked:!1}},computed:p({},Object(o.e)(["user"]),{},Object(o.c)(["isAdmin","isUserAdmin","isLockdownActive","isCourseLocked"]),{appbar:function(){return{title:this.course?this.course.code:"",visible:!0}},course:{get:function(){return this.$store.state.course},set:function(e){this.$store.commit(l.c.SET_COURSE,e)}},realm:{get:function(){return this.$store.state.realm},set:function(e){this.$store.commit(l.c.SET_REALM,e)}}}),watch:{courseId:"update",isLockdownActive:function(e){e&&"course"!==this.$route.name&&!this.$route.matched.some((function(e){return"assessments"===e.name}))&&this.$router.push({name:this.course.features.assessments?"assessments":"course"})}},beforeRouteEnter:function(e,t,n){n((function(t){var n=t.handleRouteChange(e);n&&t.$router.replace(n)}))},beforeRouteUpdate:function(e,t,n){var s=this.handleRouteChange(e);s?n(s):n()},created:function(){this.streamDisposable=null,this.eventBusDisposable=this.eventBus.on("course:lock",this.onLock),this.update()},destroyed:function(){this.course=null,this.realm=null,this.streamDisposable&&(this.streamDisposable.dispose(),this.streamDisposable=null),this.eventBusDisposable.dispose()},methods:p({},Object(o.b)({loadLabs:l.a.LOAD_LABS}),{onLock:function(e){switch(e){case"lesson":this.$router.push({name:"lessons"});break;case"course":this.forceLocked=!0}},handleRouteChange:function(e){if("inactive"===this.course.status){if(!this.isAdmin)return{name:"course"};if("course"===e.name)return{name:"admin"}}if(this.isLockdownActive)return this.course.features.assessments?e.matched.some((function(e){return"assessments"===e.name}))?null:{name:"assessments"}:"course"!==e.name?{name:"course"}:null;if("course"===e.name){var t=this.course.settings.default_page||"";if(!this.course.features[t])for(var n=0,s=["discussion","resources","challenges","assessments","workspaces","sway"];n<s.length;n++){var i=s[n];if(t=this.course.features[i]&&i)break}if("discussion"===t&&(t="discuss-landing"),t)return{name:t}}},update:(m=Object(r.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.course||this.course.id!==this.courseId){e.next=2;break}return e.abrupt("return");case 2:return this.streamDisposable&&(this.streamDisposable.dispose(),this.streamDisposable=null),this.course=this.user.courses.find((function(e){return e.id===t.courseId})),this.streamDisposable=this.streamService.subscribe("course",this.course.id),this.realm=this.course&&this.user.realms.find((function(e){return e.id===t.course.realm_id})),e.next=8,this.loadLabs();case 8:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)}),enroll:(f=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.courseApi.enrollUsers(this.courseId,[{id:this.user.id,role:"admin"}]);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),c.a({icon:"error",title:"Unable to enroll into the course",text:"The request failed."}),e.abrupt("return");case 9:location.reload();case 10:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(){return f.apply(this,arguments)})})},b=n("KHd+"),g=Object(b.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isCourseLocked||e.forceLocked?n("StatusMessage",{scopedSlots:e._u([{key:"subtext",fn:function(){return[e._v("\n\t\tSpeak to your instructor for more information about which browser you should be using for this course.\n\t")]},proxy:!0}],null,!1,822211740)},[e._v("\n\t"+e._s(e.course.code)+" is locked because you are not using an approved browser.\n\t")]):e.course&&("inactive"!==e.course.status||e.isAdmin)&&e.user&&"course"!==e.$route.name?n("RouterView"):e.course&&"inactive"===e.course.status&&!e.isAdmin?n("StatusMessage",{scopedSlots:e._u([{key:"subtext",fn:function(){return[n("p",[e._v("\n\t\t\tAccess is restricted until it is activated by an instructor."),n("br"),e._v("\n\t\t\tIf the instructor has activated the course, you may need to refresh\n\t\t\tthe page.\n\t\t")]),e._v(" "),n("p",[n("RouterLink",{attrs:{to:{name:"dashboard"}}},[e._v("Back to Dashboard")])],1)]},proxy:!0}])},[e._v("\n\t"+e._s(e.course.code)+" has not been activated yet.\n\t")]):e.course&&e.isLockdownActive?n("StatusMessage",{scopedSlots:e._u([{key:"subtext",fn:function(){return[n("p",[e._v("Access has been temporarily restricted.")]),e._v(" "),n("p",[n("RouterLink",{attrs:{to:{name:"dashboard"}}},[e._v("Back to Dashboard")])],1)]},proxy:!0}])},[e._v("\n\tExam Mode\n\t")]):e.course?e._e():n("StatusMessage",{scopedSlots:e._u([{key:"subtext",fn:function(){return[n("p",[e._v("Either you are not enrolled in this course or the course does not exist.")]),e._v(" "),n("p",[n("RouterLink",{attrs:{to:{name:"dashboard"}}},[e._v("Back to Dashboard")])],1),e._v(" "),n("p",[e.isUserAdmin?n("EdButtonLink",{on:{click:e.enroll}},[e._v("Enroll into the course")]):e._e()],1)]},proxy:!0}])},[e._v("\n\tAccess denied\n\t")])}),[],!1,null,null,null);t.default=g.exports},"/AAE":function(e,t,n){"use strict";var s=n("pfCn");n.n(s).a},"/FP+":function(e,t,n){"use strict";var s=n("Vrw3");n.n(s).a},"/NnU":function(e,t,n){"use strict";var s,i=n("o0o1"),r=n.n(i),a=(n("ls82"),n("HaE+")),o={props:{logs:{type:Array,required:!0}},created:function(){this.atBottom=!0,this.wasHidden=!1},beforeUpdate:function(){0===this.$el.clientHeight?this.wasHidden=!0:(this.atBottom=this.wasHidden||this.$el.scrollTop===this.$el.scrollHeight-this.$el.clientHeight,this.wasHidden=!1)},updated:(s=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.atBottom){e.next=4;break}return e.next=3,this.$nextTick();case 3:this.$el&&(this.$el.scrollTop=this.$el.scrollHeight-this.$el.clientHeight);case 4:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},l=(n("ry1Z"),n("KHd+")),c=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"web-snippet-logs"},e._l(e.logs,(function(t,s){return n("div",{key:s,staticClass:"wsnipl-item",class:t.level},[e._v(e._s(t.message))])})),0)}),[],!1,null,null,null);t.a=c.exports},"/OkB":function(e,t,n){},"/PA5":function(e,t,n){},"/QQx":function(e,t,n){"use strict";var s=n("sefE");n.n(s).a},"/SVr":function(e,t,n){"use strict";var s=n("Jo1o");n.n(s).a},"/VsW":function(e,t,n){},"/bFL":function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("yXV3"),n("4mDm"),n("pDQq"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("FZtP"),n("3bBZ");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("L2JU"),l=n("SBq4"),c=n("NC1X"),u=n("4K9I"),d=n("5G72"),h=n("xtk+"),p=n("IbLZ"),f=n("WmPt"),m=n("JBdv"),v=n("2ejt");function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var g={components:{Docs:n("Cf05").a},data:function(){return{gitHost:"git.edstem.org"}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.e)(["user"]))},y=n("KHd+"),w=Object(y.a)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Docs",[n("p",[e._v("\n\t\t\tA SSH key is a secure way to identify yourself.\n\t\t")]),e._v(" "),n("h2",[e._v("Background")]),e._v(" "),n("p",[e._v("\n\t\t\tSSH keys are generated in pairs, consisting of a "),n("em",[e._v("public")]),e._v(" key and a "),n("em",[e._v("private")]),e._v(" key. You keep the "),n("em",[e._v("private")]),e._v(" key for youself and give the "),n("em",[e._v("public")]),e._v(" key to a service that you wish to identify yourself to.\n\t\t")]),e._v(" "),n("p",[n("b",[e._v("Never reveal your "),n("em",[e._v("private key")]),e._v(" to anyone.")])]),e._v(" "),n("h2",[e._v("Creating SSH keys")]),e._v(" "),n("p",[e._v("\n\t\t\tYou can create a SSH key using the following command:\n\t\t\t"),n("pre",[e._v("$ ssh-keygen")]),e._v(" "),n("pre",[e._v("Generating public/private rsa key pair.\nEnter file in which to save the key (~/.ssh/id_rsa):\nCreated directory '~/.ssh'.\nEnter passphrase (empty for no passphrase):\nEnter same passphrase again:\nYour "),n("b",[e._v("identification")]),e._v(" has been saved in "),n("b",[e._v("~/.ssh/id_rsa")]),e._v(".\nYour "),n("b",[e._v("public key")]),e._v(" has been saved in "),n("b",[e._v("~/.ssh/id_rsa.pub")]),e._v(".\nThe "),n("b",[e._v("key fingerprint")]),e._v(" is:\n"),n("em",[e._v("{fingerprint}")]),e._v(" {user}@{host}\nThe key's randomart image is:\n+---[RSA 2048]----+\n| ..              |\n|.  .       .     |\n| .  .   + +      |\n|.  .   . *       |\n|..o + o S        |\n| +.= + +         |\n| .O.E *          |\n|..+&oB..+        |\n|.+BOB+=+.o       |\n+----[SHA256]-----+\n\t\t\t")])]),e._v(" "),n("p",[e._v("The public key has the file extension "),n("em",[e._v(".pub")]),e._v(". It is a text file. It looks like this:")]),e._v(" "),n("pre",[e._v("$ cat ~/.ssh/id_rsa.pub")]),e._v(" "),n("pre",[e._v("ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDC0rhYTlCcuRo ... [snip] ...")]),e._v(" "),n("p",[e._v("The private key has no file extension (by default) and looks like this:")]),e._v(" "),n("pre",[e._v("$ cat ~/.ssh/id_rsa")]),e._v(" "),n("pre",[e._v("-----BEGIN RSA PRIVATE KEY-----\nMIIEpAIBAAKCAQEAwtK4WE5QnLkaAfeNYUUV4eZHrfZV/EHpKQUeH4OfSPpEYoR8\neKIDB40Qb1k9r3WueqG3nvycj5kaUZcgF1h2/x9KDj6AD7inySn0JlcVYPjtrdIV\ndo+EOyFlA/t6fAEuLh0gK3acs07nvc62BEbKS8mWCVaJmFp4tUPki0JcQJptVZHI\n... [snip] ...")]),e._v(" "),n("p",[e._v("Again, never reveal your "),n("em",[e._v("private key")]),e._v(" to anyone.")]),e._v(" "),n("p",[e._v("The key fingerprint is a string generated from your key pair that allow you to identify it without needing to use the file name.")]),e._v(" "),n("h2",[e._v("SSH keys on Ed")]),e._v(" "),n("p",[e._v("To add your SSH key to your Ed account:")]),e._v(" "),n("p",[n("ol",[n("li",[e._v('Click on "New Key"')]),e._v(" "),n("li",[e._v("Set a descriptive title for your key")]),e._v(" "),n("li",[e._v("Paste in the contents of your "),n("b",[e._v("public key")]),e._v(' into "Public key"')]),e._v(" "),n("li",[e._v('Click on "Add SSH Key"')])])]),e._v(" "),n("h2",[e._v("Testing your key on Ed")]),e._v(" "),n("p",[e._v("To test if your SSH key is configured properly:")]),e._v(" "),n("pre",[e._v("$ ssh "+e._s(e.gitHost))]),e._v(" "),n("p",[e._v("Your should see this output:")]),e._v(" "),n("pre",[e._v("                       dMN\n                       dMN\n     yhdddho    oydddhsdMN\n   sNMdy yNMd  oNMNhyhmMMN\n   NMm    yMMs mMN     mMN\n  oMMNmmmmmmms NMm     hMN\n   NMm         dMNo    mMN\n   omMNdhhdmd  omMNdhdNmMN\n      syhhyso    oyhhyooyy\n\n  Hello "+e._s(e.user.name)+"!\n\n  You have successfully authenticated.\n  To access your git repository, use `git clone`\n\nConnection to "+e._s(e.gitHost)+" closed.")]),e._v(" "),n("h2",[e._v("Ed public fingerprints")]),e._v(" "),n("p",[e._v("When you connect to "),n("code",[e._v(e._s(e.gitHost))]),e._v(" for the first time. You will also see this message:")]),e._v(" "),n("pre",[e._v("The authenticity of host '"+e._s(e.gitHost)+" {IP Address}' can't be established.\nRSA key fingerprint is "),n("b",[e._v("{fingerprint}")]),e._v(".\nAre you sure you want to continue connecting (yes/no)?")]),e._v("\n\t\tThis is a security measure by your SSH client to prevent a Man-In-The-Middle attack.\n\t\tVerify that the "),n("code",[n("em",[e._v("{fingerprint}")])]),e._v(" is one of the following:\n\t\t"),n("pre",[e._v("SHA256:++J3tM4fntvDiz5xY/tusu9k349Jn3CAnG/U1GJn9/o.\nSHA256:7GOaaZW8CaeOA+ClUZU6b5amFh4Ai65z5ZEEupOo1B0.")]),e._v(" "),n("h2",[e._v("Troubleshooting")]),e._v(" "),n("p",[n("code",[e._v("Your public key is not associated with any users. Please verify that you have added it and is using the right key.")])]),e._v(" "),n("p",[e._v("If you receive this message, your SSH client is using a key that is not registered with Ed")]),e._v(" "),n("p",[e._v("You can find out which key it is using with following command:")]),e._v(" "),n("pre",[e._v("$ ssh -v "+e._s(e.gitHost))]),e._v(" "),n("pre",[e._v("debug1: Reading configuration data /etc/ssh/ssh_config\ndebug1: /etc/ssh/ssh_config line 19: Applying options for *\ndebug1: Connecting to "+e._s(e.gitHost)+" [IP Address] port 22.\ndebug1: Connection established.\n...\n[ snip ]\n...\ndebug1: Authentications that can continue: publickey\ndebug1: Next authentication method: publickey\ndebug1: Offering public key: RSA "),n("b",[e._v("{fingerprint}")]),e._v(" "),n("b",[e._v("{private key}")]),e._v("\n...\n[ snip ]\n...")]),e._v(" "),n("p",[e._v("\n\t\t\tVerify that the "),n("em",[n("code",[e._v("{fingerprint}")])]),e._v(" matches the key you've added to Ed. Verify that the "),n("em",[e._v("private key")]),e._v(" matches the public key you've added to Ed.\n\t\t")]),e._v(" "),n("p",[n("code",[e._v("{user}@"+e._s(e.gitHost)+": Permission denied (publickey).")])]),e._v(" "),n("p",[e._v("If you receive this message, your SSH client has not been configured to use a SSH key.")]),e._v(" "),n("h2",[e._v("Further reading")]),e._v(" "),n("p",[e._v("\n\t\t\tFor more information, please refer to the Arch Linux Wiki article on "),n("a",{attrs:{rel:"noopener noreferer",href:"https://wiki.archlinux.org/index.php/SSH_keys"}},[e._v("SSH Keys")]),e._v(".\n\t\t")])])}),[],!1,null,null,null).exports,_=n("/Yj0"),k=n("5/Cn");function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var x,j,O,S={inject:["userApi"],directives:{Autofocus:l.a},components:{Spinner:c.a,EdButton:u.a,EdTextarea:d.a,EdInput:h.a,EdField:p.a,Icon:f.a,DateDisplay:m.a,ContentDialog:v.a,DocsSSH:w},data:function(){return{keysLoading:!1,keys:[],newKeyVisible:!1,addKeyLoading:!1,keyTitle:"",keyKey:"",sshDocsVisible:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.e)(["user"])),created:function(){this.loadKeys()},methods:{loadKeys:(O=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.keysLoading=!0,e.prev=1,e.next=4,this.userApi.getSshKeys(this.user.id);case 4:this.keys=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),_.b({type:"error",text:"Unable to load SSH keys."});case 10:return e.prev=10,this.keysLoading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[1,7,10,13]])}))),function(){return O.apply(this,arguments)}),newKey:function(){this.newKeyVisible=!0},addKey:(j=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.addKeyLoading=!0,e.prev=1,e.next=4,this.userApi.createSshKey(this.keyTitle,this.keyKey);case 4:t=e.sent,this.keys.push(t),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),_.b({type:"error",text:422===e.t0.status?"The SSH key is invalid.":"Unable to add SSH key."}),e.abrupt("return");case 12:return e.prev=12,this.addKeyLoading=!1,e.finish(12);case 15:this.keyTitle="",this.keyKey="",this.newKeyVisible=!1,_.b({type:"success",text:"Added SSH key."});case 19:case"end":return e.stop()}}),e,this,[[1,8,12,15]])}))),function(){return j.apply(this,arguments)}),destroyKey:(x=Object(r.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.b({title:"Delete SSH key?",text:"This cannot be undone. If you would like to use it again in the future, you will need to upload it again.",icon:"warning",primaryAction:"Delete SSH Key"});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,this.userApi.destroySshKey(t.id);case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(4),_.b({type:"error",text:"Unable to delete SSH key."}),e.abrupt("return");case 13:-1!==(n=this.keys.indexOf(t))&&this.keys.splice(n,1),_.b({type:"success",text:"Deleted SSH key."});case 16:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(e){return x.apply(this,arguments)})}},E=(n("AkZq"),Object(y.a)(S,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{staticClass:"settings-heading"},[e._v("SSH Keys")]),e._v(" "),n("p",{staticClass:"settings-text"},[e._v("\n\t\tThis is a list of SSH keys associated with your account. You must register\n\t\ta valid SSH key if you want to clone a workspace with Git.\n\t")]),e._v(" "),n("div",{staticClass:"ched-field"},[n("EdButton",{on:{click:function(t){e.sshDocsVisible=!e.sshDocsVisible}}},[e._v("Learn more about SSH keys")])],1),e._v(" "),e.sshDocsVisible?[e.sshDocsVisible?n("ContentDialog",{attrs:{title:"SSH Keys"},on:{close:function(t){e.sshDocsVisible=!1}}},[n("div",{staticClass:"settings-scroller"},[n("div",{staticClass:"settings-container"},[n("DocsSSH")],1)])]):e._e()]:e._e(),e._v(" "),e.newKeyVisible?e._e():n("div",{staticClass:"settings-actions"},[n("EdButton",{on:{click:e.newKey}},[e._v("New Key")])],1),e._v(" "),e.newKeyVisible?n("div",{staticClass:"setssh-newkey"},[n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Title")]},proxy:!0}],null,!1,2416837851)},[e._v(" "),n("EdInput",{directives:[{name:"autofocus",rawName:"v-autofocus"}],attrs:{disabled:e.addKeyLoading},model:{value:e.keyTitle,callback:function(t){e.keyTitle=t},expression:"keyTitle"}})],1),e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Public key")]},proxy:!0},{key:"description",fn:function(){return[e._v("\n\t\t\t\tBegins with "),n("code",[e._v("ssh-rsa")]),e._v(", "),n("code",[e._v("ssh-dss")]),e._v(", "),n("code",[e._v("ssh-ed25519")]),e._v(",\n\t\t\t\t"),n("code",[e._v("ecdsa-sha2-nistp256")]),e._v(", "),n("code",[e._v("ecdsa-sha2-nistp384")]),e._v(",\n\t\t\t\tor "),n("code",[e._v("ecdsa-sha2-nistp521")]),e._v(".\n\t\t\t")]},proxy:!0}],null,!1,2854595188)},[e._v(" "),e._v(" "),n("EdTextarea",{staticClass:"settings-textarea",attrs:{disabled:e.addKeyLoading,spellcheck:"false"},model:{value:e.keyKey,callback:function(t){e.keyKey=t},expression:"keyKey"}})],1),e._v(" "),n("div",{staticClass:"settings-actions"},[n("Spinner",{directives:[{name:"show",rawName:"v-show",value:e.addKeyLoading,expression:"addKeyLoading"}],staticClass:"settings-spinner"}),e._v(" "),n("EdButton",{attrs:{type:"submit",disabled:e.addKeyLoading},on:{click:e.addKey}},[e._v("Add SSH Key")])],1)],1):e._e(),e._v(" "),e.keys.length?n("div",{staticClass:"setssh-keys"},e._l(e.keys,(function(t){return n("div",{key:t.id,staticClass:"setssh-layout"},[n("Icon",{staticClass:"setssh-icon",attrs:{icon:"key"}}),e._v(" "),n("div",{staticClass:"setssh-content"},[n("div",{staticClass:"setssh-title"},[e._v(e._s(t.title))]),e._v(" "),n("div",{staticClass:"setssh-fingerprint",attrs:{title:"MD5 Fingerprint"}},[n("code",[e._v(e._s(t.fingerprint))])]),e._v(" "),n("div",{staticClass:"setssh-date"},[e._v("Added on "),n("DateDisplay",{attrs:{date:t.created_at,format:"D MMM YYYY"}})],1)]),e._v(" "),n("EdButton",{staticClass:"setssh-delete danger",on:{click:function(n){return e.destroyKey(t)}}},[e._v("Delete")])],1)})),0):n("div",{staticClass:"setssh-nokeys"},[e._v(e._s(e.keysLoading?"Loading keys...":"No keys"))])],2)}),[],!1,null,null,null));t.default=E.exports},"/c/i":function(e,t,n){"use strict";var s=n("KGBD");n.n(s).a},"/fhb":function(e,t,n){},"/iFh":function(e,t,n){},"/iNE":function(e,t,n){"use strict";var s=n("MXDq");n.n(s).a},"/lWA":function(e,t,n){"use strict";t.a={provide:function(){var e=this,t={};return Object.defineProperty(t,"computed",{enumerable:!0,get:function(){switch(e.providedTheme){case"computed":return e.computedTheme;case"passThrough":return e.inheritedTheme;case"default":return"light";default:return}}}),{theme:t}},inject:{ancestorTheme:{from:"theme",default:null}},props:{theme:{type:String,default:null},providedTheme:{type:String,default:"computed"}},computed:{inheritedTheme:function(){return this.ancestorTheme&&this.ancestorTheme.computed||"light"},computedTheme:function(){return"default"===this.theme?"light":this.theme||this.inheritedTheme}}}},"/mGf":function(e,t,n){"use strict";var s=n("M/Nz");n.n(s).a},"/pkC":function(e,t,n){},"/pxM":function(e,t,n){"use strict";var s=n("Nli1");n.n(s).a},"/qqr":function(e,t,n){"use strict";var s=n("+Rd/");n.n(s).a},"/sYl":function(e,t,n){"use strict";var s=n("rLgb");n.n(s).a},"/tmi":function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("UxlC"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("L2JU"),l=n("BtCt"),c=n("/Yj0");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h,p={name:"LessonMaster",data:function(){return{appbar:{titleLarge:"%PREV% – Lessons"},transitionName:null}},computed:d({},Object(o.e)(["course"])),watch:{$route:function(e,t){var n=function(e){return"lesson-show"===e.name||"lesson-index"===e.name};this.transitionName=t.matched.some(n)&&e.matched.some(n)?"lesson-master":null}},created:function(){this.course.features.lessons?this.update():this.$router.replace({name:"course"})},destroyed:function(){this.resetState()},methods:d({},Object(o.d)("lesson",{resetState:l.c.RESET}),{},Object(o.b)("lesson",{loadLessons:l.a.LOAD_LESSONS}),{update:(h=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.loadLessons();case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),c.b({type:"error",text:"Could not load lessons."}),e.abrupt("return");case 9:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(){return h.apply(this,arguments)})})},f=(n("24pG"),n("KHd+")),m=Object(f.a)(p,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"lesson-master"},[t("Transition",{attrs:{name:this.transitionName}},[t("RouterView")],1)],1)}),[],!1,null,null,null);t.default=m.exports},"/wT1":function(e,t,n){"use strict";n("pNMO"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("UxlC"),n("FZtP");var s=n("rePB"),i=n("L2JU"),r=n("Q2AE"),a=n("clw3");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}t.a={inject:["eventBus","keyboardShortcutManager"],computed:{labs:{get:function(){return this.$store.state.labs},set:function(e){this.$store.commit(r.c.SET_LABS,e)}}},created:function(){this.baseDisposables=new a.a(this.eventBus.on("stream:lab.new",this.onStreamLabNew),this.eventBus.on("stream:lab.update",this.onStreamLabNew),this.eventBus.on("stream:lab.delete",this.onStreamLabDelete),this.eventBus.on("stream:lab.import",this.onStreamLabImport),this.keyboardShortcutManager.register({default:"Control+s",mac:"Meta+s"},this.save,{description:"Save course settings"}))},destroyed:function(){this.baseDisposables.dispose()},methods:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(i.d)({setLabs:r.c.SET_LABS,appendLabs:r.c.APPEND_LABS}),{onStreamLabNew:function(e){var t=e.data;this.appendLabs([t.lab])},onStreamLabDelete:function(e){var t=e.data;this.setLabs(this.labs.filter((function(e){return e.id!==t.labId})))},onStreamLabImport:function(e){var t=e.data;t.replace?this.setLabs(t.labs):this.appendLabs(t.labs)}})}},"/yQq":function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("hByQ"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("L2JU"),l=n("CXe4"),c=n("WmPt"),u=n("NC1X"),d=n("IbLZ"),h=n("tjHA"),p=n("oDEV"),f=n("/Yj0");n("4D86");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var v,b,g={components:{Terms:l.a,Icon:c.a,Spinner:u.a,EdField:d.a,EdButtonLink:h.a,FadeTransition:p.a},inject:["courseApi","sessionService"],props:{code:{type:String,required:!0}},data:function(){return{errorMessage:null,loadingCode:!1,loadingSubmit:!1,redirecting:!1,details:null,name:"",email:"",done:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.e)(["user"]),{loginRoute:function(){return{name:"login",query:{redirect:location.pathname+location.search}}}}),created:function(){this.loadDetails()},methods:{loadDetails:(b=Object(r.a)(i.a.mark((function e(){var t,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingCode=!0,e.prev=1,e.next=4,this.courseApi.getAccessCode(this.code);case 4:t=e.sent,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(1),this.errorMessage="Invalid activation code.",this.loadingCode=!1,e.abrupt("return");case 12:this.user&&this.user.courses.some((function(e){return e.id===t.courseId}))?(this.redirecting=!0,this.details=t,setTimeout((function(){n.$router.push({replace:!0,name:"course",params:{courseId:t.courseId}})}),1300)):t.hasOAuth?this.courseApi.useAccessCodeOAuth(this.code):(this.loadingCode=!1,this.details=t);case 13:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(){return b.apply(this,arguments)}),logout:function(){this.sessionService.logOut(),this.$router.push(this.loginRoute)},submit:(v=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.errorMessage=null,this.loadingSubmit=!0,e.prev=2,e.next=5,this.courseApi.useAccessCode(this.code,this.name,this.email);case 5:t=e.sent,e.next=28;break;case 8:e.prev=8,e.t0=e.catch(2),e.t1=e.t0.data&&e.t0.data.code,e.next="invalid_name"===e.t1?13:"invalid_email"===e.t1?13:"email_taken"===e.t1?16:"already_enrolled"===e.t1?19:24;break;case 13:return this.loadingSubmit=!1,this.errorMessage=e.t0.data.message,e.abrupt("break",27);case 16:return this.loadingSubmit=!1,this.errorMessage="That email address is already taken.",e.abrupt("break",27);case 19:return e.next=21,this.sessionService.logInWithExistingSession();case 21:return this.$router.push({name:"dashboard"}),f.b({type:"success",title:"Already enrolled",text:"You are already enrolled in ".concat(this.details.courseCode,".")}),e.abrupt("break",27);case 24:return this.errorMessage="Unable to join the course.",this.loadingSubmit=!1,e.abrupt("break",27);case 27:return e.abrupt("return");case 28:if(!this.user){e.next=35;break}return e.next=31,this.sessionService.logInWithExistingSession();case 31:this.$router.push({name:"course",params:{courseId:t}}),f.b({type:"success",title:"Join succcessful",text:"You now have access to ".concat(this.details.courseCode,".")}),e.next=37;break;case 35:this.loadingSubmit=!1,this.done=!0;case 37:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(){return v.apply(this,arguments)})}},y=(n("xrGP"),n("KHd+")),w=Object(y.a)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"start-container"},[n("form",{staticClass:"start-form",attrs:{method:"POST",novalidate:""},on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[n("div",{staticClass:"start-title"},[n("RouterLink",{attrs:{to:"/"}},[e._v("Ed")])],1),e._v(" "),e.errorMessage?n("div",{staticClass:"start-message"},[e._v(e._s(e.errorMessage))]):e._e(),e._v(" "),e.loadingCode?n("div",{staticClass:"start-join-loading"},[e.redirecting?n("Icon",{staticClass:"start-join-loading-tick",attrs:{icon:"tick"}}):e._e(),e._v(" "),n("FadeTransition",{attrs:{duration:.5,delay:.8}},[e.redirecting?n("div",{staticClass:"start-join-loading-message"},[e._v("\n\t\t\t\t\tRedirecting to "+e._s(e.details.courseCode)+"...\n\t\t\t\t")]):e._e()]),e._v(" "),e.redirecting?e._e():n("Spinner",{staticClass:"start-join-loading-spinner"})],1):e._e(),e._v(" "),e.done?n("div",{staticClass:"start-message"},[n("p",[e._v("We just sent you an email with an account activation link.")]),e._v(" "),n("p",[e._v("Check your junk mail if you cannot find it.")])]):e._e(),e._v(" "),e.done||e.redirecting||!e.details||e.user?e._e():n("div",{staticClass:"start-message"},[e._v("Already have an account? "),n("RouterLink",{attrs:{to:e.loginRoute}},[e._v("Log in")])],1),e._v(" "),n("FadeTransition",{attrs:{duration:.5}},[e.done||e.redirecting||!e.details?e._e():n("div",{staticClass:"start-join-details"},[e.user&&!e.redirecting?n("section",{staticClass:"start-join-details-user"},[e._v("\n\t\t\t\t\tHi there "+e._s(e.user.name)+"!"),n("br"),e._v(" "),n("EdButtonLink",{staticClass:"start-join-button-link",on:{click:e.logout}},[e._v("(Not you?)")])],1):e._e(),e._v(" "),n("section",[n("h3",{staticClass:"start-join-heading"},[e._v("Course Information")]),e._v(" "),n("table",{staticClass:"start-join-details-table"},[n("tr",[n("th",[e._v("Code")]),e._v(" "),n("td",[e._v(e._s(e.details.courseCode))])]),e._v(" "),n("tr",[n("th",[e._v("Name")]),e._v(" "),n("td",[e._v(e._s(e.details.courseName))])]),e._v(" "),n("tr",[n("th",[e._v("Year")]),e._v(" "),n("td",[e._v(e._s(e.details.courseYear))])]),e._v(" "),n("tr",[n("th",[e._v("Session")]),e._v(" "),n("td",[e._v(e._s(e.details.courseSession))])])])])])]),e._v(" "),e.done||!e.details||e.loadingCode||!e.user&&e.details.hasOAuth?e._e():[e.user?e._e():[n("EdField",{staticClass:"start-field",scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Full name")]},proxy:!0}],null,!1,1292121519)},[e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"start-input",attrs:{type:"text",disabled:e.loadingSubmit,autofocus:""},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),e._v(" "),n("EdField",{staticClass:"start-field",scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Email")]},proxy:!0}],null,!1,1485928759)},[e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"start-input",attrs:{type:"text",placeholder:"you@"+e.details.emailDomain,disabled:e.loadingSubmit},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})])],e._v(" "),n("button",{staticClass:"start-btn",attrs:{type:"submit",disabled:e.loadingSubmit}},[e._v("\n\t\t\t\t"+e._s(e.user?"Join course":"Create account")+"\n\t\t\t\t"),e.loadingSubmit?n("Spinner",{staticClass:"start-spinner"}):e._e()],1),e._v(" "),e.user?e._e():n("Terms")],e._v(" "),!e.user||e.loadingCode||e.redirecting?e._e():n("div",{staticClass:"start-footer"},[n("p",[n("RouterLink",{attrs:{to:{name:"dashboard"}}},[e._v("Back to Dashboard")])],1)])],2)])}),[],!1,null,null,null);t.default=w.exports},"/ykK":function(e,t,n){"use strict";n("qePV");var s=n("UNns"),i=n("TphV"),r={components:{Popup:s.a,Navbar:i.a},props:{title:{type:String,default:""},x:{type:Number,default:0},y:{type:Number,default:0}}},a=(n("jjcQ"),n("KHd+")),o=Object(a.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Popup",{attrs:{"target-left":e.x,"target-top":e.y,"light-dismissable":"",background:"rgb(241, 240, 232)"},on:{close:function(t){return e.$emit("close")}}},[n("div",{staticClass:"workspace-popup"},[n("Navbar",{staticClass:"wsp-navbar",attrs:{title:e.title}}),e._v(" "),n("div",{staticClass:"wsp-content"},[e._t("default")],2)],1)])}),[],!1,null,null,null);t.a=o.exports},"0/gM":function(e,t,n){"use strict";var s=n("VeOY");n.n(s).a},"04JP":function(e,t,n){},"0CZZ":function(e,t,n){},"0D7g":function(e,t,n){"use strict";var s=n("fp7K");n.n(s).a},"0EHH":function(e,t,n){"use strict";n("qePV");var s={functional:!0,props:{names:{type:Array,default:function(){return[]}},limit:{type:Number,default:3}},render:function(e,t){var n=t.props.names,s=t.props.limit,i=[],r=n.length-s;1===r&&(s--,r++);for(var a=Math.min(n.length,s),o=0;o<a;o++)i.push(e("strong",[n[o]])),r>0||o<a-2?i.push(", "):o===a-2&&i.push(" and ");return r>0&&i.push(" and ",e("strong",[r," others"])),i}},i=n("KHd+"),r=Object(i.a)(s,void 0,void 0,!1,null,null,null);t.a=r.exports},"0M2/":function(e,t,n){"use strict";var s=n("3O+Q");n.n(s).a},"0Tba":function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("0oug"),n("TeQF"),n("yq1k"),n("4mDm"),n("2B1R"),n("ToJy"),n("07d7"),n("JTJg"),n("PKPk"),n("SYor"),n("3bBZ");var s=n("U8pU"),i=n("qPyV"),r=n.n(i),a=n("hSdx"),o=n("0XH5"),l=n("6XG0"),c=n("N+tE"),u={components:{SearchInput:o.a,EdCheck:l.a,DisclosureButton:c.a},props:{questions:{type:Array,required:!0},disabled:{type:Boolean,default:!1}},data:function(){return{properties:[],searchQuery:""}},computed:{filteredQuestionsByProperties:function(){var e=this;return this.questions.filter((function(t){var n=!0,i=!1,r=void 0;try{for(var a,o=function(){var e=a.value;if(e.items.filter((function(e){return e.selected})).length&&!e.items.some((function(n){return n.selected&&n.value===t[e.name]})))return{v:!1}},l=e.properties[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=o();if("object"===Object(s.a)(c))return c.v}}catch(u){i=!0,r=u}finally{try{n||null==l.return||l.return()}finally{if(i)throw r}}return!0}))},filteredQuestions:function(){var e=this,t=this.searchQuery.trim().toLowerCase();return t?this.filteredQuestionsByProperties.filter((function(n){var s=!0,i=!1,r=void 0;try{for(var a,o=e.properties[Symbol.iterator]();!(s=(a=o.next()).done);s=!0){if(n[a.value.name].toLowerCase().includes(t))return!0}}catch(l){i=!0,r=l}finally{try{s||null==o.return||o.return()}finally{if(i)throw r}}return!1})):this.filteredQuestionsByProperties}},watch:{questions:{immediate:!0,handler:"update"},filteredQuestions:{immediate:!0,handler:function(e){e&&this.$emit("filtered",e)}}},methods:{pluralize:a.pluralize,update:function(){for(var e=this,t=[{name:"level",label:"Level"},{name:"topic",label:"Topic"},{name:"category",label:"Category"},{name:"subcategory",label:"Subcategory"},{name:"difficulty",label:"Difficulty"}],n=function(){var t=i[s];t.expanded=!0,t.items=r()(e.questions,(function(e){return e[t.name]})).map((function(e){return e[t.name]})).filter(Boolean).sort(a.naturalComparator).map((function(e){return{value:e,selected:!1}}))},s=0,i=t;s<i.length;s++)n();this.properties=t}}},d=(n("LAZP"),n("KHd+")),h=Object(d.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quiz-question-filter"},[n("div",{staticClass:"qqf-summary"},[e._v("\n\t\tShowing "+e._s(e.filteredQuestions.length)+"\n\t\t"),e.filteredQuestions.length!==e.questions.length?[e._v("of "+e._s(e.questions.length))]:e._e(),e._v("\n\t\t"+e._s(e.pluralize(e.questions.length,"question"))+"\n\t")],2),e._v(" "),n("SearchInput",{staticClass:"qqf-search",attrs:{placeholder:"Filter"},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),e._v(" "),e._l(e.properties,(function(t){return n("div",{key:t.name,staticClass:"qqf-prop"},[n("div",{staticClass:"qqf-prop-heading"},[n("DisclosureButton",{model:{value:t.expanded,callback:function(n){e.$set(t,"expanded",n)},expression:"prop.expanded"}},[e._v(e._s(t.label))])],1),e._v(" "),t.expanded?n("div",e._l(t.items,(function(t){return n("div",{key:t.value,staticClass:"qqf-prop-item"},[n("EdCheck",{attrs:{label:t.value},model:{value:t.selected,callback:function(n){e.$set(t,"selected",n)},expression:"item.selected"}})],1)})),0):e._e()])}))],2)}),[],!1,null,null,null);t.a=h.exports},"0XH5":function(e,t,n){"use strict";var s=n("WmPt"),i=n("xtk+"),r={components:{Icon:s.a,EdInput:i.a},props:{placeholder:{type:String,default:"Search"},value:{type:String,default:null}},methods:{onInput:function(e){this.$emit("input",e)},clear:function(){this.$emit("input","")}}},a=(n("Mg4X"),n("KHd+")),o=Object(a.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"search-input",class:{active:e.value}},[n("Icon",{staticClass:"si-glyph",attrs:{icon:"search"}}),e._v(" "),n("EdInput",{staticClass:"si-input",attrs:{placeholder:e.placeholder,value:e.value,spellcheck:"false"},on:{input:e.onInput,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.clear(t)}}}),e._v(" "),n("Icon",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],staticClass:"si-cancel",attrs:{icon:"cross"},on:{click:e.clear}})],1)}),[],!1,null,null,null);t.a=o.exports},"0Yai":function(e,t,n){"use strict";var s=n("6rGU");n.n(s).a},"0bPK":function(e,t,n){"use strict";n.r(t);n("pNMO"),n("4Brf"),n("0oug"),n("TeQF"),n("fbCW"),n("x0AG"),n("4mDm"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("PKPk"),n("FZtP"),n("3bBZ");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("L2JU"),l=(n("yq1k"),n("2B1R"),n("JTJg"),n("Q2AE")),c=n("/Yj0"),u=n("Pa8A"),d=n("WmPt"),h=n("CkVh"),p=n("Kaxq"),f={components:{Icon:d.a},inject:["notificationsService","eventBus"],data:function(){return{counter:0}},created:function(){var e=this;this.counter=this.notificationsService.counter,this.disposable=this.eventBus.on("notifications:counter",(function(){e.counter=e.notificationsService.counter}))},destroyed:function(){this.disposable.dispose()}},m=(n("2sKU"),n("KHd+")),v=Object(m.a)(f,(function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"notifications-icon"},[t("Icon",{staticClass:"ni-icon",attrs:{icon:"bell"}}),this._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:this.counter,expression:"counter"}],staticClass:"ni-badge"},[this._v(this._s(this.counter>20?"20+":this.counter))])],1)}),[],!1,null,null,null).exports,b=(n("YGK4"),{mounted:function(){this.interval=null,this.timeouts=new Set,this.start()},destroyed:function(){this.stop()},methods:{start:function(){var e=this;this.interval=setInterval((function(){var t=document.createElement("span");t.style.position="absolute",t.style.left=e.$el.clientWidth*Math.random()+"px",t.style.top=e.$el.clientHeight*Math.random()+"px",t.style.opacity=.5*Math.random()+.5,t.style.transform="rotate(".concat(360*Math.random(),"deg)"),t.innerHTML='\n\t\t\t\t<svg viewBox="0 0 24 24">\n\t\t\t\t\t<polygon fill="white" points="12,0 13.75,7.78 20.49,3.51 16.22,10.25 24,12 16.22,13.75 20.49,20.49 13.75,16.22 12,24 10.25,16.22 3.51,20.49 7.78,13.75 0,12 7.78,10.25 3.51,3.51 10.25,7.78"/>\n\t\t\t\t</svg>';var n=t.children[0];n.style.width=n.style.height=15*Math.random()+5+"px",n.style.animation="sparkle-animation 1s linear forwards",e.$el.appendChild(t);var s=setTimeout((function(){e.timeouts.delete(s),e.$el.removeChild(t)}),1e3);e.timeouts.add(s)}),100);var t=setTimeout((function(){e.timeouts.delete(t),e.stop()}),5e3);this.timeouts.add(t)},stop:function(){clearInterval(this.interval);var e=!0,t=!1,n=void 0;try{for(var s,i=this.timeouts[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){var r=s.value;clearTimeout(r)}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.interval=null,this.timeouts.clear()}}}),g=(n("w+pX"),Object(m.a)(b,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"sparkle"})}),[],!1,null,null,null).exports);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var w={directives:{Tooltip:u.a},components:{Icon:d.a,ContextMenuTrigger:h.a,ContextMenuItem:p.a,NotificationsIcon:v,Sparkle:g},inject:["sessionService"],data:function(){return{menuVisible:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.e)(["course","realm","user","date","isBlockingLockdownActive"]),{},Object(o.c)(["accentColor","accentSecondaryColor","appbarLogoUrl","computedAppbar","isAdmin","isLockdownActive","isCourseLocked"]),{cssClass:function(){return this.computedAppbar.styles.map((function(e){return"appbar-".concat(e)}))},style:function(){return{backgroundColor:this.computedAppbar.styles.includes("minimal")?"#fafafa":this.accentColor}},lockdownStyle:function(){return{backgroundColor:this.computedAppbar.styles.includes("minimal")?void 0:this.accentSecondaryColor}},notificationsVisible:{get:function(){return this.$store.state.notificationsVisible},set:function(e){this.$store.commit(l.c.SET_NOTIFICATIONS_VISIBLE,e)}},buttons:function(){var e=this.course,t=this.isAdmin,n=this.isLockdownActive,s=this.isCourseLocked,i=this.isBlockingLockdownActive;if(!e||"inactive"===e.status&&!t)return[];var r=[];return s||i||(n?e.features.assessments&&r.push({tooltip:"Assessments",icon:"assignment",props:{to:{name:"assessments"}}}):575===e.id?(e.features.workspaces&&r.push({tooltip:"Workspaces",icon:"workspace",emphasis:410===e.id||416===e.id,props:{to:{name:"workspaces"}}}),e.features.challenges&&r.push({tooltip:"Challenges",icon:"star",emphasis:411===e.id,props:{to:{name:"challenges"}}}),t&&r.push({tooltip:"Admin",icon:"settings",props:{to:{name:"admin"}}})):(e.features.resources&&r.push({tooltip:"Resources",icon:"download",props:{to:{name:"resources"}}}),e.features.discussion&&r.push({tooltip:"Discussion",icon:"discussion",props:{to:{name:"discuss"}}}),e.features.messages&&r.push({tooltip:"Chat",icon:"messages",props:{to:{name:"chat"}}}),e.features.workspaces&&r.push({tooltip:"Workspaces",icon:"workspace",emphasis:410===e.id||416===e.id,props:{to:{name:"workspaces"}}}),e.features.challenges&&r.push({tooltip:"Challenges",icon:"star",emphasis:411===e.id,props:{to:{name:"challenges"}}}),e.features.assessments&&r.push({tooltip:"Assessments",icon:"assignment",props:{to:{name:"assessments"}}}),e.features.lessons&&r.push({tooltip:"Lessons",icon:"book",props:{to:{name:"lessons"}}}),e.features.sway&&r.push({tooltip:"Sway",icon:"sway",props:{to:{name:"sway"}}}),571===e.id&&r.push({tooltip:"Tutorials",icon:"book",props:{href:"http://soit-web-pro-1.ucc.usyd.edu.au/courses/info1105/2017",target:"_blank",rel:"noopener noreferrer"}}),254===e.id&&r.push({tooltip:"Tutorials",icon:"book",props:{href:"http://sydney.edu.au/engineering/it/courses/info1105/2016",target:"_blank",rel:"noopener noreferrer"}}),394===e.id&&r.push({tooltip:"Tutorials",icon:"book",props:{href:"http://sydney.edu.au/engineering/it/courses/info1105/2017summer",target:"_blank",rel:"noopener noreferrer"}}),t&&e.features.analytics&&r.push({tooltip:"Analytics",icon:"analytics",props:{to:{name:"analytics"}}}),t&&r.push({tooltip:"Admin",icon:"settings",props:{to:{name:"admin"}}}))),r}}),methods:{toggleNotifications:function(){this.notificationsVisible=!this.notificationsVisible},logOut:function(){this.sessionService.logOut(),this.$router.push({name:"login"}),c.b({type:"success",title:"Logout successful",text:"See you next time!"})}}},_=(n("5m66"),Object(m.a)(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"appbar",class:e.cssClass,style:e.style},[n("div",{staticClass:"appbar-group ed"},[n("RouterLink",{staticClass:"appbar-btn ed",attrs:{to:{name:e.user?"dashboard":"landing"},"aria-label":"Ed"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:(t.preventDefault(),t.target.click())}}},[n("div",{staticClass:"appbar-btn-ripple"}),e._v(" "),n("Icon",{staticClass:"appbar-icon",attrs:{icon:"ed"}})],1)],1),e._v(" "),e.appbarLogoUrl?n("img",{staticClass:"appbar-logo",attrs:{src:e.appbarLogoUrl}}):e._e(),e._v(" "),n("div",{staticClass:"appbar-group title"},[e._v(e._s(e.computedAppbar.titleLarge))]),e._v(" "),e.buttons.length?n("div",{staticClass:"appbar-group sections"},[e._l(e.buttons,(function(t,s){return[n(t.props.to?"RouterLink":"a",e._b({directives:[{name:"tooltip",rawName:"v-tooltip",value:t.tooltip,expression:"btn.tooltip"}],key:s,tag:"component",staticClass:"appbar-btn",on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:(t.preventDefault(),t.target.click())}},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:(t.preventDefault(),t.target.click())}}},"component",t.props,!1),[n("div",{staticClass:"appbar-btn-ripple"}),e._v(" "),n("Icon",{staticClass:"appbar-icon",attrs:{icon:t.icon}}),e._v(" "),t.emphasis?n("Sparkle",{staticClass:"appbar-sparkle"}):e._e()],1)]}))],2):e._e(),e._v(" "),e.user?n("div",{staticClass:"appbar-group user"},[e.isBlockingLockdownActive?e._e():n("RouterLink",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Home",expression:"'Home'"}],staticClass:"appbar-btn",attrs:{to:{name:"dashboard"}},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:(t.preventDefault(),t.target.click())}}},[n("div",{staticClass:"appbar-btn-ripple"}),e._v(" "),n("Icon",{staticClass:"appbar-icon",attrs:{icon:"home"}})],1),e._v(" "),e.isBlockingLockdownActive||e.isLockdownActive?e._e():n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Notifications",expression:"'Notifications'"}],staticClass:"appbar-btn",class:{active:e.notificationsVisible},on:{click:function(t){return t.stopPropagation(),e.toggleNotifications(t)}}},[n("div",{staticClass:"appbar-btn-ripple"}),e._v(" "),n("NotificationsIcon",{staticClass:"appbar-icon"})],1),e._v(" "),n("ContextMenuTrigger",{attrs:{active:e.menuVisible},on:{"update:active":function(t){e.menuVisible=t}},scopedSlots:e._u([{key:"trigger",fn:function(t){var s=t.trigger,i=t.attrs;return[n("button",e._b({directives:[{name:"tooltip",rawName:"v-tooltip",value:"Account",expression:"'Account'"}],staticClass:"appbar-btn",class:{"router-link-active":e.$route.matched.some((function(e){return"settings"===e.name}))},on:{click:s}},"button",i,!1),[n("div",{staticClass:"appbar-btn-ripple"}),e._v(" "),n("Icon",{staticClass:"appbar-icon",attrs:{icon:"person"}})],1)]}},{key:"items",fn:function(){return[e.isBlockingLockdownActive?e._e():n("ContextMenuItem",{key:"settings",attrs:{text:"Settings"},on:{click:function(t){return e.$router.push({name:"settings"})}}}),e._v(" "),n("ContextMenuItem",{key:"logOut",attrs:{text:"Log Out"},on:{click:e.logOut}})]},proxy:!0}],null,!1,2244892511)})],1):e._e(),e._v(" "),e.isLockdownActive||e.isBlockingLockdownActive?n("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Features are limited during this time",expression:"'Features are limited during this time'"}],staticClass:"appbar-lockdown",style:e.lockdownStyle},[n("div",{staticClass:"appbar-lockdown-heading"},[e._v("Exam Mode")]),e._v(" "),n("div",{staticClass:"appbar-lockdown-name"},[e._v(e._s(e.user.name))])]):e._e()])}),[],!1,null,null,null).exports),k=n("TphV"),C=n("2PkB");function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var j={components:{Navbar:k.a,NavbarButton:C.a},inject:["notificationsService","eventBus"],computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.c)(["accentColor","computedAppbar"]),{cssClasses:function(){return this.computedAppbar.styles.map((function(e){return"appbar-small-".concat(e)}))},style:function(){return{backgroundColor:this.computedAppbar.styles.includes("minimal")?"#fafafa":this.accentColor}},notificationsCount:function(){return this.notificationsService.counter}}),methods:{onHamburgerAction:function(){this.eventBus.emit("hamburger:toggle")}}},O=(n("Po4X"),Object(m.a)(j,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Navbar",{staticClass:"appbar-small",class:e.cssClasses,style:e.style,attrs:{title:e.computedAppbar.titleSmall},scopedSlots:e._u([{key:"left",fn:function(){return[e.computedAppbar.hamburger?n("NavbarButton",{staticClass:"abp-action abp-action-hamburger",attrs:{icon:"hamburger"},on:{action:e.onHamburgerAction}},[e.notificationsCount?n("div",{staticClass:"abp-notif-count"},[e._v("\n\t\t\t\t"+e._s(e.notificationsCount>20?"20+":e.notificationsCount)+"\n\t\t\t")]):e._e()]):e._e(),e._v(" "),e._l(e.computedAppbar.secondaryActions,(function(e,t){return n("NavbarButton",{key:t,staticClass:"abp-action",attrs:{icon:e.icon,text:e.text,type:e.type,disabled:e.disabled},on:{action:e.handler}})}))]},proxy:!0},{key:"right",fn:function(){return e._l(e.computedAppbar.primaryActions,(function(e,t){return n("NavbarButton",{key:t,staticClass:"abp-action",attrs:{icon:e.icon,text:e.text,type:e.type,disabled:e.disabled},on:{action:e.handler}})}))},proxy:!0}])})}),[],!1,null,null,null).exports),S=(n("Tskq"),n("F3Tp")),E=n("JBdv");function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var I,D={components:{Avatar:S.a,DateDisplay:E.a},inject:["notificationsService"],data:function(){return{notificationsServiceProxy:null}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.e)(["user"]),{coursesMap:function(){return new Map(this.user.courses.map((function(e){return[e.id,e.code]})))}}),created:function(){this.notificationsServiceProxy=this.notificationsService},methods:{getNotificationCourse:function(e){return this.coursesMap.get(e.courseId)},markAllAsRead:(I=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.notificationsService.markAllAsClicked();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),c.b({type:"error",title:"Unable to mark all notifications as read"});case 8:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(){return I.apply(this,arguments)}),onClickGroup:function(e){var t=this.notificationsService.clickGroup(e);this.$router.push(t),this.$emit("item-click")}}},P=(n("gklb"),Object(m.a)(D,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"notifications"},[n("div",{staticClass:"notif-header"},[n("span",{staticClass:"notif-heading"},[e._v("Notifications")]),e._v(" "),n("span",{staticClass:"notif-mark-read",on:{click:e.markAllAsRead}},[e._v("Mark All as Read")])]),e._v(" "),n("div",{staticClass:"notif-items"},[n("TransitionGroup",{attrs:{tag:"div"}},e._l(e.notificationsServiceProxy.groups,(function(t){return n("div",{key:t.groupId,staticClass:"notif-item",class:{unvisited:t.unvisited}},[n("div",{staticClass:"notif-content",on:{click:function(n){return e.onClickGroup(t)}}},[n("div",{staticClass:"notif-content-inner"},[n("Avatar",{staticClass:"notif-avatar",attrs:{user:t.user,bot:t.user&&-1===t.user.id}}),e._v(" "),n("div",{staticClass:"notif-body"},[n("div",{staticClass:"notif-title",domProps:{innerHTML:e._s(t.html)}}),e._v(" "),n("div",{staticClass:"notif-footer"},[n("span",[e._v(e._s(e.getNotificationCourse(t)))]),e._v("\n\t\t\t\t\t\t\t\t•\n\t\t\t\t\t\t\t\t"),n("DateDisplay",{attrs:{date:t.latestDate,format:"fromNow"}})],1)])],1)]),e._v(" "),n("div",{staticClass:"notif-delete",attrs:{title:"Delete Notification"},on:{click:function(n){return n.stopPropagation(),e.notificationsServiceProxy.deleteGroup(t)}}},[n("svg",{attrs:{viewBox:"0 0 12 12"}},[n("path",{attrs:{d:"M0,0 L12,12 M12,0 L0,12"}})])])])})),0),e._v(" "),e.notificationsServiceProxy.noMore&&!e.notificationsServiceProxy.groups.length?n("div",{staticClass:"notif-none"},[e._v("\n\t\t\tAll caught up\n\t\t")]):e._e(),e._v(" "),e.notificationsServiceProxy.noMore&&e.notificationsServiceProxy.groups.length?n("div",{staticClass:"notif-no-more"},[e._v("\n\t\t\tNo more notifications\n\t\t")]):e._e(),e._v(" "),e.notificationsServiceProxy.noMore?e._e():n("div",{staticClass:"notif-load-more",on:{click:function(t){return t.stopPropagation(),e.notificationsServiceProxy.loadMore()}}},[e._v("\n\t\t\tLoad more\n\t\t")])],1)])}),[],!1,null,null,null).exports),A=n("OH48");function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M={components:{PopupLayer:A.a,Icon:d.a,Navbar:k.a,NavbarButton:C.a,NotificationsIcon:v,Notifications:P},inject:["notificationsService","sessionService","eventBus"],data:function(){return{visible:!1,notificationsVisible:!1}},computed:R({},Object(o.e)(["user","course"]),{},Object(o.c)(["isAdmin","isLockdownActive","isCourseLocked","hamburgerLogoUrl"]),{tutorialsLink:function(){switch(this.course.id){case 571:return"http://soit-web-pro-1.ucc.usyd.edu.au/courses/info1105/2017"}}}),watch:{visible:function(e){this.setScrollDisabled(e)},notificationsVisible:function(e){e&&this.notificationsService.see()}},mounted:function(){this.disposable=this.eventBus.on("hamburger:toggle",this.toggleVisibility)},destroyed:function(){this.disposable.dispose()},methods:R({},Object(o.d)([l.c.SET_SCROLL_DISABLED]),{toggleVisibility:function(){this.visible=!this.visible},hide:function(){this.visible=!1},showNotifications:function(){this.notificationsVisible=!0},logOut:function(){this.sessionService.logOut(),this.$router.push({name:"landing"}),c.b({title:"Logout successful",text:"See you next time!"})},onAfterLeave:function(){this.notificationsVisible=!1}})},L=(n("8CCd"),Object(m.a)(M,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("PopupLayer",[n("Transition",{on:{"after-leave":e.onAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"hamburger-menu",on:{click:e.hide}},[n("div",{staticClass:"hbm-pane"},[n("Navbar",{staticClass:"hbm-navbar",scopedSlots:e._u([{key:"left",fn:function(){return[n("NavbarButton",{staticClass:"hbm-hamburger",attrs:{icon:"hamburger"},on:{action:e.hide}})]},proxy:!0},{key:"right",fn:function(){return[e.hamburgerLogoUrl?n("img",{staticClass:"hbm-logo",attrs:{src:e.hamburgerLogoUrl}}):e._e()]},proxy:!0}])}),e._v(" "),n("div",{staticClass:"hbm-items-nav"},[e.user?n("RouterLink",{staticClass:"hbm-item",attrs:{to:{name:"dashboard"}}},[n("Icon",{staticClass:"hbm-item-icon",attrs:{icon:"home"}}),e._v(" "),n("div",{staticClass:"hbm-item-text"},[e._v("Dashboard")])],1):n("RouterLink",{staticClass:"hbm-item",attrs:{to:{name:"landing"}}},[n("Icon",{staticClass:"hbm-item-icon",attrs:{icon:"ed"}}),e._v(" "),n("div",{staticClass:"hbm-item-text"},[e._v("Homepage")])],1),e._v(" "),!e.course||e.isLockdownActive||e.isCourseLocked?e._e():[575===e.course.id?[e.course.features.workspaces?n("RouterLink",{staticClass:"hbm-item media-not-sm",attrs:{to:{name:"workspaces"}}},[n("Icon",{staticClass:"hbm-item-icon",attrs:{icon:"workspace"}}),e._v(" "),n("div",{staticClass:"hbm-item-text"},[e._v("Workspaces")])],1):e._e(),e._v(" "),e.course.features.challenges?n("RouterLink",{staticClass:"hbm-item media-not-sm",attrs:{to:{name:"challenges"}}},[n("Icon",{staticClass:"hbm-item-icon",attrs:{icon:"star"}}),e._v(" "),n("div",{staticClass:"hbm-item-text"},[e._v("Challenges")])],1):e._e(),e._v(" "),e.isAdmin?n("RouterLink",{staticClass:"hbm-item",attrs:{to:{name:"admin"}}},[n("Icon",{staticClass:"hbm-item-icon",attrs:{icon:"settings"}}),e._v(" "),n("div",{staticClass:"hbm-item-text"},[e._v("Admin")])],1):e._e()]:[e.course.features.resources?n("RouterLink",{staticClass:"hbm-item",attrs:{to:{name:"resources"}}},[n("Icon",{staticClass:"hbm-item-icon",attrs:{icon:"download"}}),e._v(" "),n("div",{staticClass:"hbm-item-text"},[e._v("Resources")])],1):e._e(),e._v(" "),e.course.features.discussion?n("RouterLink",{staticClass:"hbm-item",attrs:{to:{name:"discuss"}}},[n("Icon",{staticClass:"hbm-item-icon",attrs:{icon:"discussion"}}),e._v(" "),n("div",{staticClass:"hbm-item-text"},[e._v("Discussion")])],1):e._e(),e._v(" "),e.course.features.workspaces?n("RouterLink",{staticClass:"hbm-item media-not-sm",attrs:{to:{name:"workspaces"}}},[n("Icon",{staticClass:"hbm-item-icon",attrs:{icon:"workspace"}}),e._v(" "),n("div",{staticClass:"hbm-item-text"},[e._v("Workspaces")])],1):e._e(),e._v(" "),e.course.features.challenges?n("RouterLink",{staticClass:"hbm-item media-not-sm",attrs:{to:{name:"challenges"}}},[n("Icon",{staticClass:"hbm-item-icon",attrs:{icon:"star"}}),e._v(" "),n("div",{staticClass:"hbm-item-text"},[e._v("Challenges")])],1):e._e(),e._v(" "),e.course.features.assessments?n("RouterLink",{staticClass:"hbm-item media-not-sm",attrs:{to:{name:"assessments"}}},[n("Icon",{staticClass:"hbm-item-icon",attrs:{icon:"assignment"}}),e._v(" "),n("div",{staticClass:"hbm-item-text"},[e._v("Assessments")])],1):e._e(),e._v(" "),e.course.features.lessons?n("RouterLink",{staticClass:"hbm-item media-not-sm",attrs:{to:{name:"lessons"}}},[n("Icon",{staticClass:"hbm-item-icon",attrs:{icon:"book"}}),e._v(" "),n("div",{staticClass:"hbm-item-text"},[e._v("Lessons")])],1):e._e(),e._v(" "),e.tutorialsLink?n("a",{staticClass:"hbm-item",attrs:{href:e.tutorialsLink,target:"_blank",rel:"noopener noreferrer"}},[n("Icon",{staticClass:"hbm-item-icon",attrs:{icon:"book"}}),e._v(" "),n("div",{staticClass:"hbm-item-text"},[e._v("Tutorials")])],1):e._e(),e._v(" "),e.course.features.sway?n("RouterLink",{staticClass:"hbm-item",attrs:{to:{name:"sway"}}},[n("Icon",{staticClass:"hbm-item-icon",attrs:{icon:"sway"}}),e._v(" "),n("div",{staticClass:"hbm-item-text"},[e._v("Sway")])],1):e._e(),e._v(" "),e.course.features.analytics&&e.isAdmin?n("RouterLink",{staticClass:"hbm-item media-not-sm",attrs:{to:{name:"analytics"}}},[n("Icon",{staticClass:"hbm-item-icon",attrs:{icon:"analytics"}}),e._v(" "),n("div",{staticClass:"hbm-item-text"},[e._v("Analytics")])],1):e._e(),e._v(" "),e.isAdmin?n("RouterLink",{staticClass:"hbm-item",attrs:{to:{name:"admin"}}},[n("Icon",{staticClass:"hbm-item-icon",attrs:{icon:"settings"}}),e._v(" "),n("div",{staticClass:"hbm-item-text"},[e._v("Admin")])],1):e._e()]]],2),e._v(" "),n("div",{staticClass:"hbm-items-footer"},[e.user?[n("div",{staticClass:"hbm-item",on:{click:function(t){return t.stopPropagation(),e.showNotifications(t)}}},[n("NotificationsIcon",{staticClass:"hbm-item-icon"}),e._v(" "),n("div",{staticClass:"hbm-item-text"},[e._v("Notifications")])],1),e._v(" "),n("RouterLink",{staticClass:"hbm-item",attrs:{to:{name:"settings"}}},[n("Icon",{staticClass:"hbm-item-icon",attrs:{icon:"person"}}),e._v(" "),n("div",{staticClass:"hbm-item-text"},[e._v("Settings")])],1),e._v(" "),e.user?n("div",{staticClass:"hbm-item",on:{click:e.logOut}},[n("Icon",{staticClass:"hbm-item-icon",attrs:{icon:"log-out"}}),e._v(" "),n("div",{staticClass:"hbm-item-text"},[e._v("Log Out")])],1):e._e()]:n("RouterLink",{staticClass:"hbm-item",attrs:{to:{name:"login"}}},[n("Icon",{staticClass:"hbm-item-icon",attrs:{icon:"person"}}),e._v(" "),n("div",{staticClass:"hbm-item-text"},[e._v("Login")])],1)],2),e._v(" "),e.notificationsVisible?n("Notifications",{staticClass:"hbm-notif"}):e._e()],1)])])],1)}),[],!1,null,null,null).exports),F=n("KQm4"),B={inject:["keyboardShortcutManager"],created:function(){var e=this;this.disposable=this.keyboardShortcutManager.register("Escape",(function(){return e.close()}))},destroyed:function(){this.disposable.dispose()},methods:{close:function(){this.$emit("close")}}},q=(n("n1BI"),Object(m.a)(B,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"window"},[this._t("default"),this._v(" "),t("button",{staticClass:"window-close",on:{click:this.close}},[t("svg",{attrs:{viewBox:"0 0 8 8"}},[t("line",{attrs:{x1:"1",y1:"1",x2:"7",y2:"7"}}),this._v(" "),t("line",{attrs:{x1:"7",y1:"1",x2:"1",y2:"7"}})])])],2)}),[],!1,null,null,null).exports),$=n("kUIt"),U={inject:["keyboardShortcutManager"],components:{PopupLayer:A.a,Window:q,KeyboardShortcut:$.a},computed:{shortcuts:function(){return Object(F.a)(this.keyboardShortcutManager.eachShortcut()).filter((function(e){return e.description}))}},methods:{close:function(){this.$emit("close")}}},z=(n("5oCK"),Object(m.a)(U,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("PopupLayer",[n("div",{staticClass:"keyboard-shortcuts",on:{click:function(t){return t.target!==t.currentTarget?null:e.close(t)}}},[n("Window",{staticClass:"kbsc-window",on:{close:e.close}},[n("h1",{staticClass:"kbsc-heading"},[e._v("Keyboard Shortcuts")]),e._v(" "),n("table",{staticClass:"kbsc-table"},[n("thead",[n("tr",[n("th",[e._v("Action")]),e._v(" "),n("th",[e._v("Shortcut")])])]),e._v(" "),n("tbody",e._l(e.shortcuts,(function(t,s){return n("tr",{key:s},[n("td",[e._v(e._s(t.description))]),e._v(" "),n("td",[n("KeyboardShortcut",{attrs:{value:t.shortcut.string}})],1)])})),0)])])],1)])}),[],!1,null,null,null).exports),V=n("t19P"),H=n("clw3"),W=n("9Arg"),Q=n("loy4"),K=n("5/Cn"),Y=n("r+vx");function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var X,J,Z={name:"App",components:{Appbar:_,AppbarSmall:O,Notifications:P,HamburgerMenu:L,KeyboardShortcuts:z,HeaderContainer:V.a},inject:["discussApi","notificationsService","pageTitleService","eventBus","workspaceSettings","keyboardShortcutManager"],data:function(){return{keyboardShortcutsDialogVisible:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.e)(["user","scrollDisabled","isSmall","isBlockingLockdownActive"]),{},Object(o.c)(["computedAppbar","isLockdownActive"]),{notificationsVisible:{get:function(){return this.$store.state.notificationsVisible},set:function(e){this.$store.commit(l.c.SET_NOTIFICATIONS_VISIBLE,e)}},scrollbarAlwaysVisible:function(){return this.$route.matched.reduce((function(e,t){return null==t.meta.scrollbarVisible?e:t.meta.scrollbarVisible}),!1)}}),watch:{$route:function(){this.notificationsVisible=!1},scrollDisabled:function(e){W.F(!e)},computedAppbar:function(e){this.pageTitleService.setTitle(e.titleLarge)},notificationsVisible:function(e){e&&this.notificationsService.see()},isLockdownActive:function(e){e&&(this.notificationsVisible=!1)}},created:function(){var e=this;this.checkForUnsupportedBrowswer(),this.loadingDiscussionUnreadCounts=!1,this.refreshDiscussionUnreadCountsInterval=null;var t=function(){return e.$store.commit(l.c.SET_WORKSPACE_THEME,e.workspaceSettings.get("theme"))};t(),this.disposables=new H.a(this.eventBus.on("session:logged-in",this.onLoggedIn),this.eventBus.on("session:logged-out",this.onLoggedOut),this.eventBus.on("discuss:thread-read",this.onThreadRead),this.eventBus.on("stream:course.count",this.onStreamCourseCount),this.eventBus.on("refresh-discussion-unread-counts",this.refreshDiscussionUnreadCounts),W.f(document,"click",this.onDocumentClick),this.workspaceSettings.onChange((function(){return t()})),this.keyboardShortcutManager.register("?",this.toggleKeyboardShortcutsDialog,{description:"Show this dialog"})),this.user&&this.onLoggedIn()},destroyed:function(){this.disposables.dispose()},beforeRouteUpdate:function(e,t,n){var s=function(e){var t=e.findIndex((function(e){return"app"===e.name}));return-1===t?null:e[t+1]},i=s(t.matched),r=s(e.matched);!this.$refs.container||!this.$refs.container.$refs.content||t&&i&&r&&!i.path===r.path||(this.$refs.container.$refs.content.scrollTop=0),n()},methods:{clickNoop:function(){},checkForUnsupportedBrowswer:(J=Object(r.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Q.get("unsupportedBrowserAlert")&&!this.isSmall){e.next=2;break}return e.abrupt("return");case 2:if(!Y.b){e.next=8;break}return e.next=5,K.d({icon:"warning",title:"Your browser is unsupported or out of date",text:"Certain features may not work correctly if you continue. We recommend using a secure browser such as Google Chrome for the best experience.",primaryAction:"Download Chrome",secondaryAction:"Ignore"});case 5:t=e.sent,Q.set("unsupportedBrowserAlert",new Date),t&&(n="https://www.google.com/intl/en/chrome/browser",W.z(n)||(window.location=n));case 8:case"end":return e.stop()}}),e,this)}))),function(){return J.apply(this,arguments)}),refreshDiscussionUnreadCounts:(X=Object(r.a)(i.a.mark((function e(){var t,n,s,r,a,o,l,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loadingDiscussionUnreadCounts){e.next=2;break}return e.abrupt("return");case 2:return this.loadingDiscussionUnreadCounts=!0,e.prev=3,e.next=6,this.discussApi.getThreadUnreadCountsPerCourse();case 6:t=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return");case 12:return e.prev=12,this.loadingDiscussionUnreadCounts=!1,e.finish(12);case 15:for(n=!0,s=!1,r=void 0,e.prev=18,a=this.user.courses[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)l=o.value,c=t[l.id],u=l.discussion.unreadTypes,c?(l.discussion.unread=c.unread,u.question=c.unread_questions,u.post=c.unread_posts,u.announcement=c.unread_announcements):(l.discussion.unread=0,u.question=0,u.post=0,u.announcement=0);e.next=26;break;case 22:e.prev=22,e.t1=e.catch(18),s=!0,r=e.t1;case 26:e.prev=26,e.prev=27,n||null==a.return||a.return();case 29:if(e.prev=29,!s){e.next=32;break}throw r;case 32:return e.finish(29);case 33:return e.finish(26);case 34:case"end":return e.stop()}}),e,this,[[3,9,12,15],[18,22,26,34],[27,,29,33]])}))),function(){return X.apply(this,arguments)}),onLoggedIn:function(){var e=!0,t=!1,n=void 0;try{for(var s,i=this.user.courses[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){var r=s.value;this.$set(r,"discussion",{unread:0,unreadTypes:{question:0,post:0,announcement:0}}),this.$set(r,"userOnlineCount",0)}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.refreshDiscussionUnreadCountsInterval=setInterval(this.refreshDiscussionUnreadCounts,3e5),this.refreshDiscussionUnreadCounts()},onLoggedOut:function(){clearInterval(this.refreshDiscussionUnreadCountsInterval),this.refreshDiscussionUnreadCountsInterval=null},onThreadRead:function(e){var t=e.thread,n=e.course,s=e.read?-1:1,i=this.user.realms.find((function(e){return e.id===n.realm_id})),r=i&&i.settings.discuss_shared_category;if(r&&t.category===r){var a=!0,o=!1,l=void 0;try{for(var c,u=this.user.courses[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;d.realm_id===i.id&&(d.discussion.unread=Math.max(0,d.discussion.unread+s))}}catch(h){o=!0,l=h}finally{try{a||null==u.return||u.return()}finally{if(o)throw l}}}else n.discussion.unread=Math.max(0,n.discussion.unread+s)},onStreamCourseCount:function(e){var t=e.data,n=this.user.courses.find((function(e){return e.id===t.courseId}));n&&(n.userOnlineCount=t.count)},onDocumentClick:function(){this.notificationsVisible=!1},toggleKeyboardShortcutsDialog:function(){this.keyboardShortcutsDialogVisible=!this.keyboardShortcutsDialogVisible}}},ee=(n("ZvYO"),Object(m.a)(Z,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app",on:{click:e.clickNoop}},[n("HeaderContainer",{ref:"container",staticClass:"app-header-container",attrs:{"scrollbar-always-visible":e.scrollbarAlwaysVisible},scopedSlots:e._u([e.computedAppbar.visible?{key:"header",fn:function(){return[n("Appbar",{staticClass:"media-not-sm-device"}),e._v(" "),n("AppbarSmall",{staticClass:"media-sm-device"})]},proxy:!0}:null],null,!0)},[e._v(" "),n("RouterView")],1),e._v(" "),n("Transition",[e.notificationsVisible?n("div",{staticClass:"app-pane",on:{click:function(e){e.stopPropagation()}}},[n("Notifications",{staticClass:"app-notif",on:{"item-click":function(t){e.notificationsVisible=!1}}})],1):e._e()]),e._v(" "),n("HamburgerMenu"),e._v(" "),e.keyboardShortcutsDialogVisible?n("KeyboardShortcuts",{on:{close:function(t){e.keyboardShortcutsDialogVisible=!1}}}):e._e()],1)}),[],!1,null,null,null));t.default=ee.exports},"0cbp":function(e,t,n){},"0goA":function(e,t,n){"use strict";var s=n("EBF9");n.n(s).a},"0gpV":function(e,t,n){"use strict";var s=n("ySoy"),i={props:{src:{type:String,default:""},type:{type:String,default:""}},watch:{src:"update",type:"update"},mounted:function(){this.embed=null,this.update()},methods:{update:function(){this.embed&&(this.embed.remove(),this.embed=null),this.src&&("safari"===s.a?this.embed=document.createElement("iframe"):(this.embed=document.createElement("embed"),this.embed.type=this.type),this.embed.src=this.src,this.$el.insertBefore(this.embed,this.$el.firstChild))}}},r=(n("sNTH"),n("KHd+")),a=Object(r.a)(i,(function(){var e=this.$createElement;this._self._c;return this._m(0)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"embed-ex"},[t("div",{staticClass:"iframe-blocker",staticStyle:{display:"none"}})])}],!1,null,null,null);t.a=a.exports},"0hzj":function(e,t,n){"use strict";var s=n("AYx2");n.n(s).a},"0m4+":function(e,t,n){"use strict";var s=n("+D3M");n.n(s).a},"0prs":function(e,t,n){},"0r9+":function(e,t,n){"use strict";var s=n("J7ee");n.n(s).a},"0uxb":function(e,t,n){},"0yhy":function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("0oug"),n("4mDm"),n("07d7"),n("PKPk"),n("3bBZ");var s=n("KQm4"),i=n("o0o1"),r=n.n(i),a=(n("ls82"),n("qePV"),{components:{DisclosureButton:n("N+tE").a},props:{level:{type:Number,default:0},expandable:{type:Boolean,default:!1},expanded:{type:Boolean,default:!1},selected:{type:Boolean,default:!1}},computed:{cssClass:function(){return{expandable:this.expandable,selected:this.selected}},cssStyle:function(){return{paddingLeft:15*this.level+5+(this.expandable?0:15)+"px"}}}}),o=(n("tgAN"),n("KHd+")),l={components:{OutlineItem:Object(o.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"outline-item",class:e.cssClass,style:e.cssStyle,on:{click:function(t){return e.$emit("update:selected",!e.selected)}}},[e.expandable?n("DisclosureButton",{staticClass:"outit-expand",attrs:{value:e.expanded},on:{input:function(t){return e.$emit("update:expanded",t)}},nativeOn:{click:function(e){e.stopPropagation()}}}):e._e(),e._v(" "),n("div",{staticClass:"outit-content"},[e._t("default")],2)],1)}),[],!1,null,null,null).exports},props:{data:{type:Array,default:function(){return[]}},keySelector:{type:Function,default:function(e,t){return t}},childrenSelector:{type:Function,default:null},expandableSelector:{type:Function,default:function(){return!1}},expandedSelector:{type:Function,default:function(){return!1}},selectedSelector:{type:Function,default:function(){return!1}}},computed:{items:function(){var e=this.data,t=this.childrenSelector,n=this.expandableSelector,i=this.expandedSelector,a=this.selectedSelector,o=this,l=r.a.mark((function e(s,l){var c,u,d,h,p,f;return r.a.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:c=!0,u=!1,d=void 0,m.prev=3,h=r.a.mark((function s(){var c,u,d,h,p;return r.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return c=f.value,u=a(c),d=n(c),h=d&&t&&i(c),s.next=6,{data:c,level:l,selected:u,expandable:d,expanded:h,listeners:{"update:expanded":function(e){o.$emit("item-expand",{data:c,expanded:e})},"update:selected":function(e){o.$emit("item-select",{data:c,selected:e})}}};case 6:if(!h){s.next=10;break}if(null==(p=t(c))){s.next=10;break}return s.delegateYield(e(p,l+1),"t0",10);case 10:case"end":return s.stop()}}),s)})),p=s[Symbol.iterator]();case 6:if(c=(f=p.next()).done){m.next=11;break}return m.delegateYield(h(),"t0",8);case 8:c=!0,m.next=6;break;case 11:m.next=17;break;case 13:m.prev=13,m.t1=m.catch(3),u=!0,d=m.t1;case 17:m.prev=17,m.prev=18,c||null==p.return||p.return();case 20:if(m.prev=20,!u){m.next=23;break}throw d;case 23:return m.finish(20);case 24:return m.finish(17);case 25:case"end":return m.stop()}}),e,null,[[3,13,17,25],[18,,20,24]])}));return Object(s.a)(l(e,0))}}},c=(n("GttD"),Object(o.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"outline"},e._l(e.items,(function(t,s){return n("OutlineItem",e._g({key:e.keySelector(t.data,s),attrs:{level:t.level,selected:t.selected,expandable:t.expandable,expanded:t.expanded}},t.listeners),[e._t("default",null,{data:t.data,index:s,level:t.level,selected:t.selected,expandable:t.expandable,expanded:t.expanded})],2)})),1)}),[],!1,null,null,null));t.a=c.exports},"14EI":function(e,t,n){"use strict";var s=n("s20v");n.n(s).a},"1An/":function(e,t,n){},"1CrY":function(e,t,n){"use strict";var s=n("JX5o");n.n(s).a},"1F7D":function(e,t,n){},"1FpQ":function(e,t,n){"use strict";var s=n("XvJ0");n.n(s).a},"1Fsf":function(e,t,n){},"1Lt8":function(e,t,n){"use strict";var s=n("IHIm");n.n(s).a},"1N12":function(e,t,n){},"1SMr":function(e,t,n){},"1e2s":function(e,t,n){"use strict";var s=n("7sJX");n.n(s).a},"1hNB":function(e,t,n){"use strict";n("yXV3"),n("2B1R");var s=n("WmPt"),i={functional:!0,render:function(e,t){var n=t.props.items,i=t.parent,r=i.onBeforeItemLeave,a=i.onItemClick,o=i.onItemContextMenu,l=i.onItemMouseDown,c=i.onItemMouseEnter,u=i.onItemMouseLeave,d=i.itemKey,h=i.itemComponentSelector,p=i.selectedItem,f=n.map((function(t,n){var i=h(t);return e("div",{staticClass:"cov-item-container",key:d(t,n),class:{selected:p===t},on:{click:function(){return a(t)},contextmenu:function(e){e.preventDefault(),o(t,e)},mousedown:function(){return l(t)},mouseenter:function(){return c(t)},mouseleave:function(){return u(t)}}},[e(i,{staticClass:"cov-item",attrs:{data:t}}),(t.text||t.subtext)&&e("div",{staticClass:"cov-item-texts"},[t.text&&e("div",{staticClass:"cov-item-text"},[t.dot&&e("span",{staticClass:"cov-item-dot"}),t.hidden&&e(s.a,{attrs:{icon:"hidden"}}),t.link&&e(s.a,{attrs:{icon:"link"}}),t.lock&&e(s.a,{attrs:{icon:"lock"}}),t.text]),t.subtext&&e("div",{staticClass:"cov-item-subtext"},[t.subtext])])])}));return e("transition-group",{staticClass:"cov-items",attrs:{tag:"div"},on:{beforeLeave:r}},[f])}},r=n("KHd+"),a={components:{CollectionViewItems:Object(r.a)(i,void 0,void 0,!1,null,null,null).exports},model:{prop:"selectedItem",event:"item-selected"},props:{items:{type:Array,required:!0},itemComponent:{type:[Function,Object],required:!0},selectedItem:{type:Object,default:null},grouped:{type:Boolean,default:!1},itemsSelector:{type:Function,default:function(e){return e}},groupKey:{type:Function,default:function(e,t){return t}},itemKey:{type:Function,default:function(e,t){return t}}},computed:{itemComponentSelector:function(){var e=this;return"function"==typeof this.itemComponent?this.itemComponent:function(){return e.itemComponent}},selectedIndex:function(){return this.items.indexOf(this.selectedItem)}},methods:{onFocus:function(){var e=this;this.$nextTick((function(){!e.selectedItem&&e.items.length&&e.$emit("item-selected",e.items[0])}))},onItemClick:function(e){this.$emit("item-click",e)},onItemMouseDown:function(e){this.$emit("item-selected",e),this.$emit("item-mouse-down",e)},onItemMouseEnter:function(e){this.$emit("item-mouse-enter",e)},onItemMouseLeave:function(e){this.$emit("item-mouse-leave",e)},onItemContextMenu:function(e,t){this.$emit("item-selected",e),this.$emit("item-context-menu",{item:e,event:t})},onBeforeItemLeave:function(e){var t=e.getBoundingClientRect();e.style.position="fixed",e.style.left=Math.round(t.left)+"px",e.style.top=Math.round(t.top)+"px",e.style.margin="0"},selectDir:function(e){if(-1===this.selectedIndex)this.items.length&&this.$emit("item-selected",this.items[e>0?0:this.items.length-1]);else{var t=this.selectedIndex+e,n=this.items.length;this.$emit("item-selected",this.items[(t%n+n)%n])}}}},o=(n("w1g4"),Object(r.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"collection-view",attrs:{tabindex:"0"},on:{focus:e.onFocus,keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"right",39,t.key,["Right","ArrowRight"])?null:"button"in t&&2!==t.button?null:e.selectDir(1)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.selectDir(1)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.selectDir(-1)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.selectDir(-1)}]}},[e.grouped?e._l(e.items,(function(t,s){return n("div",{key:e.groupKey(t,s)},[e._t("header",null,{group:t}),e._v(" "),n("CollectionViewItems",{attrs:{items:e.itemsSelector(t)}})],2)})):n("CollectionViewItems",{attrs:{items:e.items}})],2)}),[],!1,null,null,null));t.a=o.exports},"1iFc":function(e,t,n){"use strict";var s=n("dGVo");n.n(s).a},"1lsy":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n("pNMO"),n("4Brf"),n("0oug"),n("TeQF"),n("x0AG"),n("4mDm"),n("2B1R"),n("Junv"),n("+2oP"),n("07d7"),n("5s+n"),n("TWNs"),n("JfAA"),n("YGK4"),n("PKPk"),n("ENF9"),n("3bBZ");var s=n("o0o1"),i=n.n(s),r=n("ODXe"),a=(n("ls82"),n("HaE+")),o=n("1OyB"),l=n("vuIU"),c=n("hSdx");function u(e){return e.nodeType===Node.TEXT_NODE?NodeFilter.FILTER_ACCEPT:e.nodeType===Node.ELEMENT_NODE?"CODE"===e.tagName||"PRE"===e.tagName?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}var d=new Set(["block","flex"]);function h(e){return e.nodeType===Node.ELEMENT_NODE&&d.has(getComputedStyle(e).display)}var p=new(function(){function e(t,n){Object(o.a)(this,e),this.delimiters=t,this.filter=n,this.leftRegexp=new RegExp(t.map((function(e){return"(".concat(c.escapeRegExp(e.left),")")})).join("|"),"g"),this.rightRegexps=new WeakMap;var s=!0,i=!1,r=void 0;try{for(var a,l=t[Symbol.iterator]();!(s=(a=l.next()).done);s=!0){var u=a.value;this.rightRegexps.set(u,new RegExp(c.escapeRegExp(u.right),"g"))}}catch(d){i=!0,r=d}finally{try{s||null==l.return||l.return()}finally{if(i)throw r}}}return Object(l.a)(e,[{key:"extract",value:function(e){var t=[];try{this.matches=t,this.range=null,this.delim=null,this.lastIndex=0,this.walker=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,{acceptNode:u}),this.walk()}finally{this.matches=null,this.range=null,this.delim=null,this.lastIndex=0,this.walker=null}return t}},{key:"walk",value:function(){for(var e=this.walker.nextNode();e;)if(h(e)||"BR"===e.nodeName)this.delim&&!this.delim.display?(this.lastIndex=this.range.startOffset+this.delim.left.length,this.delim=null,this.walker.node=e=this.range.startContainer):e=this.walker.nextNode();else if(this.delim){var t=this.rightRegexps.get(this.delim);t.lastIndex=this.lastIndex;var n=t.exec(e.nodeValue);n?"\\"===e.nodeValue.charAt(n.index-1)?this.lastIndex=t.lastIndex:/\s/.test(e.nodeValue.charAt(n.index-1))?(this.lastIndex=n.index,this.delim=null):(this.range.setEnd(e,t.lastIndex),!this.filter||this.filter(this.range,this.delim)?(this.matches.push({range:this.range,delimiter:this.delim}),this.lastIndex=t.lastIndex,this.delim=null):(this.lastIndex=this.range.startOffset+this.delim.left.length,this.delim=null,this.walker.node=e=this.range.startContainer)):(e=this.walker.nextNode(),this.lastIndex=0)}else{this.leftRegexp.lastIndex=this.lastIndex;var s=this.leftRegexp.exec(e.nodeValue);if(s)if("\\"===e.nodeValue.charAt(s.index-1)){var i=document.createRange();i.setStart(e,s.index-1),i.setEnd(e,s.index),this.matches.push({range:i,delimiter:null}),this.lastIndex=this.leftRegexp.lastIndex}else this.range=document.createRange(),this.range.setStart(e,s.index),this.lastIndex=this.leftRegexp.lastIndex,this.delim=this.delimiters[s.slice(1).findIndex((function(e){return void 0!==e}))];else e=this.walker.nextNode(),this.lastIndex=0}}}]),e}())([{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]);function f(e){return m.apply(this,arguments)}function m(){return(m=Object(a.a)(i.a.mark((function e(t){var s,a,o,l,c,u,d,h,f,m,v,b,g,y,w,_,k,C,x,j,O=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=O.length>1&&void 0!==O[1]?O[1]:{},e.next=3,Promise.all([n.e(27).then(n.t.bind(null,"Oy/b",7)),n.e(27).then(n.t.bind(null,"fNIL",7))]);case 3:a=e.sent,o=Object(r.a)(a,1),l=o[0],Array.isArray(t)||(t=[t]),c=!0,u=!1,d=void 0,e.prev=10,h=t[Symbol.iterator]();case 12:if(c=(f=h.next()).done){e.next=37;break}for(m=f.value,v=p.extract(m).reverse(),b=!0,g=!1,y=void 0,e.prev=18,w=v[Symbol.iterator]();!(b=(_=w.next()).done);b=!0)if((k=_.value).delimiter){C=(C=k.range.toString()).substring(k.delimiter.left.length,C.length-k.delimiter.right.length),x=document.createDocumentFragment();try{l.render(C,x,{displayMode:"boolean"==typeof s.display?s.display:k.delimiter.display,throwOnError:!1}),(j=x.childNodes[0]).title=j.title||C,k.range.deleteContents(),k.range.insertNode(j)}catch(i){}}else k.range.deleteContents();e.next=26;break;case 22:e.prev=22,e.t0=e.catch(18),g=!0,y=e.t0;case 26:e.prev=26,e.prev=27,b||null==w.return||w.return();case 29:if(e.prev=29,!g){e.next=32;break}throw y;case 32:return e.finish(29);case 33:return e.finish(26);case 34:c=!0,e.next=12;break;case 37:e.next=43;break;case 39:e.prev=39,e.t1=e.catch(10),u=!0,d=e.t1;case 43:e.prev=43,e.prev=44,c||null==h.return||h.return();case 46:if(e.prev=46,!u){e.next=49;break}throw d;case 49:return e.finish(46);case 50:return e.finish(43);case 51:case"end":return e.stop()}}),e,null,[[10,39,43,51],[18,22,26,34],[27,,29,33],[44,,46,50]])})))).apply(this,arguments)}},"1mnw":function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return h}));n("4mDm"),n("Tskq"),n("07d7"),n("5s+n"),n("p532"),n("PKPk"),n("3bBZ");var s,i=n("wGB5"),r=n.n(i),a=new Map;c();var o,l=(o=1,function(){return o++});function c(){(s=new r.a).addEventListener("message",(function(e){if(a.has(e.data.id)){var t=a.get(e.data.id);a.delete(e.data.id),t({error:e.data.error,result:e.data.result})}}))}function u(e,t){var n,i=new Promise((function(e){return n=e})),r=l();a.set(r,n),s.postMessage({id:r,method:e,data:t});var o=setTimeout((function(){o=null,s.terminate(),c(),a.delete(r),n({error:"Bot timed out"})}),1e3);return i.finally((function(){null!==o&&(clearTimeout(o),o=null)})),i}function d(e){return u("install",{source:e})}function h(e){return u("validateThread",e)}},"22jn":function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("0oug"),n("fbCW"),n("4mDm"),n("2B1R"),n("07d7"),n("PKPk"),n("Rm1S"),n("EnZy"),n("SYor"),n("3bBZ");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=(n("ma9I"),n("x0AG"),n("yXV3"),n("+2oP"),n("hSdx")),o=n("6XG0"),l=n("4K9I"),c=n("4cYw"),u=n("OH48");var d,h={components:{EdCheck:o.a,EdButton:l.a,EdSelect:c.a,PopupLayer:u.a},props:{records:{type:Array,required:!0}},data:function(){return{columns:null,errorMessage:null,ignoreHeader:!1,types:[{type:"email",label:"Email"},{type:"givenName",label:"Given Name"},{type:"surname",label:"Surname"},{type:"fullName",label:"Full Name"},{type:"tutorial",label:"Tutorial"}]}},mounted:function(){this.columns=this.records[0].map((function(e,t){return{number:t+1,preview:e,type:null}}));var e=this.columns.find((function(e){return/@/.test(e.preview)}));if(e)if(e.type="email",2===this.columns.length)this.columns.find((function(t){return t!==e})).type="fullName";else if(3===this.columns.length){var t=e.preview.match(/([a-z])([a-z]{3})\d{4}@uni\.sydney\.edu\.au/);if(t){var n=t[1],s=t[2],i=!0,r=!1,a=void 0;try{for(var o,l=this.columns[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value;if(c!==e&&0===c.preview.toLowerCase().indexOf(s)){c.type="surname";var u=!0,d=!1,h=void 0;try{for(var p,f=this.columns[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var m=p.value;if(!m.type&&0===m.preview.toLowerCase().indexOf(n)){m.type="givenName";break}}}catch(v){d=!0,h=v}finally{try{u||null==f.return||f.return()}finally{if(d)throw h}}break}}}catch(v){r=!0,a=v}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}}}},methods:{enforceMutualExclusivity:function(e){if(e.type){var t=!0,n=!1,s=void 0;try{for(var i,r=this.columns[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;a!==e&&(e.type!==a.type&&("fullName"!==e.type||"givenName"!==a.type&&"surname"!==a.type)&&("givenName"!==e.type&&"surname"!==e.type||"fullName"!==a.type)||(a.type=null))}}catch(o){n=!0,s=o}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}}},done:function(){var e={email:this.columns.findIndex((function(e){return"email"===e.type})),fullName:this.columns.findIndex((function(e){return"fullName"===e.type})),givenName:this.columns.findIndex((function(e){return"givenName"===e.type})),surname:this.columns.findIndex((function(e){return"surname"===e.type})),tutorial:this.columns.findIndex((function(e){return"tutorial"===e.type}))};if(-1!==e.email)if(-1===e.givenName||-1!==e.surname)if(-1===e.surname||-1!==e.givenName)if(-1!==e.givenName||-1!==e.surname||-1!==e.fullName){var t=function(e,t){var n=[],s=!0,i=!1,r=void 0;try{for(var o,l=e[Symbol.iterator]();!(s=(o=l.next()).done);s=!0){var c=o.value,u=[];if(-1!==t.fullName)u.push(a.titleCase(c[t.fullName]));else{var d=a.titleCase(c[t.givenName].split(/\s+/)[0]),h=a.titleCase(c[t.surname]);u.push("".concat(d," ").concat(h))}u.push(c[t.email]),-1!==t.tutorial&&c[t.tutorial]&&u.push(c[t.tutorial]),n.push(u.join(", "))}}catch(p){i=!0,r=p}finally{try{s||null==l.return||l.return()}finally{if(i)throw r}}return n.join("\n")}(this.records.slice(this.ignoreHeader?1:0),e);this.$emit("done",t)}else this.errorMessage="Please specify the full name column, or the given name and surname columns if the names are separate.";else this.errorMessage="Please specify the given name column.";else this.errorMessage="Please specify the surname column.";else this.errorMessage="Please specify the email column."},cancel:function(){this.$emit("cancel")}}},p=(n("ryIU"),n("KHd+")),f=Object(p.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("PopupLayer",[n("div",{staticClass:"user-importer"},[n("div",{staticClass:"userimp-inner"},[n("h1",{staticClass:"userimp"},[e._v("Import User Records")]),e._v(" "),n("p",[e._v("\n\t\t\t\tIt looks like you are attempting to paste user records\n\t\t\t\tfrom an Excel spreadsheet or some other data source.\n\t\t\t")]),e._v(" "),n("p",[e._v("\n\t\t\t\tIdentify the columns which correspond to each user's\n\t\t\t\t"),n("strong",[e._v("name")]),e._v(", "),n("strong",[e._v("email address")]),e._v("\n\t\t\t\tand "),n("strong",[e._v("tutorial")]),e._v(" (optional).\n\t\t\t\tAny other data is not needed and will be ignored.\n\t\t\t")]),e._v(" "),n("table",{staticClass:"userimp"},[n("tr",[n("th",[e._v("Column")]),e._v(" "),n("th",[e._v("First Record Preview")]),e._v(" "),n("th",[e._v("Type")])]),e._v(" "),e._l(e.columns,(function(t,s){return n("tr",{key:s},[n("td",{staticClass:"userimp-column"},[e._v(e._s(t.number))]),e._v(" "),n("td",{staticClass:"userimp-preview"},[e._v(e._s(t.preview))]),e._v(" "),n("td",{staticClass:"userimp-type"},[n("EdSelect",{on:{change:function(n){return e.enforceMutualExclusivity(t)}},model:{value:t.type,callback:function(n){e.$set(t,"type",n)},expression:"col.type"}},[n("option",{attrs:{value:""}}),e._v(" "),e._l(e.types,(function(t){return n("option",{key:t.type,domProps:{value:t.type}},[e._v(e._s(t.label))])}))],2)],1)])}))],2),e._v(" "),n("p",{staticClass:"userimp-error"},[e._v(e._s(e.errorMessage))]),e._v(" "),n("footer",{staticClass:"userimp"},[n("div",{staticClass:"userimp-footer-group"},[n("EdCheck",{attrs:{label:"Ignore first header row"},model:{value:e.ignoreHeader,callback:function(t){e.ignoreHeader=t},expression:"ignoreHeader"}})],1),e._v(" "),n("div",{staticClass:"userimp-footer-group"},[n("EdButton",{staticClass:"userimp-action",on:{click:e.cancel}},[e._v("Cancel")]),e._v(" "),n("EdButton",{staticClass:"userimp-action primary",on:{click:e.done}},[e._v("Continue")])],1)])])])])}),[],!1,null,null,null).exports,m=n("5G72"),v=n("5/Cn"),b={components:{UserImporter:f,EdTextarea:m.a},props:{disabled:{type:Boolean,default:!1},value:{type:String,required:!0},placeholder:{type:String,default:"Example: John Appleseed, john1234@uni.edu.au, Tutorial 1A;Tutorial 1B (optional, semicolon-delimitered)"}},data:function(){return{pasteData:null}},methods:{invitesPaste:function(e){var t=e.target;if(t.selectionEnd-t.selectionStart===t.value.length){if(e.clipboardData&&e.clipboardData.getData){var n=e.clipboardData.getData("text/plain").trim().split(/\r\n|\r|\n/g).map((function(e){return e.trim().split("\t").map((function(e){return e.trim()}))}));0===n.length||n[0].length<2||n.some((function(e){return e.length!==n[0].length}))||(this.pasteData=n,e.preventDefault(),t.blur())}}},importDone:function(e){this.$emit("input",e+"\n"),this.pasteData=null,v.d({icon:"info",title:"No users have been invited yet",text:"The text box has been populated with the relevant information from the data you pasted. You can now make changes to the data if necessary. Invitations will not be sent until you click the Invite button.",primaryAction:"OK"})},importCancel:function(){this.pasteData=null},getRecords:(d=Object(r.a)(i.a.mark((function e(){var t,n,s,r,o,l,c,u,d,h,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=this.value.split(/\r?\n/),s=!0,r=!1,o=void 0,e.prev=5,l=n[Symbol.iterator]();case 7:if(s=(c=l.next()).done){e.next=19;break}if(u=(u=c.value).trim()){e.next=12;break}return e.abrupt("continue",16);case 12:if(2===(d=u.split(",").map((function(e){return e.trim()}))).length||3===d.length){e.next=15;break}throw new Error("Input is invalid");case 15:t.push({name:d[0].trim(),email:d[1].trim(),tutorial:d[2]?d[2].trim():null});case 16:s=!0,e.next=7;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(5),r=!0,o=e.t0;case 25:e.prev=25,e.prev=26,s||null==l.return||l.return();case 28:if(e.prev=28,!r){e.next=31;break}throw o;case 31:return e.finish(28);case 32:return e.finish(25);case 33:if(!(h=t.find((function(e){return!a.isEmail(e.email)})))){e.next=38;break}return e.next=37,v.a({icon:"warning",title:"At least one of the invites has an invalid email address",text:"The invalid email address is ".concat(h.email,". Revise this invitation and try again."),primaryAction:"Revise"});case 37:return e.abrupt("return",null);case 38:if(p=t.find((function(e){return e.tutorial&&e.tutorial.match(/@/)})),e.t1=p,!e.t1){e.next=44;break}return e.next=43,v.b({icon:"warning",title:"Are you sure you have entered the data correctly?",text:"At least one of the invites has a tutorial which looks like an email address: ".concat(p.tutorial,"."),primaryAction:"It's Correct",secondaryAction:"Revise"});case 43:e.t1=!e.sent;case 44:if(!e.t1){e.next=46;break}return e.abrupt("return",null);case 46:return e.abrupt("return",t);case 47:case"end":return e.stop()}}),e,this,[[5,21,25,33],[26,,28,32]])}))),function(){return d.apply(this,arguments)})}},g=(n("vFu3"),Object(p.a)(b,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"invitations-input"},[n("EdTextarea",{staticClass:"invinp-textarea",attrs:{placeholder:e.placeholder,value:e.value,disabled:e.disabled,autocomplete:"off",spellcheck:"false"},on:{input:function(t){return e.$emit("input",t)},paste:e.invitesPaste}}),e._v(" "),e.pasteData?n("UserImporter",{attrs:{records:e.pasteData},on:{done:e.importDone,cancel:e.importCancel}}):e._e()],1)}),[],!1,null,null,null));t.a=g.exports},"24pG":function(e,t,n){"use strict";var s=n("f+aO");n.n(s).a},"26FR":function(e,t,n){"use strict";var s=n("8V1c");n.n(s).a},"281K":function(e,t,n){"use strict";var s=n("urG9");n.n(s).a},"2A3h":function(e,t,n){"use strict";var s=n("vFpM");n.n(s).a},"2L/q":function(e,t,n){"use strict";var s=n("dFez");n.n(s).a},"2N9M":function(e,t,n){},"2PkB":function(e,t,n){"use strict";n("pNMO"),n("ma9I"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("KQm4"),i=n("rePB"),r=n("L2JU"),a=n("WmPt");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var l={components:{Icon:a.a},props:{text:{type:String,default:""},preferTextHidden:{type:Boolean,default:!1},pressed:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},type:{type:String,default:null},icon:{type:String,default:null},to:{type:[String,Object],default:null}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(r.c)(["accentSecondaryColor"]),{cssClass:function(){var e=[];return this.type&&e.push(this.type),this.preferTextHidden&&e.push("prefer-text-hidden"),this.pressed&&e.push("pressed"),e},style:function(){return this.pressed?{color:this.accentSecondaryColor,fill:this.accentSecondaryColor}:void 0}}),methods:{onClick:function(e){this.disabled||(this.to&&this.$router.push(this.to),this.$emit("action",e))}},render:function(){var e=arguments[0],t=this.icon,n=this.text,i=this.disabled,r=this.to,o=this.cssClass,l=this.style,c=this.onClick,u=this.$scopedSlots,d=[t&&e(a.a,{class:"navbtn-icon",attrs:{icon:t}}),n&&e("span",{class:"navbtn-text"},[n])].concat(Object(s.a)(u.default&&u.default()||[]));return r?e("router-link",{staticClass:"navbar-button",class:o,style:l,attrs:{tabindex:"0","aria-disabled":i?"true":void 0,to:r,event:""},nativeOn:{click:c}},[d]):e("button",{staticClass:"navbar-button",class:o,style:l,attrs:{disabled:i,"aria-disabled":i?"true":void 0},on:{click:c}},[d])}},c=(n("Yv7X"),n("KHd+")),u=Object(c.a)(l,void 0,void 0,!1,null,null,null);t.a=u.exports},"2R6q":function(e,t,n){},"2RTD":function(e,t,n){"use strict";var s=n("WmPt"),i=n("/lWA"),r={components:{Icon:s.a},mixins:[i.a],props:{icon:{type:String,required:!0},pressed:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},computed:{cssClass:function(){return[this.pressed&&"pressed","wstbmb-".concat(this.computedTheme)]}}},a=(n("9RPp"),n("KHd+")),o=Object(a.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"workspace-toolbar-mini-button",class:e.cssClass,attrs:{disabled:e.disabled},on:{click:function(t){return e.$emit("click",t)}}},[n("Icon",{staticClass:"wstbmb-icon",attrs:{icon:e.icon}})],1)}),[],!1,null,null,null);t.a=o.exports},"2SbR":function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("XbcX"),n("4mDm"),n("2B1R"),n("ToJy"),n("c9m3"),n("Tskq"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("5s+n"),n("PKPk"),n("FZtP"),n("3bBZ");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("bt/X"),l=n.n(o),c=n("L2JU"),u=n("hSdx"),d=n("/Yj0"),h=n("V0Xi"),p=n("4cYw");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var m,v,b={components:{Cloner:h.a,EdSelect:p.a},inject:["lessonApi"],data:function(){return{status:"idle",items:[],hidden:!0}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(c.e)(["user","course"]),{groups:function(){var e=this,t=new Map(this.user.courses.map((function(e){return[e.id,e]}))),n=l()(this.items,(function(e){return e.lesson.courseId}));return Object.keys(n).flatMap((function(e){var s=t.get(+e);return s&&"admin"===s.role.role?{key:s.id,title:s.code,text:[s.session,s.year].filter(Boolean).join(", "),items:n[e],course:s}:[]})).sort(u.compositeComparator((function(t,n){return(t.course===e.course?0:1)-(n.course===e.course?0:1)}),(function(e,t){return u.naturalComparator(e.title,t.title)}),(function(e,t){return u.naturalComparator(e.text,t.text)})))}}),created:function(){this.update()},methods:{update:(v=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.status="loading",e.prev=1,e.next=4,this.lessonApi.getUserLessons();case 4:t=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),d.b({type:"error",text:"Unable to fetch lessons."}),e.abrupt("return");case 11:return e.prev=11,this.status="idle",e.finish(11);case 14:this.items=t.map((function(e){return{lesson:e,key:e.id,title:e.title,checked:!1,status:"idle"}}));case 15:case"end":return e.stop()}}),e,this,[[1,7,11,14]])}))),function(){return v.apply(this,arguments)}),clone:(m=Object(r.a)(i.a.mark((function e(t){var n,s,a,o=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.items,s=function(){var e=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.status="cloning",e.prev=1,e.next=4,o.lessonApi.cloneLesson(t.lesson.id,o.course.id,{hidden:o.hidden});case 4:t.status="success",e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(1),t.status="error",e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),this.status="cloning",e.next=5,u.promiseMap(n,s,{concurrency:5});case 5:return a=e.sent,e.next=8,new Promise((function(e){return setTimeout(e,500)}));case 8:this.status="done",a.every((function(e){return e.success}))?(d.b({type:"success",text:"Clone successful."}),this.done()):d.b({type:"error",text:"Some lessons failed to clone."});case 10:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)}),done:function(){this.$router.push({name:"lesson-index"})}}},g=(n("HQGe"),n("KHd+")),y=Object(g.a)(b,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"lesson-clone"},[n("Cloner",{attrs:{"item-type":"lesson","item-type-plural":"lessons",status:e.status,groups:e.groups},on:{clone:e.clone,done:e.done}},[n("h2",{staticClass:"cloner-heading"},[e._v("Options")]),e._v(" "),n("div",{staticClass:"lesson-clone-field"},[n("label",[e._v("Hidden status:")]),e._v(" "),n("EdSelect",{attrs:{disabled:"cloning"===e.status||"done"===e.status},model:{value:e.hidden,callback:function(t){e.hidden=t},expression:"hidden"}},[n("option",{domProps:{value:null}},[e._v("Do not change")]),e._v(" "),n("option",{domProps:{value:!0}},[e._v("Make hidden")]),e._v(" "),n("option",{domProps:{value:!1}},[e._v("Make visible")])])],1)])],1)}),[],!1,null,null,null);t.default=y.exports},"2Te8":function(e,t,n){"use strict";var s=n("Q9RH");n.n(s).a},"2U/o":function(e,t,n){"use strict";n("TeQF"),n("yq1k"),n("2B1R"),n("+2oP"),n("JTJg");var s=n("zBf9"),i=n("WmPt"),r=n("6XG0"),a=n("oLoy"),o=n("qJ5K"),l={components:{Icon:i.a,FormattedDisplay:o.a},extends:s.a,computed:{sanitizedValue:function(){var e=this;return this.value&&this.value.filter((function(t){return t>=0&&t<e.question.answers.length}))},computedValue:function(){return this.sanitizedValue||[]},items:function(){var e=this;return this.question.answers.map((function(t,n){return{index:n,checked:e.computedValue.includes(n),content:t}}))},checkComponent:function(){return this.question.multipleSelection?r.a:a.a},valid:function(){return this.computedValue.length>0}},created:function(){this.$emit("input",this.sanitizedValue&&this.sanitizedValue.slice())},methods:{toggleItem:function(e){if(this.editable){var t=this.computedValue.slice();e.checked?this.question.multipleSelection&&(t=t.filter((function(t){return t!==e.index}))):this.question.multipleSelection?t.push(e.index):t=[e.index],this.$emit("input",t)}},answerIcon:function(e){switch(this.itemCorrectClass(e)){case"correct":case"missing":return"tick";case"incorrect":return"cross"}},itemCorrectClass:function(e){if(null!=this.solution){var t=this.solution.includes(e.index);return this.question.multipleSelection?e.checked?t?"correct":"incorrect":t?"missing":void 0:t?"correct":e.checked?"incorrect":void 0}if(!this.question.multipleSelection&&null!=this.correct)return e.checked?this.correct?"correct":"incorrect":void 0},itemClass:function(e){var t={checked:e.checked},n=this.itemCorrectClass(e);return n&&(t[n]=!0),t},onContentClick:function(e){for(var t=!1,n=e.target;n&&n.nodeType===Node.ELEMENT_NODE;){if(n===this.$el||n.classList.contains("amber-content")){t=!0;break}n=n.parentNode}t||e.stopPropagation()}}},c=(n("NEWJ"),n("KHd+")),u=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quiz-question-show-mc",class:{enabled:e.editable}},[e._l(e.items,(function(t,s){return n("div",{key:s,staticClass:"qqsmc-item",class:e.itemClass(t),on:{click:function(n){return e.toggleItem(t)}}},[n(e.checkComponent,{tag:"component",staticClass:"qqsmc-check",attrs:{value:t.checked},on:{input:function(n){return e.toggleItem(t)}},nativeOn:{click:function(e){e.stopPropagation()}}},[n("FormattedDisplay",{attrs:{value:t.content,formatted:e.question.formatted,spans:e.spans},nativeOn:{click:function(t){return e.onContentClick(t)}}})],1),e._v(" "),e.answerIcon(t)?n("Icon",{staticClass:"qqsmc-icon",attrs:{icon:e.answerIcon(t)}}):e._e()],1)})),e._v(" "),!1===e.correct&&!e.solution&&e.question.multipleSelection?n("div",{staticClass:"qqsmc-feedback"},[n("Icon",{staticClass:"qqsmc-fb-icon",attrs:{icon:"cross"}}),e._v("\n\t\tSorry, that is incorrect. You need to select exactly the correct answer(s).\n\t")],1):e._e()],2)}),[],!1,null,null,null);t.a=u.exports},"2XLt":function(e,t,n){"use strict";var s=n("Pa8A"),i=n("WmPt"),r=n("xtk+"),a={directives:{Tooltip:s.a},components:{Icon:i.a,EdInput:r.a},props:{autoreload:{type:Boolean,default:!1},url:{type:String,default:""}},data:function(){return{address:null}},watch:{url:{immediate:!0,handler:function(e){this.address=e}},autoreload:function(e){e&&this.reload()}},methods:{reload:function(){this.$refs.iframe.src=this.$refs.iframe.src},restoreAddress:function(){this.address=this.url},go:function(){document.activeElement.blur(),this.url!==this.address?this.$emit("update:url",this.address):this.reload()},toggleAutoreload:function(){this.$emit("update:autoreload",!this.autoreload)}}},o=(n("pFqp"),n("KHd+")),l=Object(o.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"workspace-web-preview"},[n("div",{staticClass:"wswp-tb"},[n("EdInput",{staticClass:"wswp-address",on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.go(t)},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.restoreAddress(t)}},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}}),e._v(" "),n("Icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Autoreload when files change",expression:"'Autoreload when files change'"}],staticClass:"wswp-tb-btn",class:{active:e.autoreload},attrs:{icon:"reload"},on:{click:e.toggleAutoreload}})],1),e._v(" "),n("div",{staticClass:"wswp-iframe-container"},[n("iframe",{ref:"iframe",staticClass:"wswp-iframe",attrs:{src:e.url,sandbox:"allow-scripts allow-modals allow-popups allow-forms allow-same-origin"}}),e._v(" "),n("div",{staticClass:"iframe-blocker",staticStyle:{display:"none"}})])])}),[],!1,null,null,null);t.a=l.exports},"2Yyy":function(e,t,n){},"2ZNJ":function(e,t,n){"use strict";var s=n("BTRJ");n.n(s).a},"2ejt":function(e,t,n){"use strict";n("qePV");var s={inject:["keyboardShortcutManager"],components:{PopupLayer:n("OH48").a},props:{title:{type:String,default:""},maxWidth:{type:Number,default:void 0}},computed:{contentStyle:function(){var e={};return null!=this.maxWidth&&(e.maxWidth=this.maxWidth+"px"),e}},created:function(){var e=this;this.disposable=this.keyboardShortcutManager.register("Escape",(function(){return e.$emit("close")})),this.alive=!0},destroyed:function(){this.disposable.dispose(),this.alive=!1},methods:{onClick:function(e){this.alive&&document.contains(e.target)&&!this.$refs.content.contains(e.target)&&this.$emit("close")}}},i=(n("uVqG"),n("KHd+")),r=Object(i.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("PopupLayer",[n("div",{staticClass:"content-dialog",on:{click:e.onClick}},[e.title?n("header",{staticClass:"content-dialog-header"},[n("span",{staticClass:"content-dialog-title"},[e._v(e._s(e.title))]),e._v(" "),n("span",{staticClass:"content-dialog-subtitle"},[e._v("— Click to close")])]):e._e(),e._v(" "),n("div",{ref:"content",staticClass:"content-dialog-content",style:e.contentStyle},[e._t("default")],2)])])}),[],!1,null,null,null);t.a=r.exports},"2iPU":function(e,t,n){},"2mxR":function(e,t,n){"use strict";var s=n("8Zy8");n.n(s).a},"2qlP":function(e,t,n){"use strict";var s=n("87p4");n.n(s).a},"2sKU":function(e,t,n){"use strict";var s=n("RWvm");n.n(s).a},"2zmm":function(e,t,n){"use strict";var s=n("sK6X"),i=n("WmPt"),r=n("xtk+"),a=n("4K9I"),o={directives:{Autoselect:s.a},components:{Icon:i.a,EdInput:r.a,EdButton:a.a},props:{value:{type:String,default:""},disabled:{type:Boolean,default:!1},incorrect:{type:Boolean,default:!1},autoselect:{type:Boolean,default:!1}},methods:{select:function(){this.$refs.password.$el.select()}}},l=(n("PSPW"),n("KHd+")),c=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"password-prompt",attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.$emit("submit")}}},[n("Icon",{staticClass:"passp-icon",attrs:{icon:"lock"}}),e._v(" "),n("div",{staticClass:"passp-heading"},[e._v("Password is required")]),e._v(" "),n("div",{staticClass:"passp-subheading"},[e._v("Enter the password to continue")]),e._v(" "),n("EdInput",{directives:[{name:"autoselect",rawName:"v-autoselect",value:e.autoselect,expression:"autoselect"}],ref:"password",staticClass:"passp-input",attrs:{placeholder:"Password",disabled:e.disabled,value:e.value,autocomplete:"off"},on:{input:function(t){return e.$emit("input",t)}}}),e._v(" "),n("EdButton",{staticClass:"primary passp-btn",attrs:{type:"submit",disabled:e.disabled||!e.value}},[e._v("\n\t\tContinue\n\t")]),e._v(" "),e.incorrect?n("div",{staticClass:"passp-error"},[e._v("\n\t\tIncorrect password. Try again.\n\t")]):e._e()],1)}),[],!1,null,null,null);t.a=c.exports},"36/f":function(e,t,n){"use strict";var s=n("o24b");n.n(s).a},"36YP":function(e,t,n){},"394T":function(e,t,n){},"3GWr":function(e,t,n){},"3J1K":function(e,t,n){"use strict";var s=n("Mw30");n.n(s).a},"3Klq":function(e,t,n){},"3O+Q":function(e,t,n){},"3Pih":function(e,t,n){"use strict";n("TeQF");var s=n("wd/R"),i=n.n(s),r={props:{date:{type:null,required:!0},absolute:{type:Boolean,default:!1}},data:function(){return{tick:0}},computed:{text:function(){this.tick;var e=i()(this.date),t=i()(),n=e.diff(t),s=!this.absolute&&n<0?"-":"",r=i.a.duration(Math.abs(n)),a=r.asHours()>=1,o=r.asMinutes()>=1,l=r.asMinutes()<=2;return s+[a?r.hours()+"h":"",o?r.minutes()+(l?0:1)+"m":"",l?r.seconds()+"s":""].filter(Boolean).join(" ")}},mounted:function(){var e=this;this.interval=setInterval((function(){return e.tick^=1}),1e3)},destroyed:function(){clearInterval(this.interval)}},a=n("KHd+"),o=Object(a.a)(r,(function(){var e=this.$createElement;return(this._self._c||e)("span",{staticClass:"timer"},[this._v(this._s(this.text))])}),[],!1,null,null,null);t.a=o.exports},"3a0T":function(e,t,n){"use strict";var s=n("0CZZ");n.n(s).a},"3mXL":function(e,t,n){"use strict";var s=n("p82i");n.n(s).a},"3tig":function(e,t,n){},"43W2":function(e,t,n){"use strict";n("6sk0");var s=n("KHd+"),i=Object(s.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"status-message"},[e.$slots.default||e.$scopedSlots.default?n("div",{staticClass:"status-message-text"},[e._t("default")],2):e._e(),e._v(" "),e.$slots.subtext||e.$scopedSlots.subtext?n("div",{staticClass:"status-message-subtext"},[e._t("subtext")],2):e._e()])}),[],!1,null,null,null);t.a=i.exports},"46R7":function(e,t,n){},"46bE":function(e,t,n){},"4D86":function(e,t,n){},"4J/8":function(e,t,n){},"4K9I":function(e,t,n){"use strict";n("zKZe");var s={components:{Shell:{functional:!0,render:function(e,t){var n,s=t.parent,i=s.to,r=s.type,a=s.href,o=s.disabled,l=s.target,c={staticClass:"ed-button",class:s.cssClass,attrs:{disabled:o},on:{}};return i?(n="router-link",Object.assign(c.attrs,{tag:"button",to:i,type:r,target:l,rel:"noopener noreferrer"})):a?(n="a",Object.assign(c.attrs,{href:a,target:l,rel:"noopener noreferrer"}),c.on.click=function(e){return t.parent.$emit("click",e)}):(n="button",c.attrs.type=r,c.on.click=function(e){return t.parent.$emit("click",e)}),e(n,c,t.children)}}},props:{href:{type:String,default:null},to:{type:[Object,String],default:null},target:{type:String,default:null},type:{type:String,default:"button"},disabled:{type:Boolean,default:!1},pressed:{type:Boolean,default:!1},kind:{type:String,default:""}},computed:{cssClass:function(){var e=[];return this.pressed&&e.push("ed-button-pressed"),this.kind&&e.push("ed-button-".concat(this.kind)),e}}},i=(n("yMlZ"),n("KHd+")),r=Object(i.a)(s,(function(){var e=this.$createElement;return(this._self._c||e)("Shell",[this._t("default")],2)}),[],!1,null,null,null);t.a=r.exports},"4KyP":function(e,t,n){},"4OY+":function(e,t,n){},"4ako":function(e,t,n){},"4cYw":function(e,t,n){"use strict";n("pNMO"),n("TeQF"),n("2B1R"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("KQm4"),i=n("rePB");function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function a(e){return"_value"in e?e._value:e.value}var o={props:{value:{type:null,default:null}},computed:{listeners:function(){var e=this;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.$listeners,{input:function(t){var n=Object(s.a)(t.target.options).filter((function(e){return e.selected})).map(a),i=t.target.multiple?n:n[0];e.$emit("input",i)}})}},mounted:function(){if(!this.$el.multiple){for(var e=0;e<this.$el.options.length;e++)if(a(this.$el.options[e])===this.value)return void(this.$el.selectedIndex=e);this.$el.selectedIndex=-1}}},l=(n("MutR"),n("KHd+")),c=Object(l.a)(o,(function(){var e=this.$createElement;return(this._self._c||e)("select",this._g(this._b({staticClass:"ed-select",domProps:{value:this.value}},"select",this.$attrs,!1),this.listeners),[this._t("default")],2)}),[],!1,null,null,null);t.a=c.exports},"4ct1":function(e,t,n){"use strict";var s=n("MLca");n.n(s).a},"4e0k":function(e,t,n){},"4qR1":function(e,t,n){},"4qo9":function(e,t,n){},"4uGR":function(e,t,n){"use strict";var s=n("WNWs");n.n(s).a},"4zqU":function(e,t,n){"use strict";var s=n("kWTT");n.n(s).a},"59aS":function(e,t,n){"use strict";var s=n("dKa9");n.n(s).a},"5DV3":function(e,t,n){"use strict";var s,i=n("o0o1"),r=n.n(i),a=(n("ls82"),n("HaE+")),o=n("TxTQ"),l=n("CfgT"),c=n("6XG0"),u=n("LnxB"),d=n("5/Cn"),h={components:{QuizElement:o.a,QuestionEdit:l.a,EdCheck:c.a,Message:u.a},props:{assessible:{type:Boolean,default:!1},value:{type:Object,required:!0},editable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},number:{type:String,default:null},showButtons:{type:Boolean,default:!1},spans:{type:Array,default:void 0},etcTools:{type:Boolean,default:!1}},computed:{typeLabel:function(){return this.value.constructor.humanized}},methods:{onFormattedInput:(s=Object(a.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}this.$refs.question.convertToFormatted(),e.next=8;break;case 4:return e.next=6,d.b({icon:"warning",title:"Convert to plain text?",text:"This will remove all text formatting and multimedia content (images, videos, etc) from the question.",primaryAction:"Remove Formatting"});case 6:if(!e.sent){e.next=8;break}this.$refs.question.convertToUnformatted();case 8:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)}),save:function(){this.$refs.question.validate()&&this.$emit("save")}}},p=(n("zSi2"),n("KHd+")),f=Object(p.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("QuizElement",{staticClass:"quiz-question-element",attrs:{editable:e.editable,disabled:e.disabled,heading:e.typeLabel,number:e.number,"show-buttons":e.showButtons,icon:"quiz-question-"+e.value.type},on:{edit:function(t){return e.$emit("edit")},cancel:function(t){return e.$emit("cancel")},save:e.save},scopedSlots:e._u([{key:"header",fn:function(){return[e.editable?n("EdCheck",{staticClass:"qqel-head-check",attrs:{label:"Formatting",disabled:e.disabled,value:e.value.formatted},on:{input:e.onFormattedInput}}):e._e()]},proxy:!0},{key:"actions",fn:function(){return[e._t("actions")]},proxy:!0}],null,!0)},[e._v(" "),e._t("default"),e._v(" "),n("div",{staticClass:"qqel-question-container"},[!e.editable&&null==e.spans&&e.value.hasSpanRefs?n("Message",{attrs:{type:"error"}},[e._v("\n\t\t\tYou must enable line numbers in the reading passage if you want to use\n\t\t\tspan references in this question.\n\t\t")]):e._e(),e._v(" "),n("QuestionEdit",{ref:"question",attrs:{assessible:e.assessible,value:e.value,editable:e.editable,disabled:e.disabled,compact:e.compact,spans:e.spans,"etc-tools":e.etcTools}})],1)],2)}),[],!1,null,null,null);t.a=f.exports},"5G72":function(e,t,n){"use strict";n("pNMO"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("rePB");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var r={props:{value:{type:String,default:null}},computed:{listeners:function(){var e=this;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.$listeners,{input:function(t){return e.$emit("input",t.target.value)}})}},methods:{focus:function(){this.$refs.textarea.focus()},input:function(e){var t=this.$refs.textarea,n=t.value.substring(0,t.selectionStart)+e+t.value.substring(t.selectionStart);this.$emit("input",n)}}},a=(n("G0I9"),n("KHd+")),o=Object(a.a)(r,(function(){var e=this.$createElement;return(this._self._c||e)("textarea",this._g(this._b({ref:"textarea",staticClass:"ed-textarea",domProps:{value:this.value}},"textarea",this.$attrs,!1),this.listeners))}),[],!1,null,null,null);t.a=o.exports},"5N+i":function(e,t,n){},"5b8u":function(e,t,n){},"5dcz":function(e,t,n){"use strict";var s={mixins:[n("/lWA").a]},i=(n("cPdD"),n("KHd+")),r=Object(i.a)(s,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"toolbar",class:"toolbar-"+this.computedTheme},[this._t("default")],2)}),[],!1,null,null,null);t.a=r.exports},"5fDg":function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("rePB"),i=n("o0o1"),r=n.n(i),a=(n("ls82"),n("HaE+")),o=n("L2JU"),l=n("Pa8A"),c=n("o+Su"),u=n("Oshs"),d=n("B7nN"),h=n("7zca"),p=n("nVGi"),f=(n("4Brf"),n("0oug"),n("4mDm"),n("2B1R"),n("ToJy"),n("Tskq"),n("qePV"),n("07d7"),n("5s+n"),n("PKPk"),n("3bBZ"),n("ODXe")),m=n("hSdx"),v=n("/Yj0"),b=n("5/Cn"),g=n("o7oi"),y=n("/ykK"),w=n("syKy"),_=n("bycc"),k=n("5lBx"),C=n("6XG0"),x=n("0XH5"),j=n("CkVh"),O=n("Kaxq");function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T,I,D,P,A={components:{Popup:y.a,TableView:w.a,TableViewSection:_.a,TableViewCell:k.a,EdCheck:C.a,SearchInput:x.a,ContextMenuTrigger:j.a,ContextMenuItem:O.a},inject:["courseApi","workspaceApi"],props:{x:{type:Number,default:0},y:{type:Number,default:0},course:{type:Object,required:!0},workspace:{type:Object,required:!0}},data:function(){return{loading:!1,users:null,isPublic:!1,publicWrite:!1,searchQuery:"",reloadRequired:!1,menuUser:null}},computed:E({},Object(o.e)(["user"]),{usersShared:function(){return this.users.filter((function(e){return""!==e.role}))},usersNotShared:function(){return this.users.filter((function(e){return""===e.role}))},effectiveRole:function(){return g.a(this.workspace.role,this.course.role.role)},sections:function(){return[{heading:"Has Access",users:this.filterUsers(this.usersShared)},{heading:"No Access",users:this.filterUsers(this.usersNotShared)}]},roleItems:function(){return["","read","write","admin"].map((function(e){return{role:e,label:g.b(e)}}))}}),created:(P=Object(a.a)(r.a.mark((function e(){var t,n,s,i,a,o,l,c,u,d,h;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isPublic=this.workspace.is_public,this.publicWrite=this.workspace.public_write,"admin"!==this.effectiveRole){e.next=41;break}return this.loading=!0,e.prev=4,e.next=7,Promise.all([this.workspaceApi.getWorkspaceUsers(this.workspace.id),this.courseApi.getCourseUsers(this.course.id)]);case 7:s=e.sent,i=Object(f.a)(s,2),t=i[0],n=i[1],e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(4),v.b({type:"error",text:"Unable to get users."}),e.abrupt("return");case 17:return e.prev=17,this.loading=!1,e.finish(17);case 20:for(a=new Map(t.map((function(e){return[e.id,e.role]}))),o=!0,l=!1,c=void 0,e.prev=24,u=n[Symbol.iterator]();!(o=(d=u.next()).done);o=!0)(h=d.value).role=a.get(h.id)||"";e.next=32;break;case 28:e.prev=28,e.t1=e.catch(24),l=!0,c=e.t1;case 32:e.prev=32,e.prev=33,o||null==u.return||u.return();case 35:if(e.prev=35,!l){e.next=38;break}throw c;case 38:return e.finish(35);case 39:return e.finish(32);case 40:this.users=n;case 41:case"end":return e.stop()}}),e,this,[[4,13,17,20],[24,28,32,40],[33,,35,39]])}))),function(){return P.apply(this,arguments)}),methods:{setUserAccess:(D=Object(a.a)(r.a.mark((function e(t,n){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.role!==n){e.next=2;break}return e.abrupt("return");case 2:if(s=t.id===this.user.id&&!this.course.role.isAtLeast("staff"),e.t0=s,!e.t0){e.next=8;break}return e.next=7,b.b({title:"Revoke your admin access?",text:"After this operation, you will forefit admin access and will be unable to change your access henceforth (it will require another user with admin access to do so).",icon:"warning",primaryAction:"Set Access",secondaryAction:"Cancel"});case 7:e.t0=!e.sent;case 8:if(!e.t0){e.next=10;break}return e.abrupt("return");case 10:return e.prev=10,e.next=13,this.workspaceApi.shareWorkspace(this.workspace.id,t.id,n);case 13:e.next=19;break;case 15:return e.prev=15,e.t1=e.catch(10),v.b({type:"error",text:"Unable to set user access."}),e.abrupt("return");case 19:t.role=n,t.id===this.user.id&&(this.workspace.role=n),s&&(this.users=null,this.reloadRequired=!0);case 22:case"end":return e.stop()}}),e,this,[[10,15]])}))),function(e,t){return D.apply(this,arguments)}),filterUsers:function(e){var t=this;return e.filter((function(e){return m.validateSubstrDeep(e,t.searchQuery)})).sort((function(e,n){return e.id===t.user.id?-1:n.id===t.user.id?1:m.naturalComparator(e.nam,n.name)}))},userNameLabel:function(e){var t=e.name;return e.id===this.user.id&&(t+=" (me)"),t},roleLabel:function(e){return g.b(e)},onIsPublicInput:(I=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isPublic=t,t||(this.publicWrite=!1),n=E({},this.workspace,{is_public:this.isPublic,public_write:this.publicWrite}),e.prev=3,e.next=6,this.workspaceApi.updateWorkspace(this.workspace.id,n);case 6:e.next=14;break;case 8:return e.prev=8,e.t0=e.catch(3),this.isPublic=this.workspace.is_public,this.publicWrite=this.workspace.public_write,v.b({type:"error",text:"Unable to update workspace."}),e.abrupt("return");case 14:this.workspace.is_public=this.isPublic,this.workspace.public_write=this.publicWrite;case 16:case"end":return e.stop()}}),e,this,[[3,8]])}))),function(e){return I.apply(this,arguments)}),onPublicWriteInput:(T=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.publicWrite=t,n=E({},this.workspace,{public_write:this.publicWrite}),e.prev=2,e.next=5,this.workspaceApi.updateWorkspace(this.workspace.id,n);case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(2),this.publicWrite=this.workspace.public_write,v.b({type:"error",text:"Unable to update workspace."}),e.abrupt("return");case 12:this.workspace.public_write=this.publicWrite;case 13:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(e){return T.apply(this,arguments)})}},N=(n("59aS"),n("KHd+")),R=Object(N.a)(A,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Popup",{attrs:{title:"Share",x:e.x,y:e.y},on:{close:function(t){return e.$emit("close")}}},["read"===e.effectiveRole?n("div",{staticClass:"wspshare-info"},[e._v("\n\t\tYou have "),n("strong",[e._v("read only")]),e._v(" access to this workspace. You will not be\n\t\table to create, modify or delete files in this workspace.\n\t")]):e._e(),e._v(" "),"write"===e.effectiveRole?n("div",{staticClass:"wspshare-info"},[e._v("\n\t\tYou have "),n("strong",[e._v("read and write")]),e._v(" access to this workspace. You can make\n\t\tchanges to the files in this workspace, but you cannot share the workspace with\n\t\tother people.\n\t")]):e._e(),e._v(" "),e.reloadRequired?n("div",{staticClass:"wspshare-info"},[n("strong",[e._v("Changes will be applied after reloading the workspace.")])]):e._e(),e._v(" "),e.users?["admin"===e.effectiveRole?n("EdCheck",{staticClass:"wspshare-checkbox",attrs:{value:e.isPublic,label:"Allow public access",description:"Display this workspace in the Public section, allowing other people to access this workspace in readonly mode."},on:{input:e.onIsPublicInput}}):e._e(),e._v(" "),"admin"===e.effectiveRole?n("EdCheck",{staticClass:"wspshare-checkbox",attrs:{disabled:!e.isPublic,value:e.publicWrite,label:"Public write access",description:"Allow anyone to modify files in this workspace."},on:{input:e.onPublicWriteInput}}):e._e(),e._v(" "),n("div",{staticClass:"wspshare-search-container"},[n("SearchInput",{staticClass:"wspshare-search",attrs:{placeholder:"Search Users"},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}})],1),e._v(" "),n("TableView",e._l(e.sections,(function(t,s){return n("TableViewSection",{key:s,attrs:{heading:t.heading}},e._l(t.users,(function(t){return n("TableViewCell",{key:t.id,attrs:{label:e.userNameLabel(t)}},[n("ContextMenuTrigger",{attrs:{active:e.menuUser===t},on:{"update:active":function(n){e.menuUser=n?t:null}},scopedSlots:e._u([{key:"trigger",fn:function(s){var i=s.trigger,r=s.attrs;return[n("div",e._b({staticClass:"wspshare-action",on:{click:i}},"div",r,!1),[e._v(e._s(e.roleLabel(t.role)))])]}},{key:"items",fn:function(){return e._l(e.roleItems,(function(t){return n("ContextMenuItem",{key:t.role,attrs:{text:t.label,checked:t.role===e.menuUser.role},on:{click:function(n){return e.setUserAccess(e.menuUser,t.role)}}})}))},proxy:!0}],null,!0)})],1)})),1)})),1)]:e._e()],2)}),[],!1,null,null,null).exports,M=n("JQ9H"),L=n("Q2AE");function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q,$,U,z={name:"WorkspaceShow",directives:{Tooltip:l.a},components:{Workspace:c.default,SheetContainer:u.a,ToolbarGroup:d.a,ToolbarButton:h.a,Trigger:p.a,PopupShare:R},inject:["workspaceApi"],data:function(){return{wid:null,workspace:null,popupShareVisible:!1}},beforeRouteLeave:(U=Object(a.a)(r.a.mark((function e(t,n,s){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.$refs.workspace.isAudioActive()){e.next=2;break}return e.abrupt("return",s());case 2:return e.next=4,b.b({title:"Leaving the workspace will disconnect the voice call",text:"Are you sure you want to leave?",primaryAction:"Leave",icon:"warning"});case 4:if(e.sent){e.next=8;break}return e.abrupt("return",s(!1));case 8:return e.abrupt("return",s());case 9:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return U.apply(this,arguments)}),computed:B({},Object(o.e)(["course","workspaceTheme"]),{chrome:function(){switch(this.workspace.type){case"jupyter":case"rstudio":return this.workspace.type}},workspaceEffectiveRole:function(){return this.workspace&&g.a(this.workspace.role,this.course.role.role)},hasAdminRole:function(){return"admin"===this.workspaceEffectiveRole},shareEnabled:function(){return!!this.workspace&&!!this.workspaceEffectiveRole},hasVoiceover:function(){return this.course.settings.voiceover}}),watch:{$route:"update"},mounted:function(){this.setNavbarVisible(!0),this.update()},destroyed:function(){this.setNavbarVisible(!1)},methods:B({},Object(o.d)({setNavbarVisible:L.c.SET_NAVBAR_VISIBLE}),{update:($=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.workspace||this.$route.params.workspaceId!==this.workspace.id){e.next=2;break}return e.abrupt("return");case 2:return this.wid=this.$route.params.workspaceId,this.workspace=null,e.prev=4,e.next=7,this.workspaceApi.getWorkspace(this.wid);case 7:this.workspace=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),v.b({type:"error",text:"Unable to load workspace data."}),e.abrupt("return");case 14:case"end":return e.stop()}}),e,this,[[4,10]])}))),function(){return $.apply(this,arguments)}),showEditSheet:function(){var e=this,t=(this.$createElement,this),n={render:function(){var e=this,n=arguments[0];return n(M.a,{attrs:{workspace:t.workspace},on:{done:function(t){return e.$emit("done",t)}}})}};this.$refs.sheetContainer.showSheet(n,(function(t){e.$refs.sheetContainer.closeSheet(),t&&(e.workspace.title=t.title,e.workspace.type=t.type)}))},forkWorkspace:(q=Object(a.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.b({title:"Fork workspace?",text:"This will create your own copy of the current state of this workspace.",icon:"question",primaryAction:"Fork",secondaryAction:"Cancel"});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,this.workspaceApi.forkWorkspace(this.workspace);case 7:t=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),v.b({type:"error",text:"Unable to fork workspace."}),e.abrupt("return");case 14:v.b({type:"success",text:"Forked workspace successfully."}),this.$router.push({name:"workspace-show",params:{workspaceId:t.id}});case 16:case"end":return e.stop()}}),e,this,[[4,10]])}))),function(){return q.apply(this,arguments)})})},V=(n("mhJO"),Object(N.a)(z,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"workspace-show"},[e.workspace?n("Workspace",{ref:"workspace",staticClass:"wss-workspace",attrs:{theme:e.workspaceTheme,type:"code",chrome:e.chrome,"connect-type":"workspace","connect-param":e.wid,chat:"",autofocus:""},scopedSlots:e._u([{key:"toolbarLeft",fn:function(){return[n("ToolbarGroup",[n("ToolbarButton",{attrs:{icon:"chevron-left"},on:{click:function(t){return e.$router.push({name:"workspaces"})}}},[e._v("Workspaces")])],1)]},proxy:!0},{key:"toolbarCenter",fn:function(){return[n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.hasAdminRole&&"Click to Edit",expression:"hasAdminRole && 'Click to Edit'"}],staticClass:"wss-title",attrs:{disabled:!e.hasAdminRole},on:{click:e.showEditSheet}},[e._v(e._s(e.workspace.title))])]},proxy:!0},{key:"toolbarRight",fn:function(){return[n("ToolbarGroup",[e.shareEnabled?n("Trigger",{attrs:{active:e.popupShareVisible,action:"toggle"},on:{"update:active":function(t){e.popupShareVisible=t}},scopedSlots:e._u([{key:"trigger",fn:function(t){var s=t.trigger,i=t.attrs;return[n("ToolbarButton",e._b({directives:[{name:"tooltip",rawName:"v-tooltip",value:"Share",expression:"'Share'"}],attrs:{icon:"share"},on:{click:s}},"ToolbarButton",i,!1))]}},{key:"target",fn:function(t){var s=t.x,i=t.y;return[n("PopupShare",{attrs:{x:s,y:i,course:e.course,workspace:e.workspace},on:{close:function(t){e.popupShareVisible=!1}}})]}}],null,!1,2321729214)}):e._e(),e._v(" "),n("ToolbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Fork",expression:"'Fork'"}],attrs:{icon:"fork"},on:{click:e.forkWorkspace}})],1)]},proxy:!0}],null,!1,645712582)}):e._e(),e._v(" "),n("SheetContainer",{ref:"sheetContainer"})],1)}),[],!1,null,null,null));t.default=V.exports},"5lBx":function(e,t,n){"use strict";var s={disclosure:n("d8JK"),checkmark:n("OAlV")},i={props:{label:{type:String,default:void 0},text:{type:String,default:void 0},accessory:{type:String,default:void 0,validator:function(e){return null==e||s.hasOwnProperty(e)}},selectable:{type:Boolean,default:!1}},computed:{accessorySrc:function(){return s[this.accessory]}}},r=(n("hsQ6"),n("KHd+")),a=Object(r.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"table-view-cell",class:{selectable:e.selectable},on:{click:function(t){return e.$emit("click",t)}}},[n("div",{staticClass:"table-view-cell-label"},[e._v(e._s(e.label))]),e._v(" "),n("div",{staticClass:"table-view-cell-text"},[e._v(e._s(e.text))]),e._v(" "),n("div",{staticClass:"table-view-cell-content"},[e._t("default")],2),e._v(" "),e.accessorySrc?n("img",{staticClass:"table-view-cell-accessory",attrs:{src:e.accessorySrc}}):e._e()])}),[],!1,null,null,null);t.a=a.exports},"5m66":function(e,t,n){"use strict";var s=n("THxs");n.n(s).a},"5oCK":function(e,t,n){"use strict";var s=n("X9l2");n.n(s).a},"5qpF":function(e,t,n){"use strict";var s=n("GxhB");n.n(s).a},"5vMp":function(e,t,n){},"5xKQ":function(e,t,n){},"5xuQ":function(e,t,n){"use strict";var s=n("onyE");n.n(s).a},"62+2":function(e,t,n){"use strict";n("ma9I");var s={functional:!0,props:{vnodes:{type:[Object,Array],required:!0}},render:function(e,t){return[].concat(t.props.vnodes)}},i=n("KHd+"),r=Object(i.a)(s,void 0,void 0,!1,null,null,null);t.a=r.exports},"624E":function(e,t,n){"use strict";var s=n("LIY4");n.n(s).a},"62d9":function(e,t,n){"use strict";var s=n("IC9O");n.n(s).a},"6BMF":function(e,t,n){"use strict";var s=n("f1nc");n.n(s).a},"6JOT":function(e,t,n){"use strict";var s=n("dmZ5");n.n(s).a},"6JxO":function(e,t,n){e.exports=n.p+"assets/sketch-pencil.20508bff.svg"},"6L3E":function(e,t,n){"use strict";var s=n("Fqdu");n.n(s).a},"6NtP":function(e,t,n){"use strict";var s=n("BHxs");n.n(s).a},"6Voy":function(e,t,n){"use strict";var s={components:{Icon:n("WmPt").a},props:{disabled:{type:Boolean,default:!1},icon:{type:String,required:!0}}},i=(n("zZ0E"),n("KHd+")),r=Object(i.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"quiz-element-action",attrs:{disabled:e.disabled},on:{click:function(t){return e.$emit("click",t)}}},[n("Icon",{attrs:{icon:e.icon}})],1)}),[],!1,null,null,null);t.a=r.exports},"6XG0":function(e,t,n){"use strict";var s={components:{Icon:n("WmPt").a},props:{value:{type:Boolean,default:!1},label:{type:String,default:""},description:{type:String,default:""},disabled:{type:Boolean,default:!1}},methods:{onClick:function(e){this.disabled||(e.preventDefault(),this.$emit("input",!this.value))}}},i=(n("Drha"),n("KHd+")),r=Object(i.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ed-check",attrs:{tabindex:"0",role:"checkbox","aria-checked":(!!e.value).toString(),"aria-disabled":(!!e.disabled).toString(),"aria-label":e.label},on:{click:e.onClick,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:e.onClick(t)}}},[n("div",{staticClass:"ed-check-layout"},[n("div",{staticClass:"ed-check-btn"},[n("Icon",{staticClass:"ed-check-icon",attrs:{icon:"checkbox-check"}})],1),e._v(" "),n("div",{staticClass:"ed-check-label"},[e._v(e._s(e.label)),e._t("default")],2)]),e._v(" "),e.description?n("div",{staticClass:"ed-check-description"},[e._v(e._s(e.description))]):e._e()])}),[],!1,null,null,null);t.a=r.exports},"6g/b":function(e,t,n){"use strict";var s=n("Q7vs");n.n(s).a},"6hLz":function(e,t,n){"use strict";var s=n("+O0b");n.n(s).a},"6inl":function(e,t,n){"use strict";n("ma9I"),n("2B1R"),n("+2oP"),n("pDQq");var s=n("hSdx"),i={extends:n("JQId").a,props:{value:{type:Array,default:null}},computed:{computedValue:function(){return this.value||[]},computedPaths:function(){return this.computedValue.map((function(e){return s.svgPathFromPolygon(e)}))}},methods:{onPointerDown:function(e,t){var n=this.computedValue.slice().concat([[e,t]]);this.$emit("input",n)},onPointerMove:function(e,t){var n=this.computedValue[this.computedValue.length-1],s=e-n[n.length-2],i=t-n[n.length-1];if(!(s*s+i*i<.25)){var r=this.computedValue.slice();r[r.length-1]=r[r.length-1].concat([e,t]);for(var a=r.reduce((function(e,t){return e+t.length}),0);a>1e3;){if(r[0].length>=a-1e3){r[0]=r[0].slice(a-1e3);break}a-=r[0].length,r.splice(0,1)}this.$emit("input",r)}},onPointerUp:function(){this.releaseCapture()}}},r=(n("a3sl"),n("KHd+")),a=Object(r.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{ref:"svg",staticClass:"quiz-canvas-sketch",class:{overlay:e.overlay},attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:e.viewBox}},[e.imageUrl?n("image",{attrs:{"xlink:href":e.imageUrl,width:e.width,height:e.height}}):e._e(),e._v(" "),e._l(e.computedPaths,(function(e,t){return n("path",{key:t,attrs:{d:e,"vector-effect":"non-scaling-stroke"}})}))],2)}),[],!1,null,null,null);t.a=a.exports},"6kI9":function(e,t,n){"use strict";var s=n("bzkv");n.n(s).a},"6rGU":function(e,t,n){},"6sk0":function(e,t,n){"use strict";var s=n("OM02");n.n(s).a},"7/uT":function(e,t,n){},"73nH":function(e,t,n){"use strict";var s=n("nxW9");n.n(s).a},"75/S":function(e,t,n){},7516:function(e,t,n){"use strict";n("Py2q");var s=n("KHd+"),i=Object(s.a)({},(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"segmented"},[this._t("default")],2)}),[],!1,null,null,null);t.a=i.exports},"77cL":function(e,t,n){"use strict";var s=n("c/O/");n.n(s).a},"7IAT":function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("fbCW"),n("yq1k"),n("2B1R"),n("5DmW"),n("27RR"),n("tkto"),n("JTJg"),n("FZtP");var s=n("rePB"),i=n("L2JU"),r=n("9z1j");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var o={lobby:{text:"Lobby",routes:["sway-lobby","sway-activities-host","sway-activities-run"]},quizzes:{text:"Activities",routes:["sway-quizzes-index"]},reports:{text:"Reports",routes:["sway-reports-index"]},questions:{text:"Question Bank",routes:["sway-questions-index"]}},l={name:"SwayNav",components:{TabsHeader:r.a},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(i.c)(["isStaff"]),{tabs:function(){return this.isStaff?[o.lobby,o.quizzes,o.questions,o.reports]:[o.lobby]},selectedTab:function(){var e=this;return Object.keys(o).map((function(e){return o[e]})).find((function(t){return e.$route.matched.some((function(e){return t.routes.includes(e.name)}))}))}}),methods:{onTabsHeaderInput:function(e){this.$router.push({name:e.routes[0]})}}},c=n("KHd+"),u=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"page-heading-container"},[n("h1",{staticClass:"page-heading"},[e._v("Sway")]),e._v(" "),e.isStaff?n("TabsHeader",{attrs:{tabs:e.tabs,value:e.selectedTab},on:{input:e.onTabsHeaderInput}}):e._e()],1),e._v(" "),n("RouterView")],1)}),[],!1,null,null,null);t.default=u.exports},"7K5c":function(e,t,n){},"7NJ3":function(e,t,n){"use strict";var s=n("HVqd");n.n(s).a},"7W7u":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a}));var s=n("ySoy"),i=0,r=2;function a(e){return e.button===r||"mac"===s.i&&e.button===i&&e.ctrlKey}document.addEventListener("mousemove",(function(e){e.clientX,e.clientY}))},"7Zln":function(e,t,n){"use strict";n.r(t);n("pNMO"),n("4Brf"),n("0oug"),n("ma9I"),n("TeQF"),n("fbCW"),n("yq1k"),n("4mDm"),n("2B1R"),n("ToJy"),n("pDQq"),n("zKZe"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("YGK4"),n("JTJg"),n("PKPk"),n("EnZy"),n("SYor"),n("FZtP"),n("3bBZ");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("sEfC"),l=n.n(o),c=n("BkRI"),u=n.n(c),d=n("L2JU"),h=n("xtk+"),p=n("4K9I"),f=n("6XG0"),m=n("4cYw"),v=n("NC1X"),b=n("0XH5"),g=n("kUIt"),y=n("JO+Q"),w=n("22jn"),_=(n("qePV"),n("KQm4")),k=n("kvrn"),C=n.n(k),x=n("sK6X"),j=n("SBq4"),O=n("mmZQ"),S=n("Gste"),E=n("wSyZ");function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var I={functional:!0,render:function(e,t){return e("input",C()([{class:"admin-users-table-input-text",attrs:{type:"text"},domProps:{value:t.props.value},on:{blur:function(e){return t.listeners.commit(e.target.value)},keydown:function(e){switch(e.key){case"Enter":t.listeners.commit(e.target.value);break;case"Escape":t.listeners.cancel()}}}},{directives:[{name:"autoselect"}]}]))}},D={functional:!0,render:function(e,t){var n=t.props.options.map((function(t){return e("option",{key:t.value,domProps:{value:t.value}},[t.label])}));return e("select",C()([{class:"admin-users-table-input-select",attrs:{type:"text"},domProps:{value:t.props.value},on:{change:function(e){return t.listeners.commit(e.target.value)},blur:t.listeners.cancel,keydown:function(e){switch(e.key){case"Enter":t.listeners.commit(e.target.value);break;case"Escape":t.listeners.cancel()}}}},{directives:[{name:"autofocus"}]}]),[n])}},P={functional:!0,render:function(e,t){var n=t.props,s=n.row,i=n.column,r=n.cell,a=t.parent,o=a.editingField,l=a.editingUser,c=a.searchQuery,u=a.roleOptions,d=a.roleLabel,h=function(){a.$emit("update:editingUser",null),a.$emit("update:editingField",null)},p=function(e){a.editingField&&a.editingUser&&a.$emit("commit",e)};if("selected"===i.key)return e(E.b,{attrs:{value:r},on:{input:function(e){return a.$emit("select",{user:s,selected:e})}}});if(l===s&&o===i.key)switch(i.key){case"name":case"email":case"tutorial":if(l===s&&o===i.key)return e(I,{attrs:{value:r},on:{cancel:h,commit:p}});break;case"role":if(l===s&&o===i.key)return e(D,{attrs:{value:r,options:u},on:{cancel:h,commit:p}});break;case"labName":if(l===s&&o===i.key)return e(D,{attrs:{value:String(s.labId||"0"),options:a.labOptions},on:{cancel:h,commit:function(e){return p("0"===e?null:Number(e))}}})}var f="role"===i.key?d(r):r;return e(O.a,{attrs:{text:f||"",search:c,ignoreCase:!0}})}},A={directives:{Autoselect:x.a,Autofocus:j.a},components:{Datatable:S.a,Cell:P},props:{users:{type:Array,required:!0},labs:{type:Array,required:!0},searchQuery:{type:String,required:!0},editingUser:{type:Object,default:null},editingField:{type:String,default:null},readonly:{type:Boolean,default:!1}},data:function(){return{sortColumn:"role",sortDescending:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(d.e)(["course"]),{},Object(d.c)(["getHumanizedRoleLabel","getCustomizedRoleLabel"]),{labColumnVisible:function(){return this.labs.length>0||this.users.some((function(e){return e.labName}))},sourcedIdColumnVisible:function(){return this.users.some((function(e){return e.sourcedId}))},columns:function(){var e=this;return[{key:"selected",type:"check",style:"compact",headerCheckable:!0,checkGet:function(){return e.allSelected},checkSet:function(t){return e.$emit("select-all",t)}},{key:"name",header:"Name",type:"text",sortable:!0,clickable:!this.readonly},{key:"email",header:"Email",type:"text",sortable:!0,clickable:!this.readonly},{key:"role",header:"Role",type:"text",sortable:!0,clickable:!this.readonly},{key:"tutorial",header:"Tutorial",type:"text",sortable:!0,clickable:!this.readonly},this.labColumnVisible&&{key:"labName",header:"Lab",type:"text",sortable:!0,clickable:!this.readonly},this.sourcedIdColumnVisible&&{key:"sourcedId",header:"SIS ID",type:"text",sortable:"true",clickable:!1},{key:"status",header:"Status",type:"text",sortable:!0}].filter(Boolean)},roleOptions:function(){var e=this;return["student","mentor","tutor","staff","admin"].map((function(t){return{value:t,label:e.roleLabel(t)}}))},allSelected:function(){return this.users.length>0&&this.users.every((function(e){return e.selected}))},labOptions:function(){return[{value:"0",label:"(None)"}].concat(Object(_.a)(this.labs.map((function(e){return{value:String(e.id),label:e.name}}))))}}),methods:{onCellClick:function(e){var t=e.row,n=e.column;this.$emit("update:editingUser",t),this.$emit("update:editingField",n.key)},roleLabel:function(e){var t=this.getHumanizedRoleLabel(e),n=this.getCustomizedRoleLabel(e,this.course);return n&&n!==t&&(t+=" (".concat(n,")")),t}}},N=(n("2A3h"),n("KHd+")),R=Object(N.a)(A,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Datatable",{staticClass:"admin-users-table",attrs:{columns:e.columns,rows:e.users,"row-key":function(e){return e.id},"sort-column":e.sortColumn,"sort-descending":e.sortDescending,"is-row-selected":function(e){return e.selected},"full-width":"",virtualized:""},on:{"update:sortColumn":function(t){e.sortColumn=t},"update:sort-column":function(t){e.sortColumn=t},"update:sortDescending":function(t){e.sortDescending=t},"update:sort-descending":function(t){e.sortDescending=t},"cell-click":e.onCellClick},scopedSlots:e._u([{key:"cell",fn:function(t){return[n("Cell",e._b({},"Cell",t,!1))]}}])})}),[],!1,null,null,null).exports,M=n("/Yj0"),L=n("5/Cn"),F=n("8PNo"),B=n("hSdx"),q=n("/wT1");function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var U,z,V,H,W,Q,K,Y,G,X={name:"AdminGeneral",inject:["courseApi","userApi"],components:{EdInput:h.a,EdButton:p.a,EdCheck:f.a,EdSelect:m.a,Spinner:v.a,SearchInput:b.a,KeyboardShortcut:g.a,DetailHeader:y.a,InvitationsInput:w.a,UsersTable:R},extends:q.a,data:function(){return{codeId:B.uniqueId(),nameId:B.uniqueId(),yearId:B.uniqueId(),sessionId:B.uniqueId(),saving:!1,features:null,settings:null,general:null,accessCodes:[],accessCodesLoading:!1,accessCodesEnabled:!1,accessCodesEnabledLoading:!1,users:[],usersLoading:!1,usersEditingField:null,usersEditingUser:null,usersSearchQuery:"",usersActionLoading:!1,failedInvites:[],failedReinvites:[],unenrollStudents:!1,invites:{role:"student",body:"",pasteData:null,loading:!1}}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(d.e)(["user","course","labs"]),{},Object(d.c)(["isUserAdmin","getHumanizedRoleLabel","getCustomizedRoleLabel"]),{roles:function(){var e=this;return["admin","staff","tutor","mentor","student"].map((function(t){var n={role:t,label:e.getHumanizedRoleLabel(t)},s=e.getCustomizedRoleLabel(t,e.course);return s&&s!==n.label&&(n.label+=" (".concat(s,")")),n}))},computedAccessCodes:function(){return this.accessCodes.map((function(e){return{role:e.role,link:"".concat(location.origin,"/join/").concat(e.code)}}))},yearAndSessionEditable:function(){if(this.isUserAdmin)return!0;var e=!0,t=!1,n=void 0;try{for(var s,i=this.user.realms[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){var r=s.value;if(r.id===this.course.realm_id)return r.settings.allow_course_creation}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}return!1},visibleFeatures:function(){var e=[{key:"resources",label:"Resources"},{key:"discussion",label:"Discussion"}];return e.push({key:"sway",label:"Sway"}),this.isUserAdmin&&e.push({key:"messages",label:"Chat"},{key:"workspaces",label:"Workspaces"},{key:"challenges",label:"Challenges"},{key:"challenge_services",label:"Challenge Services"},{key:"git_submission",label:"Git Submission"},{key:"leaderboard",label:"Leaderboard"},{key:"assessments",label:"Assessments"},{key:"lessons",label:"Lessons"},{key:"analytics",label:"Analytics"},{key:"exams",label:"Exams"},{key:"bots",label:"Bots"}),e},defaultPageOptions:function(){var e=[];return e.push({value:"",text:"(Unset)"}),this.features&&(575===this.course.id?(this.features.challenges&&e.push({value:"challenges",text:"Challenges"}),this.features.workspaces&&e.push({value:"workspaces",text:"Workspaces"})):(this.features.resources&&e.push({value:"resources",text:"Resources"}),this.features.discussion&&e.push({value:"discussion",text:"Discussion"}),this.features.challenges&&e.push({value:"challenges",text:"Challenges"}),this.features.workspaces&&e.push({value:"workspaces",text:"Workspaces"}),this.features.assessments&&e.push({value:"assessments",text:"Assessments"}),this.features.lessons&&e.push({value:"lessons",text:"Lessons"}),this.features.sway&&e.push({value:"sway",text:"Sway"}))),e},invitationSummaryText:function(){var e=this.users.filter((function(e){return"student"===e.role})).length,t=1===e?"student":"students",n=1===this.users.length?"user":"users",s=1===this.users.length?"is":"are",i="".concat(this.users.length," ").concat(n," (").concat(e," ").concat(t,") ").concat(s," enrolled in this course."),r=this.users.filter((function(e){return!e.accepted})).length;if(0===r)i+=" All users have accepted their invitation.";else{var a=1===r?"has":"have";i+=" ".concat(r," ").concat(a," not yet accepted their invitation.")}return i},computedUsers:function(){var e=this;return this.users.map((function(t){var n=t.lab_id&&e.labs.find((function(e){return e.id===t.lab_id}));return{id:t.id,name:t.name,email:t.email,role:t.role,tutorial:t.tutorial,status:t.status,selected:t.selected,labId:t.lab_id,labName:n?n.name:"",sourcedId:t.sourced_id,original:t}}))},filteredUsers:function(){var e=this;return this.computedUsers.filter((function(t){return B.validateSubstrDeep(t,e.usersSearchQuery,"name","email","role","tutorial","labName","sourcedId","status")}))},selectedUsers:function(){return this.users.filter((function(e){return e.selected}))}}),watch:{"course.settings.access_codes_enabled":{immediate:!0,handler:function(e){e&&this.updateAccessCodes()}},defaultPageOptions:function(e){var t=this;e.find((function(e){return e.value===t.settings.default_page}))||(this.settings.default_page="")},usersSearchQuery:function(){var e=!0,t=!1,n=void 0;try{for(var s,i=this.users[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){s.value.selected=!1}}catch(r){t=!0,n=r}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},created:function(){this.update()},methods:{update:(G=Object(r.a)(i.a.mark((function e(){var t,n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.course,n=u()(t.features),s=u()(t.settings),this.features=n,this.settings=s,this.accessCodesEnabled=s.access_codes_enabled,this.general={name:t.name,code:t.code,year:t.year,session:t.session},e.next=9,this.updateUsers();case 9:case"end":return e.stop()}}),e,this)}))),function(){return G.apply(this,arguments)}),save:(Y=Object(r.a)(i.a.mark((function e(){var t,n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={features:u()(this.features),settings:u()(this.settings)},this.general.name=this.general.name.trim()||this.course.name,this.general.code=this.general.code.trim()||this.course.code,this.general.year=this.general.year.trim()||this.course.year,this.general.session=this.general.session.trim()||this.course.session,t.name=this.general.name,t.code=this.general.code,this.yearAndSessionEditable&&(t.year=this.general.year,t.session=this.general.session),t.settings.workspace.preset||(t.settings.workspace.preset=null),this.saving=!0,e.prev=10,e.next=13,this.courseApi.update(this.course.id,t);case 13:n=e.sent,e.next=21;break;case 16:return e.prev=16,e.t0=e.catch(10),s=400===e.t0.status&&"string"==typeof e.t0.data.message?e.t0.data.message:"Unable to save course settings.",M.b({type:"error",text:s}),e.abrupt("return");case 21:return e.prev=21,this.saving=!1,e.finish(21);case 24:M.b({type:"success",text:"Updated course settings."}),Object.assign(this.settings,u()(n.settings)),Object.assign(this.course,u()(n)),this.course.name=this.general.name=n.name,this.course.code=this.general.code=n.code,this.course.year=this.general.year=n.year,this.course.session=this.general.session=n.session;case 31:case"end":return e.stop()}}),e,this,[[10,16,21,24]])}))),function(){return Y.apply(this,arguments)}),updateUsers:(K=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.usersLoading=!0,this.users=[],e.prev=2,e.next=5,this.courseApi.getAdminProfile(this.course.id);case 5:t=e.sent,this.users=t.users.map((function(e){return{id:e.id,name:e.name,role:e.role,email:e.email,tutorial:e.tutorial,accepted:e.accepted,status:e.accepted?"Enrolled":"Invitation sent",lab_id:e.lab_id,sourced_id:e.sourced_id?e.sourced_id:"",selected:!1,editing:{name:!1,role:!1,email:!1,tutorial:!1,lab_id:!1},model:{name:null,role:null,email:null,tutorial:null,lab_id:null}}})).sort((function(e,t){var n=e.role.localeCompare(t.role);return 0!==n?n:0!=(n=t.accepted===e.accepted?0:t.accepted<e.accepted?-1:1)?n:e.name.localeCompare(t.name)})),this.sebKeys=t.safe_exam_browser_keys.join("\n"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),M.b({type:"error",text:"Unable to fetch enrolled users."});case 13:return e.prev=13,this.usersLoading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[2,10,13,16]])}))),function(){return K.apply(this,arguments)}),updateAccessCodes:(Q=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.accessCodes=[],this.accessCodesLoading=!0,e.prev=2,e.next=5,this.courseApi.getAccessCodes(this.course.id);case 5:this.accessCodes=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),M.b({type:"error",text:"Unable to fetch course access codes."});case 11:return e.prev=11,this.accessCodesLoading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[2,8,11,14]])}))),function(){return Q.apply(this,arguments)}),toggleAccessCodesEnabled:(W=Object(r.a)(i.a.mark((function e(){var t,n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!this.accessCodesEnabled,this.accessCodesEnabled=t,this.accessCodesEnabledLoading=!0,(n=u()(this.course.settings)).access_codes_enabled=t,e.prev=5,e.next=8,this.courseApi.update(this.course.id,{settings:n});case 8:s=e.sent,e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(5),M.b({type:"error",text:"Unable to change setting."}),this.accessCodesEnabled=!t,e.abrupt("return");case 16:return e.prev=16,this.accessCodesEnabledLoading=!1,e.finish(16);case 19:this.accessCodesEnabled=this.settings.access_codes_enabled=this.course.settings.access_codes_enabled=s.settings.access_codes_enabled;case 20:case"end":return e.stop()}}),e,this,[[5,11,16,19]])}))),function(){return W.apply(this,arguments)}),copyAccessCode:function(e){F.a(e)},inviteUsers:(H=Object(r.a)(i.a.mark((function e(){var t,n,s,r,a,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$refs.invites.getRecords();case 3:t=e.sent,e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),M.b({type:"error",text:"Input is invalid."}),e.abrupt("return");case 10:if(t){e.next=12;break}return e.abrupt("return");case 12:if(0!==t.length){e.next=15;break}return M.b({type:"error",text:"Input is empty."}),e.abrupt("return");case 15:return n=1===t.length?"":"s",e.next=18,L.b({title:"Invite user".concat(n,"?"),text:"You are about to invite ".concat(t.length," user").concat(n," to the ").concat(this.course.code," - ").concat(this.course.name," course with role ").concat(this.invites.role,". Proceed?"),icon:"warning",primaryAction:"Invite",secondaryAction:"Cancel"});case 18:if(e.sent){e.next=20;break}return e.abrupt("return");case 20:if(!this.unenrollStudents){e.next=35;break}return e.next=23,L.b({title:"Unenroll students first?",text:"You have indicated that you want to unenroll existing students first. All enrolled students will be unenrolled prior to enrolling the new users. Proceed?",icon:"warning",primaryAction:"Unenroll Students First",secondaryAction:"Cancel"});case 23:if(e.sent){e.next=25;break}return e.abrupt("return");case 25:return e.prev=25,e.next=28,this.courseApi.unenroll(this.course.id,{role:"students"});case 28:e.next=34;break;case 30:return e.prev=30,e.t1=e.catch(25),M.b({type:"error",text:"Unable to unenroll students."}),e.abrupt("return");case 34:this.unenrollStudents=!1;case 35:return this.failedInvites=[],this.invites.loading=!0,e.prev=37,e.next=40,this.courseApi.inviteUsers(this.course.id,t,this.invites.role);case 40:for(s=e.sent,this.invites.body="",this.invites.role="student",r=0,a=Object.keys(s);r<a.length;r++)o=a[r],s[o]&&this.failedInvites.push(o);this.failedInvites.length>0?M.b({type:"error",text:"Some invitations failed to send."}):M.b({type:"success",text:"Invitations sent successfully."}),e.next=51;break;case 47:return e.prev=47,e.t2=e.catch(37),M.b({type:"error",text:400===e.t2.status&&"string"==typeof e.t2.data?e.t2.data:"Unable to send invitations"}),e.abrupt("return");case 51:return e.prev=51,this.invites.loading=!1,e.finish(51);case 54:return e.next=56,this.updateUsers();case 56:case"end":return e.stop()}}),e,this,[[0,6],[25,30],[37,47,51,54]])}))),function(){return H.apply(this,arguments)}),onUsersSearchQueryInput:l()((function(e){this.usersSearchQuery=e}),300),selectAllUsers:function(e){var t=!0,n=!1,s=void 0;try{for(var i,r=this.users[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){i.value.selected=e}}catch(a){n=!0,s=a}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}},unenroll:(V=Object(r.a)(i.a.mark((function e(){var t,n,s,r,a,o=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.usersActionLoading){e.next=2;break}return e.abrupt("return");case 2:if(t=this.selectedUsers.map((function(e){return e.id})),n=1===t.length?"":"s",(s=t.includes(this.user.id))&&!(t.length>1)){e.next=10;break}return e.next=8,L.b({title:"Unenroll user".concat(n,"?"),text:"You are about to unenroll ".concat(t.length," user").concat(n," ")+"from the course ".concat(this.course.code," - ")+"".concat(this.course.name,". Proceed?"),icon:"warning",primaryAction:"Unenroll"});case 8:if(e.sent){e.next=10;break}return e.abrupt("return");case 10:if(!s){e.next=15;break}return e.next=13,L.b({title:"Unenroll yourself?",text:"You are about to unenroll yourself from ".concat(this.course.code," - ")+"".concat(this.course.name,". You will no longer have access to this course if you proceed."),icon:"warning",primaryAction:"Unenroll Yourself"});case 13:if(e.sent){e.next=15;break}return e.abrupt("return");case 15:return this.usersActionLoading=!0,e.prev=16,e.next=19,this.courseApi.unenroll(this.course.id,{userIds:t});case 19:e.next=25;break;case 21:return e.prev=21,e.t0=e.catch(16),M.b({type:"error",text:"Unable to unenroll selected users."}),e.abrupt("return");case 25:return e.prev=25,this.usersActionLoading=!1,e.finish(25);case 28:if(M.b({type:"success",text:"Unenrolled selected users successfully."}),s)this.user.courses=this.user.courses.filter((function(e){return e.id!==o.course.id})),this.$router.push({name:"dashboard"});else for(r=new Set(t),a=this.users.length-1;a>=0;a--)r.has(this.users[a].id)&&this.users.splice(a,1);case 30:case"end":return e.stop()}}),e,this,[[16,21,25,28]])}))),function(){return V.apply(this,arguments)}),resendInvitations:(z=Object(r.a)(i.a.mark((function e(){var t,n,s,r,a,o,l,c,u,d,h,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.usersActionLoading){e.next=2;break}return e.abrupt("return");case 2:if(0!==(t=this.selectedUsers.filter((function(e){return!e.accepted})).map((function(e){return e.id}))).length){e.next=5;break}return e.abrupt("return",M.b({type:"info",text:"The selected users have already accepted their invitation."}));case 5:return n=1!==t.length,e.next=8,L.b({title:"Resend invitation".concat(n?"s":"","?"),text:"You are about to resend ".concat(n?"invitations":"an invitation"," ")+"to ".concat(t.length," user").concat(n?"s":""," in the course ")+"".concat(this.course.code," - ").concat(this.course.name,". Proceed?"),subtext:"Only the selected users who have not accepted their invitation will be sent another one.",icon:"warning",primaryAction:"Resend",secondaryAction:"Cancel"});case 8:if(e.sent){e.next=10;break}return e.abrupt("return");case 10:return this.usersActionLoading=!0,this.failedReinvites=[],e.prev=12,e.next=15,this.courseApi.resendInvitations(this.course.id,t);case 15:for(s=e.sent,r=0,a=Object.keys(s);r<a.length;r++)o=a[r],s[o]&&this.failedReinvites.push(o);for(this.failedReinvites.length>0?M.b({type:"error",text:"Some reinvitations failed to send."}):M.b({type:"success",text:"Reinvitations sent successfully."}),l=!0,c=!1,u=void 0,e.prev=21,d=this.users[Symbol.iterator]();!(l=(h=d.next()).done);l=!0)(p=h.value).selected=!!s[p.email];e.next=29;break;case 25:e.prev=25,e.t0=e.catch(21),c=!0,u=e.t0;case 29:e.prev=29,e.prev=30,l||null==d.return||d.return();case 32:if(e.prev=32,!c){e.next=35;break}throw u;case 35:return e.finish(32);case 36:return e.finish(29);case 37:e.next=42;break;case 39:e.prev=39,e.t1=e.catch(12),M.b({type:"error",text:400===e.t1.status&&"string"==typeof e.t1.data?e.t1.data:"Unable to resend invitation emails"});case 42:return e.prev=42,this.usersActionLoading=!1,e.finish(42);case 45:case"end":return e.stop()}}),e,this,[[12,39,42,45],[21,25,29,37],[30,,32,36]])}))),function(){return z.apply(this,arguments)}),editUserField:function(e,t){e.editing[t]||(e.editing[t]=!0,e.model[t]=e[t])},commitUserEdit:(U=Object(r.a)(i.a.mark((function e(t){var n,s,r,o,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.usersEditingUser,"labName"===(s=this.usersEditingField)&&(s="lab_id"),n.id!==this.user.id||"role"!==s){e.next=8;break}return e.next=6,L.b({icon:"warning",title:"Downgrade your role?",text:"You are attempting to downgrade your role from admin to ".concat(t,". If you proceed, you will no longer have admin access in this course, and will require another admin to change your role again."),primaryAction:"Downgrade"});case 6:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:this.usersEditingUser=null,this.usersEditingField=null,r=n[s],o=t,e.t0=s,e.next="name"===e.t0?15:"email"===e.t0?15:"role"===e.t0?15:"tutorial"===e.t0?15:17;break;case 15:return o=(o||"").trim(),e.abrupt("break",17);case 17:if("tutorial"===s&&(o=o.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).join(";")),r!==o&&(["tutorial","lab_id"].includes(s)||o)){e.next=20;break}return e.abrupt("return");case 20:if(n.original[s]=o,l=Object(a.a)({},s,o),e.prev=22,!["role","tutorial","lab_id"].includes(s)){e.next=28;break}return e.next=26,this.courseApi.updateCourseRole(this.course.id,n.id,l);case 26:e.next=30;break;case 28:return e.next=30,this.userApi.update(n.id,l);case 30:e.next=36;break;case 32:e.prev=32,e.t1=e.catch(22),M.b({type:"error",text:"Unable to update user information."}),n.original[s]=r;case 36:case"end":return e.stop()}}),e,this,[[22,32]])}))),function(e){return U.apply(this,arguments)})}},J=(n("f8eo"),Object(N.a)(X,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("DetailHeader",{attrs:{disabled:e.saving},on:{save:e.save}}),e._v(" "),n("div",{staticClass:"adm-context"},[n("section",{staticClass:"adm-section"},[n("table",{staticClass:"adm-field-layout",attrs:{role:"presentation"}},[n("tr",[n("th",[n("label",{attrs:{for:e.codeId}},[e._v("Code")])]),e._v(" "),n("td",[n("EdInput",{staticClass:"adm-field-input",attrs:{id:e.codeId,disabled:e.saving},model:{value:e.general.code,callback:function(t){e.$set(e.general,"code",t)},expression:"general.code"}})],1)]),e._v(" "),n("tr",[n("th",[n("label",{attrs:{for:e.nameId}},[e._v("Name")])]),e._v(" "),n("td",[n("EdInput",{staticClass:"adm-field-input",attrs:{id:e.nameId,disabled:e.saving},model:{value:e.general.name,callback:function(t){e.$set(e.general,"name",t)},expression:"general.name"}})],1)]),e._v(" "),e.yearAndSessionEditable?n("tr",[n("th",[n("label",{attrs:{for:e.yearId}},[e._v("Year")])]),e._v(" "),n("td",[n("EdInput",{staticClass:"adm-field-input",attrs:{id:e.yearId,disabled:e.saving},model:{value:e.general.year,callback:function(t){e.$set(e.general,"year",t)},expression:"general.year"}})],1)]):e._e(),e._v(" "),e.yearAndSessionEditable?n("tr",[n("th",[n("label",{attrs:{for:e.sessionId}},[e._v("Session")])]),e._v(" "),n("td",[n("EdInput",{staticClass:"adm-field-input",attrs:{id:e.sessionId,disabled:e.saving},model:{value:e.general.session,callback:function(t){e.$set(e.general,"session",t)},expression:"general.session"}})],1)]):e._e()])]),e._v(" "),n("section",{staticClass:"adm-section"},[n("h2",{staticClass:"adm"},[e._v("Join Link")]),e._v(" "),n("p",{staticClass:"adm-description"},[e._v("\n\t\t\t\tAllow students to self sign up to the course by visiting the join link below.\n\t\t\t")]),e._v(" "),n("p",[n("EdCheck",{attrs:{label:"Enable",value:e.accessCodesEnabled,disabled:e.accessCodesEnabledLoading},on:{input:e.toggleAccessCodesEnabled}})],1),e._v(" "),e.settings.access_codes_enabled?n("div",e._l(e.computedAccessCodes,(function(t){return n("div",{key:t.code,staticClass:"adm-access-code"},[n("EdInput",{staticClass:"adm-access-code-link",attrs:{value:t.link,readonly:""},nativeOn:{click:function(e){return e.target.select()}}}),e._v(" "),n("EdButton",{staticClass:"adm-access-code-copy",on:{click:function(n){return e.copyAccessCode(t.link)}}},[e._v("\n\t\t\t\t\t\tCopy\n\t\t\t\t\t")])],1)})),0):e._e()]),e._v(" "),n("section",{staticClass:"adm-section"},[n("h2",{staticClass:"adm"},[e._v("Features")]),e._v(" "),575!==e.course.id?e._l(e.visibleFeatures,(function(t){return n("p",{key:t.key},[n("EdCheck",{attrs:{label:t.label,disabled:e.saving},model:{value:e.features[t.key],callback:function(n){e.$set(e.features,t.key,n)},expression:"features[feature.key]"}})],1)})):e._e(),e._v(" "),n("div",{staticClass:"adm-field"},[n("label",[e._v("Default page")]),e._v(" "),n("EdSelect",{staticClass:"adm-field-input",attrs:{disabled:e.saving},model:{value:e.settings.default_page,callback:function(t){e.$set(e.settings,"default_page",t)},expression:"settings.default_page"}},e._l(e.defaultPageOptions,(function(t){return n("option",{key:t.value,domProps:{value:t.value}},[e._v("\n\t\t\t\t\t\t"+e._s(t.text)+"\n\t\t\t\t\t")])})),0)],1)],2),e._v(" "),n("section",{staticClass:"adm-section"},[n("h2",{staticClass:"adm"},[e._v("Invite Users")]),e._v(" "),n("p",{staticClass:"adm-description"},[e._v("\n\t\t\t\tEnter the full name and email address of each user in CSV format.\n\t\t\t\tYou can also copy and paste user data from Excel.\n\t\t\t")]),e._v(" "),n("div",{staticClass:"adm-field"},[n("label",[e._v("Role")]),e._v(" "),n("EdSelect",{staticClass:"adm-field-input",model:{value:e.invites.role,callback:function(t){e.$set(e.invites,"role",t)},expression:"invites.role"}},e._l(e.roles,(function(t){return n("option",{key:t.role,domProps:{value:t.role}},[e._v("\n\t\t\t\t\t\t"+e._s(t.label)+"\n\t\t\t\t\t")])})),0)],1),e._v(" "),n("p",[n("EdCheck",{attrs:{label:"Unenroll existing students before importing"},model:{value:e.unenrollStudents,callback:function(t){e.unenrollStudents=t},expression:"unenrollStudents"}})],1),e._v(" "),n("InvitationsInput",{ref:"invites",staticClass:"adm-invitations-input",attrs:{disabled:e.invites.loading},model:{value:e.invites.body,callback:function(t){e.$set(e.invites,"body",t)},expression:"invites.body"}}),e._v(" "),n("div",{staticClass:"adm-actions"},[n("EdButton",{staticClass:"primary",attrs:{disabled:e.invites.loading},on:{click:e.inviteUsers}},[e._v("\n\t\t\t\t\tInvite\n\t\t\t\t")])],1),e._v(" "),e.failedInvites.length?n("div",{staticClass:"adm-error-box"},[n("p",[e._v("Failed to send email invitations to the following recipients:")]),e._v(" "),e._l(e.failedInvites,(function(t){return n("div",{key:t},[e._v(e._s(t))])}))],2):e._e()],1),e._v(" "),n("section",{staticClass:"adm-section"},[n("h2",{staticClass:"adm"},[e._v("Users")]),e._v(" "),e.usersLoading?n("Spinner",{staticClass:"adm-spinner"}):[n("p",[e._v(e._s(e.invitationSummaryText))]),e._v(" "),n("p",[e._v("\n\t\t\t\t\tClick a cell to edit its value. Press "),n("KeyboardShortcut",{attrs:{value:"Enter"}}),e._v(" or click away to\n\t\t\t\t\tsave the changes, or "),n("KeyboardShortcut",{attrs:{value:"Escape"}}),e._v(" to cancel.\n\t\t\t\t")],1),e._v(" "),n("SearchInput",{staticClass:"adm-search",attrs:{value:e.usersSearchQuery},on:{input:e.onUsersSearchQueryInput}}),e._v(" "),n("UsersTable",{attrs:{users:e.filteredUsers,labs:e.labs,"search-query":e.usersSearchQuery,"editing-field":e.usersEditingField,"editing-user":e.usersEditingUser},on:{"update:editingField":function(t){e.usersEditingField=t},"update:editing-field":function(t){e.usersEditingField=t},"update:editingUser":function(t){e.usersEditingUser=t},"update:editing-user":function(t){e.usersEditingUser=t},select:function(e){e.user.original.selected=e.selected},"select-all":function(t){return e.selectAllUsers(t)},commit:e.commitUserEdit}}),e._v(" "),n("div",{staticClass:"adm-actions"},[n("EdButton",{attrs:{disabled:e.usersActionLoading||0===e.selectedUsers.length},on:{click:e.unenroll}},[e._v("\n\t\t\t\t\t\tUnenroll\n\t\t\t\t\t")]),e._v(" "),n("EdButton",{attrs:{disabled:e.usersActionLoading||0===e.selectedUsers.length},on:{click:e.resendInvitations}},[e._v("\n\t\t\t\t\t\tResend invitations\n\t\t\t\t\t")]),e._v(" "),n("EdButton",{attrs:{disabled:e.usersActionLoading},on:{click:e.update}},[e._v("\n\t\t\t\t\t\tRefresh\n\t\t\t\t\t")])],1),e._v(" "),e.failedReinvites.length?n("div",{staticClass:"adm-error-box"},[n("p",[e._v("Failed to send email reinvitations to the following recipients:")]),e._v(" "),e._l(e.failedReinvites,(function(t){return n("div",{key:t},[e._v(e._s(t))])}))],2):e._e()]],2)])],1)}),[],!1,null,null,null));t.default=J.exports},"7dVC":function(e,t,n){"use strict";var s=n("ygYv");n.n(s).a},"7eln":function(e,t,n){},"7iXl":function(e,t,n){},"7q6n":function(e,t,n){"use strict";var s=n("HAPq");n.n(s).a},"7sJX":function(e,t,n){},"7tbW":function(e,t,n){var s=n("LGYb");e.exports=function(e){return e&&e.length?s(e):[]}},"7tqH":function(e,t,n){},"7yah":function(e,t,n){},"7zca":function(e,t,n){"use strict";var s={components:{Icon:n("WmPt").a},props:{icon:{type:String,default:null},pressed:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},dot:{type:Boolean,default:!1}},computed:{cssClass:function(){return{pressed:this.pressed}}}},i=(n("OMd9"),n("KHd+")),r=Object(i.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"toolbar-button",class:e.cssClass,attrs:{disabled:e.disabled},on:{click:function(t){return e.$emit("click",t)}}},[n("div",{staticClass:"tbbut-layout"},[e.dot?n("span",{staticClass:"tbbut-dot"}):e._e(),e._v(" "),e.icon?n("Icon",{staticClass:"tbbut-icon",attrs:{icon:e.icon}}):e._e(),e._v(" "),e.$slots.default||e.$scopedSlots.default?n("span",{staticClass:"tbbut-content"},[e._t("default")],2):e._e()],1)])}),[],!1,null,null,null);t.a=r.exports},"83PK":function(e,t,n){"use strict";n("pNMO"),n("TeQF"),n("yq1k"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("rePB"),i=n("L2JU");function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var a={props:{user:{type:Object,default:void 0},course:{type:Object,default:void 0},role:{type:String,default:void 0},showTutorials:{type:Boolean,default:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(i.c)(["userTutorialsVisible","getUserTutorials","getDisplayRoleLabel"]),{computedRole:function(){return this.role||this.user&&this.user.course_role},displayRole:function(){return this.getDisplayRoleLabel(this.computedRole,this.course)},tutorials:function(){return this.userTutorialsVisible&&this.showTutorials?this.getUserTutorials(this.user):[]},segments:function(){return this.displayRole?[this.displayRole]:this.tutorials},cssClass:function(){return["staff","admin"].includes(this.computedRole)?"url-admin":"url-student"}})},o=(n("P8F1"),n("KHd+")),l=Object(o.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.segments.length,expression:"segments.length"}],staticClass:"user-role-label",class:e.cssClass},e._l(e.segments,(function(t,s){return n("span",{key:s,staticClass:"url-segment"},[e._v("\n\t\t"+e._s(t)+"\n\t")])})),0)}),[],!1,null,null,null);t.a=l.exports},"87p4":function(e,t,n){},"8CCd":function(e,t,n){"use strict";var s=n("VpGe");n.n(s).a},"8CHx":function(e,t,n){},"8Ho0":function(e,t,n){},"8IVR":function(e,t,n){},"8Jzg":function(e,t,n){"use strict";var s=n("dXV4");n.n(s).a},"8KRA":function(e,t,n){"use strict";var s=n("Z0+6");n.n(s).a},"8KYk":function(e,t,n){"use strict";var s=n("lszC");n.n(s).a},"8N1h":function(e,t,n){"use strict";var s=n("PvBr");n.n(s).a},"8NaZ":function(e,t,n){"use strict";var s=n("LiSN");n.n(s).a},"8PNo":function(e,t,n){"use strict";var s=n("Kw5r"),i=(n("UxlC"),n("ySoy")),r=n("sK6X"),a=n("5G72"),o=(n("qePV"),n("Rm1S"),n("9Arg")),l={props:{primaryAction:{type:String,default:""},secondaryAction:{type:String,default:""},defaultAction:{type:Number,default:null}},computed:{absolute:function(){return navigator.userAgent.match(/iPhone|iPod|Android|Windows Phone/)},style:function(){if(this.absolute){var e=Math.max(window.innerWidth,window.innerHeight)-window.innerHeight;return{position:"absolute",left:0,right:0,top:window.pageYOffset-e/2+"px",height:window.innerHeight+e+"px"}}return{position:"fixed",left:0,top:0,right:0,bottom:0}}},mounted:function(){this.$el.focus(),this.absolute&&o.F(!1)},destroyed:function(){this.absolute&&o.F(!0)},methods:{resolve:function(e){this.$emit("action",e)},resolveDefault:function(){null!=this.defaultAction&&this.resolve(0===this.defaultAction)},lightDismiss:function(){this.resolve(!1)},onClick:function(e){e.target===this.$el&&this.lightDismiss()}}},c=(n("nAm1"),n("KHd+")),u=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dialog",style:e.style,attrs:{tabindex:"-1"},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.resolveDefault(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.lightDismiss(t)}],click:e.onClick}},[n("div",{staticClass:"dialog-inner"},[n("div",{staticClass:"dialog-body"},[e._t("default")],2),e._v(" "),n("div",{staticClass:"dialog-footer"},[e.secondaryAction?n("div",{staticClass:"dialog-btn",class:{default:1===e.defaultAction},on:{click:function(t){return e.resolve(!1)}}},[e._v(e._s(e.secondaryAction))]):e._e(),e._v(" "),e.primaryAction?n("div",{staticClass:"dialog-btn",class:{default:0===e.defaultAction},on:{click:function(t){return e.resolve(!0)}}},[e._v(e._s(e.primaryAction))]):e._e()])])])}),[],!1,null,null,null).exports,d={directives:{Autoselect:r.a},components:{EdTextarea:a.a,DialogBox:u},props:{text:{type:String,required:!0},shortcut:{type:Object,default:function(){return{osx:"Cmd+C",default:"Ctrl+C"}}}},computed:{computedShortcut:function(){switch(i.h){case"ios":return null;case"mac":return this.shortcut.osx.replace("Cmd","&#8984;");default:return this.shortcut.default}}},methods:{dismiss:function(){this.$el.remove(),this.$destroy()}}},h=(n("ejQJ"),Object(c.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogBox",{attrs:{"primary-action":"OK","default-action":0},on:{action:e.dismiss}},[n("p",[e.computedShortcut?[e._v("Press "),n("span",{staticClass:"dcopy-key"},[e._v(e._s(e.computedShortcut))]),e._v(" to copy to clipboard.")]:[e._v("Copy to clipboard.")]],2),e._v(" "),n("EdTextarea",{directives:[{name:"autoselect",rawName:"v-autoselect"}],staticClass:"dcopy-input",attrs:{value:e.text}})],1)}),[],!1,null,null,null).exports),p=n("/Yj0");n.d(t,"a",(function(){return m}));var f=document.createElement("textarea");function m(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=document.activeElement;f.style.display="",f.style.top=window.pageYOffset+"px",f.value=e,f.focus(),f.selectionStart=0,f.selectionEnd=e.length;try{t=document.execCommand("copy")}catch(a){t=!1}if(f.blur(),f.style.display="none",t)p.b({type:"success",text:n.successMessage||"Copied to clipboard."}),i.focus();else{var r=new s.default({el:document.createElement("div"),destroyed:function(){i.focus()},render:function(){var t=arguments[0];return t(h,{attrs:{text:e,shortcut:n.shortcut}})}});document.body.appendChild(r.$el)}}f.style.display="none",f.style.opacity=0,f.style.position="absolute",f.style.left="-10000px",f.style.pointerEvents="none",f.readOnly=!0,document.body.appendChild(f)},"8U1b":function(e,t,n){"use strict";var s=n("1An/");n.n(s).a},"8UHf":function(e,t,n){"use strict";var s=n("GYOz");n.n(s).a},"8V1c":function(e,t,n){},"8W5h":function(e,t,n){"use strict";var s=n("2R6q");n.n(s).a},"8YXh":function(e,t,n){"use strict";var s=n("Hmws");n.n(s).a},"8Zy8":function(e,t,n){},"8cCn":function(e,t,n){"use strict";var s=n("mtps");n.n(s).a},"8cyN":function(e,t,n){"use strict";var s=n("J8C/");n.n(s).a},"8dc9":function(e,t,n){},"8f0z":function(e,t,n){"use strict";n("TeQF"),n("fbCW"),n("qePV"),n("SYor");var s,i=n("WmPt"),r=n("qJ5K"),a=n("nu3u"),o=n("rePB"),l=(n("pNMO"),n("4Brf"),n("0oug"),n("yq1k"),n("4mDm"),n("2B1R"),n("07d7"),n("JTJg"),n("PKPk"),n("3bBZ"),n("Tskq"),{props:{question:{type:void 0,default:void 0},attempts:{type:Array,default:function(){return[]}},namesHidden:{type:Boolean,default:!1},responsesHidden:{type:Boolean,default:!1},answersHidden:{type:Boolean,default:!1}},computed:{quizQuestion:function(){return this.question&&this.question.quizQuestion},responses:function(){var e=[],t=!0,n=!1,s=void 0;try{for(var i,r=this.attempts[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value,o=!0,l=!1,c=void 0;try{for(var u,d=a.responses[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var h=u.value;if(h.questionId===this.question.id){e.push(h);break}}}catch(p){l=!0,c=p}finally{try{o||null==d.return||d.return()}finally{if(l)throw c}}}}catch(p){n=!0,s=p}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}return e},attemptsById:function(){return new Map(this.attempts.map((function(e){return[e.id,e]})))}}}),c={props:{frac:{type:Number,default:0},correct:{type:Boolean,default:!1},responseVisible:{type:Boolean,default:!1},answerVisible:{type:Boolean,default:!1}},computed:{cssClass:function(){return{"bar-response-visible":this.responseVisible,"bar-answer-visible":this.answerVisible}},cssStyle:function(){if(this.responseVisible)return{width:"".concat(100*this.frac,"%")}},percent:function(){return Math.round(100*this.frac)}}},u=(n("Kji7"),n("KHd+")),d=Object(u.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bar",class:e.cssClass},[n("div",{staticClass:"bar-bar",class:{correct:e.correct},style:e.cssStyle}),e._v(" "),n("div",{staticClass:"bar-content"},[e._t("default")],2),e._v(" "),n("div",{staticClass:"bar-percent"},[e._v(e._s(e.percent)+"%")])])}),[],!1,null,null,null).exports,h={components:{FormattedDisplay:r.a,Bar:d},props:{options:{type:Array,required:!0},formatted:{type:Boolean,default:!1},responsesHidden:{type:Boolean,default:!1},answersHidden:{type:Boolean,default:!1},spans:{type:Array,default:void 0}}},p=(n("HBXA"),Object(u.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sway-options-listing",class:{"swayol-answers-visible":!e.answersHidden}},e._l(e.options,(function(t,s){return n("div",{key:s,staticClass:"swayol-option"},[n("div",{staticClass:"swayol-option-label",class:{correct:t.correct}},[e._v("\n\t\t\t"+e._s(t.label)+"\n\t\t")]),e._v(" "),n("Bar",{staticClass:"swayol-option-bar",attrs:{frac:t.frac,correct:t.correct,"response-visible":!e.responsesHidden,"answer-visible":!e.answersHidden}},[n("FormattedDisplay",{attrs:{value:t.content,formatted:e.formatted,spans:e.spans}})],1)],1)})),0)}),[],!1,null,null,null).exports),f={components:{OptionsListing:p},extends:l,computed:{options:function(){var e=this,t=this.quizQuestion.answers.map((function(t,n){return{label:String.fromCharCode("A".charCodeAt(0)+n),content:t,correct:e.quizQuestion.assessed?e.quizQuestion.solution.includes(n):null,frac:0}})),n=0,s=!0,i=!1,r=void 0;try{for(var a,o=this.responses[Symbol.iterator]();!(s=(a=o.next()).done);s=!0){var l=a.value,c=!0,u=!1,d=void 0;try{for(var h,p=l.data[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){t[h.value].frac++,n++}}catch(y){u=!0,d=y}finally{try{c||null==p.return||p.return()}finally{if(u)throw d}}}}catch(y){i=!0,r=y}finally{try{s||null==o.return||o.return()}finally{if(i)throw r}}if(n){var f=!0,m=!1,v=void 0;try{for(var b,g=t[Symbol.iterator]();!(f=(b=g.next()).done);f=!0){b.value.frac/=n}}catch(y){m=!0,v=y}finally{try{f||null==g.return||g.return()}finally{if(m)throw v}}}return t}}},m=Object(u.a)(f,(function(){var e=this.$createElement;return(this._self._c||e)("OptionsListing",{attrs:{options:this.options,formatted:this.quizQuestion.formatted,"names-hidden":this.namesHidden,"responses-hidden":this.responsesHidden,"answers-hidden":this.answersHidden}})}),[],!1,null,null,null).exports,v=(n("+2oP"),n("ToJy"),n("hSdx")),b={props:{items:{type:Array,required:!0},namesHidden:{type:Boolean,default:!1},answersHidden:{type:Boolean,default:!1},responsesHidden:{type:Boolean,default:!1}},computed:{sortedItems:function(){var e=this;return this.items.slice().sort(v.compositeComparator((function(t,n){return e.answersHidden?0:(t.correct?0:1)-(n.correct?0:1)}),(function(e,t){return v.naturalComparator(e.name,t.name)})))}}},g=(n("8Jzg"),Object(u.a)(b,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sway-question-result-response-listing",class:{"sqsrrl-answers-visible":!e.answersHidden}},[n("table",{staticClass:"sqsrrl-items"},e._l(e.sortedItems,(function(t,s){return n("tr",{key:s},[n("td",{staticClass:"sqsrrl-col-name"},[e._v(e._s(e.namesHidden?"(Name hidden)":t.name))]),e._v(" "),n("td",{staticClass:"sqsrrl-col-content",class:{correct:t.correct}},[e.responsesHidden?[e._v("(Response hidden)")]:e._t("default",null,{item:t})],2)])})),0)])}),[],!1,null,null,null).exports),y={components:{ResponseListing:g},extends:l,computed:{items:function(){var e=this;return this.responses.map((function(t){return{name:e.attemptsById.get(t.attemptId).user.name,content:t.data,correct:e.quizQuestion.assessed?t.correct:null}}))}}},w=(n("kmwD"),Object(u.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ResponseListing",{attrs:{items:e.items,formatted:e.quizQuestion.formatted,"names-hidden":e.namesHidden,"responses-hidden":e.responsesHidden,"answers-hidden":e.answersHidden},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.item;return[n("span",{staticClass:"sway-question-result-short-answer-content"},[e._v(e._s(s.content))])]}}])})}),[],!1,null,null,null).exports),_={components:{ResponseListing:g,AmberDisplay:n("ltWs").a},extends:l,computed:{items:function(){var e=this;return this.responses.map((function(t){return{name:e.attemptsById.get(t.attemptId).user.name,content:t.data.content,correct:e.quizQuestion.assessed?t.correct:null}}))}}},k=(n("V86E"),Object(u.a)(_,(function(){var e=this.$createElement,t=this._self._c||e;return t("ResponseListing",{attrs:{items:this.items,formatted:this.quizQuestion.formatted,"names-hidden":this.namesHidden,"responses-hidden":this.responsesHidden,"answers-hidden":this.answersHidden},scopedSlots:this._u([{key:"default",fn:function(e){var n=e.item;return[t("AmberDisplay",{staticClass:"sway-question-result-general-content",attrs:{value:n.content}})]}}])})}),[],!1,null,null,null).exports),C={components:{OptionsListing:p},extends:l,computed:{options:function(){var e=[{label:"True",correct:this.quizQuestion.assessed?!0===this.quizQuestion.solution:null,frac:0},{label:"False",correct:this.quizQuestion.assessed?!1===this.quizQuestion.solution:null,frac:0}];if(this.responses.length>0){var t=!0,n=!1,s=void 0;try{for(var i,r=this.responses[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){e[i.value.data?0:1].frac++}}catch(a){n=!0,s=a}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}e[0].frac/=this.responses.length,e[1].frac/=this.responses.length}return e}}},x=Object(u.a)(C,(function(){var e=this.$createElement;return(this._self._c||e)("OptionsListing",{attrs:{options:this.options,formatted:this.quizQuestion.formatted,"names-hidden":this.namesHidden,"responses-hidden":this.responsesHidden,"answers-hidden":this.answersHidden}})}),[],!1,null,null,null).exports,j=(n("EnZy"),n("ODXe")),O=n("KQm4"),S={extends:l,computed:{computedWords:function(){var e=new Map,t=0,n=!0,s=!1,i=void 0;try{for(var r,a=this.responses[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value.data.trim().toLowerCase().split(/\s+/),l=!0,c=!1,u=void 0;try{for(var d,h=o[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var p=d.value,f=(e.get(p)||0)+1;e.set(p,f),t=Math.max(t,f)}}catch(m){c=!0,u=m}finally{try{l||null==h.return||h.return()}finally{if(c)throw u}}}}catch(m){s=!0,i=m}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}return Object(O.a)(e).map((function(e){var n=Object(j.a)(e,2);return{text:n[0],rank:n[1]/t}})).sort((function(e,t){return v.naturalComparator(e.text,t.text)}))}},methods:{wordStyle:function(e){return{opacity:.25+.75*e,fontSize:(50+250*e|0)+"%"}}}},E=(n("FrRX"),Object(u.a)(S,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sway-question-result-wordcloud"},[e.responsesHidden?e._e():e._l(e.computedWords,(function(t){return n("span",{key:t.text,style:e.wordStyle(t.rank)},[e._v("\n\t\t\t"+e._s(t.text)+"\n\t\t")])}))],2)}),[],!1,null,null,null).exports),T={components:{ResponseListing:g},extends:l,computed:{items:function(){var e=this;return this.responses.map((function(t){return{name:e.attemptsById.get(t.attemptId).user.name,content:t.data.map((function(t){return e.quizQuestion.items[t]})).join(", "),correct:e.quizQuestion.assessed?t.correct:null}}))}}},I=Object(u.a)(T,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("ResponseListing",{attrs:{items:e.items,formatted:e.quizQuestion.formatted,"names-hidden":e.namesHidden,"responses-hidden":e.responsesHidden,"answers-hidden":e.answersHidden},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.item;return[e._v("\n\t"+e._s(n.content)+"\n")]}}])})}),[],!1,null,null,null).exports,D={components:{CanvasSketch:n("6inl").a},extends:l,computed:{paths:function(){return this.responsesHidden?[]:this.responses.reduce((function(e,t){return e.push.apply(e,Object(O.a)(t.data)),e}),[])}}},P=(n("oQLL"),Object(u.a)(D,(function(){var e=this.$createElement;return(this._self._c||e)("CanvasSketch",{staticClass:"sway-question-result-sketch",attrs:{"image-url":this.quizQuestion.imageUrl,"image-width":this.quizQuestion.imageWidth,"image-height":this.quizQuestion.imageHeight,value:this.paths,readonly:"",overlay:""}})}),[],!1,null,null,null).exports),A=n("Pa8A"),N=n("JQId"),R={directives:{Tooltip:A.a},extends:N.a,props:{region:{type:Array,default:null},value:{type:Array,default:null},correctnessVisible:{type:Boolean,default:!1},namesVisible:{type:Boolean,default:!1}},computed:{path:function(){if(this.region)return v.svgPathFromPolygon(this.region,{close:!0})},points:function(){return this.value||[]}}},M=(n("dYCX"),{components:{CanvasPoints:Object(u.a)(R,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{ref:"svg",staticClass:"quiz-canvas-points",class:{"scanpts-correctness":e.correctnessVisible},style:e.style,attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:e.viewBox}},[e.imageUrl?n("image",{attrs:{"xlink:href":e.imageUrl,width:e.width,height:e.height}}):e._e(),e._v(" "),e.path?n("path",{attrs:{d:e.path,"vector-effect":"non-scaling-stroke"}}):e._e(),e._v(" "),e._l(e.points,(function(t,s){return n("circle",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.namesVisible?t.label:null,expression:"namesVisible ? point.label : null"}],key:s,class:{correct:t.correct},attrs:{cx:t.x,cy:t.y,r:"1"}})}))],2)}),[],!1,null,null,null).exports},extends:l,computed:{region:function(){return this.answersHidden?[]:this.quizQuestion.solution},points:function(){var e=this;return this.responsesHidden?[]:this.responses.map((function(t){return{x:t.data.x,y:t.data.y,correct:t.correct,name:e.attemptsById.get(t.attemptId).user.name}}))}}}),L=(n("Wmcy"),Object(u.a)(M,(function(){var e=this.$createElement;return(this._self._c||e)("CanvasPoints",{staticClass:"sway-question-result-hotspot",attrs:{"image-url":this.quizQuestion.imageUrl,"image-width":this.quizQuestion.imageWidth,"image-height":this.quizQuestion.imageHeight,region:this.region,value:this.points,"correctness-hidden":this.answersHidden,"names-hidden":this.namesHidden,readonly:"",overlay:""}})}),[],!1,null,null,null).exports),F=n("E2AO"),B=(s={},Object(o.a)(s,F.a.TYPE_MULTIPLE_CHOICE,m),Object(o.a)(s,F.a.TYPE_SHORT_ANSWER,w),Object(o.a)(s,F.a.TYPE_GENERAL,k),Object(o.a)(s,F.a.TYPE_TRUE_FALSE,x),Object(o.a)(s,F.a.TYPE_WORDCLOUD,E),Object(o.a)(s,F.a.TYPE_NUMERICAL,w),Object(o.a)(s,F.a.TYPE_REORDER,I),Object(o.a)(s,F.a.TYPE_SKETCH,P),Object(o.a)(s,F.a.TYPE_HOTSPOT,L),s),q=n("/jHr"),$={components:{Icon:i.a,FormattedDisplay:r.a,Explanation:a.a},props:{result:{type:null,required:!0,validator:function(e){return null!=e}},itemIndex:{type:Number,required:!0},questionIndex:{type:Number,required:!0},namesHidden:{type:Boolean,default:!1},responsesHidden:{type:Boolean,default:!1},answersHidden:{type:Boolean,default:!1},spans:{type:Array,default:void 0}},computed:{component:function(){return B[this.quizQuestion.type]},question:function(){return this.result.items[this.itemIndex].questions[this.questionIndex]},quizQuestion:function(){return this.question.quizQuestion},attempts:function(){return this.result.attempts},responses:function(){var e=this;return this.result.attempts.reduce((function(t,n){var s=n.responses.find((function(t){return t.questionId===e.question.id}));return s&&t.push(s),t}),[])},correctFrac:function(){return this.responses.filter((function(e){return e.correct})).length/this.responses.length||0},hasExplanation:function(){return this.quizQuestion.explanation&&(this.quizQuestion.formatted?!q.c(this.quizQuestion.explanation):this.quizQuestion.explanation.trim())}},methods:{formatPercent:v.formatPercent}},U=(n("gbAs"),Object(u.a)($,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sway-question-result"},[n("header",{staticClass:"sqsr-header"},[n("Icon",{staticClass:"sqsr-header-icon",attrs:{icon:"quiz-question-"+e.quizQuestion.type}}),e._v(" "),n("h1",{staticClass:"sqsr-header-heading"},[e._v(e._s(e.quizQuestion.constructor.humanized))]),e._v(" "),n("span",{staticClass:"sqsr-header-summary"},[n("span",[n("strong",[e._v(e._s(e.responses.length))]),e._v(" of "),n("strong",[e._v(e._s(e.attempts.length))]),e._v(" answered")]),e._v(" "),"survey"!==e.result.quiz.type?n("span",[n("strong",[e._v(e._s(e.formatPercent(e.correctFrac)))]),e._v(" correct")]):e._e()])],1),e._v(" "),n("FormattedDisplay",{staticClass:"sqsr-content",attrs:{value:e.quizQuestion.content,formatted:e.quizQuestion.formatted,spans:e.spans}}),e._v(" "),e.hasExplanation&&!e.answersHidden?n("Explanation",{staticClass:"sqsr-explanation",attrs:{value:e.quizQuestion.explanation,formatted:e.quizQuestion.formatted,spans:e.spans}}):e._e(),e._v(" "),n(e.component,{key:e.question.id,tag:"component",staticClass:"sqsr-result",attrs:{question:e.question,attempts:e.result.attempts,"names-hidden":e.namesHidden,"responses-hidden":e.responsesHidden,"answers-hidden":e.answersHidden}})],1)}),[],!1,null,null,null));t.a=U.exports},"8iA0":function(e,t,n){},"8jmn":function(e,t,n){"use strict";var s=n("pFjV");n.n(s).a},"8m/x":function(e,t,n){"use strict";var s=n("ribY");n.n(s).a},"8owx":function(e,t,n){},"8qT0":function(e,t,n){},"8va7":function(e,t,n){},"8wRa":function(e,t,n){"use strict";n.r(t);n("pNMO"),n("4Brf"),n("0oug"),n("TeQF"),n("fbCW"),n("4mDm"),n("2B1R"),n("ToJy"),n("Tskq"),n("qePV"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("PKPk"),n("FZtP"),n("3bBZ");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("KQm4"),o=n("rePB"),l=n("L2JU"),c=n("Q2AE"),u=n("K4j9"),d=(n("NjsY"),n("KHd+")),h=Object(d.a)({},(function(){var e=this.$createElement;this._self._c;return this._m(0)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"sway-cube"},[t("div",{staticClass:"sway-cube-root"},[t("div",{staticClass:"sway-cube-side"}),this._v(" "),t("div",{staticClass:"sway-cube-side"}),this._v(" "),t("div",{staticClass:"sway-cube-side"}),this._v(" "),t("div",{staticClass:"sway-cube-side"}),this._v(" "),t("div",{staticClass:"sway-cube-side"}),this._v(" "),t("div",{staticClass:"sway-cube-side"})])])}],!1,null,null,null).exports,p=n("t19P"),f=n("TphV"),m=n("2PkB"),v=n("WmPt"),b=n("4K9I"),g=n("abSr"),y=n("t1TD"),w={components:{Icon:v.a},props:{items:{type:Array,required:!0},selectedIndex:{type:Number,default:null}},computed:{computedItems:function(){var e=this,t=1;return this.items.map((function(n,s){return{cssClass:{selected:e.selectedIndex===s},computedQuestions:n.questions.map((function(e){return{cssClass:{completed:null!=e.correct,seen:"unattempted"!==e.attemptStatus},icon:!0===e.correct?"sway-nav-correct":!1===e.correct?"sway-nav-incorrect":"submitted"===e.attemptStatus?"sway-nav-submitted":"attempted"===e.attemptStatus?"sway-nav-attempted":null,number:t++}}))}}))}}},_=(n("AbJy"),Object(d.a)(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sway-activities-items-nav"},[n("div",{staticClass:"sain-layout"},e._l(e.computedItems,(function(t,s){return n("div",{key:s,staticClass:"sain-btn-group",class:t.cssClass},e._l(t.computedQuestions,(function(t,i){return n("div",{key:i,staticClass:"sain-btn",class:t.cssClass,on:{click:function(t){return e.$emit("click",{itemIndex:s,questionIndex:i})}}},[n("span",{staticClass:"sain-number"},[e._v(e._s(t.number))]),e._v(" "),t.icon?n("Icon",{staticClass:"sain-icon",attrs:{icon:t.icon}}):e._e()],1)})),0)})),0)])}),[],!1,null,null,null).exports),k=(n("S9bM"),Object(d.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sway-run-message"},[e.$scopedSlots.heading?n("h1",{staticClass:"srm-heading"},[e._t("heading")],2):e._e(),e._v(" "),e.$scopedSlots.subheading||e.$scopedSlots.default||e.$scopedSlots.action?n("div",{staticClass:"srm-body"},[e.$scopedSlots.subheading?n("h2",{staticClass:"srm-subheading"},[e._t("subheading")],2):e._e(),e._v(" "),n("div",{staticClass:"srm-content"},[e._t("default")],2),e._v(" "),e.$scopedSlots.action?n("div",{staticClass:"srm-actions"},[n("button",{staticClass:"srm-action",on:{click:function(t){return e.$emit("action")}}},[e._t("action")],2)]):e._e()]):e._e()])}),[],!1,null,null,null).exports),C=n("/Yj0"),x=n("5/Cn"),j=n("hSdx"),O=n("1OyB"),S=n("vuIU"),E=function(){function e(t){Object(O.a)(this,e),this.a=4058668781,this.b=t,this.c=t,this.d=t;for(var n=0;n<20;n++)this.next()}return Object(S.a)(e,[{key:"next",value:function(){var e=this.a-(this.b<<27|this.b>>5)>>>0;return this.a=(this.b^(this.c<<17|this.c>>15))>>>0,this.b=this.c+this.d>>>0,this.c=this.d+e>>>0,this.d=e+this.a>>>0,this.d/4294967295}}]),e}(),T=n("clw3");function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P,A,N,R,M={name:"SwayRun",components:{PortalTarget:u.PortalTarget,Cube:h,HeaderContainer:p.a,Navbar:f.a,NavbarButton:m.a,Icon:v.a,EdButton:b.a,Item:g.a,Question:y.a,ItemsNav:_,RunMessage:k},inject:["swayApi","eventBus"],props:{quizId:{type:Number,required:!0}},data:function(){return{attempt:null,computedItems:null,sequentialItemIndex:0,pacedWaitingForNextItem:!1,fontSizes:[15,16,17,18,19,20],fontSizeIndex:0}},computed:D({},Object(l.e)(["course"]),{},Object(l.e)("sway",["loadingActivities","activities"]),{cssClass:function(){return this.activity?"sar-mode-".concat(this.activity.mode):""},style:function(){return{fontSize:this.fontSizes[this.fontSizeIndex]+"px"}},title:function(){return this.activity?this.activity.quiz.name:"Sway Activity"},exitRoute:function(){return this.$lastRoute&&this.$lastRoute.matched.some((function(e){return"sway"===e.name}))?this.$lastRoute:{name:"sway-lobby"}},activity:function(){var e=this;return this.activities.find((function(t){return t.active&&t.quizId===+e.quizId}))},state:function(){return this.activity?this.attempt?this.activeComputedItem?"paced"!==this.activity.mode||this.activeComputedItem.item.active&&!this.pacedWaitingForNextItem?"active":"waiting":"completed":"begin":this.loadingActivities?"loading":"no-activity"},visibleComputedItems:function(){var e=this;if(!this.computedItems||!this.activity)return[];switch(this.activity.mode){case"fullpage":return this.computedItems;case"paced":return[this.computedItems.find((function(t){return t.item.id===e.activity.currentItemId}))].filter(Boolean);default:return[this.computedItems[this.sequentialItemIndex]].filter(Boolean)}},activeComputedItem:function(){return this.visibleComputedItems[0]},attemptedUnsubmittedComputedQuestions:function(){return this.computedQuestions.filter((function(e){return!e.submitted&&null!=e.response}))},canSubmitAll:function(){return this.attemptedUnsubmittedComputedQuestions.length>0},hasCompletedQuiz:function(){return this.computedQuestions.every((function(e){return e.submitted}))},navItems:function(){var e=this;return this.computedItems.map((function(t){return{questions:t.computedQuestions.map((function(t){return{correct:t.correct,attemptStatus:t.submitted?"submitted":null!=t.response?"attempted":t.seen&&"fullpage"!==e.activity.mode?"seen":"unattempted"}}))}}))},computedQuestions:function(){return this.computedItems.reduce((function(e,t){return e.push.apply(e,Object(a.a)(t.computedQuestions)),e}),[])},canIncreaseFont:function(){return this.fontSizeIndex<this.fontSizes.length-1},canDecreaseFont:function(){return this.fontSizeIndex>0}}),watch:{activity:function(e,t){t&&!e?(C.b({type:"success",title:"Activity has ended",text:"Your instructor has ended the activity."}),this.$router.push({name:"sway-lobby"})):t&&e&&e.quiz.id===t.quiz.id?e.currentItemId!==t.currentItemId&&(this.pacedWaitingForNextItem=!1):(this.attempt=null,this.eventBus.emit("sway:attempt-end"))},visibleComputedItems:function(e){var t=!0,n=!1,s=void 0;try{for(var i,r=e[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value,o=!0,l=!1,c=void 0;try{for(var u,d=a.computedQuestions[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){u.value.seen=!0}}catch(h){l=!0,c=h}finally{try{o||null==d.return||d.return()}finally{if(l)throw c}}}}catch(h){n=!0,s=h}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}}},created:function(){this.disposable=new T.a(this.eventBus.on("sway:activity-item",this.onSwayActivityItem),this.eventBus.on("sway:responses-deleted",this.onSwayResponsesDeleted))},mounted:function(){this.setNavbarVisible(!0)},destroyed:function(){this.disposable.dispose(),this.eventBus.emit("sway:attempt-end"),this.setNavbarVisible(!1)},routeUpdateMessage:function(){if("active"===this.state&&this.attemptedUnsubmittedComputedQuestions.length)return{message:"open"===this.activity.mode||"fullpage"===this.activity.mode?"You have attempted one or more questions without submitting them. You will lose all progress on unsubmitted questions if you exit the activity.":"You have not submitted this question. You will lose your progress on this question if you exit the activity.",action:"Exit Activity"}},methods:D({},Object(l.d)({setNavbarVisible:c.c.SET_NAVBAR_VISIBLE}),{beginActivity:(R=Object(r.a)(i.a.mark((function e(){var t,n,s,r,a,o,l,c,u=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.swayApi.attemptActivity(this.activity.quizId);case 3:s=e.sent,t=s.attempt,n=s.items,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),C.b({type:"error",text:"Unable to begin quiz."}),e.abrupt("return");case 12:this.attempt=t,this.sequentialItemIndex=0,this.activity.attemptId=t.id,this.activity.responseCount=t.responses.length,this.activity.questionCount=n.reduce((function(e,t){return e+t.questions.length}),0),this.activity.shuffleItems&&(r=new E(this.attempt.id),a=new Map(n.map((function(e){return[e,r.next()]}))),n.sort((function(e,t){return a.get(e)-a.get(t)}))),o=new Map(t.responses.map((function(e){return[e.questionId,e]}))),l=0,c=0,this.computedItems=n.map((function(e){return{item:e,index:l++,spans:[],computedQuestions:e.questions.map((function(e){var t=o.get(e.id);return{question:e,index:c++,response:t?t.data:null,correct:t&&u.activity.immediateFeedback?t.correct:null,solution:null,submitting:!1,submitted:!!t,seen:!1,valid:!1}}))}})),this.advanceToNextUnsubmittedItem(),this.hasCompletedQuiz&&(C.b({type:"info",text:"You have already completed this quiz."}),this.endActivity()),this.eventBus.emit("sway:attempt-begin",this.attempt.id);case 25:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return R.apply(this,arguments)}),submitQuestions:(N=Object(r.a)(i.a.mark((function e(t){var n,s,a,o,l,c,u,d,h,p=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=!0,s=!1,a=void 0,e.prev=3,o=t[Symbol.iterator]();!(n=(l=o.next()).done);n=!0)l.value.submitting=!0;e.next=11;break;case 7:e.prev=7,e.t0=e.catch(3),s=!0,a=e.t0;case 11:e.prev=11,e.prev=12,n||null==o.return||o.return();case 14:if(e.prev=14,!s){e.next=17;break}throw a;case 17:return e.finish(14);case 18:return e.finish(11);case 19:return e.next=21,j.promiseMap(t,function(){var e=Object(r.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.swayApi.submitAnswer(p.attempt.id,t.question.id,t.response);case 3:return n=e.sent,t.submitted=!0,p.activity.responseCount++,e.abrupt("return",n);case 7:return e.prev=7,t.submitting=!1,e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[0,,7,10]])})));return function(t){return e.apply(this,arguments)}}(),{concurrency:5});case 21:for(c=e.sent,u=0;u<c.length;u++)c[u].success&&(d=c[u].value,h=t[u],d&&this.activity.immediateFeedback&&(h.correct=d.correct,h.solution=d.solution));return e.abrupt("return",c);case 24:case"end":return e.stop()}}),e,this,[[3,7,11,19],[12,,14,18]])}))),function(e){return N.apply(this,arguments)}),handleSubmitQuestion:(A=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.submitQuestions([t]);case 2:e.sent[0].success||C.b({type:"error",text:"Unable to submit answer."});case 4:case"end":return e.stop()}}),e,this)}))),function(e){return A.apply(this,arguments)}),handleSubmitAll:(P=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.b({icon:"warning",title:"There are unsubmitted questions that you have attempted. Submit them?",text:"Only questions with a blue dot will be submitted.",primaryAction:"Submit"});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.submitQuestions(this.attemptedUnsubmittedComputedQuestions);case 6:e.sent.some((function(e){return!e.success}))?C.b({type:"error",title:"Failed to submit some questions",text:"Try resubmitting again."}):C.b({type:"success",text:"You have submitted all of the questions you have attempted so far."});case 8:case"end":return e.stop()}}),e,this)}))),function(){return P.apply(this,arguments)}),findNextItemIndex:function(e,t){for(var n=this.computedItems,s=e;;){if(t(n[s]))return s;if((s=(s+1)%n.length)===e)return s}},advanceToNextUnsubmittedItem:function(){var e=this.sequentialItemIndex,t=this.findNextItemIndex(e,(function(e){return!e.computedQuestions.every((function(e){return null!=e.response}))}));t===e&&(t=this.findNextItemIndex(e,(function(e){return!e.computedQuestions.every((function(e){return e.submitted}))}))),this.sequentialItemIndex=t},nextItem:function(){"paced"===this.activity.mode?this.pacedWaitingForNextItem=!0:(this.advanceToNextUnsubmittedItem(),this.hasCompletedQuiz&&this.finish())},finish:function(){C.b({type:"success",text:"Quiz completed."}),this.endActivity()},endActivity:function(){this.computedItems=null,this.sequentialItemIndex=0},onSwayActivityItem:function(e){if(this.computedItems){var t=this.computedItems.find((function(t){return t.item.id===e.item.id}));t&&(t.item.active=e.item.active)}},onSwayResponsesDeleted:function(e){if(this.computedQuestions){var t=!0,n=!1,s=void 0;try{for(var i,r=this.computedQuestions[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;a.question.itemId===e.itemId&&(a.response=null,a.submitted=!1,a.correct=null,a.solution=null)}}catch(o){n=!0,s=o}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}}"paced"===this.activity.mode&&this.activeComputedItem&&this.activeComputedItem.item.id===e.itemId&&(this.pacedWaitingForNextItem=!1)},navItemClick:function(e){var t=e.itemIndex,n=e.questionIndex;if("fullpage"===this.activity.mode){var s=this.computedItems[t].computedQuestions[n].index;this.$refs.computedQuestions[s].scrollIntoView()}else this.sequentialItemIndex=t},onItemEvent:function(e,t){switch(t.type){case"spans":this.$set(e,"spans",t.event)}}})},L=(n("TWCV"),Object(d.a)(M,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("HeaderContainer",{staticClass:"sway-activities-run",class:e.cssClass,scopedSlots:e._u([{key:"header",fn:function(){return[n("Navbar",{attrs:{title:e.title,secondary:""},scopedSlots:e._u([{key:"left",fn:function(){return[n("NavbarButton",{attrs:{icon:"chevron-left",text:"Exit",to:e.exitRoute}})]},proxy:!0},{key:"right",fn:function(){return["active"===e.state?n("NavbarButton",{attrs:{text:"Font Size",icon:"plus",disabled:!e.canIncreaseFont},on:{action:function(t){e.fontSizeIndex++}}}):e._e(),e._v(" "),"active"===e.state?n("NavbarButton",{attrs:{text:"Font Size",icon:"minus",disabled:!e.canDecreaseFont},on:{action:function(t){e.fontSizeIndex--}}}):e._e(),e._v(" "),"active"!==e.state||!e.activity||"open"!==e.activity.mode&&"fullpage"!==e.activity.mode?e._e():n("NavbarButton",{attrs:{text:"Submit All",disabled:!e.canSubmitAll},on:{action:e.handleSubmitAll}}),e._v(" "),"active"===e.state&&e.hasCompletedQuiz?n("NavbarButton",{attrs:{text:"Finish"},on:{action:e.finish}}):e._e()]},proxy:!0}])}),e._v(" "),"active"===e.state&&["open","fullpage"].includes(e.activity.mode)?n("div",{staticClass:"sar-nav-scroll"},[n("ItemsNav",{attrs:{items:e.navItems,"selected-index":"fullpage"===e.activity.mode?null:e.activeComputedItem.index},on:{click:e.navItemClick}})],1):e._e()]},proxy:!0}])},[e._v(" "),"begin"===e.state?n("RunMessage",{on:{action:e.beginActivity},scopedSlots:e._u([{key:"heading",fn:function(){return[e._v("Activity")]},proxy:!0},{key:"subheading",fn:function(){return[e._v(e._s(e.activity.quiz.name))]},proxy:!0},{key:"action",fn:function(){return[e._v("Start")]},proxy:!0}],null,!1,475546266)},[e._v(" "),e._v(" "),e._v(" "),n("ul",{staticClass:"sar-quizinfo"},["sequential"===e.activity.mode?n("li",[e._v("\n\t\t\t\tThis is a "),n("strong",[e._v("sequential")]),e._v(" activity. Questions are shown one at a time in order.\n\t\t\t")]):"open"===e.activity.mode?n("li",[e._v("\n\t\t\t\tThis is an "),n("strong",[e._v("open")]),e._v(" activity. You can attempt each question in any order.\n\t\t\t")]):"fullpage"===e.activity.mode?n("li",[e._v("\n\t\t\t\tThis is a "),n("strong",[e._v("full page")]),e._v(" activity. All questions will be shown at once.\n\t\t\t")]):"paced"===e.activity.mode?n("li",[e._v("\n\t\t\t\tThis is a "),n("strong",[e._v("teacher paced")]),e._v(" activity. Each question will be shown one\n\t\t\t\tat a time and is controlled by a teacher.\n\t\t\t")]):e._e(),e._v(" "),n("li",[e._v("You may attempt each question only once.")]),e._v(" "),e.activity.immediateFeedback?n("li",[e._v("\n\t\t\t\tThe correct answer will be shown after submitting each question.\n\t\t\t")]):e._e()])]):e._e(),e._v(" "),"no-activity"===e.state?n("div",{staticClass:"sar-widget"},[n("div",{staticClass:"sar-idle-text"},[e._v("There is no activity here")]),e._v(" "),n("div",{staticClass:"sar-actions"},[n("EdButton",{staticClass:"sar-action",attrs:{to:e.exitRoute}},[e._v("Exit")])],1)]):e._e(),e._v(" "),"loading"===e.state?n("div",{staticClass:"sar-widget"},[n("Cube",{staticClass:"sar-idle-cube"}),e._v(" "),n("div",{staticClass:"sar-idle-text"},[e._v("Loading activity...")]),e._v(" "),n("div",{staticClass:"sar-actions"},[n("EdButton",{staticClass:"sar-action",attrs:{to:e.exitRoute}},[e._v("Exit")])],1)],1):e._e(),e._v(" "),"waiting"===e.state?n("div",{staticClass:"sar-widget"},[n("Cube",{staticClass:"sar-idle-cube"}),e._v(" "),n("div",{staticClass:"sar-idle-text"},[e._v("Waiting for the next question...")]),e._v(" "),n("div",{staticClass:"sar-actions"},[n("EdButton",{staticClass:"sar-action",attrs:{to:e.exitRoute}},[e._v("Exit")])],1)],1):e._e(),e._v(" "),"completed"===e.state?n("div",{staticClass:"sar-widget"},[n("h1",{staticClass:"sar-heading sar-heading-completed"},[n("Icon",{staticClass:"sar-heading-icon",attrs:{icon:"tick"}}),e._v("\n\t\t\t"+e._s(e.activity.quiz.name)+" Completed\n\t\t")],1),e._v(" "),n("div",{staticClass:"sar-actions"},[n("EdButton",{staticClass:"sar-action",attrs:{to:e.exitRoute}},[e._v("Exit")])],1)]):e._e(),e._v(" "),"active"===e.state?n("div",{staticClass:"sar-state-active",style:e.style},e._l(e.visibleComputedItems,(function(t){return n("div",{key:t.item.id,staticClass:"sar-computeditem"},[n("div",{staticClass:"sar-computeditem-layout",class:"sar-computeditem-layout-"+t.item.quizItem.type},[n("Item",{attrs:{item:t.item.quizItem},on:{event:function(n){return e.onItemEvent(t,n)}}},e._l(t.computedQuestions,(function(s,i){return n("div",{key:s.question.id,staticClass:"sar-computedquestion"},[n("div",{ref:"computedQuestions",refInFor:!0,staticClass:"sar-question-heading"},[e._v("\n\t\t\t\t\t\t\tQuestion "),n("strong",[e._v(e._s(s.index+1))]),e._v("\n\t\t\t\t\t\t\tof "),n("strong",[e._v(e._s(e.computedQuestions.length))]),e._v(" "),s.submitted?n("span",{staticClass:"sar-submitted-badge"},[n("Icon",{attrs:{icon:"tick"}}),e._v("\n\t\t\t\t\t\t\t\tSubmitted\n\t\t\t\t\t\t\t")],1):e._e()]),e._v(" "),n("Question",{staticClass:"sar-question",attrs:{question:s.question.quizQuestion,correct:s.correct,solution:s.solution,editable:!s.submitted&&!s.submitting,"explanation-visible":s.submitted&&e.activity.immediateFeedback,spans:t.spans},on:{valid:function(e){s.valid=e}},model:{value:s.response,callback:function(t){e.$set(s,"response",t)},expression:"computedQuestion.response"}}),e._v(" "),n("div",{staticClass:"sar-question-actions"},[n("PortalTarget",{staticClass:"sar-question-actions-extra",attrs:{name:"sar-question-actions"}}),e._v(" "),n("div",{staticClass:"sar-question-actions-main"},["fullpage"===e.activity.mode||!s.submitted||i<t.computedQuestions.length-1?n("EdButton",{staticClass:"sar-question-action primary",attrs:{disabled:s.submitting||s.submitted||!s.valid,loading:""},on:{click:function(t){return e.handleSubmitQuestion(s)}}},[e._v("\n\t\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t\t")]):i===t.computedQuestions.length-1?n("EdButton",{staticClass:"sar-question-action primary",on:{click:e.nextItem}},[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(e.hasCompletedQuiz?"Finish":"Next")+"\n\t\t\t\t\t\t\t\t")]):e._e()],1)],1)],1)})),0)],1)])})),0):e._e()],1)}),[],!1,null,null,null));t.default=L.exports},"8xJi":function(e,t,n){"use strict";var s=n("q/nw");n.n(s).a},"8zLD":function(e,t,n){"use strict";var s=n("jPwb");n.n(s).a},"9AGB":function(e,t,n){"use strict";var s=n("PldW");n.n(s).a},"9F5z":function(e,t,n){},"9GMr":function(e,t,n){"use strict";var s=n("h0d2");n.n(s).a},"9KaT":function(e,t,n){"use strict";var s=n("iPqt");n.n(s).a},"9RPp":function(e,t,n){"use strict";var s=n("voyk");n.n(s).a},"9aVD":function(e,t,n){},"9asc":function(e,t,n){"use strict";n("8cyN");var s=n("KHd+"),i=Object(s.a)({},(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"action-sheet-group"},[this._t("default")],2)}),[],!1,null,null,null);t.a=i.exports},"9ero":function(e,t,n){"use strict";var s=n("I999");n.n(s).a},"9ipI":function(e,t,n){"use strict";var s=n("/pkC");n.n(s).a},"9jDF":function(e,t,n){"use strict";var s=n("VqqI");n.n(s).a},"9oRF":function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("0oug"),n("ma9I"),n("yXV3"),n("4mDm"),n("2B1R"),n("+2oP"),n("pDQq"),n("qePV"),n("3KgV"),n("07d7"),n("5s+n"),n("PKPk"),n("UxlC"),n("3bBZ");var s=n("kvrn"),i=n.n(s),r=n("o0o1"),a=n.n(r),o=n("ODXe"),l=(n("ls82"),n("HaE+")),c=n("KQm4"),u=n("1OyB"),d=n("vuIU"),h=(n("sR2V"),n("Pa8A")),p=n("WmPt"),f=n("T5An"),m=n("G7T9"),v=function(){function e(t){Object(u.a)(this,e),this.highlights=t,this.index=0,this.offset=0}return Object(d.a)(e,[{key:"next",value:function(e){for(var t=[];e&&this.index<this.highlights.length;){var n=this.highlights[this.index],s=Math.min(e,n.text.length-this.offset);t.push({type:n.type,text:n.text.substr(this.offset,s)}),s===n.text.length-this.offset?(this.offset=0,this.index++):this.offset+=s,e-=s}return t}},{key:"nextLine",value:function(){for(var e=[];this.index<this.highlights.length;){var t=this.highlights[this.index],n=t.text.substr(this.offset).indexOf("\n");if(-1!==n){e.push({type:t.type,text:t.text.substr(this.offset,n+1)}),this.offset+=n+1,this.offset===t.text.length&&(this.offset=0,this.index++);break}e.push({type:t.type,text:t.text.substr(this.offset)}),this.offset=0,this.index++}return e}},{key:"nextLines",value:function(e){for(var t=[];e--;)t.push.apply(t,Object(c.a)(this.nextLine()));return t}}]),e}();function b(e){return[{type:[],text:e}]}var g,y={directives:{Tooltip:h.a},props:{diff:{type:Array,required:!0},lineNumbers:{type:Boolean,default:!1},thunked:{type:Boolean,default:!1},language:{type:String,default:"txt"},lineButtons:{type:Boolean,default:!1},show:{type:String,default:"both"},expansionLines:{type:Number,default:20},contextLines:{type:Number,default:3}},data:function(){return{thunks:[],highlightsA:null,highlightsB:null}},computed:{sourceMap:function(){return function(e){for(var t=[],n="",s="",i=0;i<e.length;i++){var r=e[i],a=[],o=!0,l=!1,c=void 0;try{for(var u,d=r.words[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var h=u.value;switch(h.type){case"-":n+=h.text;break;case"+":s+=h.text;break;default:switch(r.type){case"-":n+=h.text;break;case"+":s+=h.text;break;default:n+=h.text,s+=h.text}}a.push({type:h.type,length:h.text.length})}}catch(p){l=!0,c=p}finally{try{o||null==d.return||d.return()}finally{if(l)throw c}}if(i<e.length-1)switch(r.type){case"-":n+="\n";break;case"+":s+="\n";break;case"=":n+="\n",s+="\n"}t.push({type:r.type,words:a})}return{map:t,textA:n,textB:s}}(this.diff)},highlightsPlaintextA:function(){return b(this.sourceMap.textA)},highlightsPlaintextB:function(){return b(this.sourceMap.textB)},computedHighlightsA:function(){return this.highlightsA||this.highlightsPlaintextA},computedHighlightsB:function(){return this.highlightsB||this.highlightsPlaintextB}},watch:{diff:{immediate:!0,handler:"thunkify"},thunked:{immediate:!0,handler:"thunkify"},sourceMap:{immediate:!0,handler:"updateHighlights"}},methods:{thunkify:function(){this.thunks=this.diff?function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=[],s=null,i=1,r=1,a=0,o=e[0],l=function(){o=e[++a]},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;s={expanded:!1,offset:a-e,length:e,lineNumberA:i-e,lineLengthA:e,lineNumberB:r-e,lineLengthB:e},n.push(s)};o&&"="===o.type;)i++,r++,l();for(c(Math.min(a,t));o;){if("="===o.type){for(var u=0;o&&"="===o.type;)u++,i++,r++,l();if(!o||u>2*t){var d=Math.min(u,t);if(s.length+=d,s.lineLengthA+=d,s.lineLengthB+=d,s=null,!o)break;c(t)}else s.length+=u,s.lineLengthA+=u,s.lineLengthB+=u}s.length++,"+"!==o.type&&(i++,s.lineLengthA++),"-"!==o.type&&(r++,s.lineLengthB++),l()}return n}(this.diff,this.thunked?this.contextLines:1/0):[]},expandThunk:function(e,t){var n=this.thunks[e],s=t>=0?1:-1;if(t=Math.abs(t),s<0){var i=this.thunks[e-1];t=Math.min(t,n.offset-(i?i.offset+i.length:0));var r={expanded:!0,offset:n.offset-t,length:t,lineNumberA:n.lineNumberA-t,lineLengthA:t,lineNumberB:n.lineNumberB-t,lineLengthB:t};this.thunks.splice(e,0,r)}else{var a=this.thunks[e+1];t=Math.min(t,(a?a.offset:this.diff.length)-n.offset-n.length);var o={expanded:!0,offset:n.offset+n.length,length:t,lineNumberA:n.lineNumberA+n.lineLengthA,lineLengthA:t,lineNumberB:n.lineNumberB+n.lineLengthB,lineLengthB:t};this.thunks.splice(e+1,0,o)}},renderHighlights:function(e){var t=this.$createElement;return function e(n,s){for(var i=[],r=0;r<n.length;){for(var a=r+1;a<n.length&&n[a].type[s]===n[r].type[s];)a++;var o=n.slice(r,a);s>=o[0].type.length?i.push([o.reduce((function(e,t){return e+t.text.replace(/\t/g,"    ")}),"")]):i.push(t("span",{staticClass:"hljs-".concat(o[0].type[s])},[e(o,s+1)])),r=a}return i}(e,0)},renderLineButton:function(e,t){var n=this;return(0,this.$createElement)("button",{staticClass:"diff-text-line-btn",on:{click:function(s){return n.$emit("line-button-click",{event:s,isFrom:e,lineNumber:t})}}},["+"])},updateHighlights:(g=Object(l.a)(a.a.mark((function e(){var t,n,s,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.highlightsA=null,this.highlightsB=null,!this.language){e.next=11;break}return e.next=5,Promise.all([Object(f.a)(this.language,this.sourceMap.textA),Object(f.a)(this.language,this.sourceMap.textB)]);case 5:t=e.sent,n=Object(o.a)(t,2),s=n[0],i=n[1],this.highlightsA=Object.freeze(s.highlights),this.highlightsB=Object.freeze(i.highlights);case 11:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},render:function(){var e,t,n=this,s=arguments[0],r=this.thunks,a=this.thunked,o=this.lineNumbers,l=this.lineButtons,c=this.show,u=this.expansionLines,d=this.computedHighlightsA,h=this.computedHighlightsB,f=this.renderHighlights,b=this.renderLineButton,g=this.expandThunk,y=[],w=function(e,t,n){var r,a;switch(t){case"up":r="expand-up",a="Expand Up",n=-n;break;case"down":r="expand-down",a="Expand Down";break;default:r="expand-both",a="Expand",n=-n}var o={directives:[{name:"tooltip",value:a}]};return s("button",i()([{staticClass:"diff-text-expand",on:{click:function(){return g(e,n)}}},o]),[s(p.a,{attrs:{icon:r}})])},_=function(n,i){return s("tr",{staticClass:"diff-text-line diff-text-thunk-header"},[s("td",{staticClass:"diff-text-line-gutter",attrs:{colspan:e}},[n()]),s("td",{staticClass:"diff-text-line-code",attrs:{colspan:t-e}},[i()])])},k=this.sourceMap.map,C=new v(d),x=new v(h);t="split"===c?2*((e=o?1:0)+1):(e=o?"both"===c?2:1:0)+1;for(var j=1,O=1,S=function(e){var i=r[e],d=[];C.nextLines(i.lineNumberA-j),x.nextLines(i.lineNumberB-O),j=i.lineNumberA,O=i.lineNumberB;for(var h=function(e){var r=k[i.offset+e],u=[],h=!0,p=!1,v=void 0;try{for(var g,y=r.words[Symbol.iterator]();!(h=(g=y.next()).done);h=!0){var w=g.value,_=void 0;switch(w.type){case"-":_=C.next(w.length);break;case"+":_=x.next(w.length);break;default:switch(r.type){case"-":_=C.next(w.length);break;case"+":_=x.next(w.length);break;default:C.next(w.length),_=x.next(w.length)}}var S=f(_);switch(w.type){case"=":u.push(S);break;case"+":u.push(s("span",{staticClass:"diff-text-plus"},[S]));break;case"-":u.push(s("span",{staticClass:"diff-text-minus"},[S]));break;case"mn":u.push(s("span",{staticClass:"diff-text-missing-newline",attrs:{title:"Missing Newline"}},["↵"]));break;case"nc":u.push(s("span",{staticClass:"diff-text-null-character",attrs:{title:"Null Character"}},["␀"]))}}}catch(L){p=!0,v=L}finally{try{h||null==y.return||y.return()}finally{if(p)throw v}}var E=[],T=void 0,I=null,D=null;switch(i.expanded&&E.push("diff-thunk-expanded"),r.type){case"-":E.push("diff-text-minus"),T="-",I=j++,C.next(1);break;case"+":E.push("diff-text-plus"),T="+",D=O++,x.next(1);break;default:T=" ",I=j++,D=O++,C.next(1),x.next(1)}if("from"===c&&"+"===r.type||"to"===c&&"-"===r.type)return"continue";a||(T+=" ");var P=function(e){return s("td",{key:e,staticClass:"diff-text-line-empty",attrs:{colspan:t/2}})},A=function(e,t){return s("td",{key:e,staticClass:"diff-text-line-gutter diff-text-line-num"},[t])},N=function(e,t,n){return s("td",{key:e,staticClass:"diff-text-line-code"},[l&&b(t,n),T,u])},R=[];if("split"===c?(null==I?R.push(P("lineNumberEmptyA")):R.push(o&&A("lineNumberA",I),N("codeA",!0,I)),null==D?R.push(P("lineNumberEmptyB")):R.push(o&&A("lineNumberB",D),N("codeB",!1,D))):R.push(o&&"to"!==c&&A("lineNumberA",I),o&&"from"!==c&&A("lineNumberB",D),N("codeA",!1,D)),d.push(s("tr",{staticClass:"diff-text-line",class:E},[R])),"split"!==c&&n.$scopedSlots.lineContent){var M=n.$scopedSlots.lineContent({lineNumberA:I,lineNumberB:D});Object(m.g)(M)||d.push(s("tr",{staticClass:"diff-text-line-content"},[s("td",{attrs:{colspan:t}},[M])]))}},p=0;p<i.length;p++)h(p);var v=r[e-1],g=i.offset-(v?v.offset+v.length:0);if(g&&o){y.push(_((function(){return[g>u&&v&&w(e-1,"down",u),(g>u||g>0&&!v)&&w(e,"up",u),g<=u&&g>0&&v&&w(e,"both",u)]}),(function(){return"@@ -".concat(i.lineNumberA,",").concat(i.lineLengthA," +").concat(i.lineNumberB,",").concat(i.lineLengthB," @@")})))}y.push.apply(y,d)},E=0;E<r.length;E++)S(E);var T=r[r.length-1];return T.offset+T.length<k.length&&y.push(_((function(){return w(r.length-1,"down",u)}),(function(){}))),s("div",{staticClass:"diff-text"},[s("div",{staticClass:"diff-text-container"},[s("table",{staticClass:"diff-text-table",attrs:{role:"presentation"}},[y])])])}},w=(n("lE2J"),n("KHd+")),_=Object(w.a)(y,void 0,void 0,!1,null,null,null);t.a=_.exports},"9rzZ":function(e,t,n){"use strict";var s=n("R0ua");n.n(s).a},"9tb/":function(e,t,n){var s=n("I+eb"),i=n("I8vh"),r=String.fromCharCode,a=String.fromCodePoint;s({target:"String",stat:!0,forced:!!a&&1!=a.length},{fromCodePoint:function(e){for(var t,n=[],s=arguments.length,a=0;s>a;){if(t=+arguments[a++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?r(t):r(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},"9w/H":function(e,t,n){},"9wdi":function(e,t,n){"use strict";n("qq4C");var s=n("KHd+"),i=Object(s.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"actionbar"},[t("div",{staticClass:"actionbar-group"},[this._t("secondary")],2),this._v(" "),t("div",{staticClass:"actionbar-group"},[this._t("primary")],2)])}),[],!1,null,null,null);t.a=i.exports},"9x2+":function(e,t,n){},"9xwX":function(e,t,n){"use strict";var s=n("pkDc");n.n(s).a},"9yiC":function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("2B1R"),n("ToJy"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("KQm4"),i=n("o0o1"),r=n.n(i),a=(n("ls82"),n("HaE+")),o=n("rePB"),l=n("L2JU"),c=n("vlv3"),u=n("hSdx"),d=n("/Yj0"),h=n("5/Cn"),p=n("oRKG"),f=n("6XG0"),m=n("WmPt"),v=n("0XH5"),b=n("JBdv"),g=n("NC1X");function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _,k,C,x,j={components:{EdCheck:f.a,Icon:m.a,SearchInput:v.a,DateDisplay:b.a,Spinner:g.a},mixins:[p.a],inject:["swayApi","eventBus"],data:function(){return{creatingQuiz:!1}},computed:w({},Object(l.e)(["course"]),{},Object(l.e)("sway",{items:"quizItems",loadingQuizzes:"loadingQuizzes"}),{filteredItems:function(){var e=this;return this.items.filter((function(t){return u.validateSubstrDeep(t.quiz,e.searchQuery,"name")})).sort((function(e,t){return u.naturalComparator(e.quiz.name,t.quiz.name)}))}}),created:function(){this.update()},destroyed:function(){this.clearQuizzes(),this.launchMenu&&this.launchMenu.$destroy()},methods:w({},Object(l.d)("sway",[c.c.ADD_QUIZZES,c.c.REMOVE_QUIZZES,c.c.CLEAR_QUIZZES]),{},Object(l.b)("sway",[c.a.LOAD_QUIZZES]),{update:(x=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.loadQuizzes()}catch(t){d.b({type:"error",text:"Could not load quizzes."})}case 1:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)}),newQuiz:(C=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.creatingQuiz=!1,e.prev=1,e.next=4,this.swayApi.createQuiz(this.course.id,t);case 4:n=e.sent,this.$router.push({name:"sway-quizzes-edit",params:{quizId:n.id}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),d.b({type:"error",text:"Could not create activity."});case 11:return e.prev=11,this.creatingQuiz=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[1,8,11,14]])}))),function(e){return C.apply(this,arguments)}),deleteSelected:(k=Object(a.a)(r.a.mark((function e(){var t,n,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.selectedItems,e.next=3,h.d({icon:"warning",title:"Delete selected?",text:1===t.length?'Are you sure you want to delete the activity "'.concat(t[0].quiz.name,'"? This cannot be undone.'):"Are you sure you want to delete these ".concat(t.length," activities? This cannot be undone."),primaryAction:"Delete",secondaryAction:"Cancel"});case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,i=t.map((function(e){return e.quiz.id})),e.next=9,(n=this.swayApi).destroyQuizzes.apply(n,Object(s.a)(i));case 9:this.removeQuizzes(i),d.b({type:"success",text:"Selected quizzes deleted."}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),d.b({type:"error",text:"Unable to delete the selected quizzes."});case 16:case"end":return e.stop()}}),e,this,[[5,13]])}))),function(){return k.apply(this,arguments)}),launchQuiz:function(e){this.eventBus.emit("sway:launch",{quiz:e})},importQuiz:function(){this.eventBus.emit("sway:quiz-import")},duplicateQuiz:(_=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.b({icon:"question",title:"Duplicate activity ".concat(t.name,"?"),text:"This will create a new activity with all of the questions from ".concat(t.name,"."),primaryAction:"Duplicate"});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,this.swayApi.cloneQuiz(t.id,this.course.id);case 7:n=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),d.b({type:"error",text:"Unable to duplicate the selected activity."}),e.abrupt("return");case 14:this.addQuizzes([n]),d.b({type:"success",text:"Duplicated activity ".concat(t.name,".")});case 16:case"end":return e.stop()}}),e,this,[[4,10]])}))),function(e){return _.apply(this,arguments)})})},O=(n("qctn"),n("KHd+")),S=Object(O.a)(j,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sway-quizzes"},[n("div",{staticClass:"sway-container"},[n("p",{staticClass:"sway-infobox"},[e._v("\n\t\t\tCreate and manage your activities (quizzes and surveys) here. Launch an activity to make it\n\t\t\tavailable for students to participate in.\n\t\t")]),e._v(" "),n("SearchInput",{staticClass:"sqzi-search",attrs:{placeholder:"Search activities"},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),e._v(" "),n("div",{staticClass:"sway-actions"},[n("div",{staticClass:"sway-actions-group"},[n("button",{staticClass:"sway-action",on:{click:function(t){return e.newQuiz("quiz")}}},[n("Icon",{staticClass:"sway-action-icon",attrs:{icon:"plus"}}),e._v(" "),n("span",{staticClass:"sway-action-text"},[e._v("New Quiz")])],1),e._v(" "),n("button",{staticClass:"sway-action",on:{click:function(t){return e.newQuiz("survey")}}},[n("Icon",{staticClass:"sway-action-icon",attrs:{icon:"plus"}}),e._v(" "),n("span",{staticClass:"sway-action-text"},[e._v("New Survey")])],1),e._v(" "),n("button",{staticClass:"sway-action",on:{click:e.importQuiz}},[n("Icon",{staticClass:"sway-action-icon",attrs:{icon:"import"}}),e._v(" "),n("span",{staticClass:"sway-action-text"},[e._v("Import")])],1),e._v(" "),n("button",{staticClass:"sway-action",attrs:{disabled:!e.selectedItems.length},on:{click:e.deleteSelected}},[n("Icon",{staticClass:"sway-action-icon",attrs:{icon:"delete"}}),e._v(" "),n("span",{staticClass:"sway-action-text"},[e._v("Delete")])],1)])]),e._v(" "),n("table",{staticClass:"sway-table"},[n("thead",[n("tr",[n("th",{staticClass:"sqzi-col-check"},[n("EdCheck",{attrs:{value:e.allSelected,disabled:!e.filteredItems.length},on:{input:function(t){return e.selectAll(t)}}})],1),e._v(" "),n("th",{staticClass:"sqzi-col-name"},[e._v("Name")]),e._v(" "),n("th",{staticClass:"sqzi-col-kind"},[e._v("Kind")]),e._v(" "),n("th",{staticClass:"sqzi-col-creator"},[e._v("Creator")]),e._v(" "),n("th",{staticClass:"sqzi-col-date"},[e._v("Date")]),e._v(" "),n("th",{staticClass:"sqzi-col-action"},[e._v("Duplicate")]),e._v(" "),n("th",{staticClass:"sqzi-col-action"},[e._v("Launch")])])]),e._v(" "),n("tbody",e._l(e.filteredItems,(function(t){return n("tr",{key:t.quiz.id},[n("td",{staticClass:"sqzi-col-check"},[n("EdCheck",{model:{value:t.selected,callback:function(n){e.$set(t,"selected",n)},expression:"item.selected"}})],1),e._v(" "),n("td",{staticClass:"sqzi-col-name"},[n("RouterLink",{attrs:{to:{name:"sway-quizzes-edit",params:{quizId:t.quiz.id}}}},[e._v(e._s(t.quiz.name))])],1),e._v(" "),n("td",{staticClass:"sqzi-col-kind"},[e._v(e._s(t.quiz.typeLabel))]),e._v(" "),n("td",{staticClass:"sqzi-col-creator"},[e._v(e._s(t.quiz.userName))]),e._v(" "),n("td",{staticClass:"sqzi-col-date"},[n("DateDisplay",{attrs:{date:t.quiz.updatedAt||t.quiz.createdAt,format:"fromNow"}})],1),e._v(" "),n("td",{staticClass:"sqzi-col-action",on:{click:function(n){return e.duplicateQuiz(t.quiz)}}},[n("Icon",{staticClass:"sway-col-action-icon",attrs:{icon:"copy"}})],1),e._v(" "),n("td",{staticClass:"sqzi-col-action",on:{click:function(n){return e.launchQuiz(t.quiz)}}},[n("Icon",{staticClass:"sway-col-action-icon",attrs:{icon:"sway"}})],1)])})),0)]),e._v(" "),e.loadingQuizzes?n("Spinner",{staticClass:"sway-spinner"}):e._e()],1)])}),[],!1,null,null,null);t.default=S.exports},"9z1j":function(e,t,n){"use strict";var s={props:{tabs:{type:Array,required:!0},value:{type:Object,default:null}},created:function(){void 0===this.value&&this.selectTab(this.tabs[0])},methods:{isTabSelected:function(e){return this.value===e},selectTab:function(e){this.$emit("input",e)}}},i=(n("kBfW"),n("KHd+")),r=Object(i.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tabs-header"},e._l(e.tabs,(function(t,s){return n("div",{key:s,staticClass:"tabs-header-item",class:{selected:e.isTabSelected(t)},on:{click:function(n){return e.selectTab(t)}}},[e._v("\n\t\t"+e._s(t.text)+"\n\t\t"),n("svg",{staticClass:"tabs-header-item-side start",attrs:{viewBox:"0 0 20 36"}},[n("path",{staticClass:"fill",attrs:{d:"M0,36 c10,0,10,-36,20,-36 v36 Z"}}),e._v(" "),n("path",{staticClass:"stroke",attrs:{d:"M0,35.5 c10,0,10,-35,20,-35"}})]),e._v(" "),n("svg",{staticClass:"tabs-header-item-side end",attrs:{viewBox:"0 0 20 36"}},[n("path",{staticClass:"fill",attrs:{d:"M20,36 c-10,0,-10,-36,-20,-36 v36 Z"}}),e._v(" "),n("path",{staticClass:"stroke",attrs:{d:"M20,35.5 c-10,0,-10,-35,-20,-35"}})])])})),0)}),[],!1,null,null,null);t.a=r.exports},A0eD:function(e,t,n){"use strict";var s={props:{active:{type:Boolean,default:!1}}},i=(n("pcie"),n("KHd+")),r=Object(i.a)(s,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"segmented-item",class:{active:e.active},on:{click:function(t){return e.$emit("click",t)}}},[e._t("default")],2)}),[],!1,null,null,null);t.a=r.exports},ABIe:function(e,t,n){"use strict";n("pNMO"),n("ma9I"),n("TeQF"),n("fbCW"),n("qePV"),n("5DmW"),n("27RR"),n("tkto"),n("EnZy"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("1OyB"),o=n("md7G"),l=n("foSv"),c=n("Ji7U"),u=n("rePB"),d=n("KQm4"),h=n("sEfC"),p=n.n(h),f=(n("MDGL"),n("dQhs")),m=n("L2JU"),v=n("Q2AE"),b=n("CisF"),g=n("20nU"),y=n("hSdx"),w=n("/jHr"),_=n("5/Cn"),k=n("JX7q"),C=n("vuIU"),x=function(e){function t(e){var n;return Object(a.a)(this,t),n=Object(o.a)(this,Object(l.a)(t).call(this,e)),f.FocusableModelNode.construct(Object(k.a)(n)),n}return Object(c.a)(t,e),Object(C.a)(t,[{key:"toFormatPlaintext",value:function(){return[this.element.attributes.schema,this.element.attributes.code].filter(Boolean).join("\n\n")}}],[{key:"toDataElements",value:function(e){var t=e[0],n={language:t.getAttribute("language"),runnable:"true"===t.getAttribute("runnable")},s=Object(d.a)(t.childNodes),i=s.find((function(e){return e.nodeType===Node.TEXT_NODE})),r=s.find((function(e){return e.nodeType===Node.ELEMENT_NODE&&"snippet-file"===e.tagName.toLowerCase()&&"code"===e.getAttribute("id")})),a=s.find((function(e){return e.nodeType===Node.ELEMENT_NODE&&"snippet-file"===e.tagName.toLowerCase()&&"schema"===e.getAttribute("id")}));return r||a?(n.code=r?r.textContent:"",n.schema=a?a.textContent:""):(n.code=i?i.textContent:"",n.schema=""),[{type:this.id,attributes:n}]}},{key:"toDomElements",value:function(e,t){var n=e[0].attributes,s=n.language,i=n.runnable,r=n.code,a=n.schema,o=t.createElement("snippet");o.setAttribute("language",s),o.setAttribute("runnable",i);var l=function(e,n){var s=t.createElement("snippet-file");return s.setAttribute("id",e),s.textContent=n,s};return r&&o.appendChild(l("code",r)),a&&o.appendChild(l("schema",a)),[o]}}]),t}(f.LeafModelNode);x.id="snippet",x.matchTagNames=["snippet"],x.handlesOwnChildren=!0,x.ignoreChildren=!0,x.childNodeTypes=[],x.isTranscluded=!0,f.oo.mixin(f.FocusableModelNode)(x),f.modelRegistry.register(x);var j=function(e){function t(e){var n;return Object(a.a)(this,t),n=Object(o.a)(this,Object(l.a)(t).call(this,e)),f.FocusableModelNode.construct(Object(k.a)(n)),n}return Object(c.a)(t,e),Object(C.a)(t,[{key:"toFormatPlaintext",value:function(){var e=this.element.attributes;return[e.html,e.css,e.js].filter(Boolean).join("\n\n")}}],[{key:"toDataElements",value:function(e){var t=e[0],n=Object(d.a)(t.childNodes),s=n.find((function(e){return"web-snippet-file"===e.tagName.toLowerCase()&&"html"===e.getAttribute("language")})),i=n.find((function(e){return"web-snippet-file"===e.tagName.toLowerCase()&&"css"===e.getAttribute("language")})),r=n.find((function(e){return"web-snippet-file"===e.tagName.toLowerCase()&&"js"===e.getAttribute("language")})),a={html:s?s.textContent:"",css:i?i.textContent:"",js:r?r.textContent:"",layout:t.getAttribute("layout")||void 0,previewHidden:t.hasAttribute("preview-hidden")?"true"===t.getAttribute("preview-hidden"):void 0,htmlHidden:s&&s.hasAttribute("hidden")?"true"===s.getAttribute("hidden"):void 0,cssHidden:i&&i.hasAttribute("hidden")?"true"===i.getAttribute("hidden"):void 0,jsHidden:r&&r.hasAttribute("hidden")?"true"===r.getAttribute("hidden"):void 0};return[{type:this.id,attributes:a}]}},{key:"toDomElements",value:function(e,t){var n=e[0].attributes,s=t.createElement("web-snippet");null!=n.layout&&s.setAttribute("layout",n.layout),null!=n.previewHidden&&s.setAttribute("preview-hidden",String(n.previewHidden));var i=function(e,n,s){var i=t.createElement("web-snippet-file");return i.textContent=n,i.setAttribute("language",e),null!=s&&i.setAttribute("hidden",String(s)),i};return s.appendChild(i("html",n.html,n.htmlHidden)),s.appendChild(i("css",n.css,n.cssHidden)),s.appendChild(i("js",n.js,n.jsHidden)),[s]}}]),t}(f.LeafModelNode);j.id="webSnippet",j.matchTagNames=["web-snippet"],j.handlesOwnChildren=!0,j.ignoreChildren=!0,j.childNodeTypes=[],j.isTranscluded=!0,f.oo.mixin(f.FocusableModelNode)(j),f.modelRegistry.register(j);var O=function(e){function t(e){var n;return Object(a.a)(this,t),n=Object(o.a)(this,Object(l.a)(t).call(this,e)),f.FocusableModelNode.construct(Object(k.a)(n)),n}return Object(c.a)(t,e),Object(C.a)(t,[{key:"toFormatPlaintext",value:function(){return this.element.attributes.latex}}],[{key:"toDataElements",value:function(e){return[{type:this.id,attributes:{latex:e[0].textContent}}]}},{key:"toDomElements",value:function(e,t){var n=t.createElement("math"),s=e[0].attributes;return s&&s.latex&&(n.textContent=s.latex),[n]}}]),t}(f.LeafModelNode);O.id="math",O.matchTagNames=["math"],O.handlesOwnChildren=!0,O.ignoreChildren=!0,O.childNodeTypes=[],O.isTranscluded=!0,f.oo.mixin(f.FocusableModelNode)(O),f.modelRegistry.register(O);var S=n("ReuC"),E=n("Kw5r"),T=n("QZQe"),I={functional:!0,render:function(e,t){return e(T.a,t.data,[e("div",{staticClass:"amber-snippet-grip am-view-focusableNode-grip"})])}},D=(n("zyfT"),n("KHd+")),P=Object(D.a)(I,void 0,void 0,!1,null,null,null).exports,A=n("9Arg"),N=function(e){function t(e,n){var s;return Object(a.a)(this,t),s=Object(o.a)(this,Object(l.a)(t).call(this,e,n)),f.FocusableViewNode.construct(Object(k.a)(s)),s.vm=null,s.viewDisposables.add(s.on("root",s.onRoot.bind(Object(k.a)(s)))),s.element.addEventListener("dragstart",s.onDragStart.bind(Object(k.a)(s))),s.element.classList.add("am-view-snippetNode"),s.element.contentEditable="false",s.element.spellcheck=!1,s.element.draggable=!0,s}return Object(c.a)(t,e),Object(C.a)(t,[{key:"onTeardown",value:function(){this.vm&&(this.vm.$el.remove(),this.vm.$destroy()),Object(S.a)(Object(l.a)(t.prototype),"onTeardown",this).call(this)}}]),Object(C.a)(t,[{key:"updateData",value:function(){var e=this.model.element.attributes;this.vm.language=e.language,this.vm.runnable=e.runnable,this.vm.code=e.code}},{key:"changeAttribute",value:function(e,t){this.root&&this.root.surface.model.getLinearFragment(this.getOuterRange(),!0).changeAttributes(Object(u.a)({},e,t))}},{key:"onDragStart",value:function(e){var t=new Image;t.src=A.G,e.dataTransfer.setDragImage(t,0,0)}},{key:"onRoot",value:function(){var e=this,t=this.model.element.attributes;this.vm=new E.default({el:document.createElement("div"),parent:this.root.surface.model.api.getVueComponent(),data:function(){return{language:t.language,runnable:t.runnable,code:t.code,schema:t.schema}},render:function(t){return t(P,{props:{editable:!0,nonResizable:!0,language:this.language,runnable:this.runnable,code:this.code,schema:this.schema},on:{"update:language":function(t){return e.changeAttribute("language",t)},"update:runnable":function(t){return e.changeAttribute("runnable",t)},"update:code":function(t){return e.changeAttribute("code",t)},"update:schema":function(t){return e.changeAttribute("schema",t)}}})}}),this.element.appendChild(this.vm.$el),this.model.on("attributeChange",this.updateData.bind(this))}}]),t}(f.LeafViewNode);N.id="snippet",f.oo.mixin(f.FocusableViewNode)(N),f.viewNodeFactory.register(N);var R=n("qTL9"),M={functional:!0,render:function(e,t){return e(R.a,t.data,[e("div",{staticClass:"amber-web-snippet-grip am-view-focusableNode-grip"})])}},L=(n("If1c"),Object(D.a)(M,void 0,void 0,!1,null,null,null).exports),F=function(e){function t(e,n){var s;return Object(a.a)(this,t),s=Object(o.a)(this,Object(l.a)(t).call(this,e,n)),f.FocusableViewNode.construct(Object(k.a)(s)),s.vm=null,s.viewDisposables.add(s.on("root",s.onRoot.bind(Object(k.a)(s)))),s.element.addEventListener("dragstart",s.onDragStart.bind(Object(k.a)(s))),s.element.classList.add("am-view-webSnippetNode"),s.element.contentEditable="false",s.element.spellcheck=!1,s.element.draggable=!0,s}return Object(c.a)(t,e),Object(C.a)(t,[{key:"onTeardown",value:function(){this.vm&&(this.vm.$el.remove(),this.vm.$destroy()),Object(S.a)(Object(l.a)(t.prototype),"onTeardown",this).call(this)}}]),Object(C.a)(t,[{key:"updateData",value:function(){var e=this.model.element.attributes;this.vm.html=e.html,this.vm.css=e.css,this.vm.js=e.js,this.vm.selectedTab=e.selectedTab,this.vm.layout=e.layout,this.vm.previewHidden=e.previewHidden,this.vm.htmlHidden=e.htmlHidden,this.vm.cssHidden=e.cssHidden,this.vm.jsHidden=e.jsHidden}},{key:"changeAttribute",value:function(e,t){this.root&&this.root.surface.model.getLinearFragment(this.getOuterRange(),!0).changeAttributes(Object(u.a)({},e,t))}},{key:"onDragStart",value:function(e){var t=new Image;t.src=A.G,e.dataTransfer.setDragImage(t,0,0)}},{key:"onRoot",value:function(){var e=this,t=this.model.element.attributes;this.vm=new E.default({el:document.createElement("div"),parent:this.root.surface.model.api.getVueComponent(),data:function(){return{html:t.html,css:t.css,js:t.js,selectedTab:t.selectedTab,previewHidden:t.previewHidden,htmlHidden:t.htmlHidden,cssHidden:t.cssHidden,jsHidden:t.jsHidden,layout:t.layout}},render:function(t){return t(L,{props:{html:this.html,css:this.css,js:this.js,selectedTab:this.selectedTab,previewHidden:this.previewHidden,htmlHidden:this.htmlHidden,cssHidden:this.cssHidden,jsHidden:this.jsHidden,layout:this.layout},on:{"update:html":function(t){return e.changeAttribute("html",t)},"update:css":function(t){return e.changeAttribute("css",t)},"update:js":function(t){return e.changeAttribute("js",t)},"update:selectedTab":function(t){return e.changeAttribute("selectedTab",t)},"update:previewHidden":function(t){return e.changeAttribute("previewHidden",t)},"update:htmlHidden":function(t){return e.changeAttribute("htmlHidden",t)},"update:cssHidden":function(t){return e.changeAttribute("cssHidden",t)},"update:jsHidden":function(t){return e.changeAttribute("jsHidden",t)},"update:layout":function(t){return e.changeAttribute("layout",t)}}})}}),this.element.appendChild(this.vm.$el),this.model.on("attributeChange",this.updateData.bind(this))}}]),t}(f.LeafViewNode);F.id="webSnippet",f.oo.mixin(f.FocusableViewNode)(F),f.viewNodeFactory.register(F);var B=n("b/yj"),q=(n("4Brf"),n("0oug"),n("x0AG"),n("4mDm"),n("2B1R"),n("+2oP"),n("pDQq"),n("Tskq"),n("07d7"),n("PKPk"),n("SYor"),n("3bBZ"),n("yni7")),$=n.n(q),U=(n("TWNs"),n("JfAA"),n("Rm1S"),n("UxlC"),[{name:"Layout",items:[{display:"\\left|".concat("☃","\\right|"),cmd:"|"},{display:"\\left\\{".concat("☃","\\right\\}"),cmd:"{"},{display:"\\left[".concat("☃","\\right]"),cmd:"["},{display:"\\left(".concat("☃","\\right)"),cmd:"("},{display:"\\sqrt{".concat("☃","}"),cmd:"sqrt"},"\\sqrt[".concat("☃","]{").concat("☃","}"),{display:"\\frac{".concat("☃","}{").concat("☃","}"),cmd:"frac"},{display:"\\vec{".concat("☃","}"),cmd:"vec"},{display:"\\hat ".concat("☃"),cmd:"hat"},{display:"\\overline{".concat("☃","}"),cmd:"overline"},{display:"".concat("☃","^").concat("☃"),cmd:"superscript"},{display:"".concat("☃","_").concat("☃"),cmd:"subscript"},{display:"".concat("☃","^").concat("☃","_").concat("☃"),input:"^".concat("☃","_").concat("☃")}]},{name:"Operator",items:["+","-","\\times","\\div","\\pm","\\mp","=","\\cup","\\neq","\\sim","\\approx","\\varnothing","\\forall","\\exists","\\in","\\ni","\\propto","\\leq","\\simeq","\\cong","\\equiv","\\lt","\\gt","\\ll","\\gg","\\geq","\\subset","\\notin","\\supset","\\subseteq","\\supseteq","\\longrightarrow"]},{name:"Greek Alphabet",items:["\\varphi","\\Psi","\\theta","\\epsilon","\\xi","\\eta","\\mu","\\sigma","\\partial","\\infty","\\alpha","\\beta","\\pi","\\varepsilon","\\chi","\\lambda","\\gamma","\\delta","\\zeta","\\iota","\\kappa","\\nu","\\psi","\\varpi","\\varrho","\\rho","\\tau","\\upsilon","\\phi","\\omega","\\Gamma","\\Delta","\\Lambda","\\Phi","\\Pi","\\Sigma","\\digamma","\\Upsilon","\\Xi","\\Omega","\\vartheta","\\Theta","\\varsigma","\\varkappa"]},{name:"Symbol",items:["\\dagger","\\ddagger","\\cdot","\\circ","\\bullet","\\ast","\\diamond","\\neg","/","\\setminus","\\vee","\\wedge","\\wr","\\cup","\\uplus","\\cap","\\sqcup","\\sqcap","\\amalg","\\otimes","\\odot","\\oslash","\\oplus","\\ominus","\\bigcirc"]},{name:"Arrow",items:["\\Rightarrow","\\Leftarrow","\\Leftrightarrow","\\Longrightarrow","\\Longleftarrow","\\Longleftrightarrow","\\Uparrow","\\Downarrow","\\Updownarrow","\\rightarrow","\\leftarrow","\\leftrightarrow","\\longrightarrow","\\longleftarrow","\\longleftrightarrow","\\uparrow","\\downarrow","\\updownarrow","\\nwarrow","\\nearrow","\\searrow","\\swarrow","\\hookrightarrow","\\hookleftarrow","\\rightharpoonup","\\leftharpoonup","\\rightharpoondown","\\leftharpoondown"]},{name:"Trigonometry",items:["\\ln","\\log","\\log_".concat("☃"),"\\lg","\\lim","\\lim_".concat("☃"),"\\sin","\\cos","\\tan","\\csc","\\sec","\\cot","\\arcsin","\\arccos","\\arctan"]},{name:"Calculus",items:["\\sum_".concat("☃","^").concat("☃"),"\\prod_".concat("☃","^").concat("☃"),"\\coprod_".concat("☃","^").concat("☃"),"\\int","\\int_".concat("☃"),"\\int^".concat("☃"),"\\int_".concat("☃","^").concat("☃"),"\\oint","\\oint_".concat("☃"),"\\oint^".concat("☃"),"\\oint_".concat("☃","^").concat("☃")]}]),z={name:"Matrix",items:[]};U.push(z);for(var V=1;V<=5;V++)for(var H=1;H<=5;H++){for(var W="".concat(V,"\\times").concat(H),Q="\\begin{matrix}",K=1;K<=V;K++){for(var Y=1;Y<H;Y++)Q+="&";K!==V&&(Q+="\\\\")}Q+="\\end{matrix}",z.items.push({display:W,input:Q})}for(var G=new RegExp("☃","g"),X=0,J=U;X<J.length;X++)for(var Z=J[X],ee=function(e){var t=Z.items[e];"string"==typeof t&&(Z.items[e]=t={display:t});var n=t.display,s=0;if(t.display="$"+n.replace(G,(function(){return" "+"xyz".charAt(s++)+" "})).trim()+"$",!t.cmd&&(t.input&&(n=t.input),t.input=n.replace(G,"{}"),void 0===t.cursor)){var i=n.match(G);t.cursor=i?i.length:0}},te=0;te<Z.items.length;te++)ee(te);var ne=n("loy4"),se=n("oDEV");MathQuill=$.a.getInterface(1);var ie=new Map,re=new Map,ae=!0,oe=!1,le=void 0;try{for(var ce,ue=U[Symbol.iterator]();!(ae=(ce=ue.next()).done);ae=!0){var de=ce.value,he=!0,pe=!1,fe=void 0;try{for(var me,ve=de.items[Symbol.iterator]();!(he=(me=ve.next()).done);he=!0){var be=me.value;be.cmd&&ie.set(be.cmd,be),be.input&&re.set(be.input,be)}}catch(nt){pe=!0,fe=nt}finally{try{he||null==ve.return||ve.return()}finally{if(pe)throw fe}}}}catch(nt){oe=!0,le=nt}finally{try{ae||null==ue.return||ue.return()}finally{if(oe)throw le}}var ge=U.map((function(e){for(var t="Matrix"===e.name?5:10,n=[],s=0;s<e.items.length;s+=t)n.push(e.items.slice(s,s+t));return{name:e.name,chunks:n}})),ye={components:{FadeTransition:se.a,MathRender:B.a},props:{value:{type:String,default:null}},data:function(){return{recent:null,selectedCategory:ge[0],innerValue:""}},computed:{categories:function(){return[this.recentCategory].concat(Object(d.a)(ge))},recentCategory:function(){for(var e=this.recent.items.map((function(e){return e.cmd?ie.get(e.cmd):re.get(e.input)})).filter((function(e){return e})),t=[],n=0;n<e.length;n+=10)t.push(e.slice(n,n+10));return{name:"Recent",chunks:t}}},watch:{value:{immediate:!0,handler:function(e){this.innerValue=e||""}},innerValue:function(e){this.ignoreInnerValueChanged?this.ignoreInnerValueChanged=!1:(this.ignoreMathquillChanged=!0,this.mq.latex(e||""))},recent:{deep:!0,handler:function(e){ne.setObject("mathEditor.recent",e)}}},created:function(){var e=ne.getObject("mathEditor.recent");(!e||e.version<1)&&(e={version:1,items:[]}),this.recent=e},mounted:function(){var e=this;this.ignoreInnerValueChanged=!1,this.ignoreMathquillChanged=!1,this.$el.addEventListener("mousedown",(function(e){e.stopPropagation()})),this.$el.addEventListener("keydown",(function(t){"Escape"===t.key&&e.cancel()})),this.mq=MathQuill.MathField(this.$refs.equation),setTimeout((function(){return e.mq.focus()}));for(var t=0,n=["keyup","cut","paste","blur"];t<n.length;t++){var s=n[t];this.$refs.equation.addEventListener(s,this.onViewChanged)}this.innerValue=this.value||""},methods:{ok:function(){var e=y.normalizeString(this.innerValue||"").trim();this.$emit("ok",e)},cancel:function(){this.$emit("cancel")},selectCategory:function(e){this.selectedCategory=e},insertMath:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.mq.focus(),e.cmd)this.mq.cmd(e.cmd);else{this.mq.write(e.input);for(var n=0;n<e.cursor;n++)this.mq.keystroke("Left")}if(this.onViewChanged(),t){var s=this.recent.items.findIndex((function(t){return e.cmd&&e.cmd===t.cmd||e.input&&e.input===t.input}));-1!==s&&this.recent.items.splice(s,1);var i={};e.cmd?i.cmd=e.cmd:i.input=e.input,this.recent.items.unshift(i)}},onViewChanged:function(){this.ignoreMathquillChanged?this.ignoreMathquillChanged=!1:(this.ignoreInnerValueChanged=!0,this.innerValue=this.mq.latex())}}},we=(n("1Lt8"),Object(D.a)(ye,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("FadeTransition",{attrs:{duration:.2}},[n("div",{staticClass:"med-backdrop"},[n("div",{staticClass:"med",on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.ok(t)}}},[n("div",{staticClass:"med-tabs"},e._l(e.categories,(function(t,s){return n("div",{key:s,staticClass:"med-tab",class:{active:t===e.selectedCategory},on:{mousedown:function(n){return n.preventDefault(),e.selectCategory(t)}}},[e._v("\n\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t")])})),0),e._v(" "),n("div",{staticClass:"med-container"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.selectedCategory.chunks.length,expression:"!selectedCategory.chunks.length"}],staticClass:"med-no-items"},[e._v("No Items")]),e._v(" "),e._l(e.categories,(function(t,s){return n("table",{directives:[{name:"show",rawName:"v-show",value:t===e.selectedCategory&&t.chunks.length,expression:"category === selectedCategory && category.chunks.length"}],key:s,staticClass:"med-tab-pane",attrs:{role:"presentation"}},e._l(t.chunks,(function(s,i){return n("tr",{key:i},e._l(s,(function(s,i){return n("td",{key:i,on:{mousedown:function(n){return n.preventDefault(),e.insertMath(s,t!==e.categories[0])}}},[n("MathRender",{attrs:{latex:s.display}})],1)})),0)})),0)}))],2),e._v(" "),n("div",{staticClass:"med-canvas"},[n("div",{ref:"equation",staticClass:"med-equation"})]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.innerValue,expression:"innerValue"}],staticClass:"med-latex",attrs:{autocomplete:"off",spellcheck:"false"},domProps:{value:e.innerValue},on:{input:function(t){t.target.composing||(e.innerValue=t.target.value)}}}),e._v(" "),n("div",{staticClass:"med-actions"},[n("div",{staticClass:"med-actions-left"},[n("a",{attrs:{href:"https://en.wikibooks.org/wiki/LaTeX/Mathematics",target:"_blank",rel:"noopener noreferrer"}},[e._v("LaTeX Mathematics Guide")])]),e._v(" "),n("div",{staticClass:"med-actions-right"},[n("button",{on:{click:e.cancel}},[e._v("Cancel")]),e._v(" "),n("button",{staticClass:"med-ok",on:{click:e.ok}},[e._v("OK")])])])])])])}),[],!1,null,null,null).exports),_e={components:{MathRender:B.a,MathEditor:we},props:{latex:{type:String,default:""}},data:function(){return{mathUpdating:!1,editorVisible:!1,editorLatex:null}},mounted:function(){document.body.appendChild(this.$refs.editor.$el)},beforeDestroy:function(){this.$el.appendChild(this.$refs.editor.$el)},methods:{onMathUpdating:function(e){this.mathUpdating=e},editorOk:function(e){this.editorVisible=!1,this.$emit("latex",e||null)},editorCancel:function(){this.editorVisible=!1},showEditor:function(){this.editorLatex=this.latex||"",this.editorVisible=!0}}},ke=(n("Xrlv"),Object(D.a)(_e,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"amber-math-block am-view-focusableNode-grip",attrs:{draggable:"true"}},[n("div",{staticClass:"amb-display-container",on:{dblclick:e.showEditor}},[n("MathRender",{directives:[{name:"show",rawName:"v-show",value:e.latex,expression:"latex"}],staticClass:"amb-math-display",attrs:{latex:"$$"+e.latex+"$$"},on:{updating:e.onMathUpdating}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.latex,expression:"!latex"}],staticClass:"amb-placeholder"},[e._v("Double click to add math")]),e._v(" "),n("div",{staticClass:"amb-floating-btns"},[n("div",{staticClass:"amb-floating-btn",on:{click:e.showEditor}},[e._v("Edit")])])],1),e._v(" "),n("MathEditor",{directives:[{name:"show",rawName:"v-show",value:e.editorVisible,expression:"editorVisible"}],ref:"editor",attrs:{value:e.editorLatex},on:{ok:e.editorOk,cancel:e.editorCancel}})],1)}),[],!1,null,null,null).exports),Ce=function(e){function t(e,n){var s;return Object(a.a)(this,t),s=Object(o.a)(this,Object(l.a)(t).call(this,e,n)),f.FocusableViewNode.construct(Object(k.a)(s)),s.vm=null,s.viewDisposables.add(s.on("root",s.onRoot.bind(Object(k.a)(s)))),s.element.classList.add("am-view-mathNode"),s.element.contentEditable="false",s.element.spellcheck=!1,s}return Object(c.a)(t,e),Object(C.a)(t,[{key:"onTeardown",value:function(){this.vm&&(this.vm.$el.remove(),this.vm.$destroy()),Object(S.a)(Object(l.a)(t.prototype),"onTeardown",this).call(this)}}]),Object(C.a)(t,[{key:"updateData",value:function(){var e=this.model.element.attributes;this.vm.latex=e.latex}},{key:"changeAttribute",value:function(e,t){this.root&&this.root.surface.model.getLinearFragment(this.getOuterRange(),!0).changeAttributes(Object(u.a)({},e,t))}},{key:"onRoot",value:function(){var e=this,t=this.model.element.attributes;this.vm=new E.default({el:document.createElement("div"),parent:this.root.surface.model.api.getVueComponent(),data:function(){return{latex:t&&t.latex}},render:function(t){return t(ke,{props:{latex:this.latex},on:{latex:function(t){return e.changeAttribute("latex",t)}}})}}),this.element.appendChild(this.vm.$el),this.model.on("attributeChange",this.updateData.bind(this))}}]),t}(f.LeafViewNode);Ce.id="math",f.oo.mixin(f.FocusableViewNode)(Ce),f.viewNodeFactory.register(Ce);var xe=function(e){var t;function n(){return Object(a.a)(this,n),Object(o.a)(this,Object(l.a)(n).call(this,"insertSnippet",null))}return Object(c.a)(n,e),Object(C.a)(n,[{key:"getInsertionData",value:(t=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{type:"snippet",attributes:{code:"",language:t.model.api.getDefaultSnippetLanguage(),runnable:!0}},{type:"/snippet"}]);case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),n}(f.InsertBranchNodeCommand);f.commandRegistry.register(new xe);var je=function(e){var t;function n(){return Object(a.a)(this,n),Object(o.a)(this,Object(l.a)(n).call(this,"insertWebSnippet",null))}return Object(c.a)(n,e),Object(C.a)(n,[{key:"getInsertionData",value:(t=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{type:"webSnippet",attributes:{html:"",css:"",js:""}},{type:"/webSnippet"}]);case 1:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),n}(f.InsertBranchNodeCommand);f.commandRegistry.register(new je);n("5s+n");var Oe=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(l.a)(t).call(this,"insertMath",null))}return Object(c.a)(t,e),Object(C.a)(t,[{key:"getInsertionData",value:function(e){return new Promise((function(t){var n=function(){i.$el.remove(),i.$destroy()},s=function(e){i.$el.remove(),i.$destroy(),t([{type:"math",attributes:{latex:e}},{type:"/math"}])},i=new E.default({el:document.createElement("div"),parent:e.model.api.getVueComponent(),render:function(e){return e(we,{on:{cancel:n,ok:s}})}});document.body.appendChild(i.$el)}))}}]),t}(f.InsertBranchNodeCommand);f.commandRegistry.register(new Oe);var Se=n("ELTR"),Ee=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(l.a)(t).call(this,"insertImageAnnotation",null))}return Object(c.a)(t,e),Object(C.a)(t,[{key:"getInsertionData",value:function(e){return new Promise((function(t){var n=function(){i.$el.remove(),i.$destroy()},s=function(e){i.$el.remove(),i.$destroy(),t([{type:"image",attributes:{src:"".concat(g.e,"/files/").concat(e.id),width:null,height:null}},{type:"/image"}])},i=new E.default({el:document.createElement("div"),parent:e.model.api.getVueComponent(),render:function(e){return e(Se.a,{on:{cancel:n,done:s}})}});document.body.appendChild(i.$el)}))}}]),t}(f.InsertBranchNodeCommand);f.commandRegistry.register(new Ee);var Te=n("TphV"),Ie=n("2PkB"),De=n("ltWs"),Pe={components:{Navbar:Te.a,NavbarButton:Ie.a,AmberDisplay:De.a},props:{value:{type:String,required:!0}}},Ae=(n("WqV1"),Object(D.a)(Pe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"amber-preview",on:{click:function(t){return t.target!==t.currentTarget?null:e.$emit("close")}}},[n("div",{staticClass:"amber-preview-layout"},[n("Navbar",{staticClass:"amber-preview-navbar",attrs:{title:"Preview"},scopedSlots:e._u([{key:"right",fn:function(){return[n("NavbarButton",{attrs:{text:"Close",type:"default"},on:{action:function(t){return e.$emit("close")}}})]},proxy:!0}])}),e._v(" "),n("div",{staticClass:"amber-preview-scroll"},[n("AmberDisplay",{attrs:{value:e.value}})],1)],1)])}),[],!1,null,null,null).exports),Ne=n("OH48"),Re=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(l.a)(t).call(this,"preview",null))}return Object(c.a)(t,e),Object(C.a)(t,[{key:"executeOverride",value:function(e){this.$createElement;var t=e.getXml(),n=new E.default({parent:e.model.api.getVueComponent(),render:function(){var e=arguments[0];return e(Ne.a,[e(Ae,{attrs:{value:t},on:{close:function(){return n.$destroy()}}})])}});n.$mount()}}]),t}(f.Command);f.commandRegistry.register(new Re);var Me=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),t}(f.SurfaceToolUi);Me.icon="math",Me.id="insertMath",Me.group="insert",Me.title="Insert Math",Me.commandId="insertMath",Me.intellisense=!0,f.surfaceToolUiFactory.register(Me);var Le=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),t}(f.SurfaceToolUi);Le.icon="snippet",Le.id="insertSnippet",Le.group="insert",Le.title="Insert Code Snippet",Le.commandId="insertSnippet",Le.intellisense=!0,f.surfaceToolUiFactory.register(Le);var Fe=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),t}(f.SurfaceToolUi);Fe.icon="web-snippet",Fe.id="insertWebSnippet",Fe.group="insert",Fe.title="Insert Web Snippet",Fe.commandId="insertWebSnippet",Fe.intellisense=!0,f.surfaceToolUiFactory.register(Fe);var Be=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),t}(f.SurfaceToolUi);Be.icon="sketch",Be.id="insertImageAnnotation",Be.group="insert",Be.title="Insert Image Annotation",Be.commandId="insertImageAnnotation",Be.intellisense=!0,f.surfaceToolUiFactory.register(Be);var qe=n("UNns"),$e=n("0XH5"),Ue=n("Dm8+");function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var Ve={components:{Popup:qe.a,SearchInput:$e.a,ListView:Ue.a},inheritAttrs:!1,data:function(){return{searchQuery:""}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(m.e)(["course"]),{items:function(){return this.course.settings.discussion.saved_replies.map((function(e){return{name:e.name,content:e.content,text:w.f(e.content).substring(0,100)}}))},filteredItems:function(){var e=this;return this.items.filter((function(t){return y.validateSubstrDeep(t,e.searchQuery,"name")}))}}),methods:{onSelectReply:function(e){this.$emit("done",e.content)}}},He=(n("/QQx"),Object(D.a)(Ve,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Popup",e._g(e._b({},"Popup",e.$attrs,!1),e.$listeners),[n("div",{staticClass:"isrp-layout"},[n("h1",{staticClass:"isrp-heading"},[e._v("Saved Replies")]),e._v(" "),n("SearchInput",{staticClass:"isrp-search",attrs:{placeholder:"Filter replies"},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),e._v(" "),n("ListView",{staticClass:"isrp-list",attrs:{items:e.filteredItems},on:{"item-click":e.onSelectReply},scopedSlots:e._u([{key:"item",fn:function(t){var s=t.item;return[n("div",{staticClass:"isrp-reply"},[n("div",{staticClass:"isrp-name"},[e._v(e._s(s.name))]),e._v(" "),n("div",{staticClass:"isrp-preview"},[e._v(e._s(s.text))])])]}}])})],1)])}),[],!1,null,null,null).exports),We=function(e){function t(e,n){var s;return Object(a.a)(this,t),(s=Object(o.a)(this,Object(l.a)(t).call(this,e,n))).setDisabled(!1),s}return Object(c.a)(t,e),Object(C.a)(t,[{key:"onSelect",value:function(e){this.$createElement;Object(S.a)(Object(l.a)(t.prototype),"onSelect",this).call(this,e);var n=e.target.getBoundingClientRect(),s=this.toolGroup.toolbar.surface.model.api.getVueComponent(),a=function(){c.$destroy(),c.$el.remove()},o=function(){var e=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a(),!s.value||w.c(s.value)){e.next=6;break}return e.next=4,_.b({icon:"warning",title:"You have an existing reply. Replace it?",text:"This cannot be undone.",primaryAction:"Replace"});case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:s.$emit("input",t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=new E.default({parent:s,render:function(){var e=arguments[0];return e(He,{attrs:{targetLeft:n.left,targetTop:n.top,targetWidth:n.width,targetHeight:n.height,targetAnchorX:.5,targetAnchorY:1,anchorX:.5,anchorY:0,pagePadding:30,lightDismissable:!0},on:{close:a,done:o}})}});c.$mount()}}]),t}(f.SurfaceToolUi);We.icon="reply",We.id="insertSavedReply",We.group="misc",We.title="Insert Saved Reply",f.surfaceToolUiFactory.register(We);var Qe=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),t}(f.SurfaceToolUi);function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(n),!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Qe.icon="eye",Qe.id="preview",Qe.group="misc",Qe.title="Preview",Qe.commandId="preview",f.surfaceToolUiFactory.register(Qe);var Ge,Xe,Je,Ze,et={components:{Resizer:b.a},props:{value:{type:String,default:null},autofocus:{type:Boolean,default:!1},autohideToolbar:{type:Boolean,default:!1},debug:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},nonResizable:{type:Boolean,default:!1},etcTools:{type:Boolean,default:!1},savedReplies:{type:Boolean,default:!1},canMention:{type:Boolean,default:!1},minHeight:{type:Number,default:void 0},maxHeight:{type:Number,default:void 0}},inject:["fileApi"],data:function(){return{internalValue:null,resizeHeight:null}},computed:Ye({},Object(m.e)(["course","mentionables"])),watch:{value:function(e){this.setEditorValue(e)},disabled:function(e){this.target.surface.setDisabled(e)}},mounted:function(){this.onDocumentUpdateDebounced=p()(this.onDocumentUpdate,150),this.createEditor(this.value||w.a)},destroyed:function(){this.destroyEditor()},methods:Ye({},Object(m.b)({loadMentionables:v.a.LOAD_MENTIONABLES}),{createEditor:function(e){if(!this.target){var t=y.tryParseXml(e),n=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),t}(f.DesktopTargetUi);n.toolbarGroups=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{type:"menu",indicator:"down",include:[{group:"format"}],promote:["paragraph"],demote:["blockquote"]},{include:[{group:"textStyle"}],exclude:["subscript","superscript","strikethrough"]},{include:["bullet","number"]},{include:[{group:"insert"}]}].concat(Object(d.a)(e.etc?[{include:[{group:"etc"}]}]:[]),[{include:[].concat(Object(d.a)(e.savedReplies?["insertSavedReply"]:[]),["preview"])}])}({etc:this.etcTools,savedReplies:this.savedReplies}),this.target=new n,this.target.createSurface(t,this),this.target.surface.setDisabled(this.disabled);var s=this.$refs.resizer.$el;s.insertBefore(this.target.element,s.firstChild),this.target.createToolbar(f.surfaceToolUiFactory,f.toolGroupUiFactory,{autohide:this.autohideToolbar}),this.target.surface.model.on("documentUpdate",this.onDocumentUpdateDebounced),this.autofocus&&this.focus(),this.debug&&(this.debugBar=new f.DebugBarUi(this.target.surface),s.appendChild(this.debugBar.element))}},destroyEditor:function(){this.debugBar&&(this.debugBar.element.remove(),this.debugBar=null),this.target&&(this.target.element.remove(),this.target.surface.model.off("documentUpdate",this.onDocumentUpdateDebounced),this.target.destroy(),this.target=null)},setEditorValue:function(e){e=e||w.a,this.internalValue!==e&&(this.internalValue=e,this.destroyEditor(),this.createEditor(e))},onDocumentUpdate:function(){this.internalValue=this.target.surface.getXml(),this.$emit("input",this.internalValue)},focus:function(){this.target.surface.view.focus()},input:function(e){var t=this.target.surface.model;t.getSelection().getCoveringRange()||t.selectLastContentOffset(),e&&t.getFragment().insertContent(e.split("")).collapsedToEnd().select()},getDefaultSnippetLanguage:function(){return this.course&&this.course.settings.discussion.default_snippet_language||"txt"},getVueComponent:function(){return this},uploadImageFile:function(e){return this.uploadFile(e)},uploadImageUrl:(Ze=Object(r.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fileApi.uploadFileFromUrl(t);case 2:return n=e.sent,e.abrupt("return","".concat(g.e,"/files/").concat(n.id));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return Ze.apply(this,arguments)}),uploadFile:(Je=Object(r.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.size>this.fileApi.maxFileSize)){e.next=3;break}throw _.a({icon:"warning",title:"File too large",text:"The file you have chosen cannot be uploaded because it is too large. The size of the file cannot exceed ".concat(y.humanizeFileSize(this.fileApi.maxFileSize),".")}),new Error("File too large");case 3:return e.next=5,this.fileApi.uploadFile(t);case 5:return n=e.sent,e.abrupt("return","".concat(g.e,"/files/").concat(n.id));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return Je.apply(this,arguments)}),getMentionables:(Xe=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canMention){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,this.loadMentionables();case 4:return e.abrupt("return",this.mentionables);case 5:case"end":return e.stop()}}),e,this)}))),function(){return Xe.apply(this,arguments)}),getMentionable:(Ge=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canMention){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,this.loadMentionables();case 4:return e.abrupt("return",this.mentionables.find((function(e){return e.id===t})));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return Ge.apply(this,arguments)})})},tt=(n("MsQW"),Object(D.a)(et,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("Resizer",{ref:"resizer",staticClass:"amber",attrs:{disabled:e.nonResizable,height:e.resizeHeight,"min-height":e.minHeight,"max-height":null==e.resizeHeight?e.maxHeight:void 0},on:{"update:height":function(t){e.resizeHeight=t}}})}),[],!1,null,null,null));t.a=tt.exports},ACpp:function(e,t,n){e.exports=n.p+"assets/file.13c653e3.svg"},AJ9M:function(e,t,n){},AYx2:function(e,t,n){},AbJy:function(e,t,n){"use strict";var s=n("uGrZ");n.n(s).a},AdLu:function(e,t,n){"use strict";var s=n("ZxZy");n.n(s).a},AkZq:function(e,t,n){"use strict";var s=n("CAs9");n.n(s).a},AkbM:function(e,t,n){"use strict";var s=n("VMB/");n.n(s).a},AroD:function(e,t,n){},AuQ1:function(e,t,n){},AuRJ:function(e,t,n){"use strict";n("SYor");var s=n("wd/R"),i=n.n(s),r=n("Pa8A"),a=n("WmPt"),o={props:{value:{type:null,default:null}},data:function(){return{displayMonth:null}},computed:{date:function(){var e=i()(this.value);return e.isValid()?e:i()()},title:function(){return this.displayMonth.format("MMMM YYYY")},table:function(){for(var e=[],t=0;t<6;t++)e.push([0,0,0,0,0,0,0]);var n=i()(),s=i()(this.displayMonth);s.subtract(s.day(),"days");for(var r=0;r<6;r++)for(var a=0;a<7;a++){var o=[];s.month()!==this.displayMonth.month()&&o.push("other-month"),s.isSame(n,"day")&&o.push("today"),s.isSame(this.date,"day")&&o.push("active"),e[r][a]={text:s.date(),date:i()(s),classes:o},s.add(1,"days")}return e}},created:function(){this.displayMonth=i()(this.date).date(1).hour(0).minute(0).second(0).millisecond(0)},methods:{prevMonth:function(){this.displayMonth=i()(this.displayMonth).subtract(1,"months")},nextMonth:function(){this.displayMonth=i()(this.displayMonth).add(1,"months")},setValue:function(e){this.$emit("input",e)}}},l=(n("JF25"),n("KHd+")),c=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"date-picker"},[n("div",{staticClass:"dpick-head"},[n("div",{staticClass:"dpick-head-btn"},[n("svg",{attrs:{viewBox:"0 0 10 20"},on:{click:e.prevMonth}},[n("polyline",{attrs:{points:"9,1 1,10 9,19"}})])]),e._v(" "),n("div",{staticClass:"dpick-head-title"},[e._v(e._s(e.title))]),e._v(" "),n("div",{staticClass:"dpick-head-btn"},[n("svg",{attrs:{viewBox:"0 0 10 20"},on:{click:e.nextMonth}},[n("polyline",{attrs:{points:"1,1 9,10 1,19"}})])])]),e._v(" "),n("table",{staticClass:"dpick-table"},[e._m(0),e._v(" "),n("tbody",e._l(e.table,(function(t,s){return n("tr",{key:s},e._l(t,(function(t,s){return n("td",{key:s,class:t.classes,on:{click:function(n){return e.setValue(t.date)}}},[n("span",{staticClass:"dpick-text"},[e._v(e._s(t.text))])])})),0)})),0)])])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",[e._v("Su")]),e._v(" "),n("th",[e._v("Mo")]),e._v(" "),n("th",[e._v("Tu")]),e._v(" "),n("th",[e._v("We")]),e._v(" "),n("th",[e._v("Th")]),e._v(" "),n("th",[e._v("Fr")]),e._v(" "),n("th",[e._v("Sa")])])])}],!1,null,null,null).exports,u={props:{value:{type:null,default:null}},computed:{date:function(){var e=i()(this.value);return e.isValid()?e:i()()},times:function(){for(var e=[],t=i()(this.date).hour(0).minute(0).second(0).millisecond(0),n=0;n<24;n++){var s=[];t.isSame(this.date,"hour")&&s.push("active"),e.push({text:t.format("h:mm A"),date:i()(t),classes:s}),t.add(1,"hours")}return e}},mounted:function(){var e=this.$el.querySelector(".active");e&&(this.$el.scrollTop=e.offsetTop+e.clientHeight/2-this.$el.clientHeight/2)},methods:{setValue:function(e){this.$emit("input",e)}}},d=(n("h4QX"),Object(l.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"time-picker"},e._l(e.times,(function(t,s){return n("div",{key:s,staticClass:"tpick-item",class:t.classes,on:{click:function(n){return e.setValue(t.date)}}},[e._v("\n\t\t"+e._s(t.text)+"\n\t")])})),0)}),[],!1,null,null,null).exports),h=n("nVGi"),p=n("UNns"),f={directives:{Tooltip:r.a},components:{Icon:a.a,DatePicker:c,TimePicker:d,Trigger:h.a,Popup:p.a},props:{value:{type:null,default:null},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1}},data:function(){return{invalid:!1,text:null,activePicker:null,focused:!1}},computed:{classes:function(){return{invalid:this.invalid&&this.text,focus:this.focused}},date:function(){var e=i()(this.value);return e.isValid()?e:i()()},datePortion:{get:function(){return this.date},set:function(e){var t=i()(this.date).year(e.year()).month(e.month()).date(e.date());this.setValue(t)}},timePortion:{get:function(){return this.date},set:function(e){var t=i()(this.date).hour(e.hour()).minute(e.minute()).second(0).millisecond(0);this.setValue(t)}}},watch:{text:function(e){if(e=e.trim()){var t=i()(e,"D MMMM YYYY [at] h:mm A");this.invalid=!t.isValid(),this.invalid||t.isSame(this.value)||this.setValue(t)}else this.setValue(null)},value:{immediate:!0,handler:function(e){e&&(e=i()(e)).isValid()&&(this.text=e.format("D MMMM YYYY [at] h:mm A"))}}},methods:{setValue:function(e){this.$emit("input",e)}}},m=(n("8UHf"),Object(l.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"date-time-field",class:e.classes},[n("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.text,expression:"text",modifiers:{lazy:!0}}],staticClass:"dtfield-input",attrs:{type:"text",autocomplete:"off",spellcheck:"false",placeholder:e.placeholder,disabled:e.disabled},domProps:{value:e.text},on:{focus:function(t){e.focused=!0},blur:function(t){e.focused=!1},change:function(t){e.text=t.target.value}}}),e._v(" "),n("Trigger",{attrs:{action:"toggle",active:"date"===e.activePicker},on:{"update:active":function(t){e.activePicker=t?"date":null}},scopedSlots:e._u([{key:"trigger",fn:function(t){var s=t.trigger,i=t.attrs;return[n("Icon",e._b({directives:[{name:"tooltip",rawName:"v-tooltip",value:"Choose Date",expression:"'Choose Date'"}],staticClass:"dtfield-btn",attrs:{icon:"calendar"},on:{click:s}},"Icon",i,!1))]}},{key:"target",fn:function(t){var s=t.targetLeft,i=t.targetTop,r=t.targetWidth,a=t.targetHeight;return[n("Popup",{attrs:{"target-left":s,"target-top":i,"target-width":r,"target-height":a,"clip-mode":"flip","light-dismissable":""},on:{close:function(t){e.activePicker=null}}},[n("DatePicker",{staticClass:"dtfield-picker",model:{value:e.datePortion,callback:function(t){e.datePortion=t},expression:"datePortion"}})],1)]}}])}),e._v(" "),n("Trigger",{attrs:{action:"toggle",active:"time"===e.activePicker},on:{"update:active":function(t){e.activePicker=t?"time":null}},scopedSlots:e._u([{key:"trigger",fn:function(t){var s=t.trigger,i=t.attrs;return[n("Icon",e._b({directives:[{name:"tooltip",rawName:"v-tooltip",value:"Choose Time",expression:"'Choose Time'"}],staticClass:"dtfield-btn",attrs:{icon:"clock"},on:{click:s}},"Icon",i,!1))]}},{key:"target",fn:function(t){var s=t.targetLeft,i=t.targetTop,r=t.targetWidth,a=t.targetHeight;return[n("Popup",{attrs:{"target-left":s,"target-top":i,"target-width":r,"target-height":a,"clip-mode":"flip","light-dismissable":""},on:{close:function(t){e.activePicker=null}}},[n("TimePicker",{staticClass:"dtfield-picker",model:{value:e.timePortion,callback:function(t){e.timePortion=t},expression:"timePortion"}})],1)]}}])})],1)}),[],!1,null,null,null));t.a=m.exports},AzwR:function(e,t,n){},B1lS:function(e,t,n){"use strict";var s=n("CZo1");n.n(s).a},B7Aq:function(e,t,n){},B7nN:function(e,t,n){"use strict";n("ZcRu");var s=n("KHd+"),i=Object(s.a)({},(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"toolbar-group"},[this._t("default")],2)}),[],!1,null,null,null);t.a=i.exports},BHxs:function(e,t,n){},"BI+k":function(e,t,n){"use strict";var s={mixins:[n("/lWA").a],props:{title:{type:String,default:""},tooltip:{type:String,default:void 0},soft:{type:Boolean,default:!1},modified:{type:Boolean,default:!1},icon:{type:String,default:void 0},loading:{type:Boolean,default:!1},unclosable:{type:Boolean,default:!1}}},i=(n("8W5h"),n("KHd+")),r=Object(i.a)(s,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"pane-item",class:"pane-item-"+this.computedTheme},[this._t("default")],2)}),[],!1,null,null,null);t.a=r.exports},BTRJ:function(e,t,n){},BUrC:function(e,t,n){},BYLk:function(e,t,n){},BcHV:function(e,t,n){"use strict";var s=n("CDZK");n.n(s).a},Bl3d:function(e,t,n){"use strict";var s=n("Nk55");n.n(s).a},BriU:function(e,t,n){"use strict";var s=n("ttSX");n.n(s).a},BuBW:function(e,t,n){"use strict";var s=n("F+1L");n.n(s).a},Bxsf:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("fbCW"),n("yXV3"),n("pDQq"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("L2JU"),l=n("NC1X"),c=n("43W2"),u=n("/Yj0");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var h,p={name:"ChallengeLeaderboard",components:{Spinner:l.a,StatusMessage:c.a},inject:["challengeApi"],data:function(){return{loading:!1,leaderboard:null,externalRow:null}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.e)(["course","user"])),created:function(){this.update()},methods:{update:(h=Object(r.a)(i.a.mark((function e(){var t,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loading){e.next=2;break}return e.abrupt("return");case 2:return this.loading=!0,e.prev=3,e.next=6,this.challengeApi.getLeaderboard(this.course.id);case 6:this.leaderboard=e.sent,(t=this.leaderboard.find((function(e){return e.id===n.user.id})))&&t.rank>50?(this.externalRow=t,this.leaderboard.splice(this.leaderboard.indexOf(t))):this.externalRow=null,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),u.b({type:"error",text:"Unable to fetch leaderboard."});case 14:return e.prev=14,this.loading=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[3,11,14,17]])}))),function(){return h.apply(this,arguments)})}},f=(n("k3H/"),n("KHd+")),m=Object(f.a)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chai-container"},[e.loading?n("Spinner",{staticClass:"chalb-spinner"}):e._e(),e._v(" "),e.leaderboard?[e.leaderboard.length?n("table",{staticClass:"chalb-table"},[e._m(0),e._v(" "),n("tbody",[e._l(e.leaderboard,(function(t,s){return n("tr",{key:s},[n("td",{staticClass:"rank"},[e._v(e._s(t.rank))]),e._v(" "),n("td",{staticClass:"name"},[e._v(e._s(t.name))]),e._v(" "),n("td",{staticClass:"tutorial"},[e._v(e._s(t.tutorial))]),e._v(" "),n("td",{staticClass:"points"},[e._v(e._s(t.score))])])})),e._v(" "),e.externalRow?n("tr",[n("td",{staticClass:"dotdotdot",attrs:{colspan:"100"}},[n("svg",{attrs:{viewBox:"0 0 6 30"}},[n("circle",{attrs:{cx:"3",cy:"3",r:"3"}}),e._v(" "),n("circle",{attrs:{cx:"3",cy:"15",r:"3"}}),e._v(" "),n("circle",{attrs:{cx:"3",cy:"27",r:"3"}})])])]):e._e(),e._v(" "),e.externalRow?n("tr",[n("td",{staticClass:"rank"},[e._v(e._s(e.externalRow.rank))]),e._v(" "),n("td",{staticClass:"name"},[e._v(e._s(e.externalRow.name))]),e._v(" "),n("td",{staticClass:"tutorial"},[e._v(e._s(e.externalRow.tutorial))]),e._v(" "),n("td",{staticClass:"points"},[e._v(e._s(e.externalRow.score))])]):e._e()],2)]):n("StatusMessage",{scopedSlots:e._u([{key:"subtext",fn:function(){return[e._v("Check back later")]},proxy:!0}],null,!1,1969277127)},[e._v("\n\t\t\tLeaderboard is empty\n\t\t\t")])]:e._e()],2)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",{staticClass:"rank"},[this._v("Rank")]),this._v(" "),t("th",{staticClass:"name"},[this._v("Name")]),this._v(" "),t("th",{staticClass:"tutorial"},[this._v("Tutorial")]),this._v(" "),t("th",{staticClass:"points"},[this._v("Points")])])])}],!1,null,null,null);t.default=m.exports},"C/Bq":function(e,t,n){"use strict";var s=n("WD2Y");n.n(s).a},C7dE:function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("0oug"),n("x0AG"),n("4mDm"),n("pDQq"),n("07d7"),n("PKPk"),n("EnZy"),n("SYor"),n("3bBZ");var s=n("qPyV"),i=n.n(s),r=n("7tbW"),a=n.n(r),o=n("5G72"),l=n("hSdx"),c={components:{EdTextarea:o.a},directives:{TabIndent:{bind:function(e){e.addEventListener("keydown",(function(t){if("Tab"===t.key){t.preventDefault();var n=e.selectionStart,s=e.selectionEnd;e.value=e.value.substring(0,n)+"\t"+e.value.substring(s),e.selectionStart=e.selectionEnd=n+1}}))}}},props:{value:{type:Array,required:!0},disabled:{type:Boolean,default:!1}},data:function(){return{string:"",placeholder:"Category 1\n\tSubcategory 1\n\tSubcategory2\nCategory 2\n\tSubcategory 1\n..."}},watch:{value:{immediate:!0,handler:function(e){var t="",n=!0,s=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value;t+=o.name+"\n";var l=!0,c=!1,u=void 0;try{for(var d,h=o.subcategories[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){t+="\t"+d.value+"\n"}}catch(p){c=!0,u=p}finally{try{l||null==h.return||h.return()}finally{if(c)throw u}}}}catch(p){s=!0,i=p}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}this.string=t}}},methods:{onChange:function(e){var t=[],n=!0,s=!1,i=void 0;try{for(var r,a=e.split("\n")[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value;o.trim()&&(/^\s/.test(o)?t.length&&t[t.length-1].subcategories.push(o.trim()):t.push({name:o.trim(),subcategories:[]}))}}catch(l){s=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}this.$emit("input",this.fix(t))},fix:function(e){var t=function(e){return e.toLowerCase()===e?l.titleCase(e):e},n=!0,s=!1,r=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var u=o.value;u.name=t(u.name);for(var d=0;d<u.subcategories.length;d++)u.subcategories[d]=t(u.subcategories[d]);u.subcategories=a()(u.subcategories)}}catch(f){s=!0,r=f}finally{try{n||null==c.return||c.return()}finally{if(s)throw r}}var h=(e=i()(e,(function(e){return e.name}))).findIndex((function(e){return"General"===e.name}));if(-1===h)e.unshift({name:"General",subcategories:[]});else if(0!==h){var p=e.splice(h,1)[0];e.unshift(p)}return e}}},u=(n("w4zT"),n("KHd+")),d=Object(u.a)(c,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("EdTextarea",{directives:[{name:"tab-indent",rawName:"v-tab-indent"}],staticClass:"admin-categories-input",attrs:{placeholder:e.placeholder,disabled:e.disabled,value:e.string},on:{change:function(t){return e.onChange(t.target.value)}}})}),[],!1,null,null,null);t.a=d.exports},"C8/q":function(e,t,n){},CAs9:function(e,t,n){},CBL8:function(e,t,n){},CCOq:function(e,t,n){var s={"./en_AU.yaml":["MfL7"],"./jp_JP.yaml":["DtbA",21]};function i(e){if(!n.o(s,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=s[e],i=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n.t(i,7)}))}i.keys=function(){return Object.keys(s)},i.id="CCOq",e.exports=i},CDZK:function(e,t,n){},CHDK:function(e,t,n){"use strict";var s=n("+qff");n.n(s).a},CHnY:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("4Brf"),n("0oug"),n("TeQF"),n("4mDm"),n("2B1R"),n("+2oP"),n("ToJy"),n("Tskq"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("PKPk"),n("FZtP"),n("3bBZ");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("BkRI"),l=n.n(o),c=n("L2JU"),u=n("NC1X"),d=n("4K9I"),h=n("4cYw"),p=n("6XG0"),f=n("Dm8+"),m=n("N+tE"),v=n("hSdx"),b=n("/Yj0");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w,_,k={inject:["userApi","courseApi"],components:{Spinner:u.a,EdButton:d.a,EdSelect:h.a,EdCheck:p.a,ListView:f.a,DisclosureButton:m.a},data:function(){return{digestLoading:!1,digestInterval:null,notificationLoading:!1,courseDigests:null,courseItems:[],courseListVisible:!1,emailWatchedThreads:!1,emailThreadReplies:!1,emailCommentReplies:!1,digestIntervals:[{label:"Instant",value:1},{label:"Hourly",value:60},{label:"Every 4 hours",value:240},{label:"Twice a day",value:720},{label:"Daily",value:2160},{label:"Weekly",value:10080},{label:"None",value:0}]}},computed:y({},Object(c.e)(["user"])),created:function(){var e=this.user.settings;this.digestInterval=e.digest_interval,this.emailWatchedThreads=e.email_watched_threads,this.emailThreadReplies=e.email_thread_replies,this.emailCommentReplies=e.email_comment_replies;var t=this.user.courses.slice().sort(v.compositeComparator((function(e,t){return v.naturalComparator(t.year,e.year)}),(function(e,t){return v.naturalComparator(t.session,e.session)}),(function(e,t){return v.naturalComparator(e.code,t.code)})));this.courseDigests=t.filter((function(e){return e.role.isAtLeast("staff")&&1950===e.id})).map((function(e){return{id:e.id,code:e.code,enabled:e.digest}})),this.courseItems=t.map((function(e){return{id:e.id,code:e.code,session:[e.year,e.session].filter(Boolean).join(" "),settings:e.courseRole.settings,interval:e.courseRole.settings.digest_interval}})),this.courseListVisible=this.courseItems.some((function(e){return null!=e.interval}))},methods:{saveDigest:(_=Object(r.a)(i.a.mark((function e(){var t,n,s=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.digestLoading=!0,(n={settings:l()(this.user.settings),course_digests:this.courseDigests.filter((function(e){return e.enabled})).map((function(e){return e.id}))}).settings.digest_interval=this.digestInterval,(t=this.userApi.update(this.user.id,n)).then((function(){s.user.settings.digest_interval=n.settings.digest_interval;var e=new Map(s.courseDigests.map((function(e){return[e.id,e]}))),t=!0,i=!1,r=void 0;try{for(var a,o=s.user.courses[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var l=a.value;e.has(l.id)&&(l.digest=e.get(l.id).enabled)}}catch(c){i=!0,r=c}finally{try{t||null==o.return||o.return()}finally{if(i)throw r}}})),t=t.then((function(){var e=s.courseItems.filter((function(e){return e.settings.digest_interval!==e.interval})),t=s.user;return v.promiseMap(e,(function(e){var n=y({},e.settings,{digest_interval:e.interval});return s.courseApi.updateCourseRole(e.id,t.id,{settings:n}).then((function(){e.settings.digest_interval=e.interval}))}),{concurrency:5})})),e.prev=6,e.next=9,t;case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(6),b.b({type:"error",text:"Unable to update digest settings."}),e.abrupt("return");case 15:return e.prev=15,this.digestLoading=!1,e.finish(15);case 18:b.b({type:"success",text:"Updated digest settings successfully."});case 19:case"end":return e.stop()}}),e,this,[[6,11,15,18]])}))),function(){return _.apply(this,arguments)}),saveNotification:(w=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.notificationLoading=!0,(t={settings:l()(this.user.settings)}).settings.email_watched_threads=this.emailWatchedThreads,t.settings.email_thread_replies=this.emailThreadReplies,t.settings.email_comment_replies=this.emailCommentReplies,e.prev=5,e.next=8,this.userApi.update(this.user.id,t);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(5),b.b({type:"error",text:"Unable to update email settings."}),e.abrupt("return");case 14:return e.prev=14,this.notificationLoading=!1,e.finish(14);case 17:this.user.settings.email_watched_threads=t.settings.email_watched_threads,this.user.settings.email_thread_replies=t.settings.email_thread_replies,this.user.settings.email_comment_replies=t.settings.email_comment_replies,b.b({type:"success",text:"Updated email settings successfully."});case 21:case"end":return e.stop()}}),e,this,[[5,10,14,17]])}))),function(){return w.apply(this,arguments)})}},C=(n("x1RP"),n("KHd+")),x=Object(C.a)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{staticClass:"settings-heading"},[e._v("Activity Digest Emails")]),e._v(" "),n("p",{staticClass:"settings-text"},[e._v("\n\t\tBe alerted via email about new threads in the discussion you have not read.\n\t")]),e._v(" "),n("p",{staticClass:"settings-text"},[e._v("\n\t\tChoose how frequently you would like to receive these emails, or turn it off completely.\n\t")]),e._v(" "),n("EdSelect",{attrs:{disabled:e.digestLoading},model:{value:e.digestInterval,callback:function(t){e.digestInterval=t},expression:"digestInterval"}},[n("option",{domProps:{value:null}},[e._v("Unset (daily by default)")]),e._v(" "),n("option",{attrs:{disabled:""}},[e._v("──────────")]),e._v(" "),e._l(e.digestIntervals,(function(t){return n("option",{key:t.value,domProps:{value:t.value}},[e._v("\n\t\t\t"+e._s(t.label)+"\n\t\t")])}))],2),e._v(" "),e.courseDigests.length?[e._m(0),e._v(" "),e._l(e.courseDigests,(function(t){return n("EdCheck",{key:t.id,staticClass:"settings-check",attrs:{label:t.code,disabled:e.digestLoading},model:{value:t.enabled,callback:function(n){e.$set(t,"enabled",n)},expression:"course.enabled"}})}))]:e._e(),e._v(" "),n("div",{staticClass:"settings-disclosure"},[n("DisclosureButton",{model:{value:e.courseListVisible,callback:function(t){e.courseListVisible=t},expression:"courseListVisible"}},[e._v("Per-course digest settings")])],1),e._v(" "),e.courseListVisible?n("ListView",{staticClass:"settings-notif-courses",attrs:{items:e.courseItems,"selection-mode":"none"},scopedSlots:e._u([{key:"item",fn:function(t){var s=t.item;return[n("div",{staticClass:"settings-notif-course"},[n("div",{staticClass:"settings-notif-course-layout"},[n("div",{staticClass:"settings-notif-course-code"},[e._v(e._s(s.code))]),e._v(" "),n("div",{staticClass:"settings-notif-course-session"},[e._v(e._s(s.session))])]),e._v(" "),n("EdSelect",{attrs:{disabled:e.digestLoading},model:{value:s.interval,callback:function(t){e.$set(s,"interval",t)},expression:"item.interval"}},[n("option",{domProps:{value:null}},[e._v("Use global setting")]),e._v(" "),n("option",{attrs:{disabled:""}},[e._v("──────────")]),e._v(" "),e._l(e.digestIntervals,(function(t){return n("option",{key:t.value,domProps:{value:t.value}},[e._v("\n\t\t\t\t\t\t"+e._s(t.label)+"\n\t\t\t\t\t")])}))],2)],1)]}}],null,!1,4156244326)}):e._e(),e._v(" "),n("div",{staticClass:"settings-actions"},[e.digestLoading?n("Spinner",{staticClass:"settings-spinner"}):e._e(),e._v(" "),n("EdButton",{attrs:{type:"submit",disabled:e.digestLoading},on:{click:e.saveDigest}},[e._v("\n\t\t\tSave\n\t\t")])],1),e._v(" "),n("h1",{staticClass:"settings-heading"},[e._v("Notification Emails")]),e._v(" "),n("p",{staticClass:"settings-text"},[e._v("\n\t\tYou can receive an email whenever you get a notification from the discussion.\n\t")]),e._v(" "),n("EdCheck",{staticClass:"settings-check",attrs:{label:"Email me when someone posts a comment or answer on a thread I am watching",disabled:e.notificationLoading},model:{value:e.emailWatchedThreads,callback:function(t){e.emailWatchedThreads=t},expression:"emailWatchedThreads"}}),e._v(" "),n("EdCheck",{staticClass:"settings-check",attrs:{label:"Email me when someone replies to my thread",disabled:e.notificationLoading},model:{value:e.emailThreadReplies,callback:function(t){e.emailThreadReplies=t},expression:"emailThreadReplies"}}),e._v(" "),n("EdCheck",{staticClass:"settings-check",attrs:{label:"Email me when someone replies to my comment",disabled:e.notificationLoading},model:{value:e.emailCommentReplies,callback:function(t){e.emailCommentReplies=t},expression:"emailCommentReplies"}}),e._v(" "),n("div",{staticClass:"settings-actions"},[e.notificationLoading?n("Spinner",{staticClass:"settings-spinner"}):e._e(),e._v(" "),n("EdButton",{attrs:{type:"submit",disabled:e.notificationLoading},on:{click:e.saveNotification}},[e._v("\n\t\t\tSave\n\t\t")])],1)],2)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"settings-text"},[this._v("\n\t\t\tIndicate which courses you would like to receive emails for activity in\n\t\t\tyour tutorials "),t("em",[this._v("only")]),this._v(".\n\t\t")])}],!1,null,null,null);t.default=x.exports},"CI1/":function(e,t,n){"use strict";var s=n("s+q+");n.n(s).a},"CIk+":function(e,t,n){},CJeV:function(e,t,n){},CMGH:function(e,t,n){},CQJJ:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("fbCW"),n("2B1R"),n("qePV"),n("5DmW"),n("27RR"),n("tkto"),n("UxlC"),n("hByQ"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("K4j9"),l=n("L2JU"),c=n("G7T9"),u=n("Q2AE"),d=n("BtCt"),h=n("3I1m"),p=n("t19P"),f=n("TphV"),m=n("2PkB"),v=n("lVsj"),b=n("2zmm"),g=n("43W2"),y=n("Oshs"),w=n("CkVh"),_=n("Kaxq"),k=n("Yswc"),C=n("Pa8A"),x=n("WmPt"),j=n("3PXm"),O=n("hSdx"),S=n("sl2b"),E={directives:{Tooltip:C.a},components:{Icon:x.a,ProgressBar:j.a},props:{lesson:{type:Object,required:!0}},computed:{completedCount:function(){return this.lesson.slides.filter((function(e){return"completed"===e.status})).length},totalCount:function(){return this.lesson.slides.length},completionPercentage:function(){return this.completedCount/(this.totalCount||1)}},methods:{pluralize:O.pluralize,slideIcon:S.b}},T=(n("u+ZI"),n("KHd+")),I=Object(T.a)(E,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"lesson-contents"},[n("h1",{staticClass:"lcts-title"},[e._v(e._s(e.lesson.title))]),e._v(" "),n("div",{staticClass:"lcts-slides"},e._l(e.lesson.slides,(function(t){return n("RouterLink",{key:t.id,staticClass:"lcts-slide",class:{completed:"completed"===t.status,hidden:t.isHidden},attrs:{to:{name:"lesson-slide-show",params:{slideId:t.id}}}},[n("Icon",{staticClass:"lcts-slide-icon",attrs:{icon:e.slideIcon(t)}}),e._v(" "),n("span",{staticClass:"lcts-slide-title"},[e._v(e._s(t.title))]),e._v(" "),n("Icon",{directives:[{name:"show",rawName:"v-show",value:"completed"===t.status,expression:"slide.status === 'completed'"},{name:"tooltip",rawName:"v-tooltip",value:"Completed",expression:"'Completed'"}],staticClass:"lcts-slide-tick",attrs:{icon:"tick"}})],1)})),1),e._v(" "),n("div",{staticClass:"lcts-progress"},[e.totalCount?n("ProgressBar",{staticClass:"lcts-progress-bar",attrs:{value:e.completionPercentage}}):e._e(),e._v(" "),n("div",{staticClass:"lcts-progress-text"},[e.totalCount?[e._v("Completed "),n("strong",[e._v(e._s(e.completedCount))]),e._v(" of "),n("strong",[e._v(e._s(e.totalCount))]),e._v(" "+e._s(e.pluralize(e.totalCount,"slide")))]:[e._v("There are no slides")]],2)],1)])}),[],!1,null,null,null).exports,D=n("OBDa"),P=n("4K9I"),A=n("6XG0"),N={components:{DialogLayout:D.a,EdButton:P.a,EdCheck:A.a},props:{slideId:{type:Number,required:!0}},inject:["lessonApi"],data:function(){return{students:!0}},methods:{cancel:function(){this.$emit("done")},submit:function(){this.lessonApi.downloadSlideQuestionsResponses(this.slideId,{students:this.students}),this.$emit("done")}}},R=(n("36/f"),Object(T.a)(N,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogLayout",{staticClass:"lesson-sheet-download-quiz-responses",attrs:{title:"Download Quiz Responses"},on:{submit:e.submit},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancel(t)}},scopedSlots:e._u([{key:"primaryActions",fn:function(){return[n("EdButton",{staticClass:"primary",attrs:{type:"submit"}},[e._v("Download")])]},proxy:!0}])},[n("div",{staticClass:"lsdqr-layout"},[n("EdCheck",{staticClass:"lsdqr-item",attrs:{label:"Include students only",description:"Only student responses will be included in the report."},model:{value:e.students,callback:function(t){e.students=t},expression:"students"}})],1)])}),[],!1,null,null,null).exports),M=n("4cYw"),L=n("IbLZ"),F={components:{DialogLayout:D.a,EdButton:P.a,EdCheck:A.a,EdSelect:M.a,EdField:L.a},props:{lessonId:{type:Number,required:!0},type:{type:String,required:!0}},inject:["lessonApi"],data:function(){return{strategy:"best",ignoreLate:!1,lateNoPoints:!0,numbers:!1,scores:!1,students:!0}},computed:{title:function(){return"completions"===this.type?"Download Lesson Completions":"Download Lesson Results"}},methods:{cancel:function(){this.$emit("done")},submit:function(){this.lessonApi.downloadLessonResults(this.lessonId,{strategy:this.strategy,ignoreLate:this.ignoreLate,lateNoPoints:this.lateNoPoints,numbers:this.numbers,scores:this.scores,students:this.students,completions:"completions"===this.type}),this.$emit("done")}}},B=(n("cGAI"),Object(T.a)(F,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogLayout",{staticClass:"lesson-sheet-download-lesson-results",attrs:{title:e.title},on:{submit:e.submit},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancel(t)}},scopedSlots:e._u([{key:"primaryActions",fn:function(){return[n("EdButton",{staticClass:"primary",attrs:{type:"submit"}},[e._v("Download")])]},proxy:!0}])},[n("div",{staticClass:"lsdlr-layout"},[n("EdCheck",{staticClass:"lsdlr-item",attrs:{label:"Slide numbers",description:"Include a header row with the number of each slide."},model:{value:e.numbers,callback:function(t){e.numbers=t},expression:"numbers"}}),e._v(" "),n("EdCheck",{staticClass:"lsdlr-item",attrs:{label:"Slide scores",description:"Include a header row with the score for each slide."},model:{value:e.scores,callback:function(t){e.scores=t},expression:"scores"}}),e._v(" "),n("EdCheck",{staticClass:"lsdlr-item",attrs:{label:"Include students only",description:"Only student results will be included in the report."},model:{value:e.students,callback:function(t){e.students=t},expression:"students"}}),e._v(" "),n("h2",{staticClass:"lsdlr-heading"},[e._v("Code slide options")]),e._v(" "),n("EdField",{staticClass:"lsdlr-item",scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Submission")]},proxy:!0},{key:"description",fn:function(){return[e._v("Which submission to take when calculating the points.")]},proxy:!0}])},[e._v(" "),e._v(" "),n("EdSelect",{model:{value:e.strategy,callback:function(t){e.strategy=t},expression:"strategy"}},[n("option",{attrs:{value:"latest"}},[e._v("Latest")]),e._v(" "),n("option",{attrs:{value:"best"}},[e._v("Best")])])],1),e._v(" "),n("EdCheck",{staticClass:"lsdlr-item",attrs:{label:"Ignore late submissions"},model:{value:e.ignoreLate,callback:function(t){e.ignoreLate=t},expression:"ignoreLate"}}),e._v(" "),n("EdCheck",{staticClass:"lsdlr-item",attrs:{label:"Late submissions are worth 0 points"},model:{value:e.lateNoPoints,callback:function(t){e.lateNoPoints=t},expression:"lateNoPoints"}})],1)])}),[],!1,null,null,null).exports),q=n("oLoy"),$={components:{DialogLayout:D.a,EdField:L.a,EdButton:P.a,EdCheck:A.a,EdRadio:q.a,EdSelect:M.a},props:{lessonId:{type:Number,required:!0}},inject:["lessonApi"],data:function(){return{students:!0,type:"latest",numbers:!1,scores:!1,scoreType:"passfail"}},methods:{cancel:function(){this.$emit("done")},submit:function(){this.lessonApi.downloadLessonChallengeResults(this.lessonId,{students:this.students,type:this.type,numbers:this.numbers,scores:this.scores,scoreType:this.scoreType}),this.$emit("done")}}},U=(n("xaMt"),Object(T.a)($,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogLayout",{staticClass:"lesson-sheet-download-challenge-results",attrs:{title:"Download Lesson Challenge Results"},on:{submit:e.submit},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancel(t)}},scopedSlots:e._u([{key:"primaryActions",fn:function(){return[n("EdButton",{staticClass:"primary",attrs:{type:"submit"}},[e._v("Download")])]},proxy:!0}])},[n("div",{staticClass:"lsdcr-layout"},[n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Results")]},proxy:!0}])},[e._v(" "),n("div",[n("EdCheck",{staticClass:"lsdcr-control",attrs:{label:"Include students only",description:"Only student results will be included in the report."},model:{value:e.students,callback:function(t){e.students=t},expression:"students"}})],1)]),e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Selection")]},proxy:!0}])},[e._v(" "),n("div",[n("EdSelect",{staticClass:"lsdcr-control",model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[n("option",{attrs:{value:"latest"}},[e._v("Latest")]),e._v(" "),n("option",{attrs:{value:"optimised"}},[e._v("Optimised")]),e._v(" "),n("option",{attrs:{value:"all"}},[e._v("All")])]),e._v(" "),"optimised"===e.type?[n("p",[e._v("The last submission made before the due date is selected. If there is no due date, then the last submission is selected.")]),e._v(" "),n("p",[e._v("If the student has made no submissions before the due date, then their latest submission is selected.")])]:e._e()],2)]),e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Headers")]},proxy:!0}])},[e._v(" "),n("div",[n("EdCheck",{staticClass:"lsdcr-control",attrs:{label:"Testcase numbers",description:"Include a header row with the number of each testcase (unit testing not applicable)."},model:{value:e.numbers,callback:function(t){e.numbers=t},expression:"numbers"}}),e._v(" "),n("EdCheck",{staticClass:"lsdcr-control",attrs:{label:"Testcase scores",description:"Include a header row with the score for each testcase (unit testing not applicable)."},model:{value:e.scores,callback:function(t){e.scores=t},expression:"scores"}})],1)]),e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Scoring")]},proxy:!0}])},[e._v(" "),n("div",[n("EdRadio",{staticClass:"lsdcr-control",attrs:{label:"Pass/fail",description:"Scoring for each testcase will be 1 for pass and 0 for fail.",value:"passfail"===e.scoreType},on:{input:function(t){e.scoreType="passfail"}}}),e._v(" "),n("EdRadio",{staticClass:"lsdcr-control",attrs:{label:"Per-testcase score",description:"Use the per-testcase scores.",value:"pertestcase"===e.scoreType},on:{input:function(t){e.scoreType="pertestcase"}}})],1)])],1)])}),[],!1,null,null,null).exports),z=n("SBq4"),V=n("bBMf"),H=n("PBi1"),W={directives:{Autofocus:z.a},components:{Alert:V.a,AlertButton:H.a,EdCheck:A.a},data:function(){return{checked:!1}}},Q=(n("OMYB"),Object(T.a)(W,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Alert",{attrs:{icon:"warning",title:"Delete your own user data for this lesson?",text:"Any attempts you have made of the slides in this lesson will be deleted. This is a permanent operation and cannot be undone."},scopedSlots:e._u([{key:"primaryActions",fn:function(){return[n("AlertButton",{directives:[{name:"autofocus",rawName:"v-autofocus"}],on:{click:function(t){return e.$emit("action",!1)}}},[e._v("Cancel")]),e._v(" "),n("AlertButton",{attrs:{disabled:!e.checked},on:{click:function(t){return e.$emit("action",!0)}}},[e._v("Delete")])]},proxy:!0}])},[n("div",{staticClass:"arud-check"},[n("EdCheck",{attrs:{label:"I confirm I want to permanently delete my user data for this lesson"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)])}),[],!1,null,null,null).exports),K=n("wd/R"),Y=n.n(K);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var X={components:{Timer:n("3Pih").a},props:{startDate:{type:Object,required:!0},duration:{type:Number,default:0}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(l.e)(["date"]),{endDate:function(){return Y()(this.startDate).add(this.duration,"minutes")}})},J=(n("xYCL"),Object(T.a)(X,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"lesson-countdown-timer"},[this.date>=this.endDate?t("div",{staticClass:"lct-timeup"},[this._v("Time's Up")]):[t("div",{staticClass:"lct-heading"},[this._v("Timer")]),this._v(" "),t("Timer",{staticClass:"lct-timer",attrs:{date:this.endDate}})]],2)}),[],!1,null,null,null).exports),Z=n("LA8e"),ee=n("/Yj0"),te=n("5/Cn"),ne=n("loy4");function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var re,ae,oe,le={name:"Lesson",components:{PortalTarget:o.PortalTarget,HeaderContainer:p.a,Navbar:f.a,NavbarButton:m.a,Join:v.a,PasswordPrompt:b.a,StatusMessage:g.a,SheetContainer:y.a,ContextMenuTrigger:w.a,ContextMenuItem:_.a,ContextMenuSeparator:k.a,LessonContents:I,CountdownTimer:J},props:{lessonId:{type:Number,required:!0}},data:function(){return{completedPrereqs:!1,menuVisible:!1,contentsVisible:ne.getObject("lesson.contentsVisible",!0),passwordPrompt:!1,passwordIncorrect:!1}},computed:ie({},Object(l.e)(["user"]),{},Object(l.e)("lesson",["lessons","loadingLesson","loadingSlide"]),{},Object(c.h)({isBlockingLockdownActive:u.c.SET_IS_BLOCKING_LOCKDOWN_ACTIVE,blockingLockdownRoute:u.c.SET_IS_BLOCKING_LOCKDOWN_ROUTE}),{},Object(c.h)("lesson",{password:d.c.SET_PASSWORD}),{},Object(l.c)(["isStaff","isAdmin","isAffectedByBlockingLockdown"]),{},Object(l.c)("lesson",["lesson","slide","slideIndex","canGoPrev","canGoNext"]),{title:function(){return this.loadingLesson||this.loadingSlide?"":this.slide?this.slide.title+(this.slide.isHidden?" (Hidden)":""):this.lesson?this.lesson.title+(this.lesson.isHidden?" (Hidden)":""):this.completedPrereqs?this.passwordPrompt?"":"Unable to load lesson":"Lesson locked"},willSlideHandleCompletion:function(){return this.slide&&Z.a[this.slide.type].handlesCompletion},editText:function(){return this.slide?"Edit Slide":"Edit Lesson"},editLink:function(){return{name:this.slide?"lesson-slide-edit":"lesson-edit"}},prereqs:function(){var e=this,t=this.lessons[this.lessonId];return t?t.prerequisites.map((function(t){return e.lessons[t]})).filter(Boolean):[]},uncompletedPrereqs:function(){return this.prereqs.filter((function(e){return!e.completed}))},isDownloadQuizResponsesAvailable:function(){return this.isAdmin&&this.slide&&this.slide.type===h.h.quiz}}),watch:{lessonId:"update",contentsVisible:function(e){ne.setObject("lesson.contentsVisible",e)},lesson:{immediate:!0,handler:function(e){e&&e.settings.safeExamBrowser.enabled&&this.isAffectedByBlockingLockdown&&(this.isBlockingLockdownActive=!0,this.blockingLockdownRoute=location.pathname+location.search)}}},created:function(){this.update()},mounted:function(){this.setNavbarVisible(!0),document.body.addEventListener("keyup",this.onBodyKeyUp)},destroyed:function(){document.body.removeEventListener("keyup",this.onBodyKeyUp),this.setNavbarVisible(!1),this.setLessonId(null)},beforeRouteLeave:function(e,t,n){this.user&&this.isBlockingLockdownActive?n(!1):n()},methods:ie({},Object(l.b)("lesson",{loadLesson:d.a.LOAD_LESSON,deleteUserData:d.a.DELETE_USER_DATA,completeSlide:d.a.COMPLETE_SLIDE}),{},Object(l.d)("lesson",{setLessonId:d.c.SET_LESSON_ID}),{},Object(l.d)({setNavbarVisible:u.c.SET_NAVBAR_VISIBLE}),{update:(oe=Object(r.a)(i.a.mark((function e(){var t,n,s=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.lessonId,this.completedPrereqs=!0,e.prev=2,e.next=5,this.loadLesson({id:t,password:this.password,view:!0});case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(2),e.t0.data&&e.t0.data.message&&/prereq/i.test(e.t0.data.message)?(this.passwordPrompt=!1,this.completedPrereqs=!1):e.t0.data&&e.t0.data.message&&/password/i.test(e.t0.data.message)?this.passwordPrompt?this.passwordIncorrect=!0:this.passwordPrompt=!0:(this.passwordPrompt=!1,"You must be using the SafeExamBrowser to access this lesson"===e.t0.data.message?ee.b({type:"error",text:"You must be using Safe Exam Browser to access this lesson."}):ee.b({type:"error",text:"Could not load the lesson."})),e.abrupt("return");case 11:this.passwordPrompt=!1,"lesson-show"===this.$route.name&&(n=(this.lesson.lastViewedSlideId?this.lesson.slides.find((function(e){return e.id===s.lesson.lastViewedSlideId})):this.lesson.slides.find((function(e){return"completed"!==e.status})))||this.lesson.slides[0])&&this.$router.replace({name:"lesson-slide-show",params:{slideId:n.id}});case 13:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(){return oe.apply(this,arguments)}),resetScroll:function(){this.$refs.content.scrollTop=0},onBodyKeyUp:function(e){if(e.target===document.body)switch(e.key){case"ArrowLeft":case"ArrowUp":this.prevSlide();break;case"ArrowRight":case"ArrowDown":this.nextSlide()}},toggleContents:function(){this.contentsVisible=!this.contentsVisible},nextSlide:function(){this.canGoNext&&this.$router.push({name:"lesson-slide-show",params:{slideId:this.lesson.slides[this.slideIndex+1].id}})},prevSlide:function(){this.canGoPrev&&this.$router.push({name:"lesson-slide-show",params:{slideId:this.lesson.slides[this.slideIndex-1].id}})},performCompleteSlide:(ae=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("completed"!==this.slide.status){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.completeSlide(this.slide.id);case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(2),ee.b({type:"error",text:"Could not complete slide."}),e.abrupt("return");case 11:t&&ee.b({type:"success",title:"Slide Completed",text:t});case 12:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(e){return ae.apply(this,arguments)}),performResetUserData:(re=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te.e(Q);case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,this.deleteUserData();case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(4),ee.b({type:"error",text:"Unable to reset user data for this lesson."}),e.abrupt("return");case 13:ee.b({type:"success",text:"Your user data has been deleted for this lesson."}),this.$router.push({name:"lessons"});case 15:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(){return re.apply(this,arguments)}),showSheetDownloadQuizResponses:function(){var e=this,t=(this.$createElement,this.slide);if(t){var n={render:function(){var e=this,n=arguments[0];return n(R,{attrs:{slideId:t.id},on:{done:function(t){return e.$emit("done",t)}}})}};this.$refs.sheetContainer.showSheet(n,(function(){e.$refs.sheetContainer.closeSheet()}))}},showSheetDownloadLessonResults:function(e){var t=this,n=(this.$createElement,this.lessonId),s={render:function(){var t=this,s=arguments[0];return s(B,{attrs:{lessonId:n,type:e},on:{done:function(e){return t.$emit("done",e)}}})}};this.$refs.sheetContainer.showSheet(s,(function(){t.$refs.sheetContainer.closeSheet()}))},showSheetDownloadLessonChallengeResults:function(){var e=this,t=(this.$createElement,this.lessonId),n={render:function(){var e=this,n=arguments[0];return n(U,{attrs:{lessonId:t},on:{done:function(t){return e.$emit("done",t)}}})}};this.$refs.sheetContainer.showSheet(n,(function(){e.$refs.sheetContainer.closeSheet()}))},previewLesson:function(){this.$router.push({name:"lesson-preview"})}})},ce=(n("yHR/"),Object(T.a)(le,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("HeaderContainer",{staticClass:"lesson-show",scopedSlots:e._u([{key:"header",fn:function(){return[n("Navbar",{attrs:{title:e.title,secondary:""},scopedSlots:e._u([{key:"left",fn:function(){return[e.isBlockingLockdownActive?e._e():n("NavbarButton",{attrs:{text:"Lessons",icon:"chevron-left",to:{name:"lesson-index"}}}),e._v(" "),e.lesson&&e.lesson.slides.length?n("NavbarButton",{attrs:{text:"Slides",icon:"menu",pressed:e.contentsVisible},on:{action:e.toggleContents}}):e._e(),e._v(" "),e.lesson&&e.lesson.isTimed?n("CountdownTimer",{staticClass:"lesshow-countdown-timer",attrs:{"start-date":e.lesson.firstViewedAt,duration:e.lesson.timerDuration}}):e._e()]},proxy:!0},{key:"right",fn:function(){return[n("PortalTarget",{staticClass:"lesshow-navbar-portal",attrs:{name:"slide-primary-actions"}}),e._v(" "),e.isStaff?n("NavbarButton",{attrs:{text:e.editText,to:e.editLink}}):e._e(),e._v(" "),e.slide?[e.willSlideHandleCompletion?e._e():n("NavbarButton",{attrs:{text:"Complete Slide",disabled:"completed"===e.slide.status},on:{action:function(t){return e.performCompleteSlide("You have marked this slide as completed.")}}}),e._v(" "),e.isBlockingLockdownActive?e._e():n("ContextMenuTrigger",{attrs:{active:e.menuVisible},on:{"update:active":function(t){e.menuVisible=t}},scopedSlots:e._u([{key:"trigger",fn:function(t){var s=t.trigger,i=t.attrs;return[n("NavbarButton",e._b({attrs:{icon:"more-horiz"},on:{action:s}},"NavbarButton",i,!1))]}},{key:"items",fn:function(){return[n("ContextMenuItem",{key:"preview",attrs:{text:"Preview Lesson"},on:{click:e.previewLesson}}),e._v(" "),n("ContextMenuSeparator"),e._v(" "),e.isStaff?n("ContextMenuItem",{key:"resetUserData",attrs:{text:"Reset Lesson Attempt"},on:{click:e.performResetUserData}}):e._e(),e._v(" "),n("ContextMenuSeparator"),e._v(" "),e.isDownloadQuizResponsesAvailable?n("ContextMenuItem",{key:"downloadQuizResponses",attrs:{text:"Download Quiz Responses..."},on:{click:function(t){return e.showSheetDownloadQuizResponses()}}}):e._e(),e._v(" "),e.isAdmin?n("ContextMenuItem",{key:"downloadLessonResults",attrs:{text:"Download Lesson Results..."},on:{click:function(t){return e.showSheetDownloadLessonResults("points")}}}):e._e(),e._v(" "),e.isAdmin?n("ContextMenuItem",{key:"downloadLessonCompletions",attrs:{text:"Download Lesson Completions..."},on:{click:function(t){return e.showSheetDownloadLessonResults("completions")}}}):e._e(),e._v(" "),e.isAdmin?n("ContextMenuItem",{key:"downloadLessonChallengeResults",attrs:{text:"Download Lesson Challenge Results..."},on:{click:function(t){return e.showSheetDownloadLessonChallengeResults()}}}):e._e()]},proxy:!0}],null,!1,2155968726)}),e._v(" "),n("NavbarButton",{attrs:{disabled:!e.canGoPrev,text:"Prev"},on:{action:e.prevSlide}}),e._v(" "),n("NavbarButton",{attrs:{disabled:!e.canGoNext,text:"Next"},on:{action:e.nextSlide}})]:e._e(),e._v(" "),n("PortalTarget",{staticClass:"lesshow-navbar-portal",attrs:{name:"slide-secondary-actions"}})]},proxy:!0}])})]},proxy:!0},{key:"overlay",fn:function(){return[n("SheetContainer",{ref:"sheetContainer"})]},proxy:!0}])},[e._v(" "),n("div",{staticClass:"lesshow-layout"},[e.lesson&&e.lesson.slides.length?n("Transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.contentsVisible,expression:"contentsVisible"}],staticClass:"lesshow-aside"},[e.lesson?n("LessonContents",{staticClass:"lesshow-contents",attrs:{lesson:e.lesson}}):e._e()],1)]):e._e(),e._v(" "),n("div",{ref:"content",staticClass:"lesshow-content"},[e.lesson?n("RouterView",{on:{completed:function(t){return e.performCompleteSlide(t&&t.message)},next:e.nextSlide,updated:e.resetScroll}}):e._e(),e._v(" "),e.lesson&&!e.lesson.slides.length?n("StatusMessage",{scopedSlots:e._u([{key:"subtext",fn:function(){return[e.isStaff?[n("RouterLink",{attrs:{to:{name:"lesson-edit",params:{lessonId:e.lesson.id}}}},[e._v("Edit")]),e._v("\n\t\t\t\t\t\tthis lesson to add some slides\n\t\t\t\t\t")]:[e._v("\n\t\t\t\t\t\tCheck back later once your instructor has configured this lesson\n\t\t\t\t\t")]]},proxy:!0}],null,!1,1354485369)},[e._v("\n\t\t\t\tThis lesson has no slides\n\n\t\t\t\t")]):e._e(),e._v(" "),e.completedPrereqs?e.passwordPrompt?n("PasswordPrompt",{staticClass:"lesshow-password",attrs:{autoselect:"",disabled:e.loadingLesson,incorrect:e.passwordIncorrect},on:{submit:e.update},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}):e._e():n("StatusMessage",[n("p",[e._v("You must complete the following lessons before you can access this lesson:")]),e._v(" "),n("p",[n("Join",{attrs:{items:e.uncompletedPrereqs},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.item;return[n("RouterLink",{attrs:{to:{name:"lesson-show",params:{lessonId:s.id}}}},[e._v(e._s(s.title))])]}},{key:"separator",fn:function(t){var n=t.index;return[e._v("\n\t\t\t\t\t\t\t"+e._s(n===e.uncompletedPrereqs.length-2?" and ":", ")+"\n\t\t\t\t\t\t")]}}],null,!1,2687863388)})],1)])],1)],1)])}),[],!1,null,null,null));t.default=ce.exports},CSuK:function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("0oug"),n("ma9I"),n("TeQF"),n("fbCW"),n("yq1k"),n("yXV3"),n("4mDm"),n("2B1R"),n("pDQq"),n("qePV"),n("JevA"),n("zKZe"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("4l63"),n("5s+n"),n("TWNs"),n("JfAA"),n("JTJg"),n("PKPk"),n("Rm1S"),n("SYor"),n("FZtP"),n("3bBZ");var s=n("ODXe"),i=n("o0o1"),r=n.n(i),a=(n("ls82"),n("HaE+")),o=n("KQm4"),l=n("rePB"),c=n("sEfC"),u=n.n(c),d=n("BkRI"),h=n.n(d),p=n("Y+p1"),f=n.n(p),m=n("L2JU"),v=n("Pa8A"),b=n("NC1X"),g=n("gD3A"),y=n("o+Su"),w=n("AuRJ"),_=n("6XG0"),k=n("4K9I"),C=n("xtk+"),x=n("5G72"),j=n("4cYw"),O=n("LnxB"),S=n("lVsj"),E=(n("+2oP"),n("Dm8+")),T={components:{EdInput:C.a,EdButton:k.a,ListView:E.a},props:{value:{type:Array,required:!0},placeholder:{type:String,default:""}},data:function(){return{text:"",selectedItem:null}},methods:{addItem:function(){this.text&&(this.$emit("input",[].concat(Object(o.a)(this.value),[this.text])),this.text="")},deleteItem:function(){var e=this.value.slice();e.splice(e.indexOf(this.selectedItem),1),this.$emit("input",e)}}},I=(n("HfRV"),n("KHd+")),D=Object(I.a)(T,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"item-list"},[e.value.length?n("ListView",{staticClass:"item-list-list",attrs:{items:e.value,"selected-item":e.selectedItem},on:{"update:selectedItem":function(t){e.selectedItem=t},"update:selected-item":function(t){e.selectedItem=t}},scopedSlots:e._u([{key:"item",fn:function(t){var s=t.item;return[n("div",{staticClass:"item-list-item"},[e._v(e._s(s))])]}}],null,!1,722298599)}):e._e(),e._v(" "),n("form",{staticClass:"item-list-actions",on:{submit:function(t){return t.preventDefault(),e.addItem(t)}}},[n("EdInput",{staticClass:"item-list-input",attrs:{placeholder:e.placeholder},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),e._v(" "),n("EdButton",{staticClass:"item-list-button",attrs:{disabled:!e.text,type:"submit"},on:{click:e.addItem}},[e._v("Add")]),e._v(" "),n("EdButton",{staticClass:"item-list-button",attrs:{disabled:!e.selectedItem},on:{click:e.deleteItem}},[e._v("Delete")])],1)],1)}),[],!1,null,null,null).exports,P=n("2ejt"),A=n("Cf05"),N={components:{Docs:A.a}},R=Object(I.a)(N,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Docs",[n("p",[e._v("\n\t\t\tThe Ed Jupyter marking system allows you to mark student code on a cell by cell basis. It uses special marker tags in the code cell itself to let the Ed system know that a particular cell requires a particular marking response.\n\t\t")]),e._v(" "),n("p",[e._v("The system "),n("strong",[e._v("only")]),e._v(" supports Python 3.")]),e._v(" "),n("h2",[e._v("Example")]),e._v(" "),n("p",[e._v("\n\t\t\tSuppose we expect a student to create a "),n("code",[e._v("factorial")]),e._v(" function in a particular cell.\n\t\t")]),e._v(" "),n("h3",[e._v("Jupyter cell")]),e._v(" "),n("p",[n("pre",[n("strong",[e._v("### edTest(test_factorial) ###")]),e._v("\n# DO NOT REMOVE THE LINE ABOVE\n\ndef factorial(n):\n   # TODO your solution here\n   pass")])]),e._v(" "),n("h3",[e._v("Testing script")]),e._v(" "),n("p",[n("pre",[e._v("def test_factorial(ctx):\n    factorial = ctx.factorial\n\n    assert factorial(0) == 1, 'Expected factorial(0) == 1'\n    assert factorial(1) == 1, 'Expected factorial(1) == 1'\n    assert factorial(2) == 2, 'Expected factorial(2) == 2'")])]),e._v(" "),n("h2",[e._v("Operation")]),e._v(" "),n("p",[e._v("\n\t\t\tThe Ed marking system executes every single cell of the student's notebook, except for those containing the "),n("code",[e._v("### edSkip ###")]),e._v(" marker.\n\t\t")]),e._v(" "),n("p",[e._v("\n\t\t\tWhen it encounters a cell with a "),n("code",[e._v("### edTest(test_"),n("em",[e._v("name")]),e._v(") ###")]),e._v(" marker, it will invoke the respective function defined in the marking script. The function must have a name that begins with "),n("code",[e._v("test_")]),e._v(" .\n\t\t")]),e._v(" "),n("p",[e._v("\n\t\t\tAn "),n("code",[e._v("EdContext")]),e._v(" object is passed into the marking function and you can use it access objects defined in the student's cell.\n\t\t")]),e._v(" "),n("p",[e._v("\n\t\t\tThe "),n("code",[e._v("EdContext")]),e._v(" object contains the following attributes:\n\t\t\t"),n("ul",[n("li",[n("code",[e._v("source")]),e._v(" - the source code of the student's cell")]),e._v(" "),n("li",[n("code",[e._v("stdout")]),e._v(" - the standard output produced by the cell, e.g. through the "),n("code",[e._v("print()")]),e._v(" function")]),e._v(" "),n("li",[n("code",[e._v("stderr")]),e._v(" - the standard error output produced by the cell")])])]),e._v(" "),n("p",[e._v("\n\t\t\tThe "),n("code",[e._v("EdContext")]),e._v(" object contains the following attributes:\n\t\t\t"),n("ul",[n("li",[n("code",[e._v("ctx.evaluate(str)")]),e._v(" - evaluate the specified expression in the context of the student's cell")]),e._v(" "),n("li",[n("code",[e._v("ctx.execute(str)")]),e._v(" - execute the specified statement in the context of the student's cell")]),e._v(" "),n("li",[n("code",[e._v("ctx.__getattr(str)__")]),e._v(" - same as "),n("code",[e._v("evaluate")]),e._v(", this allows you to directly access a function or variable defined by the student using "),n("code",[e._v("ctx."),n("em",[e._v("name")])])]),e._v(" "),n("li",[n("code",[e._v("ctx.__getitem(str)__")]),e._v(" - same as "),n("code",[e._v("evaluate")]),e._v(", this allows you to directly access a function or variable defined by the student using "),n("code",[e._v("ctx['"),n("em",[e._v("name")]),e._v("']")])])])]),e._v(" "),n("h3",[e._v("Return values")]),e._v(" "),n("p",[e._v("\n\t\t\tIf your "),n("code",[e._v("test_")]),e._v(" function returns "),n("code",[e._v("None")]),e._v(" then the Ed system will assume the test has passed.\n\t\t")]),e._v(" "),n("p",[e._v("\n\t\t\tYou may also return a Python dict with the following fields:\n\t\t\t"),n("pre",[e._v("{\n    ok: bool,       // required\n    passed: bool,   // required\n    name: str,      // optional\n    feedback: str,  // optional\n    score: int,     // optional\n    max_score: int  // optional\n}")])]),e._v(" "),n("p",[e._v("\n\t\t\tYour test function may also return a list of test results to display multiple tests:\n\t\t\t"),n("pre",[e._v("return [\n    {\n        'ok': True,\n        'passed': True,\n        'name': 'Test 1',\n    },\n    {\n        'ok': True,\n        'passed': True,\n        'name': 'Test 2',\n    },\n]")])]),e._v(" "),n("p",[e._v("\n\t\t\tAny unhandled exceptions that occur during the execution of cells, or marking will result the test failing.\n\t\t")]),e._v(" "),n("h3",[e._v("Scoring")]),e._v(" "),n("p",[e._v("\n\t\t\tThe score assigned to the student is "),n("code",[e._v("score")]),e._v(" if "),n("code",[e._v("passed")]),e._v(" and "),n("code",[e._v("zero")]),e._v(" otherwise. If "),n("code",[e._v("max_score")]),e._v(" is non-zero, then "),n("code",[e._v("score")]),e._v(" will always be assigned to the student. This allows you to assign partial marks if the student does not pass the test.\n\t\t")])])}),[],!1,null,null,null).exports,M={components:{Docs:A.a}},L=Object(I.a)(M,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Docs",[n("p",[e._v("\n\t\t\tThe Ed web marking system allows you to test both HTML/CSS elements as well\n\t\t\tas student JavaScript code by creating a JavaScript script.\n\t\t")]),e._v(" "),n("p",[e._v("\n\t\t\tThis marking script will be executed in the context of the student's\n\t\t\tpage and will have access to the student's DOM as well as any global JavaScript objects.\n\t\t")]),e._v(" "),n("p",[e._v("\n\t\t\tThe main interface between your script and the Ed system is the "),n("code",[e._v("edTest")]),e._v(" function.\n\t\t\tThis function is only available to your marking script during its execution.\n\t\t")]),e._v(" "),n("p",[n("pre",[n("code",[e._v("edTest([test_name string], [callback function]) [results object]")])])]),e._v(" "),n("p",[e._v("\n\t\t\tExample:\n\t\t")]),e._v(" "),n("pre",[e._v("// test.js\n\nedTest('Looking for a <title> element with \"My Webpage\" as its content', () => {\n  const elements = document.querySelectorAll('title');\n  if (elements.length === 0) {\n    return {\n      ok: true,\n      passed: false,\n      feedback: 'You do not have any <title> tags!',\n    };\n  }\n\n  if (elements.length > 1) {\n    return {\n      ok: true,\n      passed: false,\n      feedback: 'You have more than one <title> tag!',\n    };\n  }\n\n  if (elements[0].textContent !== 'My Webpage') {\n    return {\n      ok: true,\n      passed: false,\n      feedback: 'Your title does not say \"My Webpage\"',\n      expected: 'My Webpage',\n      observed: elements[0].textContent,\n    };\n  }\n\n  return {\n    ok: true,\n    passed: true,\n    feedback: 'Well done',\n  };\n});")]),e._v(" "),n("p",[e._v("\n\t\t\tTo create more than one test simply make another "),n("code",[e._v("edTest")]),e._v(" call in the same marking script.\n\t\t\tThe format of the results object is as follows:\n\t\t")]),e._v(" "),n("pre",[e._v('{\n  "ok": bool,          // if the marking was successful\n  "passed": bool,      // if the testcase was passed\n  "hidden": bool,      // if the testcase is hidden\n  "private": bool,     // if the testcase is private\n  "score": int,        // score awarded for completion\n  "feedback": string,  // feedback given to the student\n  "expected": string,  // expected value for the diff (optional)\n  "observed": string,  // observed value for the diff (optional)\n  "expand_feedback": bool,  // always expand the feedback (optional)\n}')]),e._v(" "),n("p",[e._v("\n\t\t\tAny code you provide in the marking script is guaranteed to be executed in\n\t\t\tthe context of the student's main HTML file before any of their code may execute.\n\t\t")]),e._v(" "),n("p",[e._v("\n\t\t\tEd will only execute the callback from the "),n("code",[e._v("edTest")]),e._v("\n\t\t\tfunction after the entire page is loaded ("),n("code",[e._v("document.readyState === 'complete'")]),e._v("),\n\t\t\tallowing you inspect all aspects of their DOM.\n\t\t")]),e._v(" "),n("h2",[e._v("Asynchronous Work")]),e._v(" "),n("p",[e._v("\n\t\t\tSometimes code to be tested can contain asynchronous components. This means\n\t\t\tthe test doesn't complete once the testing function returns, and you need to\n\t\t\tlet Ed know when the asynchronous work has been completed.\n\t\t")]),e._v(" "),n("p",[e._v("\n\t\t\tEd supports 3 ways to write asynchronous tests: using a callback,\n\t\t\treturning a "),n("code",[e._v("Promise")]),e._v(" or using an "),n("code",[e._v("async")]),e._v(" function.\n\t\t")]),e._v(" "),n("h3",[e._v("Callback")]),e._v(" "),n("p",[e._v("\n\t\t\tIf the testing function accepts an argument, then the framework will pass\n\t\t\ta function to be invoked when the asynchronous work has been completed.\n\t\t\tYou should call this function with the result of the test.\n\t\t")]),e._v(" "),n("pre",[e._v("edTest('My test', done => {\n  setTimeout(() => {\n\n    // Do some stuff\n\n    done({\n      ok: true,\n      passed: true,\n    });\n  }, 1000);\n});")]),e._v(" "),n("p",[e._v("\n\t\t\tIf an error occurs during the test (analogous to an exception being\n\t\t\tthrown in synchronous code) then you can fail the test safely by calling\n\t\t\t"),n("code",[e._v("done.fail")]),e._v(" instead with the error object or reason.\n\t\t")]),e._v(" "),n("h3",[e._v("Promise")]),e._v(" "),n("p",[e._v("\n\t\t\tYou can return a "),n("a",{attrs:{target:"_blank",rel:"noopener noreferrer",href:"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise"}},[n("code",[e._v("Promise")])]),e._v("\n\t\t\tand Ed will wait until it resolves (or rejects) with the result of the test.\n\t\t")]),e._v(" "),n("pre",[e._v("edTest('My test', () => {\n  return new Promise(resolve => {\n    setTimeout(() => {\n\n      // Do some stuff\n\n      resolve({\n        ok: true,\n        passed: true,\n      });\n    }, 1000);\n  });\n});")]),e._v(" "),n("h3",[e._v("Async Keyword")]),e._v(" "),n("p",[e._v("\n\t\t\tInstead of explicitly returning a "),n("code",[e._v("Promise")]),e._v(" like in the\n\t\t\tprevious example, you can use an "),n("code",[e._v("async")]),e._v(" function instead\n\t\t\t(which is simply syntax sugar for the former).\n\t\t")]),e._v(" "),n("pre",[e._v("edTest('My test', async () => {\n  await doSomeStuff();\n\n  return {\n    ok: true,\n    passed: true,\n  };\n});")]),e._v(" "),n("h3",[e._v("Example")]),e._v(" "),n("p",[e._v("\n\t\t\tThe following code expects the student to execute "),n("code",[e._v("alert('hello')")]),e._v("\n\t\t\tat some point in their code.\n\t\t")]),e._v(" "),n("pre",[e._v("const alertPromise = new Promise(resolve => {\n  window.alert = resolve;\n});\n\nedTest('Call alert with \"hello\"', done => {\n  alertPromise.then(value => {\n    done({\n      hidden: false,\n      private: false,\n      score: 1,\n      ok: true,\n      passed: value === 'hello',\n      expected: 'hello',\n      observed: value,\n    });\n  });\n});")])])}),[],!1,null,null,null).exports,F={components:{Docs:A.a}},B=Object(I.a)(F,(function(){var e=this.$createElement,t=this._self._c||e;return t("Docs",[t("h3",[this._v("JSON Format")]),this._v(" "),t("p",[t("pre",[this._v('{\n  "testcases": [\n    {\n      "name": string,      // name of the testcase\n      "hidden": bool,      // if the testcase is hidden\n      "private": bool,     // if the testcase is private\n      "score": int,        // score awarded for completion\n      "ok": bool,          // if the marking was successful\n      "passed": bool,      // if the testcase was passed\n      "feedback": string,  // feedback given to the student\n      "expected": string,  // expected value for the diff (optional)\n      "observed": string,  // observed value for the diff (optional)\n      "expand_feedback": bool,  // always expand the feedback (optional)\n    },\n    ...\n  ]\n}')])]),this._v(" "),t("h3",[this._v("Sample Output")]),this._v(" "),t("p",[t("pre",[this._v('{\n  "testcases": [\n    {\n      "name": "Test 1",\n      "ok": true,\n      "passed": true,\n      "feedback": "Well done"\n    },\n    {\n      "name": "Test 2",\n      "ok": true,\n      "passed": false,\n      "feedback": "Bad output"\n    },\n    {\n      "name": "Test 3",\n      "ok": true,\n      "passed": false,\n      "feedback": "Check the diff",\n      "observed": "abc",\n      "expected": "abc\\n"\n    },\n    ...\n  ]\n}')])])])}),[],!1,null,null,null).exports,q={components:{Docs:A.a}},$=Object(I.a)(q,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Docs",[n("p",[e._v("Ed allows you to easily leverage Python's "),n("a",{attrs:{rel:"noopener noreferer",href:"https://docs.python.org/3/library/unittest.html"}},[e._v("unittest")]),e._v(" package to test your student's code.")]),e._v(" "),n("h2",[e._v("Factorial example")]),e._v(" "),n("p",[e._v("\n\t\t\tSuppose the student is to implement a "),n("code",[e._v("factorial")]),e._v(" function.\n\t\t")]),e._v(" "),n("h3",[e._v("Scaffold")]),e._v(" "),n("p",[e._v("\n\t\t\tWe create a scaffold for the student in the form of "),n("em",[n("code",[e._v("main.py")])]),e._v(".\n\t\t")]),e._v(" "),n("pre",[e._v("def factorial(n):\n    # TODO\n    return\n\nif __name__ == '__main__':\n    n = input('Enter a number: ')\n    print(f'{n}! = {factorial(int(n))}')")]),e._v(" "),n("h3",[e._v("Test files (simple example)")]),e._v(" "),n("p",[e._v("\n\t\t\tWe put the PyUnit testcase "),n("em",[n("code",[e._v("test.py")])]),e._v(" in the test files.\n\t\t")]),e._v(" "),n("pre",[e._v("import unittest\n\n# Import the student's factorial function from main.py\nfrom main import factorial\n\nclass SimpleTestCase(unittest.TestCase):\n    def testZero(self):\n        n = 0\n        observed = factorial(n)\n        assert observed == 1, f'Expected {n}! = 1; got {observed}'\n\n    def testOne(self):\n        n = 1\n        observed = factorial(n)\n        assert observed == 1, f'Expected {n}! = 1; got {observed}'\n\n    def testThree(self):\n        n = 3\n        observed = factorial(n)\n        assert observed == 6, f'Expected {n}! = 6; got {observed}'")]),e._v(" "),n("h2",[e._v("Hidden and Private testcases")]),e._v(" "),n("p",[e._v("\n\t\t\tWe can mark a testcase as hidden or private by putting "),n("code",[e._v("#hidden")]),e._v("\n\t\t\tor "),n("code",[e._v("#private")]),e._v(" respectively into the function's "),n("code",[e._v("docstring")]),e._v(".\n\t\t")]),e._v(" "),n("pre",[e._v('    def testFive(self):\n        """ #hidden """\n        '),n("em",[e._v("# Including #hidden in the docstring will mark this as a hidden testcase")]),e._v("\n        n = 5\n        observed = factorial(n)\n        assert observed == 120, f'Expected {n}! = 120; got {observed}'")]),e._v(" "),n("h2",[e._v("Naming testcases")]),e._v(" "),n("p",[e._v("\n\t\t\tThe function name is used as the name for the testcase displayed to the student.\n\t\t\tYou can change the name by putting "),n("code",[e._v("#name("),n("em",[e._v("name")]),e._v(")")]),e._v(" into the function's "),n("code",[e._v("docstring")]),e._v(".\n\t\t")]),e._v(" "),n("pre",[e._v('    def testSix(self):\n        """ #name(Test 6) """\n        n = 6\n        observed = factorial(n)\n        assert observed == 120, f\'Expected {n}! = 120; got {observed}\'')]),e._v(" "),n("p",[e._v("\n\t\t\tYou can include "),n("code",[e._v("\\")]),e._v(" and "),n("code",[e._v("(")]),e._v(" into the name by escaping it with "),n("code",[e._v("\\")])]),e._v(" "),n("pre",[e._v('    def testSixEscape(self):\n        """ #name(Test factorial(6\\)) """\n        n = 6\n        observed = factorial(n)\n        assert observed == 120, f\'Expected {n}! = 120; got {observed}\'')]),e._v(" "),n("h2",[e._v("Per-testcase Scores")]),e._v(" "),n("p",[e._v("By default, each testcase is worth one point.")]),e._v(" "),n("p",[e._v("You can set a custom scoring scheme by putting "),n("code",[e._v("#score(x)")]),e._v(" into the "),n("code",[e._v("docstring")]),e._v(". You "),n("em",[e._v("must")]),e._v(' tick the "Per-testcase Scores" option for this to be applied.')]),e._v(" "),n("pre",[e._v('    def testTen(self):\n        """ #hidden #score(2) """\n        '),n("em",[e._v("# This test is now both hidden and worth 2 points")]),e._v("\n        n = 10\n        observed = factorial(n)\n        assert observed == 3628800, f'Expected {n}! = 3628800; got {observed}'")])])}),[],!1,null,null,null).exports,U={components:{Docs:A.a}},z=Object(I.a)(U,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Docs",[n("p",[e._v("Ed allows you to use "),n("a",{attrs:{rel:"noopener noreferer",href:"https://junit.org/junit5/"}},[e._v("JUnit 5")]),e._v(" to test your students code. JUnit 5 is backwards compatible with JUnit 4 and JUnit 3 testcases.")]),e._v(" "),n("h2",[e._v("Factorial example")]),e._v(" "),n("p",[e._v("\n\t\t\tSuppose the student is to implement a "),n("code",[e._v("factorial")]),e._v(" function.\n\t\t")]),e._v(" "),n("h3",[e._v("Scaffold")]),e._v(" "),n("p",[e._v("\n\t\t\tWe create a scaffold for the student in the form of "),n("em",[n("code",[e._v("Factorial.java")])]),e._v(".\n\t\t")]),e._v(" "),n("pre",[e._v("public class Factorial {\n    public static int calc(int n) {\n        // TODO:\n        return 0;\n    }\n}\n")]),e._v(" "),n("h3",[e._v("Test files (simple example)")]),e._v(" "),n("p",[e._v("\n\t\t\tWe put the JUnit testcase "),n("em",[n("code",[e._v("FactorialTest.java")])]),e._v(" in the test files.\n\t\t\tWe also set "),n("em",[n("code",[e._v("FactorialTest.java")])]),e._v(" as the "),n("em",[e._v("Test class file name")]),e._v(".\n\t\t")]),e._v(" "),n("pre",[e._v("import org.junit.jupiter.api.*;\nimport static org.junit.jupiter.api.Assertions.*;\n\npublic class FactorialTest {\n    @Test\n    void testBaseCase() {\n        assertEquals(Factorial.calc(0), 1);\n    }\n\n    @Test\n    void test6() {\n        assertEquals(Factorial.calc(6), 720);\n    }\n}")]),e._v(" "),n("h2",[e._v("Hidden and Private testcases")]),e._v(" "),n("p",[e._v("\n\t\t\tWe can mark a testcase as hidden or private by putting "),n("code",[e._v("#hidden")]),e._v("\n\t\t\tor "),n("code",[e._v("#private")]),e._v(" respectively into the function's "),n("code",[e._v("javadoc")]),e._v(" string.\n\t\t")]),e._v(" "),n("pre",[e._v("    @Test\n    void test1() {\n        /** #hidden */\n        assertEquals(Factorial.calc(6), 720);\n    }")]),e._v(" "),n("p",[e._v("\n\t\t\tYou can also do this with the JUnit 5 "),n("code",[e._v("@Tag")]),e._v(" annotation.\n\t\t")]),e._v(" "),n("pre",[e._v('    @Test\n    @Tag("hidden")\n    void test1() {\n        assertEquals(Factorial.calc(6), 720);\n    }')]),e._v(" "),n("h2",[e._v("Naming testcases")]),e._v(" "),n("p",[e._v("\n\t\t\tThe function name is used as the name for the testcase displayed to the student.\n\t\t\tYou can change the name by putting "),n("code",[e._v("#name("),n("em",[e._v("name")]),e._v(")")]),e._v(" into the function's "),n("code",[e._v("docstring")]),e._v(".\n\t\t")]),e._v(" "),n("pre",[e._v("    @Test\n    void test7() {\n        /** #name(Test 7) */\n        assertEquals(Factorial.calc(7), 5040);\n    }")]),e._v(" "),n("p",[e._v("\n\t\t\tYou can include "),n("code",[e._v("\\")]),e._v(" and "),n("code",[e._v("(")]),e._v(" into the name by escaping it with "),n("code",[e._v("\\")])]),e._v(" "),n("p",[e._v("\n\t\t\tYou can also do this with the JUnit 5 "),n("code",[e._v("@DisplayName")]),e._v(" annotation.\n\t\t")]),e._v(" "),n("pre",[e._v('    @Test\n    @DisplayName("Test 7")\n    void test7() {\n        assertEquals(Factorial.calc(7), 5040);\n    }')]),e._v(" "),n("h2",[e._v("Per-testcase Scores")]),e._v(" "),n("p",[e._v("By default, each testcase is worth one point.")]),e._v(" "),n("p",[e._v("You can set a custom scoring scheme by putting "),n("code",[e._v("#score(x)")]),e._v(" into the "),n("code",[e._v("docstring")]),e._v(". You "),n("em",[e._v("must")]),e._v(' tick the "Per-testcase Scores" option for this to be applied.')]),e._v(" "),n("pre",[e._v("    @Test\n    void test10() {\n        /** #score(2) #name(Test 10) */\n        // This test is now worth 2 points\n        assertEquals(Factorial.calc(10), 3628800);\n    }")]),e._v(" "),n("p",[e._v("You can also use the JUnit 5 "),n("code",[e._v("@Tag")]),e._v(" to customise scores.")]),e._v(" "),n("pre",[e._v('    @Test\n    @Tag("score:2")\n    @DisplayName("Test 10")\n    void test10() {\n        // This test is now worth 2 points\n        assertEquals(Factorial.calc(10), 3628800);\n    }')]),e._v(" "),n("h2",[e._v("Parameterised tests")]),e._v(" "),n("p",[e._v("\n\t\t\tJUnit 5 allows you to create "),n("a",{attrs:{rel:"noopener noreferer",href:"https://junit.org/junit5/docs/current/user-guide/#writing-tests-parameterized-tests"}},[e._v("parameterised tests")]),e._v(" using the "),n("code",[e._v("@ParameterizedTest")]),e._v(" annotation.\n\t\t")]),e._v(" "),n("pre",[e._v("import org.junit.jupiter.params.ParameterizedTest;\nimport org.junit.jupiter.params.provider.ValueSource;")]),e._v(" "),n("pre",[e._v('    private int solution(int n) {\n        if (n == 0) {\n            return 1;\n        }\n\n        return n * solution(n - 1);\n    }\n\n    @ParameterizedTest\n    @DisplayName("Factorial test")\n    @ValueSource(ints = { 0, 1, 2, 3, 4, 5, 6, 7 })\n    void testFactorial(int x) {\n        assertEquals(Factorial.calc(x), solution(x));\n    }')]),e._v(" "),n("h2",[e._v("Repeated tests")]),e._v(" "),n("p",[e._v("\n\t\t\tJUnit 5 allows you to "),n("a",{attrs:{rel:"noopener noreferer",href:"https://junit.org/junit5/docs/current/user-guide/#writing-tests-repeated-tests"}},[e._v("repeat a test")]),e._v(" using the "),n("code",[e._v("@RepeatedTest")]),e._v(" annotation.\n\t\t")]),e._v(" "),n("pre",[e._v("import org.junit.jupiter.params.RepeatedTest;")]),e._v(" "),n("pre",[e._v('    @RepeatedTest(2)\n    @DisplayName("Factorial repeat")\n    void testFactorial() {\n        assertEquals(Factorial.calc(1), 1);\n    }')])])}),[],!1,null,null,null).exports,V=(n("UxlC"),n("9Arg")),H=n("WmPt"),W=n("LwAd"),Q={components:{Icon:H.a,EdInput:C.a,ReorderContainer:W.a,EdCheck:_.a},props:{loading:{type:Boolean,default:!1},perTestcaseScores:{type:Boolean,default:!1},testcases:{type:Array,required:!0},selectedTestcase:{type:Object,default:null},commandPlaceholder:{type:String,default:""},testMethod:{type:String,required:!0},checkType:{type:String,required:!0}},computed:{timeLimit:{get:function(){return String(Math.floor(this.selectedTestcase.run_limit.cpu_time)||"")},set:function(e){e=Math.max(0,Math.min(3e4,parseInt(e))),isFinite(e)&&(this.selectedTestcase.run_limit.cpu_time=e,this.selectedTestcase.run_limit.wall_time=e)}}},watch:{selectedTest:function(){if(this.$refs.testList){var e=this.$refs.testList.$el.querySelector(".selected");e&&V.D(this.$refs.testList.$el,e)}}},methods:{isTestcaseSelected:function(e){return this.selectedTestcase===e},testcaseAttrs:function(e){var t=[];return e.hidden&&t.push("hidden"),e.skip&&t.push("skipped"),t.length?"(".concat(t.join(", "),")"):""},selectTestcase:function(e){this.$emit("selected-testcase",e)},selectTestcaseInDirection:function(e){var t=this.testcases.indexOf(this.selectedTestcase);-1!==t&&(t+=e)>=0&&t<this.testcases.length&&(this.selectedTestcase=this.testcases[t])},newTestcase:function(){this.$emit("new-testcase")},deleteTestcase:function(e){this.$emit("delete-testcase",e)},onTestInputPathBlur:function(){var e=this.selectedTestcase.stdin_path;this.selectedTestcase.checks[0].expect_path||(this.selectedTestcase.checks[0].expect_path=e.replace(/\.in$/,".out"))}}},K=(n("F3+b"),Object(I.a)(Q,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"challenge-editor-testcases-gui"},[n("div",{staticClass:"chetg-test-list-layout"},[n("div",{staticClass:"chetg-test-list-header"},[n("div",{staticClass:"chetg-test-list-header-title"},[e._v("Testcases")]),e._v(" "),n("div",{staticClass:"chetg-test-list-header-actions"},[n("Icon",{staticClass:"chetg-test-list-header-action",attrs:{icon:"plus",title:"New Testcase"},on:{click:e.newTestcase}})],1)]),e._v(" "),n("ReorderContainer",{ref:"testList",staticClass:"chetg-test-list",attrs:{orientation:"vertical",items:e.testcases,tabindex:"-1"},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.selectTestcaseInDirection(-1))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.selectTestcaseInDirection(1))}]}},e._l(e.testcases,(function(t,s){return n("div",{key:s,staticClass:"chetg-test-list-item",class:{selected:e.isTestcaseSelected(t)},attrs:{title:t.name,draggable:"true"},on:{click:function(n){return e.selectTestcase(t)}}},[n("div",{staticClass:"column-number"},[e._v(e._s(s+1))]),e._v(" "),n("div",{staticClass:"column-name"},[e._v(e._s(e.testcaseAttrs(t))+" "+e._s(t.name))]),e._v(" "),n("div",{staticClass:"column-actions"},[n("Icon",{attrs:{icon:"cross",title:"Delete Testcase"},on:{click:function(n){return e.deleteTestcase(t)}}})],1)])})),0)],1),e._v(" "),e.selectedTestcase?n("div",{staticClass:"chetg-test"},[n("div",{staticClass:"chetg-field"},[n("label",[e._v("Name")]),e._v(" "),n("EdInput",{attrs:{disabled:e.loading,placeholder:"Untitled test"},model:{value:e.selectedTestcase.name,callback:function(t){e.$set(e.selectedTestcase,"name",t)},expression:"selectedTestcase.name"}})],1),e._v(" "),"code"===e.testMethod||"script"===e.testMethod?[n("div",{staticClass:"chetg-field"},[n("label",[e._v("Command")]),e._v(" "),n("EdInput",{staticClass:"chetg-input-code",attrs:{disabled:e.loading,placeholder:e.commandPlaceholder},model:{value:e.selectedTestcase.run_command,callback:function(t){e.$set(e.selectedTestcase,"run_command",t)},expression:"selectedTestcase.run_command"}})],1),e._v(" "),"code"===e.testMethod?[n("div",{staticClass:"chetg-field"},[n("label",[e._v("Expected input")]),e._v(" "),n("EdInput",{attrs:{disabled:e.loading,placeholder:"File path"},on:{blur:e.onTestInputPathBlur},model:{value:e.selectedTestcase.stdin_path,callback:function(t){e.$set(e.selectedTestcase,"stdin_path",t)},expression:"selectedTestcase.stdin_path"}})],1),e._v(" "),n("div",{staticClass:"chetg-field"},[n("label",[e._v("Expected output")]),e._v(" "),n("EdInput",{attrs:{disabled:e.loading,placeholder:"File path"},model:{value:e.selectedTestcase.checks[0].expect_path,callback:function(t){e.$set(e.selectedTestcase.checks[0],"expect_path",t)},expression:"selectedTestcase.checks[0].expect_path"}})],1)]:e._e()]:e._e(),e._v(" "),"postgres"===e.testMethod?[n("div",{staticClass:"chetg-field"},[n("label",[e._v("Schema")]),e._v(" "),n("EdInput",{staticClass:"chetg-input-code",attrs:{disabled:e.loading,placeholder:"File path"},model:{value:e.selectedTestcase.schema_path,callback:function(t){e.$set(e.selectedTestcase,"schema_path",t)},expression:"selectedTestcase.schema_path"}})],1),e._v(" "),"database"===e.checkType?n("div",{staticClass:"chetg-field"},[n("label",[e._v("Check Query")]),e._v(" "),n("EdInput",{staticClass:"chetg-input-code",attrs:{disabled:e.loading,placeholder:"File path"},model:{value:e.selectedTestcase.check_query_path,callback:function(t){e.$set(e.selectedTestcase,"check_query_path",t)},expression:"selectedTestcase.check_query_path"}})],1):e._e()]:e._e(),e._v(" "),n("div",{staticClass:"chetg-field"},[n("label",[e._v("Time limit (ms)")]),e._v(" "),n("EdInput",{attrs:{disabled:e.loading,value:e.timeLimit},nativeOn:{blur:function(t){e.timeLimit=t.target.value}}})],1),e._v(" "),e.perTestcaseScores?n("div",{staticClass:"chetg-field"},[n("label",[e._v("Score")]),e._v(" "),n("EdInput",{attrs:{disabled:e.loading},model:{value:e.selectedTestcase.score,callback:function(t){e.$set(e.selectedTestcase,"score",e._n(t))},expression:"selectedTestcase.score"}})],1):e._e(),e._v(" "),n("h3",[e._v("Settings")]),e._v(" "),n("p",[n("EdCheck",{attrs:{disabled:e.loading,label:"Hidden",description:"Testcase name and result will not shown to students"},model:{value:e.selectedTestcase.hidden,callback:function(t){e.$set(e.selectedTestcase,"hidden",t)},expression:"selectedTestcase.hidden"}})],1),e._v(" "),n("p",[n("EdCheck",{attrs:{disabled:e.loading,label:"Skip",description:"Testcase will be skipped for students"},model:{value:e.selectedTestcase.skip,callback:function(t){e.$set(e.selectedTestcase,"skip",t)},expression:"selectedTestcase.skip"}})],1)],2):e._e()])}),[],!1,null,null,null).exports),Y={components:{Codemirror:n("q6QK").a},props:{testcases:{type:Array,required:!0}},data:function(){return{json:null}},watch:{testcases:{immediate:!0,handler:"updateJson"},json:"updateTestcases"},methods:{updateJson:function(){this.json=JSON.stringify(this.testcases,null,"\t")},updateTestcases:function(){var e;try{e=JSON.parse(this.json)}catch(t){return}this.$emit("update",e)}}},G=(n("v5sb"),Object(I.a)(Y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"challenge-editor-testcases-json"},[n("Codemirror",{staticClass:"chetj-test-editor",attrs:{filename:".json",placeholder:"Paste testcases JSON here"},model:{value:e.json,callback:function(t){e.json=t},expression:"json"}})],1)}),[],!1,null,null,null).exports),X={directives:{Tooltip:v.a},components:{Icon:H.a,EdButton:k.a,EdInput:C.a},props:{value:{type:null,required:!0,validator:function(e){return null==e||Array.isArray(e)}}},data:function(){return{criteria:[]}},watch:{value:{immediate:!0,deep:!0,handler:function(e){f()(e,this.criteria)||(this.criteria=Array.isArray(e)?h()(e):[])}},criteria:{deep:!0,handler:function(e){this.$emit("input",h()(e))}}},methods:{addCriterion:function(){var e=this;this.criteria.push({name:"",levels:[{mark:0,description:""}]}),this.$nextTick((function(){var t=e.$el.querySelectorAll(".red-criterion");t[t.length-1].querySelector(".red-field > input").select()}))},deleteCriterion:function(e){this.criteria.splice(this.criteria.indexOf(e),1)},addLevel:function(e){var t=this;e.levels.push({mark:0,description:""});var n=this.criteria.indexOf(e);this.$nextTick((function(){t.$el.querySelectorAll("table.red-levels")[n].querySelector("tbody > tr:last-child > td.red-level-mark > input").select()}))},deleteLevel:function(e,t){e.levels.splice(e.levels.indexOf(t),1)}}},J=(n("ca2K"),Object(I.a)(X,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"rubric-editor"},[e._l(e.criteria,(function(t,s){return n("div",{key:s,staticClass:"red-criterion"},[n("div",{staticClass:"red-field"},[n("label",[e._v("Criterion")]),e._v(" "),n("EdInput",{attrs:{placeholder:"Code quality, use of comments, sophistication, etc"},model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"criterion.name"}})],1),e._v(" "),n("table",{staticClass:"red-levels"},[e._m(0,!0),e._v(" "),n("tbody",e._l(t.levels,(function(s,i){return n("tr",{key:i},[n("td",{staticClass:"red-level-mark"},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:s.mark,expression:"level.mark",modifiers:{number:!0}}],staticClass:"red-input-plain red-input-mark",attrs:{spellcheck:"false"},domProps:{value:s.mark},on:{input:function(t){t.target.composing||e.$set(s,"mark",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]),e._v(" "),n("td",{staticClass:"red-level-description"},[n("input",{directives:[{name:"model",rawName:"v-model",value:s.description,expression:"level.description"}],staticClass:"red-input-plain",attrs:{placeholder:"Excellent, good, poor, etc"},domProps:{value:s.description},on:{input:function(t){t.target.composing||e.$set(s,"description",t.target.value)}}})]),e._v(" "),n("td",{staticClass:"red-level-actions"},[n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Delete Level",expression:"'Delete Level'"}],staticClass:"red-action",on:{click:function(n){return e.deleteLevel(t,s)}}},[n("Icon",{attrs:{icon:"cross"}})],1)])])})),0)]),e._v(" "),n("div",{staticClass:"red-criterion-actions"},[n("EdButton",{on:{click:function(n){return e.addLevel(t)}}},[e._v("Add Level")]),e._v(" "),n("EdButton",{on:{click:function(n){return e.deleteCriterion(t)}}},[e._v("Delete Criterion")])],1)])})),e._v(" "),n("EdButton",{on:{click:e.addCriterion}},[e._v("Add Criterion")])],2)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",{staticClass:"red-level-mark"},[this._v("Mark")]),this._v(" "),t("th",{staticClass:"red-level-description"},[this._v("Description")]),this._v(" "),t("th",{staticClass:"red-level-actions"})])])}],!1,null,null,null).exports),Z=n("hSdx"),ee=n("/Yj0"),te=n("5/Cn");function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ie(e){var t,n=function(e,t,n){return t.every((function(s){return e[s].box_limit[n]===e[t[0]].box_limit[n]}))?e[t[0]].box_limit[n]:null},s=function(e,t,n,s){var i=!0,r=!1,a=void 0;try{for(var o,l=t[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){e[o.value].box_limit[n]=s}}catch(c){r=!0,a=c}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}},i=["standard","unit","custom","postgres"].map((function(t){return"".concat(e,"_").concat(t)}));return t={},Object(l.a)(t,e+"Preset",{get:function(){return n(this.model.tickets,i,"preset")},set:function(e){s(this.model.tickets,i,"preset",e)}}),Object(l.a)(t,e+"CpuTime",{get:function(){return n(this.model.tickets,i,"cpu_time")},set:function(e){s(this.model.tickets,i,"cpu_time",e)}}),Object(l.a)(t,e+"WallTime",{get:function(){return n(this.model.tickets,i,"wall_time")},set:function(e){s(this.model.tickets,i,"wall_time",e)}}),t}var re,ae,oe,le,ce={name:"ChallengeEditor",directives:{Tooltip:v.a},components:{Spinner:b.a,Amber:g.a,Workspace:y.default,DateTimeField:w.a,EdCheck:_.a,EdButton:k.a,EdInput:C.a,EdTextarea:x.a,EdSelect:j.a,Message:O.a,Join:S.a,ItemList:D,ContentDialog:P.a,DocsJupyter:R,DocsWeb:L,DocsCustom:B,DocsPyunit:$,DocsJunit:z,EditorTestcasesGui:K,EditorTestcasesJson:G,RubricEditor:J},inject:["challengeApi","labApi"],props:{challengeId:{type:Number,required:!0}},data:function(){return{loadingChallenge:!1,savingChallenge:!1,challenge:null,model:null,selectedTestcase:null,lineErrors:0,paths:{schema:"",attempt:"",solution:""},postgresTestMethod:null,postgresEngine:"",services:{database:""},passwordVisible:!1,guiTestcasesEditor:!0,jupyterDocsVisible:!1,customDocsVisible:!1,webDocsVisible:!1,junitDocsVisible:!1,pyunitDocsVisible:!1,labCategories:[],visibleLabNames:[],visibleLabNamesError:null,visibleLabNamesLoading:!1}},computed:se({},Object(m.e)(["course","workspaceTheme"]),{},Object(m.c)(["isUserAdmin"]),{loading:function(){return this.loadingChallenge||this.savingChallenge},type:function(){return this.$route.name.match(/^assessment/)?"assessment":this.$route.name.match(/^challenge/)?"challenge":"lesson"},typePlural:function(){return this.type+"s"},typeText:function(){return"lesson"===this.type?"exercise":this.type},testMethods:function(){return[{type:"code",label:"Input/Output"},{type:"pyunit",label:"PyUnit"}].concat(Object(o.a)(this.challenge&&this.challenge.settings&&"jupyter"===this.challenge.settings.chrome?[{type:"jupyter",label:"Jupyter"}]:[]),[{type:"unit",label:"JUnit"},{type:"swift",label:"Swift"},{type:"rspec",label:"RSpec"},{type:"testthat",label:"R testthat"},{type:"jest",label:"Jest"},{type:"web",label:"Web"},{type:"script",label:"Script"},{type:"custom",label:"Custom"},{type:"none",label:"None"}])},testChrome:function(){return this.isTestMethodSelected("jupyter","custom","pyunit")?"":this.challenge.settings.chrome},tests:{get:function(){if(!this.model)return[];switch(this.model.type){case"postgres":return this.model.tickets.mark_postgres.testcases;default:return this.model.tickets.mark_standard.testcases}},set:function(e){if(this.model)switch(this.model.type){case"postgres":this.model.tickets.mark_postgres.testcases=e;break;default:this.model.tickets.mark_standard.testcases=e}}},timeLimit:{get:function(){var e,t=this.model.tickets;switch(this.model.type){case"junit":case"swift":e=t.mark_unit.run_limit.wall_time;break;case"custom":e=t.mark_custom.run_limit.wall_time}return null==e&&(e=null!=t.mark_unit.run_limit.wall_time?t.mark_unit.run_limit.wall_time:null!=t.mark_custom.run_limit.wall_time?t.mark_custom.run_limit.wall_time:null),e},set:function(e){(e=e.trim())?(e=parseInt(e),e=isFinite(e)?e:0,e=Math.min(3e5,Math.max(0,0|e))):e=null;var t=this.model.tickets;t.mark_unit.run_limit.wall_time=e,t.mark_unit.run_limit.cpu_time=e,t.mark_custom.run_limit.wall_time=e,t.mark_custom.run_limit.cpu_time=e}}},ie("run"),{},ie("mark"),{featuresLabel:function(){var e=this.model.features,t=[];return e.run&&t.push("Run"),e.mark&&t.push("Mark"),e.connect&&t.push("Connect"),e.network&&t.push("Network"),e.terminal&&t.push("Terminal"),e.arguments&&t.push("Arguments"),e.feedback&&t.push("Feedback"),t.join(", ")},testMethodLabel:function(){var e=this;return this.testMethods.find((function(t){return t.type===e.model.type})).label},dirty:function(){return this.challenge&&!f()(this.challenge,this.model)},pointsEnabled:function(){return"challenge"===this.type}}),watch:{challengeId:"update",tests:function(){this.tests&&1===this.tests.length?this.selectedTestcase=this.tests[0]:this.tests&&0!==this.tests.length||(this.selectedTestcase=null)},"model.lab_category":"updateVisibleLabs","model.lab_name_regex":"updateVisibleLabs"},mounted:function(){this.update()},destroyed:function(){window.removeEventListener("scroll",this.onScroll)},methods:{pluralize:Z.pluralize,setChallengeData:function(e){for(var t=h()(e),n=0,s=["run","mark"];n<s.length;n++)for(var i=s[n],r=0,a=["standard","unit","custom","postgres"];r<a.length;r++){var o=i+"_"+a[r];t.tickets[o]=t.tickets[o]||{},t.tickets[o].box_limit=t.tickets[o].box_limit||{},t.tickets[o].box_limit=se({preset:"",cpu_time:0,wall_time:0},t.tickets[o].box_limit)}if("postgres"===t.type)t.tickets.mark_postgres||(t.tickets.mark_postgres={attempt_path:"",solution_path:"",ignore_row_order:!0,ignore_column_order:!0,ignore_column_names:!0,run_limit:{}}),t.tickets.run_postgres||(t.tickets.run_postgres={run_limit:{}}),this.paths.attempt=t.tickets.run_postgres.attempt_path,this.paths.schema=t.tickets.run_postgres.schema_path,this.paths.solution=t.tickets.mark_postgres.solution_path,this.postgresTestMethod=t.tickets.mark_postgres.check_database?"database":"select",this.postgresEngine=t.tickets.mark_postgres.type||"postgres";else{t.features=se({treeview:!0},t.features),t.tickets.mark_standard=se({build_command:"",testcases:[],run_limit:{},easy:!1,overlay:!1,mark_all:!1},t.tickets.mark_standard),null==t.tickets.mark_standard.run_limit.pty&&(t.tickets.mark_standard.run_limit.pty=!1);var l=!0,c=!1,u=void 0;try{for(var d,p=t.tickets.mark_standard.testcases[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var f=d.value;f.run_limit.cpu_time=f.run_limit.cpu_time||null,f.run_limit.wall_time=f.run_limit.wall_time||null}}catch(E){c=!0,u=E}finally{try{l||null==p.return||p.return()}finally{if(c)throw u}}t.tickets.run_standard=se({build_command:"",run_command:"",run_limit:{}},t.tickets.run_standard),null==t.tickets.run_standard.run_limit.pty&&(t.tickets.run_standard.run_limit.pty=!0),t.tickets.mark_unit=se({build_command:"",run_limit:{wall_time:void 0,cpu_time:void 0}},t.tickets.mark_unit),null==t.tickets.mark_unit.run_limit.pty&&(t.tickets.mark_unit.run_limit.pty=!1);var m=!0,v=!1,b=void 0;try{for(var g,y=t.tickets.mark_standard.testcases[Symbol.iterator]();!(m=(g=y.next()).done);m=!0){var w=g.value;w.run_command===t.tickets.run_standard.run_command&&(w.run_command=null)}}catch(E){v=!0,b=E}finally{try{m||null==y.return||y.return()}finally{if(v)throw b}}if(t.tickets.mark_standard.testcases.length>0){var _=t.tickets.mark_standard.testcases[0].checks[0];this.lineErrors=parseInt(_.acceptable_line_errors)||0}t.tickets.mark_custom=se({build_command:"",run_command:"",run_limit:{wall_time:void 0,cpu_time:void 0}},t.tickets.mark_custom),null==t.tickets.mark_custom.run_limit.pty&&(t.tickets.mark_custom.run_limit.pty=!1);var k=!0,C=!1,x=void 0;try{for(var j,O=(t.settings.services||[])[Symbol.iterator]();!(k=(j=O.next()).done);k=!0){var S=j.value;"postgres"!==S.type&&"mariadb"!==S.type||(this.services.database=S.type)}}catch(E){C=!0,x=E}finally{try{k||null==O.return||O.return()}finally{if(C)throw x}}}this.challenge=Z.deepFreeze(h()(t)),this.model=t,this.tests&&(this.selectedTestcase=this.tests[0])},isTestMethodSelected:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(this.model.type)},selectTestMethod:(le=Object(a.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isTestMethodSelected(t)){e.next=2;break}return e.abrupt("return");case 2:if(e.t0=this.tests.length,!e.t0){e.next=7;break}return e.next=6,te.b({title:"Change test method",text:"Changing the test method will delete all existing tests. Proceed?",icon:"warning",primaryAction:"Change Test Method",secondaryAction:"Cancel"});case 6:e.t0=!e.sent;case 7:if(!e.t0){e.next=9;break}return e.abrupt("return");case 9:this.tests=[],this.model.type=t;case 11:case"end":return e.stop()}}),e,this)}))),function(e){return le.apply(this,arguments)}),onSelectedTestcase:function(e){this.selectedTestcase=e},onTestcasesUpdate:function(e){this.tests=e},newTestcase:function(){var e={name:"Untitled test",skip:!1,hidden:!1};this.isTestMethodSelected("postgres")?Object.assign(e,{run_limit:{cpu_time:0,wall_time:0}}):(Object.assign(e,{run_command:"",run_limit:{cpu_time:0,wall_time:0},checks:[]}),this.isTestMethodSelected("code")?Object.assign(e,{stdin_path:"",checks:[{type:"check_diff",expect_path:"",source:{type:"source_mixed"}}]}):this.isTestMethodSelected("script")&&(e.checks.push({type:"check_status"}),this.tests.length>0&&(e.run_command=this.tests[this.tests.length-1].run_command))),this.tests.push(e),this.selectedTestcase=e},deleteTestcase:(oe=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te.d({title:'Delete testcase "'.concat(t.name,'"?'),icon:"warning",primaryAction:"Delete",secondaryAction:"Cancel"});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:-1!==(n=this.tests.indexOf(t))&&(this.tests.splice(n,1),this.selectedTestcase===t&&(n=Math.min(n,this.tests.length-1),this.selectedTestcase=n>=0?this.tests[n]:null));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return oe.apply(this,arguments)}),save:(ae=Object(a.a)(r.a.mark((function e(){var t,n,i,a,o,l,c,u,d,p,f,m,v,b,g;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.savingChallenge){e.next=2;break}return e.abrupt("return");case 2:if((t=h()(this.model)).points=Math.max(0,Math.floor(t.points))||0,t.settings.points.loss_amount=Math.max(0,0|t.settings.points.loss_amount)||0,t.settings.points.loss_every=Math.max(1,0|t.settings.points.loss_every)||1,t.settings.points.loss_threshold=0|t.settings.points.loss_threshold||0,""===this.services.database?t.settings.services=[]:t.settings.services=[{type:this.services.database}],"postgres"!==t.type){e.next=21;break}t.tickets.mark_postgres.attempt_path=this.paths.attempt,t.tickets.mark_postgres.solution_path=this.paths.solution,t.tickets.mark_postgres.check_select="select"===this.postgresTestMethod,t.tickets.mark_postgres.check_database="database"===this.postgresTestMethod,t.tickets.mark_postgres.type=this.postgresEngine,this.tests&&0!==this.tests.length||(t.tickets.mark_postgres.testcases=[{schema_path:this.paths.schema}]),t.tickets.run_postgres.attempt_path=this.paths.attempt,t.tickets.run_postgres.schema_path=this.paths.schema,t.tickets.run_postgres.type=this.postgresEngine,""===t.settings.terminal_command&&("postgres"===t.tickets.run_postgres.type?t.settings.terminal_command="psql":"mariadb"===t.tickets.run_postgres.type&&(t.settings.terminal_command="mysql")),e.next=48;break;case 21:for(n=t.tickets.run_standard.build_command,i=t.tickets.run_standard.run_command,t.tickets.mark_standard.build_command=n,t.tickets.mark_unit.build_command=n,t.tickets.mark_custom.build_command=n,t.settings.build_command=n,t.settings.run_command=i,a=!0,o=!1,l=void 0,e.prev=31,c=t.tickets.mark_standard.testcases[Symbol.iterator]();!(a=(u=c.next()).done);a=!0)(d=u.value).run_command=d.run_command||t.tickets.run_standard.run_command,d.checks[0].acceptable_line_errors=parseInt(this.lineErrors)||0;e.next=39;break;case 35:e.prev=35,e.t0=e.catch(31),o=!0,l=e.t0;case 39:e.prev=39,e.prev=40,a||null==c.return||c.return();case 42:if(e.prev=42,!o){e.next=45;break}throw l;case 45:return e.finish(42);case 46:return e.finish(39);case 47:"script"===t.type&&(t.tickets.mark_standard.overlay=!0);case 48:if("lesson"!==this.type){e.next=55;break}delete t.title,delete t.category,delete t.number,delete t.points,e.next=65;break;case 55:if(t.title=(t.title||"").trim(),t.category=(t.category||"").trim(),t.number=Number.parseInt(t.number),t.points=Number.parseInt(t.points),isNaN(t.number)&&delete t.number,isNaN(t.points)&&delete t.points,t.title){e.next=65;break}throw ee.b({type:"error",title:"Title cannot be empty"}),this.$refs.title.$el.focus(),"invalid-input";case 65:return this.savingChallenge=!0,e.prev=66,e.prev=67,e.next=70,Promise.all([this.$refs.scaffold&&this.$refs.scaffold.commit(),this.$refs.solution&&this.$refs.solution.commit(),this.$refs.testbase&&this.$refs.testbase.commit()]);case 70:v=e.sent,b=Object(s.a)(v,3),p=b[0],f=b[1],m=b[2],e.next=83;break;case 77:if(e.prev=77,e.t1=e.catch(67),"disconnected"!==e.t1){e.next=82;break}throw ee.b({type:"error",title:"Reconnect any disconnected workspaces and try again"}),"workspace-disconnected";case 82:throw e.t1;case 83:return t.scaffold_hash=p,t.solution_hash=f,t.testbase_hash=m,e.next=88,this.challengeApi.updateChallenge(t);case 88:g=e.sent,this.setChallengeData(g);case 90:return e.prev=90,this.savingChallenge=!1,e.finish(90);case 93:case"end":return e.stop()}}),e,this,[[31,35,39,47],[40,,42,46],[66,,90,93],[67,77]])}))),function(){return ae.apply(this,arguments)}),onScroll:function(){if(this.$refs.sidebar){var e;if(window.pageYOffset>=document.body.scrollHeight-window.innerHeight)e=this.headings[this.headings.length-1];else{e=this.headings[0];for(var t=1;t<this.headings.length;t++)if(this.headings[t].getBoundingClientRect().top>0){e=this.headings[Math.max(0,t-1)];break}}if(e!==this.currentHeading){this.currentHeading=e;for(var n=null,s=new RegExp("#(".concat(e.id,")$")),i=0,r=Object(o.a)(this.$refs.sidebar.getElementsByClassName("ched-sb-section"));i<r.length;i++){var a=r[i],l=s.exec(a.children[0].href);if(l&&location.hash!=="#"+l){n=a,e.setAttribute("id",""),history.replaceState(void 0,void 0,"#"+l[1]),e.setAttribute("id",l[1]);break}}n&&(this.$refs.sidebarHighlight.style.top=n.offsetTop-4+"px",this.$refs.sidebarHighlight.style.height=n.clientHeight+8+"px")}}},update:(re=Object(a.a)(r.a.mark((function e(){var t,n,i,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingChallenge=!0,e.prev=1,e.next=4,Promise.all([this.challengeApi.getChallenge(this.challengeId),this.labApi.courseCategoriesIndex(this.course.id)]);case 4:i=e.sent,a=Object(s.a)(i,2),t=a[0],n=a[1],e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),ee.b({type:"error",title:"Unable to download ".concat(this.type)}),e.abrupt("return");case 14:return e.prev=14,this.loadingChallenge=!1,e.finish(14);case 17:return this.setChallengeData(t),this.labCategories=n,e.next=21,this.$nextTick();case 21:this.headings=this.$el.querySelectorAll("h2[id]"),this.currentHeading=null,window.addEventListener("scroll",this.onScroll),this.onScroll();case 25:case"end":return e.stop()}}),e,this,[[1,10,14,17]])}))),function(){return re.apply(this,arguments)}),updateVisibleLabs:u()(Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.visibleLabNamesLoading){e.next=2;break}return e.abrupt("return");case 2:return this.visibleLabNamesLoading=!0,this.visibleLabNamesError=null,e.prev=4,e.next=7,this.labApi.courseMatch(this.course.id,this.model.lab_category,this.model.lab_name_regex);case 7:this.visibleLabNames=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),e.t0.data&&"lab_name_regex_syntax"===e.t0.data.code?this.visibleLabNamesError="Regex error":this.visibleLabNamesError="Error",e.abrupt("return");case 14:return e.prev=14,this.visibleLabNamesLoading=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[4,10,14,17]])}))),500)}},ue=(n("vL5B"),Object(I.a)(ce,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{"ched-chrome":e.challenge&&e.challenge.settings.chrome}},[e.loadingChallenge?n("Spinner",{staticClass:"ched-spinner"}):e._e(),e._v(" "),e.model?n("div",{staticClass:"ched-layout"},[n("div",{staticClass:"ched-layout-content"},[e._t("header",null,{model:e.model,loading:e.loading}),e._v(" "),"lesson"!==e.type?[n("h2",{staticClass:"ched",attrs:{id:"title"}},[e._v("Title")]),e._v(" "),n("div",{staticClass:"ched-title-layout"},[n("EdInput",{ref:"title",staticClass:"ched-title",attrs:{autofocus:"",disabled:e.loading},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}}),e._v(" "),n("span",{staticClass:"ched-field-label"},[e._v("Number")]),e._v(" "),n("EdInput",{staticClass:"ched-number",attrs:{disabled:e.loading},model:{value:e.model.number,callback:function(t){e.$set(e.model,"number",e._n(t))},expression:"model.number"}}),e._v(" "),e.pointsEnabled?[n("span",{staticClass:"ched-field-label"},[e._v("Points")]),e._v(" "),n("EdInput",{staticClass:"ched-number",attrs:{disabled:e.loading},model:{value:e.model.points,callback:function(t){e.$set(e.model,"points",e._n(t))},expression:"model.points"}})]:e._e()],2),e._v(" "),n("div",{staticClass:"ched-split-row"},[n("div",{staticClass:"ched-split-grp ched-checkbox-row"},[n("EdCheck",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Hide from students",expression:"'Hide from students'"}],staticClass:"ched-checkbox",attrs:{label:"Hidden",disabled:e.loading},model:{value:e.model.is_hidden,callback:function(t){e.$set(e.model,"is_hidden",t)},expression:"model.is_hidden"}})],1),e._v(" "),n("div",{staticClass:"ched-split-grp ched-checkbox-row"},[n("span",{staticClass:"ched-field-label"},[e._v("Due")]),e._v(" "),n("DateTimeField",{staticClass:"ched-due",attrs:{placeholder:"Select a date",disabled:e.loading},model:{value:e.model.due_at,callback:function(t){e.$set(e.model,"due_at",t)},expression:"model.due_at"}})],1)])]:e._e(),e._v(" "),"lesson"!==e.type?[n("h2",{staticClass:"ched",attrs:{id:"category"}},[e._v("Category")]),e._v(" "),n("EdInput",{staticClass:"ched-category",attrs:{disabled:e.loading},model:{value:e.model.category,callback:function(t){e.$set(e.model,"category",t)},expression:"model.category"}})]:e._e(),e._v(" "),"assessment"===e.type?[n("h2",{staticClass:"ched",attrs:{id:"outline"}},[e._v("Outline")]),e._v(" "),n("p",{staticClass:"ched-description"},[e._v("\n\t\t\t\t\tWrite a brief outline of the assessment which will be displayed on the\n\t\t\t\t\tassessment listings page.\n\t\t\t\t")]),e._v(" "),n("EdTextarea",{staticClass:"ched-outline",attrs:{disabled:e.loading},model:{value:e.model.outline,callback:function(t){e.$set(e.model,"outline",t)},expression:"model.outline"}})]:e._e(),e._v(" "),"lesson"!==e.type?[n("h2",{staticClass:"ched",attrs:{id:"description"}},[e._v("Description")]),e._v(" "),n("p",{staticClass:"ched-description"},[e._v("\n\t\t\t\t\tWrite a complete description of the "+e._s(e.typeText)+", including the scenario,\n\t\t\t\t\tobjectives, examples and any other information needed to complete it.\n\t\t\t\t")]),e._v(" "),n("Amber",{staticClass:"ched",model:{value:e.model.content,callback:function(t){e.$set(e.model,"content",t)},expression:"model.content"}})]:e._e(),e._v(" "),n("h2",{staticClass:"ched",attrs:{id:"scaffold"}},[e._v("Scaffold")]),e._v(" "),n("p",{staticClass:"ched-description"},[e._v("\n\t\t\t\tUse the workspace below to specify the scaffold for this "+e._s(e.typeText)+", that will be used as the starting point.\n\t\t\t")]),e._v(" "),e.challenge?n("Workspace",{ref:"scaffold",staticClass:"ched-workspace",attrs:{theme:e.workspaceTheme,type:"code",chrome:e.challenge.settings.chrome,"connect-type":"scaffold-edit","connect-param":e.challenge.id,"keep-open":"",simple:""}}):e._e(),e._v(" "),n("h2",{staticClass:"ched",attrs:{id:"solution"}},[e._v("Solution")]),e._v(" "),n("p",{staticClass:"ched-description"},[e._v("\n\t\t\t\tUse the workspace below to specify the solution for this "+e._s(e.typeText)+", containing any files and code required.\n\t\t\t")]),e._v(" "),n("div",{staticClass:"ched-field"},[n("EdCheck",{staticClass:"ched-checkbox",attrs:{label:"Solution Visible",description:"Allow students to see the solution.",value:!e.model.is_active,disabled:e.loading},on:{input:function(t){e.model.is_active=!t}}})],1),e._v(" "),n("div",{staticClass:"ched-field"},[n("EdCheck",{staticClass:"ched-checkbox",attrs:{label:"Feedback Visible",description:"Allow students to see inline code feedback as well as manual feedback written by instructors.",disabled:e.loading},model:{value:e.model.is_feedback_visible,callback:function(t){e.$set(e.model,"is_feedback_visible",t)},expression:"model.is_feedback_visible"}})],1),e._v(" "),e.challenge?n("Workspace",{ref:"solution",staticClass:"ched-workspace",attrs:{theme:e.workspaceTheme,type:"code",chrome:e.challenge.settings.chrome,"connect-type":"solution-edit","connect-param":e.challenge.id,"keep-open":"",simple:""}}):e._e(),e._v(" "),n("h2",{staticClass:"ched",attrs:{id:"explanation"}},[e._v("Explanation")]),e._v(" "),n("p",{staticClass:"ched-description"},[e._v("\n\t\t\t\tProvide an explanation of the solution so that the students will be able to understand and learn from it.\n\t\t\t")]),e._v(" "),n("Amber",{staticClass:"ched",model:{value:e.model.explanation,callback:function(t){e.$set(e.model,"explanation",t)},expression:"model.explanation"}}),e._v(" "),e.isTestMethodSelected("postgres")?[n("h2",{staticClass:"ched",attrs:{id:"engine"}},[e._v("Database engine")]),e._v(" "),n("div",{staticClass:"ched-icon-choices"},[n("div",{staticClass:"ched-icon-choice",class:{selected:""===e.postgresEngine||"postgres"===e.postgresEngine},on:{click:function(t){e.postgresEngine="postgres"}}},[e._v("PostgreSQL")]),e._v(" "),n("div",{staticClass:"ched-icon-choice",class:{selected:"mariadb"===e.postgresEngine},on:{click:function(t){e.postgresEngine="mariadb"}}},[e._v("MySQL (MariaDB)")])])]:e._e(),e._v(" "),n("h2",{staticClass:"ched",attrs:{id:"features"}},[e._v("Features")]),e._v(" "),n("p",{staticClass:"ched-description"},[e._v("\n\t\t\t\tYou can enable or disable various features for this "+e._s(e.typeText)+".\n\t\t\t")]),e._v(" "),e.isTestMethodSelected("web")?e._e():n("div",{staticClass:"ched-field"},[n("EdCheck",{staticClass:"ched-checkbox",attrs:{label:"Run",description:"Enables the Run button.",disabled:e.loading},model:{value:e.model.features.run,callback:function(t){e.$set(e.model.features,"run",t)},expression:"model.features.run"}})],1),e._v(" "),n("div",{staticClass:"ched-field"},[n("EdCheck",{staticClass:"ched-checkbox",attrs:{label:"Mark",description:"Enables the Mark button.",disabled:e.loading},model:{value:e.model.features.mark,callback:function(t){e.$set(e.model.features,"mark",t)},expression:"model.features.mark"}})],1),e._v(" "),n("div",{staticClass:"ched-field"},[n("EdCheck",{staticClass:"ched-checkbox",attrs:{label:"Connect",description:"Enables connecting to the workspace.",disabled:e.loading},model:{value:e.model.features.connect,callback:function(t){e.$set(e.model.features,"connect",t)},expression:"model.features.connect"}})],1),e._v(" "),n("div",{staticClass:"ched-field"},[n("EdCheck",{staticClass:"ched-checkbox",attrs:{label:"File Editor",description:"Shows the file editor.",disabled:e.loading},model:{value:e.model.features.editor,callback:function(t){e.$set(e.model.features,"editor",t)},expression:"model.features.editor"}})],1),e._v(" "),e.isTestMethodSelected("web")?e._e():n("div",{staticClass:"ched-field"},[n("EdCheck",{staticClass:"ched-checkbox",attrs:{label:"Terminal",description:"Enables students to open a terminal within the "+e.typeText+".",disabled:e.loading},model:{value:e.model.features.terminal,callback:function(t){e.$set(e.model.features,"terminal",t)},expression:"model.features.terminal"}})],1),e._v(" "),e.challenge.settings.chrome?e._e():n("div",{staticClass:"ched-field"},[n("EdCheck",{staticClass:"ched-checkbox",attrs:{label:"Workspace",description:"Enables the full workspace view.",disabled:e.loading},model:{value:e.model.features.full,callback:function(t){e.$set(e.model.features,"full",t)},expression:"model.features.full"}})],1),e._v(" "),e.isTestMethodSelected("postgres","web")?e._e():n("div",{staticClass:"ched-field"},[n("EdCheck",{staticClass:"ched-checkbox",attrs:{label:"Arguments",description:"Enables command line arguments to be specified when running.",disabled:e.loading},model:{value:e.model.features.arguments,callback:function(t){e.$set(e.model.features,"arguments",t)},expression:"model.features.arguments"}})],1),e._v(" "),e.course.settings.workspace.internet?n("div",{staticClass:"ched-field"},[n("EdCheck",{staticClass:"ched-checkbox",attrs:{label:"Internet access",description:"Enables internet access during run and mark",disabled:e.loading},model:{value:e.model.features.internet,callback:function(t){e.$set(e.model.features,"internet",t)},expression:"model.features.internet"}})],1):e._e(),e._v(" "),n("div",{staticClass:"ched-field"},[n("EdCheck",{staticClass:"ched-checkbox",attrs:{label:"Manual feedback",description:"Enables manual feedback to be given for student submissions.",disabled:e.loading},model:{value:e.model.features.feedback,callback:function(t){e.$set(e.model.features,"feedback",t)},expression:"model.features.feedback"}})],1),e._v(" "),n("div",{staticClass:"ched-field"},[n("EdCheck",{staticClass:"ched-checkbox",attrs:{label:"Confirm before submitting",description:"A confirmation message will be shown when the Mark button is pressed.",disabled:e.loading},model:{value:e.model.features.confirm_submit,callback:function(t){e.$set(e.model.features,"confirm_submit",t)},expression:"model.features.confirm_submit"}})],1),e._v(" "),n("div",{staticClass:"ched-field"},[n("EdCheck",{staticClass:"ched-checkbox",attrs:{label:"Hide Names",description:"Hides the names of the students in the submissions page.",disabled:e.loading},model:{value:e.model.features.anonymous_submissions,callback:function(t){e.$set(e.model.features,"anonymous_submissions",t)},expression:"model.features.anonymous_submissions"}})],1),e._v(" "),e.course.features.git_submission?n("div",{staticClass:"ched-field"},[n("EdCheck",{staticClass:"ched-checkbox",attrs:{label:"Git Submission",description:"Allows students to submit using git.",disabled:e.loading},model:{value:e.model.features.git_submission,callback:function(t){e.$set(e.model.features,"git_submission",t)},expression:"model.features.git_submission"}})],1):e._e(),e._v(" "),e.model.features.git_submission?n("div",{staticClass:"ched-field"},[n("EdCheck",{staticClass:"ched-checkbox",attrs:{label:"Only Git Submission",description:"Students can only submit using git. The mark button from the web user interface will be unavailable.",disabled:e.loading},model:{value:e.model.settings.only_git_submission,callback:function(t){e.$set(e.model.settings,"only_git_submission",t)},expression:"model.settings.only_git_submission"}})],1):e._e(),e._v(" "),e.model.features.git_submission?[n("h2",{staticClass:"ched",attrs:{id:"git"}},[e._v("Git Submission")]),e._v(" "),n("p",{staticClass:"ched-description"},[e._v("Students can access the following repositories:")]),e._v(" "),n("p",{staticClass:"ched-description"},[n("ul",[n("li",[e._m(0),e._v(" —\n\t\t\t\t\t\t\t"),n("code",[e._v("git clone "),n("em",[e._v(e._s(e.challengeApi.generateCloneUrl(e.model.id,e.model.title)))])])]),e._v(" "),n("li",[e._m(1),e._v(" —\n\t\t\t\t\t\t\t"),n("code",[e._v("git clone "),n("em",[e._v(e._s(e.challengeApi.generateScaffoldUrl(e.model.id,e.model.title)))])])])])]),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),n("p",{staticClass:"ched-description"},[e._v("Additionally, course staff can access the following repository path:")]),e._v(" "),n("p",{staticClass:"ched-description"},[n("ul",[n("li",[e._m(4),e._v(" —\n\t\t\t\t\t\t\t"),n("code",[e._v("git clone "),n("em",[e._v(e._s(e.challengeApi.generateCloneUrl(e.model.id,e.model.title,"{email}")))])])])])]),e._v(" "),e._m(5)]:e._e(),e._v(" "),e.pointsEnabled?[n("h2",{staticClass:"ched",attrs:{id:"points"}},[e._v("Points Calculation")]),e._v(" "),n("p",{staticClass:"ched-description"},[e._v("\n\t\t\t\t\tPoints are assigned to the student upon successful completion of the "+e._s(e.typeText)+"\n\t\t\t\t\tbased on the number of failed submissions they made (prior to the first passing submission).\n\t\t\t\t\tSubmissions which did not build successfully (due to a syntax error, for example) do not\n\t\t\t\t\tcount.\n\t\t\t\t")]),e._v(" "),n("p",{staticClass:"ched-description"},[e._v("\n\t\t\t\t\tStart at\n\t\t\t\t\t"),n("EdInput",{staticClass:"ched-input-small",attrs:{disabled:e.loading,spellcheck:"false"},model:{value:e.model.points,callback:function(t){e.$set(e.model,"points",e._n(t))},expression:"model.points"}}),e._v("\n\t\t\t\t\t"+e._s(e.pluralize(e.model.points,"point"))+" and lose\n\t\t\t\t\t"),n("EdInput",{staticClass:"ched-input-small",attrs:{disabled:e.loading,spellcheck:"false"},model:{value:e.model.settings.points.loss_amount,callback:function(t){e.$set(e.model.settings.points,"loss_amount",e._n(t))},expression:"model.settings.points.loss_amount"}}),e._v("\n\t\t\t\t\t"+e._s(e.pluralize(e.model.settings.points.loss_amount,"point"))+" every\n\t\t\t\t\t"),n("EdInput",{staticClass:"ched-input-small",attrs:{disabled:e.loading,spellcheck:"false"},model:{value:e.model.settings.points.loss_every,callback:function(t){e.$set(e.model.settings.points,"loss_every",e._n(t))},expression:"model.settings.points.loss_every"}}),e._v("\n\t\t\t\t\t"+e._s(e.pluralize(e.model.settings.points.loss_every,"submission"))+".\n\t\t\t\t")],1),e._v(" "),n("p",{staticClass:"ched-description"},[e._v("\n\t\t\t\t\tThe first\n\t\t\t\t\t"),n("EdInput",{staticClass:"ched-input-small",attrs:{disabled:e.loading,spellcheck:"false"},model:{value:e.model.settings.points.loss_threshold,callback:function(t){e.$set(e.model.settings.points,"loss_threshold",e._n(t))},expression:"model.settings.points.loss_threshold"}}),e._v("\n\t\t\t\t\t"+e._s(e.pluralize(e.model.settings.points.loss_threshold,"submission is","submissions are"))+" not counted.\n\t\t\t\t")],1)]:e._e(),e._v(" "),e.isTestMethodSelected("postgres")?[n("h2",{staticClass:"ched",attrs:{id:"testfiles"}},[e._v("Test Files")]),e._v(" "),n("p",{staticClass:"ched-description"},[e._v("\n\t\t\t\t\tPlace your schemas as well as any other SQL files used by the testcases in this workspace.\n\t\t\t\t")]),e._v(" "),e.challenge?n("Workspace",{ref:"testbase",staticClass:"ched-workspace",attrs:{theme:e.workspaceTheme,type:"code","connect-type":"testbase-edit","connect-param":e.challenge.id,"keep-open":"",simple:""}}):e._e(),e._v(" "),n("h2",{staticClass:"ched",attrs:{id:"testmethod",label:"Test method"}},[e._v("Test Method")]),e._v(" "),n("div",{staticClass:"ched-icon-choices"},[n("div",{staticClass:"ched-icon-choice",class:{selected:"select"===e.postgresTestMethod},on:{click:function(t){e.postgresTestMethod="select"}}},[e._v("Check Select")]),e._v(" "),n("div",{staticClass:"ched-icon-choice",class:{selected:"database"===e.postgresTestMethod},on:{click:function(t){e.postgresTestMethod="database"}}},[e._v("Check Database")])]),e._v(" "),"select"==e.postgresTestMethod?[e._m(6)]:e._e(),e._v(" "),"database"==e.postgresTestMethod?[e._m(7),e._v(" "),e._m(8)]:e._e(),e._v(" "),n("h2",{staticClass:"ched",attrs:{id:"testcases"}},[e._v("Test Configuration")]),e._v(" "),n("div",{staticClass:"ched-checkbox-row"},[n("EdCheck",{staticClass:"ched-checkbox",attrs:{disabled:e.loading,label:"Ignore Row Order"},model:{value:e.model.tickets.mark_postgres.ignore_row_order,callback:function(t){e.$set(e.model.tickets.mark_postgres,"ignore_row_order",t)},expression:"model.tickets.mark_postgres.ignore_row_order"}}),e._v(" "),n("EdCheck",{staticClass:"ched-checkbox",attrs:{disabled:e.loading,label:"Ignore Column Order"},model:{value:e.model.tickets.mark_postgres.ignore_column_order,callback:function(t){e.$set(e.model.tickets.mark_postgres,"ignore_column_order",t)},expression:"model.tickets.mark_postgres.ignore_column_order"}}),e._v(" "),n("EdCheck",{staticClass:"ched-checkbox",attrs:{disabled:e.loading,label:"Ignore Column Names"},model:{value:e.model.tickets.mark_postgres.ignore_column_names,callback:function(t){e.$set(e.model.tickets.mark_postgres,"ignore_column_names",t)},expression:"model.tickets.mark_postgres.ignore_column_names"}})],1),e._v(" "),n("div",{staticClass:"ched-field"},[n("label",[e._v("Schema")]),e._v(" "),n("EdInput",{staticClass:"ched-input-code",attrs:{disabled:e.loading,placeholder:"File path",spellcheck:"false"},model:{value:e.paths.schema,callback:function(t){e.$set(e.paths,"schema",t)},expression:"paths.schema"}})],1),e._v(" "),n("div",{staticClass:"ched-field"},[n("label",[e._v("Attempt")]),e._v(" "),n("EdInput",{staticClass:"ched-input-code",attrs:{disabled:e.loading,placeholder:"File path",spellcheck:"false"},model:{value:e.paths.attempt,callback:function(t){e.$set(e.paths,"attempt",t)},expression:"paths.attempt"}})],1),e._v(" "),n("div",{staticClass:"ched-field"},[n("label",[e._v("Solution")]),e._v(" "),n("EdInput",{staticClass:"ched-input-code",attrs:{disabled:e.loading,placeholder:"File path",spellcheck:"false"},model:{value:e.paths.solution,callback:function(t){e.$set(e.paths,"solution",t)},expression:"paths.solution"}})],1),e._v(" "),n("div",{staticClass:"ched-field"},[n("EdButton",{on:{click:function(t){e.guiTestcasesEditor=!e.guiTestcasesEditor}}},[e._v("Show "+e._s(e.guiTestcasesEditor?"JSON":"Testcases"))])],1),e._v(" "),e.guiTestcasesEditor?n("EditorTestcasesGui",{attrs:{loading:e.loading,testcases:e.tests,"selected-testcase":e.selectedTestcase,"attempt-path-placeholder":e.paths.attempt,"solution-path-placeholder":e.paths.solution,"test-method":e.model.type,"check-type":e.postgresTestMethod,"per-testcase-scores":e.model.settings.per_testcase_scores},on:{"new-testcase":e.newTestcase,"delete-testcase":e.deleteTestcase,"selected-testcase":e.onSelectedTestcase}}):n("EditorTestcasesJson",{attrs:{testcases:e.tests},on:{update:e.onTestcasesUpdate}}),e._v(" "),e.isTestMethodSelected("code")?n("div",{staticClass:"ched-field"},[n("label",[e._v("Acceptable Line Errors")]),e._v(" "),n("EdInput",{attrs:{disabled:e.loading,spellcheck:"false"},model:{value:e.lineErrors,callback:function(t){e.lineErrors=e._n(t)},expression:"lineErrors"}})],1):e._e()]:e._e(),e._v(" "),e.isTestMethodSelected("postgres")?e._e():[e.isTestMethodSelected("web")?e._e():[n("h2",{staticClass:"ched",attrs:{id:"commands"}},[e._v("Commands")]),e._v(" "),n("p",{staticClass:"ched-description"},[e._v("\n\t\t\t\t\t\tFill out the commands below necessary to build and run the "+e._s(e.typeText)+" program."),n("br"),e._v("\n\t\t\t\t\t\tYou can omit the build command when the program does not require compilation.\n\t\t\t\t\t")]),e._v(" "),n("div",{staticClass:"ched-field"},[n("label",[e._v("Build Command")]),e._v(" "),n("EdInput",{staticClass:"ched-input-code",attrs:{disabled:e.loading,spellcheck:"false"},model:{value:e.model.tickets.run_standard.build_command,callback:function(t){e.$set(e.model.tickets.run_standard,"build_command",t)},expression:"model.tickets.run_standard.build_command"}})],1),e._v(" "),n("div",{staticClass:"ched-field"},[n("label",[e._v("Run Command")]),e._v(" "),n("EdInput",{staticClass:"ched-input-code",attrs:{disabled:e.loading,spellcheck:"false"},model:{value:e.model.tickets.run_standard.run_command,callback:function(t){e.$set(e.model.tickets.run_standard,"run_command",t)},expression:"model.tickets.run_standard.run_command"}})],1),e._v(" "),e.model.features.terminal?n("div",{staticClass:"ched-field"},[n("label",[e._v("Terminal Command")]),e._v(" "),n("EdInput",{staticClass:"ched-input-code",attrs:{disabled:e.loading,placeholder:"bash --login",spellcheck:"false"},model:{value:e.model.settings.terminal_command,callback:function(t){e.$set(e.model.settings,"terminal_command",t)},expression:"model.settings.terminal_command"}})],1):e._e()],e._v(" "),!e.isTestMethodSelected("web")&&e.course.features.challenge_services?[n("h2",{staticClass:"ched",attrs:{id:"services"}},[e._v("Services")]),e._v(" "),n("p",{staticClass:"ched-description"},[e._v("\n\t\t\t\t\t\tServices start automatically before the challenge is run or marked. Use this provide students access to a database engine such as Postgres or MySQL.\n\t\t\t\t\t")]),e._v(" "),n("div",{staticClass:"ched-icon-choices"},[n("div",{staticClass:"ched-icon-choice",class:{selected:"postgres"==e.services.database},on:{click:function(t){e.services.database="postgres"}}},[e._v("PostgreSQL")]),e._v(" "),n("div",{staticClass:"ched-icon-choice",class:{selected:"mariadb"==e.services.database},on:{click:function(t){e.services.database="mariadb"}}},[e._v("MySQL (MariaDB)")]),e._v(" "),n("div",{staticClass:"ched-icon-choice",class:{selected:""==e.services.database},on:{click:function(t){e.services.database=""}}},[e._v("None")])]),e._v(" "),"postgres"==e.services.database?[e._m(9)]:e._e(),e._v(" "),"mariadb"==e.services.database?[e._m(10)]:e._e()]:e._e(),e._v(" "),e.isTestMethodSelected("web")?e._e():[n("h2",{staticClass:"ched",attrs:{id:"testmethod"}},[e._v("Test Method")]),e._v(" "),n("div",{staticClass:"ched-icon-choices"},e._l(e.testMethods,(function(t){return"web"!==t.type?n("div",{key:t.type,staticClass:"ched-icon-choice",class:{selected:e.isTestMethodSelected(t.type)},on:{click:function(n){return e.selectTestMethod(t.type)}}},[e._v("\n\t\t\t\t\t\t\t"+e._s(t.label)+"\n\t\t\t\t\t\t")]):e._e()})),0)],e._v(" "),e.isTestMethodSelected("none")?n("p",{staticClass:"ched-description"},[e._v("\n\t\t\t\t\tAutomatic marking will not be performed upon submission.\n\t\t\t\t")]):e._e(),e._v(" "),e.isTestMethodSelected("none")?e._e():[n("h2",{staticClass:"ched",attrs:{id:"testfiles"}},[e._v("Test Files")]),e._v(" "),n("p",{staticClass:"ched-description"},[e.isTestMethodSelected("code")?[e._v("\n\t\t\t\t\t\t\tUse the workspace below to specify the input and output files for your testcases."),n("br"),e._v("\n\t\t\t\t\t\t\tThe testcases can be configured in the next section and reference the files below.\n\t\t\t\t\t\t")]:e._e(),e._v(" "),e.isTestMethodSelected("pyunit")?[e._m(11),e._v(" "),n("div",{staticClass:"ched-field"},[n("EdButton",{on:{click:function(t){e.pyunitDocsVisible=!e.pyunitDocsVisible}}},[e._v("Documentation")])],1),e._v(" "),e.pyunitDocsVisible?n("ContentDialog",{attrs:{title:"PyUnit Testing Documentation"},on:{close:function(t){e.pyunitDocsVisible=!1}}},[n("div",{staticClass:"ched-scroller"},[n("div",{staticClass:"ched-docs-container"},[n("DocsPyunit")],1)])]):e._e()]:e._e(),e._v(" "),e.isTestMethodSelected("testthat")?[e._v("\n\t\t\t\t\t\t\tCreate your R tests as a package in the workspace below.\n\t\t\t\t\t\t\tYour package must contain a "),n("code",[e._v("R")]),e._v(" folder and a "),n("code",[e._v("DESCRIPTION")]),e._v(" file.\n\t\t\t\t\t\t\tEd will run "),n("code",[e._v("devtools::document()")]),e._v(" and then "),n("code",[e._v("devtools::test()")]),e._v(" in the root directory of your package to execute your tests.\n\t\t\t\t\t\t")]:e._e(),e._v(" "),e.isTestMethodSelected("jest")?[e._v("\n\t\t\t\t\t\t\tCreate your Jest tests in the workspace below. Your test files should end with the suffix "),n("code",[e._v(".test.js")]),e._v(" as per Jest convention.\n\t\t\t\t\t\t")]:e._e(),e._v(" "),e.isTestMethodSelected("unit")?[e._v("\n\t\t\t\t\t\t\tCreate your JUnit test class in the workspace below. It will be compiled together\n\t\t\t\t\t\t\twith the student's code submission.\n\n\t\t\t\t\t\t\t"),n("div",{staticClass:"ched-field"},[n("EdButton",{on:{click:function(t){e.junitDocsVisible=!e.junitDocsVisible}}},[e._v("Documentation")])],1),e._v(" "),e.junitDocsVisible?n("ContentDialog",{attrs:{title:"JUnit Testing Documentation"},on:{close:function(t){e.junitDocsVisible=!1}}},[n("div",{staticClass:"ched-scroller"},[n("div",{staticClass:"ched-docs-container"},[n("DocsJunit")],1)])]):e._e()]:e._e(),e._v(" "),e.isTestMethodSelected("rspec")?[e._v("\n\t\t\t\t\t\t\tCreate your RSpec files in the workspace below.\n\t\t\t\t\t\t")]:e._e(),e._v(" "),e.isTestMethodSelected("jupyter")?[e._v("\n\t\t\t\t\t\t\tCreate your Jupyter test class in the workspace below.\n\n\t\t\t\t\t\t\t"),n("div",{staticClass:"ched-field"},[n("label",[e._v("Notebook path")]),e._v(" "),n("EdInput",{staticClass:"ched-input-code",attrs:{disabled:e.loading,spellcheck:"false"},model:{value:e.model.tickets.mark_jupyter.jupyter_notebook_path,callback:function(t){e.$set(e.model.tickets.mark_jupyter,"jupyter_notebook_path",t)},expression:"model.tickets.mark_jupyter.jupyter_notebook_path"}})],1),e._v(" "),n("div",{staticClass:"ched-field"},[n("label",[e._v("Testcase path")]),e._v(" "),n("EdInput",{staticClass:"ched-input-code",attrs:{disabled:e.loading,spellcheck:"false"},model:{value:e.model.tickets.mark_jupyter.testcase_path,callback:function(t){e.$set(e.model.tickets.mark_jupyter,"testcase_path",t)},expression:"model.tickets.mark_jupyter.testcase_path"}})],1),e._v(" "),n("div",{staticClass:"ched-field"},[n("EdButton",{on:{click:function(t){e.jupyterDocsVisible=!e.jupyterDocsVisible}}},[e._v("Documentation")])],1),e._v(" "),e.jupyterDocsVisible?n("ContentDialog",{attrs:{title:"Jupyter Testing Documentation"},on:{close:function(t){e.jupyterDocsVisible=!1}}},[n("div",{staticClass:"ched-scroller"},[n("div",{staticClass:"ched-docs-container"},[n("DocsJupyter")],1)])]):e._e()]:e._e(),e._v(" "),e.isTestMethodSelected("swift")?[e._v("\n\t\t\t\t\t\t\tCreate your Swift test class in the workspace below. If the class is named\n\t\t\t\t\t\t\tFactorial.swift then the test class should be named FactorialTests.swift\n\t\t\t\t\t\t")]:e._e(),e._v(" "),e.isTestMethodSelected("web")?[e._v("\n\t\t\t\t\t\t\tCreate the testing script in the workspace below.\n\t\t\t\t\t\t")]:e._e(),e._v(" "),e.isTestMethodSelected("script")?[e._v("\n\t\t\t\t\t\t\tCreate any necessary testing scripts in the workspace below. The testing script will\n\t\t\t\t\t\t\tbe executed for each testcase and must return zero if the test passes and non-zero if the\n\t\t\t\t\t\t\ttest fails.\n\t\t\t\t\t\t")]:e._e(),e._v(" "),e.isTestMethodSelected("custom")?[e._v("\n\t\t\t\t\t\t\tCreate your marking script in the workspace below.\n\n\t\t\t\t\t\t\tThe marking script must return zero if it was executed successfully and non-zero otherwise.\n\t\t\t\t\t\t\tThe marking script must output a JSON object via its standard output in the documentation.\n\n\t\t\t\t\t\t\t"),n("div",{staticClass:"ched-field"},[n("EdButton",{on:{click:function(t){e.customDocsVisible=!e.customDocsVisible}}},[e._v("Documentation")])],1),e._v(" "),e.customDocsVisible?n("ContentDialog",{attrs:{title:"Custom Testing Documentation"},on:{close:function(t){e.customDocsVisible=!1}}},[n("div",{staticClass:"ched-scroller"},[n("div",{staticClass:"ched-docs-container"},[n("DocsCustom")],1)])]):e._e()]:e._e()],2),e._v(" "),e.isTestMethodSelected("web")?[n("div",{staticClass:"ched-field"},[n("label",[e._v("Testing script file path")]),e._v(" "),n("EdInput",{attrs:{disabled:e.loading,spellcheck:"false"},model:{value:e.model.tickets.mark_web.main_js_path,callback:function(t){e.$set(e.model.tickets.mark_web,"main_js_path",t)},expression:"model.tickets.mark_web.main_js_path"}})],1),e._v(" "),n("div",{staticClass:"ched-field"},[n("label",[e._v("Main HTML file path")]),e._v(" "),n("EdInput",{attrs:{disabled:e.loading,spellcheck:"false"},model:{value:e.model.tickets.mark_web.main_html_path,callback:function(t){e.$set(e.model.tickets.mark_web,"main_html_path",t)},expression:"model.tickets.mark_web.main_html_path"}})],1),e._v(" "),n("div",{staticClass:"ched-field"},[n("label",[e._v("Preload script paths")]),e._v(" "),n("ItemList",{attrs:{placeholder:"Add script path"},model:{value:e.model.tickets.mark_web.preload_js_path,callback:function(t){e.$set(e.model.tickets.mark_web,"preload_js_path",t)},expression:"model.tickets.mark_web.preload_js_path"}})],1),e._v(" "),n("div",{staticClass:"ched-field"},[n("EdButton",{on:{click:function(t){e.webDocsVisible=!0}}},[e._v("Documentation")])],1),e._v(" "),e.webDocsVisible?n("ContentDialog",{attrs:{title:"Web Testing Documentation"},on:{close:function(t){e.webDocsVisible=!1}}},[n("div",{staticClass:"ched-scroller"},[n("div",{staticClass:"ched-docs-container"},[n("DocsWeb")],1)])]):e._e()]:e._e(),e._v(" "),e.isTestMethodSelected("unit","swift","rspec")?n("div",{staticClass:"ched-field"},[e.isTestMethodSelected("unit","swift")?n("label",[e._v("Test class filename")]):e._e(),e._v(" "),e.isTestMethodSelected("rspec")?n("label",[e._v("Test spec filename")]):e._e(),e._v(" "),n("EdInput",{attrs:{disabled:e.loading,spellcheck:"false"},model:{value:e.model.tickets.mark_unit.testcase_path,callback:function(t){e.$set(e.model.tickets.mark_unit,"testcase_path",t)},expression:"model.tickets.mark_unit.testcase_path"}})],1):e._e(),e._v(" "),e.isTestMethodSelected("custom")?n("div",{staticClass:"ched-field"},[n("label",[e._v("Mark Command")]),e._v(" "),n("EdInput",{attrs:{disabled:e.loading,spellcheck:"false"},model:{value:e.model.tickets.mark_custom.run_command,callback:function(t){e.$set(e.model.tickets.mark_custom,"run_command",t)},expression:"model.tickets.mark_custom.run_command"}})],1):e._e(),e._v(" "),e.isTestMethodSelected("unit","pyunit","testthat","jest","swift","rspec","custom")?n("div",{staticClass:"ched-field"},[n("label",[e._v("Time limit (ms)")]),e._v(" "),n("EdInput",{attrs:{type:"number",disabled:e.loading,value:e.timeLimit,spellcheck:"false"},nativeOn:{blur:function(t){e.timeLimit=t.target.value}}})],1):e._e(),e._v(" "),e.isTestMethodSelected("custom","unit","pyunit","jupyter")?n("div",{staticClass:"ched-field"},[n("EdCheck",{staticClass:"ched-checkbox",attrs:{disabled:e.loading,label:"Per-testcase Scores"},model:{value:e.model.settings.per_testcase_scores,callback:function(t){e.$set(e.model.settings,"per_testcase_scores",t)},expression:"model.settings.per_testcase_scores"}})],1):e._e(),e._v(" "),e.challenge?n("Workspace",{ref:"testbase",staticClass:"ched-workspace",attrs:{theme:e.workspaceTheme,type:"code",chrome:e.testChrome,"connect-type":"testbase-edit","connect-param":e.challenge.id,"keep-open":"",simple:""}}):e._e()],e._v(" "),e.isTestMethodSelected("code","script")?[n("h2",{staticClass:"ched",attrs:{id:"testcases"}},[e._v("Test Configuration")]),e._v(" "),n("p",{staticClass:"ched-description"},[e._v("\n\t\t\t\t\t\tUse the editor below to create a set of testcases used to mark each submission."),n("br"),e._v(" "),e.isTestMethodSelected("code")?[e._v("The testcases should reference the input and output files in the previous section.")]:e._e(),e._v(" "),e.isTestMethodSelected("script")?[e._v("The testcases should invoke your testing script from the previous section.")]:e._e()],2),e._v(" "),n("div",{staticClass:"ched-checkbox-row"},[n("EdCheck",{staticClass:"ched-checkbox",attrs:{disabled:e.loading,label:"PTY"},model:{value:e.model.tickets.mark_standard.run_limit.pty,callback:function(t){e.$set(e.model.tickets.mark_standard.run_limit,"pty",t)},expression:"model.tickets.mark_standard.run_limit.pty"}}),e._v(" "),n("EdCheck",{staticClass:"ched-checkbox",attrs:{disabled:e.loading,label:"Easy"},model:{value:e.model.tickets.mark_standard.easy,callback:function(t){e.$set(e.model.tickets.mark_standard,"easy",t)},expression:"model.tickets.mark_standard.easy"}}),e._v(" "),n("EdCheck",{staticClass:"ched-checkbox",attrs:{disabled:e.loading,label:"Mark All"},model:{value:e.model.tickets.mark_standard.mark_all,callback:function(t){e.$set(e.model.tickets.mark_standard,"mark_all",t)},expression:"model.tickets.mark_standard.mark_all"}}),e._v(" "),n("EdCheck",{directives:[{name:"show",rawName:"v-show",value:e.isTestMethodSelected("code"),expression:"isTestMethodSelected('code')"}],staticClass:"ched-checkbox",attrs:{disabled:e.loading,label:"Overlay Test Files"},model:{value:e.model.tickets.mark_standard.overlay,callback:function(t){e.$set(e.model.tickets.mark_standard,"overlay",t)},expression:"model.tickets.mark_standard.overlay"}}),e._v(" "),n("EdCheck",{staticClass:"ched-checkbox",attrs:{disabled:e.loading,label:"Per-testcase Scores"},model:{value:e.model.settings.per_testcase_scores,callback:function(t){e.$set(e.model.settings,"per_testcase_scores",t)},expression:"model.settings.per_testcase_scores"}})],1),e._v(" "),n("div",{staticClass:"ched-field"},[n("EdButton",{on:{click:function(t){e.guiTestcasesEditor=!e.guiTestcasesEditor}}},[e._v("Show "+e._s(e.guiTestcasesEditor?"JSON":"Testcases"))])],1),e._v(" "),e.guiTestcasesEditor?n("EditorTestcasesGui",{attrs:{loading:e.loading,testcases:e.tests,"selected-testcase":e.selectedTestcase,"command-placeholder":e.model.tickets.run_standard.run_command,"test-method":e.model.type,"check-type":"","per-testcase-scores":e.model.settings.per_testcase_scores},on:{"new-testcase":e.newTestcase,"delete-testcase":e.deleteTestcase,"selected-testcase":e.onSelectedTestcase}}):n("EditorTestcasesJson",{attrs:{testcases:e.tests},on:{update:e.onTestcasesUpdate}}),e._v(" "),e.isTestMethodSelected("code")?n("div",{staticClass:"ched-field"},[n("label",[e._v("Acceptable Line Errors")]),e._v(" "),n("EdInput",{attrs:{disabled:e.loading,spellcheck:"false"},model:{value:e.lineErrors,callback:function(t){e.lineErrors=e._n(t)},expression:"lineErrors"}})],1):e._e()]:e._e()],e._v(" "),e.model.features.feedback?[n("h2",{staticClass:"ched",attrs:{id:"rubric"}},[e._v("Rubric")]),e._v(" "),n("p",{staticClass:"ched-description"},[e._v("\n\t\t\t\t\tThe marking rubric is used for manual marking of submissions.\n\t\t\t\t")]),e._v(" "),n("div",{staticClass:"ched-field"},[n("label",[e._v("Max Mark")]),e._v(" "),n("EdInput",{staticClass:"ched-input-medium",attrs:{disabled:e.loading,spellcheck:"false"},model:{value:e.model.settings.max_mark,callback:function(t){e.$set(e.model.settings,"max_mark",e._n(t))},expression:"model.settings.max_mark"}})],1),e._v(" "),n("h3",{staticClass:"ched"},[e._v("Criteria")]),e._v(" "),n("p",{staticClass:"ched-description"},[e._v("\n\t\t\t\t\tSpecify the criteria that the "+e._s(e.typeText)+" should be marked against.\n\t\t\t\t")]),e._v(" "),n("RubricEditor",{model:{value:e.model.settings.criteria,callback:function(t){e.$set(e.model.settings,"criteria",t)},expression:"model.settings.criteria"}})]:e._e(),e._v(" "),["challenge","assessment"].includes(e.type)?[n("h2",{staticClass:"ched",attrs:{id:"accesscontrol"}},[e._v("Access Control")]),e._v(" "),n("div",{staticClass:"ched-field"},[n("EdCheck",{staticClass:"ched-checkbox",attrs:{label:"Sequential Completion",description:"Require previous "+e.typePlural+" in this category to be completed before this "+e.typeText+" can be accessed.",disabled:e.loading},model:{value:e.model.sequential_completion,callback:function(t){e.$set(e.model,"sequential_completion",t)},expression:"model.sequential_completion"}})],1),e._v(" "),n("div",{staticClass:"ched-field"},[n("EdCheck",{staticClass:"ched-checkbox",attrs:{label:"Unavailable After Completion",description:"The "+e.typeText+" will not be accessible to the student once they have completed it.",disabled:e.loading},model:{value:e.model.unavailable_after_completion,callback:function(t){e.$set(e.model,"unavailable_after_completion",t)},expression:"model.unavailable_after_completion"}})],1),e._v(" "),e.course.features.exams&&"assessment"===e.type?n("div",{staticClass:"ched-field"},[n("EdCheck",{staticClass:"ched-checkbox",attrs:{label:"Examination",description:"This assessment will only be visible to students at the time of their assigned lab.",disabled:e.loading},model:{value:e.model.is_exam,callback:function(t){e.$set(e.model,"is_exam",t)},expression:"model.is_exam"}})],1):e._e(),e._v(" "),e.model.is_exam?n("div",{staticClass:"ched-field"},[n("EdCheck",{staticClass:"ched-checkbox",attrs:{label:"Lab Reset",description:"Reset challenge attempt to scaffold at beginning of lab for students. Only submissions made during the lab will be visible. The assessment will be visible to students outside of their lab time, but it will be readonly.",disabled:e.loading},model:{value:e.model.lab_reset,callback:function(t){e.$set(e.model,"lab_reset",t)},expression:"model.lab_reset"}})],1):e._e(),e._v(" "),n("h3",{staticClass:"ched"},[e._v("Password")]),e._v(" "),n("p",{staticClass:"ched-description"},[e._v("\n\t\t\t\t\tIf you set a password, students will be required to enter the password\n\t\t\t\t\tin order to access this "+e._s(e.type)+".\n\t\t\t\t")]),e._v(" "),n("div",{staticClass:"ched-field"},[n("EdCheck",{attrs:{label:"Show password field"},model:{value:e.passwordVisible,callback:function(t){e.passwordVisible=t},expression:"passwordVisible"}})],1),e._v(" "),n("Message",{directives:[{name:"show",rawName:"v-show",value:!e.passwordVisible&&e.model.password,expression:"!passwordVisible && model.password"}],staticClass:"ched-message"},[e._v("A password is set.")]),e._v(" "),n("EdInput",{directives:[{name:"show",rawName:"v-show",value:e.passwordVisible,expression:"passwordVisible"}],staticClass:"ched-password",attrs:{disabled:e.loading,autocomplete:"off"},model:{value:e.model.password,callback:function(t){e.$set(e.model,"password",t)},expression:"model.password"}}),e._v(" "),n("h3",{staticClass:"ched"},[e._v("Tutorial Regex")]),e._v(" "),n("p",{staticClass:"ched-description"},[e._v("\n\t\t\t\t\tThis "+e._s(e.type)+" will only be visible to students in courses that match\n\t\t\t\t\tthe following regular expression.\n\t\t\t\t")]),e._v(" "),n("EdInput",{attrs:{disabled:e.loading},model:{value:e.model.tutorial_regex,callback:function(t){e.$set(e.model,"tutorial_regex",t)},expression:"model.tutorial_regex"}}),e._v(" "),e.model.is_exam?[n("h3",{staticClass:"ched",attrs:{id:"exam"}},[e._v("Lab Visibility")]),e._v(" "),n("table",{staticClass:"ched-table-layout",attrs:{role:"presentation"}},[n("tr",[n("th",[e._v("Lab Category")]),e._v(" "),n("td",[n("EdSelect",{attrs:{disabled:e.loading},model:{value:e.model.lab_category,callback:function(t){e.$set(e.model,"lab_category",t)},expression:"model.lab_category"}},[n("option",{attrs:{value:""}},[e._v("(Any)")]),e._v(" "),e.labCategories.length&&!e.labCategories.includes(e.model.lab_category)?n("option",{attrs:{disabled:""},domProps:{value:e.model.lab_category}},[e._v(e._s(e.model.lab_category)+" (Invalid)")]):e._e(),e._v(" "),e._l(e.labCategories,(function(t){return n("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])}))],2)],1)]),e._v(" "),n("tr",[n("th",[e._v("Lab Name Regex")]),e._v(" "),n("td",[n("EdInput",{staticClass:"ched-input-code",attrs:{disabled:e.loading},model:{value:e.model.lab_name_regex,callback:function(t){e.$set(e.model,"lab_name_regex",t)},expression:"model.lab_name_regex"}})],1)])]),e._v(" "),e.visibleLabNamesError?n("Message",{staticClass:"ched-message",attrs:{type:"error"}},[e._v(e._s(e.visibleLabNamesError))]):n("Message",{staticClass:"ched-message"},[e._v("\n\t\t\t\t\t\tAssessment will be visible to the following labs:\n\t\t\t\t\t\t"),e.visibleLabNamesLoading?n("strong",[e._v("(Loading...)")]):e.visibleLabNames.length?n("Join",{attrs:{items:e.visibleLabNames,separator:", "},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.item;return[n("strong",[e._v(e._s(s))])]}}],null,!1,2709058869)}):n("strong",[e._v("(None)")])],1),e._v(" "),n("h3",{staticClass:"ched",attrs:{id:"exam"}},[e._v("Machine Visibility")]),e._v(" "),n("table",{staticClass:"ched-table-layout",attrs:{role:"presentation"}},[n("tr",[n("th",[e._v("LAN IP Address")]),e._v(" "),n("td",[n("EdSelect",{attrs:{disabled:e.loading},model:{value:e.model.exam_visibility,callback:function(t){e.$set(e.model,"exam_visibility",t)},expression:"model.exam_visibility"}},[n("option",{attrs:{value:"any"}},[e._v("(Any)")]),e._v(" "),n("option",{attrs:{value:"ip_odd"}},[e._v("Odd")]),e._v(" "),n("option",{attrs:{value:"ip_even"}},[e._v("Even")])])],1)]),e._v(" "),"any"!==e.model.exam_visibility?n("tr",[n("th"),e._v(" "),n("td",[n("EdCheck",{attrs:{label:"Alternate each hour",disabled:e.loading},model:{value:e.model.exam_visibility_alternate_hour,callback:function(t){e.$set(e.model,"exam_visibility_alternate_hour",t)},expression:"model.exam_visibility_alternate_hour"}})],1)]):e._e()]),e._v(" "),n("Message",{staticClass:"ched-message"},["any"===e.model.exam_visibility?[e._v("\n\t\t\t\t\t\t\tAssessment will be visible in exam mode to "),n("strong",[e._v("all")]),e._v(" machines.\n\t\t\t\t\t\t")]:"ip_even"===e.model.exam_visibility?[e.model.exam_visibility_alternate_hour?[e._v("\n\t\t\t\t\t\t\t\tAssessment will be visible in exam mode to machines with "),n("strong",[e._v("even IP addresses on even hours")]),e._v(" and "),n("strong",[e._v("odd IP addresses on odd hours")]),e._v(".\n\t\t\t\t\t\t\t")]:[e._v("\n\t\t\t\t\t\t\t\tAssessment will be visible in exam mode to machines with "),n("strong",[e._v("even IP addresses")]),e._v(".\n\t\t\t\t\t\t\t")]]:"ip_odd"===e.model.exam_visibility?[e.model.exam_visibility_alternate_hour?[e._v("\n\t\t\t\t\t\t\t\tAssessment will be visible in exam mode to machines with "),n("strong",[e._v("odd IP addresses on even hours")]),e._v(" and "),n("strong",[e._v("even IP addresses on odd hours")]),e._v(".\n\t\t\t\t\t\t\t")]:[e._v("\n\t\t\t\t\t\t\t\tAssessment will be visible in exam mode to machines with "),n("strong",[e._v("odd IP addresses")]),e._v(".\n\t\t\t\t\t\t\t")]]:e._e()],2)]:e._e()]:e._e(),e._v(" "),e.isUserAdmin?[n("h2",{staticClass:"ched"},[e._v("Advanced")]),e._v(" "),n("Message",{staticClass:"ched-message",attrs:{type:"warning"}},[e._v("Ed admins only")]),e._v(" "),n("h3",{staticClass:"ched"},[e._v("Run Box Limit")]),e._v(" "),n("table",{staticClass:"ched-table-layout",attrs:{role:"presentation"}},[n("tr",[n("th",[e._v("Preset")]),e._v(" "),n("td",[n("EdInput",{attrs:{disabled:e.loading,spellcheck:"false"},model:{value:e.runPreset,callback:function(t){e.runPreset=t},expression:"runPreset"}})],1)]),e._v(" "),n("tr",[n("th",[e._v("CPU Time")]),e._v(" "),n("td",[n("EdInput",{attrs:{disabled:e.loading,spellcheck:"false"},model:{value:e.runCpuTime,callback:function(t){e.runCpuTime=e._n(t)},expression:"runCpuTime"}})],1)]),e._v(" "),n("tr",[n("th",[e._v("Wall Time")]),e._v(" "),n("td",[n("EdInput",{attrs:{disabled:e.loading,spellcheck:"false"},model:{value:e.runWallTime,callback:function(t){e.runWallTime=e._n(t)},expression:"runWallTime"}})],1)])]),e._v(" "),n("h3",{staticClass:"ched"},[e._v("Mark Box Limit")]),e._v(" "),n("table",{staticClass:"ched-table-layout",attrs:{role:"presentation"}},[n("tr",[n("th",[e._v("Preset")]),e._v(" "),n("td",[n("EdInput",{attrs:{disabled:e.loading,spellcheck:"false"},model:{value:e.markPreset,callback:function(t){e.markPreset=t},expression:"markPreset"}})],1)]),e._v(" "),n("tr",[n("th",[e._v("CPU Time")]),e._v(" "),n("td",[n("EdInput",{attrs:{disabled:e.loading,spellcheck:"false"},model:{value:e.markCpuTime,callback:function(t){e.markCpuTime=e._n(t)},expression:"markCpuTime"}})],1)]),e._v(" "),n("tr",[n("th",[e._v("Wall Time")]),e._v(" "),n("td",[n("EdInput",{attrs:{disabled:e.loading,spellcheck:"false"},model:{value:e.markWallTime,callback:function(t){e.markWallTime=e._n(t)},expression:"markWallTime"}})],1)])])]:e._e()],2),e._v(" "),"lesson"!==e.type?n("div",{staticClass:"ched-layout-aside"},[n("div",{ref:"sidebar",staticClass:"ched-sb"},[n("div",{ref:"sidebarHighlight",staticClass:"ched-sb-section-highlight"}),e._v(" "),n("div",{staticClass:"ched-sb-section"},[n("a",{staticClass:"ched-sb-section-title",attrs:{href:e.$route.path+"#title"}},[e._v("Title")]),e._v(" "),n("div",{staticClass:"ched-sb-section-item",class:{error:!e.model.title}},[e._v(e._s(e.model.title||"Empty"))])]),e._v(" "),"lesson"!==e.type?n("div",{staticClass:"ched-sb-section"},[n("a",{staticClass:"ched-sb-section-title",attrs:{href:e.$route.path+"#category"}},[e._v("Category")]),e._v(" "),n("div",{staticClass:"ched-sb-section-item",class:{error:!e.model.category}},[e._v(e._s(e.model.category||"Empty"))])]):e._e(),e._v(" "),"assessment"===e.type?n("div",{staticClass:"ched-sb-section"},[n("a",{staticClass:"ched-sb-section-title",attrs:{href:e.$route.path+"#outline"}},[e._v("Outline")])]):e._e(),e._v(" "),n("div",{staticClass:"ched-sb-section"},[n("a",{staticClass:"ched-sb-section-title",attrs:{href:e.$route.path+"#description"}},[e._v("Description")])]),e._v(" "),n("div",{staticClass:"ched-sb-section"},[n("a",{staticClass:"ched-sb-section-title",attrs:{href:e.$route.path+"#scaffold"}},[e._v("Scaffold")])]),e._v(" "),"lesson"!==e.type?[n("div",{staticClass:"ched-sb-section"},[n("a",{staticClass:"ched-sb-section-title",attrs:{href:e.$route.path+"#solution"}},[e._v("Solution")])]),e._v(" "),n("div",{staticClass:"ched-sb-section"},[n("a",{staticClass:"ched-sb-section-title",attrs:{href:e.$route.path+"#explanation"}},[e._v("Explanation")])])]:e._e(),e._v(" "),n("div",{staticClass:"ched-sb-section"},[n("a",{staticClass:"ched-sb-section-title",attrs:{href:e.$route.path+"#features"}},[e._v("Features")]),e._v(" "),n("div",{staticClass:"ched-sb-section-item"},[e._v(e._s(e.featuresLabel))])]),e._v(" "),e.pointsEnabled?n("div",{staticClass:"ched-sb-section"},[n("a",{staticClass:"ched-sb-section-title",attrs:{href:e.$route.path+"#points"}},[e._v("Points Calculation")])]):e._e(),e._v(" "),e.isTestMethodSelected("web")?e._e():n("div",{staticClass:"ched-sb-section"},[n("a",{staticClass:"ched-sb-section-title",attrs:{href:e.$route.path+"#commands"}},[e._v("Commands")])]),e._v(" "),!e.isTestMethodSelected("web")&&e.course.features.challenge_services?n("div",{staticClass:"ched-sb-section"},[n("a",{staticClass:"ched-sb-section-title",attrs:{href:e.$route.path+"#services"}},[e._v("Services")])]):e._e(),e._v(" "),e.isTestMethodSelected("postgres")?e._e():[e.isTestMethodSelected("web")?e._e():n("div",{staticClass:"ched-sb-section"},[n("a",{staticClass:"ched-sb-section-title",attrs:{href:e.$route.path+"#testmethod"}},[e._v("Test Method")]),e._v(" "),n("div",{staticClass:"ched-sb-section-item"},[e._v(e._s(e.testMethodLabel))])])],e._v(" "),n("div",{staticClass:"ched-sb-section"},[n("a",{staticClass:"ched-sb-section-title",attrs:{href:e.$route.path+"#testfiles"}},[e._v("Test Files")])]),e._v(" "),e.isTestMethodSelected("code","postgres")?n("div",{staticClass:"ched-sb-section"},[n("a",{staticClass:"ched-sb-section-title",attrs:{href:e.$route.path+"#testcases"}},[e._v("Test Configuration")]),e._v(" "),n("div",{staticClass:"ched-sb-section-item"},[e._v(e._s(e.tests.length)+" "+e._s(e.pluralize(e.tests.length,"testcase")))])]):e._e(),e._v(" "),e.model.features.feedback?n("div",{staticClass:"ched-sb-section"},[n("a",{staticClass:"ched-sb-section-title",attrs:{href:e.$route.path+"#rubric"}},[e._v("Rubric")])]):e._e(),e._v(" "),["challenge","assessment"].includes(e.type)?n("div",{staticClass:"ched-sb-section"},[n("a",{staticClass:"ched-sb-section-title",attrs:{href:e.$route.path+"#accesscontrol"}},[e._v("Access Control")])]):e._e(),e._v(" "),n("EdButton",{staticClass:"ched-sb-btn primary",attrs:{disabled:e.loading},on:{click:function(t){return e.$emit("save")}}},[e._v("Save")])],2)]):e._e()]):e._e()],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("strong",[t("code",[this._v("Submission")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("strong",[t("code",[this._v("Scaffold")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"ched-description"},[e._v("\n\t\t\t\t\tAll students use the same "),n("em",[n("code",[e._v("Submission")])]),e._v(" repository path for this challenge. It is initialised with the challenge's scaffold code.\n\t\t\t\t\tWhen the student pushes into the "),n("code",[n("em",[e._v("master")])]),e._v(" branch of the "),n("code",[n("em",[e._v("Submission")])]),e._v(" repository, the code at the "),n("code",[e._v("HEAD")]),e._v(" of the "),n("code",[n("em",[e._v("master")])]),e._v(" branch is submitted for marking.\n\t\t\t\t")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"ched-description"},[this._v("\n\t\t\t\t\tIf the instructor updates the scaffold code, the changes are commited to the "),t("code",[t("em",[this._v("Scaffold")])]),this._v(" repository.\n\t\t\t\t\tStudents can pull these changes by directly cloning the "),t("code",[t("em",[this._v("Scaffold")])]),this._v(" repository or by adding it as another Git remote.\n\t\t\t\t\tThey can then rebase or merge these changes into their own code.\n\t\t\t\t")])},function(){var e=this.$createElement,t=this._self._c||e;return t("strong",[t("code",[this._v("Student")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"ched-description"},[this._v("\n\t\t\t\t\tCourse staff can clone and push into individual student repositories by substituting the student's email into the "),t("code",[this._v("{email}")]),this._v(" field.\n\t\t\t\t\tCourse staff can also push into the "),t("code",[t("em",[this._v("Scaffold")])]),this._v(" repository to update the scaffold.\n\t\t\t\t")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"ched-description"},[this._v("\n\t\t\t\t\t\tEd will run the student's query as specified in the "),t("em",[this._v("Attempt")]),this._v(" and compare the results with the query specified in "),t("em",[this._v("Solution")]),this._v(".\n\t\t\t\t\t")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"ched-description"},[this._v("\n\t\t\t\t\t\tEd will run the student's query as specified in the "),t("em",[this._v("Attempt")]),this._v(" and compare the results with the query specified in "),t("em",[this._v("Solution")]),this._v(". Ed will compare the database objects created as well as their changes automatically. This works for tables, views as well as their associated columns, indices and constraints.\n\t\t\t\t\t")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"ched-description"},[this._v("\n\t\t\t\t\t\tYou can provide your own comparison method in the form of a query by providing a "),t("em",[this._v("Check Query")]),this._v(" in the testcases. This will allow you to test objects that cannot be compared automatically such as stored procedures. If this is provided, Ed will compare the results of the "),t("em",[this._v("Check Query")]),this._v(" between the student's attempt and the solution.\n\t\t\t\t\t")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"ched-description"},[e._v("\n\t\t\t\t\t\t\tPostgreSQL connection settings will be set in the following environmental variables:\n\t\t\t\t\t\t\t"),n("ul",[n("li",[n("strong",[n("code",[e._v("PGHOST")])]),e._v(" — Server host\n\t\t\t\t\t\t\t\t")]),e._v(" "),n("li",[n("strong",[n("code",[e._v("PGUSER")])]),e._v(" — User name\n\t\t\t\t\t\t\t\t")]),e._v(" "),n("li",[n("strong",[n("code",[e._v("PGDATABASE")])]),e._v(" — Database name\n\t\t\t\t\t\t\t\t")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"ched-description"},[e._v("\n\t\t\t\t\t\t\tMySQL (MariaDB) connection settings will be set in the following environmental variables:\n\t\t\t\t\t\t\t"),n("ul",[n("li",[n("strong",[n("code",[e._v("MYSQL_SOCKET")])]),e._v(" — Server host\n\t\t\t\t\t\t\t\t")]),e._v(" "),n("li",[n("strong",[n("code",[e._v("MYSQL_USER")])]),e._v(" — User name\n\t\t\t\t\t\t\t\t")]),e._v(" "),n("li",[n("strong",[n("code",[e._v("MYSQL_DATABASE")])]),e._v(" — Database name\n\t\t\t\t\t\t\t\t")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v('\n\t\t\t\t\t\t\t\tCreate your PyUnit testing scripts in the workspace below. Scripts containing\n\t\t\t\t\t\t\t\ttests must have a filename that begins with "'),t("code",[this._v("test")]),this._v('".\n\t\t\t\t\t\t\t')])}],!1,null,null,null));t.a=ue.exports},CXe4:function(e,t,n){"use strict";n("/SVr");var s=n("KHd+"),i=Object(s.a)({},(function(e,t){var n=t._c;return n("div",{staticClass:"start-terms"},[t._v("\n\tBy registering, you agree to the"),n("br"),t._v(" "),n("RouterLink",{attrs:{to:{name:"privacy"},target:"_blank"}},[t._v("privacy policy")]),t._v("\n\tand\n\t"),n("RouterLink",{attrs:{to:{name:"terms"},target:"_blank"}},[t._v("terms of service")]),t._v(".\n")],1)}),[],!0,null,null,null);t.a=i.exports},CYdp:function(e,t,n){"use strict";var s=n("GY5Y");n.n(s).a},CZo1:function(e,t,n){},CaVB:function(e,t,n){},Cf05:function(e,t,n){"use strict";n("ogGO");var s=n("KHd+"),i=Object(s.a)({},(function(e,t){return(0,t._c)("div",{staticClass:"challenge-docs"},[t._t("default")],2)}),[],!0,null,null,null);t.a=i.exports},CfgT:function(e,t,n){"use strict";var s,i=n("IbLZ"),r=n("qJ5K"),a=n("gD3A"),o=n("5G72"),l={props:{value:{type:null,required:!0,validator:function(e){return null==e||"string"==typeof e}},placeholder:{type:String,default:null},formatted:{type:Boolean,required:!0},autohideToolbar:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},etcTools:{type:Boolean,default:!1}},render:function(e){var t=this;return this.formatted?e(a.a,{class:"quiz-formatted-input",attrs:{value:this.value,autohideToolbar:this.autohideToolbar,etcTools:this.etcTools},on:{input:function(e){t.$emit("input",e)}}}):e(o.a,{class:"quiz-formatted-input",attrs:{value:this.value,placeholder:this.placeholder||"",disabled:this.disabled},on:{input:function(e){t.$emit("input",e)}}})}},c=(n("uSvj"),n("KHd+")),u=Object(c.a)(l,void 0,void 0,!1,null,null,null).exports,d=n("nu3u"),h=n("rePB"),p=(n("ma9I"),n("TeQF"),n("yq1k"),n("4mDm"),n("2B1R"),n("pDQq"),n("07d7"),n("YGK4"),n("JTJg"),n("PKPk"),n("3bBZ"),n("KQm4")),f=n("Pa8A"),m=n("5/Cn"),v=n("ocVH"),b={props:{value:{type:null,required:!0},editable:{type:Boolean,default:!1},assessible:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},spans:{type:Array,default:void 0},etcTools:{type:Boolean,default:!1}},computed:{},watch:{errorMessage:{immediate:!0,handler:function(e){this.$emit("valid",!e)}}},methods:{validate:function(){var e=!this.value.content||v.a(this.value.content)?"Question content cannot be empty.":this.errorMessage;return!e||(m.a({icon:"warning",title:"Question incomplete",text:e}),!1)}}},g=n("WmPt"),y=n("6XG0"),w=n("oLoy"),_=n("4K9I"),k=n("/jHr"),C={directives:{Tooltip:f.a},components:{Icon:g.a,EdCheck:y.a,EdRadio:w.a,EdButton:_.a,FormattedDisplay:r.a,FormattedInput:u},extends:b,computed:{items:function(){var e=this;return this.value.answers.map((function(t,n){return{content:t,correct:e.assessible&&e.value.solution.includes(n)}}))},errorMessage:function(){var e=this;return this.value.answers.some((function(t){return v.a(t,e.value.formatted)}))?"One or more of the answers is empty. Ensure every answer has some text.":!this.assessible||this.value.multipleSelection||this.value.solution.length?null:"You must select a correct answer to the question."}},watch:{value:{immediate:!0,handler:function(e){e&&(this.assessible?e.solution||(e.solution=[]):e.solution=null)}}},methods:{onMultipleSelectionInput:function(e){!e&&this.assessible&&this.value.solution.length>1&&(this.value.solution=[Math.min.apply(Math,Object(p.a)(this.value.solution))]),this.value.multipleSelection=e},onAnswerCorrectInput:function(e){if(this.assessible){var t=new Set(this.value.solution);this.value.multipleSelection?this.value.solution=t.has(e)?Object(p.a)(t.keys()).filter((function(t){return t!==e})):Object(p.a)(t.keys()).concat(e):this.value.solution=t.has(e)?[]:[e]}},updateSolution:function(){var e=this;return this.value.solution.filter((function(t){return t<e.value.answers.length}))},addAnswer:function(){this.value.answers.push("")},deleteAnswer:function(e){this.value.answers.length<=1?m.a({icon:"warning",title:"Cannot delete answer",text:"You must have at least one answer."}):(this.value.answers.splice(e,1),this.value.solution=this.value.solution.filter((function(t){return t!==e})))},convertToFormatted:function(){for(var e=this.value.answers,t=0;t<e.length;t++)e[t]=k.b(e[t]||"")},convertToUnformatted:function(){for(var e=this.value.answers,t=0;t<e.length;t++)e[t]=e[t]?k.f(e[t]):""}}},x=(n("oVwF"),Object(c.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quiz-question-edit-mc"},[n("table",{staticClass:"qqemc-answers"},[n("colgroup",[n("col",{staticClass:"qqemc-answer-col-number"}),e._v(" "),n("col",{staticClass:"qqemc-answer-col-content"}),e._v(" "),e.editable&&e.assessible?n("col",{staticClass:"qqemc-answer-col-correct"}):e._e(),e._v(" "),e.editable?n("col",{staticClass:"qqemc-answer-col-delete"}):e._e()]),e._v(" "),n("thead",[n("tr",[n("th",{staticClass:"qqemc-answer-col-number",attrs:{colspan:"2"}},[e._v("Answer choices")]),e._v(" "),e.assessible&&e.editable?n("th",{staticClass:"qqemc-answer-col-correct"},[e._v("Correct?")]):e._e(),e._v(" "),e.editable?n("th",{staticClass:"qqemc-answer-col-delete"}):e._e()])]),e._v(" "),n("tbody",e._l(e.items,(function(t,s){return n("tr",{key:s,staticClass:"qqemc-answer",class:{correct:t.correct}},[n("td",{staticClass:"qqemc-answer-col-number"}),e._v(" "),n("td",{staticClass:"qqemc-answer-col-content"},[e.editable?n("FormattedInput",{attrs:{disabled:e.disabled,formatted:e.value.formatted,"autohide-toolbar":"","etc-tools":""},model:{value:e.value.answers[s],callback:function(t){e.$set(e.value.answers,s,t)},expression:"value.answers[i]"}}):n("FormattedDisplay",{attrs:{formatted:e.value.formatted,value:t.content,spans:e.spans}})],1),e._v(" "),e.editable?[e.assessible?n("td",{staticClass:"qqemc-answer-col-correct"},[e.value.multipleSelection?n("EdCheck",{attrs:{disabled:e.disabled,value:t.correct},on:{input:function(t){return e.onAnswerCorrectInput(s)}}}):n("EdRadio",{attrs:{disabled:e.disabled,value:t.correct},on:{input:function(t){return e.onAnswerCorrectInput(s)}}})],1):e._e(),e._v(" "),n("td",{staticClass:"qqemc-answer-col-delete"},[n("Icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Delete",expression:"'Delete'"}],staticClass:"qqemc-icon-btn",attrs:{icon:"cross"},on:{click:function(t){return e.deleteAnswer(s)}}})],1)]:e._e()],2)})),0)]),e._v(" "),e.editable?n("div",{staticClass:"qqemc-foot"},[n("EdButton",{attrs:{disabled:e.disabled},on:{click:e.addAnswer}},[e._v("Add Answer")]),e._v(" "),n("EdCheck",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"If checked, the student will be able to select zero or more answers",expression:"'If checked, the student will be able to select zero or more answers'"}],staticClass:"qqemc-multiple-answers",attrs:{label:"Multiple answer selection",disabled:e.disabled,value:e.value.multipleSelection},on:{input:e.onMultipleSelectionInput}})],1):e._e()])}),[],!1,null,null,null).exports),j={components:{EdField:i.a,EdRadio:w.a},extends:b,computed:{errorMessage:function(){if(this.assessible&&null==this.value.solution)return"You must select a correct answer to the question."}},methods:{onAnswerInput:function(e){this.value.solution=this.value.solution===e?null:e}}},O=(n("Zqso"),Object(c.a)(j,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quiz-question-edit-tf"},[e.assessible?[e.editable?n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Answer")]},proxy:!0}],null,!1,1754318919)},[e._v(" "),n("div",{staticClass:"qqetf-radios"},[n("EdRadio",{staticClass:"qqetf-radio",attrs:{disabled:e.disabled,value:!0===e.value.solution,label:"True"},on:{input:function(t){return e.onAnswerInput(!0)}}}),e._v(" "),n("EdRadio",{staticClass:"qqetf-radio",attrs:{disabled:e.disabled,value:!1===e.value.solution,label:"False"},on:{input:function(t){return e.onAnswerInput(!1)}}})],1)]):null!=e.value.solution?n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Answer")]},proxy:!0}],null,!1,1754318919)},[e._v(" "),n("div",{staticClass:"qqetf-answer"},[e._v(e._s(e.value.solution?"True":"False"))])]):e._e()]:e._e()],2)}),[],!1,null,null,null).exports),S=(n("TWNs"),n("JfAA"),n("SYor"),n("pNMO"),n("4Brf"),n("0oug"),n("EnZy"),n("o0o1")),E=n.n(S),T=(n("ls82"),n("HaE+")),I=n("sEfC"),D=n.n(I),P=n("ODXe"),A=(n("p77/"),n("VrN/")),N=n.n(A),R={props:{value:{type:String,default:""},highlights:{type:Array,default:function(){return[]}}},watch:{value:"updateViewValue",highlights:"updateHighlights"},mounted:function(){var e=this;this.cm=new N.a(this.$el,{mode:""}),this.cm.on("change",(function(){return e.updateModelValue()})),this.markers=[],this.updateViewValue(),this.updateHighlights()},methods:{updateModelValue:function(){var e=this.cm.getValue();this.value!==e&&this.$emit("input",e)},updateViewValue:function(){this.value!==this.cm.getValue()&&this.cm.setValue(this.value)},updateHighlights:function(){var e=this,t=!0,n=!1,s=void 0;try{for(var i,r=this.markers[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){i.value.clear()}}catch(o){n=!0,s=o}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}var a={className:"hltb-highlight"};this.markers=this.highlights.map((function(t){var n=Object(P.a)(t,2),s=n[0],i=n[1];return e.cm.markText(e.cm.posFromIndex(s),e.cm.posFromIndex(i),a)}))}}},M=(n("OK6C"),{components:{HighlightedTextbox:Object(c.a)(R,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"highlighted-textbox"})}),[],!1,null,null,null).exports},inject:["miscApi"],props:{regex:{type:String,default:""},value:{type:String,default:""}},data:function(){return{highlights:[]}},watch:{regex:function(){this.updateDebounced()},value:function(){this.updateDebounced()}},created:function(){this.updateDebounced=D()(this.update,500),this.update()},methods:{update:(s=Object(T.a)(E.a.mark((function e(){var t,n,s,i,r,a,o=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.regex,n=this.value,t&&n){e.next=4;break}return this.highlights=[],e.abrupt("return");case 4:return s=function(){return o.regex!==t||o.value!==n},i=n.split("\n"),e.prev=6,e.next=9,this.miscApi.regexMatch(t,i);case 9:r=e.sent,e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(6),s()||(this.highlights=[]),e.abrupt("return");case 16:if(!s()){e.next=18;break}return e.abrupt("return");case 18:a=0,this.highlights=r.reduce((function(e,t,n){var s=!0,r=!1,o=void 0;try{for(var l,c=t[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var u=l.value;e.push([a+u[0],a+u[1]])}}catch(d){r=!0,o=d}finally{try{s||null==c.return||c.return()}finally{if(r)throw o}}return a+=i[n].length+1,e}),[]);case 20:case"end":return e.stop()}}),e,this,[[6,12]])}))),function(){return s.apply(this,arguments)})}}),L=Object(c.a)(M,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("HighlightedTextbox",{staticClass:"regex-tester",attrs:{value:e.value,highlights:e.highlights},on:{input:function(t){return e.$emit("input",t)}}})}),[],!1,null,null,null).exports,F={components:{EdField:i.a,EdCheck:y.a,RegexTester:L,FormattedInput:u},extends:b,computed:{errorMessage:function(){if(this.assessible&&(!this.value.solution||!this.value.solution.trim()))return"Solution cannot be empty.";if(this.value.regex)try{new RegExp(this.value.solution)}catch(e){return"Regular expression is invalid."}}}},B=(n("lDZM"),Object(c.a)(F,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quiz-question-edit-sa"},[e.assessible?[e.editable?[n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Answer")]},proxy:!0}],null,!1,1754318919)},[e._v(" "),n("EdCheck",{staticClass:"qqesa-check",attrs:{label:"Regular Expression",disabled:e.disabled},model:{value:e.value.regex,callback:function(t){e.$set(e.value,"regex",t)},expression:"value.regex"}}),e._v(" "),n("FormattedInput",{attrs:{"autohide-toolbar":"",formatted:!1,disabled:e.disabled},model:{value:e.value.solution,callback:function(t){e.$set(e.value,"solution",t)},expression:"value.solution"}})],1),e._v(" "),e.value.regex?n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Regex Testing")]},proxy:!0},{key:"description",fn:function(){return[e._v("\n\t\t\t\t\tEnter some example text in the textbox below to test the regular expression.\n\t\t\t\t\tYou can enter multiple lines for multiple examples.\n\t\t\t\t")]},proxy:!0}],null,!1,1501254986)},[e._v(" "),e._v(" "),n("RegexTester",{staticClass:"qqesa-regex-tester",attrs:{regex:e.value.solution},model:{value:e.value.examples,callback:function(t){e.$set(e.value,"examples",t)},expression:"value.examples"}})],1):e._e()]:e.value.solution?n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Answer")]},proxy:!0}],null,!1,1754318919)},[e._v(" "),n("p",[e._v(e._s(e.value.solution))])]):e._e()]:e._e()],2)}),[],!1,null,null,null).exports),q=n("xtk+"),$={components:{EdInput:q.a},extends:b,computed:{errorMessage:function(){return"number"!=typeof this.value.solution?"Answer must be a valid number.":"number"!=typeof this.value.tolerance?"Tolerance must be a valid number.":void 0}}},U=(n("8jmn"),Object(c.a)($,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quiz-question-edit-num"},[e.editable?n("table",{staticClass:"qqen-table-layout",attrs:{role:"presentation"}},[n("tr",[n("th",[e._v("Answer")]),e._v(" "),n("td",[n("EdInput",{attrs:{disabled:e.disabled},model:{value:e.value.solution,callback:function(t){e.$set(e.value,"solution",e._n(t))},expression:"value.solution"}})],1)]),e._v(" "),n("tr",[n("th",[e._v("Tolerance")]),e._v(" "),n("td",[n("EdInput",{attrs:{disabled:e.disabled},model:{value:e.value.tolerance,callback:function(t){e.$set(e.value,"tolerance",e._n(t))},expression:"value.tolerance"}})],1)]),e._v(" "),e._m(0)]):n("table",{staticClass:"qqen-table-layout",attrs:{role:"presentation"}},[n("tr",[n("th",[e._v("Answer")]),e._v(" "),n("td",[e._v(e._s(e.value.solution+(e.value.tolerance?" ± "+e.value.tolerance:"")))])])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("th"),this._v(" "),t("td",[t("div",{staticClass:"qqen-table-description"},[this._v("\n\t\t\t\t\tAnswers will be marked as correct if they are off by no more than the\n\t\t\t\t\ttolerance from the correct answer."),t("br"),this._v("Set tolerance to 0 to require the\n\t\t\t\t\tanswer to be exact.\n\t\t\t\t")])])])}],!1,null,null,null).exports),z=(n("yXV3"),{components:{Reorder:n("hukh").a,EdButton:_.a,EdInput:q.a},extends:b,data:function(){return{itemText:""}},computed:{displayText:function(){return this.value.items.join(", ")},solutionItems:function(){var e=this;return this.value.solution.map((function(t){return e.value.items[t]}))},errorMessage:function(){if(this.value.items.length<=1)return"You must enter at least 2 items to reorder."}},watch:{value:{immediate:!0,handler:function(e){e&&(this.assessible?e.solution||(e.solution=[]):e.solution=null)}}},methods:{addItem:function(){var e=this.itemText.trim();e&&(this.value.items.includes(e)?m.a({icon:"error",text:"There is already an item with that text. You cannot have duplicate items."}):(this.value.items.push(e),this.assessible&&this.value.solution.push(this.value.solution.length),this.itemText=""))},onItemSort:function(e){var t=this,n=e.oldIndex,s=e.newIndex,i=this.value.items.map((function(e,t){return t}));i.splice(n,1),i.splice(s,0,n);for(var r=[],a=0;a<i.length;a++)r[i[a]]=a;this.value.items=i.map((function(e){return t.value.items[e]})),this.assessible&&(this.value.solution=this.value.solution.map((function(e){return r[e]})))},onItemDelete:function(e){var t=this.value.items.indexOf(e);this.value.items.splice(t,1),this.assessible&&(this.value.solution=this.value.solution.filter((function(e){return e!==t})).map((function(e){return e>t?e-1:e})))},onSolutionItemSort:function(e){var t=this,n=e.oldIndex,s=e.newIndex,i=this.value.items.map((function(e,t){return t}));i.splice(n,1),i.splice(s,0,n),this.value.solution=i.map((function(e){return t.value.solution[e]}))},onSolutionItemDelete:function(e){this.onItemDelete(this.value.items[this.value.solution[this.solutionItems.indexOf(e)]])}}}),V=(n("fSrK"),Object(c.a)(z,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quiz-question-edit-reorder"},[e.editable?[n("table",{staticClass:"qqero-layout qqero-table-layout",attrs:{role:"presentation"}},[n("tr",[n("th",[e._v("Question item order")]),e._v(" "),e.assessible?n("th",[e._v("Correct item order")]):e._e()]),e._v(" "),n("tr",[e._m(0),e._v(" "),e.assessible?n("td",[n("div",{staticClass:"qqero-table-description"},[e._v("\n\t\t\t\t\t\tThe correct ordering to pass the question.\n\t\t\t\t\t")])]):e._e()]),e._v(" "),e.value.items.length?e._e():n("tr",[n("td",{staticClass:"qqero-no-items",attrs:{colspan:"2"}},[e._v("No items")])]),e._v(" "),n("tr",[n("td",[n("Reorder",{staticClass:"qqero-reorder",attrs:{value:e.value.items,readonly:e.disabled,deletable:""},on:{sort:e.onItemSort,delete:e.onItemDelete}})],1),e._v(" "),e.assessible?n("td",[n("Reorder",{staticClass:"qqero-reorder",attrs:{value:e.solutionItems,readonly:e.disabled,deletable:""},on:{sort:e.onSolutionItemSort,delete:e.onSolutionItemDelete}})],1):e._e()])]),e._v(" "),n("div",{staticClass:"qqero-input-layout"},[n("EdInput",{attrs:{placeholder:"New item text",disabled:e.disabled},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addItem(t)}},model:{value:e.itemText,callback:function(t){e.itemText=t},expression:"itemText"}}),e._v(" "),n("EdButton",{attrs:{disabled:e.disabled},on:{click:e.addItem}},[e._v("Add Item")])],1)]:n("div",{staticClass:"qqero-display"},e._l(e.value.items,(function(t,s){return n("div",{key:s,staticClass:"qqero-display-item"},[e._v(e._s(t))])})),0)],2)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("td",[t("div",{staticClass:"qqero-table-description"},[this._v("\n\t\t\t\t\t\tThe items will be shown to the student in this order.\n\t\t\t\t\t")])])}],!1,null,null,null).exports),H=(n("5DmW"),n("27RR"),n("tkto"),n("FZtP"),n("hSdx")),W=n("JQId");function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var K,Y={directives:{Tooltip:f.a},components:{Icon:g.a},extends:W.a,props:{value:{type:Array,default:null}},data:function(){return{selectedTool:"path",pathPoints:null,polyPoints:null,polyX:null,polyY:null,rectX1:null,rectY1:null,rectX2:null,rectY2:null}},computed:{tools:function(){var e=this;return[{icon:"tool-path",label:"Freehand Tool",name:"path"},{icon:"tool-poly",label:"Polygon Tool",name:"poly"},{icon:"tool-rect",label:"Rectangle Tool",name:"rect"}].map((function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{selected:t.name===e.selectedTool})}))},computedValue:function(){return this.value||[]},path:function(){switch(this.selectedTool){case"path":return this.renderPath();case"poly":return this.renderPoly();case"rect":return this.renderRect()}},helpHtmlUnsafe:function(){switch(this.selectedTool){case"path":return"Click and drag to define the freehand region.";case"poly":return"Click to set each point of the polygon. Press the <strong>Esc</strong> or <strong>Enter</strong> key to end.";case"rect":return"Click and drag to define the rectangular region."}}},methods:{onPointerDown:function(e,t){switch(this.selectedTool){case"path":this.pathDown(e,t);break;case"poly":this.polyDown(e,t);break;case"rect":this.rectDown(e,t)}},onPointerMove:function(e,t){switch(this.selectedTool){case"path":this.pathMove(e,t);break;case"poly":this.polyMove(e,t);break;case"rect":this.rectMove(e,t)}},onPointerUp:function(e,t){switch(this.selectedTool){case"path":this.pathUp(e,t);break;case"poly":this.polyUp(e,t);break;case"rect":this.rectUp(e,t)}},onPointerCancel:function(){"poly"===this.selectedTool&&this.polyEnd()},pathDown:function(e,t){this.pathPoints=[e,t]},pathMove:function(e,t){var n=this.pathPoints,s=e-n[n.length-2],i=t-n[n.length-1];s*s+i*i<.25||(n.push(e,t),n.splice(0,Math.max(0,n.length-400)))},pathUp:function(){this.releaseCapture(),this.$emit("input",this.pathPoints),this.pathPoints=null},renderPath:function(){return H.svgPathFromPolygon(this.pointerCaptured?this.pathPoints:this.computedValue,{close:!0})},polyDown:function(e,t){this.polyPoints=this.polyPoints||[],this.polyX=e,this.polyY=t},polyMove:function(e,t){this.polyX=e,this.polyY=t},polyUp:function(e,t){this.polyPoints.push(e,t),this.polyPoints.splice(0,Math.max(0,this.polyPoints.length-400))},polyEnd:function(){this.releaseCapture(),this.$emit("input",this.polyPoints),this.polyPoints=null},renderPoly:function(){return this.pointerCaptured?H.svgPathFromPolygon([].concat(Object(p.a)(this.polyPoints),[this.polyX,this.polyY]),{close:!0}):H.svgPathFromPolygon(this.computedValue,{close:!0})},rectDown:function(e,t){this.rectX1=this.rectX2=e,this.rectY1=this.rectY2=t},rectMove:function(e,t){this.rectX2=e,this.rectY2=t},rectUp:function(e,t){this.releaseCapture();var n=[this.rectX1,this.rectY1,e,this.rectY1,e,t,this.rectX1,t];this.$emit("input",n)},renderRect:function(){return this.pointerCaptured?H.svgPathFromRect(this.rectX1,this.rectY1,this.rectX2-this.rectX1,this.rectY2-this.rectY1):H.svgPathFromPolygon(this.computedValue,{close:!0})}}},G=(n("KVKJ"),Object(c.a)(Y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quiz-canvas-region",class:{editable:!e.readonly}},[e.readonly?e._e():n("div",{staticClass:"qcr-toolbar"},e._l(e.tools,(function(t){return n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.label,expression:"tool.label"}],key:t.name,staticClass:"qcr-tool",class:{selected:t.selected},on:{click:function(n){e.selectedTool=t.name}}},[n("Icon",{attrs:{icon:t.icon}})],1)})),0),e._v(" "),n("svg",{ref:"svg",staticClass:"qcr-svg",class:{editable:!e.readonly},style:e.style,attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:e.viewBox}},[e.imageUrl?n("image",{attrs:{"xlink:href":e.imageUrl,width:e.width,height:e.height}}):e._e(),e._v(" "),n("path",{attrs:{d:e.path,"vector-effect":"non-scaling-stroke"}})]),e._v(" "),e.readonly?e._e():n("div",{staticClass:"qcr-help",domProps:{innerHTML:e._s(e.helpHtmlUnsafe)}})])}),[],!1,null,null,null).exports),X=n("20nU"),J=n("9Arg"),Z={components:{EdField:i.a,EdButton:_.a,CanvasRegion:G},extends:b,inject:["fileApi"],data:function(){return{uploadingImage:!1}},computed:{errorMessage:function(){if(!this.value.imageUrl)return"You must upload an image that will be used as the backdrop for the canvas."}},methods:{uploadImage:function(){var e=this;this.uploadingImage||J.m(function(){var t=Object(T.a)(E.a.mark((function t(n){var s,i;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.size>e.fileApi.maxFileSize)){t.next=3;break}return m.a({icon:"warning",title:"File is too large",text:"Cannot upload this image because it is too large. The size of the file cannot exceed ".concat(H.humanizeFileSize(e.fileApi.maxFileSize),".")}),t.abrupt("return");case 3:return e.uploadingImage=!0,t.prev=4,t.next=7,e.fileApi.uploadFile(n);case 7:return i=t.sent,t.next=10,J.w("".concat(X.e,"/files/").concat(i.id));case 10:s=t.sent,t.next=17;break;case 13:return t.prev=13,t.t0=t.catch(4),m.a({icon:"error",title:"Unable to upload image",text:"Check your internet connection and try again."}),t.abrupt("return");case 17:return t.prev=17,e.uploadingImage=!1,t.finish(17);case 20:e.value.imageUrl=s.src,e.value.imageWidth=s.naturalWidth,e.value.imageHeight=s.naturalHeight;case 23:case"end":return t.stop()}}),t,null,[[4,13,17,20]])})));return function(e){return t.apply(this,arguments)}}(),{accept:["jpg","png","svg"]})}}},ee=(n("qC1I"),Object(c.a)(Z,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quiz-question-edit-hotspot",class:{editable:e.editable}},[e.editable?n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Background Image")]},proxy:!0},{key:"description",fn:function(){return[e._v("Upload the image file you want to use for this question.")]},proxy:!0}],null,!1,1378682129)},[e._v(" "),e._v(" "),n("EdButton",{attrs:{disabled:e.disabled||e.uploadingImage},on:{click:e.uploadImage}},[e._v("Choose Image")])],1):e._e(),e._v(" "),e.value.imageUrl?n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Canvas")]},proxy:!0}],null,!1,3770646515)},[e._v(" "),n("CanvasRegion",{staticClass:"qqshs-canvas",attrs:{"image-url":e.value.imageUrl,"image-width":e.value.imageWidth,"image-height":e.value.imageHeight,readonly:e.disabled||!e.editable},model:{value:e.value.solution,callback:function(t){e.$set(e.value,"solution",t)},expression:"value.solution"}})],1):e._e()],1)}),[],!1,null,null,null).exports),te={components:{EdField:i.a,EdCheck:y.a,EdButton:_.a},extends:b,inject:["fileApi"],data:function(){return{useImage:!1,imageUrl:"",uploadingImage:!1}},watch:{useImage:function(e){e||(this.value.imageUrl=null,this.value.imageWidth=0,this.value.imageHeight=0)}},created:function(){this.value.imageUrl&&(this.useImage=!0,this.imageUrl=this.value.imageUrl)},methods:{uploadImage:function(){var e=this;this.uploadingImage||J.m(function(){var t=Object(T.a)(E.a.mark((function t(n){var s;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.size>e.fileApi.maxFileSize)){t.next=3;break}return m.a({icon:"warning",title:"File is too large",text:"Cannot upload this image because it is too large. The size of the file cannot exceed ".concat(H.humanizeFileSize(e.fileApi.maxFileSize),".")}),t.abrupt("return");case 3:return e.uploadingImage=!0,t.prev=4,t.next=7,e.fileApi.uploadFile(n);case 7:s=t.sent,t.next=15;break;case 10:return t.prev=10,t.t0=t.catch(4),e.uploadingImage=!1,m.a({icon:"error",title:"Unable to upload image",text:"Check your internet connection and try again."}),t.abrupt("return");case 15:e.imageUrl="".concat(X.e,"/files/").concat(s.id);case 16:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}(),{accept:["jpg","png","svg"]})},onImageLoad:function(e){this.uploadingImage&&(this.uploadingImage=!1,this.value.imageUrl=this.imageUrl,this.value.imageWidth=e.target.naturalWidth,this.value.imageHeight=e.target.naturalHeight)},onImageError:function(){this.uploadingImage&&(this.uploadingImage=!1,this.imageUrl=this.value.imageUrl||"",m.a({icon:"error",title:"Unable to upload image",text:"Check your internet connection and try again."}))}}},ne=(n("hIx7"),Object(c.a)(te,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quiz-question-edit-sketch"},[e.editable?n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Canvas")]},proxy:!0}],null,!1,3770646515)},[e._v(" "),n("div",{staticClass:"qqesk-field"},[n("EdCheck",{attrs:{label:"Background image",description:"Specify a background image to draw onto instead of a blank canvas",disabled:e.disabled||e.uploadingImage},model:{value:e.useImage,callback:function(t){e.useImage=t},expression:"useImage"}})],1),e._v(" "),e.useImage?[n("div",{staticClass:"qqesk-field"},[n("EdButton",{attrs:{disabled:e.disabled||e.uploadingImage},on:{click:e.uploadImage}},[e._v("\n\t\t\t\t\tUpload Image\n\t\t\t\t")])],1),e._v(" "),e.imageUrl?n("div",{staticClass:"qqesk-field"},[n("img",{staticClass:"qqesk-image",attrs:{src:e.imageUrl},on:{load:e.onImageLoad,error:e.onImageError}})]):e._e()]:e._e()],2):e.value.imageUrl?n("img",{staticClass:"qqesk-image-display",attrs:{src:e.value.imageUrl}}):e._e()],1)}),[],!1,null,null,null).exports),se=n("ltWs"),ie={components:{EdField:i.a,Amber:a.a,AmberDisplay:se.a},extends:b,computed:{hasSolution:function(){return!!this.value.solution&&!k.c(this.value.solution)},errorMessage:function(){}}},re=Object(c.a)(ie,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quiz-question-edit-ge"},[e.assessible?[e.editable?n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Answer")]},proxy:!0},{key:"description",fn:function(){return[e._v("\n\t\t\t\tGeneral questions are not auto marked according to this answer specifically;\n\t\t\t\tevery response will be marked as correct.\n\t\t\t")]},proxy:!0}],null,!1,1892216919)},[e._v(" "),e._v(" "),n("Amber",{attrs:{disabled:e.disabled,"autohide-toolbar":""},model:{value:e.value.solution,callback:function(t){e.$set(e.value,"solution",t)},expression:"value.solution"}})],1):e.hasSolution?n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Answer")]},proxy:!0}],null,!1,1754318919)},[e._v(" "),n("AmberDisplay",{attrs:{value:e.value.solution}})],1):e._e()]:e._e()],2)}),[],!1,null,null,null).exports,ae=n("E2AO"),oe=(K={},Object(h.a)(K,ae.a.TYPE_MULTIPLE_CHOICE,x),Object(h.a)(K,ae.a.TYPE_TRUE_FALSE,O),Object(h.a)(K,ae.a.TYPE_SHORT_ANSWER,B),Object(h.a)(K,ae.a.TYPE_WORDCLOUD,B),Object(h.a)(K,ae.a.TYPE_NUMERICAL,U),Object(h.a)(K,ae.a.TYPE_REORDER,V),Object(h.a)(K,ae.a.TYPE_HOTSPOT,ee),Object(h.a)(K,ae.a.TYPE_SKETCH,ne),Object(h.a)(K,ae.a.TYPE_GENERAL,re),K),le={components:{EdField:i.a,FormattedDisplay:r.a,FormattedInput:u,Explanation:d.a},props:{assessible:{type:Boolean,default:!1},value:{type:Object,required:!0},editable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},spans:{type:Array,default:void 0},etcTools:{type:Boolean,default:!1}},computed:{questionComponent:function(){return oe[this.value.type]},hasExplanation:function(){return this.value.explanation&&!v.a(this.value.explanation,this.value.formatted)}},methods:{convertToFormatted:function(){this.value.content=k.b(this.value.content||""),this.value.explanation=k.b(this.value.explanation||""),this.$refs.question.convertToFormatted&&this.$refs.question.convertToFormatted(),this.value.formatted=!0},convertToUnformatted:function(){this.value.content=this.value.content?k.f(this.value.content):"",this.value.explanation=this.value.explanation?k.f(this.value.explanation):"",this.$refs.question.convertToUnformatted&&this.$refs.question.convertToUnformatted(),this.value.formatted=!1},validate:function(){return this.$refs.question.validate()}}},ce=(n("F9t0"),Object(c.a)(le,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quiz-question-edit"},[e.editable?n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Question")]},proxy:!0}],null,!1,3584830357)},[e._v(" "),n("FormattedInput",{staticClass:"qqedit-input",attrs:{disabled:e.disabled,formatted:e.value.formatted,"etc-tools":e.etcTools,"autohide-toolbar":""},model:{value:e.value.content,callback:function(t){e.$set(e.value,"content",t)},expression:"value.content"}})],1):n("FormattedDisplay",{staticClass:"qqedit-display",attrs:{formatted:e.value.formatted,value:e.value.content,spans:e.spans}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.compact,expression:"!compact"}]},[n(e.questionComponent,{ref:"question",tag:"component",staticClass:"qqedit-question",attrs:{assessible:e.assessible,value:e.value,editable:e.editable,disabled:e.disabled,spans:e.spans,"etc-tools":e.etcTools}}),e._v(" "),e.assessible?[e.editable?n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Explanation (optional)")]},proxy:!0}],null,!1,2371548935)},[e._v(" "),n("FormattedInput",{staticClass:"qqedit-input",attrs:{disabled:e.disabled,formatted:e.value.formatted,"etc-tools":e.etcTools,"autohide-toolbar":""},model:{value:e.value.explanation,callback:function(t){e.$set(e.value,"explanation",t)},expression:"value.explanation"}})],1):e._e(),e._v(" "),!e.editable&&e.hasExplanation?n("Explanation",{staticClass:"qqedit-explanation",attrs:{formatted:e.value.formatted,value:e.value.explanation,spans:e.spans}}):e._e()]:e._e()],2)],1)}),[],!1,null,null,null));t.a=ce.exports},Chl9:function(e,t,n){"use strict";var s=n("tdKI");n.n(s).a},CisF:function(e,t,n){"use strict";n("qePV");var s={props:{disabled:{type:Boolean,default:!1},height:{type:Number,default:void 0},minHeight:{type:Number,default:void 0},maxHeight:{type:Number,default:void 0}},computed:{style:function(){var e=this.height,t=this.minHeight,n=this.maxHeight,s={};return null!=e?s.height=e+"px":(null!=t&&(s.minHeight=t+"px"),null!=n&&(s.maxHeight=n+"px")),s}},methods:{onResizeHandleMouseDown:function(e){e.preventDefault(),document.addEventListener("mouseup",this.onDocumentMouseUp),document.addEventListener("mousemove",this.onDocumentMouseMove),this.startMouseY=e.clientY,this.startHeight=this.$el.getBoundingClientRect().height},onDocumentMouseUp:function(){document.removeEventListener("mouseup",this.onDocumentMouseUp),document.removeEventListener("mousemove",this.onDocumentMouseMove)},onDocumentMouseMove:function(e){if(!this.disabled){var t=e.clientY-this.startMouseY,n=this.startHeight+t;null!=this.minHeight&&(n=Math.max(this.minHeight,n)),null!=this.maxHeight&&(n=Math.min(this.maxHeight,n)),this.$emit("update:height",n)}}}},i=(n("yFCc"),n("KHd+")),r=Object(i.a)(s,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"resizer",style:e.style},[e._t("default"),e._v(" "),e.disabled?e._e():s("img",{staticClass:"resizer-handle",attrs:{src:n("twYO"),draggable:"false"},on:{mousedown:e.onResizeHandleMouseDown,dblclick:function(t){return t.preventDefault(),e.$emit("update:height",null)}}})],2)}),[],!1,null,null,null);t.a=r.exports},CkVh:function(e,t,n){"use strict";n("pNMO"),n("TeQF"),n("qePV"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("rePB"),i=n("nVGi"),r=n("VlpE");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l={functional:!0,props:{targetAnchorX:{type:Number,default:.5},targetAnchorY:{type:Number,default:1},anchorX:{type:Number,default:.5},anchorY:{type:Number,default:0},active:{type:Boolean,default:!1},action:{type:String,default:"toggle"}},render:function(e,t){var n=t.props,s=function(){"function"==typeof t.listeners["update:active"]&&t.listeners["update:active"](!1)},a={props:{active:n.active,action:n.action,anchorX:n.targetAnchorX,anchorY:n.targetAnchorY},on:t.listeners,scopedSlots:{target:function(i){var a=i.targetLeft,o=i.targetTop,l=i.targetWidth,c=i.targetHeight;return e(r.a,{attrs:{targetLeft:a,targetTop:o,targetWidth:l,targetHeight:c,targetAnchorX:n.targetAnchorX,targetAnchorY:n.targetAnchorY,anchorX:n.anchorX,anchorY:n.anchorY,clipMode:"flip",arrow:!0},on:{close:s}},[t.data.scopedSlots.items()])},trigger:function(e){var s=t.data.scopedSlots.trigger;return s&&s(o({},e,{attrs:o({"aria-haspopup":"menu","aria-expanded":n.active},e.attrs)}))}}};return e(i.a,a)}},c=n("KHd+"),u=Object(c.a)(l,void 0,void 0,!1,null,null,null);t.a=u.exports},Cupl:function(e,t,n){"use strict";var s=n("9x2+");n.n(s).a},CzYW:function(e,t,n){"use strict";var s=n("aSSg");n.n(s).a},"D/zS":function(e,t,n){"use strict";var s=n("8owx");n.n(s).a},D2rJ:function(e,t,n){"use strict";var s=n("fQK8");n.n(s).a},D3ku:function(e,t,n){"use strict";var s=n("2N9M");n.n(s).a},D6TY:function(e,t,n){},D7Ey:function(e,t,n){},DBws:function(e,t,n){},"DF/l":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("pNMO"),n("TeQF"),n("x0AG"),n("2B1R"),n("pDQq"),n("T63A"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("ODXe"),i=n("rePB"),r=n("hSdx");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var o=Object.entries(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r.fileTypes,{pyturtle:"Python 2 (Turtle)",py3turtle:"Python 3 (Turtle)"})).map((function(e){var t=Object(s.a)(e,2);return{extension:t[0],language:t[1]}})),l=o.findIndex((function(e){return"js"===e.extension}));o[l].language="JavaScript (Node.js)",o.splice(l+1,0,{extension:"jsweb",language:"JavaScript (Web)"})},DYiA:function(e,t,n){},"Dc+w":function(e,t,n){"use strict";var s=n("Dt2x");n.n(s).a},DdLw:function(e,t,n){"use strict";var s=n("3GWr");n.n(s).a},"Dm8+":function(e,t,n){"use strict";n("fbCW"),n("yXV3");var s=n("/lWA"),i=n("9Arg"),r={mixins:[s.a],props:{items:{type:Array,default:function(){return[]}},grouped:{type:Boolean,default:!1},selectionMode:{type:String,default:"single"},selectedItem:{type:null,default:null},itemsSelector:{type:Function,default:function(e){return e.items}},groupKey:{type:Function,default:function(e,t){return t}},itemKey:{type:Function,default:function(e,t){return t}}},computed:{canSelect:function(){return"none"!==this.selectionMode},selectedIndex:function(){return this.items.indexOf(this.selectedItem)},cssClass:function(){return["list-view-".concat(this.computedTheme),this.canSelect&&"list-view-select"]}},watch:{selectedItem:function(){var e=this;this.$nextTick((function(){return e.scrollSelectedItemIntoView()}))}},methods:{onItemClick:function(e){e&&(this.$emit("update:selectedItem",e),this.$emit("item-click",e))},selectItemInDirection:function(e){if(0!==this.items.length){var t;if(this.selectedItem){var n=this.selectedIndex+(e>0?1:-1);n<0?n=this.items.length-1:n>=this.items.length&&(n=0),t=this.items[n]}else t=this.items[e>0?0:this.items.length-1];this.$emit("update:selectedItem",t)}},scrollSelectedItemIntoView:function(){var e=this.$refs.items.find((function(e){return e.classList.contains("selected")}));e&&i.D(this.$el,e)}}},a=(n("LDLQ"),n("KHd+")),o=Object(a.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"list-view",class:e.cssClass,attrs:{tabindex:"0"},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.selectItemInDirection(1))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.selectItemInDirection(-1))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.onItemClick(e.selectedItem))}]}},[e._t("header"),e._v(" "),e.grouped?e._l(e.items,(function(t,s){return n("div",{key:e.groupKey(t,s),staticClass:"lv-group"},[n("header",{staticClass:"lv-group-header"},[e._t("group-header",null,{group:t})],2),e._v(" "),e._l(e.itemsSelector(t),(function(t,s){return n("div",{key:e.itemKey(t,s),ref:"items",refInFor:!0,staticClass:"lv-item",class:{selected:e.selectedItem===t},on:{click:function(n){return e.onItemClick(t)}}},[n("div",{staticClass:"lv-item-inner"},[e._t("item",null,{item:t})],2)])}))],2)})):e._l(e.items,(function(t,s){return n("div",{key:e.itemKey(t,s),ref:"items",refInFor:!0,staticClass:"lv-item",class:{selected:e.selectedItem===t},on:{click:function(n){return e.onItemClick(t)}}},[n("div",{staticClass:"lv-item-inner"},[e._t("item",null,{item:t})],2)])}))],2)}),[],!1,null,null,null);t.a=o.exports},DrGj:function(e,t,n){"use strict";var s=n("bU01");n.n(s).a},Drha:function(e,t,n){"use strict";var s=n("8va7");n.n(s).a},Dt2x:function(e,t,n){},DvJa:function(e,t,n){"use strict";var s=n("zo9e");n.n(s).a},DxSh:function(e,t,n){"use strict";var s=n("JLXm");n.n(s).a},E8Rg:function(e,t,n){"use strict";var s={components:{Icon:n("WmPt").a},props:{types:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1}},methods:{onClick:function(e){this.$emit("action",e)}}},i=(n("2ZNJ"),n("KHd+")),r=Object(i.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quiz-new-question-buttons",class:{disabled:e.disabled}},e._l(e.types,(function(t){return n("div",{key:t.type,staticClass:"qnqb-btn",class:"qnqb-btn-"+t.type,on:{click:function(n){return e.onClick(t.type)}}},[n("Icon",{attrs:{icon:t.icon||"plus"}}),e._v("\n\t\t"+e._s(t.label)+"\n\t")],1)})),0)}),[],!1,null,null,null);t.a=r.exports},EBF9:function(e,t,n){},ECNf:function(e,t,n){"use strict";var s=n("Q7b8");n.n(s).a},ECeP:function(e,t,n){},ECm2:function(e,t,n){"use strict";var s=n("X0+k");n.n(s).a},EDlf:function(e,t,n){},EEGP:function(e,t,n){"use strict";var s=n("wSwa");n.n(s).a},EEU1:function(e,t,n){},EFME:function(e,t,n){},ELTR:function(e,t,n){"use strict";n("TeQF"),n("2B1R"),n("zKZe");var s,i=n("o0o1"),r=n.n(i),a=(n("ls82"),n("HaE+")),o=n("KQm4"),l=n("Pa8A"),c=n("2ejt"),u=n("NC1X"),d=n("TphV"),h=n("2PkB"),p=n("1hNB"),f={props:{data:{type:Object,required:!0}}},m=(n("Rc11"),n("KHd+")),v=Object(m.a)(f,(function(){var e=this.$createElement;return(this._self._c||e)("img",{staticClass:"ian-image-item",attrs:{src:this.data.url}})}),[],!1,null,null,null).exports,b=n("20nU"),g=(n("ma9I"),n("pDQq"),n("ODXe")),y=n("1OyB"),w=n("vuIU"),_=n("hSdx"),k=n("9Arg"),C=n("7W7u"),x=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Object(y.a)(this,e),this.r=t,this.g=n,this.b=s,this.a=i}return Object(w.a)(e,[{key:"css",get:function(){return"rgba(".concat(255*this.r|0,", ").concat(255*this.g|0,", ").concat(255*this.b|0,", ").concat(this.a,")")}}]),e}(),j=function(){function e(t){Object(y.a)(this,e),this.options=t,this.color=new x,this.opacity=1,this.erase=!1,this.compositeOperation="source-over",this.strokeWidth=4,this.posHistory=null,this.undoStack=[],this.redoStack=[],this.undoCapacity=52428800,this.touchId=null,this.displayCanvasEl=document.createElement("canvas"),this.displayCanvasEl.addEventListener("mousedown",this.onMouseDown.bind(this)),this.displayCanvasEl.addEventListener("touchstart",this.onTouchStart.bind(this)),this.displayCanvasEl.addEventListener("touchend",this.onTouchEnd.bind(this)),this.displayCanvasEl.addEventListener("touchmove",this.onTouchMove.bind(this)),this.displayCtx=this.displayCanvasEl.getContext("2d"),t.element.appendChild(this.displayCanvasEl),this.baseCanvasEl=document.createElement("canvas"),this.baseCtx=this.baseCanvasEl.getContext("2d"),this.contentCanvasEl=document.createElement("canvas"),this.contentCtx=this.contentCanvasEl.getContext("2d"),this.drawCanvasEl=document.createElement("canvas"),this.drawCtx=this.drawCanvasEl.getContext("2d"),this.scratchCanvasEl=document.createElement("canvas"),this.scratchCtx=this.scratchCanvasEl.getContext("2d");var n=Math.min(window.devicePixelRatio||1,4),s=k.p(this.displayCtx,"backingStorePixelRatio")||1;if(this.ratio=n/s,this.resizeCanvas(),this.baseCtx.fillStyle="white",this.baseCtx.fillRect(0,0,this.options.width,this.options.height),this.options.baseImage){var i=this.options.width/this.options.height,r=this.options.baseImage.width/this.options.baseImage.height;if(r>i){var a=this.options.width/r;this.baseCtx.drawImage(this.options.baseImage,0,(this.options.height-a)/2,this.options.width,a)}else{var o=this.options.height*r;this.baseCtx.drawImage(this.options.baseImage,(this.options.width-o)/2,0,o,this.options.height)}this.options.baseImage=null}this.clear(),this.onMouseMoveBound=this.onMouseMove.bind(this),this.onMouseUpBound=this.onMouseUp.bind(this)}return Object(w.a)(e,[{key:"resizeCanvas",value:function(){this.displayCanvasEl.style.width=this.options.width+"px",this.displayCanvasEl.style.height=this.options.height+"px";for(var e=Math.ceil(this.options.width*this.ratio),t=Math.ceil(this.options.height*this.ratio),n=0,s=[this.displayCanvasEl,this.baseCanvasEl,this.contentCanvasEl,this.drawCanvasEl,this.scratchCanvasEl];n<s.length;n++){var i=s[n];i.width=e,i.height=t}for(var r=0,a=[this.displayCtx,this.baseCtx,this.contentCtx,this.drawCtx,this.scratchCtx];r<a.length;r++){a[r].scale(this.ratio,this.ratio)}}},{key:"onMouseDown",value:function(e){if(!C.c(e)&&e.button===C.a){var t=k.s(this.displayCanvasEl,e.pageX,e.pageY);this.onPointerDown(t),document.addEventListener("mousemove",this.onMouseMoveBound),document.addEventListener("mouseup",this.onMouseUpBound)}}},{key:"onMouseMove",value:function(e){var t=k.s(this.displayCanvasEl,e.pageX,e.pageY);this.onPointerMove(t)}},{key:"onMouseUp",value:function(){document.removeEventListener("mousemove",this.onMouseMoveBound),document.removeEventListener("mouseup",this.onMouseUpBound),this.onPointerUp()}},{key:"onTouchStart",value:function(e){if(1===e.targetTouches.length){var t=e.targetTouches[0];this.touchId=t.identifier;var n=k.s(this.displayCanvasEl,t.pageX,t.pageY);this.onPointerDown(n)}}},{key:"onTouchMove",value:function(e){var t;e.preventDefault();for(var n=0,s=Object(o.a)(e.changedTouches);n<s.length;n++){var i=s[n];if(i.identifier===this.touchId){t=i;break}}if(t){var r=k.s(this.displayCanvasEl,t.pageX,t.pageY);this.onPointerMove(r)}}},{key:"onTouchEnd",value:function(e){for(var t,n=0,s=Object(o.a)(e.changedTouches);n<s.length;n++){var i=s[n];if(i.identifier===this.touchId){t=i;break}}t&&(this.touchId=null,this.onPointerUp())}},{key:"onPointerDown",value:function(e){this.posHistory=[e],this.saveUndoState()}},{key:"onPointerMove",value:function(t){if(this.posHistory.push(t),!(this.posHistory.length<3)){var n=Object(g.a)(this.posHistory,3),s=n[0],i=n[1],r=n[2],a={x:(s.x+i.x)/2,y:(s.y+i.y)/2},o={x:(i.x+r.x)/2,y:(i.y+r.y)/2},l=e.quantizeQuadraticCurve(a.x,a.y,i.x,i.y,o.x,o.y,.5);this.drawPath(l);var c=this.displayCtx.globalCompositeOperation;this.displayCtx.globalCompositeOperation="copy",this.displayCtx.drawImage(this.contentCanvasEl,0,0,this.options.width,this.options.height),this.displayCtx.globalCompositeOperation=c,this.composeFinal(this.displayCtx),this.posHistory.splice(0,1)}}},{key:"onPointerUp",value:function(){this.posHistory=null,this.composeFinal(this.contentCtx),this.drawCtx.clearRect(0,0,this.options.width,this.options.height)}},{key:"clear",value:function(){var e=this.contentCtx.globalCompositeOperation;this.contentCtx.globalCompositeOperation="copy",this.contentCtx.drawImage(this.baseCanvasEl,0,0,this.options.width,this.options.height),this.contentCtx.globalCompositeOperation=e,e=this.displayCtx.globalCompositeOperation,this.displayCtx.globalCompositeOperation="copy",this.displayCtx.drawImage(this.contentCanvasEl,0,0,this.options.width,this.options.height),this.displayCtx.globalCompositeOperation=e}},{key:"composeFinal",value:function(e){if(this.erase){var t=this.scratchCtx.globalCompositeOperation;this.scratchCtx.globalCompositeOperation="copy",this.scratchCtx.drawImage(this.baseCanvasEl,0,0,this.options.width,this.options.height),this.scratchCtx.globalCompositeOperation="destination-in",this.scratchCtx.drawImage(this.drawCanvasEl,0,0,this.options.width,this.options.height),this.scratchCtx.globalCompositeOperation=t,e.drawImage(this.scratchCanvasEl,0,0,this.options.width,this.options.height)}else{var n=e.globalAlpha,s=e.globalCompositeOperation;e.globalAlpha=this.opacity,e.globalCompositeOperation=this.compositeOperation,e.drawImage(this.drawCanvasEl,0,0,this.options.width,this.options.height),e.globalAlpha=n,e.globalCompositeOperation=s}}},{key:"drawPath",value:function(e){var t=this.drawCtx.createRadialGradient(0,0,0,0,0,this.strokeWidth/2),n=255*this.color.r|0,s=255*this.color.g|0,i=255*this.color.b|0;t.addColorStop(.8,"rgba(".concat(n,", ").concat(s,", ").concat(i,", 1)")),t.addColorStop(1,"rgba(".concat(n,", ").concat(s,", ").concat(i,", 0)")),this.drawCtx.fillStyle=t;for(var r=0;r<e.length/2-1;r++)this.drawLine(this.drawCtx,e[2*r+0],e[2*r+1],e[2*r+2],e[2*r+3])}},{key:"drawLine",value:function(e,t,n,s,i){for(var r=s-t,a=i-n,o=Math.sqrt(r*r+a*a),l=Math.ceil(Math.max(1,o/this.strokeWidth*2)),c=0;c<l;c++){var u=c/l,d=t+r*u,h=n+a*u;e.translate(d,h),e.fillRect(-this.strokeWidth/2,-this.strokeWidth/2,this.strokeWidth,this.strokeWidth),e.translate(-d,-h)}}},{key:"saveUndoState",value:function(){this.redoStack=[];var e=this.contentCanvasEl.toDataURL("image/png");this.undoStack.push(e);var t,n=0;for(t=this.undoStack.length-1;t>=0&&n<this.undoCapacity;t--)n+=this.undoStack[t].length;this.undoStack.splice(0,t)}},{key:"undoOrRedo",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(n?(e=this.redoStack,t=this.undoStack):(e=this.undoStack,t=this.redoStack),0!==e.length){var s=this.contentCanvasEl.toDataURL("image/png");t.push(s),s=e.pop(),this.applyState(s)}}},{key:"undo",value:function(){this.undoOrRedo(!1)}},{key:"redo",value:function(){this.undoOrRedo(!0)}},{key:"applyState",value:function(e){var t=this,n=new Image;n.onload=function(){var e=t.contentCtx.globalCompositeOperation;t.contentCtx.globalCompositeOperation="copy",t.contentCtx.drawImage(n,0,0,t.options.width,t.options.height),t.contentCtx.globalCompositeOperation=e,e=t.displayCtx.globalCompositeOperation,t.displayCtx.globalCompositeOperation="copy",t.displayCtx.drawImage(t.contentCanvasEl,0,0,t.options.width,t.options.height),t.displayCtx.globalCompositeOperation=e},n.src=e}},{key:"toBlob",value:function(){return _.dataUriToBlob(this.contentCanvasEl.toDataURL("image/png"))}},{key:"canUndo",get:function(){return this.undoStack.length>0}},{key:"canRedo",get:function(){return this.redoStack.length>0}}],[{key:"quantizeQuadraticCurve",value:function(e,t,n,s,i,r,a){for(var o=n-e,l=s-t,c=i-n,u=r-s,d=(Math.sqrt(o*o+l*l)+Math.sqrt(c*c+u*u))*a,h=[],p=0,f=1/((d=0|Math.sqrt(d*d+4))-1),m=0;m<d;m++){var v=1-p,b=v*v,g=2*v*p,y=p*p,w=b*e+g*n+y*i,_=b*t+g*s+y*r;h.push(w),h.push(_),p+=f}return h}}]),e}(),O=n("/Yj0"),S=n("5/Cn"),E={directives:{Tooltip:l.a},components:{ContentDialog:c.a,Spinner:u.a,Navbar:d.a,NavbarButton:h.a,CollectionView:p.a},inject:["fileApi"],data:function(){var e={imageItemComponent:v,imageItems:[],imageLoading:!1,choosingImage:!0,annotatorVisible:!1,uploading:!1,annotator:null,tools:{pen:{name:"Pen",image:n("yy6F")},pencil:{name:"Pencil",image:n("6JxO")},highlighter:{name:"Highlighter",image:n("x7+J")},eraser:{name:"Eraser",image:n("svOY")}},colors:[new x(0,0,0),new x(.333,.333,.333),new x(1,0,0),new x(1,.569,0),new x(1,.922,0),new x(0,1,.353),new x(1,1,1),new x(.667,.667,.667),new x(1,0,.667),new x(.588,0,1),new x(0,.353,1),new x(0,.784,1)],uiTools:null,selectedTool:null,selectedColor:null};return e.uiTools=[e.tools.pen,e.tools.pencil,e.tools.highlighter,e.tools.eraser],e},computed:{navbarTitle:function(){return this.uploading?"Uploading Image...":"Image Annotator"}},mounted:function(){this.imageItems=Object(o.a)(document.querySelectorAll(".amber-display-image img.imgl-img")).filter((function(e){var t=_.parseUrl(e.src).host;return t===window.location.hostname||t===_.parseUrl(b.e).host})).map((function(e){return{type:"image",url:e.src}}))},methods:{cancel:function(){this.$emit("cancel")},done:(s=Object(a.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.uploading=!0,e.prev=1,!((n=this.annotator.toBlob()).size>this.fileApi.maxFileSize)){e.next=6;break}return S.a({icon:"warning",title:"Image is too large",text:"The image cannot be saved because it is too large. Try creating a smaller image instead."}),e.abrupt("return");case 6:return e.next=8,this.fileApi.uploadFile(n);case 8:t=e.sent,e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(1),O.b({type:"error",text:"Unable to upload image."}),e.abrupt("return");case 15:return e.prev=15,this.uploading=!1,e.finish(15);case 18:this.$emit("done",t);case 19:case"end":return e.stop()}}),e,this,[[1,11,15,18]])}))),function(){return s.apply(this,arguments)}),onBlankCanvas:function(){this.choosingImage=!1,this.openAnnotator({width:700,height:500})},onImageItemClick:function(e){this.openImage(e.url)},openImage:function(e){var t=this;this.choosingImage=!1,this.imageLoading=!0;var n=new Image;n.crossOrigin="",n.src=e,n.onload=function(){t.imageLoading=!1;var e=n.width,s=n.height;if(e*s>35e4){var i=e/s;e=(s=Math.sqrt(35e4/i))*i}t.openAnnotator({baseImage:n,width:e,height:s})},n.onerror=function(){O.b({type:"error",text:"Unable to load image."}),t.choosingImage=!0,t.imageLoading=!1}},openAnnotator:function(e){this.annotatorVisible=!0,this.annotator=new j(Object.assign(e,{element:this.$refs.annotatorContainer})),this.selectColor(this.colors[2]),this.selectTool(this.tools.pen)},isToolSelected:function(e){return this.selectedTool===e},selectTool:function(e){this.selectedTool=e,this.annotator.erase=!1,this.annotator.compositeOperation="source-over",this.annotator.color=this.selectedColor,this.annotator.opacity=1,this.annotator.strokeWidth=2,this.selectedTool===this.tools.eraser?(this.annotator.erase=!0,this.annotator.strokeWidth=40):this.selectedTool===this.tools.pencil||(this.selectedTool===this.tools.highlighter?(this.annotator.compositeOperation="multiply",this.annotator.strokeWidth=15):this.annotator.strokeWidth=4)},isColorSelected:function(e){return this.selectedColor===e},selectColor:function(e){this.selectedColor=e,this.annotator.color=e},clear:function(){this.annotator.saveUndoState(),this.annotator.clear()}}},T=(n("DrGj"),Object(m.a)(E,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentDialog",[n("div",{staticClass:"image-annotator"},[n("Navbar",{staticClass:"ian-navbar",attrs:{title:e.navbarTitle,loading:e.uploading},scopedSlots:e._u([{key:"left",fn:function(){return[n("NavbarButton",{attrs:{text:"Cancel"},on:{action:e.cancel}})]},proxy:!0},{key:"right",fn:function(){return[n("NavbarButton",{directives:[{name:"show",rawName:"v-show",value:e.annotatorVisible,expression:"annotatorVisible"}],attrs:{text:"Done",type:"default",disabled:e.uploading},on:{action:e.done}})]},proxy:!0}])}),e._v(" "),e.choosingImage?n("div",{staticClass:"ian-chooser-container"},[n("div",{staticClass:"ian-section"},[n("div",{staticClass:"ian-blank",on:{click:e.onBlankCanvas}},[e._v("Use blank canvas")])]),e._v(" "),n("div",{staticClass:"ian-section"},[n("div",{staticClass:"ian-heading"},[e.imageItems.length?[e._v("...or choose an image on this page to annotate.")]:[e._v("There are no images on this page that can be annotated.")]],2),e._v(" "),n("CollectionView",{staticClass:"ian-collection-view",attrs:{items:e.imageItems,"item-component":e.imageItemComponent},on:{"item-click":e.onImageItemClick}})],1)]):e._e(),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.choosingImage,expression:"!choosingImage"}],staticClass:"ian-container",class:{disabled:e.uploading}},[n("div",{ref:"annotatorContainer",staticClass:"ian-annotator-container"},[e.imageLoading?n("Spinner",{staticClass:"ian-spinner"}):e._e()],1),e._v(" "),e.annotator?n("div",{staticClass:"ian-tb"},[n("div",{staticClass:"ian-undo-redo"},[n("div",{staticClass:"ian-btn",class:{disabled:!e.annotator.canUndo},on:{click:function(t){return e.annotator.undo()}}},[n("svg",{staticClass:"ian-btn-svg",attrs:{viewBox:"0 0 40 40"}},[n("polygon",{attrs:{points:"16,25.822 2.945,15.271 16,4.721"}}),e._v(" "),n("path",{attrs:{d:"M14.706,11.2c18.042,0,26.059,9.671,18.715,24.255c2.711-15.094-9.249-15.841-18.715-15.841"}})]),e._v(" "),n("div",{staticClass:"ian-btn-label"},[e._v("Undo")])]),e._v(" "),n("div",{staticClass:"ian-btn",class:{disabled:!e.annotator.canRedo},on:{click:function(t){return e.annotator.redo()}}},[n("svg",{staticClass:"ian-btn-svg",attrs:{viewBox:"0 0 40 40"}},[n("polygon",{attrs:{points:"23,25.822 36.055,15.271 23,4.721"}}),e._v(" "),n("path",{attrs:{d:"M24.371,11.2C6.33,11.2-1.688,20.871,5.656,35.455c-2.711-15.094,9.249-15.841,18.715-15.841"}})]),e._v(" "),n("div",{staticClass:"ian-btn-label"},[e._v("Redo")])]),e._v(" "),n("div",{staticClass:"ian-btn",on:{click:e.clear}},[n("svg",{staticClass:"ian-btn-svg",attrs:{viewBox:"0 0 40 40"}},[n("polygon",{attrs:{points:"34.664,8.164 31.836,5.335 20,17.172 8.164,5.335 5.335,8.164 17.172,20 5.335,31.836 8.164,34.664 20,22.828 31.836,34.664 34.664,31.836 22.828,20"}})]),e._v(" "),n("div",{staticClass:"ian-btn-label"},[e._v("Clear")])])]),e._v(" "),n("div",{staticClass:"ian-tools"},e._l(e.uiTools,(function(t,s){return n("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.name,expression:"tool.name"}],key:s,staticClass:"ian-tool-clip",on:{click:function(n){return e.selectTool(t)}}},[n("img",{class:{selected:e.isToolSelected(t)},attrs:{src:t.image,draggable:"false"}})])})),0),e._v(" "),n("div",{staticClass:"ian-pallete"},e._l(e.colors,(function(t,s){return n("div",{key:s,staticClass:"ian-pallete-color",class:{selected:e.isColorSelected(t)},style:{backgroundColor:t.css},on:{click:function(n){return e.selectColor(t)}}})})),0)]):e._e()])],1)])}),[],!1,null,null,null));t.a=T.exports},EML8:function(e,t,n){"use strict";n("qePV");var s=n("tjHA"),i={functional:!0,props:{items:{type:Array,required:!0},expanded:{type:Boolean,default:!1},collapsedCount:{type:Number,default:10}},render:function(e,t){for(var n=t.props,i=n.items,r=n.expanded,a=n.collapsedCount,o=t.scopedSlots,l=o.default,c=o.footer,u=t.listeners["update:expanded"],d=void 0===u?function(){}:u,h=r?i.length:Math.min(i.length,a),p=i.length-h,f=[],m=0;m<h;m++)f.push(l({index:m,item:i[m]}));return c?f.push(c({totalCount:i.length,collapsedCount:a,hiddenCount:p,expanded:r,expand:function(){return d(!0)},collapse:function(){return d(!1)}})):p?f.push(e(s.a,{on:{click:function(){return d(!0)}}},["Show ",p," more"])):r&&f.push(e(s.a,{on:{click:function(){return d(!1)}}},["Show less"])),f}},r=n("KHd+"),a=Object(r.a)(i,void 0,void 0,!1,null,null,null);t.a=a.exports},Edju:function(e,t,n){"use strict";n("pNMO"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("rePB");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var r={functional:!0,render:function(e,t){return e("table",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.data,{staticClass:["form-layout",t.data.staticClass].filter(Boolean).join(" ")}),[t.children])}},a=n("KHd+"),o=Object(a.a)(r,void 0,void 0,!1,null,null,null);t.a=o.exports},EfnV:function(e,t,n){},Eg6a:function(e,t,n){},Eho6:function(e,t,n){},Erf6:function(e,t,n){},Etp7:function(e,t,n){},"F+1L":function(e,t,n){},"F/vS":function(e,t,n){},"F3+b":function(e,t,n){"use strict";var s=n("M0XE");n.n(s).a},F3Tp:function(e,t,n){"use strict";n("2B1R"),n("UxlC"),n("EnZy"),n("SYor");var s=n("hSdx"),i=n("NB5Z"),r={props:{user:{type:[Object,String],default:null},online:{type:Boolean,default:null},bot:{type:Boolean,default:!1}},computed:{name:function(){return"string"==typeof this.user?this.user:this.user.name},initials:function(){var e=this.name.replace(s.reEmoji,"").trim().split(/\s+/).map((function(e){return e[0]}));return e.length?e[0]:""},style:function(){return{backgroundColor:i.a[s.hash(this.name)%i.a.length]}}}},a=(n("8YXh"),n("KHd+")),o=Object(a.a)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"avatar"},[e.bot?s("img",{staticClass:"avatar-image",attrs:{src:n("sIew"),draggable:"false"}}):e.user?s("div",{staticClass:"avatar-inner",style:e.style},[s("span",{staticClass:"avatar-initials"},[e._v(e._s(e.initials))])]):s("img",{staticClass:"avatar-image",attrs:{src:n("ppKb"),draggable:"false"}}),e._v(" "),null!=e.online?s("div",{staticClass:"avatar-online",class:{online:e.online}}):e._e()])}),[],!1,null,null,null);t.a=o.exports},"F5/3":function(e,t,n){},F9t0:function(e,t,n){"use strict";var s=n("pcOO");n.n(s).a},FM0R:function(e,t,n){"use strict";var s=n("4ako");n.n(s).a},FVD3:function(e,t,n){"use strict";var s=n("4OY+");n.n(s).a},FVbE:function(e,t,n){},FcLS:function(e,t,n){},FfD9:function(e,t,n){"use strict";n.d(t,"p",(function(){return c})),n.d(t,"l",(function(){return d})),n.d(t,"o",(function(){return p})),n.d(t,"j",(function(){return m})),n.d(t,"i",(function(){return b})),n.d(t,"h",(function(){return y})),n.d(t,"g",(function(){return _})),n.d(t,"n",(function(){return C})),n.d(t,"e",(function(){return x})),n.d(t,"f",(function(){return O})),n.d(t,"c",(function(){return E})),n.d(t,"d",(function(){return T})),n.d(t,"a",(function(){return I})),n.d(t,"b",(function(){return D})),n.d(t,"k",(function(){return P})),n.d(t,"m",(function(){return N}));n("pNMO"),n("4Brf"),n("0oug"),n("4mDm"),n("07d7"),n("PKPk"),n("Rm1S"),n("3bBZ");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("/Yj0"),o=n("5/Cn"),l=n("hSdx");function c(e,t,n,s){return u.apply(this,arguments)}function u(){return(u=Object(r.a)(i.a.mark((function e(t,n,s,r){var o,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((o=s.vote)!==r){e.next=17;break}return s.vote=0,s.vote_count-=o,e.prev=4,e.next=7,t.unvote(s.id,s.type);case 7:e.next=15;break;case 9:throw e.prev=9,e.t0=e.catch(4),s.vote=o,s.vote_count+=o,a.b({type:"error",text:n.t("discussion.unlikeError")}),e.t0;case 15:e.next=31;break;case 17:return s.vote=r,s.vote_count+=r-o,l=1===r?"upvote":"downvote",e.prev=20,e.next=23,t[l](s.id,s.type);case 23:e.next=31;break;case 25:throw e.prev=25,e.t1=e.catch(20),s.vote=o,s.vote_count-=r-o,a.b({type:"error",text:n.t("discussion.likeError")}),e.t1;case 31:case"end":return e.stop()}}),e,null,[[4,9],[20,25]])})))).apply(this,arguments)}function d(e,t,n){return h.apply(this,arguments)}function h(){return(h=Object(r.a)(i.a.mark((function e(t,n,s){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.is_pinned,s.is_pinned=!s.is_pinned,e.prev=2,e.next=5,t[r?"unpin":"pin"](s.id,s.type);case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),s.is_pinned=r,a.b({type:"error",text:n.t("discussion.togglePinError")});case 11:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}function p(e,t,n){return f.apply(this,arguments)}function f(){return(f=Object(r.a)(i.a.mark((function e(t,n,s){var r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.is_starred,s.is_starred=!s.is_starred,o=r?-1:1,s.star_count+=o,e.prev=4,e.next=7,t[r?"unstar":"star"](s.id,s.type);case 7:e.next=14;break;case 9:e.prev=9,e.t0=e.catch(4),s.is_starred=r,s.star_count-=o,a.b({type:"error",text:n.t("discussion.toggleStarError")});case 14:case"end":return e.stop()}}),e,null,[[4,9]])})))).apply(this,arguments)}function m(e,t,n){return v.apply(this,arguments)}function v(){return(v=Object(r.a)(i.a.mark((function e(t,n,s){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.is_endorsed,s.is_endorsed=!s.is_endorsed,e.prev=2,e.next=5,t[r?"unendorse":"endorse"](s.id,s.type);case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),s.is_endorsed=r,a.b({type:"error",text:n.t("discussion.toggleEndorsementError")});case 11:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}function b(e,t,n,s){return g.apply(this,arguments)}function g(){return(g=Object(r.a)(i.a.mark((function e(t,n,s,r){var o,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=s.accepted_id)===r?(l="unacceptAnswer",s.accepted_id=null):(l="acceptAnswer",s.accepted_id=r),e.prev=2,e.next=5,t[l](r);case 5:e.next=12;break;case 7:throw e.prev=7,e.t0=e.catch(2),s.accepted_id=o,a.b({type:"error",text:n.t("discussion.changeAcceptedAnswerError")}),e.t0;case 12:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}function y(e,t,n,s){return w.apply(this,arguments)}function w(){return(w=Object(r.a)(i.a.mark((function e(t,n,s,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.setWatch(s.id,r);case 3:e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(0),a.b({type:"error",text:n.t("discussion.setWatchError")}),e.t0;case 9:s.is_watched=r;case 10:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function _(e,t,n,s,i,r){return k.apply(this,arguments)}function k(){return(k=Object(r.a)(i.a.mark((function e(t,n,s,r,o,l){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t[l?"read":"unread"](r.id);case 3:r.is_seen=l,e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),a.b({type:"error",text:s.t("discussion.mark".concat(l?"Read":"Unread","Error"))}),e.abrupt("return");case 10:n.emit("discuss:thread-read",{thread:r,course:o,read:l});case 11:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function C(e,t,n,s,i){return _(e,t,n,s,i,!s.is_seen)}function x(e,t,n,s){return j.apply(this,arguments)}function j(){return(j=Object(r.a)(i.a.mark((function e(t,n,s,r){var l,c,u,d,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b({icon:"question",title:n.t("discussion.markAllAsRead.confirmTitle"),text:n.t("discussion.markAllAsRead.confirmText"),primaryAction:n.t("discussion.markAllAsRead.confirmAffirmButton")});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,t.readAll(r.id);case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(4),a.b({type:"error",text:n.t("discussion.markAllAsRead.error")}),e.abrupt("return");case 13:for(l=!0,c=!1,u=void 0,e.prev=16,d=s[Symbol.iterator]();!(l=(h=d.next()).done);l=!0)h.value.is_seen=!0;e.next=24;break;case 20:e.prev=20,e.t1=e.catch(16),c=!0,u=e.t1;case 24:e.prev=24,e.prev=25,l||null==d.return||d.return();case 27:if(e.prev=27,!c){e.next=30;break}throw u;case 30:return e.finish(27);case 31:return e.finish(24);case 32:r.discussion.unread=0;case 33:case"end":return e.stop()}}),e,null,[[4,9],[16,20,24,32],[25,,27,31]])})))).apply(this,arguments)}function O(e,t,n,s,i){return S.apply(this,arguments)}function S(){return(S=Object(r.a)(i.a.mark((function e(t,n,s,r,o){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.updateThread(s.id,{type:s.type,category:r||"",subcategory:o||""});case 3:s.category=r,s.subcategory=o,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a.b({type:"error",text:n.t("discussion.changeCategoryError")});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function E(e){return{name:"discuss-show",params:{courseId:e.course_id,threadId:"answer"===e.type?e.thread_id:e.id},query:{answer:"answer"===e.type?e.id:void 0}}}function T(e,t){var n=e.match(E(t)).fullPath;return l.makeUrlAbsolute(n)}function I(e){return{name:"discuss-show",params:{courseId:e.course_id,threadId:e.thread_id},query:{comment:e.id}}}function D(e,t){var n=e.match(I(t)).fullPath;return l.makeUrlAbsolute(n)}function P(e,t,n){return A.apply(this,arguments)}function A(){return(A=Object(r.a)(i.a.mark((function e(t,n,s){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.is_locked,s.is_locked=!s.is_locked,e.prev=2,e.next=5,t[r?"unlock":"lock"](s.id,s.type);case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),s.is_locked=r,a.b({type:"error",text:n.t("discussion.".concat(r?"unlock":"lock","Error"))});case 11:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}function N(e,t,n){return R.apply(this,arguments)}function R(){return(R=Object(r.a)(i.a.mark((function e(t,n,s){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.is_private,s.is_private=!s.is_private,e.prev=2,e.next=5,t.updateThread(s.id,{type:s.type,is_private:s.is_private});case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),s.is_private=r,a.b({type:"error",text:n.t("discussion.".concat(r?"public":"private","Error"))});case 11:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}},Ffo8:function(e,t,n){"use strict";var s=n("cIHA");n.n(s).a},FgvH:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("4Brf"),n("0oug"),n("TeQF"),n("4mDm"),n("2B1R"),n("zKZe"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("4l63"),n("PKPk"),n("EnZy"),n("SYor"),n("FZtP"),n("3bBZ");var s=n("ODXe"),i=n("o0o1"),r=n.n(i),a=(n("ls82"),n("HaE+")),o=n("rePB"),l=n("BkRI"),c=n.n(l),u=n("L2JU"),d=n("U3Ry"),h=n("/Yj0"),p=n("4K9I"),f=n("6XG0"),m=n("5G72"),v=n("JO+Q"),b=(n("ma9I"),n("fbCW"),n("Pa8A")),g=n("VYah"),y=n("YxxY"),w=n("Dm8+"),_=n("gv/e"),k=n("TphV"),C=n("2PkB"),x=(n("ToJy"),n("rNhl"),n("wd/R")),j=n.n(x),O=n("xtk+"),S=n("4cYw"),E=n("AuRJ"),T=n("LnxB"),I={components:{EdInput:O.a,EdSelect:S.a,EdCheck:f.a,EdTextarea:m.a,DateTimeField:E.a,Message:T.a},props:{value:{type:Object,required:!0}},computed:{errorMessage:function(){return this.value.name.trim()?j()(this.value.timeStart).isValid()?j()(this.value.timeEnd).isValid()?this.duration<0?"End time must be after start time.":void 0:"Invalid or empty end time.":"Invalid or empty start time.":"Name cannot be empty."},ipsString:function(){return this.value.machineIPs.join("\n")},duration:{get:function(){return(this.value.timeEnd-this.value.timeStart)/1e3/60},set:function(e){e=parseFloat(e),isFinite(e)&&(this.value.timeEnd=j()(this.value.timeStart).add(e,"minutes"))}}},watch:{errorMessage:{immediate:!0,handler:function(e){this.$emit("error-message",e)}}},methods:{handleTimeBuffer:function(e){e=parseInt(e),isFinite(e)||(e=0),this.value.timeBuffer=Math.abs(e)},handleMaxEnrollments:function(e){e=parseInt(e),isFinite(e)||(e=null),this.value.maxEnrollments=e},handleMachineIPs:function(e){this.value.machineIPs=e.split(/\s+/).filter((function(e){return/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/.test(e)})).sort()}}},D=(n("voaT"),n("KHd+")),P=Object(D.a)(I,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"lab-editor"},[e.errorMessage?n("Message",{staticClass:"labed-message",attrs:{type:"error"}},[e._v(e._s(e.errorMessage))]):e._e(),e._v(" "),n("table",{staticClass:"labed-layout"},[n("tbody",[n("tr",[n("th",[e._v("Name")]),e._v(" "),n("td",[n("EdInput",{model:{value:e.value.name,callback:function(t){e.$set(e.value,"name",t)},expression:"value.name"}})],1)]),e._v(" "),n("tr",[n("th",[e._v("Location")]),e._v(" "),n("td",[n("EdInput",{model:{value:e.value.location,callback:function(t){e.$set(e.value,"location",t)},expression:"value.location"}})],1)]),e._v(" "),n("tr",[n("th",[e._v("Start time")]),e._v(" "),n("td",[n("DateTimeField",{model:{value:e.value.timeStart,callback:function(t){e.$set(e.value,"timeStart",t)},expression:"value.timeStart"}})],1)]),e._v(" "),n("tr",[n("th",[e._v("End time")]),e._v(" "),n("td",[n("DateTimeField",{model:{value:e.value.timeEnd,callback:function(t){e.$set(e.value,"timeEnd",t)},expression:"value.timeEnd"}})],1)]),e._v(" "),n("tr",[n("th",[e._v("Duration (minutes)")]),e._v(" "),n("td",[n("EdInput",{attrs:{value:e.duration},nativeOn:{blur:function(t){e.duration=t.target.value}}})],1)]),e._v(" "),n("tr",[n("th",[e._v("± (minutes)")]),e._v(" "),n("td",[n("EdInput",{attrs:{value:e.value.timeBuffer},nativeOn:{blur:function(t){return e.handleTimeBuffer(t.target.value)}}})],1)]),e._v(" "),n("tr",[n("th",[e._v("Repeat")]),e._v(" "),n("td",[n("EdSelect",{model:{value:e.value.repeat,callback:function(t){e.$set(e.value,"repeat",t)},expression:"value.repeat"}},[n("option",{attrs:{value:"off"}},[e._v("Off")]),e._v(" "),n("option",{attrs:{value:"day"}},[e._v("Every Day")]),e._v(" "),n("option",{attrs:{value:"weekday"}},[e._v("Every Weekday")]),e._v(" "),n("option",{attrs:{value:"week"}},[e._v("Every Week")])])],1)]),e._v(" "),n("tr",[n("th",[e._v("Max enrollments")]),e._v(" "),n("td",[n("EdInput",{attrs:{value:e.value.maxEnrollments},nativeOn:{blur:function(t){return e.handleMaxEnrollments(t.target.value)}}})],1)]),e._v(" "),n("tr",[n("th",[e._v("Category")]),e._v(" "),n("td",[n("EdInput",{model:{value:e.value.category,callback:function(t){e.$set(e.value,"category",t)},expression:"value.category"}})],1)]),e._v(" "),n("tr",[n("th",[e._v("Machine LAN IP addresses")]),e._v(" "),n("td",[n("EdTextarea",{attrs:{value:e.ipsString},nativeOn:{blur:function(t){return e.handleMachineIPs(t.target.value)}}})],1)]),e._v(" "),n("tr",[n("td",{attrs:{colspan:"2"}},[n("EdCheck",{attrs:{label:"Disable machine visibility for low enrollments",description:"Disables the machine visibility setting of exams in this lab if the number of enrollments is less or equal to than half of the max enrollments."},model:{value:e.value.machineVisibilityEnrollments,callback:function(t){e.$set(e.value,"machineVisibilityEnrollments",t)},expression:"value.machineVisibilityEnrollments"}})],1)]),e._v(" "),n("tr",[n("td",{attrs:{colspan:"2"}},[n("EdCheck",{attrs:{label:"Disable machine visibility",description:"Disables the machine visibility setting of exams in this lab. This overrides the above setting."},model:{value:e.value.machineVisibilityDisabled,callback:function(t){e.$set(e.value,"machineVisibilityDisabled",t)},expression:"value.machineVisibilityDisabled"}})],1)]),e._v(" "),n("tr",[n("td",{attrs:{colspan:"2"}},[n("EdCheck",{attrs:{label:"Hidden",description:"Hidden labs cannot be joined by students."},model:{value:e.value.hidden,callback:function(t){e.$set(e.value,"hidden",t)},expression:"value.hidden"}})],1)])])]),e._v(" "),e._t("default")],2)}),[],!1,null,null,null).exports,A=n("5/Cn");function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var R,M,L={directives:{Tooltip:b.a},components:{Split:g.a,SplitPanel:y.a,ListView:w.a,Placeholder:_.a,Navbar:k.a,NavbarButton:C.a,LabEditor:P},inject:["labApi"],props:{labs:{type:Array,required:!0}},data:function(){return{selectedLabId:null,model:null,labLoading:!1,errorMessage:null,splitPanelListFrac:200,splitPanelLabFrac:1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(u.e)(["course"]),{selectedLab:{get:function(){var e=this;return this.labs.find((function(t){return t.id===e.selectedLabId}))},set:function(e){this.selectedLabId=e&&e.id}}}),watch:{selectedLab:function(){(this.selectedLab||this.model&&this.model.id)&&(this.model=this.selectedLab&&this.selectedLab.clone())}},methods:{setLabs:function(e){this.$emit("update:labs",e)},newLab:function(){var e=d.a.create();e.courseId=this.course.id,this.model=e,this.selectedLab=null},deselectLab:function(){this.model=null,this.selectedLab=null},deleteLab:(M=Object(a.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.labLoading,e.t0){e.next=5;break}return e.next=4,A.b({icon:"warning",title:'Delete lab "'.concat(this.selectedLab.name,'"?'),text:"Any students enrolled in this lab will also be unenrolled from this lab. This cannot be undone.",primaryAction:"Delete"});case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=7;break}return e.abrupt("return");case 7:return this.labLoading=!0,t=this.selectedLab.id,e.prev=9,e.next=12,this.labApi.destroy(t);case 12:e.next=18;break;case 14:return e.prev=14,e.t1=e.catch(9),A.a({icon:"error",title:"Unable to delete lab",text:"Check your Internet connection and try again."}),e.abrupt("return");case 18:return e.prev=18,this.labLoading=!1,e.finish(18);case 21:h.b({type:"success",text:"Lab deleted."}),this.setLabs(this.labs.filter((function(e){return e.id!==t}))),this.selectedLab=null,this.model=null,this.$emit("did-delete-lab",t);case 26:case"end":return e.stop()}}),e,this,[[9,14,18,21]])}))),function(){return M.apply(this,arguments)}),saveLab:(R=Object(a.a)(r.a.mark((function e(){var t,n,s=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.labLoading){e.next=2;break}return e.abrupt("return");case 2:if(!this.errorMessage){e.next=5;break}return A.a({icon:"warning",title:"One or more fields contain errors",text:this.errorMessage}),e.abrupt("return");case 5:if(!this.labs.some((function(e){return e.id!==s.model.id&&e.name===s.model.name}))){e.next=8;break}return A.a({icon:"warning",title:"Another lab already exists with the name ".concat(this.model.name),text:"Lab names must be unique. Choose a different name."}),e.abrupt("return");case 8:if(t=!1,!this.selectedLab||this.selectedLab.hidden||!this.model.hidden){e.next=15;break}return e.next=12,A.b({icon:"warning",title:"All users will be unenrolled from this lab",text:"You have indicated to hide this lab. In doing so, any users enrolled in this lab will be permanently unenrolled from it. In addition, students will not be able to enroll in this lab while it is hidden.",primaryAction:"Unenroll Students"});case 12:if(e.sent){e.next=14;break}return e.abrupt("return");case 14:t=!0;case 15:return this.labLoading=!0,e.prev=16,e.next=19,this.model.id?this.labApi.update(this.model,t):this.labApi.create(this.model);case 19:n=e.sent,e.next=26;break;case 22:return e.prev=22,e.t0=e.catch(16),A.a({icon:"error",title:"Unable to save lab",text:"Check your Internet connection and try again."}),e.abrupt("return");case 26:return e.prev=26,this.labLoading=!1,e.finish(26);case 29:h.b({type:"success",text:"Lab saved."}),this.setLabs(this.labs.map((function(e){return e.id===n.id?n:e})).concat(this.model.id?[]:n)),this.selectedLab=n,t&&this.$emit("did-unenroll",n.id);case 33:case"end":return e.stop()}}),e,this,[[16,22,26,29]])}))),function(){return R.apply(this,arguments)})}},F=(n("zTH7"),Object(D.a)(L,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"admin-labs"},[n("Split",{staticClass:"alab-split",attrs:{orientation:"horizontal"}},[n("SplitPanel",{attrs:{frac:e.splitPanelListFrac,"min-frac":100,"max-frac":300,sizing:"fixed"},on:{"update:frac":function(t){e.splitPanelListFrac=t}}},[n("div",{staticClass:"alab-list-layout"},[n("Navbar",{attrs:{title:"Labs"},scopedSlots:e._u([{key:"right",fn:function(){return[n("NavbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"New Lab",expression:"'New Lab'"}],attrs:{icon:"plus"},on:{action:e.newLab}})]},proxy:!0}])}),e._v(" "),n("ListView",{staticClass:"alab-list",attrs:{items:e.labs,"selected-item":e.selectedLab},on:{"update:selectedItem":function(t){e.selectedLab=t},"update:selected-item":function(t){e.selectedLab=t}},scopedSlots:e._u([{key:"item",fn:function(t){var s=t.item;return[n("div",{staticClass:"alab-item"},[n("div",{staticClass:"alab-item-name"},[e._v(e._s(s.hidden?"(hidden) ":"")+e._s(s.name))]),e._v(" "),s.location?n("div",{staticClass:"alab-item-location"},[e._v(e._s(s.location))]):e._e()])]}}])})],1)]),e._v(" "),n("SplitPanel",{attrs:{frac:e.splitPanelLabFrac},on:{"update:frac":function(t){e.splitPanelLabFrac=t}}},[e.model?[n("Navbar",{attrs:{title:e.model.name},scopedSlots:e._u([{key:"left",fn:function(){return[n("NavbarButton",{attrs:{text:"Cancel"},on:{action:e.deselectLab}})]},proxy:!0},{key:"right",fn:function(){return[e.model.id?n("NavbarButton",{attrs:{text:"Delete"},on:{action:e.deleteLab}}):e._e(),e._v(" "),n("NavbarButton",{attrs:{text:"Save",type:"default"},on:{action:e.saveLab}})]},proxy:!0}],null,!1,847216971)}),e._v(" "),n("div",{staticClass:"alab-lab-editor-container"},[n("LabEditor",{staticClass:"alab-lab-editor",attrs:{value:e.model},on:{"error-message":function(t){e.errorMessage=t}}})],1)]:n("Placeholder",{staticClass:"alab-placeholder"},[e._v("Create or select a lab")])],2)],1)],1)}),[],!1,null,null,null).exports),B=n("/wT1");function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var $,U,z,V={name:"AdminExams",inject:["courseApi","labApi"],components:{EdButton:p.a,EdCheck:f.a,EdTextarea:m.a,DetailHeader:v.a,Labs:F},extends:B.a,data:function(){return{saving:!1,settings:null,labImport:{body:"",delete:!1,loading:!1},labEnrollImport:{body:"",delete:!1,loading:!1}}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(u.e)(["course"])),methods:{update:function(){this.settings=c()(this.course.settings)},save:(z=Object(a.a)(r.a.mark((function e(){var t,n,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={settings:c()(this.settings)},this.saving=!0,e.prev=2,e.next=5,this.courseApi.update(this.course.id,t);case 5:n=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),s=400===e.t0.status&&"lab_user_agent_regex_syntax"===e.t0.data.code?"Invalid User Agent Regex syntax.":400===e.t0.status&&"string"==typeof e.t0.data.message?e.t0.data.message:"Unable to save course settings.",h.b({type:"error",text:s}),e.abrupt("return");case 13:return e.prev=13,this.saving=!1,e.finish(13);case 16:h.b({type:"success",text:"Updated course settings."}),Object.assign(this.settings,c()(n.settings)),Object.assign(this.course,c()(n));case 19:case"end":return e.stop()}}),e,this,[[2,8,13,16]])}))),function(){return z.apply(this,arguments)}),onDidDeleteLab:function(e){var t=!0,n=!1,s=void 0;try{for(var i,r=this.users[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;a.lab_id===e&&(a.lab_id=null)}}catch(o){n=!0,s=o}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}},onDidUnenrollFromLab:function(e){var t=!0,n=!1,s=void 0;try{for(var i,r=this.users[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;a.lab_id===e&&(a.lab_id=null)}}catch(o){n=!0,s=o}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}},importLabs:(U=Object(a.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.labImport.loading){e.next=2;break}return e.abrupt("return");case 2:if(!(t=this.labImport.body.split("\n").map((function(e){return e.trim()})).filter(Boolean).map((function(e){var t=e.split(",").map((function(e){return e.trim()})),n=Object(s.a)(t,5),i=n[0],r=n[1],a=n[2],o=n[3],l=n[4],c=d.a.create();return c.name=i,c.location=r,c.timeStart=new Date(a),c.timeEnd=new Date(o),c.timeBuffer=parseInt(l),c}))).some((function(e){return!e.name||isNaN(e.timeStart)||isNaN(e.timeEnd)||isNaN(e.timeBuffer)||e.timeBuffer<0}))){e.next=6;break}return alert.alert({icon:"error",title:"Data is invalid",text:"Verify that every lab has a name and valid start, end and buffer times."}),e.abrupt("return");case 6:return e.next=8,alert.confirm({icon:"question",title:"Import exam labs?",text:this.labImport.delete?"All labs and lab enrollments will be deleted prior to the import.":"Labs will be overwritten if any of the imported labs have the same name as an existing lab.",primaryAction:"Import"});case 8:if(e.sent){e.next=10;break}return e.abrupt("return");case 10:return this.labImport.loading=!0,e.prev=11,e.next=14,this.labApi.courseImport(this.course.id,t,this.labImport.delete);case 14:n=e.sent,e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(11),alert.alert({icon:"error",title:"Failed to import the labs",text:"Try again later."}),e.abrupt("return");case 21:return e.prev=21,this.labImport.loading=!1,e.finish(21);case 24:this.labImport.delete?this.setLabs(n):this.appendLabs(n),this.labImport.body="",this.labImport.delete=!1,h.b({type:"success",text:"Labs imported successfully."});case 28:case"end":return e.stop()}}),e,this,[[11,17,21,24]])}))),function(){return U.apply(this,arguments)}),importLabEnrollments:($=Object(a.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.labEnrollImport.loading){e.next=2;break}return e.abrupt("return");case 2:if(!(t=this.labEnrollImport.body.split("\n").map((function(e){return e.trim()})).filter(Boolean).map((function(e){var t=e.split(",").map((function(e){return e.trim()})),n=Object(s.a)(t,2);return{email:n[0],lab:n[1]}}))).some((function(e){return!e.email||!e.lab}))){e.next=6;break}return alert.alert({icon:"error",title:"Data is invalid",text:"Verify that every line has the user email and lab name."}),e.abrupt("return");case 6:return e.next=8,alert.confirm({icon:"question",title:"Import exam lab enrollments?",text:this.labEnrollImport.delete?"Existing lab enrollments will be deleted prior to the import.":"Existing lab enrollments for students not in the new data set will be unaffected.",primaryAction:"Import"});case 8:if(e.sent){e.next=10;break}return e.abrupt("return");case 10:return this.labEnrollImport.loading=!0,e.prev=11,e.next=14,this.courseApi.importLabEnrollments(this.course.id,t,this.labEnrollImport.delete);case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(11),alert.alert({icon:"error",title:"Failed to import the lab enrollments",text:"Try again later."}),e.abrupt("return");case 20:return e.prev=20,this.labEnrollImport.loading=!1,e.finish(20);case 23:return this.labEnrollImport.body="",this.labEnrollImport.delete=!1,e.next=27,this.updateUsers();case 27:h.b({type:"success",text:"Lab enrollments imported successfully."});case 28:case"end":return e.stop()}}),e,this,[[11,16,20,23]])}))),function(){return $.apply(this,arguments)})}},H=(n("tOAe"),Object(D.a)(V,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("DetailHeader",{attrs:{disabled:e.saving},on:{save:e.save}}),e._v(" "),n("section",{staticClass:"adm-section"},[n("h2",{staticClass:"adm"},[e._v("Exam Labs")]),e._v(" "),n("Labs",{staticClass:"adm-labs",attrs:{labs:e.labs},on:{"update:labs":function(t){e.labs=t},"did-delete-lab":e.onDidDeleteLab,"did-unenroll":e.onDidUnenrollFromLab}}),e._v(" "),n("h2",{staticClass:"adm"},[e._v("Import Exam Labs")]),e._v(" "),n("p",{staticClass:"adm-description"},[e._v("\n\t\t\tEnter each lab on a separate line in CSV format. Refer to the placeholder\n\t\t\ttext for an example.\n\t\t")]),e._v(" "),n("p",[n("EdCheck",{attrs:{label:"Delete existing labs and lab enrollments before importing"},model:{value:e.labImport.delete,callback:function(t){e.$set(e.labImport,"delete",t)},expression:"labImport.delete"}})],1),e._v(" "),n("EdTextarea",{staticClass:"adm-labs-textarea",attrs:{disabled:e.labImport.loading,placeholder:"Name, location, time start, time end, time buffer",autocomplete:"off",spellcheck:"false"},model:{value:e.labImport.body,callback:function(t){e.$set(e.labImport,"body",t)},expression:"labImport.body"}}),e._v(" "),n("div",{staticClass:"adm-actions"},[n("EdButton",{staticClass:"primary",attrs:{disabled:e.labImport.loading},on:{click:e.importLabs}},[e._v("\n\t\t\t\tImport\n\t\t\t")])],1),e._v(" "),n("h2",{staticClass:"adm"},[e._v("Import Exam Lab Enrollments")]),e._v(" "),n("p",{staticClass:"adm-description"},[e._v("\n\t\t\tEnter each lab enrollment on a separate line in CSV format. Refer to\n\t\t\tthe placeholder text for an example.\n\t\t")]),e._v(" "),n("p",[n("EdCheck",{attrs:{label:"Delete existing lab enrollments before importing"},model:{value:e.labEnrollImport.delete,callback:function(t){e.$set(e.labEnrollImport,"delete",t)},expression:"labEnrollImport.delete"}})],1),e._v(" "),n("EdTextarea",{staticClass:"adm-lab-enroll-textarea",attrs:{disabled:e.labEnrollImport.loading,placeholder:"User email, lab name",autocomplete:"off",spellcheck:"false"},model:{value:e.labEnrollImport.body,callback:function(t){e.$set(e.labEnrollImport,"body",t)},expression:"labEnrollImport.body"}}),e._v(" "),n("div",{staticClass:"adm-actions"},[n("EdButton",{staticClass:"primary",attrs:{disabled:e.labEnrollImport.loading},on:{click:e.importLabEnrollments}},[e._v("\n\t\t\t\tImport\n\t\t\t")])],1)],1)],1)}),[],!1,null,null,null));t.default=H.exports},FjLf:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("4Brf"),n("0oug"),n("ma9I"),n("TeQF"),n("fbCW"),n("x0AG"),n("yq1k"),n("4mDm"),n("2B1R"),n("ToJy"),n("pDQq"),n("zKZe"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("JTJg"),n("PKPk"),n("UxlC"),n("hByQ"),n("FZtP"),n("3bBZ");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("7tbW"),l=n.n(o),c=n("L2JU"),u=n("oDEV"),d=n("Wjtt"),h=n("NC1X"),p={data:function(){return{count:0}},mounted:function(){this.$el.addEventListener("dragenter",this.onDragEnter),this.$el.addEventListener("dragleave",this.onDragLeave),this.$el.addEventListener("dragover",this.onDragOver),this.$el.addEventListener("drop",this.onDrop)},methods:{onDragEnter:function(e){e.preventDefault(),0===this.count&&this.$el.classList.add("file-drop-over"),this.count++},onDragLeave:function(e){e.preventDefault(),this.count--,0===this.count&&this.$el.classList.remove("file-drop-over")},onDragOver:function(e){if(e.dataTransfer.types)for(var t=0;t<e.dataTransfer.types.length;t++)if("Files"===e.dataTransfer.types[t])return e.preventDefault(),void(e.dataTransfer.dropEffect="copy")},onDrop:function(e){e.preventDefault(),e.stopPropagation(),this.$emit("drop",e.dataTransfer.files[0])}},render:function(){return this.$scopedSlots.default?this.$scopedSlots.default()[0]:void 0}},f=n("KHd+"),m=Object(f.a)(p,void 0,void 0,!1,null,null,null).exports,v=n("WmPt"),b=(n("+2oP"),n("Rm1S"),n("wd/R")),g=n.n(b),y=n("9Arg"),w=n("Pa8A"),_=(n("uqXc"),n("SYor"),n("sK6X")),k=n("AuRJ"),C=n("4K9I"),x=n("xtk+"),j=n("/Yj0");function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var S,E={directives:{Autoselect:_.a},components:{FadeTransition:u.a,DateTimeField:k.a,Spinner:h.a,EdButton:C.a,EdInput:x.a},inject:["resourceApi","keyboardShortcutManager"],props:{resource:{type:Object,default:null},file:{type:File,default:null},categories:{type:Array,required:!0},type:{type:String,default:"file"}},data:function(){return{loading:!1,editModel:{session:null,category:null,name:null,link:null,release_at:null}}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(c.e)(["course"]),{filePickerText:function(){return this.resource||this.file?"Change File":"Choose File"},filenameText:function(){return this.file?this.file.name:this.resource?"Existing file will not be changed":"No file chosen"},saveBtnText:function(){return"file"===this.type?this.resource?this.file?"Upload and Save":"Save":"Upload":this.resource?"Save":"Create"}}),watch:{resource:{immediate:!0,handler:function(e){e?(this.editModel.session=e.session,this.editModel.category=e.category,this.editModel.name=e.name,this.editModel.release_at=e.release_at,this.editModel.link=e.link):(this.editModel.session=null,this.editModel.category=null,this.editModel.name=null,this.editModel.release_at=null,this.editModel.link=null)}},file:{immediate:!0,handler:function(e){if(e&&!this.editModel.name){var t=e.name,n=t.lastIndexOf(".");-1!==n&&(t=t.substr(0,n)),this.editModel.name=t}}}},mounted:function(){this.disposable=this.keyboardShortcutManager.register({default:"Control+s",mac:"Meta+s"},this.save,{description:"Save resource",element:this.$el})},destroyed:function(){this.disposable&&this.disposable.dispose()},methods:{onKeydown:function(e){"Escape"===e.key&&(e.preventDefault(),this.cancel())},cancel:function(){this.$emit("cancel")},save:(S=Object(r.a)(i.a.mark((function e(){var t,n,s,r,a,o,l,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loading){e.next=2;break}return e.abrupt("return");case 2:this.editModel.session=(this.editModel.session||"").trim(),this.editModel.category=(this.editModel.category||"").trim(),this.editModel.name=(this.editModel.name||"").trim(),"link"===this.type&&(this.editModel.link=(this.editModel.link||"").trim()),t=this.editModel.category.toLowerCase(),n=!0,s=!1,r=void 0,e.prev=10,a=this.categories[Symbol.iterator]();case 12:if(n=(o=a.next()).done){e.next=20;break}if(l=o.value,t!==l.toLowerCase()){e.next=17;break}return this.editModel.category=l,e.abrupt("break",20);case 17:n=!0,e.next=12;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(10),s=!0,r=e.t0;case 26:e.prev=26,e.prev=27,n||null==a.return||a.return();case 29:if(e.prev=29,!s){e.next=32;break}throw r;case 32:return e.finish(29);case 33:return e.finish(26);case 34:if(this.editModel.category){e.next=38;break}return j.b({type:"error",text:"Category cannot be empty."}),this.$refs.category.$el.focus(),e.abrupt("return");case 38:if(this.editModel.name){e.next=42;break}return j.b({type:"error",text:"Name cannot be empty."}),this.$refs.name.$el.focus(),e.abrupt("return");case 42:if("file"!==this.type||this.resource||this.file){e.next=46;break}return j.b({type:"error",text:"Select a file to upload."}),this.$refs.filePicker.$el.focus(),e.abrupt("return");case 46:if("link"!==this.type||this.editModel.link){e.next=50;break}return j.b({type:"error",text:"Link cannot be empty."}),this.$refs.link.$el.focus(),e.abrupt("return");case 50:if(this.loading=!0,e.prev=51,!this.resource){e.next=71;break}return e.prev=53,e.next=56,this.resourceApi.updateResource(this.resource.id,this.file,this.editModel);case 56:c=e.sent,e.next=63;break;case 59:throw e.prev=59,e.t1=e.catch(53),j.b({type:"error",text:"Failed to update resource."}),e.t1;case 63:this.resource.session=this.editModel.session=c.session,this.resource.category=this.editModel.category=c.category,this.resource.name=this.editModel.name=c.name,this.resource.extension=c.extension,this.resource.release_at=this.editModel.release_at=c.release_at,j.b({type:"success",text:"Resource updated."}),e.next=82;break;case 71:return e.prev=71,e.next=74,this.resourceApi.postResource(this.course.id,this.file,this.editModel);case 74:c=e.sent,e.next=81;break;case 77:throw e.prev=77,e.t2=e.catch(71),j.b({type:"error",text:"Failed to create resource."}),e.t2;case 81:j.b({type:"success",text:"Resource created."});case 82:e.next=88;break;case 84:return e.prev=84,e.t3=e.catch(51),this.$emit("error",e.t3),e.abrupt("return");case 88:return e.prev=88,this.loading=!1,e.finish(88);case 91:this.$emit("success",c);case 92:case"end":return e.stop()}}),e,this,[[10,22,26,34],[27,,29,33],[51,84,88,91],[53,59],[71,77]])}))),function(){return S.apply(this,arguments)}),chooseFile:function(){var e=this;y.m((function(t){e.file=t}))},clearFile:function(){this.file=null}}},T=(n("/FP+"),Object(f.a)(E,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"res-edit",on:{submit:function(t){return t.preventDefault(),e.save(t)},keydown:e.onKeydown}},[n("div",{staticClass:"res-edit-row res-edit-cols"},[n("div",{staticClass:"res-edit-col res-edit-col-session"},[n("label",{staticClass:"res-edit-label"},[e._v("Session (optional)")]),e._v(" "),n("EdInput",{directives:[{name:"autoselect",rawName:"v-autoselect"}],staticClass:"res-edit-input",attrs:{disabled:e.loading,placeholder:"e.g. Week 1"},model:{value:e.editModel.session,callback:function(t){e.$set(e.editModel,"session",t)},expression:"editModel.session"}})],1),e._v(" "),n("div",{staticClass:"res-edit-col res-edit-col-category"},[n("label",{staticClass:"res-edit-label"},[e._v("Category")]),e._v(" "),n("EdInput",{ref:"category",staticClass:"res-edit-input",attrs:{disabled:e.loading,placeholder:"e.g. Lectures"},model:{value:e.editModel.category,callback:function(t){e.$set(e.editModel,"category",t)},expression:"editModel.category"}})],1),e._v(" "),n("div",{staticClass:"res-edit-col res-edit-col-name"},[n("label",{staticClass:"res-edit-label"},[e._v("Name")]),e._v(" "),n("EdInput",{ref:"name",staticClass:"res-edit-input",attrs:{disabled:e.loading},model:{value:e.editModel.name,callback:function(t){e.$set(e.editModel,"name",t)},expression:"editModel.name"}})],1)]),e._v(" "),n("div",{staticClass:"res-edit-row res-edit-cols"},["file"===e.type?n("div",{staticClass:"res-edit-col res-edit-col-change-file"},[n("label",{staticClass:"res-edit-label"},[e._v(e._s(e.filePickerText))]),e._v(" "),n("div",{staticClass:"res-edit-change-file"},[n("EdButton",{ref:"filePicker",attrs:{disabled:e.loading},on:{click:e.chooseFile}},[e._v("\n\t\t\t\t\tSelect File\n\t\t\t\t")]),e._v(" "),n("div",{staticClass:"res-edit-filename-container"},[e._v("\n\t\t\t\t\t"+e._s(e.filenameText)+"\n\t\t\t\t\t"),e.resource&&e.file?n("span",{staticClass:"res-edit-file-clear",on:{click:e.clearFile}},[e._v("\n\t\t\t\t\t\t(Clear)\n\t\t\t\t\t")]):e._e()])],1)]):e._e(),e._v(" "),"link"===e.type?n("div",{staticClass:"res-edit-col res-edit-col-link"},[n("label",{staticClass:"res-edit-label"},[e._v("Link")]),e._v(" "),n("EdInput",{ref:"link",staticClass:"res-edit-input",attrs:{disabled:e.loading,placeholder:"https://example.com"},model:{value:e.editModel.link,callback:function(t){e.$set(e.editModel,"link",t)},expression:"editModel.link"}})],1):e._e(),e._v(" "),n("div",{staticClass:"res-edit-col res-edit-col-available-after"},[n("label",{staticClass:"res-edit-label"},[e._v("Available after (optional)")]),e._v(" "),n("DateTimeField",{staticClass:"res-edit-date",attrs:{placeholder:"Select date and time"},model:{value:e.editModel.release_at,callback:function(t){e.$set(e.editModel,"release_at",t)},expression:"editModel.release_at"}})],1)]),e._v(" "),n("div",{staticClass:"res-edit-row res-edit-footer"},[n("FadeTransition",{attrs:{duration:.2}},[n("Spinner",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"res-edit-spinner"})],1),e._v(" "),n("EdButton",{attrs:{disabled:e.loading},on:{click:e.cancel}},[e._v("Cancel")]),e._v(" "),n("EdButton",{attrs:{type:"submit",disabled:e.loading}},[e._v(e._s(e.saveBtnText))])],1)])}),[],!1,null,null,null).exports),I={pdf:"pdf",doc:"document",docx:"document",txt:"document",zmdi:"document",tex:"document",xls:"data",xlsx:"data",csv:"data",ppt:"presentation",pptx:"presentation",zip:"archive",rar:"archive",tar:"archive",gz:"archive",tgz:"archive",exe:"archive",dmg:"archive",pkg:"archive",jpg:"image",jpeg:"image",gif:"image",png:"image",bmp:"image",svg:"image"},D={directives:{Tooltip:w.a},components:{Icon:v.a,ResourceEdit:T},inject:["resourceApi"],props:{resource:{type:Object,required:!0},canEdit:{type:Boolean,default:!1},categories:{type:Array,required:!0}},transitions:{edit:{beforeEnter:function(e){e.style.overflow="hidden"},afterEnter:function(e){e.style.overflow=""},beforeLeave:function(e){e.style.overflow="hidden"},afterLeave:function(e){e.style.overflow=""}}},data:function(){return{loading:!1,editing:!1}},computed:{resourceCssClass:function(){var e=[],t=(this.resource.extension||"").toLowerCase();return"."===t[0]&&(t=t.slice(1)),null!==this.resource.link?e.push("type-link"):e.push("type-".concat(I[t]||"unknown")),e},availableAfterTooltip:function(){if(this.resource.release_at){var e=g()(this.resource.release_at);if(e>g()())return"Will be available after ".concat(e.format("D MMMM YYYY [at] h:mm A"))}}},methods:{fileExtension:function(e){return e?(e=e.match(/\.([^.]*)$/))?e[1].toUpperCase():"":e},click:function(){this.editing||(null===this.resource.link?this.resourceApi.downloadResource(this.resource.id):Object(y.z)(this.resource.link))},edit:function(){this.loading||(this.editing=!this.editing)},destroy:function(){this.loading||this.$emit("destroy")}}},P=(n("NKE0"),Object(f.a)(D,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"res-row",class:{editing:e.editing}},[n("div",{staticClass:"res-body",class:e.resourceCssClass,attrs:{tabindex:"0"},on:{click:e.click,keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:e.click(t)}}},[n("div",{staticClass:"res-fill"},[e.availableAfterTooltip?n("Icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.availableAfterTooltip,expression:"availableAfterTooltip"}],staticClass:"res-pending",attrs:{icon:"clock"}}):e._e(),e._v(" "),n("div",{staticClass:"res-name",attrs:{title:e.resource.displayName}},[e._v(e._s(e.resource.displayName))]),e._v(" "),e.canEdit?[n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Edit",expression:"'Edit'"}],staticClass:"res-action media-not-sm",class:{active:e.editing},on:{click:function(t){return t.stopPropagation(),e.edit(t)},keypress:function(e){e.stopPropagation()}}},[n("Icon",{attrs:{icon:"pencil"}})],1),e._v(" "),n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Delete",expression:"'Delete'"}],staticClass:"res-action media-not-sm",on:{click:function(t){return t.stopPropagation(),e.destroy(t)},keypress:function(e){e.stopPropagation()}}},[n("Icon",{attrs:{icon:"cross"}})],1)]:e._e()],2),e._v(" "),n("div",{staticClass:"res-type",attrs:{title:e.resource.link||""}},[null===e.resource.link?[e._v(e._s(e.fileExtension(e.resource.extension)))]:n("Icon",{staticClass:"res-type-link",attrs:{icon:"link"}})],2)]),e._v(" "),n("Transition",[e.editing?n("div",{staticClass:"res-row-edit-container"},[n("ResourceEdit",{staticClass:"res-row-edit",attrs:{resource:e.resource,categories:e.categories,type:null!==e.resource.link?"link":"file"},on:{cancel:e.edit,success:e.edit}})],1):e._e()])],1)}),[],!1,null,null,null).exports),A=n("hSdx"),N=n("5/Cn"),R=n("clw3");function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function L(e){Object.defineProperty(e,"displayName",{get:function(){return e.session?"".concat(e.session," - ").concat(e.name):e.name}})}var F,B,q={name:"ResourceIndex",components:{FadeTransition:u.a,Pills:d.a,Spinner:h.a,FileDrop:m,Icon:v.a,ResourceRow:P,ResourceEdit:T},inject:["resourceApi","eventBus"],data:function(){return{resources:[],loading:!1,creating:!1,uploadFile:null,searchQuery:"",selectedCategory:"",searchInputFocused:!1,appbar:{titleLarge:"%PREV% – Resources"}}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(c.e)(["course"]),{hasPrivilegedAccess:function(){return this.course.role.isAtLeast("staff")},noSearchResultsVisible:function(){return!this.loading&&this.searchQuery&&(!this.searchResults||0===this.searchResults.length)},noUploadedResourcesVisible:function(){return!(this.loading||this.resources&&0!==this.resources.length)},searchResultsCount:function(){return this.searchResults.reduce((function(e,t){return e+t.resources.length}),0)},searchResults:function(){var e=this,t=this.resources;if(!t||0===t.length)return[];this.selectedCategory&&(t=t.filter((function(t){return t.category===e.selectedCategory}))),t=t.filter((function(t){return A.validateSubstrDeep(t,e.searchQuery,"name","category","session","extension")}));var n={},s=!0,i=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(s=(a=o.next()).done);s=!0){var l=a.value;n[l.category]||(n[l.category]=[]),n[l.category].push(l)}}catch(c){i=!0,r=c}finally{try{s||null==o.return||o.return()}finally{if(i)throw r}}return(n=Object.keys(n).map((function(e){var t=n[e];return t.sort((function(e,t){return A.naturalComparator(e.displayName,t.displayName)})),{category:e,resources:t}}))).sort((function(e,t){return A.naturalComparator(e.category,t.category)})),n},categories:function(){return l()(this.resources.map((function(e){return e.category}))).sort((function(e,t){return A.naturalComparator(e,t)}))},selectedCategoryExists:function(){return this.categories.includes(this.selectedCategory)}}),watch:{selectedCategoryExists:function(e){e||(this.selectedCategory="")}},created:function(){this.disposables=new R.a(this.eventBus.on("stream:resource.new",this.onStreamResourceNew),this.eventBus.on("stream:resource.delete",this.onStreamResourceDelete),this.eventBus.on("stream:resource.update",this.onStreamResourceUpdate),y.f(document.body,"keydown",this.onBodyKeydown)),this.course.features.resources?this.loadResources():this.$router.replace({name:"course"})},destroyed:function(){this.disposables.dispose()},methods:{onStreamResourceNew:function(e){var t=e.data;t.resource.course_id!==this.course.id||this.resources.find((function(e){return e.id===t.resource.id}))||(L(t.resource),this.resources.push(t.resource))},onStreamResourceDelete:function(e){var t=e.data,n=this.resources.findIndex((function(e){return e.id===t.resourceId}));-1!==n&&this.resources.splice(n,1)},onStreamResourceUpdate:function(e){var t=e.data,n=this.resources.find((function(e){return e.id===t.resource.id}));n&&(L(t.resource),Object.assign(n,t.resource))},onBodyKeydown:function(e){e.target!==document.body||e.metaKey||e.ctrlKey||e.altKey||this.$refs.search.focus()},clearSearchQuery:function(){this.searchQuery=""},loadResources:(B=Object(r.a)(i.a.mark((function e(){var t,n,s,r,a,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.resourceApi.getResources(this.course.id);case 4:t=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),j.b({type:"error",text:"Unable to load resources. Try again later."}),e.abrupt("return");case 11:return e.prev=11,this.loading=!1,e.finish(11);case 14:for(n=!0,s=!1,r=void 0,e.prev=17,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)L(o.value);e.next=25;break;case 21:e.prev=21,e.t1=e.catch(17),s=!0,r=e.t1;case 25:e.prev=25,e.prev=26,n||null==a.return||a.return();case 28:if(e.prev=28,!s){e.next=31;break}throw r;case 31:return e.finish(28);case 32:return e.finish(25);case 33:this.resources=t;case 34:case"end":return e.stop()}}),e,this,[[1,7,11,14],[17,21,25,33],[26,,28,32]])}))),function(){return B.apply(this,arguments)}),createFile:function(){var e=this;y.m((function(t){e.creating=!0,e.uploadFile=t}))},createLink:function(){this.creating=!0},destroyResource:(F=Object(r.a)(i.a.mark((function e(t){var n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.resources,e.next=3,N.b({title:"Delete ".concat(t.name,"?"),text:"This cannot be undone.",icon:"warning",primaryAction:"Delete",secondaryAction:"Cancel"});case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,this.resourceApi.destroyResource(t.id);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(5),j.b({type:"error",text:"Unable to delete ".concat(t.name,".")}),e.abrupt("return");case 14:-1!==(s=n.findIndex((function(e){return e.id===t.id})))&&n.splice(s,1),j.b({type:"success",text:"Deleted ".concat(t.name,".")});case 17:case"end":return e.stop()}}),e,this,[[5,10]])}))),function(e){return F.apply(this,arguments)}),onNewResource:function(e){this.creating=!1,this.uploadFile=null,this.resources.find((function(t){return t.id===e.id}))||(L(e),this.resources.push(e))},onCancelNew:function(){this.creating=!1,this.uploadFile=null},onFileDrop:function(e){this.creating=!0,this.uploadFile=e}}},$=(n("YExr"),Object(f.a)(q,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"res-page-container"},[s("div",{staticClass:"res-search-container",class:{active:e.searchInputFocused||e.searchQuery}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],ref:"search",staticClass:"res-search-input",attrs:{type:"text",placeholder:"Search "+e.selectedCategory,spellcheck:"false"},domProps:{value:e.searchQuery},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.clearSearchQuery(t)},focus:function(t){e.searchInputFocused=!0},blur:function(t){e.searchInputFocused=!1},input:function(t){t.target.composing||(e.searchQuery=t.target.value)}}}),e._v(" "),s("FadeTransition",{attrs:{duration:.1}},[s("img",{directives:[{name:"show",rawName:"v-show",value:e.searchQuery,expression:"searchQuery"}],staticClass:"res-search-clear",attrs:{src:n("KTCW"),draggable:"false"},on:{click:e.clearSearchQuery}})])],1),e._v(" "),s("Pills",{staticClass:"res-categories",attrs:{items:e.categories,nullable:""},model:{value:e.selectedCategory,callback:function(t){e.selectedCategory=t},expression:"selectedCategory"}}),e._v(" "),e.hasPrivilegedAccess&&!e.creating?s("div",{directives:[{name:"show",rawName:"v-show",value:!e.searchQuery,expression:"!searchQuery"}],staticClass:"res-create-layout media-not-sm"},[s("FileDrop",{on:{drop:e.onFileDrop}},[s("div",{staticClass:"res-create-btn res-create-btn-file",on:{click:e.createFile}},[s("Icon",{staticClass:"res-create-btn-glyph",attrs:{icon:"arrow-up"}}),e._v(" "),s("span",{staticClass:"base-message"},[e._v("Upload Resource")]),e._v(" "),s("span",{staticClass:"drop-message"},[e._v("Drop file to upload")])],1)]),e._v(" "),s("div",{staticClass:"res-create-btn res-create-btn-link",on:{click:e.createLink}},[s("Icon",{staticClass:"res-create-btn-glyph",attrs:{icon:"link"}}),e._v(" "),s("span",{staticClass:"base-message"},[e._v("Add Link")])],1)],1):e._e(),e._v(" "),e.creating?s("ResourceEdit",{staticClass:"res-new",attrs:{type:e.uploadFile?"file":"link",file:e.uploadFile,categories:e.categories},on:{cancel:e.onCancelNew,success:e.onNewResource}}):e._e(),e._v(" "),e.loading?s("Spinner",{staticClass:"res-spinner"}):e._e(),e._v(" "),e.noSearchResultsVisible?s("div",{staticClass:"res-no-search-results"},[s("p",[e._v("No resources match your search query")]),e._v(" "),s("p",[e._v("Refine your search keywords")])]):e._e(),e._v(" "),e.noUploadedResourcesVisible?s("div",{staticClass:"res-no-search-results"},[s("p",[e._v("No resources have been uploaded yet")])]):e._e(),e._v(" "),e._l(e.searchResults,(function(t){return s("div",{key:t.category},[s("h2",{staticClass:"res-group"},[e._v(e._s(t.category))]),e._v(" "),e._l(t.resources,(function(t){return s("ResourceRow",{key:t.id,attrs:{resource:t,"can-edit":e.hasPrivilegedAccess,categories:e.categories},on:{destroy:function(n){return e.destroyResource(t)}}})}))],2)}))],2)}),[],!1,null,null,null));t.default=$.exports},FmCW:function(e,t,n){},Foru:function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("0oug"),n("4mDm"),n("2B1R"),n("qePV"),n("zKZe"),n("07d7"),n("PKPk"),n("3bBZ");var s=n("kvrn"),i=n.n(s),r=n("sEfC"),a=n.n(r),o=n("G7T9"),l=n("BCsR"),c=n("UNns"),u=n("nVGi"),d=n("Kaxq"),h=n("Yswc"),p={props:{arrow:{type:Boolean,default:!1},targetLeft:{type:Number,default:0},targetTop:{type:Number,default:0},targetWidth:{type:Number,default:0},targetHeight:{type:Number,default:0},targetAnchorX:{type:Number,default:.5},targetAnchorY:{type:Number,default:1},anchorX:{type:Number,default:0},anchorY:{type:Number,default:0},animationless:{type:Boolean,default:!1},element:{type:Element,default:null}},data:function(){return{activeItemKey:null,submenuVisible:!1,submenuFocused:!1}},created:function(){this.showItemSubmenuDebounced=a()(this.showItemSubmenu,200),this.handleAfterItemMouseEnter=a()(this.handleAfterItemMouseEnter),this.handleAfterItemMouseLeave=a()(this.handleAfterItemMouseLeave)},destroyed:function(){this.showItemSubmenuDebounced.cancel(),this.handleAfterItemMouseEnter.cancel(),this.handleAfterItemMouseLeave.cancel()},methods:{handleAfterItemMouseEnter:function(e){this.submenuFocused=!1,this.activeItemKey!==e&&(this.hideSubmenu(),this.showItemSubmenuDebounced(),this.activeItemKey=e)},handleAfterItemMouseLeave:function(){this.submenuFocused||(this.activeItemKey=null)},handleMouseEnter:function(){this.$emit("focus")},handleSubmenuFocus:function(){this.submenuFocused=!0},handleClose:function(){this.$emit("close")},hideSubmenu:function(){this.showItemSubmenuDebounced.cancel(),this.submenuVisible=!1,this.submenuFocused=!1},showItemSubmenu:function(){this.submenuVisible=!0},renderItem:function(e){var t=this;if(void 0===e.key)throw"ContextMenuItem missing key";return o.a(e,{data:{props:{submenuVisible:this.activeItemKey===e.key&&this.submenuVisible,submenuAnimationless:this.animationless||!this.submenuFocused,active:this.activeItemKey===e.key},on:{submenuFocus:this.handleSubmenuFocus,submenuClose:this.handleClose,"+click":this.handleClose},nativeOn:{mouseenter:function(){return t.handleAfterItemMouseEnter(e.key)},mouseleave:function(){return t.handleAfterItemMouseLeave(e.key)}}}})},renderGroups:function(){var e=this,t=this.$createElement,n=this.$scopedSlots.default&&this.$scopedSlots.default(),s=[],i=null;if(n){var r=!0,a=!1,l=void 0;try{for(var c,u=n[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var p=c.value;o.j(p,d.a)?(i||(i=[],s.push(i)),i.push(p)):o.j(p,h.a)&&(i=null)}}catch(f){a=!0,l=f}finally{try{r||null==u.return||u.return()}finally{if(a)throw l}}}return s.map((function(n){return t("div",{staticClass:"cmenu-group"},[n.map((function(t){return e.renderItem(t)}))])}))}},render:function(){var e=this,t=arguments[0],n=function(n){var s={props:{kind:"plain",clipMode:"flip",arrowless:!e.arrow,anchorX:e.anchorX,anchorY:e.anchorY,targetAnchorX:e.targetAnchorX,targetAnchorY:e.targetAnchorY,animationless:e.animationless,lightDismissable:!0,background:"#f4f4f4",borderColor:"rgba(0, 0, 0, 0.2)",borderRadius:6},on:{close:e.handleClose}};return l.thinBoxShadow&&(s.props.borderColor="rgba(0, 0, 0, 0.3)",s.props.borderWidth=.5),Object.assign(s.props,n),t(c.a,s,[t("div",{staticClass:"context-menu",attrs:{role:"menu"},on:{mouseenter:e.handleMouseEnter}},[e.renderGroups()])])};if(this.element){var s={scopedSlots:{target:function(e){var t=e.targetLeft,s=e.targetTop,i=e.targetWidth,r=e.targetHeight;return n({targetLeft:t,targetTop:s,targetWidth:i,targetHeight:r,targetAnchorX:1,targetAnchorY:0,arrowless:!0,anchorX:0,anchorY:0,insetTop:4,insetBottom:4,clipMode:"flipX"})}}};return t(u.a,i()([{attrs:{active:!0,element:this.element}},s]))}return n({targetLeft:this.targetLeft,targetTop:this.targetTop,targetWidth:this.targetWidth,targetHeight:this.targetHeight})}},f=(n("PRxD"),n("KHd+")),m=Object(f.a)(p,void 0,void 0,!1,null,null,null);t.a=m.exports},FqCa:function(e,t,n){"use strict";var s=n("3Klq");n.n(s).a},Fqdu:function(e,t,n){},FrRX:function(e,t,n){"use strict";var s=n("bHgy");n.n(s).a},Fs0j:function(e,t,n){"use strict";var s=n("bI3l");n.n(s).a},Ftro:function(e,t,n){"use strict";var s=n("36YP");n.n(s).a},FzWN:function(e,t,n){"use strict";var s=n("7/uT");n.n(s).a},G0I9:function(e,t,n){"use strict";var s=n("flB1");n.n(s).a},G5to:function(e,t,n){"use strict";var s=n("QfBM");n.n(s).a},G6cA:function(e,t,n){"use strict";var s=n("0uxb");n.n(s).a},G7T9:function(e,t,n){"use strict";n.d(t,"f",(function(){return c})),n.d(t,"j",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"i",(function(){return f})),n.d(t,"g",(function(){return m})),n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return y})),n.d(t,"c",(function(){return w})),n.d(t,"e",(function(){return _})),n.d(t,"h",(function(){return k}));n("pNMO"),n("4Brf"),n("0oug"),n("TeQF"),n("4mDm"),n("zKZe"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("PKPk"),n("LKBx"),n("FZtP"),n("3bBZ");var s=n("KQm4"),i=n("rePB"),r=n("U8pU"),a=n("Kw5r");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){return u(e&&e.$vnode,t)}function u(e,t){return!!(e&&e.componentOptions&&e.componentOptions.Ctor)&&(!(!t||"object"!==Object(r.a)(t))&&(t instanceof a.default||(t=a.default.extend(t)),e.componentOptions.Ctor===t))}function d(e,t){return function e(n){if(t(n))return n;var s=!0,i=!1,r=void 0;try{for(var a,o=n.$children[Symbol.iterator]();!(s=(a=o.next()).done);s=!0){var l=e(a.value);if(l)return l}}catch(c){i=!0,r=c}finally{try{s||null==o.return||o.return()}finally{if(i)throw r}}return null}(e)}function h(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){var e=!0,n=!1,s=void 0;try{for(var i,r=t[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value;a.apply(void 0,arguments)}}catch(o){n=!0,s=o}finally{try{e||null==r.return||r.return()}finally{if(n)throw s}}}}function p(e,t){for(var n=0,s=Object.keys(t);n<s.length;n++){var i=s[n],r=t[i],a=!1;i.startsWith("+")&&(a=!0,i=i.substr(1));var o=e[i];e[i]=o?a?h(o,r):h(r,o):r}return e}function f(e){e=l({},e,{attrs:e.attrs&&l({},e.attrs),props:e.props&&l({},e.props),domProps:e.domProps&&l({},e.domProps),on:e.on&&l({},e.on),nativeOn:e.nativeOn&&l({},e.nativeOn),directives:e.directives&&Object(s.a)(e.directives),scopedSlots:e.scopedSlots&&l({},e.scopedSlots)});for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0,a=n;r<a.length;r++){var o,c=a[r];if(c.attrs&&(e.attrs=Object.assign(e.attrs||{},c.attrs)),c.props&&(e.props=Object.assign(e.props||{},c.props)),c.domProps&&(e.domProps=Object.assign(e.domProps||{},c.domProps)),c.on&&(e.on=p(e.on||{},c.on)),c.nativeOn&&(e.nativeOn=p(e.nativeOn||{},c.nativeOn)),c.directives)e.directives||(e.directives=[]),(o=e.directives).push.apply(o,Object(s.a)(c.directives));c.scopedSlots&&(e.scopedSlots=Object.assign(e.scopedSlots||{},c.scopedSlots)),c.class&&(e.class=[e.class,c.class]),c.style&&(e.style=[e.style,c.style]),c.slot&&(e.slot=c.slot),c.key&&(e.key=c.key),c.ref&&(e.ref=c.ref)}return e}function m(e){return!e||!e.text&&e.isComment}var v=["class","staticClass","style","attrs","props","domProps","on","nativeOn","directives","scopedSlots","slot","ref","key"];function b(e){return!!e.componentOptions}function g(e){var t=e.data?v.reduce((function(t,n){return t[n]=e.data[n],t}),{}):{};return b(e)&&(t.props=e.componentOptions.propsData,t.on=e.componentOptions.listeners),t}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e.tag)return e.text;t=l({data:{},createElement:e.context.$createElement,getChildren:function(e){return e}},t);var n=b(e),s=n?e.componentOptions.children:e.children,i=n?e.componentOptions.Ctor:e.tag,r=f(g(e),t.data),a=t.getChildren(s),o=t.createElement(i,r,a);return w(e,o),o}function w(e,t){for(var n=0,s=Object.keys(e);n<s.length;n++){var i=s[n];i in t||(t[i]=e[i])}}function _(e){return e.__vue__}function k(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var s={};if(1===t.length)for(var i=function(){var e=a[r];s[e]={get:function(){return this.$store.state[e]},set:function(n){this.$store.commit(t[0][e],n)}}},r=0,a=Object.keys(t[0]);r<a.length;r++)i();else for(var o=function(){var e=c[l];s[e]={get:function(){return this.$store.state[t[0]][e]},set:function(n){this.$store.commit(t[0]+"/"+t[1][e],n)}}},l=0,c=Object.keys(t[1]);l<c.length;l++)o();return s}},G7XC:function(e,t,n){"use strict";var s=n("Ii1I");n.n(s).a},G7fi:function(e,t,n){"use strict";var s=n("S9j9");n.n(s).a},"GDc/":function(e,t,n){},GIDB:function(e,t,n){"use strict";var s=n("D7Ey");n.n(s).a},GIzl:function(e,t,n){},GKT2:function(e,t,n){},GRJB:function(e,t,n){"use strict";var s=n("5xKQ");n.n(s).a},GWWD:function(e,t,n){},GY5Y:function(e,t,n){},GYOz:function(e,t,n){},"Ga/P":function(e,t,n){"use strict";var s=n("r/0h");n.n(s).a},GaY9:function(e,t,n){},Gk3n:function(e,t,n){},GlaT:function(e,t,n){"use strict";var s=n("bMvi");n.n(s).a},Gste:function(e,t,n){"use strict";n("pNMO"),n("TeQF"),n("fbCW"),n("4mDm"),n("2B1R"),n("+2oP"),n("ToJy"),n("qePV"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("YGK4"),n("PKPk"),n("FZtP"),n("3bBZ");var s=n("kvrn"),i=n.n(s),r=n("rePB"),a=n("SS+4"),o=n("WmPt"),l=n("wSyZ"),c=n("G7T9");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var d={functional:!0,render:function(e,t){var n=t.props.column;return"check"===n.type&&n.headerCheckable?e(l.b,{attrs:{value:n.checkGet()},on:{input:n.checkSet}}):e(l.c,{attrs:{value:n.header}})}},h={functional:!0,render:function(e,t){return e(l.a,{attrs:{value:t.props.cell,column:t.props.column}})}},p=new Set(["text","number","date","boolean"]);function f(e){return p.has(e)}function m(e,t){return f(e)&&null==t}var v={props:{theme:{type:String,default:"cellBorder"},columns:{type:Array,required:!0},rows:{type:Array,required:!0},rowKey:{type:Function,default:function(e,t){return t}},rowSort:{type:Function,default:null},mapCell:{type:Function,default:function(e,t){return e[t]}},isRowSelected:{type:Function,default:function(){return!1}},selectionMode:{type:String,default:"none"},sortColumn:{type:String,default:null},sortDescending:{type:Boolean,default:!1},virtualized:{type:Boolean,default:!1},rowHeight:{type:Number,default:28},fullWidth:{type:Boolean,default:!1}},computed:{computedClass:function(){return["datatable-selection-".concat(this.selectionMode),"datatable-theme-".concat(this.theme),this.fullWidth&&"datatable-full-width"]},computedColumns:function(){return this.columns.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({header:"",type:null,sortable:!1,clickable:!1},e)}))},computedRows:function(){var e=this;return(this.sortColumn?this.rows.slice().sort(this.computedRowSort):this.rows).map((function(t){return{row:t,height:e.rowHeight}}))},computedRowSort:function(){var e=this;return this.rowSort?this.rowSort:function(t,n){return e.cellSort(e.mapCell(t,e.sortColumn),e.mapCell(n,e.sortColumn))}},cellSort:function(){var e,t=this,n=this.sortDescending?-1:1;switch(this.columns.find((function(e){return e.key===t.sortColumn})).type){case"number":e=function(e,t){return e-t};break;default:e=function(e,t){return e>t?1:e<t?-1:0}}return function(t,s){var i=(null==t?1:0)-(null==s?1:0);return 0!==i?i:e(t,s)*n}}},methods:{isColumnSortable:function(e){return f(e.type)&&e.sortable},displayCell:function(e,t){var n=this.mapCell(e,t.key);return t.display?t.display(n,e):n},headerClass:function(e){var t=[];return e.type&&(t.push("datatable-cell-".concat(e.type)),this.isColumnSortable(e)&&t.push("datatable-cell-clickable")),t},rowClass:function(e,t){if(this.isRowSelected(e,t))return"datatable-body-row-selected"},cellClass:function(e,t){return[e.type&&"datatable-cell-".concat(e.type),e.style&&"datatable-cell-".concat(e.style),e.clickable&&"datatable-cell-clickable",(n=e.type,s=t,f(n)&&"boolean"!==n&&!s&&"datatable-cell-zero"),m(e.type,t)&&"datatable-cell-null"];var n,s},onHeaderClick:function(e){this.isColumnSortable(e)&&(this.sortColumn===e.key?this.sortDescending?(this.$emit("update:sortColumn",null),this.$emit("update:sortDescending",!1)):this.$emit("update:sortDescending",!0):(this.$emit("update:sortColumn",e.key),this.$emit("update:sortDescending",!1)))},onRowClick:function(e,t){"row"===this.selectionMode&&this.$emit("row-click",{row:e,index:t})},onCellClick:function(e,t,n,s){t.clickable&&this.$emit("cell-click",{row:e,column:t,rowIndex:n,columnIndex:s})},renderHead:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=this.$createElement,s=this.computedColumns.map((function(t,s){var i=e.$scopedSlots.header?e.$scopedSlots.header({column:t,columnIndex:s}):n(d,{attrs:{column:t}}),r=e.sortColumn===t.key&&n(o.a,{staticClass:"datatable-head-cell-sort",attrs:{icon:e.sortDescending?"chevron-down":"chevron-up"}});return n("th",{staticClass:"datatable-head-cell",key:t.key,class:e.headerClass(t),attrs:{title:t.tooltip},on:{click:function(){return e.onHeaderClick(t)}}},[i,r])}));return n("thead",{slot:t},[n("tr",{staticClass:"datatable-head-row",style:{height:this.rowHeight+"px"}},[s])])},renderBody:function(){var e=this;return(0,this.$createElement)("tbody",[this.computedRows.map((function(t,n){return e.renderRow(t,n)}))])},renderRow:function(e,t){var n=this,s=this.$createElement,i=e.row,r=this.computedColumns.map((function(e,r){var a=n.$scopedSlots.cell&&n.$scopedSlots.cell({column:e,row:i,cell:n.mapCell(i,e.key),rowIndex:t,columnIndex:r});return a=c.g(a)?s(h,{attrs:{column:e,cell:n.displayCell(i,e)}}):a,s("td",{staticClass:"datatable-body-cell",key:e.key,class:n.cellClass(e,n.mapCell(i,e.key)),attrs:{title:e.tooltip},on:{click:function(){return n.onCellClick(i,e,t,r)}}},[a])}));return s("tr",{staticClass:"datatable-body-row",key:this.rowKey(i,t),class:this.rowClass(i,t),style:{height:e.height+"px"},on:{click:function(){return n.onRowClick(i,t)}}},[r])},renderNonVirtualized:function(){var e=this.$createElement;return e("div",{staticClass:"datatable",class:this.computedClass},[e("table",{staticClass:"datatable-table"},[this.renderHead(),this.renderBody()])])},renderVirtualized:function(){var e=this,t={scopedSlots:{item:function(t){var n=t.item,s=t.index;return e.renderRow(n,s)}}};return(0,this.$createElement)(a.a,i()([{staticClass:"datatable",class:this.computedClass,attrs:{containerClass:"datatable-table",containerTag:"table",contentTag:"tbody",guideTag:"tr",items:this.computedRows,headerHeight:this.rowHeight}},t]),[this.renderHead("header")])}},render:function(){return this.virtualized?this.renderVirtualized():this.renderNonVirtualized()}},b=(n("PSPw"),n("KHd+")),g=Object(b.a)(v,void 0,void 0,!1,null,null,null);t.a=g.exports},GttD:function(e,t,n){"use strict";var s=n("Io6r");n.n(s).a},GxhB:function(e,t,n){},H1kP:function(e,t,n){"use strict";var s=n("hkPe");n.n(s).a},HAPq:function(e,t,n){},HBXA:function(e,t,n){"use strict";var s=n("uPCw");n.n(s).a},HBam:function(e,t,n){"use strict";var s=n("euHd");n.n(s).a},HBqu:function(e,t,n){},HEf1:function(e,t,n){"use strict";n("pNMO"),n("ma9I"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("Rm1S"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("L2JU"),l=n("OBDa"),c=n("Vzir"),u=n("/Yj0"),d=n("hSdx");function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var p,f={components:{DialogLayout:l.a,CollectionViewSimple:c.a},inject:["challengeApi"],data:function(){return{loading:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.e)(["course"]),{type:function(){return this.$route.name.match(/^assessment/)?"assessment":"challenge"},items:function(){return[{type:"code",label:"Code",name:"code",icon:"code"},{type:"none",chrome:"jupyter",label:"Jupyter",name:"Jupyter",icon:"jupyter"},{type:"none",chrome:"rstudio",label:"RStudio",name:"RStudio",icon:"r"},{type:"postgres",label:"Database",name:"database",icon:"database"},{type:"web",label:"Web",name:"web",icon:"html"},{type:"clone",label:"Clone Existing ".concat(Object(d.titleCase)(this.type),"s"),icon:"import"}]}}),methods:{titleCase:d.titleCase,create:(p=Object(r.a)(i.a.mark((function e(t,n,s){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("clone"!==t){e.next=3;break}return this.$router.push({name:"".concat(this.type,"-clone")}),e.abrupt("return");case 3:return this.loading=!0,e.prev=4,e.next=7,this.challengeApi.createChallenge(this.course.id,{type:t,chrome:n,kind:this.type});case 7:r=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),u.b({type:"error",text:"Unable to create new ".concat(s," ").concat(this.type)}),e.abrupt("return");case 14:return e.prev=14,this.loading=!1,e.finish(14);case 17:this.$router.push({name:"".concat(this.type,"-edit"),params:{challengeId:r.id}}),u.b({type:"success",text:"Created new ".concat(s," ").concat(this.type)});case 19:case"end":return e.stop()}}),e,this,[[4,10,14,17]])}))),function(e,t,n){return p.apply(this,arguments)})}},m=n("KHd+"),v=Object(m.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogLayout",{attrs:{title:"New "+e.titleCase(e.type),disabled:e.loading}},[n("CollectionViewSimple",{attrs:{items:e.items},on:{"item-click":function(t){return e.create(t.type,t.chrome,t.name)}}})],1)}),[],!1,null,null,null);t.a=v.exports},HJLP:function(e,t,n){},HLMg:function(e,t,n){"use strict";var s=n("VITH");n.n(s).a},HQGe:function(e,t,n){"use strict";var s=n("ZKD5");n.n(s).a},HTAy:function(e,t,n){"use strict";var s=n("CaVB");n.n(s).a},HVqd:function(e,t,n){},HXYi:function(e,t,n){var s;window,s=function(){return function(e){var t={};function n(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(s,i,function(t){return e[t]}.bind(null,i));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=166)}([function(e,t,n){"use strict";t.__esModule=!0;var s,i=n(164),r=(s=i)&&s.__esModule?s:{default:s};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),(0,r.default)(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}()},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var s=a(n(137)),i=a(n(133)),r=a(n(61));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,r.default)(t)));e.prototype=(0,i.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(s.default?(0,s.default)(e,t):e.__proto__=t)}},function(e,t,n){"use strict";t.__esModule=!0;var s,i=n(61),r=(s=i)&&s.__esModule?s:{default:s};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,r.default)(t))&&"function"!=typeof t?e:t}},function(e,t){var n=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,i=n(130),r=(s=i)&&s.__esModule?s:{default:s};t.default=r.default},function(e,t,n){var s=n(36)("wks"),i=n(24),r=n(10).Symbol,a="function"==typeof r;(e.exports=function(e){return s[e]||(s[e]=a&&r[e]||(a?r:i)("Symbol."+e))}).store=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,i=n(126),r=(s=i)&&s.__esModule?s:{default:s};t.default=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(107);Object.defineProperty(t,"closest",{enumerable:!0,get:function(){return r(s).default}});var i=n(105);function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"requestNextAnimationFrame",{enumerable:!0,get:function(){return r(i).default}})},function(e,t,n){var s=n(17),i=n(63),r=n(43),a=Object.defineProperty;t.f=n(13)?Object.defineProperty:function(e,t,n){if(s(e),t=r(t,!0),s(n),i)try{return a(e,t,n)}catch(o){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var s=n(155),i=n(41);e.exports=function(e){return s(i(e))}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){e.exports=!n(23)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){var s=n(10),i=n(4),r=n(44),a=n(18),o=n(12),l=function(e,t,n){var c,u,d,h=e&l.F,p=e&l.G,f=e&l.S,m=e&l.P,v=e&l.B,b=e&l.W,g=p?i:i[t]||(i[t]={}),y=g.prototype,w=p?s:f?s[t]:(s[t]||{}).prototype;for(c in p&&(n=t),n)(u=!h&&w&&void 0!==w[c])&&o(g,c)||(d=u?w[c]:n[c],g[c]=p&&"function"!=typeof w[c]?n[c]:v&&u?r(d,s):b&&w[c]==d?function(e){var t=function(t,n,s){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,s)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):m&&"function"==typeof d?r(Function.call,d):d,m&&((g.virtual||(g.virtual={}))[c]=d,e&l.R&&y&&!y[c]&&a(y,c,d)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t,n){"use strict";t.__esModule=!0;var s,i=n(123),r=(s=i)&&s.__esModule?s:{default:s};t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,r.default)(e)}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var s=n(16);e.exports=function(e){if(!s(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){var s=n(9),i=n(22);e.exports=n(13)?function(e,t,n){return s.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(100);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,i=n(103),r=(s=i)&&s.__esModule?s:{default:s};t.default=r.default},function(e,t){e.exports={}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t){var n=0,s=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+s).toString(36))}},function(e,t){e.exports=!0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(64);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})}));var i=n(52);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})}));var r=n(51);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}));var a=n(28);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})}));var o,l=n(93),c=(o=l)&&o.__esModule?o:{default:o};t.default=c.default},function(e,t,n){"use strict";t.__esModule=!0;var s=r(n(87)),i=r(n(84));function r(e){return e&&e.__esModule?e:{default:e}}t.default=function e(t,n,r){null===t&&(t=Function.prototype);var a=(0,i.default)(t,n);if(void 0===a){var o=(0,s.default)(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var l=a.get;return void 0!==l?l.call(r):void 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(20);Object.defineProperty(t,"Sensor",{enumerable:!0,get:function(){return c(s).default}});var i=n(102);Object.defineProperty(t,"MouseSensor",{enumerable:!0,get:function(){return c(i).default}});var r=n(99);Object.defineProperty(t,"TouchSensor",{enumerable:!0,get:function(){return c(r).default}});var a=n(97);Object.defineProperty(t,"DragSensor",{enumerable:!0,get:function(){return c(a).default}});var o=n(95);Object.defineProperty(t,"ForceTouchSensor",{enumerable:!0,get:function(){return c(o).default}});var l=n(19);function c(e){return e&&e.__esModule?e:{default:e}}Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}})}))},function(e,t,n){var s=n(30),i=n(22),r=n(11),a=n(43),o=n(12),l=n(63),c=Object.getOwnPropertyDescriptor;t.f=n(13)?c:function(e,t){if(e=r(e),t=a(t,!0),l)try{return c(e,t)}catch(n){}if(o(e,t))return i(!s.f.call(e,t),e[t])}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var s=n(10),i=n(4),r=n(25),a=n(32),o=n(9).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=r?{}:s.Symbol||{});"_"==e.charAt(0)||e in t||o(t,e,{value:a.f(e)})}},function(e,t,n){t.f=n(6)},function(e,t,n){var s=n(41);e.exports=function(e){return Object(s(e))}},function(e,t,n){var s=n(9).f,i=n(12),r=n(6)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,r)&&s(e,r,{configurable:!0,value:t})}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var s=n(4),i=n(10),r=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:s.version,mode:n(25)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var s=n(36)("keys"),i=n(24);e.exports=function(e){return s[e]||(s[e]=i(e))}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var s=n(57),i=n(35);e.exports=Object.keys||function(e){return s(e,i)}},function(e,t,n){var s=n(17),i=n(156),r=n(35),a=n(37)("IE_PROTO"),o=function(){},l=function(){var e,t=n(62)("iframe"),s=r.length;for(t.style.display="none",n(152).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;s--;)delete l.prototype[r[s]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(o.prototype=s(e),n=new o,o.prototype=null,n[a]=e):n=l(),void 0===t?n:i(n,t)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=Math.ceil,s=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?s:n)(e)}},function(e,t,n){var s=n(16);e.exports=function(e,t){if(!s(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!s(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!s(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!s(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var s=n(161);e.exports=function(e,t,n){if(s(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,s){return e.call(t,n,s)};case 3:return function(n,s,i){return e.call(t,n,s,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(68);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(73);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(77);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(80);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})}))},function(e,t,n){var s=n(14),i=n(4),r=n(23);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),s(s.S+s.F*r((function(){n(1)})),"Object",a)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(89);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(128);Object.defineProperty(t,"Announcement",{enumerable:!0,get:function(){return o(s).default}}),Object.defineProperty(t,"defaultAnnouncementOptions",{enumerable:!0,get:function(){return s.defaultOptions}});var i=n(125);Object.defineProperty(t,"Focusable",{enumerable:!0,get:function(){return o(i).default}});var r=n(114);Object.defineProperty(t,"Mirror",{enumerable:!0,get:function(){return o(r).default}}),Object.defineProperty(t,"defaultMirrorOptions",{enumerable:!0,get:function(){return r.defaultOptions}});var a=n(109);function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"Scrollable",{enumerable:!0,get:function(){return o(a).default}}),Object.defineProperty(t,"defaultScrollableOptions",{enumerable:!0,get:function(){return a.defaultOptions}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(129);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})}))},function(e,t,n){var s=n(57),i=n(35).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return s(e,i)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var s=n(12),i=n(33),r=n(37)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),s(e,r)?e[r]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var s=n(42),i=Math.min;e.exports=function(e){return e>0?i(s(e),9007199254740991):0}},function(e,t,n){var s=n(12),i=n(11),r=n(154)(!1),a=n(37)("IE_PROTO");e.exports=function(e,t){var n,o=i(e),l=0,c=[];for(n in o)n!=a&&s(o,n)&&c.push(n);for(;t.length>l;)s(o,n=t[l++])&&(~r(c,n)||c.push(n));return c}},function(e,t,n){e.exports=n(18)},function(e,t,n){"use strict";var s=n(25),i=n(14),r=n(58),a=n(18),o=n(21),l=n(157),c=n(34),u=n(55),d=n(6)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,f,m,v,b){l(n,t,f);var g,y,w,_=function(e){if(!h&&e in j)return j[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},k=t+" Iterator",C="values"==m,x=!1,j=e.prototype,O=j[d]||j["@@iterator"]||m&&j[m],S=O||_(m),E=m?C?_("entries"):S:void 0,T="Array"==t&&j.entries||O;if(T&&(w=u(T.call(new e)))!==Object.prototype&&w.next&&(c(w,k,!0),s||"function"==typeof w[d]||a(w,d,p)),C&&O&&"values"!==O.name&&(x=!0,S=function(){return O.call(this)}),s&&!b||!h&&!x&&j[d]||a(j,d,S),o[t]=S,o[k]=p,m)if(g={values:C?S:_("values"),keys:v?S:_("keys"),entries:E},b)for(y in g)y in j||r(j,y,g[y]);else i(i.P+i.F*(h||x),t,g);return g}},function(e,t,n){"use strict";var s=n(158)(!0);n(59)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=s(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){"use strict";t.__esModule=!0;var s=a(n(160)),i=a(n(147)),r="function"==typeof i.default&&"symbol"==typeof s.default?function(e){return typeof e}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function a(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof i.default&&"symbol"===r(s.default)?function(e){return void 0===e?"undefined":r(e)}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":void 0===e?"undefined":r(e)}},function(e,t,n){var s=n(16),i=n(10).document,r=s(i)&&s(i.createElement);e.exports=function(e){return r?i.createElement(e):{}}},function(e,t,n){e.exports=!n(13)&&!n(23)((function(){return 7!=Object.defineProperty(n(62)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(165);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultOptions=void 0;var s=l(n(1)),i=l(n(0)),r=l(n(3)),a=l(n(2)),o=l(n(7));function l(e){return e&&e.__esModule?e:{default:e}}var c=Symbol("onSortableSorted"),u=t.defaultOptions={duration:150,easingFunction:"ease-in-out",horizontal:!1},d=function(e){function t(e){(0,s.default)(this,t);var n=(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.options=Object.assign({},u,n.getOptions()),n.lastAnimationFrame=null,n[c]=n[c].bind(n),n}return(0,a.default)(t,e),(0,i.default)(t,[{key:"attach",value:function(){this.draggable.on("sortable:sorted",this[c])}},{key:"detach",value:function(){this.draggable.off("sortable:sorted",this[c])}},{key:"getOptions",value:function(){return this.draggable.options.swapAnimation||{}}},{key:c,value:function(e){var t=this,n=e.oldIndex,s=e.newIndex,i=e.dragEvent,r=i.source,a=i.over;cancelAnimationFrame(this.lastAnimationFrame),this.lastAnimationFrame=requestAnimationFrame((function(){n>=s?h(r,a,t.options):h(a,r,t.options)}))}}]),t}(o.default);function h(e,t,n){for(var s=n.duration,i=n.easingFunction,r=n.horizontal,a=[e,t],o=0;o<a.length;o++)a[o].style.pointerEvents="none";if(r){var l=e.offsetWidth;e.style.transform="translate3d("+l+"px, 0, 0)",t.style.transform="translate3d(-"+l+"px, 0, 0)"}else{var c=e.offsetHeight;e.style.transform="translate3d(0, "+c+"px, 0)",t.style.transform="translate3d(0, -"+c+"px, 0)"}requestAnimationFrame((function(){for(var n=[e,t],r=0;r<n.length;r++){var a=n[r];a.addEventListener("transitionend",p),a.style.transition="transform "+s+"ms "+i,a.style.transform=""}}))}function p(e){e.target.style.transition="",e.target.style.pointerEvents="",e.target.removeEventListener("transitionend",p)}t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultOptions=void 0;var s,i=n(65),r=(s=i)&&s.__esModule?s:{default:s};t.default=r.default,t.defaultOptions=i.defaultOptions},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=c(n(1)),i=c(n(0)),r=c(n(3)),a=c(n(2)),o=c(n(7)),l=n(45);function c(e){return e&&e.__esModule?e:{default:e}}var u=Symbol("onDragStart"),d=Symbol("onDragStop"),h=Symbol("onDragOver"),p=Symbol("onDragOut"),f=Symbol("onMirrorCreated"),m=Symbol("onMirrorDestroy"),v=function(e){function t(e){(0,s.default)(this,t);var n=(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.firstSource=null,n.mirror=null,n[u]=n[u].bind(n),n[d]=n[d].bind(n),n[h]=n[h].bind(n),n[p]=n[p].bind(n),n[f]=n[f].bind(n),n[m]=n[m].bind(n),n}return(0,a.default)(t,e),(0,i.default)(t,[{key:"attach",value:function(){this.draggable.on("drag:start",this[u]).on("drag:stop",this[d]).on("drag:over",this[h]).on("drag:out",this[p]).on("droppable:over",this[h]).on("droppable:out",this[p]).on("mirror:created",this[f]).on("mirror:destroy",this[m])}},{key:"detach",value:function(){this.draggable.off("drag:start",this[u]).off("drag:stop",this[d]).off("drag:over",this[h]).off("drag:out",this[p]).off("droppable:over",this[h]).off("droppable:out",this[p]).off("mirror:created",this[f]).off("mirror:destroy",this[m])}},{key:u,value:function(e){e.canceled()||(this.firstSource=e.source)}},{key:d,value:function(){this.firstSource=null}},{key:h,value:function(e){var t=this;if(!e.canceled()){var n=e.source||e.dragEvent.source;if(n!==this.firstSource){var s=new l.SnapInEvent({dragEvent:e,snappable:e.over||e.droppable});this.draggable.trigger(s),s.canceled()||(this.mirror&&(this.mirror.style.display="none"),n.classList.remove(this.draggable.getClassNameFor("source:dragging")),n.classList.add(this.draggable.getClassNameFor("source:placed")),setTimeout((function(){n.classList.remove(t.draggable.getClassNameFor("source:placed"))}),this.draggable.options.placedTimeout))}else this.firstSource=null}}},{key:p,value:function(e){if(!e.canceled()){var t=e.source||e.dragEvent.source,n=new l.SnapOutEvent({dragEvent:e,snappable:e.over||e.droppable});this.draggable.trigger(n),n.canceled()||(this.mirror&&(this.mirror.style.display=""),t.classList.add(this.draggable.getClassNameFor("source:dragging")))}}},{key:f,value:function(e){var t=e.mirror;this.mirror=t}},{key:m,value:function(){this.mirror=null}}]),t}(o.default);t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SnapOutEvent=t.SnapInEvent=t.SnapEvent=void 0;var s=l(n(1)),i=l(n(0)),r=l(n(3)),a=l(n(2)),o=l(n(5));function l(e){return e&&e.__esModule?e:{default:e}}var c=t.SnapEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"dragEvent",get:function(){return this.data.dragEvent}},{key:"snappable",get:function(){return this.data.snappable}}]),t}(o.default);c.type="snap";var u=t.SnapInEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(c);u.type="snap:in",u.cancelable=!0;var d=t.SnapOutEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(c);d.type="snap:out",d.cancelable=!0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(45);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})}));var i,r=n(67),a=(i=r)&&i.__esModule?i:{default:i};t.default=a.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultOptions=void 0;var s=c(n(1)),i=c(n(0)),r=c(n(3)),a=c(n(2)),o=c(n(7)),l=n(8);function c(e){return e&&e.__esModule?e:{default:e}}var u=Symbol("onMirrorCreated"),d=Symbol("onMirrorDestroy"),h=Symbol("onDragOver"),p=Symbol("resize"),f=t.defaultOptions={},m=function(e){function t(e){(0,s.default)(this,t);var n=(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.options=Object.assign({},f,n.getOptions()),n.lastWidth=0,n.lastHeight=0,n.mirror=null,n[u]=n[u].bind(n),n[d]=n[d].bind(n),n[h]=n[h].bind(n),n}return(0,a.default)(t,e),(0,i.default)(t,[{key:"attach",value:function(){this.draggable.on("mirror:created",this[u]).on("drag:over",this[h]).on("drag:over:container",this[h])}},{key:"detach",value:function(){this.draggable.off("mirror:created",this[u]).off("mirror:destroy",this[d]).off("drag:over",this[h]).off("drag:over:container",this[h])}},{key:"getOptions",value:function(){return this.draggable.options.resizeMirror||{}}},{key:u,value:function(e){var t=e.mirror;this.mirror=t}},{key:d,value:function(){this.mirror=null}},{key:h,value:function(e){this[p](e)}},{key:p,value:function(e){var t=this,n=e.overContainer,s=e.over;requestAnimationFrame((function(){t.mirror.parentNode!==n&&n.appendChild(t.mirror);var e=s||t.draggable.getDraggableElementsForContainer(n)[0];e&&(0,l.requestNextAnimationFrame)((function(){var n=e.getBoundingClientRect();t.lastHeight===n.height&&t.lastWidth===n.width||(t.mirror.style.width=n.width+"px",t.mirror.style.height=n.height+"px",t.lastWidth=n.width,t.lastHeight=n.height)}))}))}}]),t}(o.default);t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultOptions=void 0;var s,i=n(70),r=(s=i)&&s.__esModule?s:{default:s};t.default=r.default,t.defaultOptions=i.defaultOptions},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=u(n(1)),i=u(n(0)),r=u(n(3)),a=u(n(2)),o=u(n(7)),l=n(8),c=n(46);function u(e){return e&&e.__esModule?e:{default:e}}var d=Symbol("onDragMove"),h=Symbol("onDragStop"),p=Symbol("onRequestAnimationFrame"),f=function(e){function t(e){(0,s.default)(this,t);var n=(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.currentlyCollidingElement=null,n.lastCollidingElement=null,n.currentAnimationFrame=null,n[d]=n[d].bind(n),n[h]=n[h].bind(n),n[p]=n[p].bind(n),n}return(0,a.default)(t,e),(0,i.default)(t,[{key:"attach",value:function(){this.draggable.on("drag:move",this[d]).on("drag:stop",this[h])}},{key:"detach",value:function(){this.draggable.off("drag:move",this[d]).off("drag:stop",this[h])}},{key:"getCollidables",value:function(){var e=this.draggable.options.collidables;return"string"==typeof e?Array.prototype.slice.call(document.querySelectorAll(e)):e instanceof NodeList||e instanceof Array?Array.prototype.slice.call(e):e instanceof HTMLElement?[e]:"function"==typeof e?e():[]}},{key:d,value:function(e){var t=e.sensorEvent.target;this.currentAnimationFrame=requestAnimationFrame(this[p](t)),this.currentlyCollidingElement&&e.cancel();var n=new c.CollidableInEvent({dragEvent:e,collidingElement:this.currentlyCollidingElement}),s=new c.CollidableOutEvent({dragEvent:e,collidingElement:this.lastCollidingElement}),i=Boolean(this.currentlyCollidingElement&&this.lastCollidingElement!==this.currentlyCollidingElement),r=Boolean(!this.currentlyCollidingElement&&this.lastCollidingElement);i?(this.lastCollidingElement&&this.draggable.trigger(s),this.draggable.trigger(n)):r&&this.draggable.trigger(s),this.lastCollidingElement=this.currentlyCollidingElement}},{key:h,value:function(e){var t=this.currentlyCollidingElement||this.lastCollidingElement,n=new c.CollidableOutEvent({dragEvent:e,collidingElement:t});t&&this.draggable.trigger(n),this.lastCollidingElement=null,this.currentlyCollidingElement=null}},{key:p,value:function(e){var t=this;return function(){var n=t.getCollidables();t.currentlyCollidingElement=(0,l.closest)(e,(function(e){return n.includes(e)}))}}}]),t}(o.default);t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollidableOutEvent=t.CollidableInEvent=t.CollidableEvent=void 0;var s=l(n(1)),i=l(n(0)),r=l(n(3)),a=l(n(2)),o=l(n(5));function l(e){return e&&e.__esModule?e:{default:e}}var c=t.CollidableEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"dragEvent",get:function(){return this.data.dragEvent}}]),t}(o.default);c.type="collidable",(t.CollidableInEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"collidingElement",get:function(){return this.data.collidingElement}}]),t}(c)).type="collidable:in",(t.CollidableOutEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"collidingElement",get:function(){return this.data.collidingElement}}]),t}(c)).type="collidable:out"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(46);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})}));var i,r=n(72),a=(i=r)&&i.__esModule?i:{default:i};t.default=a.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(74);Object.defineProperty(t,"Collidable",{enumerable:!0,get:function(){return o(s).default}});var i=n(71);Object.defineProperty(t,"ResizeMirror",{enumerable:!0,get:function(){return o(i).default}}),Object.defineProperty(t,"defaultResizeMirrorOptions",{enumerable:!0,get:function(){return i.defaultOptions}});var r=n(69);Object.defineProperty(t,"Snappable",{enumerable:!0,get:function(){return o(r).default}});var a=n(66);function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"SwapAnimation",{enumerable:!0,get:function(){return o(a).default}}),Object.defineProperty(t,"defaultSwapAnimationOptions",{enumerable:!0,get:function(){return a.defaultOptions}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=u(n(1)),i=u(n(0)),r=u(n(3)),a=u(n(27)),o=u(n(2)),l=u(n(26)),c=n(47);function u(e){return e&&e.__esModule?e:{default:e}}var d=Symbol("onDragStart"),h=Symbol("onDragOverContainer"),p=Symbol("onDragOver"),f=Symbol("onDragStop"),m={"sortable:sorted":function(e){var t=e.dragEvent,n=t.source.textContent.trim()||t.source.id||"sortable element";if(t.over){var s=t.over.textContent.trim()||t.over.id||"sortable element";return t.source.compareDocumentPosition(t.over)&Node.DOCUMENT_POSITION_FOLLOWING?"Placed "+n+" after "+s:"Placed "+n+" before "+s}return"Placed "+n+" into a different container"}},v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.default)(this,t);var i=(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,Object.assign({},n,{announcements:Object.assign({},m,n.announcements||{})})));return i.startIndex=null,i.startContainer=null,i[d]=i[d].bind(i),i[h]=i[h].bind(i),i[p]=i[p].bind(i),i[f]=i[f].bind(i),i.on("drag:start",i[d]).on("drag:over:container",i[h]).on("drag:over",i[p]).on("drag:stop",i[f]),i}return(0,o.default)(t,e),(0,i.default)(t,[{key:"destroy",value:function(){(0,a.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.off("drag:start",this[d]).off("drag:over:container",this[h]).off("drag:over",this[p]).off("drag:stop",this[f])}},{key:"index",value:function(e){return this.getDraggableElementsForContainer(e.parentNode).indexOf(e)}},{key:d,value:function(e){this.startContainer=e.source.parentNode,this.startIndex=this.index(e.source);var t=new c.SortableStartEvent({dragEvent:e,startIndex:this.startIndex,startContainer:this.startContainer});this.trigger(t),t.canceled()&&e.cancel()}},{key:h,value:function(e){if(!e.canceled()){var t=e.source,n=e.over,s=e.overContainer,i=this.index(t),r=new c.SortableSortEvent({dragEvent:e,currentIndex:i,source:t,over:n});if(this.trigger(r),!r.canceled()){var a=g({source:t,over:n,overContainer:s,children:this.getDraggableElementsForContainer(s)});if(a){var o=a.oldContainer,l=a.newContainer,u=this.index(e.source),d=new c.SortableSortedEvent({dragEvent:e,oldIndex:i,newIndex:u,oldContainer:o,newContainer:l});this.trigger(d)}}}}},{key:p,value:function(e){if(e.over!==e.originalSource&&e.over!==e.source){var t=e.source,n=e.over,s=e.overContainer,i=this.index(t),r=new c.SortableSortEvent({dragEvent:e,currentIndex:i,source:t,over:n});if(this.trigger(r),!r.canceled()){var a=g({source:t,over:n,overContainer:s,children:this.getDraggableElementsForContainer(s)});if(a){var o=a.oldContainer,l=a.newContainer,u=this.index(t),d=new c.SortableSortedEvent({dragEvent:e,oldIndex:i,newIndex:u,oldContainer:o,newContainer:l});this.trigger(d)}}}}},{key:f,value:function(e){var t=new c.SortableStopEvent({dragEvent:e,oldIndex:this.startIndex,newIndex:this.index(e.source),oldContainer:this.startContainer,newContainer:e.source.parentNode});this.trigger(t),this.startIndex=null,this.startContainer=null}}]),t}(l.default);function b(e){return Array.prototype.indexOf.call(e.parentNode.children,e)}function g(e){var t=e.source,n=e.over,s=e.overContainer,i=!e.children.length,r=t.parentNode!==s,a=n&&!r;return i?function(e,t){var n=e.parentNode;return t.appendChild(e),{oldContainer:n,newContainer:t}}(t,s):a?function(e,t){var n=b(e),s=b(t);return n<s?e.parentNode.insertBefore(e,t.nextElementSibling):e.parentNode.insertBefore(e,t),{oldContainer:e.parentNode,newContainer:e.parentNode}}(t,n):r?function(e,t,n){var s=e.parentNode;return t?t.parentNode.insertBefore(e,t):n.appendChild(e),{oldContainer:s,newContainer:e.parentNode}}(t,n,s):null}t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SortableStopEvent=t.SortableSortedEvent=t.SortableSortEvent=t.SortableStartEvent=t.SortableEvent=void 0;var s=l(n(1)),i=l(n(0)),r=l(n(3)),a=l(n(2)),o=l(n(5));function l(e){return e&&e.__esModule?e:{default:e}}var c=t.SortableEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"dragEvent",get:function(){return this.data.dragEvent}}]),t}(o.default);c.type="sortable";var u=t.SortableStartEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"startIndex",get:function(){return this.data.startIndex}},{key:"startContainer",get:function(){return this.data.startContainer}}]),t}(c);u.type="sortable:start",u.cancelable=!0;var d=t.SortableSortEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"currentIndex",get:function(){return this.data.currentIndex}},{key:"over",get:function(){return this.data.oldIndex}},{key:"overContainer",get:function(){return this.data.newIndex}}]),t}(c);d.type="sortable:sort",d.cancelable=!0,(t.SortableSortedEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"oldIndex",get:function(){return this.data.oldIndex}},{key:"newIndex",get:function(){return this.data.newIndex}},{key:"oldContainer",get:function(){return this.data.oldContainer}},{key:"newContainer",get:function(){return this.data.newContainer}}]),t}(c)).type="sortable:sorted",(t.SortableStopEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"oldIndex",get:function(){return this.data.oldIndex}},{key:"newIndex",get:function(){return this.data.newIndex}},{key:"oldContainer",get:function(){return this.data.oldContainer}},{key:"newContainer",get:function(){return this.data.newContainer}}]),t}(c)).type="sortable:stop"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(47);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})}));var i,r=n(76),a=(i=r)&&i.__esModule?i:{default:i};t.default=a.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=u(n(1)),i=u(n(0)),r=u(n(3)),a=u(n(27)),o=u(n(2)),l=u(n(26)),c=n(48);function u(e){return e&&e.__esModule?e:{default:e}}var d=Symbol("onDragStart"),h=Symbol("onDragOver"),p=Symbol("onDragStop"),f={"swappabled:swapped":function(e){var t=e.dragEvent,n=e.swappedElement;return"Swapped "+(t.source.textContent.trim()||t.source.id||"swappable element")+" with "+(n.textContent.trim()||n.id||"swappable element")}},m=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.default)(this,t);var i=(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,Object.assign({},n,{announcements:Object.assign({},f,n.announcements||{})})));return i.lastOver=null,i[d]=i[d].bind(i),i[h]=i[h].bind(i),i[p]=i[p].bind(i),i.on("drag:start",i[d]).on("drag:over",i[h]).on("drag:stop",i[p]),i}return(0,o.default)(t,e),(0,i.default)(t,[{key:"destroy",value:function(){(0,a.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.off("drag:start",this._onDragStart).off("drag:over",this._onDragOver).off("drag:stop",this._onDragStop)}},{key:d,value:function(e){var t=new c.SwappableStartEvent({dragEvent:e});this.trigger(t),t.canceled()&&e.cancel()}},{key:h,value:function(e){if(e.over!==e.originalSource&&e.over!==e.source&&!e.canceled()){var t=new c.SwappableSwapEvent({dragEvent:e,over:e.over,overContainer:e.overContainer});if(this.trigger(t),!t.canceled()){this.lastOver&&this.lastOver!==e.over&&v(this.lastOver,e.source),this.lastOver===e.over?this.lastOver=null:this.lastOver=e.over,v(e.source,e.over);var n=new c.SwappableSwappedEvent({dragEvent:e,swappedElement:e.over});this.trigger(n)}}}},{key:p,value:function(e){var t=new c.SwappableStopEvent({dragEvent:e});this.trigger(t),this.lastOver=null}}]),t}(l.default);function v(e,t){var n=t.parentNode,s=e.parentNode;!function(e){var t=document.createElement("div");e(t),t.parentNode.removeChild(t)}((function(i){s.insertBefore(i,e),n.insertBefore(e,t),s.insertBefore(t,i)}))}t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SwappableStopEvent=t.SwappableSwappedEvent=t.SwappableSwapEvent=t.SwappableStartEvent=t.SwappableEvent=void 0;var s=l(n(1)),i=l(n(0)),r=l(n(3)),a=l(n(2)),o=l(n(5));function l(e){return e&&e.__esModule?e:{default:e}}var c=t.SwappableEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"dragEvent",get:function(){return this.data.dragEvent}}]),t}(o.default);c.type="swappable";var u=t.SwappableStartEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(c);u.type="swappable:start",u.cancelable=!0;var d=t.SwappableSwapEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"over",get:function(){return this.data.over}},{key:"overContainer",get:function(){return this.data.overContainer}}]),t}(c);d.type="swappable:swap",d.cancelable=!0,(t.SwappableSwappedEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"swappedElement",get:function(){return this.data.swappedElement}}]),t}(c)).type="swappable:swapped",(t.SwappableStopEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(c)).type="swappable:stop"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(48);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})}));var i,r=n(79),a=(i=r)&&i.__esModule?i:{default:i};t.default=a.default},function(e,t,n){var s=n(11),i=n(29).f;n(49)("getOwnPropertyDescriptor",(function(){return function(e,t){return i(s(e),t)}}))},function(e,t,n){n(82);var s=n(4).Object;e.exports=function(e,t){return s.getOwnPropertyDescriptor(e,t)}},function(e,t,n){e.exports={default:n(83),__esModule:!0}},function(e,t,n){var s=n(33),i=n(55);n(49)("getPrototypeOf",(function(){return function(e){return i(s(e))}}))},function(e,t,n){n(85),e.exports=n(4).Object.getPrototypeOf},function(e,t,n){e.exports={default:n(86),__esModule:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=h(n(15)),i=h(n(1)),r=h(n(0)),a=h(n(3)),o=h(n(27)),l=h(n(2)),c=n(8),u=h(n(26)),d=n(50);function h(e){return e&&e.__esModule?e:{default:e}}var p=Symbol("onDragStart"),f=Symbol("onDragMove"),m=Symbol("onDragStop"),v=Symbol("dropInDropZone"),b=Symbol("returnToOriginalDropzone"),g=Symbol("closestDropzone"),y=Symbol("getDropzones"),w={"droppable:dropped":function(e){var t=e.dragEvent,n=e.dropzone;return"Dropped "+(t.source.textContent.trim()||t.source.id||"draggable element")+" into "+(n.textContent.trim()||n.id||"droppable element")},"droppable:returned":function(e){var t=e.dragEvent,n=e.dropzone;return"Returned "+(t.source.textContent.trim()||t.source.id||"draggable element")+" from "+(n.textContent.trim()||n.id||"droppable element")}},_={"droppable:active":"draggable-dropzone--active","droppable:occupied":"draggable-dropzone--occupied"},k={dropzone:".draggable-droppable"},C=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.default)(this,t);var s=(0,a.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,Object.assign({},k,n,{classes:Object.assign({},_,n.classes||{}),announcements:Object.assign({},w,n.announcements||{})})));return s.dropzones=null,s.lastDropzone=null,s.initialDropzone=null,s[p]=s[p].bind(s),s[f]=s[f].bind(s),s[m]=s[m].bind(s),s.on("drag:start",s[p]).on("drag:move",s[f]).on("drag:stop",s[m]),s}return(0,l.default)(t,e),(0,r.default)(t,[{key:"destroy",value:function(){(0,o.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.off("drag:start",this[p]).off("drag:move",this[f]).off("drag:stop",this[m])}},{key:p,value:function(e){if(!e.canceled()){this.dropzones=[].concat((0,s.default)(this[y]()));var t=(0,c.closest)(e.sensorEvent.target,this.options.dropzone);if(t){var n=new d.DroppableStartEvent({dragEvent:e,dropzone:t});if(this.trigger(n),n.canceled())e.cancel();else{this.initialDropzone=t;var i=!0,r=!1,a=void 0;try{for(var o,l=this.dropzones[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var u=o.value;u.classList.contains(this.getClassNameFor("droppable:occupied"))||u.classList.add(this.getClassNameFor("droppable:active"))}}catch(h){r=!0,a=h}finally{try{!i&&l.return&&l.return()}finally{if(r)throw a}}}}else e.cancel()}}},{key:f,value:function(e){if(!e.canceled()){var t=this[g](e.sensorEvent.target);t&&!t.classList.contains(this.getClassNameFor("droppable:occupied"))&&this[v](e,t)?this.lastDropzone=t:t&&t!==this.initialDropzone||!this.lastDropzone||(this[b](e),this.lastDropzone=null)}}},{key:m,value:function(e){var t=new d.DroppableStopEvent({dragEvent:e,dropzone:this.lastDropzone||this.initialDropzone});this.trigger(t);var n=this.getClassNameFor("droppable:occupied"),s=!0,i=!1,r=void 0;try{for(var a,o=this.dropzones[Symbol.iterator]();!(s=(a=o.next()).done);s=!0)a.value.classList.remove(this.getClassNameFor("droppable:active"))}catch(l){i=!0,r=l}finally{try{!s&&o.return&&o.return()}finally{if(i)throw r}}this.lastDropzone&&this.lastDropzone!==this.initialDropzone&&this.initialDropzone.classList.remove(n),this.dropzones=null,this.lastDropzone=null,this.initialDropzone=null}},{key:v,value:function(e,t){var n=new d.DroppableDroppedEvent({dragEvent:e,dropzone:t});if(this.trigger(n),n.canceled())return!1;var s=this.getClassNameFor("droppable:occupied");return this.lastDropzone&&this.lastDropzone.classList.remove(s),t.appendChild(e.source),t.classList.add(s),!0}},{key:b,value:function(e){var t=new d.DroppableReturnedEvent({dragEvent:e,dropzone:this.lastDropzone});this.trigger(t),t.canceled()||(this.initialDropzone.appendChild(e.source),this.lastDropzone.classList.remove(this.getClassNameFor("droppable:occupied")))}},{key:g,value:function(e){return this.dropzones?(0,c.closest)(e,this.dropzones):null}},{key:y,value:function(){var e=this.options.dropzone;return"string"==typeof e?document.querySelectorAll(e):e instanceof NodeList||e instanceof Array?e:"function"==typeof e?e():[]}}]),t}(u.default);t.default=C},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DroppableStopEvent=t.DroppableReturnedEvent=t.DroppableDroppedEvent=t.DroppableStartEvent=t.DroppableEvent=void 0;var s=l(n(1)),i=l(n(0)),r=l(n(3)),a=l(n(2)),o=l(n(5));function l(e){return e&&e.__esModule?e:{default:e}}var c=t.DroppableEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"dragEvent",get:function(){return this.data.dragEvent}}]),t}(o.default);c.type="droppable";var u=t.DroppableStartEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"dropzone",get:function(){return this.data.dropzone}}]),t}(c);u.type="droppable:start",u.cancelable=!0;var d=t.DroppableDroppedEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"dropzone",get:function(){return this.data.dropzone}}]),t}(c);d.type="droppable:dropped",d.cancelable=!0;var h=t.DroppableReturnedEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"dropzone",get:function(){return this.data.dropzone}}]),t}(c);h.type="droppable:returned",h.cancelable=!0;var p=t.DroppableStopEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"dropzone",get:function(){return this.data.dropzone}}]),t}(c);p.type="droppable:stop",p.cancelable=!0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(50);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})}));var i,r=n(88),a=(i=r)&&i.__esModule?i:{default:i};t.default=a.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(n(15)),i=a(n(1)),r=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(){function e(){(0,i.default)(this,e),this.callbacks={}}return(0,r.default)(e,[{key:"on",value:function(e){var t;this.callbacks[e]||(this.callbacks[e]=[]);for(var n=arguments.length,s=Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return(t=this.callbacks[e]).push.apply(t,s),this}},{key:"off",value:function(e,t){if(!this.callbacks[e])return null;for(var n=this.callbacks[e].slice(0),s=0;s<n.length;s++)t===n[s]&&this.callbacks[e].splice(s,1);return this}},{key:"trigger",value:function(e){if(!this.callbacks[e.type])return null;for(var t=[].concat((0,s.default)(this.callbacks[e.type])),n=[],i=t.length-1;i>=0;i--){var r=t[i];try{r(e)}catch(a){n.push(a)}}return n.length&&console.error("Draggable caught errors while triggering '"+e.type+"'",n),this}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,i=n(91),r=(s=i)&&s.__esModule?s:{default:s};t.default=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultOptions=void 0;var s=h(n(15)),i=h(n(1)),r=h(n(0)),a=n(8),o=n(51),l=h(n(92)),c=n(28),u=n(52),d=n(64);function h(e){return e&&e.__esModule?e:{default:e}}var p=Symbol("onDragStart"),f=Symbol("onDragMove"),m=Symbol("onDragStop"),v=Symbol("onDragPressure"),b={"drag:start":function(e){return"Picked up "+(e.source.textContent.trim()||e.source.id||"draggable element")},"drag:stop":function(e){return"Released "+(e.source.textContent.trim()||e.source.id||"draggable element")}},g={"container:dragging":"draggable-container--is-dragging","source:dragging":"draggable-source--is-dragging","source:placed":"draggable-source--placed","container:placed":"draggable-container--placed","body:dragging":"draggable--is-dragging","draggable:over":"draggable--over","container:over":"draggable-container--over","source:original":"draggable--original",mirror:"draggable-mirror"},y=t.defaultOptions={draggable:".draggable-source",handle:null,delay:100,placedTimeout:800,plugins:[],sensors:[]},w=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[document.body],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,i.default)(this,e),n instanceof NodeList||n instanceof Array)this.containers=[].concat((0,s.default)(n));else{if(!(n instanceof HTMLElement))throw new Error("Draggable containers are expected to be of type `NodeList`, `HTMLElement[]` or `HTMLElement`");this.containers=[n]}this.options=Object.assign({},y,r,{classes:Object.assign({},g,r.classes||{}),announcements:Object.assign({},b,r.announcements||{})}),this.emitter=new l.default,this.dragging=!1,this.plugins=[],this.sensors=[],this[p]=this[p].bind(this),this[f]=this[f].bind(this),this[m]=this[m].bind(this),this[v]=this[v].bind(this),document.addEventListener("drag:start",this[p],!0),document.addEventListener("drag:move",this[f],!0),document.addEventListener("drag:stop",this[m],!0),document.addEventListener("drag:pressure",this[v],!0);var a=Object.values(e.Plugins).map((function(e){return e})),o=[c.MouseSensor,c.TouchSensor];this.addPlugin.apply(this,[].concat((0,s.default)(a),(0,s.default)(this.options.plugins))),this.addSensor.apply(this,[].concat(o,(0,s.default)(this.options.sensors)));var d=new u.DraggableInitializedEvent({draggable:this});this.on("mirror:created",(function(e){var n=e.mirror;return t.mirror=n})),this.on("mirror:destroy",(function(){return t.mirror=null})),this.trigger(d)}return(0,r.default)(e,[{key:"destroy",value:function(){document.removeEventListener("drag:start",this[p],!0),document.removeEventListener("drag:move",this[f],!0),document.removeEventListener("drag:stop",this[m],!0),document.removeEventListener("drag:pressure",this[v],!0);var e=new u.DraggableDestroyEvent({draggable:this});this.trigger(e),this.removePlugin.apply(this,(0,s.default)(this.plugins.map((function(e){return e.constructor})))),this.removeSensor.apply(this,(0,s.default)(this.sensors.map((function(e){return e.constructor}))))}},{key:"addPlugin",value:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=n.map((function(t){return new t(e)}));return r.forEach((function(e){return e.attach()})),this.plugins=[].concat((0,s.default)(this.plugins),(0,s.default)(r)),this}},{key:"removePlugin",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var s=this.plugins.filter((function(e){return t.includes(e.constructor)}));return s.forEach((function(e){return e.detach()})),this.plugins=this.plugins.filter((function(e){return!t.includes(e.constructor)})),this}},{key:"addSensor",value:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=n.map((function(t){return new t(e.containers,e.options)}));return r.forEach((function(e){return e.attach()})),this.sensors=[].concat((0,s.default)(this.sensors),(0,s.default)(r)),this}},{key:"removeSensor",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var s=this.sensors.filter((function(e){return t.includes(e.constructor)}));return s.forEach((function(e){return e.detach()})),this.sensors=this.sensors.filter((function(e){return!t.includes(e.constructor)})),this}},{key:"addContainer",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.containers=[].concat((0,s.default)(this.containers),t),this.sensors.forEach((function(e){return e.addContainer.apply(e,t)})),this}},{key:"removeContainer",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.containers=this.containers.filter((function(e){return!t.includes(e)})),this.sensors.forEach((function(e){return e.removeContainer.apply(e,t)})),this}},{key:"on",value:function(e){for(var t,n=arguments.length,s=Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return(t=this.emitter).on.apply(t,[e].concat(s)),this}},{key:"off",value:function(e,t){return this.emitter.off(e,t),this}},{key:"trigger",value:function(e){return this.emitter.trigger(e),this}},{key:"getClassNameFor",value:function(e){return this.options.classes[e]}},{key:"isDragging",value:function(){return Boolean(this.dragging)}},{key:"getDraggableElements",value:function(){var e=this;return this.containers.reduce((function(t,n){return[].concat((0,s.default)(t),(0,s.default)(e.getDraggableElementsForContainer(n)))}),[])}},{key:"getDraggableElementsForContainer",value:function(e){var t=this,n=e.querySelectorAll(this.options.draggable);return[].concat((0,s.default)(n)).filter((function(e){return e!==t.originalSource&&e!==t.mirror}))}},{key:p,value:function(e){var t=this,n=_(e),s=n.target,i=n.container;if(this.containers.includes(i))if(this.options.handle&&s&&!(0,a.closest)(s,this.options.handle))n.cancel();else if(this.originalSource=(0,a.closest)(s,this.options.draggable),this.sourceContainer=i,this.originalSource){this.lastPlacedSource&&this.lastPlacedContainer&&(clearTimeout(this.placedTimeoutID),this.lastPlacedSource.classList.remove(this.getClassNameFor("source:placed")),this.lastPlacedContainer.classList.remove(this.getClassNameFor("container:placed"))),this.source=this.originalSource.cloneNode(!0),this.originalSource.parentNode.insertBefore(this.source,this.originalSource),this.originalSource.style.display="none";var r=new d.DragStartEvent({source:this.source,originalSource:this.originalSource,sourceContainer:i,sensorEvent:n});if(this.trigger(r),this.dragging=!r.canceled(),r.canceled())return this.source.parentNode.removeChild(this.source),void(this.originalSource.style.display=null);this.originalSource.classList.add(this.getClassNameFor("source:original")),this.source.classList.add(this.getClassNameFor("source:dragging")),this.sourceContainer.classList.add(this.getClassNameFor("container:dragging")),document.body.classList.add(this.getClassNameFor("body:dragging")),k(document.body,"none"),requestAnimationFrame((function(){var n=_(e).clone({target:t.source});t[f](Object.assign({},e,{detail:n}))}))}else n.cancel()}},{key:f,value:function(e){if(this.dragging){var t=_(e),n=t.container,s=t.target,i=new d.DragMoveEvent({source:this.source,originalSource:this.originalSource,sourceContainer:n,sensorEvent:t});this.trigger(i),i.canceled()&&t.cancel(),s=(0,a.closest)(s,this.options.draggable);var r=(0,a.closest)(t.target,this.containers),o=t.overContainer||r,l=this.currentOverContainer&&o!==this.currentOverContainer,c=this.currentOver&&s!==this.currentOver,u=o&&this.currentOverContainer!==o,h=r&&s&&this.currentOver!==s;if(c){var p=new d.DragOutEvent({source:this.source,originalSource:this.originalSource,sourceContainer:n,sensorEvent:t,over:this.currentOver});this.currentOver.classList.remove(this.getClassNameFor("draggable:over")),this.currentOver=null,this.trigger(p)}if(l){var f=new d.DragOutContainerEvent({source:this.source,originalSource:this.originalSource,sourceContainer:n,sensorEvent:t,overContainer:this.currentOverContainer});this.currentOverContainer.classList.remove(this.getClassNameFor("container:over")),this.currentOverContainer=null,this.trigger(f)}if(u){o.classList.add(this.getClassNameFor("container:over"));var m=new d.DragOverContainerEvent({source:this.source,originalSource:this.originalSource,sourceContainer:n,sensorEvent:t,overContainer:o});this.currentOverContainer=o,this.trigger(m)}if(h){s.classList.add(this.getClassNameFor("draggable:over"));var v=new d.DragOverEvent({source:this.source,originalSource:this.originalSource,sourceContainer:n,sensorEvent:t,overContainer:o,over:s});this.currentOver=s,this.trigger(v)}}}},{key:m,value:function(e){var t=this;if(this.dragging){this.dragging=!1;var n=new d.DragStopEvent({source:this.source,originalSource:this.originalSource,sensorEvent:e.sensorEvent,sourceContainer:this.sourceContainer});this.trigger(n),this.source.parentNode.insertBefore(this.originalSource,this.source),this.source.parentNode.removeChild(this.source),this.originalSource.style.display="",this.source.classList.remove(this.getClassNameFor("source:dragging")),this.originalSource.classList.remove(this.getClassNameFor("source:original")),this.originalSource.classList.add(this.getClassNameFor("source:placed")),this.sourceContainer.classList.add(this.getClassNameFor("container:placed")),this.sourceContainer.classList.remove(this.getClassNameFor("container:dragging")),document.body.classList.remove(this.getClassNameFor("body:dragging")),k(document.body,""),this.currentOver&&this.currentOver.classList.remove(this.getClassNameFor("draggable:over")),this.currentOverContainer&&this.currentOverContainer.classList.remove(this.getClassNameFor("container:over")),this.lastPlacedSource=this.originalSource,this.lastPlacedContainer=this.sourceContainer,this.placedTimeoutID=setTimeout((function(){t.lastPlacedSource&&t.lastPlacedSource.classList.remove(t.getClassNameFor("source:placed")),t.lastPlacedContainer&&t.lastPlacedContainer.classList.remove(t.getClassNameFor("container:placed")),t.lastPlacedSource=null,t.lastPlacedContainer=null}),this.options.placedTimeout),this.source=null,this.originalSource=null,this.currentOverContainer=null,this.currentOver=null,this.sourceContainer=null}}},{key:v,value:function(e){if(this.dragging){var t=_(e),n=this.source||(0,a.closest)(t.originalEvent.target,this.options.draggable),s=new d.DragPressureEvent({sensorEvent:t,source:n,pressure:t.pressure});this.trigger(s)}}}]),e}();function _(e){return e.detail}function k(e,t){e.style.webkitUserSelect=t,e.style.mozUserSelect=t,e.style.msUserSelect=t,e.style.oUserSelect=t,e.style.userSelect=t}w.Plugins={Announcement:o.Announcement,Focusable:o.Focusable,Mirror:o.Mirror,Scrollable:o.Scrollable},t.default=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=c(n(1)),i=c(n(0)),r=c(n(3)),a=c(n(2)),o=c(n(20)),l=n(19);function c(e){return e&&e.__esModule?e:{default:e}}var u=Symbol("onMouseForceWillBegin"),d=Symbol("onMouseForceDown"),h=Symbol("onMouseDown"),p=Symbol("onMouseForceChange"),f=Symbol("onMouseMove"),m=Symbol("onMouseUp"),v=Symbol("onMouseForceGlobalChange"),b=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.default)(this,t);var i=(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.mightDrag=!1,i[u]=i[u].bind(i),i[d]=i[d].bind(i),i[h]=i[h].bind(i),i[p]=i[p].bind(i),i[f]=i[f].bind(i),i[m]=i[m].bind(i),i}return(0,a.default)(t,e),(0,i.default)(t,[{key:"attach",value:function(){var e=!0,t=!1,n=void 0;try{for(var s,i=this.containers[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){var r=s.value;r.addEventListener("webkitmouseforcewillbegin",this[u],!1),r.addEventListener("webkitmouseforcedown",this[d],!1),r.addEventListener("mousedown",this[h],!0),r.addEventListener("webkitmouseforcechanged",this[p],!1)}}catch(a){t=!0,n=a}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}document.addEventListener("mousemove",this[f]),document.addEventListener("mouseup",this[m])}},{key:"detach",value:function(){var e=!0,t=!1,n=void 0;try{for(var s,i=this.containers[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){var r=s.value;r.removeEventListener("webkitmouseforcewillbegin",this[u],!1),r.removeEventListener("webkitmouseforcedown",this[d],!1),r.removeEventListener("mousedown",this[h],!0),r.removeEventListener("webkitmouseforcechanged",this[p],!1)}}catch(a){t=!0,n=a}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}document.removeEventListener("mousemove",this[f]),document.removeEventListener("mouseup",this[m])}},{key:u,value:function(e){e.preventDefault(),this.mightDrag=!0}},{key:d,value:function(e){if(!this.dragging){var t=document.elementFromPoint(e.clientX,e.clientY),n=e.currentTarget,s=new l.DragStartSensorEvent({clientX:e.clientX,clientY:e.clientY,target:t,container:n,originalEvent:e});this.trigger(n,s),this.currentContainer=n,this.dragging=!s.canceled(),this.mightDrag=!1}}},{key:m,value:function(e){if(this.dragging){var t=new l.DragStopSensorEvent({clientX:e.clientX,clientY:e.clientY,target:null,container:this.currentContainer,originalEvent:e});this.trigger(this.currentContainer,t),this.currentContainer=null,this.dragging=!1,this.mightDrag=!1}}},{key:h,value:function(e){this.mightDrag&&(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault())}},{key:f,value:function(e){if(this.dragging){var t=document.elementFromPoint(e.clientX,e.clientY),n=new l.DragMoveSensorEvent({clientX:e.clientX,clientY:e.clientY,target:t,container:this.currentContainer,originalEvent:e});this.trigger(this.currentContainer,n)}}},{key:p,value:function(e){if(!this.dragging){var t=e.target,n=e.currentTarget,s=new l.DragPressureSensorEvent({pressure:e.webkitForce,clientX:e.clientX,clientY:e.clientY,target:t,container:n,originalEvent:e});this.trigger(n,s)}}},{key:v,value:function(e){if(this.dragging){var t=e.target,n=new l.DragPressureSensorEvent({pressure:e.webkitForce,clientX:e.clientX,clientY:e.clientY,target:t,container:this.currentContainer,originalEvent:e});this.trigger(this.currentContainer,n)}}}]),t}(o.default);t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,i=n(94),r=(s=i)&&s.__esModule?s:{default:s};t.default=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=u(n(1)),i=u(n(0)),r=u(n(3)),a=u(n(2)),o=n(8),l=u(n(20)),c=n(19);function u(e){return e&&e.__esModule?e:{default:e}}var d=Symbol("onMouseDown"),h=Symbol("onMouseUp"),p=Symbol("onDragStart"),f=Symbol("onDragOver"),m=Symbol("onDragEnd"),v=Symbol("onDrop"),b=Symbol("reset"),g=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.default)(this,t);var i=(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.mouseDownTimeout=null,i.draggableElement=null,i.nativeDraggableElement=null,i[d]=i[d].bind(i),i[h]=i[h].bind(i),i[p]=i[p].bind(i),i[f]=i[f].bind(i),i[m]=i[m].bind(i),i[v]=i[v].bind(i),i}return(0,a.default)(t,e),(0,i.default)(t,[{key:"attach",value:function(){document.addEventListener("mousedown",this[d],!0)}},{key:"detach",value:function(){document.removeEventListener("mousedown",this[d],!0)}},{key:p,value:function(e){var t=this;e.dataTransfer.setData("text",""),e.dataTransfer.effectAllowed=this.options.type;var n=document.elementFromPoint(e.clientX,e.clientY);if(this.currentContainer=(0,o.closest)(e.target,this.containers),this.currentContainer){var s=new c.DragStartSensorEvent({clientX:e.clientX,clientY:e.clientY,target:n,container:this.currentContainer,originalEvent:e});setTimeout((function(){t.trigger(t.currentContainer,s),s.canceled()?t.dragging=!1:t.dragging=!0}),0)}}},{key:f,value:function(e){if(this.dragging){var t=document.elementFromPoint(e.clientX,e.clientY),n=this.currentContainer,s=new c.DragMoveSensorEvent({clientX:e.clientX,clientY:e.clientY,target:t,container:n,originalEvent:e});this.trigger(n,s),s.canceled()||(e.preventDefault(),e.dataTransfer.dropEffect=this.options.type)}}},{key:m,value:function(e){if(this.dragging){document.removeEventListener("mouseup",this[h],!0);var t=document.elementFromPoint(e.clientX,e.clientY),n=this.currentContainer,s=new c.DragStopSensorEvent({clientX:e.clientX,clientY:e.clientY,target:t,container:n,originalEvent:e});this.trigger(n,s),this.dragging=!1,this[b]()}}},{key:v,value:function(e){e.preventDefault()}},{key:d,value:function(e){var t=this;if(!e.target||!e.target.form&&!e.target.contenteditable){var n=(0,o.closest)(e.target,(function(e){return e.draggable}));n&&(n.draggable=!1,this.nativeDraggableElement=n),document.addEventListener("mouseup",this[h],!0),document.addEventListener("dragstart",this[p],!1),document.addEventListener("dragover",this[f],!1),document.addEventListener("dragend",this[m],!1),document.addEventListener("drop",this[v],!1);var s=(0,o.closest)(e.target,this.options.draggable);s&&(this.mouseDownTimeout=setTimeout((function(){s.draggable=!0,t.draggableElement=s}),this.options.delay))}}},{key:h,value:function(){this[b]()}},{key:b,value:function(){clearTimeout(this.mouseDownTimeout),document.removeEventListener("mouseup",this[h],!0),document.removeEventListener("dragstart",this[p],!1),document.removeEventListener("dragover",this[f],!1),document.removeEventListener("dragend",this[m],!1),document.removeEventListener("drop",this[v],!1),this.nativeDraggableElement&&(this.nativeDraggableElement.draggable=!0,this.nativeDraggableElement=null),this.draggableElement&&(this.draggableElement.draggable=!1,this.draggableElement=null)}}]),t}(l.default);t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,i=n(96),r=(s=i)&&s.__esModule?s:{default:s};t.default=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=u(n(1)),i=u(n(0)),r=u(n(3)),a=u(n(2)),o=n(8),l=u(n(20)),c=n(19);function u(e){return e&&e.__esModule?e:{default:e}}var d=Symbol("onTouchStart"),h=Symbol("onTouchHold"),p=Symbol("onTouchEnd"),f=Symbol("onTouchMove"),m=!1;window.addEventListener("touchmove",(function(e){m&&e.preventDefault()}),{passive:!1});var v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.default)(this,t);var i=(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.currentScrollableParent=null,i.tapTimeout=null,i.touchMoved=!1,i[d]=i[d].bind(i),i[h]=i[h].bind(i),i[p]=i[p].bind(i),i[f]=i[f].bind(i),i}return(0,a.default)(t,e),(0,i.default)(t,[{key:"attach",value:function(){document.addEventListener("touchstart",this[d])}},{key:"detach",value:function(){document.removeEventListener("touchstart",this[d])}},{key:d,value:function(e){var t=(0,o.closest)(e.target,this.containers);t&&(document.addEventListener("touchmove",this[f]),document.addEventListener("touchend",this[p]),document.addEventListener("touchcancel",this[p]),t.addEventListener("contextmenu",b),this.currentContainer=t,this.tapTimeout=setTimeout(this[h](e,t),this.options.delay))}},{key:h,value:function(e,t){var n=this;return function(){if(!n.touchMoved){var s=e.touches[0]||e.changedTouches[0],i=e.target,r=new c.DragStartSensorEvent({clientX:s.pageX,clientY:s.pageY,target:i,container:t,originalEvent:e});n.trigger(t,r),n.dragging=!r.canceled(),m=n.dragging}}}},{key:f,value:function(e){if(this.touchMoved=!0,this.dragging){var t=e.touches[0]||e.changedTouches[0],n=document.elementFromPoint(t.pageX-window.scrollX,t.pageY-window.scrollY),s=new c.DragMoveSensorEvent({clientX:t.pageX,clientY:t.pageY,target:n,container:this.currentContainer,originalEvent:e});this.trigger(this.currentContainer,s)}}},{key:p,value:function(e){if(this.touchMoved=!1,m=!1,document.removeEventListener("touchend",this[p]),document.removeEventListener("touchcancel",this[p]),document.removeEventListener("touchmove",this[f]),this.currentContainer&&this.currentContainer.removeEventListener("contextmenu",b),clearTimeout(this.tapTimeout),this.dragging){var t=e.touches[0]||e.changedTouches[0],n=document.elementFromPoint(t.pageX-window.scrollX,t.pageY-window.scrollY);e.preventDefault();var s=new c.DragStopSensorEvent({clientX:t.pageX,clientY:t.pageY,target:n,container:this.currentContainer,originalEvent:e});this.trigger(this.currentContainer,s),this.currentContainer=null,this.dragging=!1}}}]),t}(l.default);function b(e){e.preventDefault(),e.stopPropagation()}t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,i=n(98),r=(s=i)&&s.__esModule?s:{default:s};t.default=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DragPressureSensorEvent=t.DragStopSensorEvent=t.DragMoveSensorEvent=t.DragStartSensorEvent=t.SensorEvent=void 0;var s=l(n(1)),i=l(n(0)),r=l(n(3)),a=l(n(2)),o=l(n(5));function l(e){return e&&e.__esModule?e:{default:e}}var c=t.SensorEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"originalEvent",get:function(){return this.data.originalEvent}},{key:"clientX",get:function(){return this.data.clientX}},{key:"clientY",get:function(){return this.data.clientY}},{key:"target",get:function(){return this.data.target}},{key:"container",get:function(){return this.data.container}},{key:"pressure",get:function(){return this.data.pressure}}]),t}(o.default);(t.DragStartSensorEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(c)).type="drag:start",(t.DragMoveSensorEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(c)).type="drag:move",(t.DragStopSensorEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(c)).type="drag:stop",(t.DragPressureSensorEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(c)).type="drag:pressure"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=u(n(1)),i=u(n(0)),r=u(n(3)),a=u(n(2)),o=n(8),l=u(n(20)),c=n(19);function u(e){return e&&e.__esModule?e:{default:e}}var d=Symbol("onContextMenuWhileDragging"),h=Symbol("onMouseDown"),p=Symbol("onMouseMove"),f=Symbol("onMouseUp"),m=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.default)(this,t);var i=(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.mouseDown=!1,i.mouseDownTimeout=null,i.openedContextMenu=!1,i[d]=i[d].bind(i),i[h]=i[h].bind(i),i[p]=i[p].bind(i),i[f]=i[f].bind(i),i}return(0,a.default)(t,e),(0,i.default)(t,[{key:"attach",value:function(){document.addEventListener("mousedown",this[h],!0)}},{key:"detach",value:function(){document.removeEventListener("mousedown",this[h],!0)}},{key:h,value:function(e){var t=this;if(0===e.button&&!e.ctrlKey&&!e.metaKey){document.addEventListener("mouseup",this[f]);var n=document.elementFromPoint(e.clientX,e.clientY),s=(0,o.closest)(n,this.containers);s&&(document.addEventListener("dragstart",v),this.mouseDown=!0,clearTimeout(this.mouseDownTimeout),this.mouseDownTimeout=setTimeout((function(){if(t.mouseDown){var i=new c.DragStartSensorEvent({clientX:e.clientX,clientY:e.clientY,target:n,container:s,originalEvent:e});t.trigger(s,i),t.currentContainer=s,t.dragging=!i.canceled(),t.dragging&&(document.addEventListener("contextmenu",t[d]),document.addEventListener("mousemove",t[p]))}}),this.options.delay))}}},{key:p,value:function(e){if(this.dragging){var t=document.elementFromPoint(e.clientX,e.clientY),n=new c.DragMoveSensorEvent({clientX:e.clientX,clientY:e.clientY,target:t,container:this.currentContainer,originalEvent:e});this.trigger(this.currentContainer,n)}}},{key:f,value:function(e){if(this.mouseDown=Boolean(this.openedContextMenu),this.openedContextMenu)this.openedContextMenu=!1;else if(document.removeEventListener("mouseup",this[f]),document.removeEventListener("dragstart",v),this.dragging){var t=document.elementFromPoint(e.clientX,e.clientY),n=new c.DragStopSensorEvent({clientX:e.clientX,clientY:e.clientY,target:t,container:this.currentContainer,originalEvent:e});this.trigger(this.currentContainer,n),document.removeEventListener("contextmenu",this[d]),document.removeEventListener("mousemove",this[p]),this.currentContainer=null,this.dragging=!1}}},{key:d,value:function(e){e.preventDefault(),this.openedContextMenu=!0}}]),t}(l.default);function v(e){e.preventDefault()}t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,i=n(101),r=(s=i)&&s.__esModule?s:{default:s};t.default=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(n(15)),i=a(n(1)),r=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.default)(this,e),this.containers=[].concat((0,s.default)(t)),this.options=Object.assign({},n),this.dragging=!1,this.currentContainer=null}return(0,r.default)(e,[{key:"attach",value:function(){return this}},{key:"detach",value:function(){return this}},{key:"addContainer",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.containers=[].concat((0,s.default)(this.containers),t)}},{key:"removeContainer",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.containers=this.containers.filter((function(e){return!t.includes(e)}))}},{key:"trigger",value:function(e,t){var n=document.createEvent("Event");return n.detail=t,n.initEvent(t.type,!0,!0),e.dispatchEvent(n),this.lastEvent=t,t}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return requestAnimationFrame((function(){requestAnimationFrame(e)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,i=n(104),r=(s=i)&&s.__esModule?s:{default:s};t.default=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,i=n(15),r=(s=i)&&s.__esModule?s:{default:s};t.default=function(e,t){if(!e)return null;var n,s=t,i=t,o=t,l=t,c=Boolean("string"==typeof t),u=Boolean("function"==typeof t),d=Boolean(t instanceof NodeList||t instanceof Array),h=Boolean(t instanceof HTMLElement),p=e;do{if(p=p.correspondingUseElement||p.correspondingElement||p,(n=p)?c?a.call(n,s):d?[].concat((0,r.default)(o)).includes(n):h?l===n:u&&i(n):n)return p;p=p.parentNode}while(p&&p!==document.body&&p!==document);return null};var a=Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,i=n(106),r=(s=i)&&s.__esModule?s:{default:s};t.default=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultOptions=t.scroll=t.onDragStop=t.onDragMove=t.onDragStart=void 0;var s=c(n(1)),i=c(n(0)),r=c(n(3)),a=c(n(2)),o=c(n(7)),l=n(8);function c(e){return e&&e.__esModule?e:{default:e}}var u=t.onDragStart=Symbol("onDragStart"),d=t.onDragMove=Symbol("onDragMove"),h=t.onDragStop=Symbol("onDragStop"),p=t.scroll=Symbol("scroll"),f=t.defaultOptions={speed:6,sensitivity:50,scrollableElements:[]},m=function(e){function t(e){(0,s.default)(this,t);var n=(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.options=Object.assign({},f,n.getOptions()),n.currentMousePosition=null,n.scrollAnimationFrame=null,n.scrollableElement=null,n.findScrollableElementFrame=null,n[u]=n[u].bind(n),n[d]=n[d].bind(n),n[h]=n[h].bind(n),n[p]=n[p].bind(n),n}return(0,a.default)(t,e),(0,i.default)(t,[{key:"attach",value:function(){this.draggable.on("drag:start",this[u]).on("drag:move",this[d]).on("drag:stop",this[h])}},{key:"detach",value:function(){this.draggable.off("drag:start",this[u]).off("drag:move",this[d]).off("drag:stop",this[h])}},{key:"getOptions",value:function(){return this.draggable.options.scrollable||{}}},{key:"getScrollableElement",value:function(e){return this.hasDefinedScrollableElements()?(0,l.closest)(e,this.options.scrollableElements)||document.documentElement:function(e){if(!e)return v();var t=getComputedStyle(e).getPropertyValue("position"),n="absolute"===t,s=(0,l.closest)(e,(function(e){return(!n||!function(e){return"static"===getComputedStyle(e).getPropertyValue("position")}(e))&&function(e){var t=getComputedStyle(e,null),n=t.getPropertyValue("overflow")+t.getPropertyValue("overflow-y")+t.getPropertyValue("overflow-x");return/(auto|scroll)/.test(n)}(e)}));return"fixed"!==t&&s?s:v()}(e)}},{key:"hasDefinedScrollableElements",value:function(){return Boolean(0!==this.options.scrollableElements.length)}},{key:u,value:function(e){var t=this;this.findScrollableElementFrame=requestAnimationFrame((function(){t.scrollableElement=t.getScrollableElement(e.source)}))}},{key:d,value:function(e){var t=this;if(this.findScrollableElementFrame=requestAnimationFrame((function(){t.scrollableElement=t.getScrollableElement(e.sensorEvent.target)})),this.scrollableElement){var n=e.sensorEvent,s={x:0,y:0};"ontouchstart"in window&&(s.y=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,s.x=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),this.currentMousePosition={clientX:n.clientX-s.x,clientY:n.clientY-s.y},this.scrollAnimationFrame=requestAnimationFrame(this[p])}}},{key:h,value:function(){cancelAnimationFrame(this.scrollAnimationFrame),cancelAnimationFrame(this.findScrollableElementFrame),this.scrollableElement=null,this.scrollAnimationFrame=null,this.findScrollableElementFrame=null,this.currentMousePosition=null}},{key:p,value:function(){if(this.scrollableElement&&this.currentMousePosition){cancelAnimationFrame(this.scrollAnimationFrame);var e=this.options,t=e.speed,n=e.sensitivity,s=this.scrollableElement.getBoundingClientRect(),i=s.bottom>window.innerHeight,r=s.top<0||i,a=v(),o=this.scrollableElement,l=this.currentMousePosition.clientX,c=this.currentMousePosition.clientY;if(o===document.body||o===document.documentElement||r){var u=window,d=u.innerHeight,h=u.innerWidth;c<n?a.scrollTop-=t:d-c<n&&(a.scrollTop+=t),l<n?a.scrollLeft-=t:h-l<n&&(a.scrollLeft+=t)}else{var f=o.offsetHeight,m=o.offsetWidth;s.top+f-c<n?o.scrollTop+=t:c-s.top<n&&(o.scrollTop-=t),s.left+m-l<n?o.scrollLeft+=t:l-s.left<n&&(o.scrollLeft-=t)}this.scrollAnimationFrame=requestAnimationFrame(this[p])}}}]),t}(o.default);function v(){return document.scrollingElement||document.documentElement}t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultOptions=void 0;var s,i=n(108),r=(s=i)&&s.__esModule?s:{default:s};t.default=r.default,t.defaultOptions=i.defaultOptions},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MirrorDestroyEvent=t.MirrorMoveEvent=t.MirrorAttachedEvent=t.MirrorCreatedEvent=t.MirrorCreateEvent=t.MirrorEvent=void 0;var s=l(n(1)),i=l(n(0)),r=l(n(3)),a=l(n(2)),o=l(n(5));function l(e){return e&&e.__esModule?e:{default:e}}var c=t.MirrorEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"source",get:function(){return this.data.source}},{key:"originalSource",get:function(){return this.data.originalSource}},{key:"sourceContainer",get:function(){return this.data.sourceContainer}},{key:"sensorEvent",get:function(){return this.data.sensorEvent}},{key:"dragEvent",get:function(){return this.data.dragEvent}},{key:"originalEvent",get:function(){return this.sensorEvent?this.sensorEvent.originalEvent:null}}]),t}(o.default);(t.MirrorCreateEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(c)).type="mirror:create",(t.MirrorCreatedEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"mirror",get:function(){return this.data.mirror}}]),t}(c)).type="mirror:created",(t.MirrorAttachedEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"mirror",get:function(){return this.data.mirror}}]),t}(c)).type="mirror:attached";var u=t.MirrorMoveEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"mirror",get:function(){return this.data.mirror}}]),t}(c);u.type="mirror:move",u.cancelable=!0;var d=t.MirrorDestroyEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"mirror",get:function(){return this.data.mirror}}]),t}(c);d.type="mirror:destroy",d.cancelable=!0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(110);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})}))},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s]);return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultOptions=t.getAppendableContainer=t.onScroll=t.onMirrorMove=t.onMirrorCreated=t.onDragStop=t.onDragMove=t.onDragStart=void 0;var s=u(n(112)),i=u(n(1)),r=u(n(0)),a=u(n(3)),o=u(n(2)),l=u(n(7)),c=n(111);function u(e){return e&&e.__esModule?e:{default:e}}var d=t.onDragStart=Symbol("onDragStart"),h=t.onDragMove=Symbol("onDragMove"),p=t.onDragStop=Symbol("onDragStop"),f=t.onMirrorCreated=Symbol("onMirrorCreated"),m=t.onMirrorMove=Symbol("onMirrorMove"),v=t.onScroll=Symbol("onScroll"),b=t.getAppendableContainer=Symbol("getAppendableContainer"),g=t.defaultOptions={constrainDimensions:!1,xAxis:!0,yAxis:!0,cursorOffsetX:null,cursorOffsetY:null},y=function(e){function t(e){(0,i.default)(this,t);var n=(0,a.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.options=Object.assign({},g,n.getOptions()),n.scrollOffset={x:0,y:0},n.initialScrollOffset={x:window.scrollX,y:window.scrollY},n[d]=n[d].bind(n),n[h]=n[h].bind(n),n[p]=n[p].bind(n),n[f]=n[f].bind(n),n[m]=n[m].bind(n),n[v]=n[v].bind(n),n}return(0,o.default)(t,e),(0,r.default)(t,[{key:"attach",value:function(){this.draggable.on("drag:start",this[d]).on("drag:move",this[h]).on("drag:stop",this[p]).on("mirror:created",this[f]).on("mirror:move",this[m])}},{key:"detach",value:function(){this.draggable.off("drag:start",this[d]).off("drag:move",this[h]).off("drag:stop",this[p]).off("mirror:created",this[f]).off("mirror:move",this[m])}},{key:"getOptions",value:function(){return this.draggable.options.mirror||{}}},{key:d,value:function(e){if(!e.canceled()){"ontouchstart"in window&&document.addEventListener("scroll",this[v],!0),this.initialScrollOffset={x:window.scrollX,y:window.scrollY};var t=e.source,n=e.originalSource,s=e.sourceContainer,i=e.sensorEvent,r=new c.MirrorCreateEvent({source:t,originalSource:n,sourceContainer:s,sensorEvent:i,dragEvent:e});if(this.draggable.trigger(r),!function(e){return/^drag/.test(e.originalEvent.type)}(i)&&!r.canceled()){var a=this[b](t)||s;this.mirror=t.cloneNode(!0);var o=new c.MirrorCreatedEvent({source:t,originalSource:n,sourceContainer:s,sensorEvent:i,dragEvent:e,mirror:this.mirror}),l=new c.MirrorAttachedEvent({source:t,originalSource:n,sourceContainer:s,sensorEvent:i,dragEvent:e,mirror:this.mirror});this.draggable.trigger(o),a.appendChild(this.mirror),this.draggable.trigger(l)}}}},{key:h,value:function(e){if(this.mirror&&!e.canceled()){var t=e.source,n=e.originalSource,s=e.sourceContainer,i=e.sensorEvent,r=new c.MirrorMoveEvent({source:t,originalSource:n,sourceContainer:s,sensorEvent:i,dragEvent:e,mirror:this.mirror});this.draggable.trigger(r)}}},{key:p,value:function(e){if("ontouchstart"in window&&document.removeEventListener("scroll",this[v],!0),this.initialScrollOffset={x:0,y:0},this.scrollOffset={x:0,y:0},this.mirror){var t=e.source,n=e.sourceContainer,s=e.sensorEvent,i=new c.MirrorDestroyEvent({source:t,mirror:this.mirror,sourceContainer:n,sensorEvent:s,dragEvent:e});this.draggable.trigger(i),i.canceled()||this.mirror.parentNode.removeChild(this.mirror)}}},{key:v,value:function(){this.scrollOffset={x:window.scrollX-this.initialScrollOffset.x,y:window.scrollY-this.initialScrollOffset.y}}},{key:f,value:function(e){var t=this,n={mirror:e.mirror,source:e.source,sensorEvent:e.sensorEvent,mirrorClass:this.draggable.getClassNameFor("mirror"),scrollOffset:this.scrollOffset,options:this.options};return Promise.resolve(n).then(w).then(_).then(k).then(C).then(j({initial:!0})).then(x).then((function(e){var n=e.mirrorOffset,i=e.initialX,r=e.initialY,a=(0,s.default)(e,["mirrorOffset","initialX","initialY"]);return t.mirrorOffset=n,t.initialX=i,t.initialY=r,Object.assign({mirrorOffset:n,initialX:i,initialY:r},a)}))}},{key:m,value:function(e){if(e.canceled())return null;var t={mirror:e.mirror,sensorEvent:e.sensorEvent,mirrorOffset:this.mirrorOffset,options:this.options,initialX:this.initialX,initialY:this.initialY,scrollOffset:this.scrollOffset};return Promise.resolve(t).then(j({raf:!0}))}},{key:b,value:function(e){var t=this.options.appendTo;return"string"==typeof t?document.querySelector(t):t instanceof HTMLElement?t:"function"==typeof t?t(e):e.parentNode}}]),t}(l.default);function w(e){var t=e.source,n=(0,s.default)(e,["source"]);return O((function(e){var s=t.getBoundingClientRect();e(Object.assign({source:t,sourceRect:s},n))}))}function _(e){var t=e.sensorEvent,n=e.sourceRect,i=e.options,r=(0,s.default)(e,["sensorEvent","sourceRect","options"]);return O((function(e){var s={top:null===i.cursorOffsetY?t.clientY-n.top:i.cursorOffsetY,left:null===i.cursorOffsetX?t.clientX-n.left:i.cursorOffsetX};e(Object.assign({sensorEvent:t,sourceRect:n,mirrorOffset:s,options:i},r))}))}function k(e){var t=e.mirror,n=e.source,i=e.options,r=(0,s.default)(e,["mirror","source","options"]);return O((function(e){var s=void 0,a=void 0;if(i.constrainDimensions){var o=getComputedStyle(n);s=o.getPropertyValue("height"),a=o.getPropertyValue("width")}t.style.position="fixed",t.style.pointerEvents="none",t.style.top=0,t.style.left=0,t.style.margin=0,i.constrainDimensions&&(t.style.height=s,t.style.width=a),e(Object.assign({mirror:t,source:n,options:i},r))}))}function C(e){var t=e.mirror,n=e.mirrorClass,i=(0,s.default)(e,["mirror","mirrorClass"]);return O((function(e){t.classList.add(n),e(Object.assign({mirror:t,mirrorClass:n},i))}))}function x(e){var t=e.mirror,n=(0,s.default)(e,["mirror"]);return O((function(e){t.removeAttribute("id"),delete t.id,e(Object.assign({mirror:t},n))}))}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.withFrame,n=void 0!==t&&t,i=e.initial,r=void 0!==i&&i;return function(e){var t=e.mirror,i=e.sensorEvent,a=e.mirrorOffset,o=e.initialY,l=e.initialX,c=e.scrollOffset,u=e.options,d=(0,s.default)(e,["mirror","sensorEvent","mirrorOffset","initialY","initialX","scrollOffset","options"]);return O((function(e){var n=Object.assign({mirror:t,sensorEvent:i,mirrorOffset:a,options:u},d);if(a){var s=i.clientX-a.left-c.x,h=i.clientY-a.top-c.y;u.xAxis&&u.yAxis||r?t.style.transform="translate3d("+s+"px, "+h+"px, 0)":u.xAxis&&!u.yAxis?t.style.transform="translate3d("+s+"px, "+o+"px, 0)":u.yAxis&&!u.xAxis&&(t.style.transform="translate3d("+l+"px, "+h+"px, 0)"),r&&(n.initialX=s,n.initialY=h)}e(n)}),{frame:n})}}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.raf,s=void 0!==n&&n;return new Promise((function(t,n){s?requestAnimationFrame((function(){e(t,n)})):e(t,n)}))}t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultOptions=void 0;var s,i=n(113),r=(s=i)&&s.__esModule?s:{default:s};t.default=r.default,t.defaultOptions=i.defaultOptions},function(e,t,n){var s=n(6)("iterator"),i=!1;try{var r=[7][s]();r.return=function(){i=!0},Array.from(r,(function(){throw 2}))}catch(a){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var r=[7],o=r[s]();o.next=function(){return{done:n=!0}},r[s]=function(){return o},e(r)}catch(a){}return n}},function(e,t,n){var s=n(38),i=n(6)("toStringTag"),r="Arguments"==s(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),i))?n:r?s(t):"Object"==(a=s(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){var s=n(116),i=n(6)("iterator"),r=n(21);e.exports=n(4).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||r[s(e)]}},function(e,t,n){"use strict";var s=n(9),i=n(22);e.exports=function(e,t,n){t in e?s.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var s=n(21),i=n(6)("iterator"),r=Array.prototype;e.exports=function(e){return void 0!==e&&(s.Array===e||r[i]===e)}},function(e,t,n){var s=n(17);e.exports=function(e,t,n,i){try{return i?t(s(n)[0],n[1]):t(n)}catch(a){var r=e.return;throw void 0!==r&&s(r.call(e)),a}}},function(e,t,n){"use strict";var s=n(44),i=n(14),r=n(33),a=n(120),o=n(119),l=n(56),c=n(118),u=n(117);i(i.S+i.F*!n(115)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,i,d,h=r(e),p="function"==typeof this?this:Array,f=arguments.length,m=f>1?arguments[1]:void 0,v=void 0!==m,b=0,g=u(h);if(v&&(m=s(m,f>2?arguments[2]:void 0,2)),null==g||p==Array&&o(g))for(n=new p(t=l(h.length));t>b;b++)c(n,b,v?m(h[b],b):h[b]);else for(d=g.call(h),n=new p;!(i=d.next()).done;b++)c(n,b,v?a(d,m,[i.value,b],!0):i.value);return n.length=b,n}})},function(e,t,n){n(60),n(121),e.exports=n(4).Array.from},function(e,t,n){e.exports={default:n(122),__esModule:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=c(n(15)),i=c(n(1)),r=c(n(0)),a=c(n(3)),o=c(n(2)),l=c(n(7));function c(e){return e&&e.__esModule?e:{default:e}}var u=Symbol("onInitialize"),d=Symbol("onDestroy"),h={},p=function(e){function t(e){(0,i.default)(this,t);var n=(0,a.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.options=Object.assign({},h,n.getOptions()),n[u]=n[u].bind(n),n[d]=n[d].bind(n),n}return(0,o.default)(t,e),(0,r.default)(t,[{key:"attach",value:function(){this.draggable.on("draggable:initialize",this[u]).on("draggable:destroy",this[d])}},{key:"detach",value:function(){this.draggable.off("draggable:initialize",this[u]).off("draggable:destroy",this[d])}},{key:"getOptions",value:function(){return this.draggable.options.focusable||{}}},{key:"getElements",value:function(){return[].concat((0,s.default)(this.draggable.containers),(0,s.default)(this.draggable.getDraggableElements()))}},{key:u,value:function(){var e=this;requestAnimationFrame((function(){e.getElements().forEach((function(e){return function(e){Boolean(!e.getAttribute("tabindex")&&-1===e.tabIndex)&&(f.push(e),e.tabIndex=0)}(e)}))}))}},{key:d,value:function(){var e=this;requestAnimationFrame((function(){e.getElements().forEach((function(e){return function(e){var t=f.indexOf(e);-1!==t&&(e.tabIndex=-1,f.splice(t,1))}(e)}))}))}}]),t}(l.default);t.default=p;var f=[]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,i=n(124),r=(s=i)&&s.__esModule?s:{default:s};t.default=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(n(1)),i=r(n(0));function r(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(t){(0,s.default)(this,e),this.draggable=t}return(0,i.default)(e,[{key:"attach",value:function(){throw new Error("Not Implemented")}},{key:"detach",value:function(){throw new Error("Not Implemented")}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultOptions=void 0;var s=l(n(1)),i=l(n(0)),r=l(n(3)),a=l(n(2)),o=l(n(7));function l(e){return e&&e.__esModule?e:{default:e}}var c=Symbol("onInitialize"),u=Symbol("onDestroy"),d=Symbol("announceEvent"),h=Symbol("announceMessage"),p=t.defaultOptions={expire:7e3},f=function(e){function t(e){(0,s.default)(this,t);var n=(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.options=Object.assign({},p,n.getOptions()),n.originalTriggerMethod=n.draggable.trigger,n[c]=n[c].bind(n),n[u]=n[u].bind(n),n}return(0,a.default)(t,e),(0,i.default)(t,[{key:"attach",value:function(){this.draggable.on("draggable:initialize",this[c])}},{key:"detach",value:function(){this.draggable.off("draggable:destroy",this[u])}},{key:"getOptions",value:function(){return this.draggable.options.announcements||{}}},{key:d,value:function(e){var t=this.options[e.type];t&&"string"==typeof t&&this[h](t),t&&"function"==typeof t&&this[h](t(e))}},{key:h,value:function(e){!function(e,t){var n=t.expire,s=document.createElement("div");s.textContent=e,v.appendChild(s),setTimeout((function(){v.removeChild(s)}),n)}(e,{expire:this.options.expire})}},{key:c,value:function(){var e=this;this.draggable.trigger=function(t){try{e[d](t)}finally{e.originalTriggerMethod.call(e.draggable,t)}}}},{key:u,value:function(){this.draggable.trigger=this.originalTriggerMethod}}]),t}(o.default);t.default=f;var m,v=((m=document.createElement("div")).setAttribute("id","draggable-live-region"),m.setAttribute("aria-relevant","additions"),m.setAttribute("aria-atomic","true"),m.setAttribute("aria-live","assertive"),m.setAttribute("role","log"),m.style.position="fixed",m.style.width="1px",m.style.height="1px",m.style.top="-1px",m.style.overflow="hidden",m);document.addEventListener("DOMContentLoaded",(function(){document.body.appendChild(v)}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultOptions=void 0;var s,i=n(127),r=(s=i)&&s.__esModule?s:{default:s};t.default=r.default,t.defaultOptions=i.defaultOptions},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DraggableDestroyEvent=t.DraggableInitializedEvent=t.DraggableEvent=void 0;var s=l(n(1)),i=l(n(0)),r=l(n(3)),a=l(n(2)),o=l(n(5));function l(e){return e&&e.__esModule?e:{default:e}}var c=t.DraggableEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"draggable",get:function(){return this.data.draggable}}]),t}(o.default);c.type="draggable",(t.DraggableInitializedEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(c)).type="draggable:initialize",(t.DraggableDestroyEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(c)).type="draggable:destroy"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(n(1)),i=r(n(0));function r(e){return e&&e.__esModule?e:{default:e}}var a=Symbol("canceled"),o=function(){function e(t){(0,s.default)(this,e),this[a]=!1,this.data=t}return(0,i.default)(e,[{key:"cancel",value:function(){this[a]=!0}},{key:"canceled",value:function(){return Boolean(this[a])}},{key:"clone",value:function(e){return new this.constructor(Object.assign({},this.data,e))}},{key:"type",get:function(){return this.constructor.type}},{key:"cancelable",get:function(){return this.constructor.cancelable}}]),e}();o.type="event",o.cancelable=!1,t.default=o},function(e,t,n){var s=n(14);s(s.S,"Object",{create:n(40)})},function(e,t,n){n(131);var s=n(4).Object;e.exports=function(e,t){return s.create(e,t)}},function(e,t,n){e.exports={default:n(132),__esModule:!0}},function(e,t,n){var s=n(16),i=n(17),r=function(e,t){if(i(e),!s(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,s){try{(s=n(44)(Function.call,n(29).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(i){t=!0}return function(e,n){return r(e,n),t?e.__proto__=n:s(e,n),e}}({},!1):void 0),check:r}},function(e,t,n){var s=n(14);s(s.S,"Object",{setPrototypeOf:n(134).set})},function(e,t,n){n(135),e.exports=n(4).Object.setPrototypeOf},function(e,t,n){e.exports={default:n(136),__esModule:!0}},function(e,t,n){n(31)("observable")},function(e,t,n){n(31)("asyncIterator")},function(e,t){},function(e,t,n){var s=n(11),i=n(53).f,r={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==r.call(e)?function(e){try{return i(e)}catch(t){return a.slice()}}(e):i(s(e))}},function(e,t,n){var s=n(38);e.exports=Array.isArray||function(e){return"Array"==s(e)}},function(e,t,n){var s=n(39),i=n(54),r=n(30);e.exports=function(e){var t=s(e),n=i.f;if(n)for(var a,o=n(e),l=r.f,c=0;o.length>c;)l.call(e,a=o[c++])&&t.push(a);return t}},function(e,t,n){var s=n(24)("meta"),i=n(16),r=n(12),a=n(9).f,o=0,l=Object.isExtensible||function(){return!0},c=!n(23)((function(){return l(Object.preventExtensions({}))})),u=function(e){a(e,s,{value:{i:"O"+ ++o,w:{}}})},d=e.exports={KEY:s,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!r(e,s)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[s].i},getWeak:function(e,t){if(!r(e,s)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[s].w},onFreeze:function(e){return c&&d.NEED&&l(e)&&!r(e,s)&&u(e),e}}},function(e,t,n){"use strict";var s=n(10),i=n(12),r=n(13),a=n(14),o=n(58),l=n(144).KEY,c=n(23),u=n(36),d=n(34),h=n(24),p=n(6),f=n(32),m=n(31),v=n(143),b=n(142),g=n(17),y=n(16),w=n(11),_=n(43),k=n(22),C=n(40),x=n(141),j=n(29),O=n(9),S=n(39),E=j.f,T=O.f,I=x.f,D=s.Symbol,P=s.JSON,A=P&&P.stringify,N=p("_hidden"),R=p("toPrimitive"),M={}.propertyIsEnumerable,L=u("symbol-registry"),F=u("symbols"),B=u("op-symbols"),q=Object.prototype,$="function"==typeof D,U=s.QObject,z=!U||!U.prototype||!U.prototype.findChild,V=r&&c((function(){return 7!=C(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a}))?function(e,t,n){var s=E(q,t);s&&delete q[t],T(e,t,n),s&&e!==q&&T(q,t,s)}:T,H=function(e){var t=F[e]=C(D.prototype);return t._k=e,t},W=$&&"symbol"==typeof D.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof D},Q=function(e,t,n){return e===q&&Q(B,t,n),g(e),t=_(t,!0),g(n),i(F,t)?(n.enumerable?(i(e,N)&&e[N][t]&&(e[N][t]=!1),n=C(n,{enumerable:k(0,!1)})):(i(e,N)||T(e,N,k(1,{})),e[N][t]=!0),V(e,t,n)):T(e,t,n)},K=function(e,t){g(e);for(var n,s=v(t=w(t)),i=0,r=s.length;r>i;)Q(e,n=s[i++],t[n]);return e},Y=function(e){var t=M.call(this,e=_(e,!0));return!(this===q&&i(F,e)&&!i(B,e))&&(!(t||!i(this,e)||!i(F,e)||i(this,N)&&this[N][e])||t)},G=function(e,t){if(e=w(e),t=_(t,!0),e!==q||!i(F,t)||i(B,t)){var n=E(e,t);return!n||!i(F,t)||i(e,N)&&e[N][t]||(n.enumerable=!0),n}},X=function(e){for(var t,n=I(w(e)),s=[],r=0;n.length>r;)i(F,t=n[r++])||t==N||t==l||s.push(t);return s},J=function(e){for(var t,n=e===q,s=I(n?B:w(e)),r=[],a=0;s.length>a;)!i(F,t=s[a++])||n&&!i(q,t)||r.push(F[t]);return r};$||(o((D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(n){this===q&&t.call(B,n),i(this,N)&&i(this[N],e)&&(this[N][e]=!1),V(this,e,k(1,n))};return r&&z&&V(q,e,{configurable:!0,set:t}),H(e)}).prototype,"toString",(function(){return this._k})),j.f=G,O.f=Q,n(53).f=x.f=X,n(30).f=Y,n(54).f=J,r&&!n(25)&&o(q,"propertyIsEnumerable",Y,!0),f.f=function(e){return H(p(e))}),a(a.G+a.W+a.F*!$,{Symbol:D});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;Z.length>ee;)p(Z[ee++]);for(var te=S(p.store),ne=0;te.length>ne;)m(te[ne++]);a(a.S+a.F*!$,"Symbol",{for:function(e){return i(L,e+="")?L[e]:L[e]=D(e)},keyFor:function(e){if(!W(e))throw TypeError(e+" is not a symbol!");for(var t in L)if(L[t]===e)return t},useSetter:function(){z=!0},useSimple:function(){z=!1}}),a(a.S+a.F*!$,"Object",{create:function(e,t){return void 0===t?C(e):K(C(e),t)},defineProperty:Q,defineProperties:K,getOwnPropertyDescriptor:G,getOwnPropertyNames:X,getOwnPropertySymbols:J}),P&&a(a.S+a.F*(!$||c((function(){var e=D();return"[null]"!=A([e])||"{}"!=A({a:e})||"{}"!=A(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,s=[e],i=1;arguments.length>i;)s.push(arguments[i++]);if(n=t=s[1],(y(t)||void 0!==e)&&!W(e))return b(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!W(t))return t}),s[1]=t,A.apply(P,s)}}),D.prototype[R]||n(18)(D.prototype,R,D.prototype.valueOf),d(D,"Symbol"),d(Math,"Math",!0),d(s.JSON,"JSON",!0)},function(e,t,n){n(145),n(140),n(139),n(138),e.exports=n(4).Symbol},function(e,t,n){e.exports={default:n(146),__esModule:!0}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t){e.exports=function(){}},function(e,t,n){"use strict";var s=n(149),i=n(148),r=n(21),a=n(11);e.exports=n(59)(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),r.Arguments=r.Array,s("keys"),s("values"),s("entries")},function(e,t,n){n(150);for(var s=n(10),i=n(18),r=n(21),a=n(6)("toStringTag"),o="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<o.length;l++){var c=o[l],u=s[c],d=u&&u.prototype;d&&!d[a]&&i(d,a,c),r[c]=r.Array}},function(e,t,n){var s=n(10).document;e.exports=s&&s.documentElement},function(e,t,n){var s=n(42),i=Math.max,r=Math.min;e.exports=function(e,t){return(e=s(e))<0?i(e+t,0):r(e,t)}},function(e,t,n){var s=n(11),i=n(56),r=n(153);e.exports=function(e){return function(t,n,a){var o,l=s(t),c=i(l.length),u=r(a,c);if(e&&n!=n){for(;c>u;)if((o=l[u++])!=o)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}}},function(e,t,n){var s=n(38);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==s(e)?e.split(""):Object(e)}},function(e,t,n){var s=n(9),i=n(17),r=n(39);e.exports=n(13)?Object.defineProperties:function(e,t){i(e);for(var n,a=r(t),o=a.length,l=0;o>l;)s.f(e,n=a[l++],t[n]);return e}},function(e,t,n){"use strict";var s=n(40),i=n(22),r=n(34),a={};n(18)(a,n(6)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=s(a,{next:i(1,n)}),r(e,t+" Iterator")}},function(e,t,n){var s=n(42),i=n(41);e.exports=function(e){return function(t,n){var r,a,o=String(i(t)),l=s(n),c=o.length;return l<0||l>=c?e?"":void 0:(r=o.charCodeAt(l))<55296||r>56319||l+1===c||(a=o.charCodeAt(l+1))<56320||a>57343?e?o.charAt(l):r:e?o.slice(l,l+2):a-56320+(r-55296<<10)+65536}}},function(e,t,n){n(60),n(151),e.exports=n(32).f("iterator")},function(e,t,n){e.exports={default:n(159),__esModule:!0}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var s=n(14);s(s.S+s.F*!n(13),"Object",{defineProperty:n(9).f})},function(e,t,n){n(162);var s=n(4).Object;e.exports=function(e,t,n){return s.defineProperty(e,t,n)}},function(e,t,n){e.exports={default:n(163),__esModule:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DragStopEvent=t.DragPressureEvent=t.DragOutContainerEvent=t.DragOverContainerEvent=t.DragOutEvent=t.DragOverEvent=t.DragMoveEvent=t.DragStartEvent=t.DragEvent=void 0;var s=l(n(1)),i=l(n(0)),r=l(n(3)),a=l(n(2)),o=l(n(5));function l(e){return e&&e.__esModule?e:{default:e}}var c=t.DragEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"source",get:function(){return this.data.source}},{key:"originalSource",get:function(){return this.data.originalSource}},{key:"mirror",get:function(){return this.data.mirror}},{key:"sourceContainer",get:function(){return this.data.sourceContainer}},{key:"sensorEvent",get:function(){return this.data.sensorEvent}},{key:"originalEvent",get:function(){return this.sensorEvent?this.sensorEvent.originalEvent:null}}]),t}(o.default);c.type="drag";var u=t.DragStartEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(c);u.type="drag:start",u.cancelable=!0,(t.DragMoveEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(c)).type="drag:move";var d=t.DragOverEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"overContainer",get:function(){return this.data.overContainer}},{key:"over",get:function(){return this.data.over}}]),t}(c);d.type="drag:over",d.cancelable=!0,(t.DragOutEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"overContainer",get:function(){return this.data.overContainer}},{key:"over",get:function(){return this.data.over}}]),t}(c)).type="drag:out",(t.DragOverContainerEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"overContainer",get:function(){return this.data.overContainer}}]),t}(c)).type="drag:over:container",(t.DragOutContainerEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"overContainer",get:function(){return this.data.overContainer}}]),t}(c)).type="drag:out:container",(t.DragPressureEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"pressure",get:function(){return this.data.pressure}}]),t}(c)).type="drag:pressure",(t.DragStopEvent=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(c)).type="drag:stop"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Plugins=t.Sensors=t.Sortable=t.Swappable=t.Droppable=t.Draggable=t.BasePlugin=t.BaseEvent=void 0;var s=n(26);Object.defineProperty(t,"Draggable",{enumerable:!0,get:function(){return h(s).default}});var i=n(90);Object.defineProperty(t,"Droppable",{enumerable:!0,get:function(){return h(i).default}});var r=n(81);Object.defineProperty(t,"Swappable",{enumerable:!0,get:function(){return h(r).default}});var a=n(78);Object.defineProperty(t,"Sortable",{enumerable:!0,get:function(){return h(a).default}});var o=h(n(5)),l=h(n(7)),c=d(n(28)),u=d(n(75));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}t.BaseEvent=o.default,t.BasePlugin=l.default,t.Sensors=c,t.Plugins=u}])},e.exports=s()},HYBA:function(e,t,n){},HYbr:function(e,t,n){"use strict";n.d(t,"h",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return l})),n.d(t,"g",(function(){return c})),n.d(t,"i",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"c",(function(){return h})),n.d(t,"f",(function(){return p})),n.d(t,"a",(function(){return f}));n("pNMO"),n("4Brf"),n("0oug"),n("ma9I"),n("4mDm"),n("Junv"),n("+2oP"),n("07d7"),n("PKPk"),n("EnZy"),n("3bBZ");var s=n("ODXe"),i=n("1OyB"),r=n("vuIU"),a=(n("hSdx"),"skip"),o="insert",l="delete",c="saving",u=function(){function e(t){Object(i.a)(this,e),this.value=t,this.type=a}return Object(r.a)(e,[{key:"split",value:function(t){return[new e(t),new e(this.value-t)]}},{key:"clone",value:function(){return new e(this.value)}},{key:"length",get:function(){return this.value}}]),e}(),d=function(){function e(t){Object(i.a)(this,e),this.value=t,this.type=o}return Object(r.a)(e,[{key:"split",value:function(t){return[new e(this.value.substring(0,t)),new e(this.value.substring(t))]}},{key:"clone",value:function(){return new e(this.value)}},{key:"length",get:function(){return this.value.length}}]),e}(),h=function(){function e(t){Object(i.a)(this,e),this.value=t,this.type=l}return Object(r.a)(e,[{key:"split",value:function(t){return[new e(t),new e(this.value-t)]}},{key:"clone",value:function(){return new e(this.value)}},{key:"length",get:function(){return this.value}}]),e}(),p=function(){function e(t){Object(i.a)(this,e),this.ops=t||[]}return Object(r.a)(e,[{key:"lastOP",value:function(e){return this.ops.length>0&&this.ops[this.ops.length-1].type===e?this.ops[this.ops.length-1]:null}},{key:"push",value:function(e){if(0!==e.length){var t=this.lastOP(e.type);if(!t)return(t=this.lastOP(l))&&e.type===o?(this.ops.pop(),this.push(e),void this.push(t)):(this.ops.push(e.clone()),this);t.value+=e.value}}},{key:"apply",value:function(e){var t=0,n=!0,s=!1,i=void 0;try{for(var r,c=this.ops[Symbol.iterator]();!(n=(r=c.next()).done);n=!0){var u=r.value;switch(u.type){case a:t+=u.length;break;case o:e=e.slice(0,t)+u.value+e.slice(t),t+=u.length;break;case l:e=e.substring(0,t)+e.substring(t+u.length)}}}catch(d){s=!0,i=d}finally{try{n||null==c.return||c.return()}finally{if(s)throw i}}return e}},{key:"applyMarker",value:function(e){var t=0,n=0,s=0,i=!1,r=!0,c=!1,u=void 0;try{for(var d,h=this.ops[Symbol.iterator]();!(r=(d=h.next()).done);r=!0){var p=d.value;switch(p.type){case a:if(t+p.length>e){i=!0;break}t+=p.length;break;case o:if(t>=e){i=!0;break}n+=p.length;break;case l:if(t+p.length>e){i=!0;break}t+=p.length,s+=p.length}if(i)break}}catch(f){c=!0,u=f}finally{try{r||null==h.return||h.return()}finally{if(c)throw u}}return Math.max(0,e+n-s)}},{key:"applyCursor",value:function(e){return{start:this.applyMarker(e.start),end:this.applyMarker(e.end)}}},{key:"clone",value:function(){var t=new e,n=!0,s=!1,i=void 0;try{for(var r,c=this.ops[Symbol.iterator]();!(n=(r=c.next()).done);n=!0){var p=r.value;switch(p.type){case a:t.push(new u(p.value));break;case o:t.push(new d(p.value));break;case l:t.push(new h(p.value))}}}catch(f){s=!0,i=f}finally{try{n||null==c.return||c.return()}finally{if(s)throw i}}return t}},{key:"isNOP",value:function(){var e=!0,t=!1,n=void 0;try{for(var s,i=this.ops[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){if(s.value.type!==a)return!1}}catch(r){t=!0,n=r}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}return!0}},{key:"simpleType",value:function(){var e=a,t=!0,n=!1,s=void 0;try{for(var i,r=this.ops[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var o=i.value;if(o.type!==e){if(e!==a)return null;e=o.type}}}catch(l){n=!0,s=l}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}return e}},{key:"length",get:function(){return this.ops.length}},{key:"show",get:function(){var e="[ ",t=!0,n=!0,s=!1,i=void 0;try{for(var r,c=this.ops[Symbol.iterator]();!(n=(r=c.next()).done);n=!0){var u=r.value;switch(t?t=!1:e+=", ",u.type){case a:e+="skip "+u.value;break;case o:e+='insert "'+u.value+'"';break;case l:e+="delete "+u.value}}}catch(d){s=!0,i=d}finally{try{n||null==c.return||c.return()}finally{if(s)throw i}}return e+" ]"}}],[{key:"fromJSON",value:function(t){var n=new e,s=!0,i=!1,r=void 0;try{for(var c,p=t[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var f=c.value;switch(f.type){case a:n.push(new u(f.value));break;case o:n.push(new d(f.value));break;case l:n.push(new h(f.value))}}}catch(m){i=!0,r=m}finally{try{s||null==p.return||p.return()}finally{if(i)throw r}}return n}},{key:"transform",value:function(t,n){t=t.clone().ops,n=n.clone().ops;for(var i=new e,r=new e,c=[0],d=[0];c[0]<t.length||d[0]<n.length;)if(c[0]===t.length&&t.push(new u(n[d[0]].length)),d[0]===n.length&&n.push(new u(t[c[0]].length)),0!==t[c[0]].length&&0!==n[d[0]].length){var h=n[d[0]].length-t[c[0]].length;if(n[d[0]].type!==o)if(t[c[0]].type!==o){var p=void 0,f=void 0,m=void 0,v=void 0,b=void 0,g=void 0;h>0?(b=n,g=t,p=r,f=i,m=d,v=c):(b=t,g=n,p=i,f=r,m=c,v=d);var y=b[m[0]].split(g[v[0]].length),w=Object(s.a)(y,2),_=w[0],k=w[1];n[d[0]].type===l&&t[c[0]].type===l||(n[d[0]].type===a&&t[c[0]].type===a?(f.push(_),p.push(_)):b[m[0]].type===a?f.push(g[v[0]]):p.push(_)),b[m[0]]=k,v[0]++}else i.push(t[c[0]]),r.push(new u(t[c[0]].length)),c[0]++;else i.push(new u(n[d[0]].length)),r.push(n[d[0]]),d[0]++}else 0===t[c[0]].length&&c[0]++,0===n[d[0]].length&&d[0]++;return[i,r]}},{key:"compose",value:function(t,n){t=t.clone().ops,n=n.clone().ops;for(var i=new e,r=[0],c=[0];r[0]<t.length||c[0]<n.length;)if(r[0]===t.length&&t.push(new u(n[c[0]].length)),c[0]===n.length&&n.push(new u(t[r[0]].length)),0!==t[r[0]].length&&0!==n[c[0]].length)if(t[r[0]].type!==l)if(n[c[0]].type!==o){var d=void 0,h=void 0,p=void 0,f=void 0;n[c[0]].length-t[r[0]].length>0?(p=n,f=t,d=c,h=r):(p=t,f=n,d=r,h=c);var m=p[d[0]].split(f[h[0]].length),v=Object(s.a)(m,2),b=v[0],g=v[1];if(t[r[0]].type===a&&n[c[0]].type===a)i.push(b);else if(t[r[0]].type===a&&n[c[0]].type===l)p[d[0]].type===a?i.push(f[h[0]]):i.push(b);else if(t[r[0]].type===o&&n[c[0]].type===a)p[d[0]].type===o?i.push(b):i.push(f[h[0]]);else if(t[r[0]].type!==o||n[c[0]].type!==l)throw"This should never happen";p[d[0]]=g,h[0]++}else i.push(n[c[0]]),c[0]++;else i.push(t[r[0]]),r[0]++;else 0===t[r[0]].length&&r[0]++,0===n[c[0]].length&&c[0]++;return i}},{key:"invert",value:function(t,n){var s=new e,i=0,r=!0,c=!1,p=void 0;try{for(var f,m=t.ops[Symbol.iterator]();!(r=(f=m.next()).done);r=!0){var v=f.value;switch(v.type){case a:s.push(new u(v.value)),i+=v.length;break;case o:s.push(new h(v.length));break;case l:s.push(new d(n.slice(i,i+v.length))),i+=v.length}}}catch(b){c=!0,p=b}finally{try{r||null==m.return||m.return()}finally{if(c)throw p}}return s}}]),e}(),f=function(){function e(t,n,s,r,a){Object(i.a)(this,e),this.id=t,this.rev=n,this.send=s,this.sendCursor=r,this.apply=a,this.sent=null,this.pending=new p,this.udm=new m}return Object(r.a)(e,[{key:"trySend",value:function(){null===this.sent&&(this.pending.isNOP()||(this.sent=this.pending,this.pending=new p,this.send(this.sent,this.rev)))}},{key:"trySendCursor",value:function(){this.pending.isNOP()&&this.sendCursor(this.rev)}},{key:"applyClient",value:function(e,t,n,s){this.applyClientInternal(e),this.udm.applyLocal(t,s,n,"")}},{key:"applyClientInternal",value:function(e){this.pending=p.compose(this.pending,e),this.trySend()}},{key:"applyClientCursor",value:function(){this.trySendCursor()}},{key:"applyServer",value:function(e,t,n){if(this.rev=t,n===this.id)return this.sent=null,void this.trySend();if(this.udm.applyRemote(e),null!==this.sent){0;var i=p.transform(this.sent,e),r=Object(s.a)(i,2);this.sent=r[0],e=r[1]}if(!this.pending.isNOP()){0;var a=p.transform(this.pending,e),o=Object(s.a)(a,2);this.pending=o[0],e=o[1]}this.apply(e,{scroll:!1})}},{key:"applyServerCursor",value:function(e){return this.pending.applyCursor(e)}},{key:"applyUnRedo",value:function(e){0}},{key:"undo",value:function(){var e=this.udm.undo();if(e){var t=this.apply(e.op,{cursor:e.after});this.applyClientInternal(e.op),this.udm.applyLocal(t,e.after,e.before,"undoing")}}},{key:"redo",value:function(){var e=this.udm.redo();if(e){var t=this.apply(e.op,{cursor:e.after});this.applyClientInternal(e.op),this.udm.applyLocal(t,e.after,e.before,"redoing")}}},{key:"status",value:function(){return this.pending.isNOP()&&null===this.sent?"saved":c}}]),e}(),m=function(){function e(){Object(i.a)(this,e),this.maxUndos=50,this.undoStack=[],this.redoStack=[]}return Object(r.a)(e,[{key:"applyStack",value:function(e,t){for(var n=[];e.length>0;){var i=e.pop();i.before=t.applyCursor(i.before),i.after=t.applyCursor(i.after);var r=p.transform(i.op,t),a=Object(s.a)(r,2);i.op=a[0],t=a[1],i.op.isNOP()||n.push(i)}return n.reverse(),n}},{key:"shouldCompose",value:function(e,t){return!(!e.op.isNOP()&&!t.isNOP())||e.op.simpleType()===t.simpleType()&&!((new Date).getTime()-e.ts>1e3)}},{key:"applyLocal",value:function(e,t,n,s){if(""===s){if(0!==this.undoStack.length){var i=this.undoStack[this.undoStack.length-1];this.shouldCompose(i,e)?(i.op=p.compose(e,i.op),i.before=t):this.undoStack.push({ts:(new Date).getTime(),op:e,before:t,after:n})}else this.undoStack.push({ts:(new Date).getTime(),op:e,before:t,after:n});this.undoStack.length>this.maxUndos&&this.undoStack.shift(),this.redoStack=[]}else"undoing"===s?this.redoStack.push({ts:(new Date).getTime(),op:e,before:t,after:n}):"redoing"===s&&this.undoStack.push({ts:(new Date).getTime(),op:e,before:t,after:n})}},{key:"applyRemote",value:function(e){this.undoStack=this.applyStack(this.undoStack,e),this.redoStack=this.applyStack(this.redoStack,e)}},{key:"undo",value:function(){if(0!==this.undoStack.length)return this.undoStack.pop()}},{key:"redo",value:function(){if(0!==this.redoStack.length)return this.redoStack.pop()}}]),e}()},HYmm:function(e,t,n){"use strict";n("pNMO"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("rePB"),i=n("L2JU"),r=n("Pa8A"),a=n("oNMn");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var l={directives:{Tooltip:r.a},props:{object:{type:Object,required:!0},popup:{type:Boolean,default:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(i.c)(["isAdmin","getUserTutorials","userTutorialsVisible"]),{},Object(i.c)("discuss",["getThreadUserDisplayName"])),render:function(e){var t=this.object,n=this.popup,s=this.isAdmin,i=this.getUserTutorials,r=this.userTutorialsVisible,o=this.getThreadUserDisplayName,l=[];if(t.is_anonymous&&t.user&&!s){var c=t.user.name;if(r){var u=i(t.user);u.length&&(c+=" (".concat(u.join(", "),")"))}l.push({name:"tooltip",value:c})}var d=t.user,h=s&&n&&null!=d,p=function(n){return e("span",{directives:l,style:h?"cursor: pointer":void 0,on:n},o(t))};return h?e(a.a,{props:{userId:d.id},scopedSlots:{default:function(e){var t=e.mouseEnter,n=e.mouseLeave,s=e.show;return p({mouseenter:t,mouseleave:n,mousedown:function(e){e.preventDefault()},click:function(e){e.preventDefault(),s()}})}}}):p()}},c=n("KHd+"),u=Object(c.a)(l,void 0,void 0,!1,null,null,null);t.a=u.exports},HazA:function(e,t,n){},Hf3e:function(e,t,n){},HfRV:function(e,t,n){"use strict";var s=n("IM08");n.n(s).a},Hmws:function(e,t,n){},HuLN:function(e,t,n){},I0ji:function(e,t,n){},I8gq:function(e,t,n){"use strict";var s=n("HBqu");n.n(s).a},I999:function(e,t,n){},IC9O:function(e,t,n){},ICiq:function(e,t,n){"use strict";var s=n("GaY9");n.n(s).a},IHIm:function(e,t,n){},IL6b:function(e,t,n){},IM08:function(e,t,n){},IMBn:function(e,t,n){"use strict";var s=n("8iA0");n.n(s).a},ITSU:function(e,t,n){"use strict";var s=n("jstb");n.n(s).a},IYXS:function(e,t,n){"use strict";var s=n("8IVR");n.n(s).a},IbLZ:function(e,t,n){"use strict";var s={props:{labelFor:{type:String,default:void 0}}},i=(n("SLNV"),n("KHd+")),r=Object(i.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ed-field"},[e.$scopedSlots.label?n("label",{staticClass:"ed-field-label",attrs:{for:e.labelFor}},[e._t("label")],2):e._e(),e._v(" "),e.$scopedSlots.description?n("div",{staticClass:"ed-field-description"},[e._t("description")],2):e._e(),e._v(" "),e._t("default")],2)}),[],!1,null,null,null);t.a=r.exports},If1c:function(e,t,n){"use strict";var s=n("EFME");n.n(s).a},IgPd:function(e,t,n){"use strict";var s=n("ZVif");n.n(s).a},IhPy:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("x0AG"),n("4mDm"),n("2B1R"),n("pDQq"),n("Tskq"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("PKPk"),n("FZtP"),n("3bBZ");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("L2JU"),l=n("Pa8A"),c=n("dd2Y"),u=n("6Voy"),d=n("Oshs"),h=n("9wdi"),p=n("N+Un"),f=n("0Tba"),m=n("OBDa"),v=n("Edju"),b=n("TdcQ"),g=n("4cYw"),y=n("xtk+"),w=n("4K9I"),_=n("E2AO").a.byQuizType.get("quiz").map((function(e){return{type:e.type,label:e.humanized}})),k={components:{DialogLayout:m.a,FormLayout:v.a,FormLayoutRow:b.a,EdSelect:g.a,EdInput:y.a,EdButton:w.a},data:function(){return{typeOptions:_,type:_[0].type,quantity:"1"}},methods:{onSubmit:function(){this.$emit("done",{type:this.type,quantity:+this.quantity})}}},C=(n("uZsG"),n("KHd+")),x=Object(C.a)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogLayout",{staticClass:"quiz-sheet-new-questions",attrs:{title:"New Questions",subtitle:"Create one or more questions of the same type in bulk."},on:{submit:e.onSubmit},scopedSlots:e._u([{key:"primaryActions",fn:function(){return[n("EdButton",{staticClass:"primary",attrs:{type:"submit"}},[e._v("Create")])]},proxy:!0}])},[n("div",{staticClass:"qsnq-content"},[n("FormLayout",{staticClass:"qsnq-layout"},[n("FormLayoutRow",{attrs:{label:"Type"}},[n("EdSelect",{staticClass:"qsnq-select",model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.typeOptions,(function(t){return n("option",{key:t.type,domProps:{value:t.type}},[e._v("\n\t\t\t\t\t\t"+e._s(t.label)+"\n\t\t\t\t\t")])})),0)],1),e._v(" "),n("FormLayoutRow",{attrs:{label:"Quantity"}},[n("EdInput",{model:{value:e.quantity,callback:function(t){e.quantity=t},expression:"quantity"}})],1)],1)],1)])}),[],!1,null,null,null).exports,j=n("/Yj0"),O=n("5/Cn");function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var E,T,I,D,P={directives:{Tooltip:l.a},components:{QuizQuestionEditItem:c.a,QuizElementAction:u.a,SheetContainer:d.a,Actionbar:h.a,ActionbarAction:p.a,QuizQuestionFilter:f.a},inject:["quizQuestionBankApi","keyboardShortcutManager"],data:function(){return{loading:!1,questions:null,models:null,questionEditing:null,filteredQuestions:[]}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.e)(["course"]),{filteredQuestionsMap:function(){return new Map(this.filteredQuestions.map((function(e){return[e.id,e]})))},computedItems:function(){var e=this;return this.models.map((function(t){return{question:t,cssClass:{disabled:e.questionEditing&&e.questionEditing.id!==t.id},editable:e.questionEditing&&e.questionEditing.id===t.id,disabled:e.questionEditing&&e.questionEditing.id!==t.id}}))},filteredComputedItems:function(){var e=this;return this.computedItems.filter((function(t){return e.filteredQuestionsMap.has(t.question.id)}))}}),created:function(){this.disposable=this.keyboardShortcutManager.register({default:"Control+s",mac:"Meta+s"},this.handleKeyboardShortcutSave,{description:"Save question"}),this.update()},destroyed:function(){this.disposable.dispose()},methods:{update:(D=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.quizQuestionBankApi.getCourseQuestions(this.course.id);case 4:this.questions=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),j.b({type:"error",text:"Unable to fetch questions."}),e.abrupt("return");case 11:return e.prev=11,this.loading=!1,e.finish(11);case 14:this.createModels();case 15:case"end":return e.stop()}}),e,this,[[1,7,11,14]])}))),function(){return D.apply(this,arguments)}),createModels:function(){this.models=this.questions.map((function(e){return e.clone()}))},showNewQuestionsSheet:function(){var e=this;this.$refs.sheetContainer.showSheet(x,(function(t){e.$refs.sheetContainer.closeSheet(),e.$router.push({name:"sway-questions-bulk-edit",query:{type:t.type,quantity:t.quantity}})}))},editQuestion:function(e){this.questionEditing=e},saveQuestion:(I=Object(r.a)(i.a.mark((function e(t){var n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.quizQuestionBankApi.updateQuestion(t);case 3:n=e.sent,e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),j.b({type:"error",text:"Unable to save question."}),e.abrupt("return");case 10:-1!==(s=this.questions.findIndex((function(e){return e.id===t.id})))&&(this.questions.splice(s,1,n),this.questionEditing&&this.questionEditing.id===t.id&&(this.questionEditing=null,this.createModels()));case 12:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(e){return I.apply(this,arguments)}),cancelQuestionEdit:function(){this.questionEditing=null,this.createModels()},destroyQuestion:(T=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.b({icon:"warning",title:"Delete question?",text:"This cannot be undone.",primaryAction:"Delete"});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return this.loading=!0,e.prev=5,e.next=8,this.quizQuestionBankApi.deleteQuestion(t.id);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(5),j.b({type:"error",text:"Unable to delete question."}),e.abrupt("return");case 14:return e.prev=14,this.loading=!1,e.finish(14);case 17:j.b({type:"success",text:"Question deleted."}),this.questions=this.questions.filter((function(e){return e.id!==t.id})),this.createModels();case 20:case"end":return e.stop()}}),e,this,[[5,10,14,17]])}))),function(e){return T.apply(this,arguments)}),duplicateQuestion:(E=Object(r.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.quizQuestionBankApi.createQuestion(t);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),j.b({type:"error",text:"Unable to duplicate question."}),e.abrupt("return");case 11:return e.prev=11,this.loading=!1,e.finish(11);case 14:j.b({type:"success",text:"Question duplicated."}),this.questions.push(n),this.createModels();case 17:case"end":return e.stop()}}),e,this,[[1,7,11,14]])}))),function(e){return E.apply(this,arguments)}),handleKeyboardShortcutSave:function(){this.questionEditing&&this.saveQuestion(this.questionEditing)}}},A=(n("P9T5"),Object(C.a)(P,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.questions?n("div",{staticClass:"quiz-question-bank-index"},[n("section",{staticClass:"qqbi-actionbar"},[n("div",{staticClass:"qqbi-container"},[n("Actionbar",{scopedSlots:e._u([{key:"primary",fn:function(){return[n("ActionbarAction",{attrs:{icon:"plus"},on:{click:e.showNewQuestionsSheet}},[e._v("New")])]},proxy:!0}],null,!1,1780715518)})],1)]),e._v(" "),n("div",{staticClass:"qqbi-container"},[n("div",{staticClass:"qqbi-layout"},[n("div",{staticClass:"qqbi-layout-filter"},[n("QuizQuestionFilter",{attrs:{questions:e.questions,disabled:e.loading},on:{filtered:function(t){e.filteredQuestions=t}}})],1),e._v(" "),n("div",{staticClass:"qqbi-layout-items"},[e.filteredComputedItems.length?e._e():n("div",{staticClass:"qqbi-no-questions"},[e._v("No questions")]),e._v(" "),e._l(e.filteredComputedItems,(function(t){return n("QuizQuestionEditItem",{key:t.question.id,staticClass:"qqbi-question",class:t.cssClass,attrs:{value:t.question,editable:t.editable,disabled:t.disabled,"show-buttons":""},on:{edit:function(n){return e.editQuestion(t.question)},save:function(n){return e.saveQuestion(t.question)},cancel:e.cancelQuestionEdit},scopedSlots:e._u([{key:"actions",fn:function(){return[n("QuizElementAction",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Delete",expression:"'Delete'"}],attrs:{icon:"clear",disabled:!!e.questionEditing},on:{click:function(n){return e.destroyQuestion(t.question)}}}),e._v(" "),n("QuizElementAction",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Duplicate",expression:"'Duplicate'"}],attrs:{icon:"copy",disabled:!!e.questionEditing},on:{click:function(n){return e.duplicateQuestion(t.question)}}})]},proxy:!0}],null,!0)})}))],2)])]),e._v(" "),n("SheetContainer",{ref:"sheetContainer",staticClass:"qqbi-sheet-container"})],1):e._e()}),[],!1,null,null,null));t.default=A.exports},Ii1I:function(e,t,n){},IiKz:function(e,t,n){},Io6r:function(e,t,n){},J5OO:function(e,t,n){"use strict";var s=n("aG81");n.n(s).a},J7ee:function(e,t,n){},"J8C/":function(e,t,n){},J9P4:function(e,t,n){"use strict";var s=n("gkPM");n.n(s).a},JBdv:function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("0oug"),n("4mDm"),n("Tskq"),n("qePV"),n("07d7"),n("YGK4"),n("PKPk"),n("3bBZ");var s=n("1OyB"),i=n("vuIU"),r=n("wd/R"),a=n.n(r),o=new Set(["fromNow","fromNowShort","calendar"]),l=new Set(["fromNow","fromNowShort"]),c=new Map([["full","dddd, MMMM Do YYYY, h:mm:ss a"],["compact","D/M/YYYY h:mm a"],["time","h:mm A"]]),u=new(function(){function e(){Object(s.a)(this,e),this.interval=null,this.comps=new Set}return Object(i.a)(e,[{key:"start",value:function(){var e=this;null===this.interval&&(this.interval=setInterval((function(){return e.update()}),6e4))}},{key:"stop",value:function(){null!==this.interval&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(){var e=!0,t=!1,n=void 0;try{for(var s,i=this.comps[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){s.value.trigger^=1}}catch(r){t=!0,n=r}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"register",value:function(e){this.comps.add(e),this.comps.size&&this.start()}},{key:"deregister",value:function(e){this.comps.delete(e),this.comps.size||this.stop()}}]),e}()),d={props:{date:{type:[String,Object,Date,Number],default:null},format:{type:String,default:"full"}},data:function(){return{trigger:0}},computed:{computedDate:function(){return a()(this.date)},relative:function(){return l.has(this.format)},display:function(){this.trigger;var e=this.computedDate,t=this.format;if(o.has(t)&&new Date-e<5e3)return"calendar"===t?"Now":"now";switch(t){case"fromNow":return e.fromNow();case"fromNowShort":return a()(e).locale("en-short").fromNow();case"calendar":return e.calendar();default:var n=c.get(t);return e.format(n||t)}},title:function(){return this.computedDate.format(c.get("full"))}},watch:{relative:{immediate:!0,handler:function(e){e?u.register(this):u.deregister(this)}}},destroyed:function(){u.deregister(this)},render:function(){var e=arguments[0],t=this.display,n=this.title,s=this.$scopedSlots.default,i=s?s({text:t}):t;return e("span",{attrs:{title:n}},[i])}},h=n("KHd+"),p=Object(h.a)(d,void 0,void 0,!1,null,null,null);t.a=p.exports},JEQC:function(e,t,n){},JF25:function(e,t,n){"use strict";var s=n("vjDR");n.n(s).a},JLXm:function(e,t,n){},JNyK:function(e,t,n){"use strict";var s=n("P2Tp");n.n(s).a},"JO+Q":function(e,t,n){"use strict";n("pNMO"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("rePB"),i=n("L2JU");function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var a={components:{EdButton:n("4K9I").a},props:{disabled:{type:Boolean,default:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(i.e)(["course"]),{subheading:function(){return[this.course.year,this.course.session].filter(Boolean).join(", ")}})},o=(n("zL/o"),n("KHd+")),l=Object(o.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"admin-detail-header"},[n("div",{staticClass:"adh-body"},[n("h1",{staticClass:"adh-heading"},[e._v(e._s(e.course.code)+" – "+e._s(e.course.name))]),e._v(" "),n("h2",{staticClass:"adh-subheading"},[e._v(e._s(e.subheading))])]),e._v(" "),n("EdButton",{staticClass:"primary adh-save",attrs:{disabled:e.disabled},on:{click:function(t){return e.$emit("save")}}},[e._v("\n\t\tSave\n\t")])],1)}),[],!1,null,null,null);t.a=l.exports},JQ9H:function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("TeQF"),n("fbCW"),n("4mDm"),n("2B1R"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("SYor"),n("FZtP"),n("3bBZ");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("ODXe"),l=n("KQm4"),c=n("L2JU"),u=n("OBDa"),d=n("4K9I"),h=n("4cYw"),p=n("xtk+"),f=n("NC1X"),m=n("4PS8"),v=n("/Yj0");function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var g,y,w,_,k={components:{DialogLayout:u.a,EdButton:d.a,EdSelect:h.a,EdInput:p.a,Spinner:f.a},props:{workspace:{type:Object,default:null}},inject:["workspaceApi"],data:function(){return{title:"",type:"",types:Object(l.a)(m.f.entries()).map((function(e){var t=Object(o.a)(e,2);return{type:t[0],label:t[1]}})),images:[],imageId:null,loadingImages:!1,loadingSave:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(c.e)(["course"]),{editing:function(){return!!this.workspace},typeDescription:function(){switch(this.type){case"jupyter":return"A simplified user interface suitable for Jupyter will be used.";case"rstudio":return"A simplified user interface suitable for RStudio will be used."}},imageDescription:function(){var e=this;return this.imageId?this.images.find((function(t){return t.id===e.imageId})).description:"The default image provides all of the programs that you require for a general-purpose workspace."},loading:function(){return this.loadingImages||this.loadingSave}}),watch:{workspace:{immediate:!0,handler:function(e){e&&(this.title=e.title,this.type=e.type)}}},mounted:(_=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.editing){e.next=3;break}return e.next=3,this.loadImages();case 3:return e.next=5,this.$nextTick();case 5:this.$refs.title.$el.select();case 6:case"end":return e.stop()}}),e,this)}))),function(){return _.apply(this,arguments)}),methods:{loadImages:(w=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingImages=!0,e.prev=1,e.next=4,this.workspaceApi.getCourseWorkspaceImages(this.course.id);case 4:this.images=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),v.b({type:"error",text:"Unable to download list of workspace images."}),e.abrupt("return");case 11:return e.prev=11,this.loadingImages=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[1,7,11,14]])}))),function(){return w.apply(this,arguments)}),submit:function(){if(!this.loading){if(this.title=this.title.trim(),!this.title)return v.b({type:"error",text:"Enter a title for the workspace."}),void this.$refs.title.$el.focus();this.editing?this.updateWorkspace():this.createWorkspace()}},createWorkspace:(y=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingSave=!0,e.prev=1,e.next=4,this.workspaceApi.createWorkspace(this.course.id,{title:this.title,type:this.type,imageId:this.imageId});case 4:t=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),v.b({type:"error",text:"Unable to create workspace."}),e.abrupt("return");case 11:return e.prev=11,this.loadingSave=!1,e.finish(11);case 14:v.b({type:"success",text:"Created workspace successfully."}),this.$emit("done",t);case 16:case"end":return e.stop()}}),e,this,[[1,7,11,14]])}))),function(){return y.apply(this,arguments)}),updateWorkspace:(g=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingSave=!0,e.prev=1,e.next=4,this.workspaceApi.updateWorkspace(this.workspace.id,{title:this.title,type:this.type});case 4:t=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),v.b({type:"error",text:"Unable to update workspace."}),e.abrupt("return");case 11:return e.prev=11,this.loadingSave=!1,e.finish(11);case 14:v.b({type:"success",text:"Updated workspace successfully."}),this.$emit("done",t);case 16:case"end":return e.stop()}}),e,this,[[1,7,11,14]])}))),function(){return g.apply(this,arguments)}),cancel:function(){this.$emit("done",null)}}},C=(n("8KYk"),n("KHd+")),x=Object(C.a)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogLayout",{attrs:{title:e.editing?"Edit Workspace":"New Workspace"},on:{submit:e.submit},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancel(t)}},scopedSlots:e._u([{key:"primaryActions",fn:function(){return[e.loading?n("Spinner",{staticClass:"wsse-spinner"}):e._e(),e._v(" "),n("EdButton",{staticClass:"primary",attrs:{type:"submit",disabled:e.loading}},[e._v(e._s(e.editing?"Save":"Create"))])]},proxy:!0}])},[n("table",{staticClass:"wsse-layout",attrs:{role:"presentation"}},[n("tr",[n("td",[e._v("Title")]),e._v(" "),n("td",[n("EdInput",{ref:"title",attrs:{disabled:e.loading},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1)]),e._v(" "),n("tr",[n("td",[e._v("Type")]),e._v(" "),n("td",[n("EdSelect",{attrs:{disabled:e.loading},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.types,(function(t){return n("option",{key:t.type,domProps:{value:t.type}},[e._v(e._s(t.label))])})),0)],1)]),e._v(" "),e.typeDescription?n("tr",[n("td"),e._v(" "),n("td",{staticClass:"wsse-layout-description"},[e._v(e._s(e.typeDescription))])]):e._e(),e._v(" "),!e.editing&&e.images.length?[n("tr",[n("td",[e._v("Image")]),e._v(" "),n("td",[n("EdSelect",{attrs:{disabled:e.loading},model:{value:e.imageId,callback:function(t){e.imageId=t},expression:"imageId"}},[n("option",{domProps:{value:null}},[e._v("Default (recommended)")]),e._v(" "),e._l(e.images,(function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}))],2)],1)]),e._v(" "),n("tr",[n("td"),e._v(" "),n("td",{staticClass:"wsse-layout-description"},[e._v(e._s(e.imageDescription))])])]:e._e()],2)])}),[],!1,null,null,null);t.a=x.exports},JQId:function(e,t,n){"use strict";n("ma9I"),n("fbCW"),n("qePV");var s=n("KQm4"),i=n("7W7u");t.a={props:{imageUrl:{type:String,default:void 0},imageWidth:{type:Number,default:1},imageHeight:{type:Number,default:1},readonly:{type:Boolean,default:!1},overlay:{type:Boolean,default:!1}},data:function(){return{pointerCaptured:!1}},computed:{aspectRatio:function(){return this.imageWidth/this.imageHeight},width:function(){return this.aspectRatio>1?100:100*this.aspectRatio},height:function(){return this.aspectRatio>1?100/this.aspectRatio:100},viewBox:function(){return"0 0 ".concat(this.width," ").concat(this.height)},style:function(){return{maxWidth:this.imageWidth+"px",maxHeight:this.imageHeight+"px"}}},mounted:function(){this.onKeyDown=this.onKeyDown.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.$refs.svg.addEventListener("mousedown",this.onMouseDown),this.$refs.svg.addEventListener("touchstart",this.onTouchStart),document.addEventListener("keydown",this.onKeyDown)},destroyed:function(){this.releaseCapture(),document.removeEventListener("keydown",this.onKeyDown)},methods:{eventToCanvasCoord:function(e){var t=this.$refs.svg.getBoundingClientRect();return{x:Math.max(0,Math.min(this.width,(e.clientX-t.left)/t.width*this.width)),y:Math.max(0,Math.min(this.height,(e.clientY-t.top)/t.height*this.height))}},releaseCapture:function(){this.releaseMouse(),this.releaseTouch()},onKeyDown:function(e){this.onPointerCancel&&this.pointerCaptured&&("Escape"===e.key||"Enter"===e.key)&&this.onPointerCancel()},releaseMouse:function(){this.pointerCaptured=!1,document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)},onMouseDown:function(e){if(!this.readonly&&!i.c(e)&&e.button===i.a&&(e.preventDefault(),this.releaseMouse(),this.pointerCaptured=!0,document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp),this.onPointerDown)){var t=this.eventToCanvasCoord(e);this.onPointerDown(t.x,t.y)}},onMouseUp:function(e){if(!i.c(e)&&e.button===i.a&&(e.preventDefault(),this.onPointerUp)){var t=this.eventToCanvasCoord(e);this.onPointerUp(t.x,t.y)}},onMouseMove:function(e){if(e.preventDefault(),this.onPointerMove){var t=this.eventToCanvasCoord(e);this.onPointerMove(t.x,t.y)}},releaseTouch:function(){this.pointerCaptured=!1,this.touchId=null,document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd),document.removeEventListener("touchcancel",this.onTouchEnd)},onTouchStart:function(e){if(!this.readonly){e.preventDefault(),this.releaseTouch(),this.pointerCaptured=!0,document.addEventListener("touchmove",this.onTouchMove),document.addEventListener("touchend",this.onTouchEnd),document.addEventListener("touchcancel",this.onTouchEnd);var t=e.changedTouches[0];this.touchId=t.identifier;var n=this.eventToCanvasCoord(t);this.onPointerDown(n.x,n.y)}},onTouchEnd:function(e){var t=this,n=Object(s.a)(e.changedTouches).find((function(e){return e.identifier===t.touchId}));if(n){e.preventDefault();var i=this.eventToCanvasCoord(n);this.onPointerUp(i.x,i.y)}},onTouchMove:function(e){var t=this,n=Object(s.a)(e.changedTouches).find((function(e){return e.identifier===t.touchId}));if(n){e.preventDefault();var i=this.eventToCanvasCoord(n);this.onPointerMove(i.x,i.y)}}}}},JRR8:function(e,t,n){},JX5o:function(e,t,n){},Jd7D:function(e,t,n){"use strict";var s=n("Rr6j");n.n(s).a},JevA:function(e,t,n){var s=n("I+eb"),i=n("5YOQ");s({target:"Number",stat:!0,forced:Number.parseInt!=i},{parseInt:i})},Jjot:function(e,t,n){},Jo1o:function(e,t,n){},"K+U5":function(e,t,n){"use strict";var s=n("ym5W");n.n(s).a},"K+w4":function(e,t,n){"use strict";var s=n("sdmS");n.n(s).a},K24h:function(e,t,n){"use strict";var s=n("DzJC"),i=n.n(s),r=n("9Arg"),a={created:function(){this.trigger=i()(this.trigger,100)},mounted:function(){this.scrollEl=r.o(this.$el)||document.documentElement;var e=this.scrollEl===document.documentElement?window:this.scrollEl;this.scrollDisposable=r.f(e,"scroll",this.onScroll)},destroyed:function(){this.scrollDisposable&&this.scrollDisposable.dispose()},methods:{trigger:function(){this.scrollEl.scrollTop+this.scrollEl.clientHeight>this.scrollEl.scrollHeight-300&&this.$emit("trigger")},onScroll:function(){this.trigger()}},render:function(){return this.$scopedSlots.default?this.$scopedSlots.default()[0]:void 0}},o=n("KHd+"),l=Object(o.a)(a,void 0,void 0,!1,null,null,null);t.a=l.exports},K4iU:function(e,t,n){},K4j9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,i=(s=n("Kw5r"))&&"object"==typeof s&&"default"in s?s.default:s;function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o="undefined"!=typeof window;function l(e,t){return t.reduce((function(t,n){return e.hasOwnProperty(n)&&(t[n]=e[n]),t}),{})}var c={},u={},d={},h=new(i.extend({data:function(){return{transports:c,targets:u,sources:d,trackInstances:o}},methods:{open:function(e){if(o){var t=e.to,n=e.from,s=e.passengers,a=e.order,l=void 0===a?1/0:a;if(t&&n&&s){var c,u={to:t,from:n,passengers:(c=s,Array.isArray(c)||"object"===r(c)?Object.freeze(c):c),order:l};-1===Object.keys(this.transports).indexOf(t)&&i.set(this.transports,t,[]);var d,h=this.$_getTransportIndex(u),p=this.transports[t].slice(0);-1===h?p.push(u):p[h]=u,this.transports[t]=(d=function(e,t){return e.order-t.order},p.map((function(e,t){return[t,e]})).sort((function(e,t){return d(e[1],t[1])||e[0]-t[0]})).map((function(e){return e[1]})))}}},close:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.to,s=e.from;if(n&&(s||!1!==t)&&this.transports[n])if(t)this.transports[n]=[];else{var i=this.$_getTransportIndex(e);if(i>=0){var r=this.transports[n].slice(0);r.splice(i,1),this.transports[n]=r}}},registerTarget:function(e,t,n){o&&(this.trackInstances&&!n&&this.targets[e]&&console.warn("[portal-vue]: Target ".concat(e," already exists")),this.$set(this.targets,e,Object.freeze([t])))},unregisterTarget:function(e){this.$delete(this.targets,e)},registerSource:function(e,t,n){o&&(this.trackInstances&&!n&&this.sources[e]&&console.warn("[portal-vue]: source ".concat(e," already exists")),this.$set(this.sources,e,Object.freeze([t])))},unregisterSource:function(e){this.$delete(this.sources,e)},hasTarget:function(e){return!(!this.targets[e]||!this.targets[e][0])},hasSource:function(e){return!(!this.sources[e]||!this.sources[e][0])},hasContentFor:function(e){return!!this.transports[e]&&!!this.transports[e].length},$_getTransportIndex:function(e){var t=e.to,n=e.from;for(var s in this.transports[t])if(this.transports[t][s].from===n)return+s;return-1}}}))(c),p=1,f=i.extend({name:"portal",props:{disabled:{type:Boolean},name:{type:String,default:function(){return String(p++)}},order:{type:Number,default:0},slim:{type:Boolean},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"DIV"},to:{type:String,default:function(){return String(Math.round(1e7*Math.random()))}}},created:function(){var e=this;this.$nextTick((function(){h.registerSource(e.name,e)}))},mounted:function(){this.disabled||this.sendUpdate()},updated:function(){this.disabled?this.clear():this.sendUpdate()},beforeDestroy:function(){h.unregisterSource(this.name),this.clear()},watch:{to:function(e,t){t&&t!==e&&this.clear(t),this.sendUpdate()}},methods:{clear:function(e){var t={from:this.name,to:e||this.to};h.close(t)},normalizeSlots:function(){return this.$scopedSlots.default?[this.$scopedSlots.default]:this.$slots.default},normalizeOwnChildren:function(e){return"function"==typeof e?e(this.slotProps):e},sendUpdate:function(){var e=this.normalizeSlots();if(e){var t={from:this.name,to:this.to,passengers:a(e),order:this.order};h.open(t)}else this.clear()}},render:function(e){var t=this.$slots.default||this.$scopedSlots.default||[],n=this.tag;return t&&this.disabled?t.length<=1&&this.slim?this.normalizeOwnChildren(t)[0]:e(n,[this.normalizeOwnChildren(t)]):this.slim?e():e(n,{class:{"v-portal":!0},style:{display:"none"},key:"v-portal-placeholder"})}}),m=i.extend({name:"portalTarget",props:{multiple:{type:Boolean,default:!1},name:{type:String,required:!0},slim:{type:Boolean,default:!1},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"div"},transition:{type:[String,Object,Function]}},data:function(){return{transports:h.transports,firstRender:!0}},created:function(){var e=this;this.$nextTick((function(){h.registerTarget(e.name,e)}))},watch:{ownTransports:function(){this.$emit("change",this.children().length>0)},name:function(e,t){h.unregisterTarget(t),h.registerTarget(e,this)}},mounted:function(){var e=this;this.transition&&this.$nextTick((function(){e.firstRender=!1}))},beforeDestroy:function(){h.unregisterTarget(this.name)},computed:{ownTransports:function(){var e=this.transports[this.name]||[];return this.multiple?e:0===e.length?[]:[e[e.length-1]]},passengers:function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.reduce((function(e,n){var s=n.passengers[0],i="function"==typeof s?s(t):n.passengers;return e.concat(i)}),[])}(this.ownTransports,this.slotProps)}},methods:{children:function(){return 0!==this.passengers.length?this.passengers:this.$scopedSlots.default?this.$scopedSlots.default(this.slotProps):this.$slots.default||[]},noWrapper:function(){var e=this.slim&&!this.transition;return e&&this.children().length>1&&console.warn("[portal-vue]: PortalTarget with `slim` option received more than one child element."),e}},render:function(e){var t=this.noWrapper(),n=this.children(),s=this.transition||this.tag;return t?n[0]:this.slim&&!s?e():e(s,{props:{tag:this.transition&&this.tag?this.tag:void 0},class:{"vue-portal-target":!0}},n)}}),v=0,b=["disabled","name","order","slim","slotProps","tag","to"],g=["multiple","transition"],y=i.extend({name:"MountingPortal",inheritAttrs:!1,props:{append:{type:[Boolean,String]},bail:{type:Boolean},mountTo:{type:String,required:!0},disabled:{type:Boolean},name:{type:String,default:function(){return"mounted_"+String(v++)}},order:{type:Number,default:0},slim:{type:Boolean},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"DIV"},to:{type:String,default:function(){return String(Math.round(1e7*Math.random()))}},multiple:{type:Boolean,default:!1},targetSlim:{type:Boolean},targetSlotProps:{type:Object,default:function(){return{}}},targetTag:{type:String,default:"div"},transition:{type:[String,Object,Function]}},created:function(){if("undefined"!=typeof document){var e=document.querySelector(this.mountTo);if(e){var t=this.$props;if(h.targets[t.name])t.bail?console.warn("[portal-vue]: Target ".concat(t.name," is already mounted.\n        Aborting because 'bail: true' is set")):this.portalTarget=h.targets[t.name];else{var n=t.append;if(n){var s="string"==typeof n?n:"DIV",i=document.createElement(s);e.appendChild(i),e=i}var r=l(this.$props,g);r.slim=this.targetSlim,r.tag=this.targetTag,r.slotProps=this.targetSlotProps,r.name=this.to,this.portalTarget=new m({el:e,parent:this.$parent||this,propsData:r})}}else console.error("[portal-vue]: Mount Point '".concat(this.mountTo,"' not found in document"))}},beforeDestroy:function(){var e=this.portalTarget;if(this.append){var t=e.$el;t.parentNode.removeChild(t)}e.$destroy()},render:function(e){if(!this.portalTarget)return console.warn("[portal-vue] Target wasn't mounted"),e();if(!this.$scopedSlots.manual){var t=l(this.$props,b);return e(f,{props:t,attrs:this.$attrs,on:this.$listeners,scopedSlots:this.$scopedSlots},this.$slots.default)}var n=this.$scopedSlots.manual({to:this.to});return Array.isArray(n)&&(n=n[0]),n||e()}});var w={install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.component(t.portalName||"Portal",f),e.component(t.portalTargetName||"PortalTarget",m),e.component(t.MountingPortalName||"MountingPortal",y)}};t.default=w,t.Portal=f,t.PortalTarget=m,t.MountingPortal=y,t.Wormhole=h},K6DV:function(e,t,n){"use strict";var s=n("s5ut");n.n(s).a},K8KG:function(e,t,n){},K8TH:function(e,t,n){},KGBD:function(e,t,n){},KPrL:function(e,t,n){"use strict";var s=n("FVbE");n.n(s).a},"KRl/":function(e,t,n){"use strict";var s=n("jfWh");n.n(s).a},KTCW:function(e,t,n){e.exports=n.p+"assets/close.e370e46c.svg"},"KTI/":function(e,t,n){"use strict";var s=n("Q9zV");n.n(s).a},KUNQ:function(e,t,n){},KVKJ:function(e,t,n){"use strict";var s=n("YxiV");n.n(s).a},KZ7v:function(e,t,n){},Kaxq:function(e,t,n){"use strict";n("fbCW");var s=n("kvrn"),i=n.n(s),r=n("G7T9"),a=n("WmPt"),o={props:{text:{type:String,default:""},subtext:{type:String,default:""},shortcut:{type:[String,Object],default:""},checked:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},submenuVisible:{type:Boolean,default:!1},submenuAnimationless:{type:Boolean,default:!1},active:{type:Boolean,default:!1}},data:function(){return{mounted:!1}},computed:{shortcutText:function(){return this.shortcut,""}},mounted:function(){this.mounted=!0},methods:{handleSubmenuFocus:function(){this.$emit("submenuFocus")},handleSubmenuClose:function(){this.$emit("submenuClose")},handleMouseUp:function(){this.disabled||this.$emit("click")}},render:function(){var e=arguments[0],t=this.$scopedSlots,n=t.default,s=t.left,o=t.right,l=this.active,c=this.disabled,u=this.checked,d=this.text,h=this.subtext,p=this.mounted,f=this.shortcutText,m=this.submenuVisible,v=this.submenuAnimationless,b=this.handleMouseUp,g=this.handleSubmenuFocus,y=this.handleSubmenuClose,w=this.$el,_=n&&n()||[],k=_.find((function(e){return e.tag})),C=p&&m&&k&&r.a(k,{data:{attrs:{animationless:v,element:w},on:{focus:g,close:y}}}),x={role:"menuitem"};return c&&(x["aria-disabled"]="true"),"boolean"==typeof u&&(x.role="menuitemcheckbox",x["aria-checked"]=String(u)),k&&(x["aria-haspopup"]="menu",x["aria-expanded"]=String(!!C)),e("div",i()([{staticClass:"context-menu-item",class:{active:l},on:{mouseup:b}},{attrs:x}]),[e("div",{staticClass:"cmenui-cell cmenui-cell-check"},[u&&e(a.a,{staticClass:"cmenui-check",attrs:{icon:"context-menu-tick"}})]),e("div",{staticClass:"cmenui-cell"},[e("span",{staticClass:"cmenui-slot"},[s&&s()])]),e("div",{staticClass:"cmenui-cell cmenui-cell-text"},[e("div",{staticClass:"cmenui-text"},[d]),!!h&&e("div",{staticClass:"cmenui-subtext"},[h])]),e("div",{staticClass:"cmenui-cell"},[e("span",{staticClass:"cmenui-slot"},[o&&o()])]),e("div",{staticClass:"cmenui-cell cmenui-cell-shortcut"},[!!f&&e("span",{staticClass:"cmenui-shortcut"},[f])]),e("div",{staticClass:"cmenui-cell"},[k&&e(a.a,{staticClass:"cmenui-arrow",attrs:{icon:"context-menu-arrow"}})]),C])}},l=(n("awxY"),n("KHd+")),c=Object(l.a)(o,void 0,void 0,!1,null,null,null);t.a=c.exports},Kji7:function(e,t,n){"use strict";var s=n("Erf6");n.n(s).a},KvuT:function(e,t,n){"use strict";var s=n("QE2+");n.n(s).a},L7tI:function(e,t,n){"use strict";var s=n("zmpC");n.n(s).a},LA8e:function(e,t,n){"use strict";var s=n("rePB"),i=n("zWr8"),r=n("ltWs"),a={components:{AmberDisplay:r.a},extends:i.a},o=(n("4zqU"),n("KHd+")),l=Object(o.a)(a,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"lessli-doc"},[t("h1",{staticClass:"lessli-doc-title"},[this._v(this._s(this.slide.title))]),this._v(" "),t("AmberDisplay",{attrs:{value:this.slide.content}})],1)}),[],!1,null,null,null).exports,c={components:{EmbedEx:n("0gpV").a},extends:i.a},u=(n("D3ku"),Object(o.a)(c,(function(){var e=this.$createElement;return(this._self._c||e)("EmbedEx",{staticClass:"lessli-pdf-embed",attrs:{src:this.slide.fileUrl,type:"application/pdf"}})}),[],!1,null,null,null).exports),d=(n("pNMO"),n("TeQF"),n("yq1k"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP"),n("o0o1")),h=n.n(d),p=(n("ls82"),n("HaE+")),f=n("zZ0H"),m=n.n(f),v=n("d8FT"),b=n.n(v),g=n("L2JU"),y=n("K4j9"),w=n("gfqH"),_=n("qbxg"),k=n("2PkB"),C=n("CkVh");function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var j,O={components:{Portal:y.Portal,Challenge:w.a,ChallengeContextMenuItems:_.a,NavbarButton:k.a,ContextMenuTrigger:C.a},extends:i.a,handlesCompletion:!0,data:function(){return{challenge:null,menuVisible:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(g.e)(["user"]),{},Object(g.c)(["isStaff","isAdmin","isUserAdmin"]),{markable:function(){return this.challenge&&"none"!==this.challenge.type},showRoute:function(){return{name:"lesson-slide-show",query:b()({masquerade:this.$route.query.masquerade},m.a)}},submissionsRoute:function(){return{name:"lesson-slide-code-submissions",query:b()({masquerade:this.$route.query.masquerade,u:this.$route.query.u},m.a)}},solutionRoute:function(){return{name:"lesson-slide-code-solution",query:b()({masquerade:this.$route.query.masquerade},m.a)}},userId:function(){return+this.$route.query.masquerade||null}}),methods:{onDidMark:(j=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:["passed","submitted"].includes(t.submission.status)&&this.$emit("completed",{message:"passed"===t.submission.status?"You passed the exercise!":"You have completed the exercise!"});case 1:case"end":return e.stop()}}),e,this)}))),function(e){return j.apply(this,arguments)})}},S=(n("wETJ"),Object(o.a)(O,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{key:e.slide.id},[e.challenge?n("Portal",{attrs:{to:"slide-primary-actions"}},[n("NavbarButton",{attrs:{text:"Challenge",icon:"star",pressed:e.$route.matched[e.$route.matched.length-1].name===e.showRoute.name,to:e.showRoute}}),e._v(" "),n("NavbarButton",{attrs:{text:"Submissions",icon:"restore",pressed:e.$route.matched[e.$route.matched.length-1].name===e.submissionsRoute.name,to:e.submissionsRoute}}),e._v(" "),e.isStaff||!e.challenge.is_active?n("NavbarButton",{attrs:{text:"Solution"+(e.challenge.is_active?" (hidden)":""),icon:"tick",pressed:e.$route.matched[e.$route.matched.length-1].name===e.solutionRoute.name,to:e.solutionRoute}}):e._e()],1):e._e(),e._v(" "),n("Portal",{attrs:{to:"slide-secondary-actions"}},[n("ContextMenuTrigger",{attrs:{active:e.menuVisible},on:{"update:active":function(t){e.menuVisible=t}},scopedSlots:e._u([{key:"trigger",fn:function(t){var s=t.trigger,i=t.attrs;return[n("NavbarButton",e._b({attrs:{icon:"more-horiz"},on:{action:s}},"NavbarButton",i,!1))]}},{key:"items",fn:function(){return[n("ChallengeContextMenuItems",{attrs:{"is-admin":e.isAdmin,"is-user-admin":e.isUserAdmin,markable:e.markable,"get-component":function(){return e.$refs.challenge},challenge:e.challenge}})]},proxy:!0}])})],1),e._v(" "),n("Challenge",{ref:"challenge",staticClass:"lessli-code-chal",attrs:{"challenge-id":e.slide.challengeId,"user-id":e.userId,"shortcut-keys-disabled":"lesson-slide-show"!==e.$route.name},on:{"did-mark":e.onDidMark,challenge:function(t){e.challenge=t}},scopedSlots:e._u([{key:"default",fn:function(t){return[n("RouterView",e._b({staticClass:"lessli-code-subview"},"RouterView",t,!1))]}}])})],1)}),[],!1,null,null,null).exports),E=n("hH85"),T=n("R84W"),I={components:{AmberDisplay:r.a,VideoEmbed:E.a,Flexible:T.a},extends:i.a},D=(n("f92e"),Object(o.a)(I,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"lessli-vid"},[t("Flexible",{attrs:{ratio:9/16}},[t("VideoEmbed",{attrs:{url:this.slide.videoUrl}})],1),this._v(" "),t("h1",{staticClass:"lessli-vid-title"},[this._v(this._s(this.slide.title))]),this._v(" "),t("AmberDisplay",{staticClass:"lessli-vid-content",attrs:{value:this.slide.content}})],1)}),[],!1,null,null,null).exports),P=n("SuT0"),A=n("kJps"),N=n("BkRI"),R=n.n(N),M=n("4K9I"),L=n("t1TD"),F=n("/Yj0");function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var q,$={components:{EdButton:M.a,Question:L.a},extends:i.a,handlesCompletion:!0,inject:["lessonApi"],data:function(){return{value:null,valid:!1,correct:null,solution:null}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(g.c)("lesson",["canGoNext"]),{completed:function(){return"completed"===this.slide.status},editable:function(){return this.slide.multipleAttempts||!this.completed}}),watch:{slide:{immediate:!0,handler:"update"}},methods:{update:function(){this.value=null,this.correct=null,this.solution=null,null!=this.slide.response&&(this.value=R()(this.slide.response),this.correct=this.slide.correct,"completed"!==this.slide.status||this.slide.multipleAttempts&&!this.correct||(this.solution=R()(this.slide.question.solution)))},onInput:function(e){this.value=e,this.correct=null,this.solution=null},submit:(q=Object(p.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=R()(this.value),e.prev=1,e.next=4,this.lessonApi.answerQuizQuestionSlide(this.slide.id,t);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),F.b({type:"error",text:"Unable to submit answer."}),e.abrupt("return");case 11:this.correct=n.correct,this.solution=n.solution,this.slide.multipleAttempts&&!n.correct||this.$emit("completed");case 14:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(){return q.apply(this,arguments)})}},U=(n("MIO7"),Object(o.a)($,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"lessli-quiz-question"},[n("Question",{attrs:{question:e.slide.question,correct:e.correct,solution:e.solution,editable:e.editable,"explanation-visible":e.completed,value:e.value},on:{input:e.onInput,valid:function(t){e.valid=t}}}),e._v(" "),n("footer",{staticClass:"lsqq-footer"},[e.editable?n("EdButton",{attrs:{disabled:!e.valid},on:{click:e.submit}},[e._v("Submit")]):e._e(),e._v(" "),e.completed&&e.canGoNext?n("EdButton",{on:{click:function(t){return e.$emit("next")}}},[e._v("Next")]):e._e()],1)],1)}),[],!1,null,null,null).exports),z=(n("4Brf"),n("0oug"),n("fbCW"),n("4mDm"),n("2B1R"),n("07d7"),n("5s+n"),n("JTJg"),n("PKPk"),n("3bBZ"),n("ODXe")),V=n("sEfC"),H=n.n(V),W=n("oDEV"),Q=n("WmPt"),K=n("5/Cn"),Y=n("/jHr"),G=n("hSdx"),X=n("3I1m"),J=n("sl2b");function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var ee,te,ne,se,ie,re={components:{AmberDisplay:r.a,Question:{functional:!0,render:function(e,t){var n,s=t.props,i=s.computedQuestion,r=s.index,a=t.parent,o=a.course,l=a.lesson,c=a.readonly,u=a.ended,d=a.computedQuestions,h=a.onQuestionInput,p=a.submitResponse,f=a.resetResponse,m=function(t,n,s){return e("span",{class:["lsqz-badge","lsqz-badge-".concat(n)],key:t},[s&&e(Q.a,{attrs:{icon:s}}),t])};return e("div",{key:t.data.key,class:"lsqz-question"},[(n=d.length>1||l.settings.quizQuestionNumberStyle?Object(J.a)(r+1,l.settings.quizQuestionNumberStyle):"Question",e("h2",{class:"lsqz-question-header"},[e("span",[n]),e(W.a,{attrs:{duration:.2,mode:"out-in"}},[i.submitted&&m("Submitted","submitted","tick"),!i.submitted&&i.saved&&m("Saved","saved",null)])])),e("div",{class:"lsqz-question-body"},[e(L.a,{attrs:{question:i.question.quizQuestion,value:i.computedValue,correct:i.computedCorrect,solution:i.computedSolution,editable:i.computedEditable,explanationVisible:i.computedExplanationVisible},on:{input:function(e){return h(i,e)},valid:function(e){return i.valid=e}}})]),!c&&!u&&!o.settings.lesson.quiz_question_auto_submit&&e("footer",{class:"lsqz-footer"},[i.computedCanReset&&e("button",{class:"lsqz-reset",attrs:{title:"Reset"},on:{click:function(){return f(i)}}},[e(Q.a,{attrs:{icon:"replay"}})]),e(M.a,{class:"primary",attrs:{disabled:!i.computedCanSubmit},on:{click:function(){return p(i)}}},[!i.computedCanSubmit&&i.submitted?"Submitted":"Submit"])])])}}},extends:i.a,handlesCompletion:!0,props:{readonly:{type:Boolean,default:!1}},inject:["lessonApi"],data:function(){return{loadingQuestions:!1,computedQuestions:[],quesionInputReady:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(g.e)(["course"]),{passage:function(){return this.slide.passage||Y.a},hasPassage:function(){return!Y.c(this.passage)},ended:function(){var e=this.slide.activeStatus;return e===X.e.ended||e===X.e.correctness||e===X.e.correctnessExplanation},showsCorrectness:function(){var e=this.ended,t=this.slide,n=t.mode,s=t.activeStatus;return!e&&(n===X.f.oneAttempt||n===X.f.multipleAttempts)||e&&(s===X.e.correctness||s===X.e.correctnessExplanation)},showsSolution:function(){var e=this.ended,t=this.slide,n=t.mode,s=t.activeStatus;return!e&&(n===X.f.oneAttempt||n===X.f.multipleAttempts)||e&&s===X.e.correctnessExplanation},multipleAttempts:function(){return[X.f.multipleAttempts,X.f.hideSolution].includes(this.slide.mode)},totalCount:function(){return this.computedQuestions.length},correctCount:function(){var e=0,t=!0,n=!1,s=void 0;try{for(var i,r=this.computedQuestions[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){i.value.correct&&e++}}catch(a){n=!0,s=a}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}return e},scorePercentage:function(){return 0===this.totalCount?0:this.correctCount/this.totalCount}}),watch:{slide:{immediate:!0,handler:"update"}},destroyed:function(){this.flushPendingSaves()},methods:{formatPercent:G.formatPercent,update:(se=Object(p.a)(h.a.mark((function e(){var t,n,s,i,r,a,o=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.flushPendingSaves(),this.computedQuestions=[],this.loadingQuestions=!0,e.prev=3,e.next=6,Promise.all([this.lessonApi.getSlideQuestions(this.slide.id),this.lessonApi.getSlideResponses(this.slide.id),this.ended?Promise.resolve([]):this.lessonApi.getSlideStates(this.slide.id)]);case 6:i=e.sent,r=Object(z.a)(i,3),t=r[0],n=r[1],s=r[2],e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),F.b({type:"error",text:"Unable to load questions for this slide."}),e.abrupt("return");case 17:return e.prev=17,this.loadingQuestions=!1,e.finish(17);case 20:this.questionInputReady=!1,a=this,this.computedQuestions=t.map((function(e){var t=n.find((function(t){return t.questionId===e.id})),i=s.find((function(t){return t.questionId===e.id})),r=null,l=!1;return t&&i?t.createdAt>i.createdAt?(r=t.data,l=!0):r=i.data:t?(r=t.data,l=!0):i&&(r=i.data),{question:e,submitted:l,saved:!!i,editing:!o.ended&&(o.multipleAttempts||!t),valid:!1,touched:o.ended,correct:t&&t.correct,solution:e.quizQuestion.solution,response:r,submission:t?t.data:null,get computedValue(){return a.readonly?void 0:this.response},get computedCorrect(){return a.readonly||!a.showsCorrectness||this.editing||!this.touched&&a.multipleAttempts?void 0:this.correct},get computedSolution(){return a.readonly||!a.showsSolution||this.editing||!this.touched&&a.multipleAttempts?void 0:this.solution},get computedEditable(){return!a.readonly&&!a.ended&&(!this.submitted||a.multipleAttempts)},get computedExplanationVisible(){return!a.readonly&&a.showsSolution&&!this.editing&&(this.touched||!a.multipleAttempts)},get computedCanSubmit(){return!a.readonly&&!a.ended&&null!=this.response&&this.editing},get computedCanReset(){return!a.readonly&&!a.ended&&null!=this.response&&(!this.submitted||a.multipleAttempts)},saveDebounced:H()((function(){a.course.settings.lesson.quiz_question_auto_submit?a.submitResponse(this):a.saveResponse(this)}),3e3)}})),this.$nextTick((function(){o.questionInputReady=!0}));case 24:case"end":return e.stop()}}),e,this,[[3,13,17,20]])}))),function(){return se.apply(this,arguments)}),onQuestionInput:function(e,t){e.response=t,this.questionInputReady&&(e.editing=!0,e.touched=!0,e.submitted=!1,e.saved=!1,e.saveDebounced())},submitResponse:(ne=Object(p.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.saveDebounced.cancel(),t.touched=!0,e.prev=2,e.next=5,this.lessonApi.submitQuestionResponse(t.question.id,t.response,this.course.settings.lesson.quiz_question_auto_submit);case 5:n=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),F.b({type:"error",text:"Unable to submit answer."}),e.abrupt("return");case 12:t.correct=n.correct,t.solution=n.solution,t.submitted=!0,t.editing=!1,e.t1=this.slide.mode,e.next=e.t1===X.f.hideSolution?19:e.t1===X.f.oneAttempt?19:e.t1===X.f.multipleAttempts?21:23;break;case 19:return this.computedQuestions.every((function(e){return e.submitted}))&&this.$emit("completed"),e.abrupt("break",23);case 21:return this.computedQuestions.every((function(e){return e.submitted&&e.correct}))&&this.$emit("completed"),e.abrupt("break",23);case 23:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(e){return ne.apply(this,arguments)}),resetResponse:(te=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.b({icon:"warning",title:"Reset question?",text:"Your response to this question will be cleared.",primaryAction:"Reset"});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:t.response=null,t.submitted=!1,t.saved=!1,t.editing=!0;case 8:case"end":return e.stop()}}),e)}))),function(e){return te.apply(this,arguments)}),saveResponse:(ee=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.saved=!1,e.next=3,this.lessonApi.saveQuestionState(t.question.id,t.response);case 3:t.saved=!0;case 4:case"end":return e.stop()}}),e,this)}))),function(e){return ee.apply(this,arguments)}),flushPendingSaves:function(){var e=!0,t=!1,n=void 0;try{for(var s,i=this.computedQuestions[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){s.value.saveDebounced.flush()}}catch(r){t=!0,n=r}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}}},ae=(n("DvJa"),Object(o.a)(re,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"lessli-quiz"},[e.ended?n("div",{staticClass:"lsqz-ended"},[e._v("\n\t\tThis quiz has ended. You will not be able to attempt the questions.\n\t")]):e._e(),e._v(" "),e.ended&&e.showsCorrectness?n("div",{staticClass:"lsqz-summary"},[e._v("Passed "+e._s(e.correctCount)+" of "+e._s(e.totalCount)+" questions ("+e._s(e.formatPercent(e.scorePercentage))+")")]):e._e(),e._v(" "),e.hasPassage?n("AmberDisplay",{staticClass:"lsqz-passage",attrs:{value:e.passage}}):e._e(),e._v(" "),e._l(e.computedQuestions,(function(e,t){return n("Question",{key:e.question.id,staticClass:"lsqz-question",attrs:{"computed-question":e,index:t}})}))],2)}),[],!1,null,null,null).exports);t.a=(ie={},Object(s.a)(ie,X.h.document,l),Object(s.a)(ie,X.h.pdf,u),Object(s.a)(ie,X.h.code,S),Object(s.a)(ie,X.h.postgres,S),Object(s.a)(ie,X.h.rstudio,S),Object(s.a)(ie,X.h.jupyter,S),Object(s.a)(ie,X.h.web,S),Object(s.a)(ie,X.h.video,D),Object(s.a)(ie,X.h.webpage,P.a),Object(s.a)(ie,X.h.html,A.a),Object(s.a)(ie,X.h.quizQuestion,U),Object(s.a)(ie,X.h.quiz,ae),ie)},LAZP:function(e,t,n){"use strict";var s=n("svLx");n.n(s).a},LDLQ:function(e,t,n){"use strict";var s=n("trdX");n.n(s).a},LIY4:function(e,t,n){},LLd1:function(e,t,n){},LMgf:function(e,t,n){},LNLw:function(e,t,n){"use strict";var s=n("aunw");n.n(s).a},LOEQ:function(e,t,n){},LV3f:function(e,t,n){},Lhhi:function(e,t,n){"use strict";var s=n("EfnV");n.n(s).a},LiSN:function(e,t,n){},LnxB:function(e,t,n){"use strict";var s={components:{Icon:n("WmPt").a},props:{type:{type:String,default:"info"}},computed:{icon:function(){switch(this.type){case"info":return"info";case"warning":return"warning";case"error":return"error"}}}},i=(n("jxI9"),n("KHd+")),r=Object(i.a)(s,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"message",class:"message-"+this.type},[this.icon?t("Icon",{staticClass:"message-icon",attrs:{icon:this.icon}}):this._e(),this._v(" "),t("div",{staticClass:"message-content"},[this._t("default")],2)],1)}),[],!1,null,null,null);t.a=r.exports},LpQ4:function(e,t,n){"use strict";var s=n("rz1s");n.n(s).a},LwAd:function(e,t,n){"use strict";n("yXV3"),n("2B1R"),n("pDQq");var s=n("KQm4"),i=n("9Arg"),r={components:{FadeTransition:n("oDEV").a},props:{items:{type:Array,default:null},orientation:{type:String,default:"vertical"}},data:function(){return{guideVisible:!1}},mounted:function(){this.srcIndex=null,this.destIndex=null,this.childSizes=[],this.dragDepth=0},methods:{children:function(){return Object(s.a)(this.$el.querySelectorAll('[draggable="true"]'))},onDragEnter:function(e){e.preventDefault(),this.dragDepth++},onDragLeave:function(){this.dragDepth--,this.guideVisible=this.dragDepth>0},onDragOver:function(e){e.preventDefault(),e.dataTransfer.dropEffect="move";for(var t=i.s(this.$el,e.pageX,e.pageY)["vertical"===this.orientation?"y":"x"],n=null,s=1/0,r=null,a=0,o=this.children().length,l=0;l<=o;l++){var c=Math.abs(a-t);if(!(c<s))break;s=c,r=a,n=l,a+=this.childSizes[l]}this.destIndex=n,this.guideVisible=!0;var u=this.$refs.guide.style;"vertical"===this.orientation?(u.top=r+"px",u.left=0,u.right=0,u.height="2px",u.marginTop="-1px"):(u.left=r+"px",u.top=0,u.bottom=0,u.width="2px",u.marginLeft="-1px")},onDragEnd:function(){this.guideVisible=!1},onDrop:function(e){if(null!=this.destIndex&&null!=this.srcIndex){e.preventDefault(),e.stopPropagation();var t=this.srcIndex,n=this.destIndex;if(t<n&&n--,t!==n){if(this.$emit("will-reorder",{oldIndex:t,newIndex:n}),this.items){var s=this.items[t];this.items.splice(t,1),this.items.splice(n,0,s),this.$emit("did-reorder",{oldIndex:t,newIndex:n})}this.srcIndex=null,this.destIndex=null}}},onDragStart:function(e){var t=this,n=this.children();this.srcIndex=n.indexOf(e.target),-1!==this.srcIndex&&(this.destIndex=null,this.dragDepth=0,this.childSizes=n.map((function(e){return"vertical"===t.orientation?e.offsetHeight:e.offsetWidth})),i.c(this.$el),e.dataTransfer.setData("text/plain","reorder-container"))}}},a=(n("OYMN"),n("KHd+")),o=Object(a.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"reorder-container",on:{dragstart:e.onDragStart,dragenter:e.onDragEnter,dragleave:e.onDragLeave,dragover:e.onDragOver,dragend:e.onDragEnd,drop:e.onDrop}},[e._t("default"),e._v(" "),n("FadeTransition",{attrs:{duration:.2}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.guideVisible,expression:"guideVisible"}],ref:"guide",staticClass:"reorder-container-guide"})])],2)}),[],!1,null,null,null);t.a=o.exports},LyQ3:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("ma9I"),n("TeQF"),n("2B1R"),n("ToJy"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("ODXe"),o=n("KQm4"),l=n("rePB"),c=n("sEfC"),u=n.n(c),d=n("L2JU"),h=n("BtCt"),p=n("Pa8A"),f=n("t19P"),m=n("VlpE"),v=n("Kaxq"),b=n("1hNB"),g=n("43W2"),y=n("9wdi"),w=n("N+Un"),_=n("0XH5"),k=n("WmPt"),C=n("NC1X"),x=n("Oshs"),j=n("w1SZ"),O={props:{data:{type:Object,required:!0}},computed:{cssClass:function(){var e=[];return e.push("lesi-item-"+this.data.lesson.type),this.data.open&&e.push("open"),e}}},S=(n("To38"),n("KHd+")),E=Object(S.a)(O,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"lesi-item",class:this.cssClass},[t("div",{staticClass:"lesi-item-inner"},[t("div",{staticClass:"lesi-item-page back"}),this._v(" "),t("div",{staticClass:"lesi-item-page inner n1"}),this._v(" "),t("div",{staticClass:"lesi-item-page inner n2"}),this._v(" "),t("div",{staticClass:"lesi-item-page front"},["completed"===this.data.lesson.status?t("div",{staticClass:"lesi-item-completed"},[this._v("Completed")]):this._e()])])])}),[],!1,null,null,null).exports,T={directives:{Tooltip:p.a},components:{Icon:k.a},props:{name:{type:String,default:""},actionsVisible:{type:Boolean,default:!1}}},I=(n("3a0T"),Object(S.a)(T,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"lesson-module-header"},[n("span",{staticClass:"lesson-module-header-name"},[e._v(e._s(e.name))]),e._v(" "),e.actionsVisible?n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Edit Module",expression:"'Edit Module'"}],staticClass:"lesson-module-header-action",on:{click:function(t){return e.$emit("edit")}}},[n("Icon",{attrs:{icon:"pencil"}})],1):e._e(),e._v(" "),e.actionsVisible?n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Delete Module",expression:"'Delete Module'"}],staticClass:"lesson-module-header-action",on:{click:function(t){return e.$emit("delete")}}},[n("Icon",{attrs:{icon:"cross"}})],1):e._e()])}),[],!1,null,null,null).exports),D=(n("SYor"),n("SBq4")),P=n("OBDa"),A=n("IbLZ"),N=n("xtk+"),R=n("4K9I"),M=n("/Yj0");function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var F,B={directives:{Autofocus:D.a},components:{DialogLayout:P.a,EdField:A.a,EdInput:N.a,EdButton:R.a},props:{module:{type:Object,default:null}},data:function(){return{loading:!1,name:""}},watch:{module:{immediate:!0,handler:function(e){e&&(this.name=e.name)}}},methods:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(d.b)("lesson",{createModule:h.a.CREATE_MODULE,updateModule:h.a.UPDATE_MODULE}),{save:(F=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.name.trim()){e.next=4;break}return M.b({type:"error",text:"Module name cannot be empty."}),e.abrupt("return");case 4:if(this.loading=!0,e.prev=5,!this.module){e.next=11;break}return e.next=9,this.updateModule({id:this.module.id,name:t});case 9:e.next=13;break;case 11:return e.next=13,this.createModule(t);case 13:e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(5),M.b({type:"error",text:"Could not ".concat(this.module?"save":"create"," module.")}),this.loading=!1,e.abrupt("return");case 20:M.b({type:"success",text:this.module?"Module updated.":"New module created."}),this.$emit("done");case 22:case"end":return e.stop()}}),e,this,[[5,15]])}))),function(){return F.apply(this,arguments)})})},q=(n("8zLD"),Object(S.a)(B,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogLayout",{staticClass:"lesson-sheet-edit-module",attrs:{title:e.module?"Edit Module":"New Module",disabled:e.loading},scopedSlots:e._u([{key:"primaryActions",fn:function(){return[n("EdButton",{staticClass:"primary",attrs:{disabled:e.loading},on:{click:e.save}},[e._v("\n\t\t\t"+e._s(e.module?"Save":"Create")+"\n\t\t")])]},proxy:!0}])},[n("form",{staticClass:"lsem-layout",on:{submit:function(t){return t.preventDefault(),e.save(t)}}},[n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Name")]},proxy:!0}])},[e._v(" "),n("EdInput",{directives:[{name:"autofocus",rawName:"v-autofocus"}],model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1)])}),[],!1,null,null,null).exports),$=n("Vzir");function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var z,V={components:{DialogLayout:P.a,CollectionViewSimple:$.a},data:function(){return{loading:!1}},computed:{items:function(){return[{type:"new",label:"Create New",icon:"new"},{type:"clone",label:"Clone Existing",icon:"import"}]}},methods:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(d.b)("lesson",{createLesson:h.a.CREATE_LESSON}),{action:function(e){switch(e){case"new":this.create();break;case"clone":this.clone()}},create:(z=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.createLesson();case 4:t=e.sent,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(1),M.b({type:"error",text:"Could not create lesson."}),this.loading=!1,e.abrupt("return");case 12:this.$router.push({name:"lesson-edit",params:{lessonId:t.id}}),M.b({type:"success",text:"New lesson created."});case 14:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(){return z.apply(this,arguments)}),clone:function(){this.$router.push({name:"lesson-clone"})}})},H=Object(S.a)(V,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogLayout",{attrs:{title:"New Lesson",disabled:e.loading}},[n("CollectionViewSimple",{attrs:{items:e.items},on:{"item-click":function(t){return e.action(t.type)}}})],1)}),[],!1,null,null,null).exports,W=n("hSdx"),Q=n("5/Cn"),K=n("loy4");function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X,J,Z,ee={name:"LessonIndex",directives:{Tooltip:p.a},components:{HeaderContainer:f.a,ContextMenu:m.a,ContextMenuItem:v.a,CollectionView:b.a,StatusMessage:g.a,Actionbar:y.a,ActionbarAction:w.a,SearchInput:_.a,Icon:k.a,Spinner:C.a,SheetContainer:x.a,LessonIcon:j.a,ModuleHeader:I},data:function(){return{LessonItem:E,collectionViewReady:!1,openedLessonId:null,view:K.get("lessonIndex.view","list"),searchQuery:"",outlineVisibleDebounced:!1,outline:null,hoveredItemHasOutline:!1,selectedCollectionViewItem:null,menuVisible:!1,menuX:0,menuY:0,menuLesson:null}},computed:G({},Object(d.e)("lesson",["loadingLessons","modules"]),{},Object(d.c)("lesson",["lessonsByModule","lessonsCount"]),{},Object(d.c)(["isStaff"]),{filteredGroups:function(){var e=this,t=Object(o.a)(this.lessonsByModule).map((function(t){var n=Object(a.a)(t,2),s=n[0],i=n[1];return{module:null===s?null:e.modules[s],lessons:i.filter((function(t){return W.validateSubstrDeep(t,e.searchQuery,"title")})).sort(W.compositeComparator((function(e,t){return W.nullComparator(e.index,t.index,(function(e,t){return e-t}))}),(function(e,t){return W.naturalComparator(e.title,t.title)})))}})).filter((function(e){return void 0!==e.module})).sort((function(e,t){var n=(null!=e.module)-(null!=t.module);return 0!==n?n:W.naturalComparator(e.module.name,t.module.name)}));return this.searchQuery||!this.isStaff?t.filter((function(e){return e.lessons.length})):t.filter((function(e){return e.module||e.lessons.length}))},filteredCollectionViewGroups:function(){var e=this;return this.filteredGroups.map((function(t){return{key:t.module?t.module.id:"noModule",module:t.module,items:t.lessons.map((function(t){return{lesson:t,open:e.openedLessonId===t.id,key:t.id,dot:"unattempted"===t.status,lock:t.prerequisites.some((function(e){return!e.completed})),link:t.isUnlisted,hidden:t.isHidden,text:t.title,subtext:"".concat(t.slideCount?t.slideCount:"No"," ").concat(W.pluralize(t.slideCount,"slide"))}}))}}))},filteredListViewGroups:function(){return this.filteredGroups.map((function(e){return{key:e.module?e.module.id:"noModule",module:e.module,items:e.lessons.map((function(e){return{lesson:e,key:e.id}}))}}))},outlineVisible:function(){return this.hoveredItemHasOutline&&!!this.outline}}),watch:{view:function(e){K.set("lessonIndex.view",e)},outlineVisible:u()((function(e){this.outlineVisibleDebounced=e}),200)},beforeRouteEnter:function(e,t,n){n((function(e){t.matched.some((function(e){return"lesson-show"===e.name}))&&(e.openedLessonId=+t.params.lessonId),e.collectionViewReady=!0}))},mounted:(Z=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingLessons||this.loadLessons(),e.next=3,this.$nextTick();case 3:if(null==this.openedLessonId){e.next=7;break}return e.next=6,this.$nextTick();case 6:this.openedLessonId=null;case 7:case"end":return e.stop()}}),e,this)}))),function(){return Z.apply(this,arguments)}),methods:G({},Object(d.b)("lesson",{loadLessons:h.a.LOAD_LESSONS,deleteLesson:h.a.DELETE_LESSON,deleteModule:h.a.DELETE_MODULE}),{lessonLink:function(e){return{name:"lesson-show",params:{lessonId:e.lesson.id}}},onSearchQueryInput:u()((function(e){this.searchQuery=e}),200),onItemClick:function(e){var t=e.lesson;this.openLesson(t)},onItemMouseEnter:function(e){e.lesson.outline?(this.hoveredItemHasOutline=!0,this.outline=e.lesson.outline):this.hoveredItemHasOutline=!1},onItemMouseLeave:function(){this.hoveredItemHasOutline=!1},onItemContextMenu:function(e){var t=e.item,n=e.event;this.menuLesson=t.lesson,this.menuVisible=!0,this.menuX=n.clientX+window.pageXOffset,this.menuY=n.clientY+window.pageYOffset},onCollectionViewKeyDownEnter:function(){this.selectedCollectionViewItem&&this.openLesson(this.selectedCollectionViewItem.lesson)},openLesson:function(e){var t=this;this.openedLessonId=e.id,this.$nextTick((function(){t.$router.push({name:"lesson-show",params:{lessonId:e.id}})}))},showNewModuleSheet:function(){this.$refs.sheetContainer.showSheet(q)},showEditModuleSheet:function(e){this.$createElement;var t={render:function(){var t=this,n=arguments[0];return n(q,{attrs:{module:e},on:{done:function(e){return t.$emit("done",e)}}})}};this.$refs.sheetContainer.showSheet(t)},showNewLessonSheet:function(){this.$refs.sheetContainer.showSheet(H)},performDeleteModule:(J=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.b({icon:"warning",title:'Delete module "'.concat(t.name,'"?'),text:"Any lessons inside the module will not be deleted, however they will no longer be associated with any module.",primaryAction:"Delete"});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,this.deleteModule(t.id);case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(4),M.b({type:"error",text:"Could not delete module."}),e.abrupt("return");case 13:M.b({type:"success",text:"Module deleted."});case 14:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(e){return J.apply(this,arguments)}),performDeleteLesson:(X=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.b({icon:"warning",title:'Delete lesson "'.concat(t.title,'"?'),text:"This cannot be undone.",primaryAction:"Delete"});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,this.deleteLesson(t.id);case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(4),M.b({type:"error",text:"Could not delete lesson."}),e.abrupt("return");case 13:M.b({type:"success",text:"Lesson deleted."});case 14:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(e){return X.apply(this,arguments)}),editLesson:function(e){this.$router.push({name:"lesson-edit",params:{lessonId:e.id}})},previewLesson:function(e){this.$router.push({name:"lesson-preview",params:{lessonId:e.id}})}})},te=(n("9rzZ"),Object(S.a)(ee,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("HeaderContainer",{staticClass:"lesson-index",attrs:{"scrollbar-always-visible":""}},[n("div",{staticClass:"page-heading-container"},[n("h1",{staticClass:"page-heading"},[e._v("Lessons")])]),e._v(" "),n("div",{staticClass:"lesi-container"},[n("Actionbar",{staticClass:"page-heading-actions",scopedSlots:e._u([{key:"primary",fn:function(){return[n("ActionbarAction",{attrs:{icon:"view-grid"},on:{click:function(t){e.view="grid"}}},[e._v("\n\t\t\t\t\tGrid\n\t\t\t\t")]),e._v(" "),n("ActionbarAction",{attrs:{icon:"view-list"},on:{click:function(t){e.view="list"}}},[e._v("\n\t\t\t\t\tList\n\t\t\t\t")]),e._v(" "),e.isStaff?n("ActionbarAction",{attrs:{icon:"folder"},on:{click:e.showNewModuleSheet}},[e._v("\n\t\t\t\t\tNew Module\n\t\t\t\t")]):e._e(),e._v(" "),e.isStaff?n("ActionbarAction",{staticClass:"primary",attrs:{icon:"book"},on:{click:e.showNewLessonSheet}},[e._v("\n\t\t\t\t\tNew Lesson\n\t\t\t\t")]):e._e()]},proxy:!0},{key:"secondary",fn:function(){return[n("SearchInput",{attrs:{placeholder:"Search lessons",value:e.searchQuery},on:{input:e.onSearchQueryInput}})]},proxy:!0}])})],1),e._v(" "),e.loadingLessons&&!e.filteredGroups.length?n("Spinner",{staticClass:"lesi-spinner"}):e.filteredGroups.length?e._e():n("StatusMessage",{scopedSlots:e._u([{key:"subtext",fn:function(){return[e.lessonsCount?[e._v("Refine your search and try again")]:e.isStaff?[n("a",{on:{click:e.showNewLessonSheet}},[e._v("Create a new lesson")])]:[e._v("Check back later")]]},proxy:!0}])},[e.lessonsCount?[e._v("No lessons match your search query")]:[e._v("There are no lessons yet")]],2),e._v(" "),"grid"===e.view&&e.collectionViewReady?n("div",{staticClass:"lesi-cov-container"},[n("CollectionView",{staticClass:"lesi-cov",attrs:{grouped:"",items:e.filteredCollectionViewGroups,"item-component":e.LessonItem,"group-key":function(e){return e.key},"item-key":function(e){return e.key},"items-selector":function(e){return e.items}},on:{"item-click":e.onItemClick,"item-mouse-enter":e.onItemMouseEnter,"item-mouse-leave":e.onItemMouseLeave,"item-context-menu":e.onItemContextMenu},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onCollectionViewKeyDownEnter(t)}},scopedSlots:e._u([{key:"header",fn:function(t){var s=t.group;return[s.module?[n("ModuleHeader",{staticClass:"lesi-cov-header",attrs:{name:s.module.name,"actions-visible":e.isStaff},on:{edit:function(t){return e.showEditModuleSheet(s.module)},delete:function(t){return e.performDeleteModule(s.module)}}}),e._v(" "),s.items.length?e._e():n("p",{staticClass:"lesi-empty-module"},[e._v("This module is empty.")])]:e._e()]}}],null,!1,3207879029),model:{value:e.selectedCollectionViewItem,callback:function(t){e.selectedCollectionViewItem=t},expression:"selectedCollectionViewItem"}})],1):"list"===e.view?n("div",{staticClass:"lesi-list-container"},e._l(e.filteredListViewGroups,(function(t){return n("div",{key:t.key},[t.module?[t.module?n("ModuleHeader",{attrs:{name:t.module.name,"actions-visible":e.isStaff},on:{edit:function(n){return e.showEditModuleSheet(t.module)},delete:function(n){return e.performDeleteModule(t.module)}}}):e._e(),e._v(" "),t.items.length?e._e():n("p",{staticClass:"lesi-empty-module"},[e._v("This module is empty.")])]:e._e(),e._v(" "),n("div",{staticClass:"lesi-list lesi-list-table",attrs:{role:"presentation"}},e._l(t.items,(function(t){return n("div",{key:t.key,staticClass:"lesi-list-item lesi-list-table-row",attrs:{tabindex:"0"},on:{mouseenter:function(n){return e.onItemMouseEnter(t)},mouseleave:function(n){return e.onItemMouseLeave(t)}}},[n("RouterLink",{attrs:{to:e.lessonLink(t),tabindex:"-1"}},[n("div",{staticClass:"lesi-list-table-cell lesi-list-center lesi-list-item-icon"},[n("LessonIcon",{attrs:{type:t.lesson.type}})],1)]),e._v(" "),n("RouterLink",{attrs:{to:e.lessonLink(t),tabindex:"-1"}},[n("div",{staticClass:"lesi-list-table-cell lesi-list-center lesi-list-item-status"},[t.lesson.isHidden?[n("Icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Hidden",expression:"'Hidden'"}],staticClass:"lesi-list-item-status-hidden",attrs:{icon:"hidden"}})]:["unattempted"===t.lesson.status?n("Icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Unattempted",expression:"'Unattempted'"}],staticClass:"lesi-list-item-status-unattempted",attrs:{icon:"dot"}}):e._e(),e._v(" "),"attempted"===t.lesson.status?n("Icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Partially complete",expression:"'Partially complete'"}],staticClass:"lesi-list-item-status-attempted",attrs:{icon:"dot"}}):e._e(),e._v(" "),"completed"===t.lesson.status?n("Icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Completed",expression:"'Completed'"}],staticClass:"lesi-list-item-status-completed",attrs:{icon:"tick"}}):e._e()]],2)]),e._v(" "),n("RouterLink",{attrs:{to:e.lessonLink(t)}},[n("div",{staticClass:"lesi-list-table-cell lesi-list-center lesi-list-item-title"},[n("div",{staticClass:"lesi-list-item-title-layout"},[t.lesson.isUnlisted?n("Icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Unlisted",expression:"'Unlisted'"}],staticClass:"lesi-list-item-status-unlisted",attrs:{icon:"link"}}):e._e(),e._v(" "),t.lesson.prerequisites.some((function(e){return!e.completed}))?n("Icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"This lesson has uncompleted prerequisites.",expression:"'This lesson has uncompleted prerequisites.'"}],staticClass:"lesi-list-item-lock",attrs:{icon:"lock"}}):e._e(),e._v(" "),n("span",{staticClass:"lesi-list-item-title-span"},[e._v(e._s(t.lesson.title))])],1)])]),e._v(" "),n("div",{staticClass:"lesi-list-table-cell lesi-list-item-actions"},[e.isStaff?[n("RouterLink",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Edit",expression:"'Edit'"}],attrs:{tag:"a",to:{name:"lesson-edit",params:{lessonId:t.lesson.id}},tabindex:"-1"}},[n("button",{staticClass:"lesi-list-item-action"},[n("Icon",{attrs:{icon:"pencil"}})],1)]),e._v(" "),n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Delete",expression:"'Delete'"}],staticClass:"lesi-list-item-action",on:{click:function(n){return n.stopPropagation(),e.performDeleteLesson(t.lesson)}}},[n("Icon",{attrs:{icon:"cross"}})],1)]:e._e()],2)],1)})),0)],2)})),0):e._e(),e._v(" "),n("Transition",[e.outlineVisibleDebounced?n("div",{key:e.outline,staticClass:"lesi-outline"},[n("div",{staticClass:"lesi-container"},[n("div",{staticClass:"lesi-outline-inner"},[e._v(e._s(e.outline))])])]):e._e()]),e._v(" "),n("SheetContainer",{ref:"sheetContainer",staticClass:"lesi-sheet-container"}),e._v(" "),e.menuVisible?n("ContextMenu",{attrs:{"target-left":e.menuX,"target-top":e.menuY},on:{close:function(t){e.menuVisible=!1}}},[n("ContextMenuItem",{key:"preview",attrs:{text:"Preview"},on:{click:function(t){return e.previewLesson(e.menuLesson)}}}),e._v(" "),e.isStaff?n("ContextMenuItem",{key:"edit",attrs:{text:"Edit"},on:{click:function(t){return e.editLesson(e.menuLesson)}}}):e._e(),e._v(" "),e.isStaff?n("ContextMenuItem",{key:"delete",attrs:{text:"Delete"},on:{click:function(t){return e.performDeleteLesson(e.menuLesson)}}}):e._e()],1):e._e()],1)}),[],!1,null,null,null));t.default=te.exports},LzC0:function(e,t,n){"use strict";var s=n("zBf9"),i=(n("2B1R"),n("hSdx")),r={extends:n("JQId").a,props:{regions:{type:Array,default:null},value:{type:Object,default:null}},computed:{paths:function(){return(this.regions||[]).map((function(e){return i.svgPathFromPolygon(e,{close:!0})}))}},methods:{onPointerDown:function(e,t){this.$emit("input",{x:e,y:t})},onPointerMove:function(e,t){this.$emit("input",{x:e,y:t})},onPointerUp:function(){this.releaseCapture()}}},a=(n("USyh"),n("KHd+")),o={components:{CanvasPoint:Object(a.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{ref:"svg",staticClass:"quiz-canvas-point",class:{editable:!e.readonly},style:e.style,attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:e.viewBox}},[e.imageUrl?n("image",{attrs:{"xlink:href":e.imageUrl,width:e.width,height:e.height}}):e._e(),e._v(" "),e._l(e.paths,(function(e,t){return n("path",{key:t,staticClass:"qcp-region",attrs:{d:e}})})),e._v(" "),e.value?n("g",{attrs:{transform:"translate("+e.value.x+","+e.value.y+")"}},[e.value?n("circle",{staticClass:"qcp-point-circle",attrs:{r:"1.25"}}):e._e(),e._v(" "),n("path",{staticClass:"qcp-point-cross",attrs:{d:"M0,-0.75 v1.5 M-0.75,0 h1.5"}})]):e._e()],2)}),[],!1,null,null,null).exports,Icon:n("WmPt").a},extends:s.a,computed:{feedbackIcon:function(){switch(this.correct){case!0:return"tick";case!1:return"cross"}},feedbackClass:function(){switch(this.correct){case!0:return"correct";case!1:return"incorrect"}},feedbackText:function(){switch(this.correct){case!0:return"Correct";case!1:return"Incorrect"}},valid:function(){return!!this.value}}},l=(n("DxSh"),Object(a.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quiz-question-show-hotspot"},[n("CanvasPoint",{attrs:{"image-url":e.question.imageUrl,"image-width":e.question.imageWidth,"image-height":e.question.imageHeight,value:e.value,regions:e.solution?[e.solution]:[],readonly:!e.editable},on:{input:function(t){return e.$emit("input",t)}}}),e._v(" "),null!=e.correct?n("div",{staticClass:"qqshs-feedback",class:e.feedbackClass},[n("Icon",{staticClass:"qqshs-fb-icon",attrs:{icon:e.feedbackIcon}}),e._v("\n\t\t"+e._s(e.feedbackText)+"\n\t")],1):e._e()],1)}),[],!1,null,null,null));t.a=l.exports},"M/Nz":function(e,t,n){},M0XE:function(e,t,n){},M21B:function(e,t,n){"use strict";var s=n("YhsJ");n.n(s).a},M9iD:function(e,t,n){},MAZk:function(e,t,n){"use strict";var s=n("QYfK");n.n(s).a},MBTo:function(e,t,n){},MDGL:function(e,t,n){},MIO7:function(e,t,n){"use strict";var s=n("DYiA");n.n(s).a},MIeZ:function(e,t,n){"use strict";var s=n("cnFG");n.n(s).a},MLca:function(e,t,n){},MXDq:function(e,t,n){},MXsU:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("qePV"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("L2JU"),l=n("Q2AE"),c=n("t19P"),u=n("TphV"),d=n("2PkB"),h=(n("fbCW"),n("2B1R"),n("KQm4")),p={props:{questions:{type:Array,required:!0},responses:{type:Array,required:!0}},computed:{items:function(){var e=this;return this.questions.map((function(t){var n=e.responses.find((function(e){return e.questionId===t.id}));return n&&n.correct}))}},methods:{itemClass:function(e){switch(e){case!0:return"correct";case!1:return"incorrect"}}}},f=(n("m/JK"),n("KHd+")),m=Object(f.a)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sway-question-correctness-summary"},[n("div",{staticClass:"sqcs-cells"},e._l(e.items,(function(t,s){return n("div",{key:s,staticClass:"sqcs-cell",class:e.itemClass(t),on:{click:function(t){return e.$emit("click",s)}}},[e._v(e._s(s+1))])})),0)])}),[],!1,null,null,null).exports,v=n("t1TD"),b=n("abSr"),g=n("9Arg"),y={components:{QuestionCorrectnessSummary:m,Question:v.a,Item:b.a},props:{attempt:{type:Object,required:!0}},data:function(){return{computedItems:[]}},computed:{questions:function(){return this.attempt.quiz.items.reduce((function(e,t){return e.push.apply(e,Object(h.a)(t.questions)),e}),[])},correctCount:function(){return this.attempt.responses.filter((function(e){return e.correct})).length},totalCount:function(){return this.questions.filter((function(e){return e.quizQuestion.assessed})).length},scorePercentage:function(){return 100*(this.correctCount/this.totalCount||0)|0}},watch:{attempt:{immediate:!0,handler:"update"}},methods:{scrollToQuestion:function(e){g.H(this.$refs.questions[e].$el)},update:function(){var e=this;this.computedItems=this.attempt.quiz.items.map((function(t){return{item:t,spans:[],computedQuestions:t.questions.map((function(t){return{question:t,response:e.attempt.responses.find((function(e){return e.questionId===t.id}))}}))}}))},onItemEvent:function(e,t){switch(t.type){case"spans":this.$set(e,"spans",t.event)}}}},w=(n("qjA0"),Object(f.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sway-attempt-result"},[e.attempt.quiz.assessed?n("div",{staticClass:"sares-container"},[n("div",{staticClass:"sares-summary"},[e._v("Passed "+e._s(e.correctCount)+" of "+e._s(e.totalCount)+" questions ("+e._s(e.scorePercentage)+"%)")]),e._v(" "),n("QuestionCorrectnessSummary",{staticClass:"sares-correctness-summary",attrs:{questions:e.questions,responses:e.attempt.responses},on:{click:e.scrollToQuestion}})],1):e._e(),e._v(" "),e._l(e.computedItems,(function(t){return n("Item",{key:t.item.id,class:"sares-item-"+t.item.quizItem.type,attrs:{item:t.item.quizItem},on:{event:function(n){return e.onItemEvent(t,n)}}},e._l(t.computedQuestions,(function(e){return n("Question",{key:e.question.id,ref:"questions",refInFor:!0,staticClass:"sares-question",attrs:{question:e.question.quizQuestion,solution:e.question.quizQuestion.solution,value:e.response&&e.response.data,correct:e.response&&e.response.correct,editable:!1,spans:t.spans,"explanation-visible":""}})})),1)}))],2)}),[],!1,null,null,null).exports),_=n("/Yj0");function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var C,x={components:{HeaderContainer:c.a,Navbar:u.a,NavbarButton:d.a,AttemptResult:w},inject:["swayApi"],props:{attemptId:{type:Number,required:!0}},data:function(){return{loading:!1,attempt:null}},created:function(){this.update()},mounted:function(){this.setNavbarVisible(!0)},destroyed:function(){this.setNavbarVisible(!1)},methods:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.d)({setNavbarVisible:l.c.SET_NAVBAR_VISIBLE}),{update:(C=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.swayApi.getAttempt(this.attemptId);case 4:this.attempt=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),_.b({type:"error",text:"Unable to fetch quiz result."});case 10:return e.prev=10,this.loading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[1,7,10,13]])}))),function(){return C.apply(this,arguments)}),print:function(){g.A(this.$refs.result)}})},j=(n("VXAN"),Object(f.a)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("HeaderContainer",{staticClass:"sway-history",scopedSlots:e._u([{key:"header",fn:function(){return[n("Navbar",{attrs:{title:"Result",loading:e.loading,secondary:""},scopedSlots:e._u([{key:"left",fn:function(){return[n("NavbarButton",{attrs:{text:"Lobby",icon:"chevron-left",to:{name:"sway-lobby"}}})]},proxy:!0},{key:"right",fn:function(){return[n("NavbarButton",{attrs:{text:"Print",icon:"print",disabled:!e.attempt},on:{action:e.print}})]},proxy:!0}])})]},proxy:!0}])},[e._v(" "),e.attempt?n("section",{staticClass:"shis-section"},[n("div",{ref:"result"},[n("h1",{staticClass:"shis-title"},[e._v(e._s(e.attempt.quiz.name))]),e._v(" "),n("AttemptResult",{attrs:{attempt:e.attempt}})],1)]):e._e()])}),[],!1,null,null,null));t.default=j.exports},MXzO:function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("0oug"),n("ma9I"),n("TeQF"),n("fbCW"),n("x0AG"),n("yXV3"),n("4mDm"),n("uqXc"),n("2B1R"),n("+2oP"),n("ToJy"),n("pDQq"),n("Tskq"),n("T63A"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("5s+n"),n("YGK4"),n("PKPk"),n("UxlC"),n("EnZy"),n("FZtP"),n("3bBZ");var s=n("KQm4"),i=n("ODXe"),r=n("rePB"),a=n("o0o1"),o=n.n(a),l=(n("ls82"),n("HaE+")),c=n("1OyB"),u=n("vuIU"),d=n("4PS8"),h=(n("hSdx"),n("pjDv"),n("Kw5r")),p=n("HYbr"),f=(n("qePV"),n("sEfC")),m=n.n(f),v={components:{FadeTransition:n("oDEV").a},props:{name:{type:String,required:!0},lineHeight:{type:Number,default:10},flipped:{type:Boolean,default:!1},colorIndex:{type:Number,default:0}},data:function(){return{hovering:!1,nameVisible:!1}},computed:{widgetStyle:function(){if(this.flipped)return{transform:"translateY(-".concat(this.lineHeight,"px)")}},stemStyle:function(){return{height:"".concat(this.lineHeight,"px")}},cssClass:function(){var e=["ucw-color-".concat(this.colorIndex%9)];return this.flipped&&e.push("flipped"),e}},created:function(){var e=this;this.autoHideName=m()((function(){return e.nameVisible=!1}),2e3)},destroyed:function(){this.autoHideName.cancel()},methods:{showName:function(){this.nameVisible=!0,this.autoHideName()}}},b=(n("ZxlL"),n("KHd+")),g=Object(b.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user-cursor-widget",class:e.cssClass,style:e.widgetStyle,on:{mouseenter:function(t){e.hovering=!0},mouseleave:function(t){e.hovering=!1}}},[n("FadeTransition",{attrs:{duration:.1}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.hovering||e.nameVisible,expression:"hovering || nameVisible"}],staticClass:"ucw-name"},[e._v(e._s(e.name))])]),e._v(" "),n("div",{staticClass:"ucw-stem",style:e.stemStyle})],1)}),[],!1,null,null,null).exports;function y(e,t){return e.line===t.line?e.ch-t.ch:e.line-t.line}function w(e){if(0===e.length)return 0;var t=e.length-1,n=!0,s=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){t+=r.value.length}}catch(o){s=!0,i=o}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}return t}var _=function(){function e(t,n){Object(c.a)(this,e),this.wsSession=t,this.wsSession.onDiagnosticMessages(this.onDiagnosticMessages.bind(this)),this.onEditorBeforeChange=this.onEditorBeforeChange.bind(this),this.onEditorChanges=this.onEditorChanges.bind(this),this.onEditorFocus=this.onEditorFocus.bind(this),this.onEditorBlur=this.onEditorBlur.bind(this),this.onEditorCursor=this.onEditorCursor.bind(this),this.reinit(n)}return Object(u.a)(e,[{key:"reinit",value:function(e){this.rev=e.rev,this.path=e.path,this.fid=e.fid,this.content=e.buffer,this.initialCursors=e.cursors,this.floating=e.floating,this.soft=e.soft,this.readonly=e.readonly,this.cursors=new Map,this.beforeChange=!1,this.inApply=!1,this.editor&&this.editor.setValue(this.content),this.client=new p.a(this.wsSession.id,this.rev,this.send.bind(this),this.sendCursor.bind(this),this.apply.bind(this))}},{key:"update",value:function(e){this.floating=e.floating,this.soft=e.soft,this.path=e.path}},{key:"getCursor",value:function(){var e=this.editor.getDoc();return{start:this.editor.indexFromPos(e.getCursor("from")),end:this.editor.indexFromPos(e.getCursor("to"))}}},{key:"setCursor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.editor.getDoc();e.start===e.end?n.setCursor(this.editor.posFromIndex(e.start),null,{scroll:t.scroll}):n.setSelection(this.editor.posFromIndex(e.start),this.editor.posFromIndex(e.end),{scroll:t.scroll})}},{key:"send",value:function(e,t){this.wsSession.sendOp(this.fid,e.ops,t,this.getCursor())}},{key:"sendCursor",value:function(e){var t=this.editor.hasFocus?this.getCursor():null;this.wsSession.sendOp(this.fid,null,e,t)}},{key:"setEditor",value:function(e){if(this.editor!==e&&(this.editor&&(this.editor.off("beforeChange",this.onEditorBeforeChange),this.editor.off("changes",this.onEditorChanges),this.editor.off("focus",this.onEditorFocus),this.editor.off("blur",this.onEditorBlur),this.editor.off("cursor",this.onEditorCursor),this.editor.undo=this.originalUndo,this.editor.redo=this.originalRedo,this.editorSizer=null,this.editor=null),e)){this.editor=e,this.editorSizer=this.editor.getWrapperElement().querySelector(".CodeMirror-sizer");var t=!0,n=!1,s=void 0;try{for(var i,r=(this.initialCursors||[])[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;(a.focused||a.cursor.start!==a.cursor.end)&&this.applyServerCursor(a.id,a.cursor)}}catch(o){n=!0,s=o}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}this.originalUndo=this.editor.undo,this.originalRedo=this.editor.redo,this.editor.undo=this.client.undo.bind(this.client),this.editor.redo=this.client.redo.bind(this.client),this.editor.on("beforeChange",this.onEditorBeforeChange),this.editor.on("changes",this.onEditorChanges),this.editor.on("focus",this.onEditorFocus),this.editor.on("blur",this.onEditorBlur),this.editor.on("cursor",this.onEditorCursor)}}},{key:"onEditorBeforeChange",value:function(e,t){if(!this.readonly&&(this.beforeChange=!0,this.beforeCursor=this.getCursor(),t.update)){var n=t.text.map((function(e){return Object(s.a)(e).map((function(e){return e.length>1?"":e})).join("")}));t.update(void 0,void 0,n)}}},{key:"onEditorChanges",value:function(e,t){if(!this.readonly){this.content=e.getValue(),this.beforeChange=!1;for(var n=function(t){return e.indexFromPos(t)},s=function(e,t){return function(n){if(y(n,t.from)<=0)return e(n);if(y(t.to,n)<=0){var s=t.text.length-1+(t.to.line-t.from.line),i=0;return t.to.line===n.line&&(i=t.text.length<=1?-(t.to.ch-t.from.ch)+w(t.text):-t.to.ch+t.text[t.text.length-1].length),n={line:n.line+s,ch:n.ch+i},e(n)+w(t.removed)-w(t.text)}return t.from.line===n.line?e(t.from)+n.ch-t.from.ch:e(t.from)+w(t.removed.slice(0,n.line-t.from.line))+1+n.ch}},i=[],r=t.length-1;r>=0;r--){var a=t[r],o=(n=s(n,a))(a.from);i.push({start:o,end:o+w(a.removed),removed:a.removed,text:a.text,origin:a.origin})}for(var l=new p.f,c=new p.f,u=0,d=i;u<d.length;u++){var h=d[u];if("apply"!==h.origin&&"setValue"!==h.origin){var f=h.text.join("\n"),m=h.removed.join("\n"),v=new p.f;v.push(new p.i(h.start)),v.push(new p.e(f)),v.push(new p.c(m.length)),l=p.f.compose(v,l);var b=new p.f;b.push(new p.i(h.start)),b.push(new p.e(m)),b.push(new p.c(f.length)),c=p.f.compose(c,b)}}l.isNOP()||(this.client.applyClient(l,c,this.beforeCursor,this.getCursor()),this.applyLocalCursors(l))}}},{key:"onEditorFocus",value:function(){this.readonly||this.client.applyClientCursor()}},{key:"onEditorBlur",value:function(){this.readonly||this.client.applyClientCursor()}},{key:"onEditorCursor",value:function(){this.readonly||this.beforeChange||this.inApply||this.client.applyClientCursor()}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null==t.scroll&&(t.scroll=!0),this.inApply=!0;var n=this.getCursor(),s=0,i=new p.f,r=!0,a=!1,o=void 0;try{for(var l,c=e.ops[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;switch(u.type){case p.h:s+=u.value,i.push(new p.i(u.value));break;case p.d:var d=this.editor.posFromIndex(s);this.editor.replaceRange(u.value,d,d,"apply"),s+=u.value.length,i.push(new p.c(u.value.length));break;case p.b:var h=this.editor.posFromIndex(s),f=this.editor.posFromIndex(s+u.value);i.push(new p.e(this.editor.getRange(h,f))),this.editor.replaceRange("",h,f,"apply")}}}catch(m){a=!0,o=m}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return t.cursor?this.setCursor(t.cursor,{scroll:t.scroll}):this.setCursor(e.applyCursor(n),{scroll:t.scroll}),this.applyLocalCursors(e),this.inApply=!1,i}},{key:"applyServer",value:function(e,t,n){this.client.applyServer(e,t,n)}},{key:"setOtherCursor",value:function(e,t,n,s,i){var r=this.editor;if(r){var a=this.cursors.get(e);if(!a||!s&&n||(a.widget.$el.remove(),a.widget.$destroy(),a.marker&&a.marker.clear(),this.cursors.delete(e),a=null),n){var o=r.posFromIndex(n.start),l=r.posFromIndex(n.end),c=0===l.line,u=null;a?(u=a.widget,a.marker&&a.marker.clear()):(u=new h.default({el:document.createElement("div"),data:{name:t||"",lineHeight:0,flipped:!1,colorIndex:0},methods:{showName:function(){this.$refs.widget.showName()}},render:function(e){return e(g,{props:{name:this.name,lineHeight:this.lineHeight,flipped:this.flipped,colorIndex:this.colorIndex},nativeOn:{mousedown:function(e){e.preventDefault(),r.setCursor(r.posFromIndex(a.cursor.end))}},ref:"widget"})}}),this.editorSizer.appendChild(u.$el),a={widget:u,cursor:n},this.cursors.set(e,a));var d=r.cursorCoords(l,"local");u.$el.style.left=d.left+"px",u.$el.style.top=d.bottom+"px",u.flipped=c,u.lineHeight=r.defaultTextHeight(),u.colorIndex=e,i&&a.cursor.end!==n.end&&u.showName(),t&&(a.name=t,u.name=t),a.cursor=n,a.marker=null,n.start!==n.end&&(a.marker=r.getDoc().markText(o,l,{className:"CodeMirror-marker-".concat(e%9)}))}}}},{key:"applyLocalCursors",value:function(e){for(var t=0,n=Array.from(this.cursors.keys());t<n.length;t++){var s=n[t];s!==this.wsSession.id&&this.setOtherCursor(s,null,e.applyCursor(this.cursors.get(s).cursor),!1,!1)}}},{key:"applyServerCursor",value:function(e,t,n,s){e!==this.wsSession.id&&(n&&(n=this.client.applyServerCursor(n)),this.setOtherCursor(e,t,n,s,!0))}},{key:"status",value:function(){return this.client.status()}},{key:"getSuggestions",value:function(e,t,n){return e={line:e.line,character:e.ch},this.wsSession.getSuggestions(this.path,e,t,n)}},{key:"getSignatureHelp",value:function(e,t){return e={line:e.line,character:e.ch},this.wsSession.getSignatureHelp(this.path,e,t)}},{key:"onDiagnosticMessages",value:function(e){var t=e.path,n=e.messages;if(this.editor&&t===this.path){var s=n.map((function(e){return{positionStart:{line:e.range.start.line,ch:e.range.start.character},positionEnd:{line:e.range.end.line,ch:e.range.end.character},excerpt:e.message,severity:e.severity}}));this.editor.setLinterMessages(s)}}},{key:"name",get:function(){var e=this.path.split("/");return e[e.length-1]}}]),e}(),k=n("clw3");function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}n.d(t,"a",(function(){return j}));var x=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unknown",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";switch(Object(c.a)(this,e),this.type=t,this.name=n,this.parent=null,this.children=[],this.loading=!1,t){case"folder":this.expanded=!1;break;case"file":this.content=null}}return Object(u.a)(e,[{key:"appendChild",value:function(e){this.insertBefore(e,null)}},{key:"insertBefore",value:function(e,t){e.parent&&e.parent.removeChild(e);var n=t?this.children.indexOf(t):this.children.length;this.children.splice(n,0,e),e.parent=this}},{key:"removeChild",value:function(e){if(e.parent===this){e.parent=null;var t=this.children.indexOf(e);this.children.splice(t,1)}}},{key:"remove",value:function(){this.parent.removeChild(this)}},{key:"depth",get:function(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e}},{key:"path",get:function(){for(var e="",t=this;t;)e&&(e="/"+e),t.parent&&(e=t.name+e),t=t.parent;return e||(e="/"),e}}]),e}(),j=function(){function e(t,n){Object(c.a)(this,e),this.fetch=t,this.sessionService=n,this.emitter=new k.c,this.connectType=null,this.connectParam=null,this.connectOptions=null,this.workspaceSession=null,this.readonly=null,this.temporary=null,this.web=!1,this.replay=null,this.replayMaxPosition=0,this.replayTimestamps=[],this.replayState={playing:!1,realTime:!1,position:0,speed:0},this.initialOpenFile=null,this.pendingInitialOpenFiles=new Set,this.pendingInitialOpenTerminals=new Set,this.pendingCommits=new Map,this.editorSessions=[],this.filesUploading=[],this.filesUploadedCount=0,this.selectedNodes=[],this.participants=[],this.participantsMap=new Map,this.clientToParticipantMap=new Map,this.chatEvents=[],this.pingTimeout=null,this.pingSent=!1,this.latency=null,this.masqueradedUser=null,this.rootNode=new x("folder","root"),this.homeNode=new x("folder","home"),this.rootNode.appendChild(this.homeNode),this.loadingMax=0,this.loadingValue=0,this.loadedHome=!1,this.loadingTooLongTimeout=null,this.loadingReloadTimeout=null,this.loadingTitle=null,this.loadingText=null,this.loadingReload=!1,this.loadingRetries=0,this.workspaceSession=new d.c(this.fetch),this.workspaceSession.onClose(this.onWsClose.bind(this)),this.workspaceSession.onInit(this.onWsInit.bind(this)),this.workspaceSession.onListReply(this.onWsListReply.bind(this)),this.workspaceSession.onFileOtInit(this.onWsFileOtInit.bind(this)),this.workspaceSession.onFileOtSubsume(this.onWsFileOtSubsume.bind(this)),this.workspaceSession.onFileOt(this.onWsFileOt.bind(this)),this.workspaceSession.onFileOtUpdate(this.onWsFileOtUpdate.bind(this)),this.workspaceSession.onFileClose(this.onWsFileClose.bind(this)),this.workspaceSession.onFileOpenNotify(this.onWsFileOpenNotify.bind(this)),this.workspaceSession.onFileCloseNotify(this.onWsFileCloseNotify.bind(this)),this.workspaceSession.onFileCursor(this.onWsFileCursor.bind(this)),this.workspaceSession.onClientJoin(this.onWsClientJoin.bind(this)),this.workspaceSession.onClientLeave(this.onWsClientLeave.bind(this)),this.workspaceSession.onDisplayError(this.onWsDisplayError.bind(this)),this.workspaceSession.onChat(this.onWsChat.bind(this)),this.workspaceSession.onPing(this.onWsPing.bind(this)),this.workspaceSession.onSetPermission(this.onWsSetPermission.bind(this)),this.workspaceSession.onTermData(this.onWsTermData.bind(this)),this.workspaceSession.onTermUpdate(this.onWsTermUpdate.bind(this)),this.workspaceSession.onTermOpen(this.onWsTermOpen.bind(this)),this.workspaceSession.onTermClose(this.onWsTermClose.bind(this)),this.workspaceSession.onTermOpenNotify(this.onWsTermOpenNotify.bind(this)),this.workspaceSession.onReplayUpdate(this.onWsReplayUpdate.bind(this)),this.workspaceSession.onNewCommit(this.onWsNewCommit.bind(this)),this.workspaceSession.onLoadedCommit(this.onWsLoadedCommit.bind(this)),this.workspaceSession.onLoadBlob(this.onWsLoadBlob.bind(this)),this.workspaceSession.onFsopNewFile(this.onWsFsopNewFile.bind(this)),this.workspaceSession.onFsopNewFolder(this.onWsFsopNewFolder.bind(this)),this.workspaceSession.onFsopRemove(this.onWsFsopRemove.bind(this)),this.workspaceSession.onFsopSymlink(this.onWsFsopSymlink.bind(this)),this.workspaceSession.onFsopMove(this.onWsFsopMove.bind(this))}var t,n;return Object(u.a)(e,[{key:"onInit",value:function(e){return this.emitter.on("init",e)}},{key:"onUnload",value:function(e){return this.emitter.on("unload",e)}},{key:"onEditorSessionOpen",value:function(e){return this.emitter.on("editorSessionOpen",e)}},{key:"onEditorSessionClose",value:function(e){return this.emitter.on("editorSessionClose",e)}},{key:"onEditorSessionSubsume",value:function(e){return this.emitter.on("editorSessionSubsume",e)}},{key:"onFileOt",value:function(e){return this.emitter.on("fileOt",e)}},{key:"onFileCreate",value:function(e){return this.emitter.on("fileCreate",e)}},{key:"onFileRemove",value:function(e){return this.emitter.on("fileRemove",e)}},{key:"onFileFolderMove",value:function(e){return this.emitter.on("fileFolderMove",e)}},{key:"onFolderCreate",value:function(e){return this.emitter.on("folderCreate",e)}},{key:"onDisplayError",value:function(e){return this.emitter.on("displayError",e)}},{key:"onChat",value:function(e){return this.emitter.on("chat",e)}},{key:"onTerminalOpen",value:function(e){return this.emitter.on("terminalOpen",e)}},{key:"onTerminalOpenNotify",value:function(e){return this.emitter.on("terminalOpenNotify",e)}},{key:"onReplayUpdate",value:function(e){return this.emitter.on("replayUpdate",e)}},{key:"onTerminalClose",value:function(e){return this.emitter.on("terminalClose",e)}},{key:"onTerminalData",value:function(e){return this.emitter.on("terminalData",e)}},{key:"onTerminalUpdate",value:function(e){return this.emitter.on("terminalUpdate",e)}},{key:"onLoadedCommit",value:function(e){return this.emitter.on("loadedCommit",e)}},{key:"reload",value:function(){this.load(this.connectType,this.connectParam,this.connectOptions)}},{key:"load",value:(n=Object(l.a)(o.a.mark((function e(t,n){var s,i=this,r=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r.length>2&&void 0!==r[2]?r[2]:{},this.unload(),this.connectType=t,this.connectParam=n,this.connectOptions=s,this.connectType){e.next=7;break}throw new Error("Missing connectType");case 7:return this.loadingValue=0,this.loadingMax=1,this.loadingTitle="Loading workspace...",this.loadingTooLongTimeout=setTimeout((function(){i.loadingTooLongTimeout=null,i.loadingText="This is taking a bit longer than usual.",i.loadingReload=!0}),5e3),e.prev=11,e.next=14,this.workspaceSession.connect(this.connectType,this.connectParam,this.connectOptions);case 14:this.masqueradedUser=e.sent,e.next=21;break;case 17:e.prev=17,e.t0=e.catch(11),e.t0&&403===e.t0.status?this.loadingFail("Forbidden","You do not have access to this workspace.",!1):this.loadingReconnect();case 21:case"end":return e.stop()}}),e,this,[[11,17]])}))),function(e,t){return n.apply(this,arguments)})},{key:"unload",value:function(){this.workspaceSession.close(),this.readonly=null,this.temporary=null,this.replay=null,this.replayMaxPosition=0,this.replayState.playing=!1,this.replayState.realTime=!1,this.replayState.position=0,this.replayState.speed=0,this.initialOpenFile=null,this.pendingInitialOpenFiles.clear(),this.pendingInitialOpenTerminals.clear(),this.editorSessions=[],this.selectedNodes=[],this.participants=[],this.participantsMap.clear(),this.clientToParticipantMap.clear(),this.chatEvents=[],this.pingSent=!1,this.latency=null,null!=this.pingTimeout&&(clearTimeout(this.pingTimeout),this.pingTimeout=null),this.loadingMax=0,this.loadingValue=0,this.loadedHome=!1,this.loadingTitle=null,this.loadingText=null,this.loadingReload=!1,null!==this.loadingTooLongTimeout&&(clearTimeout(this.loadingTooLongTimeout),this.loadingTooLongTimeout=null),null!==this.loadingReloadTimeout&&(clearTimeout(this.loadingReloadTimeout),this.loadingReloadTimeout=null);var e=!0,t=!1,n=void 0;try{for(var s,i=this.pendingCommits.values()[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){s.value.reject()}}catch(r){t=!0,n=r}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.pendingCommits.clear(),this.emitter.emit("unload")}},{key:"openEditorSession",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.editorSessions.find((function(t){return t.path===e}));if((!n||n.soft&&!t.soft)&&(this.workspaceSession.openFile(e,{soft:t.soft,join:t.join}),!n)){var s=this.findNode(e);s&&(s.loading=!0)}}},{key:"closeEditorSession",value:function(e){var t=this.editorSessions.findIndex((function(t){return t.path===e}));if(-1!==t){var n=this.editorSessions[t];this.editorSessions.splice(t,1),this.workspaceSession.closeFile(n.fid),this.emitter.emit("editorSessionClose",{session:n})}}},{key:"fileFolderCreate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.workspaceSession.newFileFolder(e,t)}},{key:"fileFolderMove",value:function(e,t,n){e!==t&&this.workspaceSession.moveFileFolder(e,t,n)}},{key:"fileFolderRemove",value:function(e,t){this.workspaceSession.removeFileFolder(e,t)}},{key:"loadFolderContents",value:function(e){this.workspaceSession.loadFolderContents(e)}},{key:"terminalOpen",value:function(e){this.workspaceSession.terminalOpen(e)}},{key:"terminalClose",value:function(e){this.workspaceSession.terminalClose(e)}},{key:"terminalKill",value:function(e){this.workspaceSession.terminalKill(e)}},{key:"terminalInput",value:function(e,t){this.workspaceSession.terminalInput(e,t)}},{key:"terminalResize",value:function(e,t,n){this.workspaceSession.terminalResize(e,t,n)}},{key:"getWebPreviewUrl",value:function(e){return this.workspaceSession.getWebPreviewUrl(e)}},{key:"getVncUrl",value:function(){return this.workspaceSession.getVncUrl()}},{key:"getJupyterUrl",value:function(e){return this.workspaceSession.getJupyterUrl(e)}},{key:"getRStudioUrl",value:function(){return this.workspaceSession.getRStudioUrl()}},{key:"getNetworkProcessUrl",value:function(e,t){return"*"===e&&(e="localhost"),e=e.replace(/\./g,"-"),this.workspaceSession.getNetworkProcessUrl(e,t)}},{key:"upload",value:(t=Object(l.a)(o.a.mark((function e(t,n){var s,i,r,a,l,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s=!0,i=!1,r=void 0,e.prev=3,a=t[Symbol.iterator]();!(s=(l=a.next()).done);s=!0)c=l.value,this.filesUploading.push(c.path);e.next=11;break;case 7:e.prev=7,e.t0=e.catch(3),i=!0,r=e.t0;case 11:e.prev=11,e.prev=12,s||null==a.return||a.return();case 14:if(e.prev=14,!i){e.next=17;break}throw r;case 17:return e.finish(14);case 18:return e.finish(11);case 19:return e.prev=19,e.next=22,this.workspaceSession.uploadFiles(t,n);case 22:return e.abrupt("return",e.sent);case 23:return e.prev=23,this.filesUploadedCount+=t.length,this.filesUploadedCount===this.filesUploading.length&&(this.filesUploadedCount=0,this.filesUploading.splice(0,this.filesUploading.length)),e.finish(23);case 27:case"end":return e.stop()}}),e,this,[[3,7,11,19],[12,,14,18],[19,,23,27]])}))),function(e,n){return t.apply(this,arguments)})},{key:"getDownloadUrl",value:function(e){return this.workspaceSession.getDownloadUrl(e)}},{key:"commit",value:function(){var e=this;return new Promise((function(t,n){if(!e.workspaceSession||!e.workspaceSession.connected)return n("disconnected");var s={resolve:t,reject:n},i="".concat(Math.random(),"|").concat(+new Date);e.pendingCommits.set(i,s),e.workspaceSession.commit({id:i})}))}},{key:"findNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rootNode;if(!e||"/"===e)return t;"/"===e[0]&&(e=e.slice(1));var n=e.split("/"),s=!0,i=!1,r=void 0;try{for(var a,o=t.children[Symbol.iterator]();!(s=(a=o.next()).done);s=!0){var l=a.value;if(l.name===n[0])return 1===n.length?l:this.findNode(n.slice(1).join("/"),l)}}catch(c){i=!0,r=c}finally{try{s||null==o.return||o.return()}finally{if(i)throw r}}return null}},{key:"findOrCreateNestedFolderNode",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rootNode;if(!e)return n;"/"===e[0]&&(e=e.substr(1));var s=e.indexOf("/");-1===s?(t=e,e=""):(t=e.substring(0,s),e=e.substring(s+1));var i=this.findNode(t,n);return i||(i=new x("folder",t),n.appendChild(i)),this.findOrCreateNestedFolderNode(e,i)}},{key:"dirname",value:function(e){var t=e.lastIndexOf("/");return-1===t?e:e.slice(0,t)}},{key:"basename",value:function(e){var t=e.lastIndexOf("/");return-1===t?e:e.slice(t+1)}},{key:"expandNodeRecursively",value:function(e){for(e=e.parent;e;)e.expanded=!0,e=e.parent}},{key:"loadingFail",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.loadingTitle=e,this.loadingText=t,this.loadingReload=n,this.loadingValue=0,this.loadingMax=0,null!==this.loadingTooLongTimeout&&(clearTimeout(this.loadingTooLongTimeout),this.loadingTooLongTimeout=null)}},{key:"loadingReconnect",value:function(){var e=this;this.loadingRetries<5?(this.loadingRetries++,this.loadingReloadTimeout=setTimeout((function(){e.loadingReloadTimeout=null,e.reload(),e.loadingTitle="Reconnecting...",e.loadingText="Sit tight while we re-establish the connection."}),1===this.loadingRetries?0:1e3),this.loadingTitle="Reconnecting...",this.loadingText="Sit tight while we re-establish the connection."):this.loadingFail("Unable to connect","Check your network connection and try again.")}},{key:"prepareParticipant",value:function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{online:!1})}},{key:"prepareChatMessage",value:function(e){return{type:"message",userId:+e.uid,user:this.participantsMap.get(+e.uid),at:new Date(e.at),text:e.message}}},{key:"sendChatMessage",value:function(e){this.workspaceSession.sendChatMessage(e)}},{key:"replayUpdate",value:function(e){return this.workspaceSession.replayUpdate(e)}},{key:"ping",value:function(){this.pingSent||(this.pingSent=!0,this.workspaceSession.ping())}},{key:"onWsClose",value:function(e){if(1e3===e.code)0;else switch(e.code){case 1013:this.loadingFail("Workspace is busy right now","Try again later.");break;case 4001:this.loadingFail("Workspace closed due to inactivity","");break;case 4e3:this.loadingFail("Too many connections open","Try again later.");break;default:this.loadingReconnect()}null!=this.pingTimeout&&(clearTimeout(this.pingTimeout),this.pingTimeout=null)}},{key:"onWsInit",value:function(e){var t=this;this.readonly=e.read_only,this.temporary=e.temporary,this.web=e.web,this.replay=e.replay,this.replay&&(this.replayMaxPosition=e.replay_state.max_position,this.replayTimestamps=e.replay_state.timestamps,this.replayState.playing=e.replay_state.controls.playing,this.replayState.realTime=e.replay_state.controls.real_time,this.replayState.position=e.replay_state.controls.position,this.replayState.speed=e.replay_state.controls.speed),this.loadingRetries=0,this.loadFolderContents("/home");var n=e.files_open||[];if(n.length){var s=!0,r=!1,a=void 0;try{for(var o,l=n[Symbol.iterator]();!(s=(o=l.next()).done);s=!0){var c=o.value;c.last_edit=new Date(c.last_edit),this.pendingInitialOpenFiles.add(c.path),this.openEditorSession(c.path,{soft:c.soft})}}catch(T){r=!0,a=T}finally{try{s||null==l.return||l.return()}finally{if(r)throw a}}n.sort((function(e,t){return t.last_edit-e.last_edit})),this.initialOpenFile=n[0].path}var u=e.programs||[],d=!0,h=!1,p=void 0;try{for(var f,m=u[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){var v=f.value;this.pendingInitialOpenTerminals.add(v),this.terminalOpen({id:v,cols:80,rows:40})}}catch(T){h=!0,p=T}finally{try{d||null==m.return||m.return()}finally{if(h)throw p}}this.participants=Object.keys(e.users).map((function(n){return t.prepareParticipant(e.users[n])})),this.participantsMap=new Map(this.participants.map((function(e){return[e.id,e]}))),this.clientToParticipantMap=new Map(Object.entries(e.clients).map((function(e){var t=Object(i.a)(e,2);return[+t[0],t[1]]})));var b=!0,g=!1,y=void 0;try{for(var w,_=this.clientToParticipantMap.values()[Symbol.iterator]();!(b=(w=_.next()).done);b=!0){var k=w.value;this.participantsMap.get(k).online=!0}}catch(T){g=!0,y=T}finally{try{b||null==_.return||_.return()}finally{if(g)throw y}}var C=!0,x=!1,j=void 0;try{for(var O,S=e.chat.messages[Symbol.iterator]();!(C=(O=S.next()).done);C=!0){var E=O.value;this.chatEvents.push(this.prepareChatMessage(E))}}catch(T){x=!0,j=T}finally{try{C||null==S.return||S.return()}finally{if(x)throw j}}this.loadingMax+=n.length+u.length+1,this.loadingValue++,this.ping(),this.emitter.emit("init")}},{key:"onWsListReply",value:function(e){var t=e.listing,n=e.dir,i=e.clear_children;t=t||[],this.loadedHome||"/home"!==n||(this.loadedHome=!0,this.loadingValue++);var r=this.findOrCreateNestedFolderNode(n),a=new Map,o=!0,l=!1,c=void 0;try{for(var u,d=t[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var h=u.value;a.set(h.name,h)}}catch(W){l=!0,c=W}finally{try{o||null==d.return||d.return()}finally{if(l)throw c}}var p=new Set(r.children.map((function(e){return e.name}))),f=new Set(t.map((function(e){return e.name}))),m=new Set(Object(s.a)(p).filter((function(e){return!f.has(e)}))),v=new Set(Object(s.a)(f).filter((function(e){return!p.has(e)}))),b=new Set(Object(s.a)(f).filter((function(e){return p.has(e)}))),g=!0,y=!1,w=void 0;try{for(var _,k=r.children[Symbol.iterator]();!(g=(_=k.next()).done);g=!0){var C=_.value;b.has(C.name)&&C.type!==a.get(C.name).type&&(m.add(C.name),v.add(C.name))}}catch(W){y=!0,w=W}finally{try{g||null==k.return||k.return()}finally{if(y)throw w}}var j=!0,O=!1,S=void 0;try{for(var E,T=r.children.slice()[Symbol.iterator]();!(j=(E=T.next()).done);j=!0){var I=E.value;m.has(I.name)&&I.remove()}}catch(W){O=!0,S=W}finally{try{j||null==T.return||T.return()}finally{if(O)throw S}}var D=!0,P=!1,A=void 0;try{for(var N,R=t[Symbol.iterator]();!(D=(N=R.next()).done);D=!0){var M=N.value;if(v.has(M.name)){var L=new x(M.type,M.name);r.appendChild(L)}}}catch(W){P=!0,A=W}finally{try{D||null==R.return||R.return()}finally{if(P)throw A}}if(i)for(var F=[r];F.length>0;){var B=F.pop();B.contentLoading=!0,this.loadFolderContents(B.path);var q=!0,$=!1,U=void 0;try{for(var z,V=B.children[Symbol.iterator]();!(q=(z=V.next()).done);q=!0){var H=z.value;H.expanded&&F.push(H)}}catch(W){$=!0,U=W}finally{try{q||null==V.return||V.return()}finally{if($)throw U}}}r.contentLoading=!1}},{key:"onWsFileOtInit",value:function(e){var t;e.readonly=this.readonly;var n=this.editorSessions.find((function(t){return t.fid===e.fid}));n?t=n:(t=new _(this.workspaceSession,e),this.editorSessions.push(t)),this.pendingInitialOpenFiles.has(e.path)&&this.loadingValue++;var s=this.findNode(e.path);s&&(s.loading=!1),this.emitter.emit("editorSessionOpen",{session:t})}},{key:"onWsFileOtSubsume",value:function(e){var t=this.editorSessions.find((function(t){return t.fid===e.prev_fid}));if(t){var n=t.path;t.reinit(e.init);var s=this.findNode(t.path);s&&(s.loading=!1),this.emitter.emit("editorSessionSubsume",{session:t,oldPath:n})}}},{key:"onWsFileOt",value:function(e){var t=Object(s.a)(this.editorSessions.values()).find((function(t){return t.fid===e.fid}));if(t){t.applyServer(p.f.fromJSON(e.op),e.new_rev,e.from);var n=!0,i=!1,r=void 0;try{for(var a,o=this.editorSessions[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var l=a.value;if(l.fid===e.fid){var c=this.participantsMap.get(this.clientToParticipantMap.get(e.from)).name;l.applyServerCursor(e.from,c,e.cursor,!1)}else l.applyServerCursor(e.from,null,null,!0)}}catch(u){i=!0,r=u}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}this.emitter.emit("fileOt",{session:t})}}},{key:"onWsFileOtUpdate",value:function(e){var t=this.editorSessions.find((function(t){return t.fid===e.fid}));t&&t.update(e)}},{key:"onWsFileClose",value:function(e){var t=e.fid,n=this.editorSessions.findIndex((function(e){return e.fid===t}));if(-1!==n){var s=this.editorSessions[n];this.editorSessions.splice(n,1),this.emitter.emit("editorSessionClose",{session:s})}}},{key:"onWsFileOpenNotify",value:function(e){var t=e.path,n=e.soft;this.syncOpenFiles&&this.openEditorSession(t,{soft:n,join:!0})}},{key:"onWsFileCloseNotify",value:function(e){var t=e.path;this.syncOpenFiles&&this.closeEditorSession(t)}},{key:"onWsFileCursor",value:function(e){var t=e.fid,n=e.from,s=e.cursor,i=!0,r=!1,a=void 0;try{for(var o,l=this.editorSessions[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value;if(c.fid===t){var u=this.participantsMap.get(this.clientToParticipantMap.get(n)).name;c.applyServerCursor(n,u,s,!1)}else c.applyServerCursor(n,null,null,!0)}}catch(d){r=!0,a=d}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}}},{key:"onWsClientJoin",value:function(e){var t=e.id,n=e.user,s=this.participantsMap.get(n.id);s||(s=this.prepareParticipant(n),this.participants.push(s),this.participantsMap.set(s.id,s)),this.clientToParticipantMap.set(t,s.id);var i=!s.online;s.online=!0,n.id!==this.sessionService.user.id&&i&&this.chatEvents.push({type:"clientJoin",at:new Date,user:s})}},{key:"onWsClientLeave",value:function(e){var t=e.id,n=this.participantsMap.get(this.clientToParticipantMap.get(t));this.clientToParticipantMap.delete(t),n.online=new Set(this.clientToParticipantMap.values()).has(n.id);var s=!0,i=!1,r=void 0;try{for(var a,o=this.editorSessions[Symbol.iterator]();!(s=(a=o.next()).done);s=!0){a.value.applyServerCursor(t,null,null,!0)}}catch(l){i=!0,r=l}finally{try{s||null==o.return||o.return()}finally{if(i)throw r}}n.online||this.chatEvents.push({type:"clientLeave",at:new Date,user:n})}},{key:"onWsDisplayError",value:function(e){var t=e.type,n=e.data;if("file_open_rejected"===t){var s=this.findNode(n.path);s&&s.loading&&(s.loading=!1,this.emitter.emit("displayError",{type:t,data:n}))}else this.emitter.emit("displayError",{type:t,data:n})}},{key:"onWsChat",value:function(e){var t=this.prepareChatMessage(e);this.chatEvents.push(t),this.emitter.emit("chat",{event:t})}},{key:"onWsPing",value:function(e){var t=this,n=e.timestamp,s=new Date-new Date(n);this.latency=null===this.latency?s:.25*this.latency+.75*s,this.pingSent=!1,this.pingTimeout=setTimeout((function(){t.pingTimeout=null,t.ping()}),5e3)}},{key:"onWsSetPermission",value:function(e){this.readonly=e.readonly,this.emitter.emit("setPermission",e);var t=!0,n=!1,s=void 0;try{for(var i,r=this.editorSessions[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){i.value.readonly=this.readonly}}catch(a){n=!0,s=a}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}}},{key:"onWsTermData",value:function(e){this.emitter.emit("terminalData",e)}},{key:"onWsTermUpdate",value:function(e){this.emitter.emit("terminalUpdate",e)}},{key:"onWsTermOpen",value:function(e){this.pendingInitialOpenTerminals.delete(e.id)&&this.loadingValue++,this.emitter.emit("terminalOpen",e)}},{key:"onWsTermClose",value:function(e){this.emitter.emit("terminalClose",e)}},{key:"onWsTermOpenNotify",value:function(e){this.emitter.emit("terminalOpenNotify",e)}},{key:"onWsReplayUpdate",value:function(e){this.replayState.playing=e.playing,this.replayState.realTime=e.real_time,this.replayState.position=e.position,this.replayState.speed=e.speed,this.emitter.emit("replayUpdate",this.replayState)}},{key:"onWsNewCommit",value:function(e){var t=e.commit,n=e.context;if(n){var s=this.pendingCommits.get(n.id);s&&(this.pendingCommits.delete(n.id),s.resolve(t.hash))}}},{key:"onWsLoadedCommit",value:function(){this.emitter.emit("loadedCommit")}},{key:"onWsLoadBlob",value:function(e){var t=e.path;this.onWsFsopNewFile({path:t})}},{key:"onWsFsopNewFile",value:function(e){var t=e.path;if(!this.findNode(t)){var n=this.basename(t),s=this.dirname(t),i=new x("file",n);this.findOrCreateNestedFolderNode(s).appendChild(i),this.emitter.emit("fileCreate",{path:t})}}},{key:"onWsFsopNewFolder",value:function(e){var t=e.path;this.findOrCreateNestedFolderNode(t),this.emitter.emit("folderCreate",{path:t})}},{key:"onWsFsopRemove",value:function(e){var t=e.path,n=this.findNode(t);n&&(this.selectedNodes=this.selectedNodes.filter((function(e){return e!==n})),n.remove(),this.emitter.emit("fileRemove",{path:t}))}},{key:"onWsFsopSymlink",value:function(e){var t=e.link,n=this.findNode(this.dirname(t));if(n){var s=this.findNode(t);s&&s.remove(),s=new x("symlink",this.basename(t)),n.appendChild(s)}}},{key:"onWsFsopMove",value:function(e){var t=e.srcPath,n=e.destPath,s=e.type,i=this.findNode(t),r=this.findNode(n),a=this.findNode(this.dirname(n)),o=this.editorSessions.find((function(e){return e.path===t}));if(o&&(o.path=n),i&&a&&!r)i.name=this.basename(n),a.appendChild(i);else if(i)i.remove(),this.selectedNodes=this.selectedNodes.filter((function(e){return e!==i}));else if(!r&&a){var l=new x(s,this.basename(n));a.appendChild(l)}this.emitter.emit("fileFolderMove",{srcPath:t,destPath:n,type:s})}},{key:"loading",get:function(){return 0===this.loadingMax||this.loadingValue<this.loadingMax}},{key:"syncOpenFiles",get:function(){return this.readonly}}]),e}()},Ma2O:function(e,t,n){},MaaL:function(e,t,n){},Me4u:function(e,t,n){"use strict";n.r(t);var s,i=n("o0o1"),r=n.n(i),a=(n("ls82"),n("HaE+")),o=(n("4D86"),n("NC1X")),l=n("IbLZ"),c=n("/Yj0"),u={name:"StartResetPassword",components:{Spinner:o.a,EdField:l.a},inject:["userApi","sessionService"],data:function(){return{password1:"",password2:"",loading:!1,errorMessage:null,appbar:{title:"Reset Password"}}},created:function(){this.sessionService.logOut()},methods:{reset:(s=Object(a.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loading){e.next=2;break}return e.abrupt("return");case 2:if(this.password1===this.password2){e.next=5;break}return this.errorMessage="Passwords do not match.",e.abrupt("return");case 5:return this.loading=!0,e.prev=6,e.next=9,this.userApi.resetPassword(this.$route.params.token,this.password1);case 9:t=e.sent,e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(6),400===e.t0.status&&"string"==typeof e.t0.data&&(c.b({type:"error",text:"Token is invalid. Request another password reset."}),n={},this.$route.query.email&&(n.email=this.$route.query.email),this.$router.push({name:"forgot-password",query:n})),e.abrupt("return");case 16:return e.prev=16,this.loading=!1,e.finish(16);case 19:return e.prev=19,e.next=22,this.sessionService.logInWithToken(t);case 22:e.next=29;break;case 24:return e.prev=24,e.t1=e.catch(19),c.b({type:"success",text:"Password reset successful."}),this.$router.push({name:"login"}),e.abrupt("return");case 29:c.b({type:"success",text:"Password reset successful. Welcome back!"}),this.$router.push({name:"dashboard"});case 31:case"end":return e.stop()}}),e,this,[[6,12,16,19],[19,24]])}))),function(){return s.apply(this,arguments)})}},d=n("KHd+"),h=Object(d.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"start-container"},[n("form",{staticClass:"start-form",attrs:{method:"POST",novalidate:""},on:{submit:function(t){return t.preventDefault(),e.reset(t)}}},[n("div",{staticClass:"start-title"},[n("RouterLink",{attrs:{to:"/"}},[e._v("Ed")])],1),e._v(" "),e.errorMessage?n("div",{staticClass:"start-message"},[e._v(e._s(e.errorMessage))]):e._e(),e._v(" "),e.$route.query.email?n("EdField",{staticClass:"start-field",scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Email")]},proxy:!0}],null,!1,1485928759)},[e._v(" "),n("input",{staticClass:"start-input",attrs:{type:"text",name:"email",readonly:"",disabled:e.loading},domProps:{value:e.$route.query.email}})]):e._e(),e._v(" "),n("EdField",{staticClass:"start-field",scopedSlots:e._u([{key:"label",fn:function(){return[e._v("New password")]},proxy:!0}])},[e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password1,expression:"password1"}],staticClass:"start-input",attrs:{type:"password",autocomplete:"new-password",disabled:e.loading,autofocus:""},domProps:{value:e.password1},on:{input:function(t){t.target.composing||(e.password1=t.target.value)}}})]),e._v(" "),n("EdField",{staticClass:"start-field",scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Retype password")]},proxy:!0}])},[e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password2,expression:"password2"}],staticClass:"start-input",attrs:{type:"password",autocomplete:"new-password",disabled:e.loading},domProps:{value:e.password2},on:{input:function(t){t.target.composing||(e.password2=t.target.value)}}})]),e._v(" "),n("button",{staticClass:"start-btn",attrs:{type:"submit",disabled:e.loading}},[e._v("\n\t\t\tReset password\n\t\t\t"),e.loading?n("Spinner",{staticClass:"start-spinner"}):e._e()],1),e._v(" "),n("div",{staticClass:"start-footer"},[n("p",[n("RouterLink",{attrs:{to:{name:"login"}}},[e._v("Back to login")])],1)])],1)])}),[],!1,null,null,null);t.default=h.exports},Mg4X:function(e,t,n){"use strict";var s=n("wShB");n.n(s).a},Mpt7:function(e,t,n){},MsQW:function(e,t,n){"use strict";var s=n("1N12");n.n(s).a},MutR:function(e,t,n){"use strict";var s=n("ZoNg");n.n(s).a},Mw30:function(e,t,n){},MxFh:function(e,t,n){"use strict";var s=n("aOZV");n.n(s).a},MxTH:function(e,t,n){"use strict";var s=n("4e0k");n.n(s).a},"N+Un":function(e,t,n){"use strict";var s={components:{Icon:n("WmPt").a},props:{icon:{type:String,default:null}}},i=(n("IMBn"),n("KHd+")),r=Object(i.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",e._g(e._b({staticClass:"actionbar-action"},"button",e.$attrs,!1),e.$listeners),[e.icon?n("Icon",{staticClass:"actionbar-action-icon",attrs:{icon:e.icon}}):e._e(),e._v(" "),n("span",[e._t("default")],2)],1)}),[],!1,null,null,null);t.a=r.exports},"N+tE":function(e,t,n){"use strict";var s={components:{Icon:n("WmPt").a},props:{value:{type:Boolean,default:!1}},methods:{onClick:function(e){this.$emit("input",!this.value),this.$emit("click",e)}}},i=(n("n+Vu"),n("KHd+")),r=Object(i.a)(s,(function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"disclosure-button",class:this.value&&"disbut-on",attrs:{type:"button"},on:{click:this.onClick}},[t("Icon",{staticClass:"disbut-triangle",attrs:{icon:"disclosure-triangle"}}),this._v(" "),t("span",[this._t("default")],2)],1)}),[],!1,null,null,null);t.a=r.exports},N8J4:function(e,t,n){},N9s4:function(e,t,n){"use strict";var s=n("KZ7v");n.n(s).a},NEGH:function(e,t,n){},NEWJ:function(e,t,n){"use strict";var s=n("46bE");n.n(s).a},NKE0:function(e,t,n){"use strict";var s=n("da2A");n.n(s).a},NSUc:function(e,t,n){"use strict";var s=n("Yvi7");n.n(s).a},NTVx:function(e,t,n){},Nc8F:function(e,t,n){},Ndut:function(e,t,n){},Nia9:function(e,t,n){"use strict";var s=n("dDJA");n.n(s).a},NjsY:function(e,t,n){"use strict";var s=n("8CHx");n.n(s).a},Nk55:function(e,t,n){},Nli1:function(e,t,n){},NtlG:function(e,t,n){"use strict";n("yyme");var s=n("bdgK"),i={data:function(){return{fullWidth:0,leftWidth:0,fillWidth:0,rightWidth:0}},computed:{fillStyle:function(){var e=this.fullWidth,t=this.leftWidth,n=this.fillWidth,s=this.rightWidth,i=0,r=t/e,a=s/e;if(Math.abs(r-a)<.3){var o=t-(e-n)/2,l=(e+n)/2-(e-s);i=e/2-(t+e-s)/2+Math.max(0,o)-Math.max(0,l)}return{left:i+"px"}}},mounted:function(){var e=this;this.resizeObserver=new s.a((function(){return e.updateSizes()})),this.resizeObserver.observe(this.$el),this.resizeObserver.observe(this.$refs.left),this.resizeObserver.observe(this.$refs.fill),this.resizeObserver.observe(this.$refs.right)},destroyed:function(){this.resizeObserver&&this.resizeObserver.disconnect()},methods:{updateSizes:function(){this.fullWidth=this.$el.offsetWidth,this.leftWidth=this.$refs.left.offsetWidth,this.fillWidth=this.$refs.fill.offsetWidth,this.rightWidth=this.$refs.right.offsetWidth}}},r=(n("5qpF"),n("KHd+")),a=Object(r.a)(i,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"center-layout"},[t("div",{ref:"left",staticClass:"center-layout-left"},[this._t("left")],2),this._v(" "),t("div",{ref:"fill",staticClass:"center-layout-fill",style:this.fillStyle},[this._t("default")],2),this._v(" "),t("div",{ref:"right",staticClass:"center-layout-right"},[this._t("right")],2)])}),[],!1,null,null,null);t.a=a.exports},NwDb:function(e,t,n){"use strict";var s=n("ZDx+");n.n(s).a},"O/Wd":function(e,t,n){"use strict";var s=n("ch+2");n.n(s).a},O0Ln:function(e,t,n){},OAlV:function(e,t,n){e.exports=n.p+"assets/table-view-cell-accessory-checkmark.fd3e108f.svg"},OBDa:function(e,t,n){"use strict";var s=n("NC1X"),i=n("oDEV"),r={components:{Spinner:s.a,FadeTransition:i.a,RenderFooter:{functional:!0,render:function(e,t){var n=t.parent.$scopedSlots,s=n.primaryActions&&n.primaryActions()||[],i=n.secondaryActions&&n.secondaryActions()||[];return(s.length>0||i.length>0)&&e("footer",{staticClass:"dlay-footer"},[i.length>0&&e("div",{staticClass:"dlay-footer-secondary"},[i]),s.length>0&&e("div",{staticClass:"dlay-footer-primary"},[s])])}}},props:{title:{type:String,default:null},subtitle:{type:String,default:null},disabled:{type:Boolean,default:!1},noPadding:{type:Boolean,default:!1}}},a=(n("WO9I"),n("KHd+")),o=Object(a.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"dialog-layout",class:!e.noPadding&&"dlay-padded",on:{submit:function(t){return t.preventDefault(),e.$emit("submit")}}},[e.title||e.subtitle?n("header",{staticClass:"dlay-header"},[e.title?n("h1",{staticClass:"dlay-title"},[e._v(e._s(e.title))]):e._e(),e._v(" "),e.subtitle?n("h2",{staticClass:"dlay-subtitle"},[e._v(e._s(e.subtitle))]):e._e()]):e._e(),e._v(" "),n("div",{staticClass:"dlay-body"},[e._t("default")],2),e._v(" "),n("RenderFooter"),e._v(" "),n("FadeTransition",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.disabled,expression:"disabled"}],staticClass:"dlay-overlay"},[n("Spinner",{staticClass:"dlay-spinner"})],1)])],1)}),[],!1,null,null,null);t.a=o.exports},OCSe:function(e,t,n){"use strict";var s=n("VQUp");n.n(s).a},ODnl:function(e,t,n){"use strict";var s=n("1Fsf");n.n(s).a},OEaX:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("4mDm"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("5s+n"),n("PKPk"),n("UxlC"),n("FZtP"),n("3bBZ");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("L2JU"),l=n("xqs2"),c=n("clw3"),u=n("t19P"),d=n("Oshs"),h=(n("SYor"),n("/Yj0"));function p(e){return e.trim().toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}var f=n("SBq4"),m=n("OBDa"),v=n("4K9I"),b=n("xtk+"),g=n("6XG0"),y=n("IbLZ");function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var _,k={directives:{Autofocus:f.a},components:{DialogLayout:m.a,EdButton:v.a,EdInput:b.a,EdCheck:g.a,EdField:y.a},data:function(){return{loading:!1,name:"",selfChannelCreation:!1}},computed:{valid:function(){return""!==this.name.trim()}},methods:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.b)("chat",{createChannelSet:l.a.CREATE_CHANNEL_SET}),{fixName:function(){this.name=p(this.name)},onSubmit:(_=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.valid&&!this.loading){e.next=2;break}return e.abrupt("return");case 2:return this.loading=!0,e.prev=3,e.next=6,this.createChannelSet({name:this.name,selfChannelCreation:this.selfChannelCreation});case 6:t=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),h.b({type:"error",title:"Unable to create channel set",text:"Try again later."}),e.abrupt("return");case 13:return e.prev=13,this.loading=!1,e.finish(13);case 16:this.$emit("done",t);case 17:case"end":return e.stop()}}),e,this,[[3,9,13,16]])}))),function(){return _.apply(this,arguments)})})},C=(n("C/Bq"),n("KHd+")),x=Object(C.a)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogLayout",{attrs:{title:"New Channel Set",disabled:e.loading},on:{submit:e.onSubmit},scopedSlots:e._u([{key:"primaryActions",fn:function(){return[n("EdButton",{staticClass:"primary",attrs:{type:"submit",disabled:e.loading||!e.valid}},[e._v("Create")])]},proxy:!0}])},[n("div",{staticClass:"sncs-layout"},[n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Name")]},proxy:!0},{key:"description",fn:function(){return[e._v("The channel set name must consist of only lowercase letters, numbers and hyphens. Spaces are not allowed.")]},proxy:!0}])},[e._v(" "),e._v(" "),n("EdInput",{directives:[{name:"autofocus",rawName:"v-autofocus"}],staticClass:"sncs-input",attrs:{disabled:e.loading},on:{blur:e.fixName},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),n("EdField",[n("EdCheck",{attrs:{label:"Self Channel Creation",description:"Allow students to create their own private channels within this channel set.",disabled:e.loading},model:{value:e.selfChannelCreation,callback:function(t){e.selfChannelCreation=t},expression:"selfChannelCreation"}})],1)],1)])}),[],!1,null,null,null).exports,j=(n("2B1R"),n("EnZy"),n("hSdx")),O=n("5G72"),S=n("4cYw");function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I={directives:{Autofocus:f.a},components:{DialogLayout:m.a,EdButton:v.a,EdInput:b.a,EdTextarea:O.a,EdSelect:S.a,EdCheck:g.a,EdField:y.a},props:{channelSet:{type:Object,default:void 0}},data:function(){return{loading:!1,name:"",names:"",access:"private",maxMembers:null,selfInvites:!1,bulk:!1}},computed:T({},Object(o.c)(["isStaff"]),{valid:function(){return this.bulk&&""!==this.names.trim()||!this.bulk&&""!==this.name.trim()}}),methods:T({},Object(o.b)("chat",{createChannel:l.a.CREATE_CHANNEL}),{fixName:function(){this.name=p(this.name)},fixNames:function(){this.names=this.names.split("\n").map(p).filter(Boolean).join("\n")},onSubmit:function(){var e=Object(r.a)(i.a.mark((function e(){var t,n,s,r,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.valid&&!this.loading){e.next=2;break}return e.abrupt("return");case 2:return t=(this.bulk?this.names:this.name).split("\n").map((function(e){return e.trim()})).filter(Boolean),this.loading=!0,n={setId:this.channelSet&&this.channelSet.id,access:this.access},"private"===this.access?(n.maxMembers=this.maxMembers,n.selfInvites=this.selfInvites):(n.maxMembers=null,n.selfInvites=!1),e.next=8,j.promiseMap(t,(function(e){return a.createChannel(T({},n,{name:e}))}),{concurrency:1});case 8:(s=e.sent).some((function(e){return!e.success}))&&h.b({type:"error",title:"Unable to create one or more channels",text:"Try again later."}),r=s.filter((function(e){return e.success})).map((function(e){return e.value})),this.loading=!1,this.$emit("done",r);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()})},D=(n("3J1K"),Object(C.a)(I,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogLayout",{staticClass:"sheet-create-channel",attrs:{title:"New Channel",disabled:e.loading},on:{submit:e.onSubmit},scopedSlots:e._u([{key:"primaryActions",fn:function(){return[n("EdButton",{staticClass:"primary",attrs:{type:"submit",disabled:e.loading||!e.valid}},[e._v("Create")])]},proxy:!0}])},[n("div",{staticClass:"scc-layout"},[e.channelSet?n("p",{staticClass:"scc-message"},[e._v("\n\t\t\tYou are creating a private channel for the set "),n("strong",[e._v(e._s(e.channelSet.name))]),e._v(".\n\t\t")]):e._e(),e._v(" "),e.channelSet&&e.isStaff?n("EdField",[n("EdCheck",{attrs:{label:"Bulk creation"},model:{value:e.bulk,callback:function(t){e.bulk=t},expression:"bulk"}})],1):e._e(),e._v(" "),e.bulk?n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Names")]},proxy:!0},{key:"description",fn:function(){return[e._v("Enter the names of each channel in the textbox below, one per line.")]},proxy:!0}],null,!1,654113015)},[e._v(" "),e._v(" "),n("EdTextarea",{directives:[{name:"autofocus",rawName:"v-autofocus"}],staticClass:"scc-textarea",attrs:{disabled:e.loading},on:{blur:e.fixNames},model:{value:e.names,callback:function(t){e.names=t},expression:"names"}})],1):n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Name")]},proxy:!0},{key:"description",fn:function(){return[e._v("The channel name must consist of only lowercase letters, numbers and hyphens. Spaces are not allowed.")]},proxy:!0}])},[e._v(" "),e._v(" "),n("EdInput",{directives:[{name:"autofocus",rawName:"v-autofocus"}],staticClass:"scc-input",attrs:{disabled:e.loading},on:{blur:e.fixName},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),e.channelSet?e._e():n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Access")]},proxy:!0},{key:"description",fn:function(){return[e._v("Indicate who can access the channel: only certain people (private), everyone (public) or only staff.")]},proxy:!0}],null,!1,17672261)},[e._v(" "),e._v(" "),n("EdSelect",{attrs:{disabled:e.loading},model:{value:e.access,callback:function(t){e.access=t},expression:"access"}},[n("option",{attrs:{value:"private"}},[e._v("Private")]),e._v(" "),n("option",{attrs:{value:"public"}},[e._v("Public")]),e._v(" "),n("option",{attrs:{value:"staff"}},[e._v("Staff")])])],1),e._v(" "),"private"===e.access?[n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Max Members")]},proxy:!0},{key:"description",fn:function(){return[e._v("Enforce a limit on the number of people who can join this channel.")]},proxy:!0}],null,!1,4081930776)},[e._v(" "),e._v(" "),n("EdInput",{staticClass:"scc-input",attrs:{disabled:e.loading},model:{value:e.maxMembers,callback:function(t){e.maxMembers=e._n(t)},expression:"maxMembers"}})],1),e._v(" "),n("EdField",[n("EdCheck",{attrs:{label:"Self Invites",description:"Allow anyone to invite themselves to the channel.",disabled:e.loading},model:{value:e.selfInvites,callback:function(t){e.selfInvites=t},expression:"selfInvites"}})],1)]:e._e()],2)])}),[],!1,null,null,null).exports),P=(n("yXV3"),n("pDQq"),n("Tskq"),n("qePV"),n("KQm4")),A=n("Dm8+"),N=n("F3Tp"),R=n("0XH5");function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var L,F={components:{DialogLayout:m.a,ListView:A.a,EdButton:v.a,Avatar:N.a,SearchInput:R.a},props:{channelId:{type:Number,required:!0},users:{type:Array,required:!0}},data:function(){return{loading:!1,addedIds:[],selectedUserId:null,notAddedSearch:"",addedSearch:""}},computed:{valid:function(){return this.addedIds.length>0},usersMap:function(){return new Map(this.users.map((function(e){return[e.id,e]})))},addedUsersMap:function(){var e=this.usersMap,t=this.addedIds;return new Map(t.map((function(t){return[t,e.get(t)]})))},notAddedUsersMap:function(){var e=this.users,t=this.addedUsersMap;return new Map(e.filter((function(e){return!t.has(e.id)})).map((function(e){return[e.id,e]})))},addedUsers:function(){var e=this;return Object(P.a)(this.addedUsersMap.values()).filter((function(t){return j.validateSubstrDeep(t,e.addedSearch,"name")}))},notAddedUsers:function(){var e=this;return Object(P.a)(this.notAddedUsersMap.values()).filter((function(t){return j.validateSubstrDeep(t,e.notAddedSearch,"name")}))},selectedUser:function(){return this.usersMap.get(this.selectedUserId)},isSelectedItemAdded:function(){return this.addedUsersMap.has(this.selectedUserId)}},methods:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.b)("chat",{inviteUsers:l.a.INVITE_USERS}),{add:function(){this.addedIds.push(this.selectedUserId),this.selectedUserId=null},remove:function(){this.addedIds.splice(this.addedIds.indexOf(this.selectedUserId),1),this.selectedUserId=null},invite:(L=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.valid&&!this.loading){e.next=2;break}return e.abrupt("return");case 2:return this.loading=!0,e.prev=3,e.next=6,this.inviteUsers({channelId:this.channelId,userIds:this.addedIds});case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(3),h.b({type:"error",title:"Unable to invite users",text:"Try again later."}),e.abrupt("return");case 12:return e.prev=12,this.loading=!1,e.finish(12);case 15:this.$emit("done");case 16:case"end":return e.stop()}}),e,this,[[3,8,12,15]])}))),function(){return L.apply(this,arguments)})})},B=(n("7dVC"),Object(C.a)(F,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogLayout",{attrs:{title:"Invite Users",disabled:e.loading},on:{submit:e.invite},scopedSlots:e._u([{key:"primaryActions",fn:function(){return[n("EdButton",{staticClass:"primary",attrs:{type:"submit",disabled:e.loading||!e.valid}},[e._v("Invite")])]},proxy:!0}])},[n("div",{staticClass:"siu-layout"},[n("div",{staticClass:"siu-list-layout"},[n("h2",{staticClass:"siu-heading"},[e._v("Non-members")]),e._v(" "),n("SearchInput",{staticClass:"siu-search-input",model:{value:e.notAddedSearch,callback:function(t){e.notAddedSearch=t},expression:"notAddedSearch"}}),e._v(" "),n("ListView",{staticClass:"siu-list",attrs:{items:e.notAddedUsers,"key-selector":function(e){return e.id},"selected-item":e.selectedUser},on:{"update:selectedItem":function(t){e.selectedUserId=t&&t.id}},scopedSlots:e._u([{key:"item",fn:function(t){var s=t.item;return[n("div",{staticClass:"siu-item"},[n("Avatar",{staticClass:"siu-item-avatar",attrs:{user:s.name}}),e._v("\n\t\t\t\t\t\t"+e._s(s.name)+"\n\t\t\t\t\t")],1)]}}])})],1),e._v(" "),n("div",{staticClass:"siu-list-actions"},[n("EdButton",{attrs:{disabled:!e.selectedUserId||e.isSelectedItemAdded},on:{click:e.add}},[e._v(">")]),e._v(" "),n("EdButton",{attrs:{disabled:!e.selectedUserId||!e.isSelectedItemAdded},on:{click:e.remove}},[e._v("<")])],1),e._v(" "),n("div",{staticClass:"siu-list-layout"},[n("h2",{staticClass:"siu-heading"},[e._v("Users to add")]),e._v(" "),n("SearchInput",{staticClass:"siu-search-input",model:{value:e.addedSearch,callback:function(t){e.addedSearch=t},expression:"addedSearch"}}),e._v(" "),n("ListView",{staticClass:"siu-list",attrs:{items:e.addedUsers,"key-selector":function(e){return e.id},"selected-item":e.selectedUser},on:{"update:selectedItem":function(t){e.selectedUserId=t&&t.id}},scopedSlots:e._u([{key:"item",fn:function(t){var s=t.item;return[n("div",{staticClass:"siu-item"},[n("Avatar",{staticClass:"siu-item-avatar",attrs:{user:s.name}}),e._v("\n\t\t\t\t\t\t"+e._s(s.name)+"\n\t\t\t\t\t")],1)]}}])})],1)])])}),[],!1,null,null,null).exports);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U,z={name:"ChatMaster",inject:["chatService","eventBus"],components:{HeaderContainer:u.a,SheetContainer:d.a},data:function(){return{appbar:{titleLarge:"%PREV% – Chat"}}},computed:$({},Object(o.e)(["course"]),{},Object(o.c)("chat",["channelNonUsers"])),created:(U=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.course.features.messages){e.next=3;break}return this.$router.replace({name:"course"}),e.abrupt("return");case 3:return this.disposable=new c.a(this.eventBus.on("chat:create-channel-set",this.onCreateChannelSet),this.eventBus.on("chat:create-channel",this.onCreateChannel),this.eventBus.on("chat:invite-users",this.onInviteUsers),this.chatService.onConnect(this.onChatServiceConnect),this.chatService.onDisconnect(this.onChatServiceDisconnect)),this.reset(),this.chatService.connect(),this.chatService.subscribe(this.course.id),this.setStatus("loading"),e.prev=8,e.next=11,Promise.all([this.loadCourseUsers(),this.loadChannelSets(),this.loadChannels(),this.loadUserPresence()]);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(8),this.setStatus("error"),e.abrupt("return");case 17:this.setStatus("ready");case 18:case"end":return e.stop()}}),e,this,[[8,13]])}))),function(){return U.apply(this,arguments)}),destroyed:function(){this.disposable&&(this.disposable.dispose(),this.chatService.disconnect(),this.reset())},methods:$({},Object(o.d)("chat",{reset:l.c.RESET,setStatus:l.c.SET_STATUS}),{},Object(o.b)("chat",{loadCourseUsers:l.a.LOAD_COURSE_USERS,loadChannelSets:l.a.LOAD_CHANNEL_SETS,loadChannels:l.a.LOAD_CHANNELS,loadUserPresence:l.a.LOAD_USER_PRESENCE}),{showSheet:function(e){var t=this;this.$refs.sheetContainer.showSheet(e,(function(){t.$refs.sheetContainer.closeSheet()}))},onChatServiceConnect:function(){"disconnected"===this.status&&this.setStatus("ready")},onChatServiceDisconnect:function(){"ready"===this.status&&this.setStatus("disconnected")},onCreateChannelSet:function(){this.showSheet(x)},onCreateChannel:function(e){this.$createElement;this.showSheet({render:function(){var t=this,n=arguments[0];return n(D,{attrs:{channelSet:e},on:{done:function(){return t.$emit("done")}}})}})},onInviteUsers:function(e){this.$createElement;var t=this.channelNonUsers;this.showSheet({render:function(){var n=this,s=arguments[0];return s(B,{attrs:{channelId:e,users:t},on:{done:function(){return n.$emit("done")}}})}})}})},V=(n("i3ld"),Object(C.a)(z,(function(){var e=this.$createElement,t=this._self._c||e;return t("HeaderContainer",{staticClass:"chat-master",scopedSlots:this._u([{key:"overlay",fn:function(){return[t("SheetContainer",{ref:"sheetContainer"})]},proxy:!0}])},[t("RouterView")],1)}),[],!1,null,null,null));t.default=V.exports},OF8v:function(e,t,n){},OJSE:function(e,t,n){},OK6C:function(e,t,n){"use strict";var s=n("ak9R");n.n(s).a},OLBB:function(e,t,n){e.exports=function(){return new Worker(n.p+"code-highlighter.worker.4d63ad49.js")}},OM02:function(e,t,n){},OMYB:function(e,t,n){"use strict";var s=n("ztjb");n.n(s).a},OMd9:function(e,t,n){"use strict";var s=n("AuQ1");n.n(s).a},OQ3z:function(e,t,n){"use strict";var s=n("7tqH");n.n(s).a},OYMN:function(e,t,n){"use strict";var s=n("KUNQ");n.n(s).a},OZBT:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("yq1k"),n("5DmW"),n("27RR"),n("tkto"),n("JTJg"),n("UxlC"),n("SYor"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("L2JU"),l=n("5/Cn"),c=n("/Yj0"),u=n("vVwD"),d=n("IbLZ"),h=n("xtk+"),p=n("4K9I");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var m,v={components:{UserInfo:u.a,EdField:d.a,EdInput:h.a,EdButton:p.a},inject:["userApi"],data:function(){return{canUpdateName:!1,name:"",saving:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.e)(["user"])),created:function(){this.name=this.user.name},methods:{save:(m=Object(r.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this.name.trim().replace(/\s+/g," "))?t.includes(" ")||(n="You must enter your full name."):n="Name cannot be empty.",!n){e.next=5;break}return l.a({icon:"warning",title:"Invalid name",text:n}),e.abrupt("return");case 5:return this.saving=!0,e.prev=6,e.next=9,this.userApi.update(this.user.id,{name:t});case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(6),c.b({type:"error",title:"Unable to update name",text:"Ensure you have entered a valid name, or try again later."}),e.abrupt("return");case 15:return e.prev=15,this.saving=!1,e.finish(15);case 18:c.b({type:"success",title:"Name changed successfully",text:"Your name has been updated."}),this.user.name=t,this.name=t;case 21:case"end":return e.stop()}}),e,this,[[6,11,15,18]])}))),function(){return m.apply(this,arguments)})}},b=(n("QHUk"),n("KHd+")),g=Object(b.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{staticClass:"settings-heading"},[e._v("Profile")]),e._v(" "),n("UserInfo"),e._v(" "),e.canUpdateName?n("div",{staticClass:"setprof-name-form"},[n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Name")]},proxy:!0}],null,!1,3619070812)},[e._v(" "),n("EdInput",{staticClass:"setprof-input",attrs:{disabled:e.saving},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),n("EdButton",{staticClass:"primary",attrs:{disabled:e.saving},on:{click:e.save}},[e._v("\n\t\t\tSave\n\t\t")])],1):e._e()],1)}),[],!1,null,null,null);t.default=g.exports},OlkN:function(e,t,n){"use strict";var s=n("5N+i");n.n(s).a},Oshs:function(e,t,n){"use strict";n("07d7"),n("5s+n");var s={directives:{ClickOutside:n("wsB/").a},created:function(){document.addEventListener("keydown",this.onDocumentKeyDown)},destroyed:function(){document.removeEventListener("keydown",this.onDocumentKeyDown)},methods:{dismiss:function(){this.$emit("dismiss")},onDocumentKeyDown:function(e){"Escape"===e.key&&this.dismiss()}}},i=(n("HBam"),n("KHd+")),r={components:{Sheet:Object(i.a)(s,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"sheet"},[t("div",{directives:[{name:"click-outside",rawName:"v-click-outside.capture",value:this.dismiss,expression:"dismiss",modifiers:{capture:!0}}],staticClass:"sheet-inner-container"},[t("div",{staticClass:"sheet-inner"},[this._t("default")],2)])])}),[],!1,null,null,null).exports},data:function(){return{key:0,sheet:null,done:null}},computed:{sheetVisible:function(){return!!this.sheet}},watch:{sheetVisible:function(e){this.$emit("update:sheetVisible",e)}},beforeDestroy:function(){this.closeSheet()},methods:{showSheet:function(e,t){var n=this;return this.closeSheet(),this.sheet=e,this.key++,new Promise((function(e){n.done=function(){t&&t.apply(void 0,arguments),e.apply(void 0,arguments)}}))},closeSheet:function(){this.done=null,this.sheet=null},onSheetDismiss:function(){this.closeSheet()},onSheetDone:function(e){var t=this.done;this.done=null,this.sheet=null,t(e)}}},a=(n("0D7g"),Object(i.a)(r,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"sheet-container",class:{"sheet-open":this.sheet}},[t("Transition",{attrs:{appear:""}},[this.sheet?t("Sheet",{key:this.key,on:{dismiss:this.onSheetDismiss}},[t(this.sheet,{tag:"component",on:{done:this.onSheetDone}})],1):this._e()],1)],1)}),[],!1,null,null,null));t.a=a.exports},Otsd:function(e,t,n){"use strict";var s=n("+iXx");n.n(s).a},OxIs:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("UxlC"),n("FZtP");var s=n("rePB"),i=n("L2JU");function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var a={name:"ChallengeMaster",data:function(){return{appbar:{titleLarge:"%PREV% – Challenges"}}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(i.e)(["course"])),created:function(){this.course.features.challenges||this.$router.replace({name:"course"})}},o=(n("j+H3"),n("KHd+")),l=Object(o.a)(a,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"challenge-master"},[t("RouterView")],1)}),[],!1,null,null,null);t.default=l.exports},P2Tp:function(e,t,n){},P72V:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("2B1R"),n("zKZe"),n("5DmW"),n("27RR"),n("tkto"),n("EnZy"),n("SYor"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("BkRI"),l=n.n(o),c=n("L2JU"),u=n("IbLZ"),d=n("xtk+"),h=n("6XG0"),p=n("4K9I"),f=n("5G72"),m=n("JO+Q"),v=n("/Yj0"),b=n("5/Cn"),g=n("hSdx"),y=n("/wT1");function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var _,k,C={name:"AdminAdvanced",inject:["courseApi"],components:{EdField:u.a,EdInput:d.a,EdCheck:h.a,EdButton:p.a,EdTextarea:f.a,DetailHeader:m.a},extends:y.a,data:function(){return{saving:!1,settings:null,sebKeys:"",userAgent:navigator.userAgent,activationLoading:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(c.e)(["course"]),{},Object(c.c)(["isUserAdmin"])),created:function(){this.update()},methods:{update:function(){this.settings=l()(this.course.settings)},save:(k=Object(r.a)(i.a.mark((function e(){var t,n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.course.settings.lab_user_agent_regex||!this.settings.lab_user_agent_regex){e.next=5;break}return e.next=3,b.b({icon:"warning",title:"Are you sure you want to set a User Agent Regex for this course?",text:"When the user agent matches the regular expression, Ed will be in exam lockdown mode across all courses for the students enrolled in this course.\n\nMake sure the regular expression only matches a specific private user agent string so that it does not affect other courses.",primaryAction:"Set User Agent Regex"});case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return this.sebKeys=this.sebKeys.split("\n").map((function(e){return e.trim()})).filter(Boolean).join("\n"),(t={settings:l()(this.settings)}).settings.safe_exam_browser={enabled:this.settings.safe_exam_browser.enabled,keys:this.sebKeys.split("\n")},this.saving=!0,e.prev=9,e.next=12,this.courseApi.update(this.course.id,t);case 12:n=e.sent,e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(9),s=400===e.t0.status&&"lab_user_agent_regex_syntax"===e.t0.data.code?"Invalid User Agent Regex syntax.":400===e.t0.status&&"string"==typeof e.t0.data.message?e.t0.data.message:"Unable to save course settings.",v.b({type:"error",text:s}),e.abrupt("return");case 20:return e.prev=20,this.saving=!1,e.finish(20);case 23:v.b({type:"success",text:"Updated course settings."}),Object.assign(this.settings,l()(n.settings)),Object.assign(this.course,l()(n));case 26:case"end":return e.stop()}}),e,this,[[9,15,20,23]])}))),function(){return k.apply(this,arguments)}),toggleArchive:(_=Object(r.a)(i.a.mark((function e(){var t,n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.course,n="archived"===t.status?"unarchive":"archive",e.next=4,b.b({icon:"warning",title:"".concat(g.titleCase(n)," course?"),text:"unarchive"===n?"Unarchiving this course will move it into the Courses section on the dashboard.":"Archiving this course will move it from the Courses section on the dashboard into the archived courses below it. Staff and students will still be able to access the course from the dashboard.",primaryAction:g.titleCase(n)});case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:return this.activationLoading=!0,s="archived"===t.status?"active":"archived",e.prev=8,e.next=11,this.courseApi.update(t.id,{status:s});case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(8),v.b({type:"error",text:"Unable to ".concat(n," course.")}),e.abrupt("return");case 17:return e.prev=17,this.activationLoading=!1,e.finish(17);case 20:t.status=s,v.b({type:"success",text:"Course ".concat(n,"d.")});case 22:case"end":return e.stop()}}),e,this,[[8,13,17,20]])}))),function(){return _.apply(this,arguments)})}},x=(n("msI1"),n("KHd+")),j=Object(x.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("DetailHeader",{attrs:{disabled:e.saving},on:{save:e.save}}),e._v(" "),e.course.features.challenges||e.course.features.assessments||e.course.features.lessons?[n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Lockdown Regex")]},proxy:!0},{key:"description",fn:function(){return[e._v("\n\t\t\t\tOnly students using a browser matching the following user agent regex\n\t\t\t\tmay access this course.\n\t\t\t")]},proxy:!0}],null,!1,2787807480)},[e._v(" "),e._v(" "),n("EdInput",{attrs:{disabled:e.saving},model:{value:e.settings.lockdown_user_agent_regex,callback:function(t){e.$set(e.settings,"lockdown_user_agent_regex",t)},expression:"settings.lockdown_user_agent_regex"}})],1),e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Safe Exam Browser")]},proxy:!0}],null,!1,4099908279)},[e._v(" "),n("EdCheck",{attrs:{label:"Require Safe Exam Browser",description:"Only students using Safe Exam Browser with one of the specified keys may access the course.",disabled:e.saving},model:{value:e.settings.safe_exam_browser.enabled,callback:function(t){e.$set(e.settings.safe_exam_browser,"enabled",t)},expression:"settings.safe_exam_browser.enabled"}})],1)]:e._e(),e._v(" "),e.settings.safe_exam_browser.enabled?n("EdField",{scopedSlots:e._u([{key:"description",fn:function(){return[e._v("\n\t\t\tEnter the Safe Exam Browser keys here, one on each line:\n\t\t")]},proxy:!0}],null,!1,3392247074)},[e._v(" "),n("EdTextarea",{staticClass:"adm-seb-textarea",attrs:{placeholder:"<Browser exam key>",disabled:e.saving,autocomplete:"off",spellcheck:"false"},model:{value:e.sebKeys,callback:function(t){e.sebKeys=t},expression:"sebKeys"}})],1):e._e(),e._v(" "),e.course.features.exams?[n("h3",{staticClass:"adm"},[e._v("Exams")]),e._v(" "),n("p",[n("EdCheck",{attrs:{label:"Allow students to change their lab enrollment",disabled:e.saving},model:{value:e.settings.user_lab_enrollment,callback:function(t){e.$set(e.settings,"user_lab_enrollment",t)},expression:"settings.user_lab_enrollment"}})],1),e._v(" "),n("p",{staticClass:"adm-description"},[e._v("\n\t\t\tAny browser whose user agent matches the regular expression in the\n\t\t\tfield below will have exam mode enabled for students regardless if\n\t\t\tany lab is active or not at the time.\n\t\t")]),e._v(" "),n("p",{staticClass:"adm-description"},[e._v("\n\t\t\tCurrent user agent: "+e._s(e.userAgent)+"\n\t\t")]),e._v(" "),n("div",{staticClass:"adm-field"},[n("label",[e._v("User Agent Regex")]),e._v(" "),n("EdInput",{staticClass:"adm-field-input",attrs:{disabled:e.saving},model:{value:e.settings.lab_user_agent_regex,callback:function(t){e.$set(e.settings,"lab_user_agent_regex",t)},expression:"settings.lab_user_agent_regex"}})],1)]:e._e(),e._v(" "),n("h3",{staticClass:"adm"},[e._v("Role Labels")]),e._v(" "),n("p",{staticClass:"adm-description"},[e._v("\n\t\tCustomise how course roles are displayed. Leave blank to use the default.\n\t")]),e._v(" "),n("div",{staticClass:"adm-field"},[n("label",[e._v("Student")]),e._v(" "),n("EdInput",{staticClass:"adm-field-input",attrs:{disabled:e.saving},model:{value:e.settings.role_labels.student,callback:function(t){e.$set(e.settings.role_labels,"student",t)},expression:"settings.role_labels.student"}})],1),e._v(" "),n("div",{staticClass:"adm-field"},[n("label",[e._v("Mentor")]),e._v(" "),n("EdInput",{staticClass:"adm-field-input",attrs:{disabled:e.saving},model:{value:e.settings.role_labels.mentor,callback:function(t){e.$set(e.settings.role_labels,"mentor",t)},expression:"settings.role_labels.mentor"}})],1),e._v(" "),n("div",{staticClass:"adm-field"},[n("label",[e._v("Tutor")]),e._v(" "),n("EdInput",{staticClass:"adm-field-input",attrs:{disabled:e.saving},model:{value:e.settings.role_labels.tutor,callback:function(t){e.$set(e.settings.role_labels,"tutor",t)},expression:"settings.role_labels.tutor"}})],1),e._v(" "),n("div",{staticClass:"adm-field"},[n("label",[e._v("Staff")]),e._v(" "),n("EdInput",{staticClass:"adm-field-input",attrs:{disabled:e.saving},model:{value:e.settings.role_labels.staff,callback:function(t){e.$set(e.settings.role_labels,"staff",t)},expression:"settings.role_labels.staff"}})],1),e._v(" "),n("div",{staticClass:"adm-field"},[n("label",[e._v("Admin")]),e._v(" "),n("EdInput",{staticClass:"adm-field-input",attrs:{disabled:e.saving},model:{value:e.settings.role_labels.admin,callback:function(t){e.$set(e.settings.role_labels,"admin",t)},expression:"settings.role_labels.admin"}})],1),e._v(" "),"inactive"!==e.course.status?n("section",{staticClass:"adm-section"},[n("h2",{staticClass:"adm"},[e._v(e._s("archived"===e.course.status?"Unarchive":"Archive")+" Course")]),e._v(" "),n("p",{staticClass:"adm-description"},["archived"===e.course.status?[e._v("\n\t\t\t\tUnarchiving this course will move it into the Courses section on the dashboard.\n\t\t\t")]:[e._v("\n\t\t\t\tArchiving this course will move it from the Courses section in the dashboard\n\t\t\t\tto the archived section below and make the discussion read only. Staff and\n\t\t\t\tstudents can still access the course from the dashboard.\n\t\t\t")]],2),e._v(" "),n("EdButton",{attrs:{disabled:e.activationLoading},on:{click:e.toggleArchive}},[e._v("\n\t\t\t"+e._s("archived"===e.course.status?"Unarchive":"Archive")+" Course\n\t\t")])],1):e._e(),e._v(" "),e.isUserAdmin?n("section",{staticClass:"adm-section"},[n("h2",{staticClass:"adm"},[e._v("Discussion")]),e._v(" "),n("p",[n("EdCheck",{attrs:{label:"No Digests",disabled:e.saving},model:{value:e.settings.discussion.no_digests,callback:function(t){e.$set(e.settings.discussion,"no_digests",t)},expression:"settings.discussion.no_digests"}})],1),e._v(" "),n("h2",{staticClass:"adm"},[e._v("Workspace")]),e._v(" "),n("div",{staticClass:"adm-field"},[n("label",[e._v("Preset")]),e._v(" "),n("EdInput",{staticClass:"adm-field-input",attrs:{disabled:e.saving},model:{value:e.settings.workspace.preset,callback:function(t){e.$set(e.settings.workspace,"preset",t)},expression:"settings.workspace.preset"}})],1),e._v(" "),n("div",{staticClass:"adm-field"},[n("label",[e._v("Inactivity Timeout")]),e._v(" "),n("EdInput",{staticClass:"adm-field-input",attrs:{disabled:e.saving},model:{value:e.settings.workspace.inactivity_timeout,callback:function(t){e.$set(e.settings.workspace,"inactivity_timeout",e._n(t))},expression:"settings.workspace.inactivity_timeout"}})],1),e._v(" "),n("p",[n("EdCheck",{attrs:{label:"Voiceover",disabled:e.saving},model:{value:e.settings.voiceover,callback:function(t){e.$set(e.settings,"voiceover",t)},expression:"settings.voiceover"}})],1),e._v(" "),n("p",[n("EdCheck",{attrs:{label:"Internet Access",disabled:e.saving},model:{value:e.settings.workspace.internet,callback:function(t){e.$set(e.settings.workspace,"internet",t)},expression:"settings.workspace.internet"}})],1),e._v(" "),n("p",[n("EdCheck",{attrs:{label:"Large File Storage",disabled:e.saving},model:{value:e.settings.workspace.lizardfs,callback:function(t){e.$set(e.settings.workspace,"lizardfs",t)},expression:"settings.workspace.lizardfs"}})],1)]):e._e()],2)}),[],!1,null,null,null);t.default=j.exports},P7kB:function(e,t,n){},P8F1:function(e,t,n){"use strict";var s=n("cW4G");n.n(s).a},P9T5:function(e,t,n){"use strict";var s=n("HuLN");n.n(s).a},PIuy:function(e,t,n){"use strict";var s=n("M9iD");n.n(s).a},PRxD:function(e,t,n){"use strict";var s=n("ECeP");n.n(s).a},PSPW:function(e,t,n){"use strict";var s=n("4qR1");n.n(s).a},PSPw:function(e,t,n){"use strict";var s=n("0prs");n.n(s).a},PXqa:function(e,t,n){"use strict";n("2B1R"),n("+2oP"),n("pDQq");var s=n("zBf9"),i=n("hukh"),r=n("WmPt"),a=n("lVsj"),o=n("b/yj"),l={components:{Reorder:i.a,Icon:r.a,Join:a.a,MathRender:o.a},extends:s.a,computed:{computedValue:function(){return this.value||this.question.items.map((function(e,t){return t}))},items:function(){var e=this;return this.computedValue.map((function(t){return e.question.items[t]}))},solutionItems:function(){var e=this;if(this.solution)return this.solution.map((function(t){return e.question.items[t]}))},feedbackIcon:function(){switch(this.correct){case!0:return"tick";case!1:return"cross"}},feedbackClass:function(){switch(this.correct){case!0:return"correct";case!1:return"incorrect"}},valid:function(){return!0}},methods:{onSort:function(e){var t=e.oldIndex,n=e.newIndex,s=this.computedValue.slice(),i=s[t];s.splice(t,1),s.splice(n,0,i),this.$emit("input",s)}}},c=(n("I8gq"),n("KHd+")),u=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quiz-question-show-reorder"},[n("div",{staticClass:"qqsro-help media-sm-device"},[e._v("Tap and hold an item reorder the list.")]),e._v(" "),n("Reorder",{staticClass:"qqsro-reorder",attrs:{value:e.items,readonly:!e.editable},on:{sort:e.onSort}}),e._v(" "),null!=e.correct?n("div",{staticClass:"qqsro-feedback",class:e.feedbackClass},[n("Icon",{staticClass:"qqsro-fb-icon",attrs:{icon:e.feedbackIcon}}),e._v(" "),n("div",{staticClass:"qqsro-fb-content"},[!0===e.correct?[e._v("Correct")]:e._e(),e._v(" "),!1===e.correct?[e.solution?[e._v("\n\t\t\t\t\tIncorrect, the correct order is\n\t\t\t\t\t"),n("Join",{attrs:{items:e.solutionItems,separator:", "},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.item;return[n("MathRender",{attrs:{latex:t,display:!1}})]}}],null,!1,1891150026)})]:[e._v("Incorrect")]]:e._e()],2)],1):e._e()],1)}),[],!1,null,null,null);t.a=u.exports},Pa8A:function(e,t,n){"use strict";n("4mDm"),n("Tskq"),n("07d7"),n("PKPk"),n("3bBZ");var s=n("1OyB"),i=n("vuIU"),r=n("sEfC"),a=n.n(r),o=n("Kw5r"),l=(n("qePV"),n("UNns")),c=n("BCsR"),u={components:{Popup:l.a},props:{targetLeft:{type:Number,default:0},targetTop:{type:Number,default:0},targetWidth:{type:Number,default:0},targetHeight:{type:Number,default:0},targetAnchorX:{type:Number,default:.5},targetAnchorY:{type:Number,default:1}},data:function(){return{borderWidth:c.thinBoxShadow?.5:1,borderColor:c.thinBoxShadow?"rgba(107, 102, 21, 0.35)":"rgba(107, 102, 21, 0.25)"}}},d=(n("X9Ge"),n("KHd+")),h=Object(d.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Popup",{attrs:{"target-left":e.targetLeft,"target-top":e.targetTop,"target-width":e.targetWidth,"target-height":e.targetHeight,"target-anchor-x":e.targetAnchorX,"target-anchor-y":e.targetAnchorY,background:"rgb(247, 246, 230)","border-color":e.borderColor,"border-width":e.borderWidth,"clip-mode":"flip",unclickable:""}},[n("div",{staticClass:"tooltip"},[e._t("default")],2)])}),[],!1,null,null,null).exports,p=n("ySoy"),f=new(function(){function e(){Object(s.a)(this,e);this.$createElement;this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.currentElement=null,this.elementTexts=new Map,this.showDelayed=a()(this.show,1),this.hideDelayed=a()(this.hide,200),this.data={visible:!1,targetLeft:0,targetTop:0,targetWidth:0,targetHeight:0,text:""},this.comp=new o.default({data:this.data,render:function(){var e=arguments[0];return this.visible&&!!this.text&&e(h,{attrs:{targetLeft:this.targetLeft,targetTop:this.targetTop,targetWidth:this.targetWidth,targetHeight:this.targetHeight}},[this.text])}}),this.comp.$mount()}return Object(i.a)(e,[{key:"registerElement",value:function(e){"ios"!==p.h&&(e.addEventListener("mouseenter",this.onMouseEnter),e.addEventListener("mouseleave",this.onMouseLeave),this.elementTexts.set(e,""))}},{key:"unregisterElement",value:function(e){e.removeEventListener("mouseenter",this.onMouseEnter),e.removeEventListener("mouseleave",this.onMouseLeave),this.elementTexts.delete(e),this.currentElement===e&&this.hide()}},{key:"setElementText",value:function(e,t){this.elementTexts.set(e,t),e.setAttribute("aria-label",t),this.currentElement===e&&(this.data.text=t)}},{key:"updatePosition",value:function(e){var t=e.getBoundingClientRect();this.data.targetLeft=t.left+window.pageXOffset,this.data.targetTop=t.top+window.pageYOffset,this.data.targetWidth=t.width,this.data.targetHeight=t.height}},{key:"show",value:function(e){this.elementTexts.has(e)&&!e.hasAttribute("data-trigger-active")&&(this.data.visible=!0,this.currentElement=e,this.data.text=this.elementTexts.get(e),this.updatePosition(e))}},{key:"hide",value:function(){this.data.visible&&(this.data.visible=!1,this.currentElement=null)}},{key:"onMouseEnter",value:function(e){this.showDelayed.cancel(),this.hideDelayed.cancel(),this.data.visible?this.show(e.target):this.showDelayed(e.target)}},{key:"onMouseLeave",value:function(){this.showDelayed.cancel(),this.hideDelayed.cancel(),this.data.visible&&this.hideDelayed()}}]),e}());t.a={bind:function(e,t){f.registerElement(e),f.setElementText(e,t.value)},unbind:function(e){f.unregisterElement(e)},update:function(e,t){f.setElementText(e,t.value)}}},PaLc:function(e,t,n){},PcaW:function(e,t,n){},PiU9:function(e,t,n){"use strict";var s=n("fQCj");n.n(s).a},Pl9R:function(e,t,n){"use strict";var s=n("qHKK");n.n(s).a},PldW:function(e,t,n){},Po4X:function(e,t,n){"use strict";var s=n("dbWh");n.n(s).a},PvBr:function(e,t,n){},Py2q:function(e,t,n){"use strict";var s=n("rwSh");n.n(s).a},Q0TP:function(e,t,n){"use strict";var s=n("9F5z");n.n(s).a},Q70W:function(e,t,n){},Q7b8:function(e,t,n){},Q7vs:function(e,t,n){},Q8YJ:function(e,t,n){"use strict";var s=n("xOnE");n.n(s).a},Q9RH:function(e,t,n){},Q9zV:function(e,t,n){},QAA2:function(e,t,n){"use strict";var s=n("hO0I");n.n(s).a},QBAF:function(e,t,n){"use strict";var s=n("GIzl");n.n(s).a},QBce:function(e,t,n){"use strict";var s=n("9aVD");n.n(s).a},QBh3:function(e,t,n){"use strict";var s=n("uj1K");n.n(s).a},"QE2+":function(e,t,n){},QHUk:function(e,t,n){"use strict";var s=n("XXQ/");n.n(s).a},QKZj:function(e,t,n){"use strict";var s=n("tnfy");n.n(s).a},QYfK:function(e,t,n){},QZQe:function(e,t,n){"use strict";n("pNMO"),n("TeQF"),n("fbCW"),n("yq1k"),n("4mDm"),n("+2oP"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("YGK4"),n("PKPk"),n("Rm1S"),n("OM9Z"),n("FZtP"),n("3bBZ");var s,i=n("o0o1"),r=n.n(i),a=(n("ls82"),n("HaE+")),o=n("rePB"),l=n("L2JU"),c=n("hSdx"),u=n("BCsR"),d=n("DF/l"),h=n("4cYw"),p=n("q6QK"),f=n("sS5e"),m=(n("5s+n"),{components:{ScrollView:n("ZE4w").a},props:{python3:{type:Boolean,default:!1}},data:function(){return{output:""}},created:function(){var e=this;window.addEventListener("message",this.onMessage),this.loadedPromise=new Promise((function(t,n){e.loadedResolve=t,e.loadedReject=n}))},mounted:function(){var e=this.$refs.scroll.$el;e.scrollLeft=(e.scrollWidth-e.clientWidth)/2,e.scrollTop=(e.scrollHeight-e.clientHeight)/2},destroyed:function(){window.removeEventListener("message",this.onMessage)},methods:{run:(s=Object(a.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.output="",e.next=3,this.loadedPromise;case 3:this.$refs.iframe.contentWindow.postMessage({type:"run",program:t},"*");case 4:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)}),onMessage:function(e){if(e.source===this.$refs.iframe.contentWindow)switch(e.data.type){case"turtle:load":this.$refs.iframe.contentWindow.postMessage({type:"init",python3:this.python3},"*"),this.loadedResolve();break;case"turtle:output":this.output+=e.data.output;break;case"turtle:error":this.output+=e.data.message}}}}),v=(n("yIrP"),n("KHd+")),b=Object(v.a)(m,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"turtle"},[t("ScrollView",{ref:"scroll",staticClass:"turtle-scroll",attrs:{"mouse-scroll":""}},[t("iframe",{ref:"iframe",staticClass:"turtle-iframe",attrs:{src:"/turtle.html",sandbox:"allow-scripts"}})]),this._v(" "),t("div",{staticClass:"turtle-output"},[this._v(this._s(this.output))])],1)}),[],!1,null,null,null).exports,g=n("2ejt"),y=n("CisF"),w=n("WmPt"),_=n("vfuN"),k=n("/NnU");function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var x,j,O,S=new Set(["txt","html","css","v"]),E={inject:["keyboardShortcutManager"],components:{EdSelect:h.a,Codemirror:p.a,Runner:f.a,Turtle:b,ContentDialog:g.a,Resizer:y.a,Icon:w.a,Sandbox:_.a,WebSnippetLogs:k.a},props:{code:{type:String,default:""},schema:{type:String,default:""},runnable:{type:Boolean,default:!0},language:{type:String,default:"txt"},editable:{type:Boolean,default:!1},previewFiles:{type:Boolean,default:!0},autofocus:{type:Boolean,default:!1},nonResizable:{type:Boolean,default:!1}},data:function(){return{localCode:"",localSchema:"",languages:d.a,running:!1,runnerActive:!1,runnerVisible:!1,turtleVisible:!1,resizeHeight:null,selectedTab:"code",fullscreen:!1,sandboxCode:"",sandboxLogs:[],sandboxKey:0}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(l.e)(["course"]),{runnableVisible:function(){return!S.has(this.language)},runnerType:function(){switch(this.language){case"pyturtle":case"py3turtle":return"turtle";case"jsweb":return"web";default:return"runner"}},languageLabel:function(){var e=this,t=d.a.find((function(t){return t.extension===e.language}));return t?t.language:""},languageIcon:function(){return c.fileFolderIcon("."+this.language,!1)},languageIsDatabase:function(){return["sql","mysql"].includes(this.language)},fileTabsVisible:function(){return this.languageIsDatabase&&(this.editable||!/^\s*$/.test(this.localSchema))}}),watch:{language:function(e){this.$emit("update:runnable",!S.has(e)&&this.userSetRunnable)},fileTabsVisible:function(e){e||(this.selectedTab="code")},code:function(e){this.localCode=e},schema:function(e){this.localSchema=e},runArgs:function(e){this.$emit("update:runArgs",e)},fullscreen:function(e){var t=this;this.$nextTick((function(){e?t.$refs.fullscreen.appendChild(t.$refs.inner):t.$el.appendChild(t.$refs.inner)}))},runnerType:function(e){"web"===e&&(this.runnerVisible=!1,this.runnerActive=!1,this.sandboxLogs=[])}},mounted:function(){this.localCode=this.code,this.localSchema=this.schema,this.runSession=null,null==this.runnable?(this.userSetRunnable=!1,this.$emit("update:runnable",!S.has(this.language))):this.userSetRunnable=this.runnable,this.disposable=this.keyboardShortcutManager.register({default:"Control+Enter",mac:"Meta+Enter"},this.onKeyboardShortcutRun,{description:"Run snippet",element:this.$refs.inner})},destroyed:function(){this.disposable&&this.disposable.dispose()},methods:{languageToFilename:function(e){switch(e){case"mysql":e="sql";break;case"pyturtle":e="py";break;case"py3turtle":e="py3";break;case"jsweb":e="js"}return"."+e},getRunArgs:function(){var e={files:Object(o.a)({},"main.".concat(this.language),this.localCode)};switch(this.language){case"c":e.buildCommand="clang -std=c11 main.c -lm -lpthread -lcs50 -o main",e.runCommand="./main";break;case"cc":e.buildCommand="clang++ -std=c++11 main.cc -lm -lpthread -lcs50 -o main",e.runCommand="./main";break;case"dl":e.buildCommand="souffle main.dl -o main",e.runCommand="./main";break;case"go":e.buildCommand="go build main.go",e.runCommand="./main";break;case"py":e.runCommand='bash -c "MPLBACKEND=agg python2 main.py"';break;case"adb":e.buildCommand="gnat make main.adb",e.runCommand="./main";break;case"py3":e.runCommand='bash -c "MPLBACKEND=agg python3 main.py3"';break;case"rb":e.runCommand="ruby main.rb";break;case"cs":e.buildCommand="mcs main.cs",e.runCommand="mono main.exe";break;case"vb":e.buildCommand="vbnc main.vb",e.runCommand="mono main.exe";break;case"hs":e.runCommand="runhaskell main.hs";break;case"java":var t=this.localCode.match(/public class ([a-zA-Z_][a-zA-Z_0-9]*)/),n=t?t[1]:"Main";e.buildCommand="javac ".concat(n,".java"),e.runCommand="java ".concat(n),e.files=Object(o.a)({},"".concat(n,".java"),this.localCode);break;case"swift":e.runCommand="swift main.swift";break;case"m":e.runCommand="octave -q main.m";break;case"jl":e.runCommand="julia main.jl";break;case"r":e.runCommand="Rscript main.r";break;case"sh":e.runCommand="bash main.sh";break;case"js":e.runCommand="node main.js";break;case"f95":e.buildCommand="gfortran main.f95 -o main",e.runCommand="./main";break;case"nim":e.buildCommand="nim c main.nim",e.runCommand="./main";break;case"kt":e.buildCommand="kotlinc main.kt -include-runtime -d main.jar",e.runCommand="java -jar main.jar";break;case"sage":e.runCommand='bash -c "mkdir -m 0700 .sage && sage main.sage"';break;case"lisp":e.runCommand="clisp main.lisp";break;case"rs":e.buildCommand="rustc main.rs",e.runCommand="./main";break;case"tex":e.buildCommand="pdflatex main.tex",e.runCommand="true";break;case"ml":e.runCommand="ocaml main.ml";break;default:return null}return e},toggleRunner:function(){this.runnerVisible=!this.runnerVisible},run:function(){var e=this;switch(this.language){case"sql":this.runDatabase("postgres");break;case"mysql":this.runDatabase("mariadb");break;case"pyturtle":case"py3turtle":this.runTurtle();break;case"jsweb":this.runWeb();break;default:this.runCode()}this.$nextTick((function(){!u.touchOnly&&e.$refs.runner&&e.$refs.runner.focus()}))},runCode:(O=Object(a.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getRunArgs()){e.next=3;break}return e.abrupt("return");case 3:if(t.type="snippet",this.runnerVisible=!0,this.runnerActive){e.next=9;break}return this.runnerActive=!0,e.next=9,this.$nextTick();case 9:this.$refs.runner.runCode(t);case 10:case"end":return e.stop()}}),e,this)}))),function(){return O.apply(this,arguments)}),runDatabase:(j=Object(a.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.runnerVisible=!0,this.runnerActive){e.next=5;break}return this.runnerActive=!0,e.next=5,this.$nextTick();case 5:this.$refs.runner.runDatabase(this.localSchema,this.localCode,t);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return j.apply(this,arguments)}),runTurtle:(x=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.turtleVisible=!0,e.next=3,this.$nextTick();case 3:this.$refs.turtle.run(this.localCode);case 4:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)}),runWeb:function(){this.runnerVisible=!0,this.runnerActive=!0,this.sandboxCode=this.localCode,this.sandboxKey++,this.sandboxLogs=[]},stop:function(){this.$refs.runner.stop()},onRunnableChanged:function(e){var t=e.target.checked;this.userSetRunnable=t,this.$emit("update:runnable",t)},onLanguageChanged:function(e){this.$emit("update:language",e.target.value)},onCodeChanged:function(e){"schema"===this.selectedTab?(this.localSchema=e,this.$emit("update:schema",e)):(this.localCode=e,this.$emit("update:code",e))},onWillRun:function(){this.running=!0},onDidRun:function(){this.running=!1},onKeyboardShortcutRun:function(e){if(!this.runnable||e.repeat)return!1;this.running?this.stop():this.run()},onSandboxError:function(e){this.sandboxLogs.push({level:"error",message:e}),this.truncateSandboxLogs()},onSandboxLog:function(e){this.sandboxLogs.push({level:e.level,message:e.args.join(" ")}),this.truncateSandboxLogs()},truncateSandboxLogs:function(){this.sandboxLogs.length>1e3&&(this.sandboxLogs=this.sandboxLogs.slice(this.sandboxLogs.length-1e3))}}},T=(n("AkbM"),Object(v.a)(E,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"snippet"},[e.fullscreen?n("ContentDialog",{attrs:{title:"Snippet"},on:{close:function(t){e.fullscreen=!1}}},[n("div",{ref:"fullscreen",staticClass:"snip-fullscreen-placeholder"})]):e._e(),e._v(" "),n("div",{ref:"inner",staticClass:"snip-inner",class:{"snip-fullscreen":e.fullscreen}},[n("div",{staticClass:"snip-tb"},[n("div",{staticClass:"snip-tb-item-group"},[n("button",{directives:[{name:"show",rawName:"v-show",value:e.runnable&&e.runnableVisible&&!e.running,expression:"runnable && runnableVisible && !running"}],staticClass:"snip-tb-item snip-tb-btn primary run",on:{click:e.run}},[e._v("\n\t\t\t\t\tRun\n\t\t\t\t")]),e._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:e.runnable&&e.runnableVisible&&e.running,expression:"runnable && runnableVisible && running"}],staticClass:"snip-tb-item snip-tb-btn primary stop",on:{click:e.stop}},[e._v("\n\t\t\t\t\tStop\n\t\t\t\t")]),e._v(" "),e.fileTabsVisible?n("div",{staticClass:"snip-tabs"},[n("button",{staticClass:"snip-tab",class:{selected:"schema"===e.selectedTab},on:{click:function(t){e.selectedTab="schema"}}},[e._v("\n\t\t\t\t\t\tSchema\n\t\t\t\t\t")]),e._v(" "),n("button",{staticClass:"snip-tab",class:{selected:"code"===e.selectedTab},on:{click:function(t){e.selectedTab="code"}}},[e._v("\n\t\t\t\t\t\tQuery\n\t\t\t\t\t")])]):e._e()]),e._v(" "),e._t("default"),e._v(" "),n("div",{staticClass:"snip-tb-item-group"},[e.editable?[n("label",{directives:[{name:"show",rawName:"v-show",value:e.runnableVisible,expression:"runnableVisible"}],staticClass:"snip-tb-item snip-tb-cb"},[n("input",{attrs:{type:"checkbox"},domProps:{checked:e.runnable},on:{change:e.onRunnableChanged}}),e._v(" Runnable\n\t\t\t\t\t")]),e._v(" "),n("EdSelect",{staticClass:"plain snip-tb-item snip-tb-lang",attrs:{value:e.language},on:{change:e.onLanguageChanged}},e._l(e.languages,(function(t){return n("option",{key:t.extension,domProps:{value:t.extension}},[e._v("\n\t\t\t\t\t\t\t"+e._s(t.language)+"\n\t\t\t\t\t\t")])})),0)]:n("div",{staticClass:"snip-tb-lang-static"},[e._v(e._s(e.languageLabel))]),e._v(" "),n("button",{staticClass:"snip-tb-fullscreen",attrs:{title:"Toggle Fullscreen"},on:{click:function(t){e.fullscreen=!e.fullscreen}}},[n("Icon",{attrs:{icon:"fullscreen"}})],1)],2)],2),e._v(" "),n("Resizer",{staticClass:"snip-resizer",attrs:{disabled:e.nonResizable||e.fullscreen,height:e.resizeHeight,"min-height":25},on:{"update:height":function(t){e.resizeHeight=t}}},[n("Codemirror",{staticClass:"snip-codemirror",attrs:{layout:null!=e.resizeHeight||e.fullscreen?"fill":"auto",filename:e.languageToFilename(e.language),value:"code"===e.selectedTab?e.localCode:e.localSchema,autofocus:e.autofocus,"line-numbers":""},on:{input:e.onCodeChanged}})],1),e._v(" "),e.runnerActive?n("div",{staticClass:"snip-result"},[n("div",{staticClass:"snip-close",class:{expanded:e.runnerVisible},on:{click:e.toggleRunner}},[n("svg",{attrs:{viewBox:"0 0 20 6"}},[n("path",{attrs:{d:"M1,1 L10,5 L19,1"}})])]),e._v(" "),"runner"===e.runnerType?n("Runner",{directives:[{name:"show",rawName:"v-show",value:e.runnerVisible,expression:"runnerVisible"}],ref:"runner",staticClass:"snip-runner",attrs:{preview:e.previewFiles},on:{"will-run":e.onWillRun,"did-run":e.onDidRun}}):e._e(),e._v(" "),"web"===e.runnerType?[n("Sandbox",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],key:e.sandboxKey,attrs:{js:e.sandboxCode},on:{error:e.onSandboxError,log:e.onSandboxLog}}),e._v(" "),e.sandboxLogs.length?n("WebSnippetLogs",{directives:[{name:"show",rawName:"v-show",value:e.runnerVisible,expression:"runnerVisible"}],staticClass:"snip-logs",attrs:{logs:e.sandboxLogs}}):e._e()]:e._e()],2):e._e(),e._v(" "),e.turtleVisible?n("ContentDialog",{attrs:{title:"Turtle Output"},on:{close:function(t){e.turtleVisible=!1}}},[n("Turtle",{ref:"turtle",staticClass:"snip-turtle",attrs:{python3:"py3turtle"===e.language}})],1):e._e()],1)],1)}),[],!1,null,null,null));t.a=T.exports},Qe5X:function(e,t,n){"use strict";var s=n("s0lQ");n.n(s).a},QfBM:function(e,t,n){},Qg11:function(e,t,n){"use strict";var s=n("Jjot");n.n(s).a},Qk0s:function(e,t,n){},Qkj8:function(e,t,n){"use strict";var s=n("Q70W");n.n(s).a},QmWB:function(e,t,n){},QpEY:function(e,t,n){"use strict";var s=n("/VsW");n.n(s).a},"Qs+9":function(e,t,n){"use strict";var s=n("qk7x");n.n(s).a},R0ua:function(e,t,n){},R2XL:function(e,t,n){"use strict";var s=n("sLCi");n.n(s).a},R7V3:function(e,t,n){},R84W:function(e,t,n){"use strict";n("qePV");var s={props:{ratio:{type:Number,default:1}},computed:{style:function(){return{paddingBottom:null==this.ratio?void 0:100*this.ratio+"%"}}}},i=(n("YfTP"),n("KHd+")),r=Object(i.a)(s,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"flexible",style:this.style},[t("div",{staticClass:"flexible-inner"},[this._t("default")],2)])}),[],!1,null,null,null);t.a=r.exports},RDGb:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("yXV3"),n("pDQq"),n("5DmW"),n("27RR"),n("tkto"),n("UxlC"),n("SYor"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("Puqe"),l=n.n(o),c=n("L2JU"),u=n("Pa8A"),d=n("xtk+"),h=n("4K9I"),p=n("4cYw"),f=n("IbLZ"),m=n("WmPt"),v=n("/Yj0"),b=n("5/Cn");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var y,w,_,k,C={inject:["userApi"],directives:{Tooltip:u.a},components:{EdInput:d.a,EdButton:h.a,EdSelect:p.a,EdField:f.a,Icon:m.a},data:function(){return{newEmailLoading:!1,newEmail:"",primaryEmailLoading:!1,primaryEmail:null}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(c.e)(["user"]),{},Object(c.c)(["isUserAdmin"]),{canUpdatePrimaryEmail:function(){return this.isUserAdmin||!1},addEmailDisabled:function(){return this.newEmailLoading||!this.newEmail.trim()},primaryEmailDisabled:function(){return this.primaryEmailLoading||this.primaryEmail.trim()===this.user.email}}),created:function(){this.primaryEmail=this.user.email,this.continueAddEmail()},methods:{deleteEmail:(k=Object(r.a)(i.a.mark((function e(t){var n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.b({title:"Delete secondary email ".concat(t,"?"),text:"You will no longer be able to use this email adress to recover your account in the event that you forget your Ed account password, nor will you be able to log in using this email address.",icon:"warning",primaryAction:"Delete Email"});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return n=this.user,e.prev=5,e.next=8,this.userApi.deleteEmail(n.id,t);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(5),v.b({type:"error",text:"Unable to delete email."}),e.abrupt("return");case 14:this.user===n&&-1!==(s=n.secondary_emails.indexOf(t))&&n.secondary_emails.splice(s,1),v.b({type:"success",text:"Email deleted."});case 16:case"end":return e.stop()}}),e,this,[[5,10]])}))),function(e){return k.apply(this,arguments)}),addEmail:(_=Object(r.a)(i.a.mark((function e(){var t,n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.addEmailDisabled){e.next=2;break}return e.abrupt("return");case 2:return t=this.user,n=this.newEmail.trim(),e.prev=4,e.next=7,this.userApi.addEmail(t.id,n);case 7:e.next=21;break;case 9:e.prev=9,e.t0=e.catch(4),e.t1=e.t0.data&&e.t0.data.code,e.next="email_invalid"===e.t1?14:"email_exists"===e.t1?16:18;break;case 14:return s="Email address is invalid.",e.abrupt("break",19);case 16:return s="".concat(n," is already registered with another user account. If you have multiple accounts, you can merge them into one account by using the Merge Accounts form at the bottom of this page."),e.abrupt("break",19);case 18:s="Try again later.";case 19:return b.a({icon:"error",title:"Unable to add email address",text:s}),e.abrupt("return");case 21:this.user===t&&(this.newEmail=""),b.a({icon:"info",title:"Verification email sent",text:"A verification email was sent to ".concat(n,". Check the email message for further instructions.")});case 23:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(){return _.apply(this,arguments)}),continueAddEmail:(w=Object(r.a)(i.a.mark((function e(){var t,n,s,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.$route.query.token){e.next=3;break}return e.abrupt("return");case 3:return this.$router.replace({path:this.$route.path,query:l()(this.$route.query,["token"])}),n=this.user,e.prev=5,e.next=8,this.userApi.addEmailWithToken(n.id,t);case 8:s=e.sent,e.next=23;break;case 11:e.prev=11,e.t0=e.catch(5),e.t1=e.t0.data&&e.t0.data.code,e.next="token_invalid"===e.t1?16:"token_expired"===e.t1?16:"user_forbidden"===e.t1?18:20;break;case 16:return r="The link has expired or is invalid. Add the email address again to get a new email with a valid link.",e.abrupt("break",21);case 18:return r="You must be logged into the Ed account that requested the email.",e.abrupt("break",21);case 20:r="Try again later.";case 21:return b.a({icon:"error",title:"Unable to add email address",text:r}),e.abrupt("return");case 23:this.user===n&&n.secondary_emails.push(s),v.b({type:"success",text:"Email added successfully."});case 25:case"end":return e.stop()}}),e,this,[[5,11]])}))),function(){return w.apply(this,arguments)}),savePrimaryEmail:(y=Object(r.a)(i.a.mark((function e(){var t,n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.primaryEmailDisabled){e.next=2;break}return e.abrupt("return");case 2:return t=this.user,n=this.primaryEmail,e.prev=3,e.next=6,this.userApi.updatePrimaryEmail(t.id,n);case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(3),v.b({type:"error",text:"Unable to set primary email."}),e.abrupt("return");case 12:this.user===t&&(-1!==(s=t.secondary_emails.indexOf(n))&&t.secondary_emails.splice(s,1),t.secondary_emails.push(t.email),t.email=n),v.b({type:"success",text:"Primary email changed."});case 14:case"end":return e.stop()}}),e,this,[[3,8]])}))),function(){return y.apply(this,arguments)})}},x=(n("SAk5"),n("KHd+")),j=Object(x.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{staticClass:"settings-heading"},[e._v("Emails")]),e._v(" "),n("p",{staticClass:"settings-text"},[e._v("\n\t\tYou will only receive emails from Ed at your primary email address.\n\t")]),e._v(" "),n("p",{staticClass:"settings-text"},[e._v("\n\t\tYou can associate additional email addresses with your Ed account for\n\t\tthe purpose of recovering your account in the case of a forgotten password.\n\t")]),e._v(" "),n("p",{staticClass:"settings-text"},[e._v("\n\t\tYou can log into Ed using any of your registered email addresses.\n\t")]),e._v(" "),n("div",{staticClass:"setemails-emails"},[n("div",{staticClass:"setemails-emails-row"},[n("div",{staticClass:"setemails-emails-email"},[e._v(e._s(e.user.email)+" "),n("span",{staticClass:"setemails-emails-primary"},[e._v("Primary")])])]),e._v(" "),e._l(e.user.secondary_emails,(function(t){return n("div",{key:t,staticClass:"setemails-emails-row"},[n("div",{staticClass:"setemails-emails-email"},[e._v(e._s(t))]),e._v(" "),n("div",{staticClass:"setemails-emails-actions"},[n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Delete",expression:"'Delete'"}],staticClass:"setemails-emails-action",on:{click:function(n){return e.deleteEmail(t)}}},[n("Icon",{attrs:{icon:"delete"}})],1)])])}))],2),e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Add email address")]},proxy:!0}])},[e._v(" "),n("form",{staticClass:"setemails-input-layout",on:{submit:function(t){return t.preventDefault(),e.addEmail(t)}}},[n("EdInput",{attrs:{disabled:e.newEmailLoading},model:{value:e.newEmail,callback:function(t){e.newEmail=t},expression:"newEmail"}}),e._v(" "),n("EdButton",{attrs:{type:"submit",disabled:e.addEmailDisabled}},[e._v("Add")])],1)]),e._v(" "),e.canUpdatePrimaryEmail&&e.user.secondary_emails.length?n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Primary email address")]},proxy:!0}],null,!1,827218413)},[e._v(" "),n("form",{staticClass:"setemails-input-layout",on:{submit:function(t){return t.preventDefault(),e.savePrimaryEmail(t)}}},[n("EdSelect",{attrs:{disabled:e.primaryEmailLoading},model:{value:e.primaryEmail,callback:function(t){e.primaryEmail=t},expression:"primaryEmail"}},[n("option",{domProps:{value:e.user.email}},[e._v(e._s(e.user.email))]),e._v(" "),e._l(e.user.secondary_emails,(function(t){return n("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])}))],2),e._v(" "),n("EdButton",{attrs:{type:"submit",disabled:e.primaryEmailDisabled}},[e._v("Save")])],1)]):e._e()],1)}),[],!1,null,null,null);t.default=j.exports},RKKz:function(e,t,n){},RLTt:function(e,t,n){"use strict";var s=n("B7Aq");n.n(s).a},RNdA:function(e,t,n){},"RO+U":function(e,t,n){"use strict";var s=n("P7kB");n.n(s).a},RWvm:function(e,t,n){},Rc11:function(e,t,n){"use strict";var s=n("F5/3");n.n(s).a},Rg19:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("XbcX"),n("4mDm"),n("2B1R"),n("ToJy"),n("c9m3"),n("Tskq"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("5s+n"),n("PKPk"),n("Rm1S"),n("FZtP"),n("3bBZ");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("bt/X"),l=n.n(o),c=n("L2JU"),u=n("hSdx"),d=n("/Yj0"),h=n("V0Xi"),p=n("4cYw"),f=n("6XG0");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var v,b,g={components:{Cloner:h.a,EdSelect:p.a,EdCheck:f.a},inject:["challengeApi"],data:function(){return{status:"idle",items:[],eraseDueAt:!0,hidden:!0}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(c.e)(["user","course"]),{type:function(){return this.$route.name.match(/^assessment/)?"assessment":"challenge"},typePlural:function(){return this.type+"s"},groups:function(){var e=this,t=new Map(this.user.courses.map((function(e){return[e.id,e]}))),n=l()(this.items,(function(e){return e.challenge.course_id}));return Object.keys(n).flatMap((function(e){var s=t.get(+e);return s?{key:s.id,title:s.code,text:[s.session,s.year].filter(Boolean).join(", "),items:n[e],course:s}:[]})).sort(u.compositeComparator((function(t,n){return(t.course===e.course?0:1)-(n.course===e.course?0:1)}),(function(e,t){return u.naturalComparator(e.title,t.title)}),(function(e,t){return u.naturalComparator(e.text,t.text)})))}}),created:function(){this.update()},methods:{pluralize:u.pluralize,update:(b=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.status="loading",e.prev=1,e.next=4,this.challengeApi.getUserChallenges(this.type);case 4:t=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),d.b({type:"error",text:"Unable to fetch ".concat(this.typePlural,".")}),e.abrupt("return");case 11:return e.prev=11,this.status="idle",e.finish(11);case 14:this.items=t.map((function(e){return{challenge:e,key:e.id,title:e.title,checked:!1,status:"idle"}}));case 15:case"end":return e.stop()}}),e,this,[[1,7,11,14]])}))),function(){return b.apply(this,arguments)}),clone:(v=Object(r.a)(i.a.mark((function e(t){var n,s,a,o=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.items,s=function(){var e=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.status="cloning",e.prev=1,e.next=4,o.challengeApi.cloneChallenge(t.challenge.id,o.course.id,{eraseDueAt:o.eraseDueAt,hidden:o.hidden});case 4:t.status="success",e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(1),t.status="error",e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),this.status="cloning",e.next=5,u.promiseMap(n,s,{concurrency:5});case 5:return a=e.sent,e.next=8,new Promise((function(e){return setTimeout(e,500)}));case 8:this.status="done",a.every((function(e){return e.success}))?(d.b({type:"success",text:"Clone successful."}),this.done()):d.b({type:"error",text:"Some ".concat(this.typePlural," failed to clone.")});case 10:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)}),done:function(){this.$router.push({name:"".concat(this.type,"-index")})}}},y=(n("qWa7"),n("KHd+")),w=Object(y.a)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"challenge-clone"},[n("Cloner",{attrs:{"item-type":e.type,"item-type-plural":e.typePlural,status:e.status,groups:e.groups},on:{clone:e.clone,done:e.done},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.selectedItems;return[n("h2",{staticClass:"cloner-heading"},[e._v("Options")]),e._v(" "),n("EdCheck",{staticClass:"challenge-clone-check",attrs:{label:"Remove due date",description:"If checked, the cloned "+e.typePlural+" will not have a due date",disabled:"cloning"===e.status||"done"===e.status},model:{value:e.eraseDueAt,callback:function(t){e.eraseDueAt=t},expression:"eraseDueAt"}}),e._v(" "),n("div",{staticClass:"challenge-clone-field"},[n("label",[e._v("Hidden status:")]),e._v(" "),n("EdSelect",{attrs:{disabled:"cloning"===e.status||"done"===e.status},model:{value:e.hidden,callback:function(t){e.hidden=t},expression:"hidden"}},[n("option",{domProps:{value:null}},[e._v("Do not change")]),e._v(" "),n("option",{domProps:{value:!0}},[e._v("Make hidden")]),e._v(" "),n("option",{domProps:{value:!1}},[e._v("Make visible")])])],1),e._v(" "),n("h2",{staticClass:"cloner-heading"},[e._v("Summary")]),e._v(" "),n("ul",[s.length?[s.length?n("li",[e._v(e._s(s.length)+" "+e._s(e.pluralize(s.length,e.typePlural))+" will be cloned.")]):e._e(),e._v(" "),n("li",[e._v("Any existing submissions for the selected "+e._s(e.pluralize(s.length,e.typePlural))+" will not be cloned.")]),e._v(" "),e.eraseDueAt?n("li",[e._v("The due date (if any) will be removed from the cloned "+e._s(e.pluralize(s.length,e.typePlural))+".")]):e._e(),e._v(" "),null!=e.hidden?n("li",[e._v("The cloned "+e._s(e.pluralize(s.length,e.typePlural))+" will be made "+e._s(e.hidden?"hidden":"visible")+".")]):e._e()]:n("li",[e._v("You have not selected any "+e._s(e.typePlural)+" to clone.")])],2)]}}])})],1)}),[],!1,null,null,null);t.default=w.exports},RiuU:function(e,t,n){"use strict";var s=n("XlJ8");n.n(s).a},Rqbj:function(e,t,n){},Rr6j:function(e,t,n){},RzOn:function(e,t,n){"use strict";var s=n("joVV");n.n(s).a},S1cT:function(e,t,n){"use strict";var s=n("RNdA");n.n(s).a},S5pG:function(e,t,n){},S9bM:function(e,t,n){"use strict";var s=n("U/SB");n.n(s).a},S9j9:function(e,t,n){},SAk5:function(e,t,n){"use strict";var s=n("MBTo");n.n(s).a},SCrw:function(e,t,n){},SLNV:function(e,t,n){"use strict";var s=n("ykPc");n.n(s).a},SQJw:function(e,t,n){"use strict";var s=n("hIB3");n.n(s).a},"SS+4":function(e,t,n){"use strict";n("2B1R"),n("qePV");var s=n("hSdx"),i={props:{items:{type:Array,required:!0},buffer:{type:Number,default:20},batchSize:{type:Number,default:40},containerTag:{type:String,default:"div"},containerClass:{type:[String,Object,Array],default:""},contentTag:{type:String,default:"div"},contentClass:{type:[String,Object,Array],default:""},guideTag:{type:String,default:"div"},headerHeight:{type:Number,default:0},footerHeight:{type:Number,default:0},itemHeight:{type:Number,default:0}},data:function(){return{firstVisibleIndex:-1,lastVisibleIndex:-1}},computed:{itemOffsets:function(){var e=this,t=this.headerHeight;return this.items.map((function(n){var s=t;return t+=e.getItemHeight(n),s}))},firstRealizedIndex:function(){return-1===this.firstVisibleIndex?-1===this.lastVisibleIndex?-1:0:Math.max(0,Math.floor((this.firstVisibleIndex-this.buffer)/this.batchSize)*this.batchSize)},lastRealizedIndex:function(){return-1===this.firstRealizedIndex?-1:Math.min(this.items.length-1,this.firstRealizedIndex+2*this.batchSize)}},watch:{items:"invalidate",buffer:"invalidate",batchSize:"invalidate",headerHeight:"invalidate",footerHeight:"invalidate"},created:function(){this.dirty=!1},mounted:function(){var e=this;this.observer=new IntersectionObserver((function(){return e.invalidate()}),{root:this.$el}),this.observer.observe(this.$refs.guideTop),this.observer.observe(this.$refs.guideBottom),this.$nextTick((function(){return e.update()}))},destroyed:function(){this.observer.disconnect()},methods:{getItemHeight:function(e){return"number"==typeof e.height?e.height:this.itemHeight},invalidate:function(){var e=this;this.dirty||(this.dirty=!0,window.requestAnimationFrame((function(){return e.update()})))},update:function(){this.dirty=!1;var e=this.$el.scrollTop,t=this.$el.clientHeight;this.firstVisibleIndex=this.itemIndexAtScrollOffset(this.headerHeight+e),this.lastVisibleIndex=this.itemIndexAtScrollOffset(this.headerHeight+e+t)},itemIndexAtScrollOffset:function(e){var t=this;return s.binarySearch(this.items,(function(n,s){return t.itemOffsets[s]<=e?t.itemOffsets[s]+t.getItemHeight(n)>=e?0:-1:1}))}},render:function(){var e=arguments[0],t=this.firstRealizedIndex,n=this.lastRealizedIndex,s=this.items,i=this.itemOffsets,r=this.contentTag,a=this.contentClass,o=this.containerTag,l=this.containerClass,c=this.guideTag,u=this.headerHeight,d=this.$scopedSlots,h=[];if(-1!==t)for(var p=t;p<=n;p++)h.push(this.$scopedSlots.item({index:p,realizedIndex:p-this.firstRealizedIndex,item:s[p]}));var f=s[s.length-1]?this.getItemHeight(s[s.length-1]):0,m=s[n]?this.getItemHeight(s[n]):0,v=i[t]-u||0,b=i[s.length-1]+f-i[n]-m||0,g=e(r,{ref:"content",staticClass:"vlist-content",class:a},[e(c,{ref:"guideTop",key:"guideTop",style:{height:v+"px"},directives:[{name:"show",value:v>0}]}),h,e(c,{ref:"guideBottom",key:"guideBottom",style:{height:b+"px"},directives:[{name:"show",value:b>0}]})]),y=i[i.length-1]+f,w=e(o,{staticClass:"vlist-container",class:l,style:{height:y+"px"}},[d.header&&d.header(),g,d.footer&&d.footer()]),_=e("div",{staticClass:"virtualized-list",on:{scroll:this.invalidate}},[w]);return _}},r=(n("9KaT"),n("KHd+")),a=Object(r.a)(i,void 0,void 0,!1,null,null,null);t.a=a.exports},SWsQ:function(e,t,n){e.exports=n.p+"assets/image-error.d6e020a1.svg"},SuT0:function(e,t,n){"use strict";var s={extends:n("zWr8").a},i=(n("pQr/"),n("KHd+")),r=Object(i.a)(s,(function(){var e=this.$createElement;return(this._self._c||e)("iframe",{staticClass:"lessli-webpage-iframe",attrs:{src:this.slide.url,sandbox:"allow-scripts allow-forms allow-same-origin allow-popups"}})}),[],!1,null,null,null);t.a=r.exports},Sw9Q:function(e,t,n){"use strict";var s=n("D6TY");n.n(s).a},SxMk:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("fbCW"),n("2B1R"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("rePB"),i=n("L2JU"),r=n("9z1j");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var o={challenges:{text:"Challenges",route:"challenge-index"},leaderboard:{text:"Leaderboard",route:"challenge-leaderboard"}},l={name:"ChallengeIndexMaster",components:{TabsHeader:r.a},data:function(){return{tabs:[o.challenges,o.leaderboard]}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(i.e)(["course"]),{},Object(i.c)(["isAdmin"]),{selectedTab:function(){var e=this;return Object.keys(o).map((function(e){return o[e]})).find((function(t){return e.$route.matched.some((function(e){return t.route===e.name}))}))}}),methods:{onTabsHeaderInput:function(e){this.$router.push({name:e.route})}}},c=(n("GIDB"),n("KHd+")),u=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"page-heading-container"},[n("h1",{staticClass:"page-heading"},[e._v("Challenges")]),e._v(" "),e.course.features.leaderboard?n("TabsHeader",{attrs:{tabs:e.tabs,value:e.selectedTab},on:{input:e.onTabsHeaderInput}}):e._e()],1),e._v(" "),n("RouterView")],1)}),[],!1,null,null,null);t.default=u.exports},T5An:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l}));n("4mDm"),n("Tskq"),n("07d7"),n("5s+n"),n("PKPk"),n("Rm1S"),n("3bBZ");var s=n("OLBB"),i=new(n.n(s).a),r=new Map,a=1;function o(e,t){return new Promise((function(n){var s=a++;r.set(s,n),i.postMessage({id:s,code:t,language:e})}))}function l(e,t){return new Promise((function(n){var s=a++;r.set(s,n),i.postMessage({id:s,code:e,languageSubset:t})}))}i.addEventListener("message",(function(e){if(r.has(e.data.id)){var t=r.get(e.data.id);r.delete(e.data.id),t(function(e){var t=e.value,n=e.language,s=e.relevance,i=(new DOMParser).parseFromString("<!DOCTYPE html><html><body>".concat(t,"</body></html>"),"text/html"),r=document.createTreeWalker(i.body,NodeFilter.SHOW_TEXT),a=function(e){for(var t=[];"SPAN"===(e=e.parentNode).tagName;){var n=e.className.match(/hljs-(.*)/);n&&t.unshift(n[1])}return t},o=[];for(;r.nextNode();)o.push({text:r.currentNode.nodeValue,type:a(r.currentNode)});return{highlights:o,language:n,relevance:s}}(e.data.result))}}))},TGly:function(e,t,n){"use strict";var s=n("AroD");n.n(s).a},THgv:function(e,t,n){},THxs:function(e,t,n){},TMrU:function(e,t,n){},TNIm:function(e,t,n){"use strict";var s=n("TUkl");n.n(s).a},TPou:function(e,t,n){"use strict";var s=n("CBL8");n.n(s).a},TQLY:function(e,t,n){"use strict";var s=n("mR7k");n.n(s).a},TUkl:function(e,t,n){},TWCV:function(e,t,n){"use strict";var s=n("ZVI5");n.n(s).a},TdcQ:function(e,t,n){"use strict";var s={props:{label:{type:String,default:void 0}}},i=(n("77cL"),n("KHd+")),r=Object(i.a)(s,(function(e,t){var n=t._c;return n("tr",{staticClass:"form-layout-row"},[n("td",{staticClass:"flr-label"},[t._v(t._s(t.props.label))]),t._v(" "),n("td",[t._t("default")],2)])}),[],!0,null,null,null);t.a=r.exports},TfQX:function(e,t,n){},To38:function(e,t,n){"use strict";var s=n("mGP1");n.n(s).a},TphV:function(e,t,n){"use strict";n("pNMO"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("rePB"),i=n("L2JU"),r=n("NtlG"),a=n("NC1X");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var l={components:{CenterLayout:r.a,Spinner:a.a},props:{title:{type:String,default:null},loading:{type:Boolean,default:!1},secondary:{type:Boolean,default:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(i.c)(["accentSecondaryColor"]),{style:function(){return{backgroundColor:this.secondary?this.accentSecondaryColor:void 0}}})},c=(n("1iFc"),n("KHd+")),u=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("CenterLayout",{staticClass:"navbar",class:{"navbar-secondary":e.secondary},style:e.style,scopedSlots:e._u([{key:"left",fn:function(){return[n("div",{staticClass:"navbar-side"},[e._t("left")],2)]},proxy:!0},{key:"right",fn:function(){return[n("div",{staticClass:"navbar-side"},[e._t("right")],2)]},proxy:!0}],null,!0)},[e._v(" "),e._v(" "),n("div",{staticClass:"navbar-fill"},[e.loading?n("Spinner",{staticClass:"navbar-spinner"}):e._e(),e._v(" "),e.title?n("h1",{staticClass:"navbar-title"},[e._v(e._s(e.title))]):e._e()],1)])}),[],!1,null,null,null);t.a=u.exports},TptF:function(e,t,n){},TxTQ:function(e,t,n){"use strict";var s,i=n("o0o1"),r=n.n(i),a=(n("ls82"),n("HaE+")),o=n("WmPt"),l=n("4K9I"),c=n("5/Cn"),u={components:{Icon:o.a,EdButton:l.a},props:{heading:{type:String,default:""},icon:{type:String,default:void 0},editable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},number:{type:String,default:null},showButtons:{type:Boolean,default:!1}},methods:{onFormattedInput:(s=Object(a.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}this.$refs.question.convertToFormatted(),e.next=8;break;case 4:return e.next=6,c.b({icon:"warning",title:"Convert to plain text?",text:"This will remove all text formatting and multimedia content (images, videos, etc) from the question.",primaryAction:"Remove Formatting"});case 6:if(!e.sent){e.next=8;break}this.$refs.question.convertToUnformatted();case 8:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})}},d=(n("OlkN"),n("KHd+")),h=Object(d.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quiz-element",class:{disabled:e.disabled}},[n("div",{staticClass:"qzel-content"},[n("div",{staticClass:"qzel-head"},[null!=e.number?n("div",{staticClass:"qzel-head-number"},[e._v(e._s(e.number))]):e._e(),e._v(" "),e.icon?n("Icon",{staticClass:"qzel-head-icon",attrs:{icon:e.icon}}):e._e(),e._v(" "),n("div",{staticClass:"qzel-head-text"},[e._v(e._s(e.heading))]),e._v(" "),e._t("header"),e._v(" "),e.editable&&e.showButtons?n("EdButton",{key:"cancel",staticClass:"qzel-head-btn",attrs:{disabled:e.disabled},on:{click:function(t){return e.$emit("cancel")}}},[e._v("\n\t\t\t\tCancel\n\t\t\t")]):e._e(),e._v(" "),e.editable&&e.showButtons?n("EdButton",{key:"save",staticClass:"qzel-head-btn success",attrs:{disabled:e.disabled},on:{click:function(t){return e.$emit("save")}}},[e._v("\n\t\t\t\tSave\n\t\t\t")]):e._e(),e._v(" "),!e.editable&&e.showButtons?n("EdButton",{key:"edit",staticClass:"qzel-head-btn",attrs:{disabled:e.disabled},on:{click:function(t){return e.$emit("edit")}}},[e._v("\n\t\t\t\tEdit\n\t\t\t")]):e._e()],2),e._v(" "),e._t("default")],2),e._v(" "),n("div",{staticClass:"qzel-actions"},[e._t("actions")],2)])}),[],!1,null,null,null);t.a=h.exports},"U/SB":function(e,t,n){},U3Ge:function(e,t,n){},UEFX:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("4Brf"),n("0oug"),n("TeQF"),n("4mDm"),n("2B1R"),n("ToJy"),n("Tskq"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("PKPk"),n("FZtP"),n("3bBZ");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("ODXe"),o=n("rePB"),l=n("L2JU"),c=n("Pa8A"),u=n("WmPt"),d=n("NC1X"),h=n("9wdi"),p=n("N+Un"),f=n("0XH5"),m=n("43W2"),v=n("Oshs"),b=n("HEf1"),g=n("5/Cn"),y=n("/Yj0"),w=n("hSdx");function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C,x,j={name:"ChallengeIndex",directives:{Tooltip:c.a},components:{Icon:u.a,Spinner:d.a,Actionbar:h.a,ActionbarAction:p.a,SearchInput:f.a,StatusMessage:m.a,SheetContainer:v.a},inject:["challengeApi"],data:function(){return{challenges:[],loading:!1,searchQuery:""}},computed:k({},Object(l.e)(["course"]),{},Object(l.c)(["isAdmin","isStaff"]),{filteredChallenges:function(){var e=this;return this.challenges.filter((function(t){return w.validateSubstrDeep(t,e.searchQuery,"title")}))},groups:function(){var e=this,t=new Map,n=!0,s=!1,i=void 0;try{for(var r,o=this.filteredChallenges[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var l=r.value;t.has(l.category)||t.set(l.category,[]),t.get(l.category).push(l)}}catch(v){s=!0,i=v}finally{try{n||null==o.return||o.return()}finally{if(s)throw i}}var c=[],u=!0,d=!1,h=void 0;try{for(var p,f=function(){var t=Object(a.a)(p.value,2),n=t[0],s=t[1],i=!0,r=!0,o=null;c.push({name:n,challenges:s.sort((function(e,t){var n=e.number-t.number;return 0!==n?n:w.naturalComparator(e.title,t.title)})).map((function(t){(null==o||t.number>o)&&(o=t.number,i=i&&r,r=!0);var n=k({},t,{available:e.isStaff||!t.sequential_completion||i});return r=r&&"completed"===t.status,n}))})},m=t.entries()[Symbol.iterator]();!(u=(p=m.next()).done);u=!0)f()}catch(v){d=!0,h=v}finally{try{u||null==m.return||m.return()}finally{if(d)throw h}}return c.sort((function(e,t){return w.naturalComparator(e.name,t.name)})),c}}),created:function(){this.update()},methods:{pluralize:w.pluralize,challengeLink:function(e){return e.available?{name:"challenge-show",params:{challengeId:e.id}}:""},update:(x=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loading){e.next=2;break}return e.abrupt("return");case 2:return this.loading=!0,e.prev=3,e.next=6,this.challengeApi.getCourseChallenges("challenge",this.course.id);case 6:this.challenges=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),y.b({type:"error",text:"Unable to fetch challenges."});case 12:return e.prev=12,this.loading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[3,9,12,15]])}))),function(){return x.apply(this,arguments)}),deleteChallenge:(C=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.d({title:"Delete challenge?",text:"This cannot be undone.",icon:"warning",primaryAction:"Delete",secondaryAction:"Cancel"});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,this.challengeApi.destroyChallenge(t.id);case 7:this.challenges=this.challenges.filter((function(e){return e.id!==t.id})),y.b({type:"success",text:"Challenge deleted."}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),y.b({type:"error",text:"Unable to delete challenge."});case 14:case"end":return e.stop()}}),e,this,[[4,11]])}))),function(e){return C.apply(this,arguments)}),handleChallengeClick:function(e){e.available||g.a({icon:"warning",title:"Challenge unavailable",text:"You must complete all prior challenges first."})},showNewChallengeSheet:function(){this.$refs.sheetContainer.showSheet(b.a)}}},O=(n("H1kP"),n("KHd+")),S=Object(O.a)(j,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chai-container"},[n("Actionbar",{directives:[{name:"show",rawName:"v-show",value:e.isAdmin||e.challenges.length,expression:"isAdmin || challenges.length"}],staticClass:"page-heading-actions",scopedSlots:e._u([e.isAdmin?{key:"primary",fn:function(){return[n("ActionbarAction",{staticClass:"primary",on:{click:e.showNewChallengeSheet}},[e._v("New Challenge")])]},proxy:!0}:null,{key:"secondary",fn:function(){return[n("SearchInput",{attrs:{placeholder:"Search challenges"},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}})]},proxy:!0}],null,!0)}),e._v(" "),e.loading?n("Spinner",{staticClass:"chai-spinner"}):[e.groups.length?e._e():n("StatusMessage",{scopedSlots:e._u([{key:"subtext",fn:function(){return[e.searchQuery?[e._v("Refine your search and try again")]:e.isAdmin?[n("a",{on:{click:e.showNewChallengeSheet}},[e._v("Create a new challenge")])]:[e._v("Check back later")]]},proxy:!0}],null,!1,694812468)},[e.searchQuery?[e._v("No challenges match your search query")]:[e._v("There are no challenges yet")]],2),e._v(" "),n("div",{staticClass:"chai-listing"},e._l(e.groups,(function(t){return n("div",{key:t.name},[n("h2",{staticClass:"chai-group-heading"},[e._v(e._s(t.name))]),e._v(" "),n("div",{staticClass:"chai-listing-table",attrs:{role:"presentation"}},e._l(t.challenges,(function(t){return n("div",{key:t.id,staticClass:"chai-item chai-listing-table-row",class:{"chai-item-unavailable":!t.available},attrs:{tabindex:"0"},on:{click:function(n){return e.handleChallengeClick(t)}}},[n("RouterLink",{attrs:{to:e.challengeLink(t),tabindex:"-1"}},[n("div",{staticClass:"chai-listing-center chai-listing-table-cell chai-item-number"},[e._v(e._s(t.number))])]),e._v(" "),n("RouterLink",{attrs:{to:e.challengeLink(t),tabindex:"-1"}},[n("div",{staticClass:"chai-listing-center chai-listing-table-cell chai-item-status"},[t.is_hidden?n("Icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Hidden",expression:"'Hidden'"}],staticClass:"chai-item-status-hidden",attrs:{icon:"hidden"}}):"unattempted"===t.status?n("Icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Unattempted",expression:"'Unattempted'"}],staticClass:"chai-item-status-unattempted",attrs:{icon:"dot"}}):"attempted"===t.status?n("Icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Attempted",expression:"'Attempted'"}],staticClass:"chai-item-status-attempted",attrs:{icon:"dot"}}):"completed"===t.status?n("Icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Completed",expression:"'Completed'"}],staticClass:"chai-item-status-completed",attrs:{icon:"tick"}}):e._e()],1)]),e._v(" "),n("RouterLink",{attrs:{to:e.challengeLink(t)}},[n("div",{staticClass:"chai-listing-center chai-listing-table-cell chai-item-title"},[n("span",[e._v(e._s(t.title))])])]),e._v(" "),n("RouterLink",{attrs:{to:e.challengeLink(t),tabindex:"-1"}},[n("div",{staticClass:"chai-listing-center chai-listing-table-cell"},[t.points?n("div",{staticClass:"chai-item-points"},["completed"===t.status?n("span",{staticClass:"chai-item-points-score"},[e._v(e._s(t.score)+" /")]):e._e(),e._v(" "),n("span",{staticClass:"chai-item-points-total"},[e._v(e._s(t.points))]),e._v(" "),n("span",{staticClass:"chai-item-points-label"},[e._v(e._s(e.pluralize(t.points,"point")))])]):e._e()])]),e._v(" "),n("div",{staticClass:"chai-listing-table-cell chai-item-actions"},[e.isAdmin?[n("RouterLink",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Edit",expression:"'Edit'"}],attrs:{to:{name:"challenge-edit",params:{challengeId:t.id}}}},[n("button",{staticClass:"chai-item-action",attrs:{tabindex:"-1"}},[n("Icon",{attrs:{icon:"pencil"}})],1)]),e._v(" "),n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Delete",expression:"'Delete'"}],staticClass:"chai-item-action",on:{click:function(n){return n.stopPropagation(),e.deleteChallenge(t)}}},[n("Icon",{attrs:{icon:"cross"}})],1)]:e._e()],2)],1)})),0)])})),0)],e._v(" "),n("SheetContainer",{ref:"sheetContainer",staticClass:"chai-sheet-container"})],2)}),[],!1,null,null,null);t.default=S.exports},UNns:function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("0oug"),n("ma9I"),n("yq1k"),n("4mDm"),n("qePV"),n("07d7"),n("YGK4"),n("PKPk"),n("3bBZ");var s=n("kvrn"),i=n.n(s),r=n("1OyB"),a=n("vuIU"),o=n("iiMZ"),l=n("OH48"),c=n("G7T9"),u=n("9Arg"),d=new(function(){function e(){Object(r.a)(this,e),this.popups=new Set,document.addEventListener("click",this.onDocumentClick.bind(this))}return Object(a.a)(e,[{key:"add",value:function(e){this.popups.add(e)}},{key:"remove",value:function(e){this.popups.delete(e)}},{key:"onDocumentClick",value:function(e){var t=null,n=!0,s=!1,i=void 0;try{for(var r,a=this.popups[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value;if(o.$refs.popup.contains(e.target)){t=o;break}}}catch(g){s=!0,i=g}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}for(var l=new Set,u=t;u;u=u.$parent)c.f(u,h)&&l.add(u);var d=!0,p=!1,f=void 0;try{for(var m,v=this.popups[Symbol.iterator]();!(d=(m=v.next()).done);d=!0){var b=m.value;b.lightDismissable&&b.lightDismissReady&&!l.has(b)&&b.$emit("close")}}catch(g){p=!0,f=g}finally{try{d||null==v.return||v.return()}finally{if(p)throw f}}}}]),e}()),h={inheritAttrs:!1,directives:{Resize:o.a},props:{kind:{type:String,default:"basic"},arrowless:{type:Boolean,default:!1},targetLeft:{type:Number,default:0},targetTop:{type:Number,default:0},targetWidth:{type:Number,default:0},targetHeight:{type:Number,default:0},targetAnchorX:{type:Number,default:.5},targetAnchorY:{type:Number,default:1},anchorX:{type:Number,default:.5},anchorY:{type:Number,default:0},insetLeft:{type:Number,default:0},insetTop:{type:Number,default:0},insetRight:{type:Number,default:0},insetBottom:{type:Number,default:0},clipMode:{type:String,default:"clamp"},pagePadding:{type:Number,default:5},lightDismissable:{type:Boolean,default:!1},clickDismissable:{type:Boolean,default:!1},animationless:{type:Boolean,default:!1},unclickable:{type:Boolean,default:!1},background:{type:String,default:"rgb(255, 255, 255)"},borderColor:{type:String,default:"rgba(0, 0, 0, 0.1)"},borderWidth:{type:Number,default:1},borderRadius:{type:Number,default:6},elevation:{type:Number,default:3}},data:function(){return{arrowW:20,arrowH:10,popupWidth:0,popupHeight:0,windowWidth:0,windowHeight:0,lightDismissReady:!1}},computed:{clipLeft:function(){return this.pagePadding},clipTop:function(){return this.pagePadding},clipRight:function(){return this.windowWidth-this.pagePadding},clipBottom:function(){return this.windowHeight-this.pagePadding}},mounted:function(){var e=this;d.add(this),this.disposable=u.f(window,"resize",(function(){return e.updateWindowSize()})),this.$nextTick((function(){e.updateWindowSize(),e.updatePopupSize()})),setTimeout((function(){return e.lightDismissReady=!0}))},destroyed:function(){d.remove(this),this.disposable&&this.disposable.dispose()},methods:{calculateArrowSide:function(e,t){var n=e-.5,s=t-.5;return Math.abs(n)>Math.abs(s)?n>0?"right":"left":s>0?"bottom":"top"},calculateTransformedArrowSize:function(e){return["top","bottom"].includes(e)?{w:this.arrowW,h:this.arrowH}:{w:this.arrowH,h:this.arrowW}},calculatePopupPosition:function(e,t,n,s){var i=0,r=0;if(!this.arrowless){var a=this.calculateArrowSide(n,s),o=this.calculateTransformedArrowSize(a);switch(a){case"left":i=o.w;break;case"right":i=-o.w;break;case"top":r=o.h;break;case"bottom":r=-o.h}}return{x:e-(this.insetLeft+(this.popupWidth-this.insetLeft-this.insetRight)*n)+i,y:t-(this.insetTop+(this.popupHeight-this.insetTop-this.insetBottom)*s)+r}},calculateArrowPosition:function(e,t,n,s,i,r){var a=this.calculateArrowSide(n,s),o=this.calculateTransformedArrowSize(a),l=["top","bottom"].includes(a)?o.w/2+6:o.h/2+6,c={x:0,y:0};if(!this.arrowless){switch(c.x=e-i,c.y=t-r,a){case"top":c.y=0;break;case"bottom":c.y=this.popupHeight;break;case"left":c.x=0;break;case"right":c.x=this.popupWidth}switch(a){case"top":case"bottom":c.x=Math.max(l,Math.min(this.popupWidth-l,c.x));break;case"left":case"right":c.y=Math.max(l,Math.min(this.popupHeight-l,c.y))}}return c},updatePopupSize:function(){var e=this.$refs.popup.getBoundingClientRect();this.popupWidth=Math.round(e.width),this.popupHeight=Math.round(e.height)},updateWindowSize:function(){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight},handleClick:function(){this.clickDismissable&&this.$emit("close")},renderArrow:function(e,t,n,s){var i=this.$createElement,r={left:Math.round(e)+"px",top:Math.round(t)+"px",width:Math.round(this.arrowW)+"px",height:Math.round(this.arrowH)+"px",fill:this.background,stroke:this.borderColor,strokeWidth:this.borderWidth+"px"};switch(this.calculateArrowSide(n,s)){case"top":r.transform="rotate(0deg) translate(-50%, -100%)";break;case"bottom":r.transform="rotate(180deg) translate(-50%, -100%)";break;case"left":r.transform="rotate(-90deg) translate(-50%, -100%)";break;case"right":r.transform="rotate(90deg) translate(-50%, -100%)"}return i("svg",{staticClass:"popup-arrow",attrs:{viewBox:"0 0 20 10"},style:r},[i("path",{attrs:{d:"M1,10 L10,1 L19,10"}})])}},render:function(){var e,t,n=this,s=arguments[0],r=this.targetAnchorX,a=this.targetAnchorY,o=function(){e=n.targetLeft+n.targetWidth*r,t=n.targetTop+n.targetHeight*a};o();var c=this.anchorX,u=this.anchorY,d=this.calculatePopupPosition(e,t,c,u),h=function(){d.x=Math.max(n.clipLeft,Math.min(n.clipRight-n.popupWidth,d.x)),d.y=Math.max(n.clipTop,Math.min(n.clipBottom-n.popupHeight,d.y))},p={x:!1,y:!1};switch(this.clipMode){case"clamp":case"clampX":case"clampY":h();break;case"flip":case"flipX":case"flipY":"flipY"!==this.clipMode&&(d.x<this.clipLeft&&c>.5||d.x>this.clipRight-this.popupWidth&&c<=.5)&&(c=1-c,r=1-r,p.x=!0),"flipX"!==this.clipMode&&(d.y<this.clipTop&&u>.5||d.y>this.clipBottom-this.popupHeight&&u<=.5)&&(u=1-u,a=1-a,p.y=!0),o(),d=this.calculatePopupPosition(e,t,c,u),h()}var f=this.calculateArrowPosition(e,t,c,u,d.x,d.y),m={left:Math.round(d.x)+"px",top:Math.round(d.y)+"px"};this.unclickable&&(m.pointerEvents="none");var v={overflow:"hidden"};"none"!==this.kind&&(v.backgroundColor=this.background,v.borderRadius=this.borderRadius+"px",v.boxShadow="0 ".concat(6*this.elevation,"px ").concat(15*this.elevation,"px rgba(0, 0, 0, 0.2), 0 0 0 ").concat(this.borderWidth,"px ").concat(this.borderColor));var b={attrs:this.$attrs,on:{click:this.handleClick},directives:[{name:"resize",value:function(){return n.updatePopupSize()}}]},g=this.$scopedSlots.default&&this.$scopedSlots.default({flipState:p});return s(l.a,[s("transition",{attrs:{name:this.animationless?"":"anim"}},[s("div",i()([{staticClass:"popup",class:this.kind&&"popup-kind-".concat(this.kind),style:m,ref:"popup"},b]),[s("div",{style:v},[g]),!this.arrowless&&this.renderArrow(f.x,f.y,c,u)])])])}},p=h,f=(n("Sw9Q"),n("KHd+")),m=Object(f.a)(p,void 0,void 0,!1,null,null,null);t.a=m.exports},UOoF:function(e,t,n){},UQqx:function(e,t,n){},USyh:function(e,t,n){"use strict";var s=n("o6jO");n.n(s).a},UdAl:function(e,t,n){},UdAy:function(e,t,n){"use strict";var s=n("ffO3");n.n(s).a},Uler:function(e,t,n){"use strict";var s=n("s7c9");n.n(s).a},UnDk:function(e,t,n){},V0Xi:function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("0oug"),n("ma9I"),n("TeQF"),n("4mDm"),n("2B1R"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("PKPk"),n("FZtP"),n("3bBZ");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("KQm4"),o=n("rePB"),l=n("L2JU"),c=n("NC1X"),u=n("6XG0"),d=n("WmPt"),h=n("4K9I"),p=n("5/Cn"),f=n("hSdx");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b,g={components:{Spinner:c.a,EdCheck:u.a,Icon:d.a,EdButton:h.a},props:{itemType:{type:String,required:!0},itemTypePlural:{type:String,required:!0},status:{type:String,required:!0},groups:{type:Array,required:!0}},data:function(){return{searchQuery:""}},computed:v({},Object(l.e)(["course"]),{selectedItems:function(){return this.groups.reduce((function(e,t){return e.push.apply(e,Object(a.a)(t.items.filter((function(e){return e.checked})))),e}),[])},filteredGroups:function(){return"cloning"!==this.status&&"done"!==this.status?this.groups:this.groups.map((function(e){return v({},e,{items:e.items.filter((function(e){return e.checked}))})})).filter((function(e){return e.items.length}))}}),methods:{titleCase:f.titleCase,isGroupChecked:function(e){return e.items.every((function(e){return e.checked}))},toggleGroupChecked:function(e){if("idle"===this.status){var t=this.isGroupChecked(e),n=!0,s=!1,i=void 0;try{for(var r,a=e.items[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){r.value.checked=!t}}catch(o){s=!0,i=o}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}}},toggleItemChecked:function(e){"idle"===this.status&&(e.checked=!e.checked)},itemClass:function(e){switch(e.status){case"success":return"cloner-item-success";case"error":return"cloner-item-error";default:return e.checked?"cloner-item-selected":""}},clone:(b=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=1===this.selectedItems.length?this.itemType:this.itemTypePlural,e.next=3,p.d({title:"Clone ".concat(this.selectedItems.length," ").concat(t,"?"),text:"The selected ".concat(t," will be cloned into ").concat(this.course.code,"."),icon:"question",primaryAction:"Clone",secondaryAction:"Cancel"});case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:this.$emit("clone",{items:this.selectedItems});case 6:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)})}},y=(n("mEA/"),n("KHd+")),w=Object(y.a)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cloner"},[n("h1",{staticClass:"cloner-heading"},[e._v("Clone "+e._s(e.titleCase(e.itemTypePlural)))]),e._v(" "),n("h2",{staticClass:"cloner-heading"},[e._v(e._s(e.titleCase(e.itemTypePlural)))]),e._v(" "),n("p",{staticClass:"cloner-info"},[e._v("\n\t\tSelect the "+e._s(e.itemTypePlural)+" from the list below that you want to clone.\n\t\tYou may only clone "+e._s(e.itemTypePlural)+" from courses in which you have\n\t\t"),n("strong",[e._v("admin")]),e._v(" access.\n\t")]),e._v(" "),"loading"===e.status?n("Spinner",{staticClass:"cloner-spinner"}):[e.groups.length?[e._l(e.filteredGroups,(function(t){return[n("EdCheck",{key:"a"+t.key,staticClass:"cloner-group-check",attrs:{value:e.isGroupChecked(t),disabled:"idle"!==e.status},nativeOn:{click:function(n){return e.toggleGroupChecked(t)}}},[n("span",{staticClass:"cloner-group-title"},[e._v(e._s(t.title))]),e._v(" "),n("span",{staticClass:"cloner-group-text"},[e._v(e._s(t.text))])]),e._v(" "),n("table",{key:"b"+t.key,staticClass:"cloner-table"},[n("tbody",e._l(t.items,(function(t){return n("tr",{key:t.key,class:e.itemClass(t),on:{click:function(n){return e.toggleItemChecked(t)}}},[n("td",{staticClass:"cloner-col-check"},[n("EdCheck",{attrs:{value:t.checked,disabled:"idle"!==e.status}})],1),e._v(" "),n("td",{staticClass:"cloner-col-title"},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.title)+"\n\t\t\t\t\t\t\t")]),e._v(" "),n("td",{staticClass:"cloner-col-status"},["cloning"===t.status?n("Spinner",{staticClass:"cloner-item-spinner"}):e._e(),e._v(" "),"success"===t.status?n("Icon",{staticClass:"cloner-item-icon",attrs:{icon:"tick"}}):e._e(),e._v(" "),"error"===t.status?n("Icon",{staticClass:"cloner-item-icon",attrs:{icon:"cross"}}):e._e()],1)])})),0)])]}))]:n("div",{staticClass:"cloner-heading"},[e._v("\n\t\t\tThere are no "+e._s(e.itemTypePlural)+" that you can clone from.\n\t\t")])],e._v(" "),e._t("default",null,{selectedItems:e.selectedItems}),e._v(" "),n("div",{staticClass:"cloner-actions"},["done"!==e.status?n("EdButton",{staticClass:"primary",attrs:{disabled:!e.selectedItems.length||"cloning"===e.status},on:{click:e.clone}},[e._v("\n\t\t\tClone\n\t\t")]):n("EdButton",{staticClass:"primary",attrs:{disabled:!e.selectedItems.length},on:{click:function(t){return e.$emit("done")}}},[e._v("\n\t\t\tDone\n\t\t")])],1)],2)}),[],!1,null,null,null);t.a=w.exports},V86E:function(e,t,n){"use strict";var s=n("qJuF");n.n(s).a},VITH:function(e,t,n){},VM45:function(e,t,n){"use strict";var s=n("l/gT");n.n(s).a},"VMB/":function(e,t,n){},VOao:function(e,t,n){"use strict";var s=n("t4YW");n.n(s).a},VQFc:function(e,t,n){e.exports=n.p+"assets/term-bell.f4c10722.mp3"},VQUp:function(e,t,n){},VTRy:function(e,t,n){},"VX/z":function(e,t,n){},VXAN:function(e,t,n){"use strict";var s=n("ZdC8");n.n(s).a},VYah:function(e,t,n){"use strict";n("TeQF"),n("yXV3"),n("4mDm"),n("2B1R"),n("ToJy"),n("qePV"),n("07d7"),n("YGK4"),n("PKPk"),n("3bBZ");var s=n("Y+p1"),i=n.n(s),r=n("G7T9"),a=n("9Arg"),o=n("loy4"),l=n("/lWA"),c=n("YxxY"),u={props:{orientation:{type:String,default:"horizontal"},invisible:{type:Boolean,default:!1},size:{type:Number,default:1},disabled:{type:Boolean,default:!1}},computed:{computedClass:function(){return["split-divider-".concat(this.orientation),{"split-divider-visible":!this.invisible,"split-divider-disabled":this.disabled}]},computedStyle:function(){return{flexBasis:this.size+"px"}}}},d=(n("RzOn"),n("KHd+")),h=Object(d.a)(u,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"split-divider",class:this.computedClass,style:this.computedStyle})}),[],!1,null,null,null).exports,p={mixins:[l.a],props:{persistId:{type:String,default:null},orientation:{type:String,default:"vertical"},invisibleDividers:{type:Boolean,default:!1},dividerSize:{type:Number,default:1},disabled:{type:Boolean,default:!1}},data:function(){return{startX:0,startY:0,resizingDivider:0,children:[]}},computed:{cssClass:function(){return["split-".concat(this.computedTheme),"split-".concat(this.orientation)]},flexSum:function(){return this.children.reduce((function(e,t){return e+("flex"===t.sizing?t.renderFrac:0)}),0)},keyFracs:function(){return"split.".concat(this.persistId,".fracs")}},created:function(){this.panelA=null,this.panelB=null,this.restoreFracs()},mounted:function(){this.updateChildren()},destroyed:function(){this.stopResizing()},updated:function(){this.updateChildren()},methods:{updateChildren:function(){var e=new Set(this.children),t=new Set(this.$children);i()(e,t)||(this.children=this.$children)},getPanels:function(){var e=this.$vnode.componentOptions.children;return this.$children.filter((function(e){return r.f(e,c.a)})).sort((function(t,n){return e.indexOf(t.$vnode)-e.indexOf(n.$vnode)}))},restoreFracs:function(){if(this.persistId){var e=o.getObject(this.keyFracs);if(e){var t=e.reduce((function(e,t){return e+t}),0),n=this.getPanels();if(e.length===n.length&&t>0)for(var s=0;s<e.length;s++)n[s].$emit("update:frac",e[s])}}},persistFracs:function(){if(this.persistId){var e=this.getPanels().map((function(e){return e.frac}));o.setObject(this.keyFracs,e)}},startResizing:function(e){document.addEventListener("mousemove",this.handleDocumentMouseMove),document.addEventListener("mouseup",this.handleDocumentMouseUp),a.E(!1);var t=this.getPanels();this.panelA=t[e],this.panelB=t[e+1],this.panelA.resizingFrac=this.panelA.frac,this.panelB.resizingFrac=this.panelB.frac},stopResizing:function(){document.removeEventListener("mousemove",this.handleDocumentMouseMove),document.removeEventListener("mouseup",this.handleDocumentMouseUp),a.E(!0),this.panelA&&this.panelB&&(this.panelA.$emit("update:frac",this.panelA.resizingFrac),this.panelB.$emit("update:frac",this.panelB.resizingFrac),this.panelA.resizingFrac=null,this.panelB.resizingFrac=null,this.panelA=null,this.panelB=null)},handleDividerMouseDown:function(e,t){this.disabled||(t.preventDefault(),this.startResizing(e),this.startX=t.clientX,this.startY=t.clientY)},handleDocumentMouseMove:function(e){var t,n,s,i=this.panelA,r=this.panelB,a=i.$el.getBoundingClientRect(),o=r.$el.getBoundingClientRect();"vertical"===this.orientation?(t=e.clientY,n=a.top,s=o.bottom):(t=e.clientX,n=a.left,s=o.right);var l=(t-n)/(s-n);l=Math.max(0,Math.min(1,l));var c=i.collapsable&&t-n<i.collapsedSize+20,u=r.collapsable&&s-t<r.collapsedSize+20;if("flex"===i.sizing&&"flex"===r.sizing||"fixed"===i.sizing&&"fixed"===r.sizing&&i.priority===r.priority){c?l=0:u&&(l=1);var d=i.frac+r.frac;i.resizingFrac=l*d,r.resizingFrac=(1-l)*d}else{var h,p;"fixed"===i.sizing&&("flex"===r.sizing||"fixed"===r.sizing&&i.priority<r.priority)?(h=i,p=c):(h=r,p=u,l=1-l),p&&(l=0),h.resizingFrac=(s-n)*l,"number"==typeof h.maxFrac&&h.resizingFrac>h.maxFrac?h.resizingFrac=h.maxFrac:!p&&"number"==typeof h.minFrac&&h.resizingFrac<h.minFrac&&(h.resizingFrac=h.minFrac)}},handleDocumentMouseUp:function(){this.stopResizing()},renderPanels:function(){for(var e=this,t=this.$createElement,n=(this.$scopedSlots.default&&this.$scopedSlots.default()||[]).filter((function(e){return r.j(e,c.a)})),s=[],i=function(i){s.push(n[i]),i<n.length-1&&s.push(t(h,{attrs:{orientation:e.orientation,invisible:e.invisibleDividers,size:e.dividerSize,disabled:e.disabled},nativeOn:{mousedown:function(t){return e.handleDividerMouseDown(i,t)}}}))},a=0;a<n.length;a++)i(a);return s}},render:function(){var e=arguments[0];return e("div",{staticClass:"split",class:this.cssClass},[this.renderPanels()])}},f=(n("AdLu"),Object(d.a)(p,void 0,void 0,!1,null,null,null));t.a=f.exports},VYtp:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("4Brf"),n("0oug"),n("ma9I"),n("TeQF"),n("fbCW"),n("x0AG"),n("XbcX"),n("yq1k"),n("yXV3"),n("4mDm"),n("2B1R"),n("+2oP"),n("ToJy"),n("pDQq"),n("c9m3"),n("qePV"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("5s+n"),n("YGK4"),n("JTJg"),n("PKPk"),n("FZtP"),n("3bBZ");var s=n("ODXe"),i=n("o0o1"),r=n.n(i),a=(n("ls82"),n("HaE+")),o=n("rePB"),l=n("KQm4"),c=n("L2JU"),u=n("Q2AE"),d=n("Pa8A"),h=n("t19P"),p=n("Oshs"),f=n("TphV"),m=n("2PkB"),v=n("xtk+"),b=n("E8Rg"),g=n("5DV3"),y=n("TxTQ"),w={props:{value:{type:null,required:!0},editable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},computed:{},watch:{errorMessage:{immediate:!0,handler:function(e){this.$emit("valid",!e)}}},methods:{validate:function(){return!0}}},_={extends:w},k=(n("ofCr"),n("KHd+")),C=Object(k.a)(_,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"quiz-item-edit-empty"},[this._t("default")],2)}),[],!1,null,null,null).exports,x=n("/jHr"),j=n("IbLZ"),O=n("6XG0"),S=n("ABIe"),E=n("ltWs"),T=n("gnd6"),I={components:{EdField:j.a,EdCheck:O.a,Amber:S.a,AmberDisplay:E.a,ReadingPassageDisplay:T.a},extends:w,computed:{hasInstructions:function(){return!!this.value.content&&!x.c(this.value.content)}}},D=(n("G7XC"),{empty:C,"reading-passage":Object(k.a)(I,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quiz-item-edit-rp"},[n("div",{staticClass:"qieditrp-container"},[e.editable?[n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Passage")]},proxy:!0},{key:"description",fn:function(){return[e._v("\n\t\t\t\t\tEnter the reading passage that the student must read upon which the following\n\t\t\t\t\tquestions will be based upon. This will be displayed beside the questions.\n\t\t\t\t")]},proxy:!0}],null,!1,141647824)},[e._v(" "),e._v(" "),n("Amber",{staticClass:"qieditrp-amber",attrs:{disabled:e.disabled,"etc-tools":""},model:{value:e.value.passage,callback:function(t){e.$set(e.value,"passage",t)},expression:"value.passage"}})],1),e._v(" "),n("EdField",[n("EdCheck",{attrs:{label:"Line Numbers",description:"Display line numbers beside the passage. Span references will not work unless this is enabled."},model:{value:e.value.lineNumbers,callback:function(t){e.$set(e.value,"lineNumbers",t)},expression:"value.lineNumbers"}})],1),e._v(" "),n("EdField",[n("EdCheck",{attrs:{label:"SAT Style",description:"The reading passage and associated questions will be styled like a reading passage in an SAT exam.",value:"sat"===e.value.style},on:{input:function(t){e.value.style=t?"sat":"plain"}}})],1)]:n("ReadingPassageDisplay",{staticClass:"qieditrp-rp-display",attrs:{value:e.value.passage,"line-numbers":e.value.lineNumbers,"passage-style":e.value.style,"spans-visible":""},on:{spans:function(t){return e.$emit("event",{type:"spans",event:t})}}}),e._v(" "),e.editable||e.hasInstructions?n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Instructions")]},proxy:!0},e.editable?{key:"description",fn:function(){return[e._v("\n\t\t\t\tProvide some optional instructions for the student. This will be displayed\n\t\t\t\tabove the questions.\n\t\t\t")]},proxy:!0}:null],null,!0)},[e._v(" "),e._v(" "),e.editable?n("Amber",{staticClass:"qieditrp-amber",attrs:{disabled:e.disabled},model:{value:e.value.content,callback:function(t){e.$set(e.value,"content",t)},expression:"value.content"}}):n("AmberDisplay",{staticClass:"qieditrp-amber-display",attrs:{value:e.value.content}})],1):e._e()],2),e._v(" "),e._t("default")],2)}),[],!1,null,null,null).exports}),P={props:{value:{type:Object,required:!0},editable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},computed:{itemComponent:function(){return D[this.value.type]}},methods:{validate:function(){return this.$refs.item.validate()}}},A=Object(k.a)(P,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quiz-item-edit"},[n(e.itemComponent,{ref:"item",tag:"component",staticClass:"qiedit-item",attrs:{value:e.value,editable:e.editable,disabled:e.disabled},on:{event:function(t){return e.$emit("event",t)}}},[e._t("default")],2)],1)}),[],!1,null,null,null).exports,N={components:{QuizElement:y.a,ItemEdit:A},props:{assessible:{type:Boolean,default:!1},value:{type:Object,required:!0},editable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},number:{type:String,default:null},showButtons:{type:Boolean,default:!1}},computed:{typeLabel:function(){return this.value.constructor.humanized},hasChrome:function(){return"empty"!==this.value.type}}},R=(n("62d9"),Object(k.a)(N,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.hasChrome?n("QuizElement",{staticClass:"quiz-item-element",attrs:{editable:e.editable,disabled:e.disabled,heading:e.typeLabel,number:e.number,"show-buttons":e.showButtons,icon:"quiz-question-"+e.value.type},on:{edit:function(t){return e.$emit("edit")},cancel:function(t){return e.$emit("cancel")},save:function(t){return e.$emit("save")}},scopedSlots:e._u([{key:"actions",fn:function(){return[e._t("actions")]},proxy:!0}],null,!0)},[n("div",{staticClass:"qqil-item-container"},[n("ItemEdit",{attrs:{assessible:e.assessible,value:e.value,editable:e.editable,disabled:e.disabled},on:{event:function(t){return e.$emit("event",t)}}})],1),e._v(" "),e._t("default")],2):n("div",{staticClass:"quiz-item-element"},[n("div",{staticClass:"qqil-item-container"},[n("ItemEdit",{attrs:{assessible:e.assessible,value:e.value,editable:e.editable,disabled:e.disabled},on:{event:function(t){return e.$emit("event",t)}}})],1),e._v(" "),e._t("default")],2)}),[],!1,null,null,null).exports),M=n("6Voy"),L=(n("Tskq"),n("OBDa")),F=n("4K9I"),B=n("VYah"),q=n("YxxY"),$=n("dd2Y"),U=n("0Tba"),z=n("OYJk"),V=n("/Yj0");function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var W,Q={inject:["quizQuestionBankApi","swayApi"],components:{DialogLayout:L.a,EdButton:F.a,EdCheck:O.a,EdInput:v.a,Split:B.a,SplitPanel:q.a,QuizQuestionEditItem:$.a,QuizQuestionFilter:U.a},props:{loading:{type:Boolean,default:!1}},data:function(){return{splitPanelFracFilters:250,loadingQuestions:!1,questions:[],filteredQuestions:[],items:[],randomCount:"10"}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(c.e)(["course"]),{computedLoading:function(){return this.loading||this.loadingQuestions},filteredQuestionsMap:function(){return new Map(this.filteredQuestions.map((function(e){return[e.id,e]})))},filteredItems:function(){var e=this;return this.items.filter((function(t){return e.filteredQuestionsMap.has(t.question.id)}))},selectedItems:function(){return this.items.filter((function(e){return e.selected}))},importEnabled:function(){return!this.loading&&this.selectedItems.length>0}}),watch:{filteredItems:function(e){var t=new Set(e),n=!0,s=!1,i=void 0;try{for(var r,a=this.items[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value;t.has(o)||(o.selected=!1)}}catch(l){s=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}}},created:function(){this.update()},methods:{update:(W=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingQuestions=!0,e.prev=1,e.next=4,this.quizQuestionBankApi.getCourseQuestions(this.course.id);case 4:this.questions=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),V.b({type:"error",text:"Unable to fetch questions."});case 10:return e.prev=10,this.loadingQuestions=!1,e.finish(10);case 13:this.items=this.questions.map((function(e){return{question:e,selected:!1}}));case 14:case"end":return e.stop()}}),e,this,[[1,7,10,13]])}))),function(){return W.apply(this,arguments)}),selectAll:function(){var e=!0,t=!1,n=void 0;try{for(var s,i=this.filteredItems[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){s.value.selected=!0}}catch(r){t=!0,n=r}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},selectNone:function(){var e=!0,t=!1,n=void 0;try{for(var s,i=this.items[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){s.value.selected=!1}}catch(r){t=!0,n=r}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},selectRandom:function(){this.selectNone();var e=+this.randomCount||0,t=this.items.map((function(e){return[e,Math.random()]})).sort((function(e,t){return e[1]-t[1]})).slice(0,e).map((function(e){return e[0]})),n=!0,s=!1,i=void 0;try{for(var r,a=t[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){r.value.selected=!0}}catch(o){s=!0,i=o}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}},onSubmit:function(){var e=this,t=this.selectedItems.map((function(t){var n=new z.a;return n.quizQuestion=t.question.quizQuestion.clone(),n.quizId=e.quizId,n}));this.$emit("done",t)}}},K=(n("onUx"),Object(k.a)(Q,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogLayout",{staticClass:"sway-sheet-import-questions",attrs:{title:"Import Questions",loading:e.computedLoading,"no-padding":""},on:{submit:e.onSubmit},scopedSlots:e._u([{key:"primaryActions",fn:function(){return[n("EdButton",{staticClass:"primary",attrs:{type:"submit",disabled:!e.importEnabled}},[e._v("Import")])]},proxy:!0}])},[n("section",{staticClass:"ssiq-section"},[n("div",{staticClass:"ssiq-actions"},[n("div",{staticClass:"ssiq-action-group"},[n("EdButton",{on:{click:e.selectAll}},[e._v("Select All")]),e._v(" "),n("EdButton",{on:{click:e.selectNone}},[e._v("Select None")])],1),e._v(" "),n("div",{staticClass:"ssiq-action-group"},[n("EdButton",{on:{click:e.selectRandom}},[e._v("Select Random")]),e._v(" "),n("label",{staticClass:"ssiq-label"},[e._v("Number of questions to select:")]),e._v(" "),n("EdInput",{staticClass:"ssiq-input-random",model:{value:e.randomCount,callback:function(t){e.randomCount=t},expression:"randomCount"}})],1)])]),e._v(" "),n("Split",{staticClass:"ssiq-split",attrs:{orientation:"horizontal"}},[n("SplitPanel",{attrs:{frac:e.splitPanelFracFilters,"min-frac":20,"max-frac":300,sizing:"fixed"},on:{"update:frac":function(t){e.splitPanelFracFilters=t}}},[n("div",{staticClass:"ssiq-split-panel-scroll ssiq-split-panel-scroll-filter"},[n("QuizQuestionFilter",{staticClass:"ssiq-filter",attrs:{questions:e.questions,disabled:e.computedLoading},on:{filtered:function(t){e.filteredQuestions=t}}})],1)]),e._v(" "),n("SplitPanel",{attrs:{frac:1}},[n("div",{staticClass:"ssiq-split-panel-scroll"},e._l(e.filteredItems,(function(t){return n("div",{key:t.question.id,staticClass:"ssiq-item"},[n("EdCheck",{staticClass:"ssiq-check",attrs:{disabled:e.computedLoading},model:{value:t.selected,callback:function(n){e.$set(t,"selected",n)},expression:"item.selected"}}),e._v(" "),n("QuizQuestionEditItem",{staticClass:"ssiq-question",attrs:{value:t.question,compact:""}})],1)})),0)])],1)],1)}),[],!1,null,null,null).exports),Y=n("sK6X"),G=n("Edju"),X=n("TdcQ"),J={directives:{Autoselect:Y.a},components:{DialogLayout:L.a,FormLayout:G.a,FormLayoutRow:X.a,EdInput:v.a,EdButton:F.a},data:function(){return{quantity:"1"}},methods:{onSubmit:function(){this.$emit("done",+this.quantity)}}},Z=(n("YiZQ"),Object(k.a)(J,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogLayout",{staticClass:"quiz-sheet-duplicate",attrs:{title:"Duplicate"},on:{submit:e.onSubmit},scopedSlots:e._u([{key:"primaryActions",fn:function(){return[n("EdButton",{staticClass:"primary",attrs:{type:"submit"}},[e._v("Duplicate")])]},proxy:!0}])},[n("FormLayout",{staticClass:"qsd-layout"},[n("FormLayoutRow",{attrs:{label:"Quantity"}},[n("EdInput",{directives:[{name:"autoselect",rawName:"v-autoselect"}],model:{value:e.quantity,callback:function(t){e.quantity=t},expression:"quantity"}})],1)],1)],1)}),[],!1,null,null,null).exports),ee=n("gED9"),te=n("fR4B"),ne=n("E2AO"),se=n("hSdx"),ie=n("5/Cn"),re=n("clw3");function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var oe,le,ce,ue,de,he,pe,fe,me,ve,be,ge,ye={name:"SwayEditQuiz",directives:{Tooltip:d.a},components:{HeaderContainer:h.a,SheetContainer:p.a,Navbar:f.a,NavbarButton:m.a,EdInput:v.a,NewQuestionButtons:b.a,QuizQuestionElement:g.a,QuizItemElement:R,QuizElementAction:M.a},inject:["swayApi","streamService","keyboardShortcutManager"],props:{quizId:{type:Number,required:!0}},data:function(){return{loading:!1,sheetVisible:!1,quiz:null,quizModel:null,questionModels:{},itemModels:{},itemData:{},itemEditing:null,questionEditing:null}},computed:{disabled:function(){return this.loading||this.sheetVisible},title:function(){return this.quiz?"".concat(this.quiz.updatedAt?"Edit":"Create"," ").concat(this.quiz.typeLabel):""},editing:function(){return!!this.itemEditing||!!this.questionEditing},newItemTypes:function(){return[].concat(Object(l.a)(ne.a.byQuizType.get(this.quiz.type).map((function(e){return{type:e.type,label:e.humanized}}))),Object(l.a)(Object(l.a)(te.a.types.values()).filter((function(e){return"empty"!==e.type})).map((function(e){return{type:e.type,label:e.humanized,icon:"plus"}}))))},newQuestionTypes:function(){return[].concat(Object(l.a)(ne.a.byQuizType.get(this.quiz.type).map((function(e){return{type:e.type,label:e.humanized}}))),Object(l.a)("quiz"===this.quiz.type?[{type:"import",label:"Import",icon:"import"}]:[]))},items:{get:function(){return this.quiz&&this.quiz.items},set:function(e){this.quiz&&(this.quiz.items=e)}},questions:function(){return this.items&&this.items.flatMap((function(e){return e.questions}))},computedItems:function(){var e=this,t=this.items.length>1||this.items[0]&&this.items[0].questions.length>1,n=1;return this.items.slice().sort((function(e,t){return e.index-t.index})).map((function(s,i){return{item:s,model:e.itemModels[s.id],key:s.id||0,cssClass:Object(o.a)({disabled:e.editing&&(!e.itemEditing||e.itemEditing.id!==s.id)},"sqze-item-".concat(s.quizItem.type),!0),editable:e.itemEditing&&e.itemEditing.id===s.id,disabled:e.editing&&(!e.itemEditing||e.itemEditing.id!==s.id),canMoveUp:!e.editing&&i>0,canMoveDown:!e.editing&&i<e.items.length-1,data:e.itemData[s.id],computedQuestions:s.questions.slice().sort((function(e,t){return e.index-t.index})).map((function(i,r){return{question:i,model:e.questionModels[i.id],key:i.id||0,cssClass:{disabled:e.editing&&(!e.questionEditing||e.questionEditing.id!==i.id)},editable:e.questionEditing&&e.questionEditing.id===i.id,disabled:e.editing&&(!e.questionEditing||e.questionEditing.id!==i.id),number:t?String(n++):null,canMoveUp:!e.editing&&r>0,canMoveDown:!e.editing&&r<s.questions.length-1}}))}}))},computedQuestions:function(){return this.computedItems.flatMap((function(e){return e.computedQuestions}))}},watch:{questions:function(e){this.questionEditing&&!e.includes(this.questionEditing)&&(this.questionEditing=null),this.createModels()},items:function(e){this.itemEditing&&!e.includes(this.itemEditing)&&(this.itemEditing=null),this.createModels()}},created:function(){this.disposable=new re.a(this.streamService.subscribe("quiz",this.quizId),this.keyboardShortcutManager.register({default:"Control+s",mac:"Meta+s"},this.save,{description:"Save quiz"})),this.update()},mounted:function(){this.setNavbarVisible(!0)},destroyed:function(){this.setNavbarVisible(!1),this.disposable.dispose()},shouldConfirmRouteUpdate:function(e,t){return t.params.courseId!==e.params.courseId||t.params.quizId!==e.params.quizId},routeUpdateMessage:function(){var e=this;if(this.questionEditing||this.itemEditing||this.quizModel&&this.quizModel.name!==this.quiz.name)return{message:"You have unsaved changes to this ".concat(this.quiz.typeLabel.toLowerCase(),"."),callback:function(){return e.save()}}},methods:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(c.d)({setNavbarVisible:u.c.SET_NAVBAR_VISIBLE}),{showSheetDuplicate:(ge=Object(a.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.sheetContainer.showSheet(Z);case 2:return t=e.sent,this.$refs.sheetContainer.closeSheet(),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return ge.apply(this,arguments)}),update:function(){var e=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.swayApi.getQuiz(this.quizId);case 4:this.quiz=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),V.b({type:"error",text:"Unable to load activity."}),e.abrupt("return");case 11:return e.prev=11,this.loading=!1,e.finish(11);case 14:this.quizModel=this.quiz.clone(),this.createModels();case 16:case"end":return e.stop()}}),e,this,[[1,7,11,14]])})));return function(){return e.apply(this,arguments)}}(),createModels:function(){var e={},t={},n=!0,s=!1,i=void 0;try{for(var r,a=this.items[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value;e[o.id]=o.clone();var l=!0,c=!1,u=void 0;try{for(var d,h=o.questions[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var p=d.value;t[p.id]=p.clone()}}catch(E){c=!0,u=E}finally{try{l||null==h.return||h.return()}finally{if(c)throw u}}}}catch(E){s=!0,i=E}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}this.itemModels=e,this.questionModels=t;var f=new Set(Object.keys(this.itemData)),m=new Set(Object.keys(this.itemModels)),v=!0,b=!1,g=void 0;try{for(var y,w=f[Symbol.iterator]();!(v=(y=w.next()).done);v=!0){var _=y.value;m.has(_)||this.$delete(this.itemData,_)}}catch(E){b=!0,g=E}finally{try{v||null==w.return||w.return()}finally{if(b)throw g}}var k=!0,C=!1,x=void 0;try{for(var j,O=m[Symbol.iterator]();!(k=(j=O.next()).done);k=!0){var S=j.value;f.has(S)||this.$set(this.itemData,S,{spans:null})}}catch(E){C=!0,x=E}finally{try{k||null==O.return||O.return()}finally{if(C)throw x}}},isItemChromeless:function(e){return"empty"===e.type},save:(be=Object(a.a)(r.a.mark((function e(){var t,n,i,a,o,l,c,u=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.itemEditing?this.saveItem(this.computedItems.find((function(e){return e.item===u.itemEditing}))):Promise.resolve(),n=this.questionEditing?this.saveQuestion(this.computedQuestions.find((function(e){return e.question===u.questionEditing}))):Promise.resolve(),i=this.quiz,a=this.swayApi.updateQuiz(i.id,this.quizModel),this.loading=!0,e.prev=5,e.next=8,Promise.all([a,t,n]);case 8:l=e.sent,c=Object(s.a)(l,1),o=c[0],e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(5),V.b({type:"error",text:"Unable to save ".concat(this.quiz.typeLabel.toLowerCase(),".")}),e.abrupt("return");case 17:return e.prev=17,this.loading=!1,e.finish(17);case 20:this.quiz.name=o.name;case 21:case"end":return e.stop()}}),e,this,[[5,13,17,20]])}))),function(){return be.apply(this,arguments)}),createQuestionOrItem:function(e,t){if("import"===e)this.showSheetImportQuestions(t);else if(ne.a.types.has(e))this.createQuestion(e,t);else{if(!te.a.types.has(e))throw new Error("Invalid question or item type");this.createItem(e)}},createQuestion:function(e,t){t||((t=ee.a.create("empty")).quizId=this.quizId,t.index=1/0,this.items.push(t));var n=z.a.create(e);n.itemId=t.id,n.index=1/0,t.questions.push(n),this.questionEditing=n,this.createModels()},createItem:function(e){var t=ee.a.create(e);t.quizId=this.quizId,t.index=1/0,this.items.push(t),this.itemEditing=t,this.createModels()},showSheetImportQuestions:function(e){var t,n=this,s=(this.$createElement,this),i={data:function(){return{oading:!1}},render:function(){var e=arguments[0];return e(K,{attrs:{loading:this.loading},on:{done:this.onDone}})},methods:{onDone:(t=Object(a.a)(r.a.mark((function t(n){var i,a,o,l,c,u,d,h,p,f,m,v,b,g,y;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ie.b({title:"Import selected questions?",text:"".concat(n.length," ").concat(se.pluralize(n.length,"question")," will be imported.")});case 2:if(t.sent){t.next=4;break}return t.abrupt("return");case 4:if(this.loading=!0,!e){t.next=30;break}return t.next=8,se.promiseMap(n,(function(t){return t.itemId=e.id,s.swayApi.createQuestion(t)}));case 8:for(i=t.sent,a=!0,o=!1,l=void 0,t.prev=12,c=i[Symbol.iterator]();!(a=(u=c.next()).done);a=!0)(d=u.value).success&&e.questions.push(d.value);t.next=20;break;case 16:t.prev=16,t.t0=t.catch(12),o=!0,l=t.t0;case 20:t.prev=20,t.prev=21,a||null==c.return||c.return();case 23:if(t.prev=23,!o){t.next=26;break}throw l;case 26:return t.finish(23);case 27:return t.finish(20);case 28:t.next=52;break;case 30:return t.next=32,se.promiseMap(n,(function(e){var t=ee.a.create("empty");return t.quizId=s.quizId,s.swayApi.createItem(t,e)}));case 32:for(i=t.sent,h=!0,p=!1,f=void 0,t.prev=36,m=i[Symbol.iterator]();!(h=(v=m.next()).done);h=!0)(b=v.value).success&&s.items.push(b.value);t.next=44;break;case 40:t.prev=40,t.t1=t.catch(36),p=!0,f=t.t1;case 44:t.prev=44,t.prev=45,h||null==m.return||m.return();case 47:if(t.prev=47,!p){t.next=50;break}throw f;case 50:return t.finish(47);case 51:return t.finish(44);case 52:g=i.filter((function(e){return e.success})).length,y="Imported ".concat(g," ").concat(se.pluralize(g,"question"),"."),g!==i.length?V.b({type:"error",title:"Some questions failed to import.",text:y}):V.b({type:"success",title:"Imported questions successfully."}),s.createModels(),this.$emit("done");case 58:case"end":return t.stop()}}),t,this,[[12,16,20,28],[21,,23,27],[36,40,44,52],[45,,47,51]])}))),function(e){return t.apply(this,arguments)})}};this.$refs.sheetContainer.showSheet(i,(function(){n.$refs.sheetContainer.closeSheet()}))},beginItemEdit:function(e){this.itemEditing=this.items.find((function(t){return t.id===e.id}))},cancelItemEdit:(ve=Object(a.a)(r.a.mark((function e(){var t=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.itemEditing.id){e.next=8;break}return e.next=3,ie.b({icon:"warning",title:"Item not saved",text:"You have not saved this item. It will be deleted if you proceed.",primaryAction:"Delete"});case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:this.items=this.items.filter((function(e){return e!==t.itemEditing})),e.next=9;break;case 8:this.createModels();case 9:this.itemEditing=null;case 10:case"end":return e.stop()}}),e,this)}))),function(){return ve.apply(this,arguments)}),saveItem:(me=Object(a.a)(r.a.mark((function e(t){var n,s,i,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.item,s=t.model,e.prev=1,null!=n.id){e.next=8;break}return e.next=5,this.swayApi.createItem(s);case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,this.swayApi.updateItem(s);case 10:e.t0=e.sent;case 11:i=e.t0,e.next=18;break;case 14:return e.prev=14,e.t1=e.catch(1),V.b({type:"error",text:"Unable to save item."}),e.abrupt("return");case 18:-1!==(a=this.items.findIndex((function(e){return e.id===n.id})))&&(i.questions=n.questions,this.items.splice(a,1,i),this.itemEditing===n&&(this.itemEditing=null,this.createModels()));case 20:case"end":return e.stop()}}),e,this,[[1,14]])}))),function(e){return me.apply(this,arguments)}),reorderItem:(fe=Object(a.a)(r.a.mark((function e(t,n,s){var i,a,o,l,c,u,d,h;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==(i=t.findIndex((function(e){return e.item.id===n.id})))){e.next=3;break}return e.abrupt("return");case 3:if((a=t[i+s+(s>0?1:0)])||!(s<0)){e.next=6;break}return e.abrupt("return");case 6:return o=a&&a.item,l=o?o.id:0,e.prev=8,e.next=11,this.swayApi.reorderItem(n.id,l);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(8),V.b({type:"error",text:"Unable to move item."}),e.abrupt("return");case 17:c=t[i+s].item,u=t.find((function(e){return e.item.id===n.id})).item,d=t.find((function(e){return e.item.id===c.id})).item,h=[d.index,u.index],u.index=h[0],d.index=h[1],this.createModels();case 24:case"end":return e.stop()}}),e,this,[[8,13]])}))),function(e,t,n){return fe.apply(this,arguments)}),destroyItem:(pe=Object(a.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie.b({icon:"warning",title:"Delete this question?",text:"This cannot be undone.",primaryAction:"Delete"});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:if(null==t.id){e.next=15;break}return e.prev=5,e.next=8,this.swayApi.destroyQuizItem(t.id);case 8:e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(5),e.next=14,ie.a({icon:"error",title:"Unable to delete question",text:"Check your internet connection or try again later."});case 14:return e.abrupt("return");case 15:this.items=this.items.filter((function(e){return e.id!==t.id})),this.createModels(),V.b({type:"success",text:"Question deleted."});case 18:case"end":return e.stop()}}),e,this,[[5,10]])}))),function(e){return pe.apply(this,arguments)}),duplicateItem:(he=Object(a.a)(r.a.mark((function e(t){var n,s,i,a,o,c,u,d,h;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showSheetDuplicate();case 2:return s=e.sent,e.prev=3,e.next=6,this.swayApi.duplicateItem(t.id,s);case 6:i=e.sent,e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(3),e.next=13,ie.a({icon:"error",title:"Unable to duplicate question",text:"Check your internet connection or try again later."});case 13:return e.abrupt("return");case 14:for(a=!0,o=!1,c=void 0,e.prev=17,u=this.items[Symbol.iterator]();!(a=(d=u.next()).done);a=!0)(h=d.value).index>t.index&&(h.index+=i.length);e.next=25;break;case 21:e.prev=21,e.t1=e.catch(17),o=!0,c=e.t1;case 25:e.prev=25,e.prev=26,a||null==u.return||u.return();case 28:if(e.prev=28,!o){e.next=31;break}throw c;case 31:return e.finish(28);case 32:return e.finish(25);case 33:(n=this.items).push.apply(n,Object(l.a)(i)),this.createModels(),V.b({type:"success",text:"Question duplicated."});case 36:case"end":return e.stop()}}),e,this,[[3,9],[17,21,25,33],[26,,28,32]])}))),function(e){return he.apply(this,arguments)}),beginQuestionEdit:function(e){this.questionEditing=e},cancelQuestionEdit:(de=Object(a.a)(r.a.mark((function e(){var t,n=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.computedItems.find((function(e){return e.computedQuestions.some((function(e){return e.question===n.questionEditing}))})),null!=this.questionEditing.id||!t){e.next=7;break}return e.next=4,ie.b({icon:"warning",title:"Question not saved",text:"You have not saved this question. It will be deleted if you proceed.",primaryAction:"Delete"});case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:null==t.item.id&&1===t.computedQuestions.length?this.items=this.items.filter((function(e){return e!==t.item})):t.item.questions=t.item.questions.filter((function(e){return e!==n.questionEditing}));case 7:this.questionEditing=null,this.createModels();case 9:case"end":return e.stop()}}),e,this)}))),function(){return de.apply(this,arguments)}),saveQuestion:(ue=Object(a.a)(r.a.mark((function e(t){var n,s,i,a,o,l,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.question,s=t.model,i=this.computedItems.find((function(e){return e.computedQuestions.some((function(e){return e.question===n}))})),null!=n.id||null!=i.item.id){e.next=17;break}return e.prev=3,e.next=6,this.swayApi.createItem(i.model,s);case 6:a=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),V.b({type:"error",text:"Unable to save question."}),e.abrupt("return");case 13:-1!==(o=this.items.indexOf(i.item))&&this.items.splice(o,1,a),e.next=36;break;case 17:if(e.prev=17,null!=n.id){e.next=24;break}return e.next=21,this.swayApi.createQuestion(s);case 21:e.t1=e.sent,e.next=27;break;case 24:return e.next=26,this.swayApi.updateQuestion(s);case 26:e.t1=e.sent;case 27:l=e.t1,e.next=34;break;case 30:return e.prev=30,e.t2=e.catch(17),V.b({type:"error",text:"Unable to save question."}),e.abrupt("return");case 34:-1!==(c=i.item.questions.indexOf(n))&&i.item.questions.splice(c,1,l);case 36:this.questionEditing=null,this.createModels();case 38:case"end":return e.stop()}}),e,this,[[3,9],[17,30]])}))),function(e){return ue.apply(this,arguments)}),reorderQuestion:(ce=Object(a.a)(r.a.mark((function e(t,n,s){var i,a,o,l,c,u,d,h,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isItemChromeless(t.item.quizItem)){e.next=4;break}return e.next=3,this.reorderItem(this.computedItems,t.item,s);case 3:return e.abrupt("return");case 4:if(i=t.computedQuestions,-1!==(a=i.findIndex((function(e){return e.question.id===n.id})))){e.next=8;break}return e.abrupt("return");case 8:if((o=i[a+s+(s>0?1:0)])||!(s<0)){e.next=11;break}return e.abrupt("return");case 11:return l=o&&o.question,c=l?l.id:0,e.prev=13,e.next=16,this.swayApi.reorderQuestion(n.id,c);case 16:e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(13),V.b({type:"error",text:"Unable to move question."}),e.abrupt("return");case 22:u=i[a+s].question,d=i.find((function(e){return e.question.id===n.id})).question,h=i.find((function(e){return e.question.id===u.id})).question,p=[h.index,d.index],d.index=p[0],h.index=p[1],this.createModels();case 29:case"end":return e.stop()}}),e,this,[[13,18]])}))),function(e,t,n){return ce.apply(this,arguments)}),destroyQuestion:(le=Object(a.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isItemChromeless(t.quizItem)){e.next=4;break}return e.next=3,this.destroyItem(t);case 3:return e.abrupt("return");case 4:return e.next=6,ie.b({icon:"warning",title:"Delete this question?",text:"This cannot be undone.",primaryAction:"Delete"});case 6:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:if(null==n.id){e.next=19;break}return e.prev=9,e.next=12,this.swayApi.destroyQuizQuestion(n.id);case 12:e.next=19;break;case 14:return e.prev=14,e.t0=e.catch(9),e.next=18,ie.a({icon:"error",title:"Unable to delete question",text:"Check your internet connection or try again later."});case 18:return e.abrupt("return");case 19:t.questions=t.questions.filter((function(e){return e.id!==n.id})),this.createModels(),V.b({type:"success",text:"Question deleted."});case 22:case"end":return e.stop()}}),e,this,[[9,14]])}))),function(e,t){return le.apply(this,arguments)}),duplicateQuestion:(oe=Object(a.a)(r.a.mark((function e(t,n){var s,i,a,o,c,u,d,h,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isItemChromeless(t.quizItem)){e.next=4;break}return e.next=3,this.duplicateItem(t);case 3:return e.abrupt("return");case 4:return e.next=6,this.showSheetDuplicate();case 6:return i=e.sent,e.prev=7,e.next=10,this.swayApi.duplicateQuestion(n.id,i);case 10:a=e.sent,e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(7),e.next=17,ie.a({icon:"error",title:"Unable to duplicate question",text:"Check your internet connection or try again later."});case 17:return e.abrupt("return");case 18:for(o=!0,c=!1,u=void 0,e.prev=21,d=t.questions[Symbol.iterator]();!(o=(h=d.next()).done);o=!0)(p=h.value).index>n.index&&(p.index+=a.length);e.next=29;break;case 25:e.prev=25,e.t1=e.catch(21),c=!0,u=e.t1;case 29:e.prev=29,e.prev=30,o||null==d.return||d.return();case 32:if(e.prev=32,!c){e.next=35;break}throw u;case 35:return e.finish(32);case 36:return e.finish(29);case 37:(s=t.questions).push.apply(s,Object(l.a)(a)),this.createModels(),V.b({type:"success",text:"Question duplicated."});case 40:case"end":return e.stop()}}),e,this,[[7,13],[21,25,29,37],[30,,32,36]])}))),function(e,t){return oe.apply(this,arguments)}),onItemEvent:function(e,t){switch(t.type){case"spans":this.$set(e.data,"spans",t.event)}}})},we=(n("9GMr"),Object(k.a)(ye,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("HeaderContainer",{staticClass:"sway-quiz-edit",scopedSlots:e._u([{key:"header",fn:function(){return[n("Navbar",{attrs:{title:e.title,loading:e.loading,secondary:""},scopedSlots:e._u([{key:"left",fn:function(){return[n("NavbarButton",{attrs:{text:"Activities",icon:"chevron-left",disabled:e.disabled,to:{name:"sway-quizzes-index"}}})]},proxy:!0},{key:"right",fn:function(){return[n("NavbarButton",{attrs:{text:"Cancel",disabled:e.disabled,to:{name:"sway-quizzes-index"}}}),e._v(" "),n("NavbarButton",{attrs:{text:"Save",type:"default",disabled:e.disabled},on:{action:e.save}})]},proxy:!0}])})]},proxy:!0},{key:"overlay",fn:function(){return[n("SheetContainer",{ref:"sheetContainer",attrs:{"sheet-visible":e.sheetVisible},on:{"update:sheetVisible":function(t){e.sheetVisible=t},"update:sheet-visible":function(t){e.sheetVisible=t}}})]},proxy:!0}])},[e._v(" "),e._v(" "),e.quiz?n("div",[n("div",{staticClass:"sway-container sqze-section"},[n("div",{staticClass:"sqze-field"},[n("label",{staticClass:"sqze-field-label"},[e._v(e._s(e.quiz.typeLabel)+" name")]),e._v(" "),n("EdInput",{staticClass:"sqze-field-input",attrs:{disabled:e.disabled},model:{value:e.quizModel.name,callback:function(t){e.$set(e.quizModel,"name",t)},expression:"quizModel.name"}})],1)]),e._v(" "),n("div",{staticClass:"sway-container"},e._l(e.computedItems,(function(t){return n("QuizItemElement",{key:t.key,staticClass:"sqze-item",class:t.cssClass,attrs:{value:t.model.quizItem,editable:t.editable,disabled:e.disabled||t.disabled,assessible:"quiz"===e.quiz.type,"show-buttons":""},on:{edit:function(n){return e.beginItemEdit(t.item)},cancel:e.cancelItemEdit,save:function(n){return e.saveItem(t)},event:function(n){return e.onItemEvent(t,n)}},scopedSlots:e._u([{key:"actions",fn:function(){return[n("QuizElementAction",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Delete",expression:"'Delete'"}],attrs:{icon:"clear",disabled:e.disabled||!!e.questionEditing},on:{click:function(n){return e.destroyItem(t.item)}}}),e._v(" "),n("QuizElementAction",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Duplicate",expression:"'Duplicate'"}],attrs:{icon:"copy",disabled:e.disabled||!!e.questionEditing},on:{click:function(n){return e.duplicateItem(t.item)}}}),e._v(" "),n("QuizElementAction",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Move Up",expression:"'Move Up'"}],attrs:{icon:"arrow-up",disabled:e.disabled||!t.canMoveUp},on:{click:function(n){return e.reorderItem(e.computedItems,t.item,-1)}}}),e._v(" "),n("QuizElementAction",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Move Down",expression:"'Move Down'"}],attrs:{icon:"arrow-down",disabled:e.disabled||!t.canMoveDown},on:{click:function(n){return e.reorderItem(e.computedItems,t.item,1)}}})]},proxy:!0}],null,!0)},[e._v(" "),e._l(t.computedQuestions,(function(s){return n("QuizQuestionElement",{key:s.key,staticClass:"sqze-question",class:s.cssClass,attrs:{value:s.model.quizQuestion,editable:s.editable,disabled:e.disabled||s.disabled,number:s.number,assessible:"quiz"===e.quiz.type,spans:t.data.spans,"etc-tools":!e.isItemChromeless(t.item.quizItem),"show-buttons":""},on:{edit:function(t){return e.beginQuestionEdit(s.question)},cancel:e.cancelQuestionEdit,save:function(t){return e.saveQuestion(s)}},scopedSlots:e._u([{key:"actions",fn:function(){return[n("QuizElementAction",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Delete",expression:"'Delete'"}],attrs:{icon:"clear",disabled:e.disabled||!!e.questionEditing},on:{click:function(n){return e.destroyQuestion(t.item,s.question)}}}),e._v(" "),n("QuizElementAction",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Duplicate",expression:"'Duplicate'"}],attrs:{icon:"copy",disabled:e.disabled||!!e.questionEditing},on:{click:function(n){return e.duplicateQuestion(t.item,s.question)}}}),e._v(" "),n("QuizElementAction",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Move Up",expression:"'Move Up'"}],attrs:{icon:"arrow-up",disabled:e.disabled||!(e.isItemChromeless(t.item.quizItem)?t.canMoveUp:s.canMoveUp)},on:{click:function(n){return e.reorderQuestion(t,s.question,-1)}}}),e._v(" "),n("QuizElementAction",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Move Down",expression:"'Move Down'"}],attrs:{icon:"arrow-down",disabled:e.disabled||!(e.isItemChromeless(t.item.quizItem)?t.canMoveDown:s.canMoveDown)},on:{click:function(n){return e.reorderQuestion(t,s.question,1)}}})]},proxy:!0}],null,!0)})})),e._v(" "),e.isItemChromeless(t.item.quizItem)?e._e():n("NewQuestionButtons",{attrs:{types:e.newQuestionTypes,disabled:e.disabled||e.editing},on:{action:function(n){return e.createQuestionOrItem(n,t.item)}}})],2)})),1),e._v(" "),n("NewQuestionButtons",{staticClass:"sqze-new-question-buttons",attrs:{types:e.newItemTypes,disabled:e.disabled||e.editing},on:{action:function(t){return e.createQuestionOrItem(t,null)}}})],1):e._e()])}),[],!1,null,null,null));t.default=we.exports},VZIF:function(e,t,n){"use strict";var s=n("RKKz");n.n(s).a},VcWu:function(e,t,n){},VeOY:function(e,t,n){},VlpE:function(e,t,n){"use strict";var s=n("Foru"),i=(n("pNMO"),n("4Brf"),n("0oug"),n("fbCW"),n("4mDm"),n("2B1R"),n("07d7"),n("inlA"),n("PKPk"),n("UxlC"),n("3bBZ"),n("kvrn")),r=n.n(i),a=n("wLLz"),o=n("9asc"),l=n("hFFH"),c=n("Kaxq"),u=n("Yswc"),d=n("G7T9"),h={data:function(){return{menuVnode:null,key:1}},methods:{renderActionSheetFromVnode:function(e){var t=this,n=this.$createElement,s=[],i=null,h=!0,p=!1,f=void 0;try{for(var m,v=e.componentOptions.children[Symbol.iterator]();!(h=(m=v.next()).done);h=!0){var b=m.value;d.j(b,c.a)?function(){i||(i=[],s.push(i));var e=d.b(b),r=b.componentOptions.children&&b.componentOptions.children.find((function(e){return e.componentOptions})),a=e.props.text;r&&!a.endsWith("...")&&(a=a.replace(/\.?\.?\.?$/,"...")),i.push(n(l.a,{attrs:{text:a,subtext:e.props.subtext,checked:e.props.checked},on:{click:function(){e.on&&e.on.click&&e.on.click(),r?(r._isVue=!0,t.menuVnode=r,t.key++):(t.menuVnode&&(t.menuVnode=null,t.key++),t.$emit("close"))}}}))}():d.j(b,u.a)&&(i=null)}}catch(_){p=!0,f=_}finally{try{h||null==v.return||v.return()}finally{if(p)throw f}}var g=s.map((function(e){return n(o.a,[e])})),y=n(o.a,[n(l.a,{attrs:{text:"Cancel",type:"cancel"},on:{click:function(){return t.$emit("close")}}})]),w={on:{close:function(){return t.$emit("close")}},scopedSlots:{default:function(){return g},footer:function(){return y}}};return n(a.a,r()([{key:this.key},w]))}},render:function(e){return this.renderActionSheetFromVnode(this.menuVnode||this.$vnode)}},p=n("KHd+"),f=Object(p.a)(h,void 0,void 0,!1,null,null,null).exports,m={functional:!0,render:function(e,t){return e(t.parent.$store.state.isSmall?f:s.a,t.data,t.children)}},v=Object(p.a)(m,void 0,void 0,!1,null,null,null);t.a=v.exports},VpGe:function(e,t,n){},VqqI:function(e,t,n){},Vrw3:function(e,t,n){},VvJX:function(e,t,n){"use strict";var s=n("mOlB");n.n(s).a},Vzir:function(e,t,n){"use strict";var s={components:{Icon:n("WmPt").a},props:{items:{type:Array,default:function(){return[]}},align:{type:String,default:"center"}}},i=(n("1CrY"),n("KHd+")),r=Object(i.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"collection-view-simple",class:"colvs-align-"+e.align},e._l(e.items,(function(t,s){return n("div",{key:s,staticClass:"colvs-item",on:{click:function(n){return e.$emit("item-click",t)}}},[n("Icon",{staticClass:"colvs-icon",attrs:{icon:t.icon}}),e._v(" "),n("div",{staticClass:"colvs-label"},[e._v(e._s(t.label))])],1)})),0)}),[],!1,null,null,null);t.a=r.exports},W2hi:function(e,t,n){"use strict";n("pjDv"),n("2B1R"),n("Junv"),n("qePV"),n("07d7"),n("JfAA"),n("PKPk"),n("Rm1S");var s={props:{value:{type:Number,default:null}},computed:{groups:function(){return"number"!=typeof this.value?[]:Array.from(this.value.toString()).reverse().join("").match(/\d{1,3}/g).reverse().map((function(e){return Array.from(e).reverse()}))},digits:function(){return"number"==typeof this.value?Array.from(this.value.toString()):[]}}},i=(n("Nia9"),n("KHd+")),r=Object(i.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"ticker"},e._l(e.groups,(function(t,s){return n("span",{key:s,staticClass:"ticker-group"},[e._l(t,(function(t,s){return[n("span",{key:s,staticClass:"ticker-digit"},[n("span",{staticClass:"ticker-digit-placeholder"},[e._v(e._s(t))]),e._v(" "),n("Transition",[n("span",{key:t,staticClass:"ticker-digit-inner"},[e._v(e._s(t))])])],1)]}))],2)})),0)}),[],!1,null,null,null);t.a=r.exports},W86N:function(e,t,n){"use strict";var s=n("zetE");n.n(s).a},WD2Y:function(e,t,n){},WNWs:function(e,t,n){},WO9I:function(e,t,n){"use strict";var s=n("uXL/");n.n(s).a},WPpO:function(e,t,n){"use strict";n("pNMO"),n("TeQF"),n("fbCW"),n("2B1R"),n("5DmW"),n("27RR"),n("tkto"),n("SYor"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("sEfC"),l=n.n(o),c=n("bt/X"),u=n.n(c),d=n("L2JU"),h=n("hSdx"),p=n("NB5Z"),f=n("WmPt"),m=(n("pjDv"),n("yXV3"),n("PKPk"),{methods:{getRadios:function(){return Array.from(this.$el.querySelectorAll("[role=radio]"))},select:function(e){var t=this.getRadios(),n=document.activeElement,s=t.indexOf(n);if(-1===s)t[0]&&(t[0].click(),t[0].focus());else{var i=((s+e)%t.length+t.length)%t.length;t[i].click(),t[i].focus()}}}}),v=n("KHd+"),b=Object(v.a)(m,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{attrs:{role:"radiogroup"},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:(t.preventDefault(),"button"in t&&0!==t.button?null:e.select(-1))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])&&e._k(t.keyCode,"right",39,t.key,["Right","ArrowRight"])?null:(t.preventDefault(),"button"in t&&2!==t.button?null:e.select(1))}]}},[e._t("default")],2)}),[],!1,null,null,null).exports,g={components:{Icon:f.a,EdRadioGroup:b},props:{categories:{type:Array,required:!0},value:{type:null,default:null},nullable:{type:Boolean,default:!1}},methods:{itemCssStyle:function(e){if(e.color)return{color:p.b(e.color,.3),backgroundColor:p.c(e.color,.08),borderColor:p.c(p.b(e.color,.3),.2)}},toggleSelectedItem:function(e){this.$emit("input",this.nullable&&e===this.value?null:e)}}},y=(n("hPYL"),Object(v.a)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("EdRadioGroup",{staticClass:"discuss-category-pills"},e._l(e.categories,(function(t){return n("div",{key:t.name,staticClass:"dcp-item",class:{selected:t===e.value},style:e.itemCssStyle(t),attrs:{role:"radio",tabindex:t===e.value?0:-1,"aria-checked":(t===e.value).toString()},on:{click:function(n){return e.toggleSelectedItem(t)},keydown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"space",32,n.key,[" ","Spacebar"])?null:(n.preventDefault(),e.toggleSelectedItem(t))}}},[t.shared?n("Icon",{attrs:{icon:"share"}}):e._e(),e._v("\n\t\t"+e._s(t.name||t)+"\n\t")],1)})),0)}),[],!1,null,null,null).exports),w={components:{Icon:f.a,EdRadioGroup:b},props:{value:{type:String,default:void 0},types:{type:Array,required:!0}},computed:{items:function(){var e=this;return this.types.map((function(t){return{value:t,label:e.$t("discussion.".concat(t))}}))}}},_=(n("L7tI"),Object(v.a)(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("EdRadioGroup",{staticClass:"discuss-thread-type-input"},e._l(e.items,(function(t){var s;return n("div",{key:t.value,staticClass:"dtti-item",class:(s={active:e.value===t.value},s[t.value]=!0,s),attrs:{role:"radio",tabindex:e.value===t.value?0:-1,"aria-checked":e.value===t.value},on:{click:function(n){return e.$emit("input",t.value)}}},[n("Icon",{attrs:{icon:t.value}}),e._v(" "+e._s(t.label)+"\n\t")],1)})),0)}),[],!1,null,null,null).exports),k=(n("qePV"),n("SBq4")),C=n("9Arg"),x={props:{items:{type:Array,default:function(){return[]}},selectedIndex:{type:Number,default:-1},menuVisible:{type:Boolean,default:!1}},watch:{selectedIndex:function(){this.scrollSelectedItemIntoView()}},mounted:function(){this.scrollSelectedItemIntoView()},methods:{selectRelative:function(e){var t=this.items,n=((this.selectedIndex+e)%t.length+t.length)%t.length;this.$emit("update:selected-index",n)},scrollSelectedItemIntoView:function(){var e=this.$refs.items;if(e){var t=e[this.selectedIndex];t&&C.D(C.o(t),t)}}}},j=(n("4uGR"),Object(v.a)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"autocomplete"},[e._t("default",null,{selectRelative:e.selectRelative}),e._v(" "),e.menuVisible?n("div",{staticClass:"autocomp-menu",on:{mousedown:function(e){e.preventDefault()}}},[e._t("header"),e._v(" "),n("div",{staticClass:"autocomp-items"},e._l(e.items,(function(t,s){return n("div",{key:s,ref:"items",refInFor:!0},[e._t("item",null,{item:t,index:s,selectedIndex:e.selectedIndex})],2)})),0)],2):e._e()],2)}),[],!1,null,null,null).exports),O=n("xtk+"),S=n("b/yj"),E=n("JBdv");function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var I={components:{Autocomplete:j,EdInput:O.a,MathRender:S.a,DateDisplay:E.a},directives:{Autofocus:k.a},props:{threads:{type:Array,default:function(){return[]}},selectedIndex:{type:Number,default:-1},disabled:{type:Boolean,default:!1},value:{type:String,default:""},fieldId:{type:String,default:void 0}},data:function(){return{focused:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(d.e)(["isSmallDevice"])),methods:{focus:function(){this.$refs.title.$el.focus()},blur:function(){this.$refs.title.$el.blur()}}},D=(n("vIfc"),Object(v.a)(I,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Autocomplete",{staticClass:"thread-suggestions",attrs:{items:e.threads,"menu-visible":e.threads.length>0&&(e.focused||e.isSmallDevice),"selected-index":e.selectedIndex},on:{"update:selected-index":function(t){return e.$emit("update:selected-index",t)}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.selectRelative;return[n("EdInput",{directives:[{name:"autofocus",rawName:"v-autofocus"}],ref:"title",staticClass:"thrsug-input",attrs:{id:e.fieldId,disabled:e.disabled,autocomplete:"off",value:e.value},on:{input:function(t){return e.$emit("input",t)},focus:function(t){e.focused=!0},blur:function(t){e.focused=!1},keydown:[function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.focused=!1},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$emit("item-select",e.selectedIndex)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),s(-1))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),s(1))}]}})]}},{key:"header",fn:function(){return[n("div",{staticClass:"thrsug-header"},[e._v(e._s(e.$t("discussion.threadEdit.similarThreads")))])]},proxy:!0},{key:"item",fn:function(t){var s=t.item,i=t.selectedIndex,r=t.index;return[n("div",{staticClass:"thrsug-item",class:{"thrsug-item-selected":i===r},on:{click:function(t){return e.$emit("item-select",r)}}},[n("MathRender",{staticClass:"thrsug-title",attrs:{latex:s.title}}),e._v(" "),n("div",{staticClass:"thrsug-category"},[e._v("\n\t\t\t\tin "+e._s([s.category,s.subcategory].filter(Boolean).join(", "))+"\n\t\t\t")]),e._v(" "),n("DateDisplay",{staticClass:"thrsug-date",attrs:{date:s.created_at,format:"fromNow"}})],1)]}}])})}),[],!1,null,null,null).exports),P=n("gD3A"),A=n("6XG0"),N=n("4cYw"),R=n("LnxB"),M=n("2ejt"),L=n("fLbO");function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var B,q={components:{CategoryPills:y,ThreadTypeInput:_,ThreadSuggestions:D,Amber:P.a,EdCheck:A.a,EdSelect:N.a,Message:R.a,ContentDialog:M.a,Show:L.default},inject:["discussApi"],props:{value:{type:Object,default:null},original:{type:Object,default:null},disabled:{type:Boolean,default:!1},email:{type:Boolean,default:!1},pinnedHidden:{type:Boolean,default:!1},privateHidden:{type:Boolean,default:!1},privateDisabled:{type:Boolean,default:!1},anonymousHidden:{type:Boolean,default:!1},anonymousDisabled:{type:Boolean,default:!1},suggestionsEnabled:{type:Boolean,default:!1},errors:{type:Array,default:function(){return[]}},errorType:{type:String,default:"error"}},data:function(){return{titleId:h.uniqueId(),typesId:h.uniqueId(),categoriesId:h.uniqueId(),subcategoriesId:h.uniqueId(),suggestions:[],suggestionsMenuVisible:!1,suggestionsSelectedIndex:-1,previewThread:null}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(d.e)(["course","realm"]),{},Object(d.c)(["isStaff"]),{},Object(d.c)("discuss",["categories","canMention"]),{types:function(){return["question","post",this.isStaff&&"announcement"].filter(Boolean)},emailVisible:function(){return"announcement"===this.value.type},categoryItem:function(){var e=this;return(this.categories||[]).find((function(t){return t.name===e.value.category}))},subcategories:function(){return this.categoryItem?this.categoryItem.subcategories:[]},computedErrors:function(){var e=u()(this.errors,(function(e){return e.field||"thread"}));return["thread","title","category","subcategory","content"].reduce((function(t,n){return t[n]=(e[n]||[]).map((function(e){return e.message})),t}),{})}}),created:function(){this.loadSuggestionsDebounced=l()(this.loadSuggestions,1e3)},destroyed:function(){this.loadSuggestionsDebounced.cancel()},methods:{onCategoryInput:function(e){this.value.category=e.name,this.value.subcategory=""},onCategoryChange:function(e){this.value.category=e.target.value,this.value.subcategory=""},loadSuggestions:(B=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.value.title.trim(),!this.suggestionsEnabled||!t){e.next=7;break}return e.next=4,this.discussApi.getThreads(this.course.id,{query:t,limit:20});case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=[];case 8:this.suggestions=e.t0,this.suggestionsSelectedIndex=-1;case 10:case"end":return e.stop()}}),e,this)}))),function(){return B.apply(this,arguments)}),showPreview:function(e){this.previewThread=this.suggestions[e],this.$refs.title.blur()},closePreview:function(){this.previewThread=null,this.$refs.title.focus()}}},$=(n("ICiq"),Object(v.a)(q,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"thread-editor"},[e.computedErrors.thread.length?n("Message",{staticClass:"thred-field-error",attrs:{type:e.errorType}},[e._v("\n\t\t"+e._s(e.computedErrors.thread[0])+"\n\t")]):e._e(),e._v(" "),n("div",{staticClass:"thred-field"},[n("ThreadTypeInput",{attrs:{"aria-labelledby":e.typesId,types:e.types},model:{value:e.value.type,callback:function(t){e.$set(e.value,"type",t)},expression:"value.type"}})],1),e._v(" "),n("div",{staticClass:"thred-field"},[n("label",{attrs:{for:e.titleId}},[e._v(e._s(e.$t("discussion.threadEdit.titleInput")))]),e._v(" "),n("div",{staticClass:"thred-field-body"},[n("ThreadSuggestions",{ref:"title",attrs:{threads:e.suggestions,"selected-index":e.suggestionsSelectedIndex,"field-id":e.titleId},on:{"update:selectedIndex":function(t){e.suggestionsSelectedIndex=t},"update:selected-index":function(t){e.suggestionsSelectedIndex=t},input:e.loadSuggestionsDebounced,"item-select":function(t){return e.showPreview(t)}},model:{value:e.value.title,callback:function(t){e.$set(e.value,"title",t)},expression:"value.title"}}),e._v(" "),e.computedErrors.title.length?n("Message",{staticClass:"thred-field-error",attrs:{type:e.errorType}},[e._v("\n\t\t\t\t"+e._s(e.computedErrors.title[0])+"\n\t\t\t")]):e._e()],1)]),e._v(" "),n("div",{staticClass:"thred-field"},[n("label",{attrs:{id:e.categoriesId}},[e._v(e._s(e.$t("discussion.threadEdit.categoryInput")))]),e._v(" "),n("div",{staticClass:"thred-field-body"},[n("CategoryPills",{staticClass:"media-not-sm-device",attrs:{"aria-labelledby":e.categoriesId,categories:e.categories,value:e.categoryItem},on:{input:e.onCategoryInput}}),e._v(" "),n("EdSelect",{staticClass:"media-sm-device",attrs:{value:e.value.category},on:{change:e.onCategoryChange}},[n("option",{attrs:{disabled:"",value:""}},[e._v("(Select)")]),e._v(" "),e._l(e.categories,(function(t){return n("option",{key:t.name,domProps:{value:t.name}},[e._v("\n\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t")])}))],2),e._v(" "),e.computedErrors.category.length?n("Message",{staticClass:"thred-field-error",attrs:{type:e.errorType}},[e._v("\n\t\t\t\t"+e._s(e.computedErrors.category[0])+"\n\t\t\t")]):e._e()],1)]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.subcategories.length,expression:"subcategories.length"}],staticClass:"thred-field"},[n("label",{attrs:{id:e.subcategoriesId}},[e._v(e._s(e.$t("discussion.threadEdit.subcategoryInput")))]),e._v(" "),n("div",{staticClass:"thred-field-body"},[n("CategoryPills",{staticClass:"media-not-sm-device",attrs:{"aria-labelledby":e.subcategoriesId,categories:e.subcategories,nullable:""},model:{value:e.value.subcategory,callback:function(t){e.$set(e.value,"subcategory",t)},expression:"value.subcategory"}}),e._v(" "),n("EdSelect",{staticClass:"media-sm-device",model:{value:e.value.subcategory,callback:function(t){e.$set(e.value,"subcategory",t)},expression:"value.subcategory"}},[n("option",{attrs:{value:""}},[e._v(e._s(e.$t("discussion.threadEdit.subcategoryNone")))]),e._v(" "),e._l(e.subcategories,(function(t){return n("option",{key:t,domProps:{value:t}},[e._v("\n\t\t\t\t\t"+e._s(t)+"\n\t\t\t\t")])}))],2),e._v(" "),e.computedErrors.subcategory.length?n("Message",{staticClass:"thred-field-error",attrs:{type:e.errorType}},[e._v("\n\t\t\t\t"+e._s(e.computedErrors.subcategory[0])+"\n\t\t\t")]):e._e()],1)]),e._v(" "),e.categoryItem&&e.categoryItem.shared?n("p",{staticClass:"thred-shared"},[e._v("\n\t\t"+e._s(e.$t("discussion.threadEdit.shared",{realm:e.realm.name}))+"\n\t")]):e._e(),e._v(" "),n("div",{staticClass:"thred-field"},[n("div",{staticClass:"thred-field-body"},[e.value.category?n("Amber",{staticClass:"thred-amber",attrs:{"can-mention":e.canMention,"original-value":e.original&&e.original.content,disabled:e.disabled,"min-height":300,"max-height":500},model:{value:e.value.content,callback:function(t){e.$set(e.value,"content",t)},expression:"value.content"}}):n("Message",[e._v(e._s(e.$t("discussion.threadEdit.selectCategory")))]),e._v(" "),e.computedErrors.content.length?n("Message",{staticClass:"thred-field-error",attrs:{type:e.errorType}},[e._v("\n\t\t\t\t"+e._s(e.computedErrors.content[0])+"\n\t\t\t")]):e._e()],1)]),e._v(" "),n("div",{staticClass:"thred-checkboxes"},[e.pinnedHidden?e._e():n("EdCheck",{staticClass:"thred-checkbox",attrs:{disabled:e.disabled,label:e.$t("discussion.threadEdit.pinnedInput"),description:e.$t("discussion.threadEdit.pinnedDescription")},model:{value:e.value.is_pinned,callback:function(t){e.$set(e.value,"is_pinned",t)},expression:"value.is_pinned"}}),e._v(" "),e.privateHidden?e._e():n("EdCheck",{staticClass:"thred-checkbox",attrs:{disabled:e.privateDisabled,label:e.$t("discussion.threadEdit.privateInput"),description:e.$t("discussion.threadEdit.privateDescription")},model:{value:e.value.is_private,callback:function(t){e.$set(e.value,"is_private",t)},expression:"value.is_private"}}),e._v(" "),e.anonymousHidden?e._e():n("EdCheck",{staticClass:"thred-checkbox",attrs:{disabled:e.anonymousDisabled,label:e.$t("discussion.threadEdit.anonymousInput"),description:e.$t("discussion.threadEdit.anonymousDescription")},model:{value:e.value.is_anonymous,callback:function(t){e.$set(e.value,"is_anonymous",t)},expression:"value.is_anonymous"}}),e._v(" "),e.emailVisible?n("EdCheck",{staticClass:"thred-checkbox",attrs:{disabled:e.disabled,value:e.email,label:e.$t("discussion.threadEdit.emailInput"),description:e.$t("discussion.threadEdit.emailDescription")},on:{input:function(t){return e.$emit("update:email",t)}}}):e._e()],1),e._v(" "),e.previewThread?n("ContentDialog",{attrs:{title:"Thread Preview","max-width":800},on:{close:e.closePreview}},[n("div",{staticClass:"thred-preview-scroll"},[n("Show",{attrs:{"thread-id":e.previewThread.id}})],1)]):e._e()],1)}),[],!1,null,null,null));t.a=$.exports},WQDK:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("4Brf"),n("0oug"),n("TeQF"),n("4mDm"),n("2B1R"),n("+2oP"),n("ToJy"),n("Tskq"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("PKPk"),n("FZtP"),n("3bBZ");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("KQm4"),o=n("rePB"),l=n("L2JU"),c=n("Pa8A"),u=n("WmPt"),d=n("0XH5"),h=n("K24h"),p=n("3PXm"),f=n("JBdv"),m=n("NC1X"),v=n("CkVh"),b=n("Kaxq"),g=n("5/Cn"),y=n("/Yj0"),w=n("hSdx");function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var k,C,x={directives:{Tooltip:c.a},components:{Icon:u.a,SearchInput:d.a,InfiniteScroll:h.a,ProgressBar:p.a,DateDisplay:f.a,Spinner:m.a,ContextMenuTrigger:v.a,ContextMenuItem:b.a},inject:["swayApi"],data:function(){return{searchQuery:"",attempts:[],displayedAttemptsCount:50,loadingAttempts:!1,menuActivity:null}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(l.c)(["isStaff"]),{},Object(l.e)(["course","user"]),{},Object(l.e)("sway",["activities","loadingActivities"]),{liveActivities:function(){var e=this.activities.filter((function(e){return e.active}));return Object(a.a)(w.groupBy(e,(function(e){return e.quiz.originalId})).values()).map((function(e){return e.sort((function(e,t){return t.createdAt-e.createdAt}))})).sort((function(e,t){return t[0].createdAt-e[0].createdAt})).reduce((function(e,t){return e.push.apply(e,Object(a.a)(t)),e}),[])},filteredAttempts:function(){var e=this;return this.attempts.filter((function(t){return w.validateSubstrDeep(t.quiz,e.searchQuery,"name")})).sort((function(e,t){return t.createdAt-e.createdAt}))},displayedAttempts:function(){return this.filteredAttempts.slice(0,this.displayedAttemptsCount)}}),watch:{filteredAttempts:function(){this.displayedAttemptsCount=50}},created:function(){this.update()},methods:{activityStyle:function(e){var t=w.hash(e.quiz.name)%360;return{backgroundColor:"hsl(".concat(t,", 85%, 90%)"),color:"hsl(".concat(t,", 85%, 10%)"),fill:"hsl(".concat(t,", 85%, 10%)")}},activityLink:function(e){return{name:this.isStaff?"sway-activities-host":"sway-activities-run",params:{quizId:e.quizId}}},update:(C=Object(r.a)(i.a.mark((function e(){var t,n,s,r,a,o,l,c,u,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingAttempts=!0,e.prev=1,e.next=4,this.swayApi.getUserAttempts(this.course.id,this.user.id);case 4:s=e.sent,t=s.attempts,n=s.quizzes,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),y.b({type:"error",text:"Unable to fetch activity results listing."}),e.abrupt("return");case 13:return e.prev=13,this.loadingAttempts=!1,e.finish(13);case 16:for(r=new Map(n.map((function(e){return[e.id,e]}))),a=!0,o=!1,l=void 0,e.prev=20,c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0)(d=u.value).quiz=r.get(d.quizId);e.next=28;break;case 24:e.prev=24,e.t1=e.catch(20),o=!0,l=e.t1;case 28:e.prev=28,e.prev=29,a||null==c.return||c.return();case 31:if(e.prev=31,!o){e.next=34;break}throw l;case 34:return e.finish(31);case 35:return e.finish(28);case 36:this.attempts=t;case 37:case"end":return e.stop()}}),e,this,[[1,9,13,16],[20,24,28,36],[29,,31,35]])}))),function(){return C.apply(this,arguments)}),attemptActivity:function(e){this.$router.push({name:"sway-activities-run",params:{quizId:e.quiz.id}})},endActivity:(k=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.b({icon:"warning",title:'End "'.concat(t.quiz.name,'" activity?'),text:"Once the activity has ended, no more students will be able to participate in it and the scores will be finalised.",primaryAction:"End Activity",secondaryAction:"Cancel"});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,this.swayApi.endActivity(t.quizId);case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(4),g.c("Unable to end the activity"),e.abrupt("return");case 13:y.b({type:"success",title:"Activity ended",text:"Students will no longer be able to participate in this activity but you can view the results from the Reports tab."});case 14:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(e){return k.apply(this,arguments)}),displayMoreAttempts:function(){this.displayedAttemptsCount=Math.min(this.displayedAttemptsCount+50,this.attempts.length)}}},j=(n("XDUH"),n("KHd+")),O=Object(j.a)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sway-lobby"},[n("section",{staticClass:"swl-section swl-section-activities"},[n("div",{staticClass:"sway-container"},[n("h1",{staticClass:"swl-heading"},[e._v("Live activities")]),e._v(" "),e.loadingActivities?n("Spinner",{staticClass:"sway-spinner"}):e.liveActivities.length?e._e():n("p",{staticClass:"swl-well"},[e._v("\n\t\t\t\tThere are no live activities right now.\n\t\t\t\t"),e.isStaff?[e._v("\n\t\t\t\t\tThey will appear here automatically as soon as you have launched one.\n\t\t\t\t\tYou can launch an activity from the "),n("RouterLink",{attrs:{to:{name:"sway-quizzes-index"}}},[e._v("Activities")]),e._v(" tab.\n\t\t\t\t")]:[e._v("\n\t\t\t\t\tThey will appear here automatically as soon as your instructor has\n\t\t\t\t\tlaunched one.\n\t\t\t\t")]],2),e._v(" "),n("div",{staticClass:"swl-activities"},e._l(e.liveActivities,(function(t){return n("RouterLink",{key:t.id,staticClass:"swl-activity",style:e.activityStyle(t),attrs:{tag:"article",to:e.activityLink(t)}},[n("div",{staticClass:"swl-activity-layout"},[n("div",{staticClass:"swl-activity-left"},[n("Icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.quiz.typeLabel,expression:"activity.quiz.typeLabel"}],staticClass:"swl-activity-icon",attrs:{icon:t.quiz.type}})],1),e._v(" "),n("div",{staticClass:"swl-activity-body"},[n("div",{staticClass:"swl-activity-name"},[e._v(e._s(t.quiz.name))]),e._v(" "),n("div",{staticClass:"swl-activity-launcher"},[e._v("Launched by "),n("strong",[e._v(e._s(t.userName))])]),e._v(" "),n("div",{staticClass:"swl-activity-date"},[n("DateDisplay",{attrs:{format:"fromNow",date:t.createdAt}})],1)]),e._v(" "),n("div",{staticClass:"swl-activity-right"},[e.isStaff?n("ContextMenuTrigger",{attrs:{active:e.menuActivity===t},on:{"update:active":function(n){e.menuActivity=n?t:null}},scopedSlots:e._u([{key:"trigger",fn:function(t){var s=t.trigger,i=t.attrs;return[n("button",e._b({staticClass:"swl-activity-btn",on:{click:function(e){return e.stopPropagation(),s(e)}}},"button",i,!1),[n("Icon",{attrs:{icon:"more-vert"}})],1)]}},{key:"items",fn:function(){return[n("ContextMenuItem",{key:"end",attrs:{text:"End"},on:{click:function(t){return e.endActivity(e.menuActivity)}}}),e._v(" "),n("ContextMenuItem",{key:"attempt",attrs:{text:e.menuActivity.attemptId?"Resume":"Attempt",disabled:!!e.menuActivity.attemptId&&e.menuActivity.responseCount===e.menuActivity.questionCount},on:{click:function(t){return e.attemptActivity(e.menuActivity)}}})]},proxy:!0}],null,!0)}):e._e()],1)]),e._v(" "),t.attemptId?n("div",{staticClass:"swl-activity-status"},[t.responseCount===t.questionCount?[n("Icon",{attrs:{icon:"tick"}}),e._v(" "),n("span",[e._v("Completed")])]:[n("span",[e._v("In progress ("+e._s(t.responseCount)+"/"+e._s(t.questionCount)+")")]),e._v(" "),n("ProgressBar",{attrs:{value:t.responseCount,max:t.questionCount}})]],2):e._e()])})),1)],1)]),e._v(" "),n("section",{staticClass:"swl-section swl-section-history"},[n("div",{staticClass:"sway-container"},[n("h1",{staticClass:"swl-heading"},[e._v("Your past activities")]),e._v(" "),n("p",{staticClass:"swl-text"},[e._v("\n\t\t\t\tThe results of past activities you have participated in are listed below.\n\t\t\t\tClick an attempt to view more details.\n\t\t\t")]),e._v(" "),n("SearchInput",{staticClass:"swl-search",model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),e._v(" "),n("InfiniteScroll",{on:{trigger:e.displayMoreAttempts}},[n("table",{staticClass:"sway-table"},[n("thead",[n("tr",[n("th",{staticClass:"swl-col-name"},[e._v("Name")]),e._v(" "),n("th",{staticClass:"swl-col-launcher"},[e._v("Launched By")]),e._v(" "),n("th",{staticClass:"swl-col-date"},[e._v("Date")])])]),e._v(" "),n("tbody",e._l(e.displayedAttempts,(function(t){return n("tr",{key:t.id},[n("td",{staticClass:"swl-col-name"},[n("RouterLink",{attrs:{to:{name:"sway-history",params:{attemptId:t.id}}}},[e._v(e._s(t.quiz.name))])],1),e._v(" "),n("td",{staticClass:"swl-col-launcher"},[e._v(e._s(t.userName))]),e._v(" "),n("td",{staticClass:"swl-col-date",attrs:{title:t.createdAt}},[n("DateDisplay",{attrs:{date:t.createdAt,format:"fromNow"}})],1)])})),0)])]),e._v(" "),e.loadingAttempts?n("Spinner",{staticClass:"sway-spinner"}):e._e()],1)])])}),[],!1,null,null,null);t.default=O.exports},WTSU:function(e,t,n){},WVTM:function(e,t,n){},Wjtt:function(e,t,n){"use strict";var s={props:{items:{type:Array,required:!0},value:{type:null,default:null},nullable:{type:Boolean,default:!1}},methods:{selectItem:function(e){this.$emit("input",e===this.value&&this.nullable?null:e)}}},i=(n("K+U5"),n("KHd+")),r=Object(i.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pills",attrs:{role:"radiogroup"}},e._l(e.items,(function(t,s){return n("div",{key:s,staticClass:"pills-item",class:{selected:t===e.value},attrs:{tabindex:"0",role:"radio",title:t},on:{click:function(n){return e.selectItem(t)}}},[e._v("\n\t\t"+e._s(t)+"\n\t")])})),0)}),[],!1,null,null,null);t.a=r.exports},Wmcy:function(e,t,n){"use strict";var s=n("uP0s");n.n(s).a},Wn1A:function(e,t,n){},WqV1:function(e,t,n){"use strict";var s=n("AzwR");n.n(s).a},WrRN:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("yq1k"),n("5DmW"),n("27RR"),n("tkto"),n("JTJg"),n("UxlC"),n("SYor"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=(n("4D86"),n("L2JU")),l=n("CXe4"),c=n("NC1X"),u=n("IbLZ"),d=n("/Yj0");function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var p,f={name:"StartCreateAccount",components:{Terms:l.a,Spinner:c.a,EdField:u.a},inject:["userApi","sessionService"],data:function(){return{id:null,name:"",email:"",loading:!1,errorMessage:null,appbar:{title:"Create Account"}}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.e)(["user"])),created:function(){this.$route.query.id?(this.id=this.$route.query.id,this.name=this.$route.query.name||"",this.email=this.$route.query.email||""):this.errorMessage="You cannot visit this page without first using a course access code. Try again, and if the issue persists contact your instructor for more information."},methods:{submit:(p=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loading&&this.id){e.next=2;break}return e.abrupt("return");case 2:if(this.name=this.name.trim().replace(/\s+/g," "),""!==this.name){e.next=6;break}return this.errorMessage="Name cannot be empty.",e.abrupt("return");case 6:if(this.name.includes(" ")){e.next=9;break}return this.errorMessage="Enter your first and last name.",e.abrupt("return");case 9:return this.loading=!0,this.errorMessage=null,e.prev=11,e.next=14,this.userApi.create(this.id,this.name);case 14:t=e.sent,e.next=22;break;case 17:return e.prev=17,e.t0=e.catch(11),403===e.t0.status&&(this.errorMessage="Could not create the account because the page has expired."),this.loading=!1,e.abrupt("return");case 22:return e.prev=22,e.next=25,this.sessionService.logInWithToken(t);case 25:e.next=32;break;case 27:return e.prev=27,e.t1=e.catch(22),d.b({type:"success",title:"Account created",text:"Please log in."}),this.$router.replace({name:"login"}),e.abrupt("return");case 32:d.b({type:"success",title:"Account created",text:"Welcome to Ed!"}),1===this.user.courses.length?this.$router.replace({name:"course",params:{courseId:this.user.courses[0].id}}):this.$router.replace({name:"dashboard"});case 34:case"end":return e.stop()}}),e,this,[[11,17],[22,27]])}))),function(){return p.apply(this,arguments)})}},m=n("KHd+"),v=Object(m.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"start-container"},[n("form",{staticClass:"start-form",attrs:{method:"POST",novalidate:""},on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[n("div",{staticClass:"start-title"},[n("RouterLink",{attrs:{to:"/"}},[e._v("Ed")])],1),e._v(" "),e.errorMessage?n("div",{staticClass:"start-message"},[e._v(e._s(e.errorMessage))]):e._e(),e._v(" "),e.id?[n("EdField",{staticClass:"start-field",scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Email")]},proxy:!0}],null,!1,1485928759)},[e._v(" "),n("input",{staticClass:"start-input",attrs:{type:"text",name:"email",readonly:"",disabled:e.loading},domProps:{value:e.email}})]),e._v(" "),n("EdField",{staticClass:"start-field",scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Full name")]},proxy:!0}],null,!1,1292121519)},[e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"start-input",attrs:{type:"text",disabled:e.loading,autofocus:""},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),e._v(" "),n("button",{staticClass:"start-btn",attrs:{type:"submit",disabled:e.loading}},[e._v("\n\t\t\t\tCreate account\n\t\t\t\t"),e.loading?n("Spinner",{staticClass:"start-spinner"}):e._e()],1),e._v(" "),n("Terms")]:e._e()],2)])}),[],!1,null,null,null);t.default=v.exports},"X0+k":function(e,t,n){},X9Ge:function(e,t,n){"use strict";var s=n("YPfv");n.n(s).a},X9l2:function(e,t,n){},XA15:function(e,t,n){"use strict";var s=n("b/Uo");n.n(s).a},XDUH:function(e,t,n){"use strict";var s=n("HazA");n.n(s).a},"XXQ/":function(e,t,n){},XhvD:function(e,t,n){},XlJ8:function(e,t,n){},XlUh:function(e,t,n){},Xrlv:function(e,t,n){"use strict";var s=n("nQyZ");n.n(s).a},XvJ0:function(e,t,n){},Xx36:function(e,t,n){"use strict";var s=n("r+/L");n.n(s).a},XxUo:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("4Brf"),n("0oug"),n("TeQF"),n("yq1k"),n("4mDm"),n("2B1R"),n("ToJy"),n("Tskq"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("JTJg"),n("PKPk"),n("EnZy"),n("SYor"),n("FZtP"),n("3bBZ");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("ODXe"),o=n("KQm4"),l=n("rePB"),c=n("L2JU"),u=n("9z1j"),d=n("Oshs"),h=n("9wdi"),p=n("N+Un"),f=n("VlpE"),m=n("Kaxq"),v=n("0XH5"),b=n("NC1X"),g=(n("+2oP"),n("qePV"),n("YGK4"),{props:{expandedIndex:{type:Number,default:null},expandedIndices:{type:Array,default:null},multiple:{type:Boolean,default:!1}},data:function(){return{selfExpandedIndices:[]}},computed:{selfExpandedIndex:{get:function(){return 0===this.selfExpandedIndices.length?-1:1===this.selfExpandedIndices.length?this.selfExpandedIndices[0]:null},set:function(e){this.selfExpandedIndices=e<0?[]:[e]}}},watch:{selfExpandedIndex:function(e){null!=e&&this.$emit("expanded-index",e)},selfExpandedIndices:function(e){this.$emit("expanded-indices",e.slice())},expandedIndex:{immediate:!0,handler:function(e){null!=e&&(this.selfExpandedIndex=e)}},expandedIndices:{immediate:!0,handler:function(e){if(null!=e){var t=new Set(e),n=new Set(this.selfExpandedIndices);(t.size!==n.size||Object(o.a)(t).some((function(e){return!n.has(e)})))&&(this.selfExpandedIndices=e.slice())}}}}}),y=n("KHd+"),w=Object(y.a)(g,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"accordion"},[this._t("default")],2)}),[],!1,null,null,null).exports,_=(n("yXV3"),n("pDQq"),{components:{Icon:n("WmPt").a},props:{header:{type:null,default:null}},computed:{index:function(){return this.$parent.$children.indexOf(this)},expanded:function(){return-1!==this.$parent.selfExpandedIndices.indexOf(this.index)}},methods:{toggle:function(){if(this.$parent.multiple){var e=this.$parent.selfExpandedIndices.indexOf(this.index);-1===e?this.$parent.selfExpandedIndices.push(this.index):this.$parent.selfExpandedIndices.splice(e,1)}else this.$parent.selfExpandedIndices=this.expanded?[]:[this.index]}}}),k=(n("1e2s"),Object(y.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"accordion-item",class:{expanded:e.expanded}},[n("div",{staticClass:"ai-header-layout",on:{click:e.toggle}},[n("Icon",{staticClass:"ai-icon",attrs:{icon:"chevron-right"}}),e._v(" "),n("div",{staticClass:"ai-header"},[e._t("header"),e._v("\n\t\t\t"+e._s(e.header)+"\n\t\t")],2)],1),e._v(" "),e.expanded?n("div",{staticClass:"ai-content"},[e._t("default")],2):e._e()])}),[],!1,null,null,null).exports),C=n("JQ9H"),x=n("83PK"),j=n("JBdv"),O=n("o7oi");function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var E={components:{UserRoleLabel:x.a,DateDisplay:j.a},props:{workspaces:{type:Array,required:!0}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(c.e)(["course"])),methods:{itemClass:function(e){return"wsl-item-".concat(e.type)},itemRole:function(e){return O.b(O.a(e.role,this.course.role.role))},onItemClick:function(e){this.$emit("item-click",e)},onItemContextMenu:function(e,t){this.$emit("item-context-menu",{item:e,event:t})}}},T=(n("kV00"),Object(y.a)(E,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"workspace-listing"},[e.workspaces.length?e._e():n("div",{staticClass:"wsl-section-empty"},[e._v("No Workspaces")]),e._v(" "),n("div",{staticClass:"wsl-items"},e._l(e.workspaces,(function(t){return n("div",{key:t.id,staticClass:"wsl-item",class:e.itemClass(t),on:{click:function(n){return e.onItemClick(t)},contextmenu:function(n){return n.preventDefault(),e.onItemContextMenu(t,n)}}},[n("div",{staticClass:"wsl-item-gutter"}),e._v(" "),n("div",{staticClass:"wsl-item-content"},[n("div",{staticClass:"wsl-item-group"},[n("div",{staticClass:"wsl-item-title"},[e._v(e._s(t.title))])]),e._v(" "),n("div",{staticClass:"wsl-item-group"},[n("div",[e._v(e._s(e.itemRole(t))+" access")]),e._v(" "),n("div",[e._v("By "),n("span",{staticClass:"wsl-item-author-name"},[e._v(e._s(t.user.name))]),e._v(" "),n("UserRoleLabel",{attrs:{user:t.user,course:e.course}})],1)]),e._v(" "),n("div",{staticClass:"wsl-item-group wsl-item-group-secondary"},[n("div",{attrs:{title:t.created_at}},[e._v("Created "),n("DateDisplay",{attrs:{date:t.created_at,format:"fromNow"}})],1),e._v(" "),t.opened_at?n("div",{attrs:{title:t.opened_at}},[e._v("Opened "),n("DateDisplay",{attrs:{date:t.opened_at,format:"fromNow"}})],1):e._e()])])])})),0)])}),[],!1,null,null,null).exports),I=n("K24h");function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var P={components:{InfiniteScroll:I.a,Accordion:w,AccordionItem:k,Listing:T,UserRoleLabel:x.a},props:{groups:{type:Array,required:!0}},data:function(){return{accordionIndex:-1,displayedGroupsCount:20}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(c.e)(["course"]),{displayedGroups:function(){return this.groups.slice(0,this.displayedGroupsCount)}}),watch:{groups:function(){this.displayedGroupsCount=20}},methods:{onItemClick:function(e){this.$emit("item-click",e)},onItemContextMenu:function(e){this.$emit("item-context-menu",e)},displayMoreGroups:function(){this.displayedGroupsCount=Math.min(this.displayedGroupsCount+20,this.groups.length)}}},A=(n("HTAy"),Object(y.a)(P,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"workspace-all-listing"},[e.groups.length?e._e():n("div",{staticClass:"wsal-section-empty"},[e._v("No Workspaces")]),e._v(" "),n("InfiniteScroll",{on:{trigger:e.displayMoreGroups}},[n("Accordion",{attrs:{"expanded-index":e.accordionIndex},on:{"expanded-index":function(t){e.accordionIndex=t}}},e._l(e.displayedGroups,(function(t){return n("AccordionItem",{key:t.user.id,scopedSlots:e._u([{key:"header",fn:function(){return[n("div",{staticClass:"wsal-name"},[e._v(e._s(t.user.name))]),e._v(" "),n("UserRoleLabel",{staticClass:"wsal-role",attrs:{user:t.user,course:e.course,"show-tutorials":""}}),e._v(" "),n("div",{staticClass:"wsal-count"},[e._v("("+e._s(t.items.length)+")")])]},proxy:!0}],null,!0)},[e._v(" "),n("listing",{attrs:{workspaces:t.items},on:{"item-click":e.onItemClick,"item-context-menu":e.onItemContextMenu}})],1)})),1)],1)],1)}),[],!1,null,null,null).exports),N=n("/Yj0"),R=n("5/Cn"),M=n("hSdx");function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function F(e,t){var n=e.opened_at||e.created_at;return(t.opened_at||t.created_at)-n}var B,q,$={mine:{text:"My Workspaces"},users:{text:"Users"}},U={components:{TabsHeader:u.a,SheetContainer:d.a,Actionbar:h.a,ActionbarAction:p.a,ContextMenu:f.a,ContextMenuItem:m.a,SearchInput:v.a,Spinner:b.a,Accordion:w,AccordionItem:k,Listing:T,AllListing:A},inject:["workspaceApi"],data:function(){return{courseId:null,loading:!1,workspaces:[],searchQuery:"",accordionIndex:0,selectedTab:$.mine,tabs:$,tabsList:[$.mine,$.users],menuWorkspaceItem:null,menuVisible:!1,menuX:0,menuY:0}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(c.e)(["user","course"]),{},Object(c.c)(["isStaff","getDisplayRoleLabel"]),{searchPlaceholder:function(){return this.selectedTab===$.users?"Search users":"Search workspaces"},allWorkspaceItemsFiltered:function(){var e=this.searchQuery.toLowerCase();return this.workspaces.filter((function(t){return t.title.toLowerCase().includes(e)})).sort(F)},recentWorkspaceItemsFiltered:function(){return this.allWorkspaceItemsFiltered.filter((function(e){return e.opened_at}))},myWorkspaceItemsFiltered:function(){var e=this;return this.allWorkspaceItemsFiltered.filter((function(t){return t.user_id===e.user.id}))},sharedWorkspaceItemsFiltered:function(){var e=this;return this.allWorkspaceItemsFiltered.filter((function(t){return t.user_id!==e.user.id&&t.role}))},publicWorkspaceItemsFiltered:function(){return this.allWorkspaceItemsFiltered.filter((function(e){return e.is_public}))},workspaceItemsByUserFiltered:function(){var e=this,t=this.searchQuery.trim().toLowerCase().split(/\s+/),n=new Map,s=!0,i=!1,r=void 0;try{for(var l,c=this.workspaces[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var u=l.value;if(!n.has(u.user))if("continue"===function(){for(var s=u.user.name+e.getDisplayRoleLabel(u.user.course_role,e.course),i=0,r=Object.keys(u.user.tutorials||{});i<r.length;i++){var a=r[i];s+=u.user.tutorials[a]}if(s=s.toLowerCase(),!t.every((function(e){return s.includes(e)})))return"continue";n.set(u.user,[])}())continue;n.get(u.user).push(u)}}catch(d){i=!0,r=d}finally{try{s||null==c.return||c.return()}finally{if(i)throw r}}return Object(o.a)(n).map((function(e){var t=Object(a.a)(e,2);return{user:t[0],items:t[1].sort(F)}})).sort((function(e,t){return M.naturalComparator(e.user.name,t.user.name)}))},menuWorkspaceItemEditDisabled:function(){return!this.menuWorkspaceItem||"admin"!==O.a(this.menuWorkspaceItem.role,this.course.role.role)}}),watch:{$route:"update",selectedTab:function(){this.searchQuery=""}},created:function(){this.update()},methods:{update:function(){if(this.course.id!==this.courseId)return this.courseId=this.course.id,this.workspaces=[],this.users=[],this.refresh()},refresh:(q=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loading){e.next=2;break}return e.abrupt("return",this.loading);case 2:return this.loading=this.workspaceApi.getWorkspaces(this.course.id),e.prev=3,e.next=6,this.loading;case 6:this.workspaces=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),N.b({type:"error",text:"Unable to fetch workspaces."});case 12:return e.prev=12,this.loading=null,e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[3,9,12,15]])}))),function(){return q.apply(this,arguments)}),showNewWorkspaceSheet:function(){var e=this;this.$refs.sheetContainer.showSheet(C.a,(function(t){e.$refs.sheetContainer.closeSheet(),t&&e.$router.push({name:"workspace-show",params:{workspaceId:t.id}})}))},deleteWorkspaceItem:(B=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.b({title:"Delete workspace?",text:'You are about to delete the workspace "'.concat(t.title,'" and all of its contents. If this workspace is shared with other people, it will be deleted for them too. This cannot be undone.'),icon:"warning",primaryAction:"Delete",secondaryAction:"Cancel"});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,this.workspaceApi.deleteWorkspace(t.id);case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(4),N.b({type:"error",text:"Unable to delete workspace."}),e.abrupt("return");case 13:this.workspaces=this.workspaces.filter((function(e){return e!==t})),N.b({type:"success",text:"Workspace deleted."});case 15:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(e){return B.apply(this,arguments)}),editWorkspaceItem:function(e){var t=this,n=(this.$createElement,{render:function(){var t=this,n=arguments[0];return n(C.a,{attrs:{workspace:e},on:{done:function(e){return t.$emit("done",e)}}})}});this.$refs.sheetContainer.showSheet(n,(function(n){t.$refs.sheetContainer.closeSheet(),n&&(e.title=n.title,e.type=n.type)}))},onItemClick:function(e){this.$router.push({name:"workspace-show",params:{workspaceId:e.id}})},onItemContextMenu:function(e){var t=e.item,n=e.event;this.menuWorkspaceItem=t,this.menuVisible=!0,this.menuX=n.clientX+window.pageXOffset,this.menuY=n.clientY+window.pageYOffset}}},z=(n("281K"),Object(y.a)(U,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"workspace-index"},[n("div",{staticClass:"page-heading-container"},[n("h1",{staticClass:"page-heading"},[e._v("Workspaces")]),e._v(" "),e.isStaff?n("TabsHeader",{attrs:{tabs:e.tabsList},model:{value:e.selectedTab,callback:function(t){e.selectedTab=t},expression:"selectedTab"}}):e._e()],1),e._v(" "),n("div",{staticClass:"wsi-container"},[n("Actionbar",{staticClass:"page-heading-actions",scopedSlots:e._u([{key:"primary",fn:function(){return[n("ActionbarAction",{attrs:{icon:"reload"},on:{click:e.refresh}},[e._v("Refresh")]),e._v(" "),n("ActionbarAction",{staticClass:"primary",on:{click:e.showNewWorkspaceSheet}},[e._v("New Workspace")])]},proxy:!0},{key:"secondary",fn:function(){return[n("SearchInput",{attrs:{placeholder:e.searchPlaceholder},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}})]},proxy:!0}])}),e._v(" "),e.loading?n("Spinner",{staticClass:"wsi-spinner"}):[e.selectedTab===e.tabs.mine?n("Accordion",{staticClass:"wsi-accordion",attrs:{"expanded-index":e.accordionIndex},on:{"expanded-index":function(t){e.accordionIndex=t}}},[n("AccordionItem",{attrs:{header:"Recent ("+e.recentWorkspaceItemsFiltered.length+")"}},[n("listing",{staticClass:"wsi-listing",attrs:{workspaces:e.recentWorkspaceItemsFiltered},on:{"item-click":e.onItemClick,"item-context-menu":e.onItemContextMenu}})],1),e._v(" "),n("AccordionItem",{attrs:{header:"Created by Me ("+e.myWorkspaceItemsFiltered.length+")"}},[n("listing",{staticClass:"wsi-listing",attrs:{workspaces:e.myWorkspaceItemsFiltered},on:{"item-click":e.onItemClick,"item-context-menu":e.onItemContextMenu}})],1),e._v(" "),n("AccordionItem",{attrs:{header:"Shared with Me ("+e.sharedWorkspaceItemsFiltered.length+")"}},[n("listing",{staticClass:"wsi-listing",attrs:{workspaces:e.sharedWorkspaceItemsFiltered},on:{"item-click":e.onItemClick,"item-context-menu":e.onItemContextMenu}})],1),e._v(" "),n("AccordionItem",{attrs:{header:"Public ("+e.publicWorkspaceItemsFiltered.length+")"}},[n("listing",{staticClass:"wsi-listing",attrs:{workspaces:e.publicWorkspaceItemsFiltered},on:{"item-click":e.onItemClick,"item-context-menu":e.onItemContextMenu}})],1)],1):e._e(),e._v(" "),e.selectedTab===e.tabs.users?n("AllListing",{staticClass:"wsi-all-listing",attrs:{groups:e.workspaceItemsByUserFiltered},on:{"item-click":e.onItemClick,"item-context-menu":e.onItemContextMenu}}):e._e()]],2),e._v(" "),n("SheetContainer",{ref:"sheetContainer",staticClass:"wsi-sheet-container"}),e._v(" "),e.menuVisible?n("ContextMenu",{attrs:{"target-left":e.menuX,"target-top":e.menuY},on:{close:function(t){e.menuVisible=!1}}},[n("ContextMenuItem",{key:"delete",attrs:{text:"Delete",disabled:e.menuWorkspaceItemEditDisabled},on:{click:function(t){return e.deleteWorkspaceItem(e.menuWorkspaceItem)}}}),e._v(" "),n("ContextMenuItem",{key:"edit",attrs:{text:"Edit",disabled:e.menuWorkspaceItemEditDisabled},on:{click:function(t){return e.editWorkspaceItem(e.menuWorkspaceItem)}}})],1):e._e()],1)}),[],!1,null,null,null));t.default=z.exports},Y9Wh:function(e,t,n){},YExr:function(e,t,n){"use strict";var s=n("Wn1A");n.n(s).a},YFHs:function(e,t,n){},"YK/l":function(e,t,n){},YLae:function(e,t,n){"use strict";var s=n("ee8O");n.n(s).a},YLrK:function(e,t,n){},YPfv:function(e,t,n){},YQsj:function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("0oug"),n("4mDm"),n("07d7"),n("PKPk"),n("3bBZ");var s=n("bdgK"),i=n("VlpE"),r=n("Kaxq"),a=n("Yswc"),o=n("db+F"),l=n("/lWA"),c=(n("ma9I"),n("yyme"),n("pjDv"),n("+2oP"),n("pDQq"),n("T63A"),n("U3f4"),n("SYor"),n("ODXe")),u=n("KQm4"),d=n("1OyB"),h=n("vuIU"),p=n("clw3"),f=n("hSdx"),m=function(){function e(t){Object(d.a)(this,e),this.terminal=t,this.x0=0,this.y0=0,this.x1=0,this.y1=0}return Object(h.a)(e,[{key:"isEmpty",value:function(){return this.x0===this.x1&&this.y0===this.y1}},{key:"setStart",value:function(e,t){if(e!==this.x0||t!==this.y0){var n=this.y0,s=[e,t];this.x0=s[0],this.y0=s[1];for(var i=t;i<=n;i++)this.terminal.invalidateLine(i)}}},{key:"setEnd",value:function(e,t){if(e!==this.x1||t!==this.y1){var n=this.y1,s=[e,t];this.x1=s[0],this.y1=s[1];for(var i=t;i<=n;i++)this.terminal.invalidateLine(i)}}},{key:"clear",value:function(){this.setStartEnd(0,0,0,0)}},{key:"setStartEnd",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,i=[this.y0,this.y1],r=i[0],a=i[1];if(s<t||s===t&&n<e){var o=[n,s,e,t];this.x0=o[0],this.y0=o[1],this.x1=o[2],this.y1=o[3]}else{var l=[e,t,n,s];this.x0=l[0],this.y0=l[1],this.x1=l[2],this.y1=l[3]}r=Math.min(r,this.y0),a=Math.max(a,this.y1);for(var c=r;c<=a;c++)this.terminal.invalidateLine(c)}},{key:"isInside",value:function(e,t){return!(this.y0>t||t>this.y1)&&(this.y0<t&&t<this.y1||(this.y0===this.y1?this.x0<=e&&e<this.x1:t===this.y0?this.x0<=e:e<this.x1))}}]),e}(),v=(n("Rm1S"),n("UxlC"),n("rePB")),b=n("7W7u"),g=n("9Arg"),y=1,w=2,_=4,k=8,C=16,x=32,j=64,O=0,S=1,E="",T="\b",I="\t",D="\n",P="\v",A="\f",N="\r",R="",M="",L="",F="",B="",q="",$="",U=(n("2B1R"),n("JfAA"),n("EnZy"),n("9EUN"));function z(e){return U(e)||1}function V(e){return{foreground:511&e,background:e>>9&511,flags:e>>18}}function H(e,t,n){return e|t<<9|n<<18}var W,Q,K=function(){function e(){Object(d.a)(this,e)}return Object(h.a)(e,[{key:"init",value:function(e,t,n){this.cols=t,this.rows=n,this.style=getComputedStyle(e);var s=document.createElement("span");s.style.visibility="hidden",s.style.fontFamily=this.style.fontFamily,s.style.fontSize=this.style.fontSize,s.style.lineHeight=this.style.lineHeight,s.style.display="inline-block",s.textContent="0",document.body.appendChild(s),this.charWidth=s.clientWidth,this.charHeight=s.clientHeight,s.remove(),this.canvas=document.createElement("canvas"),this.canvas.className="term-display",this.canvas.style.verticalAlign="top",this.canvas.width=100,this.canvas.height=100,e.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.ctx.font="".concat(this.style.fontSize," ").concat(this.style.fontFamily);var i=Math.min(window.devicePixelRatio||1,4),r=g.p(this.ctx,"backingStorePixelRatio")||1;this.ratio=i/r,this.resizeCanvas(this.charWidth*t,this.charHeight*n)}},{key:"resizeCanvas",value:function(e,t){this.canvas.width=Math.ceil(e*this.ratio),this.canvas.height=Math.ceil(t*this.ratio),this.canvas.style.width=e+"px",this.canvas.style.height=t+"px",this.ctx.textBaseline="middle",this.ctx.font="".concat(this.style.fontSize," ").concat(this.style.fontFamily),this.ctx.lineWidth=Math.ceil(this.ratio),this.ctx.textAlign="center"}},{key:"resize",value:function(e,t){e===this.cols&&t===this.rows||(this.cols=e,this.rows=t,this.resizeCanvas(this.charWidth*e,this.charHeight*t))}},{key:"gridToPixel",value:function(e,t){return{x:Math.floor(e*this.charWidth),y:Math.floor(t*this.charHeight)}}},{key:"pixelToGrid",value:function(e,t){return{x:Math.floor((e+this.charWidth/2)/this.charWidth),y:Math.floor(t/this.charHeight)}}},{key:"getTerminalSizeFromPixels",value:function(e,t){return{cols:Math.max(Math.floor(e/this.charWidth),1),rows:Math.max(Math.floor(t/this.charHeight),1)}}},{key:"renderLine",value:function(e,t,n,s,i,r,a,o,l){for(var c=[],u=null,d=0;d<this.cols;){var h=n[2*d+O],p=V(n[2*d+S]),f=p.foreground,m=p.background,v=p.flags,b=s.foreground,g=s.background,w=void 0,_=void 0;if(o.isInside(d,e+t))w=s.selectionFg,_=s.selectionBg;else{if(v&C){var k=[m,f,g,b];f=k[0],m=k[1],b=k[2],g=k[3]}v&y&&0<=f&&f<=7&&(f+=8),w=f>255?b:s.palette[f],_=m>255?g:s.palette[m]}a&&e===r&&d===i&&(v|=j),v&=~C;var E=z(h),T=this.cols-d>=E;if(T)for(var I=d+1;I<d+E;I++)if(!V(n[2*I+S]).flags&x){T=!1;break}var D=T?h:" ";0===d||w!==u.fg||_!==u.bg||v!==u.flags?(u={text:D,fg:w,bg:_,cursorFg:s.cursorFg||_,cursorBg:s.cursorBg||w,flags:v},c.push(u)):u.text+=D,d+=T?E:1}this.renderBlocks(c,e,l)}},{key:"renderBlocks",value:function(e,t,n){var s=0,i=!0,r=!1,a=void 0;try{for(var o,l=e[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value;this.renderBlock(c,s,t,n),s+=z(c.text)}}catch(u){r=!0,a=u}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}}},{key:"renderBlock",value:function(e,t,n,s){this.ctx.save();var i=Math.floor(t*this.charWidth*this.ratio),r=Math.floor(n*this.charHeight*this.ratio),a=Math.ceil((t+z(e.text))*this.charWidth*this.ratio),o=Math.ceil((n+1)*this.charHeight*this.ratio);this.ctx.fillStyle=e.flags&j&&s?e.cursorBg:e.bg,this.ctx.fillRect(i,r,a-i+1,o-r+1),e.flags&j&&!s&&(this.ctx.strokeStyle=e.cursorBg,this.ctx.beginPath(),this.ctx.rect(i,r+1,a-i-2,o-r-2),this.ctx.stroke()),e.flags&w&&(this.ctx.globalAlpha=.5),this.ctx.fillStyle=e.flags&j&&s?e.cursorFg:e.fg,e.flags&y&&(this.ctx.font="bold "+this.ctx.font),this.ctx.save(),this.ctx.scale(this.ratio,this.ratio);for(var l=0,c=Array.from(e.text);l<c.length;l++){var u=c[l],d=z(u);this.ctx.fillText(u,(t+d/2)*this.charWidth,(n+.5)*this.charHeight),t+=d}if(this.ctx.restore(),e.flags&_){this.ctx.strokeStyle=e.fg,this.ctx.beginPath();var h=Math.ceil(r+.85*(o-r));this.ctx.moveTo(i,h),this.ctx.lineTo(a,h),this.ctx.stroke()}this.ctx.restore()}}]),e}(),Y=/Mac/.test(navigator.platform||navigator.oscpu),G=8,X=9,J=27,Z=33,ee=34,te=35,ne=36,se=37,ie=38,re=39,ae=40,oe=45,le=46,ce=112,ue=113,de=114,he=115,pe=116,fe=117,me=118,ve=119,be=120,ge=121,ye=122,we=123,_e=(W={},Object(v.a)(W,ie,"A"),Object(v.a)(W,ae,"B"),Object(v.a)(W,re,"C"),Object(v.a)(W,se,"D"),Object(v.a)(W,ne,"H"),Object(v.a)(W,te,"F"),Object(v.a)(W,X,"Z"),Object(v.a)(W,oe,"2~"),Object(v.a)(W,le,"3~"),Object(v.a)(W,Z,"5~"),Object(v.a)(W,ee,"6~"),Object(v.a)(W,ce,"P"),Object(v.a)(W,ue,"Q"),Object(v.a)(W,de,"R"),Object(v.a)(W,he,"S"),Object(v.a)(W,pe,"15~"),Object(v.a)(W,fe,"17~"),Object(v.a)(W,me,"18~"),Object(v.a)(W,ve,"19~"),Object(v.a)(W,be,"20~"),Object(v.a)(W,ge,"21~"),Object(v.a)(W,ye,"23~"),Object(v.a)(W,we,"24~"),W),ke=function(){function e(t){Object(d.a)(this,e),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleKeyPress=this.handleKeyPress.bind(this),this.handleInput=this.handleInput.bind(this),this.handleCutCopy=this.handleCutCopy.bind(this),this.handlePaste=this.handlePaste.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.handleScroll=this.handleScroll.bind(this),this.handleFocus=this.handleFocus.bind(this),this.handleBlur=this.handleBlur.bind(this),this.handleCompositionStart=this.handleCompositionStart.bind(this),this.handleCompositionUpdate=this.handleCompositionUpdate.bind(this),this.handleCompositionEnd=this.handleCompositionEnd.bind(this),this.terminal=t,this.selecting=!1,this.selectionStart=null,this.focused=!1,this.ignoreDisplayScroll=!1,this.updateRequested=!1,this.composing=!1,this.compositionPreview="",this.compositionPreviewX=-1,this.compositionPreviewY=-1,this.element=document.createElement("div"),this.element.style.display="block",this.element.style.position="absolute",this.element.style.cursor="text",this.element.style.left=0,this.element.style.top=0,this.element.style.right=0,this.element.style.bottom=0,this.element.style.paddingTop="2px",this.element.style.paddingRight="12px",this.element.style.paddingBottom="2px",this.element.style.paddingLeft="4px",this.element.addEventListener("mousedown",this.handleMouseDown),this.screen=document.createElement("div"),this.screen.style.position="absolute",this.screen.style.top="2px",this.screen.style.left="4px",this.element.appendChild(this.screen),this.textarea=document.createElement("textarea"),this.textarea.setAttribute("autocomplete","off"),this.textarea.setAttribute("autocapitalize","none"),this.textarea.setAttribute("spellcheck","false"),this.textarea.style.pointerEvents="none",this.textarea.style.position="absolute",this.textarea.style.left=0,this.textarea.style.top=0,this.textarea.style.width="200px",this.textarea.style.padding=0,this.textarea.style.margin=0,this.textarea.style.opacity=0,this.screen.appendChild(this.textarea),this.textarea.addEventListener("keydown",this.handleKeyDown),this.textarea.addEventListener("keypress",this.handleKeyPress),this.textarea.addEventListener("input",this.handleInput),this.textarea.addEventListener("cut",this.handleCutCopy),this.textarea.addEventListener("copy",this.handleCutCopy),this.textarea.addEventListener("paste",this.handlePaste),this.textarea.addEventListener("focus",this.handleFocus),this.textarea.addEventListener("blur",this.handleBlur),this.textarea.addEventListener("compositionstart",this.handleCompositionStart),this.textarea.addEventListener("compositionupdate",this.handleCompositionUpdate),this.textarea.addEventListener("compositionend",this.handleCompositionEnd),this.scrollGlass=document.createElement("div"),this.scrollGlass.style.overflowY="auto",this.scrollGlass.style.overflowX="hidden",this.scrollGlass.style.position="absolute",this.scrollGlass.style.left=0,this.scrollGlass.style.top=0,this.scrollGlass.style.right=0,this.scrollGlass.style.bottom=0,this.element.appendChild(this.scrollGlass),this.scrollSpacer=document.createElement("div"),this.scrollSpacer.style.height="0px",this.scrollGlass.appendChild(this.scrollSpacer),this.scrollSpacer.style.overflow="hidden",this.scrollGlass.addEventListener("scroll",this.handleScroll),this.scrollSpacer.innerHTML="​",this.renderer=new K(this.element,this.terminal.cols,this.terminal.rows),this.renderer.init(this.element,this.terminal.cols,this.terminal.rows)}return Object(h.a)(e,[{key:"handleKeyDown",value:function(e){if(!this.terminal.readonly){this.updateTextareaPosition();var t=e.keyCode,n=String.fromCharCode(t),s=null;if(Y?e.metaKey:e.ctrlKey&&e.altKey){switch(n){case"A":return e.preventDefault(),void this.terminal.selectAll()}if(!Y)switch(n){case"C":e.preventDefault();try{document.execCommand("copy")}catch(i){}return}}switch(t){case ie:case re:case ae:case se:case ne:case te:s=this.terminal.modes.decckm?"O":"[",s+=_e[t];break;case X:s=e.shiftKey?"["+_e[t]:n;break;case G:s=e.shiftKey?n:q;break;case J:s=n;break;default:if(e.ctrlKey&&!e.shiftKey&&"A"<=n&&n<="Z"&&"V"!==n)s=String.fromCharCode(t-"A".charCodeAt(0)+1);else if(_e[t]){s=(/~$/.test(s=_e[t])?"[":"O")+s}}s&&(e.preventDefault(),this.terminal.selection.clear(),this.terminal.displayScrollToBottom(),this.terminal.emitInput(s))}}},{key:"handleKeyPress",value:function(e){if(!this.terminal.readonly&&!e.metaKey&&!e.ctrlKey){var t=e.charCode||e.keyCode,n=String.fromCharCode(t);e.preventDefault(),this.terminal.selection.clear(),this.terminal.displayScrollToBottom(),this.terminal.emitInput(n)}}},{key:"handleInput",value:function(e){this.terminal.readonly||this.composing||(e.preventDefault(),this.textarea.value="",e.data&&this.terminal.emitInput(e.data))}},{key:"handleCutCopy",value:function(e){e.clipboardData&&(e.preventDefault(),e.stopPropagation(),e.clipboardData.setData("text/plain",this.terminal.getSelectedText()))}},{key:"handlePaste",value:function(e){if(!this.terminal.readonly){e.preventDefault(),e.stopPropagation();var t=e.clipboardData.getData("text");t&&(t=t.replace(/\r?\n/g,"\r"),this.terminal.emitInput(t))}}},{key:"handleMouseDown",value:function(e){if(!b.c(e)&&e.button===b.a){e.preventDefault(),this.textarea.select();var t=g.s(this.screen,e.pageX,e.pageY),n=this.renderer.pixelToGrid(t.x,t.y);switch(e.detail){case 1:this.terminal.selection.setStartEnd(n.x,this.terminal.ydisplay+n.y);break;case 2:for(var s=this.terminal.getLine(this.terminal.ydisplay+n.y),i=s[2*n.x+O],r=/\s/.test(i)?/\s/:/\w/.test(i)?/\w/:/(?=\S)(?=\W)/,a=n.x;a>0&&s[2*(a-1)+O].match(r);)a--;for(var o=n.x+1;o<this.terminal.cols&&s[2*o+O].match(r);)o++;this.terminal.selection.setStartEnd(a,this.terminal.ydisplay+n.y,o,this.terminal.ydisplay+n.y);break;default:this.terminal.selection.setStartEnd(0,this.terminal.ydisplay+n.y,this.terminal.cols,this.terminal.ydisplay+n.y)}this.selecting=!0,this.selectionStart={x:this.terminal.selection.x0,y:this.terminal.selection.y0},document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}}},{key:"handleMouseMove",value:function(e){if(this.selecting){e.preventDefault();var t=g.s(this.screen,e.pageX,e.pageY),n=this.renderer.pixelToGrid(t.x,t.y);n.y>=this.terminal.rows?(n.y=this.terminal.rows-1,n.x=this.terminal.cols-1):n.y<0?(n.y=0,n.x=0):n.x>=this.terminal.cols?n.x=this.terminal.cols-1:n.x<0&&(n.x=0);var s=n.x,i=this.terminal.ydisplay+n.y;this.terminal.selection.setStartEnd(this.selectionStart.x,this.selectionStart.y,s,i)}}},{key:"handleMouseUp",value:function(e){e.preventDefault(),this.selecting=!1,this.selectionStart=null,document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp)}},{key:"handleScroll",value:function(){if(this.ignoreDisplayScroll)this.ignoreDisplayScroll=!1;else{var e=this.scrollGlass.scrollTop/(this.scrollGlass.scrollHeight-this.scrollGlass.clientHeight)||0,t=Math.round(e*(this.terminal.lines.length-this.terminal.rows));this.terminal.setDisplayScroll(t,!1)}}},{key:"handleFocus",value:function(){this.focused=!0,this.terminal.invalidateScreenLine(this.terminal.y),this.textarea.value=" "}},{key:"handleBlur",value:function(){this.focused=!1,this.terminal.invalidateScreenLine(this.terminal.y)}},{key:"handleCompositionStart",value:function(){this.composing=!0,this.updateCompositionPreviewPosition(),this.invalidateCompositionPreview()}},{key:"handleCompositionUpdate",value:function(e){this.compositionPreview=e.data,this.invalidateCompositionPreview(),this.updateCompositionPreviewPosition(),this.invalidateCompositionPreview(),this.updateTextareaPosition()}},{key:"handleCompositionEnd",value:function(e){this.composing=!1,this.invalidateCompositionPreview(),this.compositionPreviewY=-1,this.compositionPreview="",this.textarea.value="",this.terminal.emitInput(e.data)}},{key:"updateDisplayScrollUi",value:function(){var e=Math.floor(this.scrollGlass.clientHeight/this.renderer.rows*this.terminal.lines.length),t=e+"px";t!==this.scrollSpacer.style.height&&(this.ignoreDisplayScroll=!0,this.scrollSpacer.style.height=t);var n=this.terminal.ydisplay/this.terminal.lines.length*e||0;n!==this.scrollGlass.scrollTop&&(this.ignoreDisplayScroll=!0,this.scrollGlass.scrollTop=n)}},{key:"getIdealSize",value:function(e,t){return e-=16,t-=4,this.renderer.getTerminalSizeFromPixels(e,t)}},{key:"resize",value:function(e,t){this.ignoreDisplayScroll=!0,this.renderer.resize(e,t)}},{key:"overlayCompositionPreview",value:function(e,t,n){if(e=e.slice(),n<this.terminal.cols){var s=V(e[2*n+S]);s.flags&=~x,s.flags|=_;var i=H(s.foreground,s.background,s.flags);s.flags|=x;for(var r=H(s.foreground,s.background,s.flags),a=0,o=Array.from(t);a<o.length;a++){var l=o[a];if(n>=this.terminal.cols)break;var c=z(l);e[2*n+O]=l,e[2*n+S]=i,n++;for(var u=1;u<c&&!(n>=this.terminal.cols);u++)e[2*n+S]=r,n++}}return e}},{key:"renderLine",value:function(e,t,n,s,i,r,a,o){this.composing&&(i=this.compositionPreviewX+z(this.compositionPreview),r=this.compositionPreviewY,this.compositionPreview&&this.compositionPreviewY===e&&(n=this.overlayCompositionPreview(n,this.compositionPreview,this.compositionPreviewX))),this.renderer.renderLine(e,t,n,s,i,r,a,o,this.focused)}},{key:"focus",value:function(){this.textarea.focus()}},{key:"update",value:function(){var e=this;this.updateRequested||(this.updateRequested=!0,g.I((function(){e.updateRequested=!1,e.render()})))}},{key:"render",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!this.terminal.readonly&&this.terminal.modes.dectcem,n=0;n<this.terminal.rows;n++)if(e||this.terminal.dirty[n]){var s=this.terminal.lines[this.terminal.ydisplay+n]||this.terminal.blankLine();this.renderLine(n,this.terminal.ydisplay,s,this.terminal.colors,this.terminal.x,this.terminal.y+this.terminal.yscreen-this.terminal.ydisplay,t,this.terminal.selection),this.terminal.dirty[n]=!1}}},{key:"updateCompositionPreviewPosition",value:function(){this.compositionPreviewX=this.terminal.x,this.compositionPreviewY=this.terminal.y,z(this.compositionPreview)>this.terminal.cols-this.compositionPreviewX&&this.compositionPreviewY<this.terminal.rows-1&&(this.compositionPreviewX=0,this.compositionPreviewY++)}},{key:"invalidateCompositionPreview",value:function(){0<=this.compositionPreviewY&&this.compositionPreviewY<this.terminal.rows&&(this.terminal.dirty[this.compositionPreviewY]=!0,this.update())}},{key:"updateTextareaPosition",value:function(){var e,t;this.composing?(e=this.compositionPreviewX,t=this.compositionPreviewY):(e=this.terminal.x,t=this.terminal.y);var n=this.renderer.gridToPixel(e,t);this.textarea.style.left=n.x+"px",this.textarea.style.top=n.y+"px"}}]),e}(),Ce=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.log.apply(f,["TERMINAL","rgb(140, 40, 220)"].concat(t))},xe="D",je="E",Oe="H",Se="M",Ee="7",Te="8",Ie="[",De="]",Pe=">",Ae="=",Ne="(",Re=")",Me="@",Le="A",Fe="B",Be="C",qe="D",$e="E",Ue="F",ze="G",Ve="H",He="J",We="K",Qe="L",Ke="M",Ye="P",Ge="S",Xe="T",Je="X",Ze="c",et="d",tt="e",nt="f",st="g",it="h",rt="l",at="m",ot="n",lt="r",ct=["#000000","#800000","#008000","#808000","#000080","#800080","#008080","#c0c0c0","#808080","#ff0000","#00ff00","#ffff00","#0000ff","#ff00ff","#00ffff","#ffffff","#000000","#00005f","#000087","#0000af","#0000d7","#0000ff","#005f00","#005f5f","#005f87","#005faf","#005fd7","#005fff","#008700","#00875f","#008787","#0087af","#0087d7","#0087ff","#00af00","#00af5f","#00af87","#00afaf","#00afd7","#00afff","#00d700","#00d75f","#00d787","#00d7af","#00d7d7","#00d7ff","#00ff00","#00ff5f","#00ff87","#00ffaf","#00ffd7","#00ffff","#5f0000","#5f005f","#5f0087","#5f00af","#5f00d7","#5f00ff","#5f5f00","#5f5f5f","#5f5f87","#5f5faf","#5f5fd7","#5f5fff","#5f8700","#5f875f","#5f8787","#5f87af","#5f87d7","#5f87ff","#5faf00","#5faf5f","#5faf87","#5fafaf","#5fafd7","#5fafff","#5fd700","#5fd75f","#5fd787","#5fd7af","#5fd7d7","#5fd7ff","#5fff00","#5fff5f","#5fff87","#5fffaf","#5fffd7","#5fffff","#870000","#87005f","#870087","#8700af","#8700d7","#8700ff","#875f00","#875f5f","#875f87","#875faf","#875fd7","#875fff","#878700","#87875f","#878787","#8787af","#8787d7","#8787ff","#87af00","#87af5f","#87af87","#87afaf","#87afd7","#87afff","#87d700","#87d75f","#87d787","#87d7af","#87d7d7","#87d7ff","#87ff00","#87ff5f","#87ff87","#87ffaf","#87ffd7","#87ffff","#af0000","#af005f","#af0087","#af00af","#af00d7","#af00ff","#af5f00","#af5f5f","#af5f87","#af5faf","#af5fd7","#af5fff","#af8700","#af875f","#af8787","#af87af","#af87d7","#af87ff","#afaf00","#afaf5f","#afaf87","#afafaf","#afafd7","#afafff","#afd700","#afd75f","#afd787","#afd7af","#afd7d7","#afd7ff","#afff00","#afff5f","#afff87","#afffaf","#afffd7","#afffff","#d70000","#d7005f","#d70087","#d700af","#d700d7","#d700ff","#d75f00","#d75f5f","#d75f87","#d75faf","#d75fd7","#d75fff","#d78700","#d7875f","#d78787","#d787af","#d787d7","#d787ff","#d7af00","#d7af5f","#d7af87","#d7afaf","#d7afd7","#d7afff","#d7d700","#d7d75f","#d7d787","#d7d7af","#d7d7d7","#d7d7ff","#d7ff00","#d7ff5f","#d7ff87","#d7ffaf","#d7ffd7","#d7ffff","#ff0000","#ff005f","#ff0087","#ff00af","#ff00d7","#ff00ff","#ff5f00","#ff5f5f","#ff5f87","#ff5faf","#ff5fd7","#ff5fff","#ff8700","#ff875f","#ff8787","#ff87af","#ff87d7","#ff87ff","#ffaf00","#ffaf5f","#ffaf87","#ffafaf","#ffafd7","#ffafff","#ffd700","#ffd75f","#ffd787","#ffd7af","#ffd7d7","#ffd7ff","#ffff00","#ffff5f","#ffff87","#ffffaf","#ffffd7","#ffffff","#080808","#121212","#1c1c1c","#262626","#303030","#3a3a3a","#444444","#4e4e4e","#585858","#626262","#6c6c6c","#767676","#808080","#8a8a8a","#949494","#9e9e9e","#a8a8a8","#b2b2b2","#bcbcbc","#c6c6c6","#d0d0d0","#dadada","#e4e4e4","#eeeeee"],ut=0,dt=1,ht=2,pt=3,ft=4,mt=0,vt=1,bt={NORMAL:0,ALTERATE:1},gt={DECCKM:1,LNM:20},yt={DECCKM:1,DECANM:2,DECCOLM:3,DECSCLM:4,DECSCNM:5,DECOM:6,DECAWM:7,DECARM:8,DECTCEM:25},wt=function(){function e(t,n){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(d.a)(this,e),this.emitter=new p.c,this.cols=t,this.rows=n,this.defaultAttr=H(256,256,0),this.mode=bt.NORMAL,this.modeData={},this.decscState=null,this.modes={decckm:!1,decpnm:!1,decpam:!1,dectcem:!0,lnm:!1},this.readonly=!1,this.debug=s.debug||!1,this.scrollbackLines=s.scrollbackLines||1e4,this.selection=new m(this),this.view=new ke(this),this.reset(),this.setColors(null),this.debug&&(this.debugDiv=document.createElement("div"),this.debugDiv.style.position="fixed",this.debugDiv.style.width="200px",this.debugDiv.style.top=0,this.debugDiv.style.bottom=0,this.debugDiv.style.right=0,this.debugDiv.style.zIndex=1e4,this.debugDiv.style.backgroundColor="black",this.debugDiv.style.color="white",this.debugDiv.style.fontFamily="monospace",this.debugDiv.style.overflowY="auto",this.debugDiv.style.overflowX="hidden",this.debugDiv.style.wordBreak="break-all",this.debugDiv.style.whiteSpace="pre-wrap",document.body.appendChild(this.debugDiv))}return Object(h.a)(e,[{key:"setColors",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.colors={palette:ct.slice(),foreground:"#ffffff",background:"#000000",cursorFg:null,cursorBg:null,selectionFg:"#000000",selectionBg:"#ffffff"},e){this.colors.foreground=e.foreground,this.colors.background=e.background,this.colors.cursorFg=e.cursorFg,this.colors.cursorBg=e.cursorBg,this.colors.selectionFg=e.selectionFg,this.colors.selectionBg=e.selectionBg;for(var t=0;t<16;t++)this.colors.palette[t]=e.palette[t]}this.invalidateDisplay()}},{key:"onTitleDidChange",value:function(e){return this.emitter.on("titleDidChange",e)}},{key:"onBell",value:function(e){return this.emitter.on("bell",e)}},{key:"onInput",value:function(e){return this.emitter.on("input",e)}},{key:"emitTitleDidChange",value:function(e){this.emitter.emit("titleDidChange",e)}},{key:"emitBell",value:function(){this.emitter.emit("bell")}},{key:"emitInput",value:function(e){this.emitter.emit("input",e)}},{key:"focus",value:function(){this.view.focus()}},{key:"update",value:function(){this.view.update()}},{key:"setReadonly",value:function(e){this.readonly!==e&&(this.readonly=e,this.invalidateScreenLine(this.y),this.update())}},{key:"displayScrollToBottom",value:function(){this.setDisplayScroll(Math.max(0,this.lines.length-this.rows))}},{key:"setDisplayScroll",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e!==this.ydisplay&&(this.ydisplay=e,t&&this.view.updateDisplayScrollUi(),this.invalidateDisplay())}},{key:"invalidateLine",value:function(e){var t=e-this.ydisplay;this.invalidateDisplayLine(t)}},{key:"invalidateScreenLine",value:function(e){var t=e+this.yscreen-this.ydisplay;this.invalidateDisplayLine(t)}},{key:"invalidateDisplayLine",value:function(e){0<=e&&e<this.rows&&(this.dirty[e]=!0,this.update())}},{key:"invalidateDisplay",value:function(){for(var e=0;e<this.rows;e++)this.dirty[e]=!0;this.update()}},{key:"getSelectedText",value:function(){for(var e="",t=this.selection.y0;t<=this.selection.y1;t++){var n=t===this.selection.y0?this.selection.x0:0,s=t===this.selection.y1?this.selection.x1:this.cols;if(n>s){var i=[s,n];n=i[0],s=i[1]}for(var r=this.getLine(t),a="",o=n;o<s;o++)V(r[2*o+S]).flags&x||(a+=r[2*o+O]);e+=a.trim(),t!==this.selection.y1&&(e+="\n")}return e}},{key:"selectAll",value:function(){this.selection.setStartEnd(0,0,this.cols,this.lines.length-1)}},{key:"getLine",value:function(e){if(e>=this.lines.length)for(var t=this.lines.length;t<=e;t++)this.lines.push(this.blankLine());return this.lines[e]}},{key:"reset",value:function(){this.lines=[],this.dirty=[],this.tabStops=[];for(var e=0;e<this.rows;e++)this.dirty.push(!0),this.tabStops.push(Array(this.cols).fill(!1));this.x=0,this.y=0,this.yscreen=0,this.ydisplay=0,this.scrollTop=0,this.scrollBottom=this.rows-1,this.state=ut,this.oscState=mt,this.currAttr=this.defaultAttr,this.params=null,this.currentParam=0,this.title=null,this.prefix=null,this.postfix=null,this.setupTabStops(),this.view.updateDisplayScrollUi(),this.selection.clear(),this.update()}},{key:"setTitle",value:function(e){this.title!==e&&(this.title=e,this.emitTitleDidChange(e))}},{key:"getIdealSize",value:function(e,t){return this.view.getIdealSize(e,t)}},{key:"resize",value:function(e,t){if(e!==this.cols||t!==this.rows){0,this.view.updateDisplayScrollUi(),this.view.resize(e,t);var n=this.ydisplay+this.y;this.ydisplay>=this.lines.length-this.rows&&(this.ydisplay=Math.max(0,this.lines.length-t)),this.yscreen=Math.max(0,this.lines.length-t),this.y=n-this.ydisplay,this.y=Math.max(0,Math.min(Math.max(this.lines.length-1,t),this.y)),this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,t-1),this.scrollBottom>=this.rows-1&&(this.scrollBottom=t-1),this.scrollTop>=this.scrollBottom&&(this.scrollTop=this.scrollBottom-1);var s=2*e,i=!0,r=!1,a=void 0;try{for(var o,l=this.lines[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value;if(c.length<s)for(var d=c.length;d<s;d++)c.push.apply(c,Object(u.a)(this.blankChar()))}}catch(p){r=!0,a=p}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}this.dirty=[],this.tabStops=[];for(var h=0;h<t;h++)this.dirty.push(!0),this.tabStops.push(Array(e).fill(!1));this.cols=e,this.rows=t,this.setupTabStops(),this.view.render(!0)}}},{key:"setupTabStops",value:function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.cols;t++)this.tabStops[e][t]=t%8==0}},{key:"write",value:function(e){if(this.debug){var t=this.debugDiv.scrollTop===this.debugDiv.scrollHeight-this.debugDiv.clientHeight;this.debugDiv.innerText+=e.split("").map((function(e){return function(e){if("\\"===e)return"\\\\";if(e<" "){var t=e.charCodeAt(0).toString(16);return 1===t.length&&(t="0"+t),"\\x"+t}return e}(e)})).join(""),t&&(this.debugDiv.scrollTop=this.debugDiv.scrollHeight-this.debugDiv.clientHeight)}for(var n=0,s=Array.from(e);n<s.length;n++){var i=s[n];this.writeChar(i)}}},{key:"writeChar",value:function(e){switch(this.state){case ut:this.writeCharNormal(e);break;case dt:this.writeCharEscaped(e);break;case ht:this.writeCharCsi(e);break;case pt:this.writeCharOsc(e);break;case ft:this.writeCharCharset(e)}}},{key:"writeCharNormal",value:function(e){switch(e){case B:this.state=dt;break;case $:this.params=[],this.currentParam=0,this.state=ht;break;case T:this.backspace();break;case N:this.carriageReturn();break;case D:case A:this.linefeed();break;case P:this.verticalTab();break;case E:this.bell();break;case I:for(;!(this.x>=this.cols-1)&&(this.x++,!this.tabStops[this.y][this.x]););break;case R:0,Ce("SO not implemented");break;case M:0,Ce("SI not implemented");break;case L:0,Ce("CAN not implemented");break;case F:0,Ce("SUB not implemented");break;case q:0,Ce("DEL ignored");break;default:var t=z(e);this.x>=this.cols&&(this.x=0,this.index());var n=this.getLine(this.yscreen+this.y);n[2*this.x+O]=e,n[2*this.x+S]=this.currAttr,this.invalidateScreenLine(this.y),this.x++;for(var s=1;s<t;s++){this.x>=this.cols&&(this.x=0,this.index(),n=this.getLine(this.yscreen+this.y));var i=V(n[2*this.x+S]);i.flags|=x,n[2*this.x+S]=H(i.foreground,i.background,i.flags),this.invalidateScreenLine(this.y),this.x++}}}},{key:"writeCharEscaped",value:function(e){switch(e){case Ie:this.params=[],this.currentParam=0,this.state=ht;break;case De:this.params=[],this.currentParam=0,this.state=pt;break;case je:this.x=0,this.invalidateScreenLine(this.y),this.index(),this.state=ut;break;case xe:this.index(),this.state=ut;break;case Se:this.reverseIndex(),this.state=ut;break;case Pe:this.modes.decpnm=!0,this.state=ut;break;case Ae:this.modes.decpam=!0,this.state=ut;break;case Oe:this.tabStops[this.y][this.x]=!0,this.state=ut;break;case Ne:case Re:this.state=ft;break;case Ee:this.handleDecsc();break;case Te:this.handleDecrc();break;default:this.state=ut}}},{key:"writeCharCsi",value:function(e){if(e>="0"&&e<="9")this.currentParam=10*this.currentParam+ +e;else switch(e){case T:this.backspace();break;case N:this.carriageReturn();break;case D:case A:this.linefeed();break;case P:this.verticalTab();break;case E:this.bell();break;case"?":case">":case"!":this.prefix=e;break;case"$":case'"':case" ":case"'":this.postfix=e;break;default:if(this.params.push(this.currentParam),this.currentParam=0,";"===e)return;this.state=ut,this.csiAction(e),this.prefix="",this.postfix=""}}},{key:"writeCharOsc",value:function(e){var t=!1;switch(this.oscState){case mt:e===B?this.oscState=vt:e===E?t=!0:this.params.length?this.currentParam+=e:"0"<=e&&e<="9"?this.currentParam=10*this.currentParam+ +e:";"===e&&(this.params.push(this.currentParam),this.currentParam="");break;case vt:t=!0}if(t){switch(""!==this.currentParam&&this.params.push(this.currentParam),this.params[0]){case 0:case 2:this.setTitle(this.params[1]);break;default:0}this.state=ut,this.oscState=mt}}},{key:"writeCharCharset",value:function(){this.state=ut}},{key:"bell",value:function(){this.emitBell()}},{key:"index",value:function(){this.y++,this.y>this.scrollBottom?(this.y--,this.scroll()):(this.invalidateScreenLine(this.y-1),this.invalidateScreenLine(this.y))}},{key:"reverseIndex",value:function(){this.y--,this.y<this.scrollTop?(this.y++,this.reverseScroll()):(this.invalidateScreenLine(this.y),this.invalidateScreenLine(this.y+1))}},{key:"scroll",value:function(){this.lines.splice(this.yscreen+this.scrollBottom+1,0,this.blankLine()),this.scrollTop>0||this.scrollBottom<this.rows-1?this.lines.splice(this.yscreen+this.scrollTop,1):this.lines.length>this.scrollbackLines?this.lines.shift():(this.ydisplay===this.yscreen&&(this.ydisplay++,this.invalidateDisplay()),this.yscreen++);for(var e=this.scrollTop;e<=this.scrollBottom;e++)this.invalidateScreenLine(e);this.view.updateDisplayScrollUi()}},{key:"reverseScroll",value:function(){this.lines.splice(this.yscreen+this.scrollTop,0,this.blankLine()),this.lines.splice(this.yscreen+this.scrollBottom,1);for(var e=this.scrollTop;e<=this.scrollBottom;e++)this.invalidateScreenLine(e);this.selection.clear()}},{key:"blankChar",value:function(){var e=Object(u.a)(Array(2));return e[O]=" ",e[S]=this.defaultAttr,e}},{key:"blankLine",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.cols,t=[],n=0;n<e;n++)t.push.apply(t,Object(u.a)(this.blankChar()));return t}},{key:"setCursorTo",value:function(e,t){e===this.x&&t===this.y||(this.invalidateScreenLine(this.y),this.invalidateScreenLine(t)),this.x=Math.min(this.cols-1,Math.max(0,e)),this.y=Math.min(this.rows-1,Math.max(0,t))}},{key:"eraseRight",value:function(e,t){if(!(this.yscreen+t>=this.lines.length)){for(;e<this.cols;)this.getLine(this.yscreen+t)[2*e+O]=" ",this.getLine(this.yscreen+t)[2*e+S]=this.currAttr,e++;this.invalidateScreenLine(t)}}},{key:"eraseLeft",value:function(e,t){if(!(this.yscreen+t>=this.lines.length)){for(;e>=0;)this.getLine(this.yscreen+t)[2*e+O]=" ",this.getLine(this.yscreen+t)[2*e+S]=this.currAttr,e--;this.invalidateScreenLine(t)}}},{key:"backspace",value:function(){this.x>0&&(this.x--,this.invalidateScreenLine(this.y))}},{key:"carriageReturn",value:function(){0!==this.x&&(this.x=0,this.invalidateScreenLine(this.y))}},{key:"linefeed",value:function(){this.carriageReturn(),this.index()}},{key:"verticalTab",value:function(){this.modes.lnm&&this.carriageReturn(),this.index()}},{key:"switchToAlternateScreen",value:function(){this.mode===bt.NORMAL&&(this.modeData.normal={lines:this.lines,cols:this.cols,rows:this.rows,x:this.x,y:this.y,yscreen:this.yscreen,tabStops:this.tabStops,scrollTop:this.scrollTop,scrollBottom:this.scrollBottom},this.reset(),this.mode=bt.ALTERNATE)}},{key:"switchToNormalScreen",value:function(){if(this.mode===bt.ALTERNATE){this.reset();var e=this.cols,t=this.rows,n=this.modeData.normal;this.lines=n.lines,this.cols=n.cols,this.rows=n.rows,this.x=n.x,this.y=n.y,this.yscreen=n.yscreen,this.tabStops=n.tabStops,this.scrollTop=n.scrollTop,this.scrollBottom=n.scrollBottom,this.mode=bt.NORMAL,this.ydisplay=Math.max(0,this.lines.length-this.rows),this.resize(e,t),this.view.updateDisplayScrollUi()}}},{key:"matchColor",value:function(){return 0}},{key:"handleDecsc",value:function(){this.decscState={x:this.x,y:this.y,currAttr:this.currAttr},this.state=ut}},{key:"handleDecrc",value:function(){this.decscState?(this.setCursorTo(this.decscState.x,this.decscState.y),this.currAttr=this.decscState.currAttr,this.decscState=null):(this.setCursorTo(0,0),this.currAttr=this.defaultAttr),this.state=ut}},{key:"csiAction",value:function(e){switch(e){case Le:this.setCursorTo(this.x,this.y-(this.params[0]||1));break;case Fe:this.setCursorTo(this.x,this.y+(this.params[0]||1));break;case Be:this.setCursorTo(this.x+(this.params[0]||1),this.y);break;case qe:this.setCursorTo(this.x-(this.params[0]||1),this.y);break;case $e:this.setCursorTo(0,this.y+(this.params[0]||1));break;case Ue:this.setCursorTo(0,this.y-(this.params[0]||1));break;case ze:this.setCursorTo((this.params[0]||1)-1,this.y);break;case Ve:this.handleSetCursor(this.params);break;case et:this.setCursorTo(this.x,(this.params[0]||1)-1);break;case tt:this.setCursorTo(this.x,this.y+(this.params[0]||1));break;case nt:this.handleSetCursor(this.params);break;case Me:this.handleInsertBlankChars(this.params);break;case He:this.handleEraseDisplay(this.params);break;case We:this.handleEraseLine(this.params);break;case Qe:this.handleInsertLines(this.params);break;case Ke:this.handleDeleteLines(this.params);break;case Ye:this.handleDeleteCharacters(this.params);break;case Ge:this.handleScrollUp(this.params);break;case Xe:this.handleScrollDown(this.params);break;case Je:this.handleEraseCharacters(this.params);break;case at:this.handleCharAttributes(this.params);break;case it:this.handleSetMode(this.params);break;case rt:this.handleResetMode(this.params);break;case ot:this.handleStatusReport(this.params);break;case Ze:this.handleDeviceAttributes(this.params);break;case st:this.handleTabulationClear(this.params);break;case lt:this.handleSetScrollRegion(this.params);break;default:0}}},{key:"handleSetCursor",value:function(e){var t=(e[0]||1)-1,n=(e[1]||1)-1;this.setCursorTo(n,t)}},{key:"handleStatusReport",value:function(e){switch(e[0]){case 5:this.emitInput("[0n");break;case 6:this.emitInput("[".concat(this.y+1,";").concat(this.x+1,"R"));break;default:0}}},{key:"handleSetMode",value:function(e){if("?"===this.prefix){switch(e[0]){case yt.DECCKM:this.modes.decckm=!0;break;case yt.DECTCEM:this.modes.dectcem=!0,this.invalidateScreenLine(this.y);break;case yt.DECANM:case yt.DECCOLM:case yt.DECSCNM:case yt.DECOM:case yt.DECAWM:case yt.DECARM:return void 0;case 47:case 1047:case 1048:case 1049:this.switchToAlternateScreen();break;default:return void 0}for(var t=0,n=Object.entries(yt);t<n.length;t++){var s=Object(c.a)(n[t],2);s[0];if(s[1]===e[0]){0;break}}}else{switch(e[0]){case gt.LNM:this.modes.lnm=!0;break;default:return void 0}for(var i=0,r=Object.entries(gt);i<r.length;i++){var a=Object(c.a)(r[i],2);a[0];if(a[1]===e[0]){0;break}}}}},{key:"handleResetMode",value:function(e){if("?"===this.prefix){switch(e[0]){case yt.DECCKM:this.modes.decckm=!1;break;case yt.DECTCEM:this.modes.dectcem=!1,this.invalidateScreenLine(this.y);break;case yt.DECANM:case yt.DECCOLM:case yt.DECSCNM:case yt.DECOM:case yt.DECAWM:case yt.DECARM:return void 0;case 47:case 1047:case 1048:case 1049:this.switchToNormalScreen();break;default:return void 0}for(var t=0,n=Object.entries(yt);t<n.length;t++){var s=Object(c.a)(n[t],2);s[0];if(s[1]===e[0]){0;break}}}else{switch(e[0]){case gt.LNM:this.modes.lnm=!1;break;default:return void 0}for(var i=0,r=Object.entries(gt);i<r.length;i++){var a=Object(c.a)(r[i],2);a[0];if(a[1]===e[0]){0;break}}}}},{key:"handleCharAttributes",value:function(e){for(var t=V(this.defaultAttr),n=t.foreground,s=t.background,i=t.flags,r=V(this.currAttr),a=r.foreground,o=r.background,l=r.flags,c=0;c<e.length;c++){var u=e[c];if(30<=u&&u<=37)a=u-30;else if(40<=u&&u<=47)o=u-40;else if(90<=u&&u<=97)a=u-90+8;else if(100<=u&&u<=107)o=u-100+8;else switch(u){case 0:a=n,o=s,l=i;break;case 1:l|=y;break;case 2:l|=w;break;case 4:l|=_;break;case 5:l|=k;break;case 7:l|=C;break;case 22:l&=~y;break;case 24:l&=~_;break;case 25:l&=~k;break;case 27:l&=~C;break;case 39:a=n;break;case 49:o=s;break;case 38:switch(e[c+1]){case 2:a=this.matchColor(255&e[c+2],255&e[c+3],255&e[c+4]),c+=3;break;case 5:a=255&e[c+2],c++}c++;break;case 48:switch(e[c+1]){case 2:o=this.matchColor(255&e[c+2],255&e[c+3],255&e[c+4]),c+=3;break;case 5:o=255&e[c+2],c++}c++;break;default:0}}this.currAttr=H(a,o,l)}},{key:"handleInsertBlankChars",value:function(e){var t=e[0]||1,n=this.getLine(this.yscreen+this.y);for(n.splice(2*(this.cols-t),2*t);t--;)n.splice.apply(n,[2*this.x,0].concat(Object(u.a)(this.blankChar())))}},{key:"handleEraseDisplay",value:function(e){switch(e[0]){case 0:this.eraseRight(this.x,this.y);for(var t=this.y+1;t<this.rows;t++)this.eraseRight(0,t);break;case 1:this.eraseLeft(this.x,this.y);for(var n=0;n<this.y;n++)this.eraseRight(0,n);break;case 2:for(var s=0;s<this.rows;s++)this.eraseRight(0,s)}}},{key:"handleEraseLine",value:function(e){switch(e[0]){case 0:this.eraseRight(this.x,this.y);break;case 1:this.eraseLeft(this.x,this.y);break;case 2:this.eraseRight(0,this.y)}}},{key:"handleScrollUp",value:function(e){for(var t=e[0]||1;t--;)this.lines.splice(this.yscreen+this.scrollTop,1),this.lines.splice(this.yscreen+this.scrollBottom,0,this.blankLine());for(var n=this.scrollTop;n<=this.scrollBottom;n++)this.invalidateScreenLine(n)}},{key:"handleScrollDown",value:function(e){for(var t=e[0]||1;t--;)this.lines.splice(this.yscreen+this.scrollBottom,1),this.lines.splice(this.yscreen+this.scrollTop,0,this.blankLine());for(var n=this.scrollTop;n<=this.scrollBottom;n++)this.invalidateScreenLine(n)}},{key:"handleInsertLines",value:function(e){for(var t=Math.max(1,e[0]);t--;)this.lines.splice(this.yscreen+this.scrollBottom,1),this.lines.splice(this.yscreen+this.y,0,this.blankLine());for(var n=this.y;n<=this.scrollBottom;n++)this.invalidateScreenLine(n)}},{key:"handleDeleteLines",value:function(e){for(var t=Math.max(1,e[0]);t--;)this.lines.splice(this.yscreen+this.y,1),this.lines.splice(this.yscreen+this.scrollBottom,0,this.blankLine());for(var n=this.y;n<=this.scrollBottom;n++)this.invalidateScreenLine(n)}},{key:"handleDeleteCharacters",value:function(e){for(var t=Math.max(1,e[0]),n=2*this.x;n<2*(this.cols-t);n++)this.getLine(this.yscreen+this.y)[n]=this.getLine(this.yscreen+this.y)[n+2*t];for(var s=this.cols-t;s<this.cols;s++)this.getLine(this.yscreen+this.y)[2*s+O]=" ",this.getLine(this.yscreen+this.y)[2*s+S]=this.currAttr;this.invalidateScreenLine(this.y)}},{key:"handleEraseCharacters",value:function(e){for(var t=Math.max(1,e[0]),n=this.x;n<this.x+t;n++)this.getLine(this.yscreen+this.y)[2*n+O]=" ",this.getLine(this.yscreen+this.y)[2*n+S]=this.currAttr;this.invalidateScreenLine(this.y)}},{key:"handleTabulationClear",value:function(e){switch(e[0]){case 0:this.tabStops[this.y][this.x]=!1;break;case 3:for(var t=0;t<this.rows;t++)for(var n=0;n<this.cols;n++)this.tabStops[t][n]=!1}}},{key:"handleSetScrollRegion",value:function(e){2===e.length&&e[0]<e[1]?(this.scrollTop=e[0]-1,this.scrollBottom=e[1]-1):(this.scrollTop=0,this.scrollBottom=this.rows-1),this.setCursorTo(0,0)}},{key:"handleDeviceAttributes",value:function(){this.emitInput("[?6c")}},{key:"element",get:function(){return this.view.element}}]),e}(),_t=n("5/Cn"),kt=n("8PNo"),Ct={foreground:"#2CCD5D",background:"#2C2C2C",cursorFg:"#000000",cursorBg:"#FFFFFF",selectionFg:"#FFFFFF",selectionBg:"#8D44AC",palette:["#002D3F","#A82320","#32A548","#E58D11","#3167AC","#781AA0","#2C9370","#B0B6BA","#459CFF","#D4312E","#2D9440","#E5BE0C","#3C7DD2","#8230A7","#35B387","#E7ECED"]},xt={foreground:"#444444",background:"#FFFFFF",cursorFg:"#FFFFFF",cursorBg:"#929292",selectionFg:"#FFFFFF",selectionBg:"#32C878",palette:["#002D3F","#A82320","#32A548","#E58D11","#3167AC","#781AA0","#2C9370","#B0B6BA","#459CFF","#D4312E","#2D9440","#E5BE0C","#3C7DD2","#8230A7","#35B387","#E7ECED"]},jt=(Q=null,function(){Q||(Q=new Audio(n("VQFc"))),Q.play()}),Ot={components:{ContextMenu:i.a,ContextMenuItem:r.a,ContextMenuSeparator:a.a},mixins:[l.a],props:{autofocus:{type:Boolean,default:!1},deferOpen:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},sounds:{type:Boolean,default:!0}},data:function(){return{title:"",sizeMismatch:!1,menuVisible:!1,menuX:0,menuY:0}},watch:{readonly:function(e){this.term.setReadonly(e)},computedTheme:function(e){this.setTheme(e)}},mounted:function(){var e=this;this.opened=!1,this.outputBuffer=[],this.term=new wt(1,1),this.term.setReadonly(this.readonly),this.$nextTick((function(){return e.setTheme(e.computedTheme)})),this.term.onTitleDidChange((function(t){e.title=t,e.$emit("title",t)})),this.term.onBell((function(){e.sounds&&jt()})),this.term.onInput((function(t){e.$emit("input",t)})),this.resizeObserver=new s.a(this.onResize),this.resizeObserver.observe(this.$el),this.deferOpen||this.open()},destroyed:function(){this.resizeObserver&&this.resizeObserver.disconnect()},methods:{onContextMenu:function(e){this.menuVisible=!0,this.menuX=e.clientX+window.pageXOffset,this.menuY=e.clientY+window.pageYOffset},onResize:function(){if(g.t(this.$el)){var e=this.getIdealSize();e.cols===this.term.cols&&e.rows===this.term.rows||this.$emit("resized"),this.flush(),this.updateSizeMismatch()}},size:function(){return{rows:this.term.rows,cols:this.term.cols}},copy:function(){kt.a(this.term.getSelectedText(),{shortcut:{osx:"Cmd+C",default:"Ctrl+Alt+C"}})},showPasteAlert:function(){this.$createElement;_t.e({render:function(){var e=this,t=arguments[0];return t(o.a,{attrs:{action:"paste"},on:{action:function(t){return e.$emit("action",t)}}})}})},open:function(){this.opened?this.term.reset():(this.$el.appendChild(this.term.element),this.opened=!0,this.autofocus&&this.focus()),this.resizeToFit(),this.flush()},write:function(e){this.opened&&this.term.cols>1&&g.t(this.$el)?this.term.write(e):this.outputBuffer.push(e)},setTheme:function(e){var t="dark"===e?Ct:xt;this.term.setColors(t),this.$el.style.backgroundColor=t.background},resize:function(e,t){this.term.resize(e,t),this.updateSizeMismatch()},resizeToFit:function(){var e=this.getIdealSize();this.resize(e.cols,e.rows)},getIdealSize:function(){return this.term.getIdealSize(this.$el.clientWidth,this.$el.clientHeight)},reset:function(){this.term.reset()},focus:function(){this.term.focus()},flush:function(){if(this.opened&&this.outputBuffer.length>0){var e=!0,t=!1,n=void 0;try{for(var s,i=this.outputBuffer[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){var r=s.value;this.term.write(r)}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.outputBuffer.length=0}},updateSizeMismatch:function(){var e=this.getIdealSize();this.sizeMismatch=e.cols>this.term.cols||e.rows>this.term.rows}}},St=(n("OQ3z"),n("KHd+")),Et=Object(St.a)(Ot,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"terminal",class:{"term-size-mismatch":e.sizeMismatch},on:{contextmenu:function(t){return t.preventDefault(),t.stopPropagation(),e.onContextMenu(t)}}},[e.menuVisible?n("ContextMenu",{attrs:{"target-left":e.menuX,"target-top":e.menuY},on:{close:function(t){e.menuVisible=!1}}},[n("ContextMenuItem",{key:"copy",attrs:{text:"Copy",shortcut:{mac:"cmd+c",default:"ctrl+c"}},on:{click:e.copy}}),e._v(" "),n("ContextMenuItem",{key:"paste",attrs:{text:"Paste",shortcut:{mac:"cmd+v",default:"ctrl+v"}},on:{click:e.showPasteAlert}}),e._v(" "),n("ContextMenuSeparator"),e._v(" "),n("ContextMenuItem",{key:"selectAll",attrs:{text:"Select All",shortcut:{mac:"cmd+a",default:"ctrl+a"}},on:{click:function(t){return e.term.selectAll()}}})],1):e._e()],1)}),[],!1,null,null,null);t.a=Et.exports},YRNq:function(e,t,n){e.exports=n.p+"assets/login-user.d93c9c48.svg"},YU3p:function(e,t,n){"use strict";n("inlA");var s=n("9Arg"),i={props:{value:{type:String,default:""},placeholder:{type:String,default:null}},watch:{value:function(){this.updateViewValue()}},mounted:function(){this.updateViewValue()},methods:{getViewValue:function(){var e=this.$el.innerText;return e.endsWith("\n")&&(e=e.substring(0,e.length-1)),e},setViewValue:function(e){this.$el.innerText=e},updateModelValue:function(){this.$emit("input",this.getViewValue())},updateViewValue:function(){if(""===this.value)for(;this.$el.lastChild;)this.$el.lastChild.remove();else this.getViewValue()!==this.value&&this.setViewValue(this.value)},focus:function(){this.$el.focus()},input:function(e){var t=window.getSelection(),n=t.rangeCount>0?t.getRangeAt(0):document.createRange();n.collapse(),s.e(this.$el,n.startContainer)||(n.setEnd(this.$el,this.$el.childNodes.length),n.collapse());var i=document.createTextNode(e);n.insertNode(i),n.setEnd(i,e.length),n.collapse(),t.removeAllRanges(),t.addRange(n),this.updateModelValue()}}},r=(n("NwDb"),n("KHd+")),a=Object(r.a)(i,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"textarea-ex",class:{empty:!this.value},attrs:{"data-content":this.placeholder,contenteditable:"true"},on:{input:this.updateModelValue}})}),[],!1,null,null,null);t.a=a.exports},YXQG:function(e,t,n){},"YcB/":function(e,t,n){},YfTP:function(e,t,n){"use strict";var s=n("j3I6");n.n(s).a},Ygbk:function(e,t,n){},YhsJ:function(e,t,n){},YiZQ:function(e,t,n){"use strict";var s=n("q6BU");n.n(s).a},Yr1g:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("fbCW"),n("yq1k"),n("4mDm"),n("2B1R"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("4l63"),n("JTJg"),n("EnZy"),n("SYor"),n("FZtP"),n("3bBZ");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("uM7l"),l=n.n(o),c=n("JZM8"),u=n.n(c),d=n("Y+p1"),h=n.n(d),p=n("K4j9"),f=n("L2JU"),m=n("2PkB"),v=n("6XG0"),b=n("xtk+"),g=n("4cYw"),y=n("5G72"),w=n("IbLZ"),_=n("1hNB"),k=n("Dm8+"),C=n("LnxB"),x={components:{LessonIcon:n("w1SZ").a},props:{data:{type:Object,required:!0}}},j=(n("merv"),n("KHd+")),O=Object(j.a)(x,(function(){var e=this.$createElement;return(this._self._c||e)("LessonIcon",{staticClass:"lesson-type-item",attrs:{type:this.data.value}})}),[],!1,null,null,null).exports,S=n("/Yj0"),E=n("5/Cn"),T=n("BtCt"),I=n("V4gK");function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A,N,R={inject:["keyboardShortcutManager"],components:{Portal:p.Portal,NavbarButton:m.a,EdCheck:v.a,EdInput:b.a,EdSelect:g.a,EdTextarea:y.a,EdField:w.a,CollectionView:_.a,ListView:k.a,Message:C.a},props:{lesson:{type:Object,required:!0}},data:function(){return{LessonTypeItem:O,model:null,originalModel:null,saving:!1,passwordVisible:!1,sebKeys:"",typeItems:I.c.map((function(e){return{value:e.type,key:e.type,text:e.humanized}}))}},computed:P({},Object(f.c)("lesson",["modulesList","lessonsByModule"]),{loading:function(){return!this.model||this.saving},index:{get:function(){return null===this.model.index?this.model.index:String(this.model.index)},set:function(e){e=parseInt(e),this.model.index=isNaN(e)?null:e}},selectedTypeItem:{get:function(){var e=this;return this.typeItems.find((function(t){return t.value===e.model.type}))},set:function(e){this.model.type=e.value}},prerequisteItems:function(){var e=this;return(this.lessonsByModule.get(this.model.moduleId)||[]).map((function(t){var n=t.id===e.lesson.id;return{id:t.id,title:n?"".concat(e.model.title," (this lesson)"):t.title,checked:e.model.prerequisites.includes(t.id),disabled:n}}))}}),watch:{lesson:"updateModel"},routeUpdateMessage:function(){var e=this;if(!h()(this.model,this.originalModel))return{message:"You have unsaved changes to the lesson.",callback:function(){return e.save()}}},created:function(){this.disposable=this.keyboardShortcutManager.register({default:"Control+s",mac:"Meta+s"},this.save,{description:"Save lesson"}),this.updateModel()},destroyed:function(){this.disposable.dispose()},methods:P({},Object(f.b)("lesson",{updateLesson:T.a.UPDATE_LESSON}),{updateModel:function(){var e=u()(this.lesson,["moduleId","title","index","isHidden","isUnlisted","password","isTimed","timerDuration","type","outline","settings"]);e.prerequisites=this.lesson.prerequisites.map((function(e){return e.id})),e.settings||(e.settings={safeExamBrowser:{enabled:!1,keys:[]}}),this.model=e,this.sebKeys=this.model.settings.safeExamBrowser.keys.join("\n"),this.originalModel=l()(e)},setModule:(N=Object(r.a)(i.a.mark((function e(t){var n,s=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.lessonsByModule.get(this.lesson.moduleId))||!n.some((function(e){return e.prerequisites.includes(s.lesson.id)}))){e.next=4;break}return E.a({icon:"warning",title:"Cannot change module while lesson is a prerequisite of one or more other lessons",text:"To change the module this lesson belongs to, you must first remove this lesson as a prerequisite of any other lesson."}),e.abrupt("return");case 4:if(!this.model.prerequisites.length){e.next=9;break}return e.next=7,E.b({icon:"warning",title:"Changing the module will clear the prerequisite lessons",text:"Prerequisite lessons must exist in the same module as this lesson.",primaryAction:"Continue"});case 7:if(e.sent){e.next=9;break}return e.abrupt("return");case 9:this.model.prerequisites=[],this.model.moduleId=t;case 11:case"end":return e.stop()}}),e,this)}))),function(e){return N.apply(this,arguments)}),setPrerequisite:function(e,t){t?this.model.prerequisites.push(e):this.model.prerequisites=this.model.prerequisites.filter((function(t){return t!==e}))},save:(A=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.saving){e.next=2;break}return e.abrupt("return");case 2:return this.saving=!0,this.sebKeys=this.sebKeys.split("\n").map((function(e){return e.trim()})).filter(Boolean).join("\n"),this.model.settings.safeExamBrowser.keys=this.sebKeys.split("\n"),e.prev=5,e.next=8,this.updateLesson(P({},this.model,{id:this.lesson.id}));case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(5),S.b({type:"error",text:"Unable to save lesson."}),e.abrupt("return",!1);case 14:return e.prev=14,this.saving=!1,e.finish(14);case 17:S.b({type:"success",text:"Saved lesson."});case 18:case"end":return e.stop()}}),e,this,[[5,10,14,17]])}))),function(){return A.apply(this,arguments)})})},M=(n("ECm2"),Object(j.a)(R,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Portal",{attrs:{to:"slide-actions"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.disabled;return[n("NavbarButton",{attrs:{type:"default",text:"Save",disabled:s||e.loading},on:{action:e.save}})]}}])}),e._v(" "),e._m(0),e._v(" "),e.model?[n("div",{staticClass:"lpedit-title-layout"},[n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Title")]},proxy:!0}],null,!1,2416837851)},[e._v(" "),n("EdInput",{attrs:{disabled:e.loading},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1),e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Number")]},proxy:!0}],null,!1,3612786232)},[e._v(" "),n("EdInput",{attrs:{disabled:e.loading},model:{value:e.index,callback:function(t){e.index=t},expression:"index"}})],1)],1),e._v(" "),n("EdField",[n("EdCheck",{attrs:{label:"Hidden",description:"Students cannot see hidden lessons.",disabled:e.loading},model:{value:e.model.isHidden,callback:function(t){e.$set(e.model,"isHidden",t)},expression:"model.isHidden"}})],1),e._v(" "),n("EdField",[n("EdCheck",{attrs:{label:"Unlisted",description:"The lesson will not be listed to students on the lessons page and can only be accessed via a direct link.",disabled:e.loading},model:{value:e.model.isUnlisted,callback:function(t){e.$set(e.model,"isUnlisted",t)},expression:"model.isUnlisted"}})],1),e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Module")]},proxy:!0}],null,!1,2962506945)},[e._v(" "),n("EdSelect",{attrs:{disabled:e.loading,value:e.model.moduleId},on:{input:e.setModule}},[n("option",{domProps:{value:null}},[e._v("(None)")]),e._v(" "),e._l(e.modulesList,(function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v("\n\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t")])}))],2)],1),e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Question Numbering Style")]},proxy:!0}],null,!1,1927589921)},[e._v(" "),n("EdSelect",{attrs:{value:e.model.settings.quizQuestionNumberStyle||"Question 1",disabled:e.loading},on:{input:function(t){e.model.settings.quizQuestionNumberStyle=t}}},[n("option",{attrs:{value:"none"}},[e._v("None")]),e._v(" "),n("option",{attrs:{value:"Question 1"}},[e._v("Question 1, Question 2, ...")]),e._v(" "),n("option",{attrs:{value:"Q1"}},[e._v("Q1, Q2, ...")]),e._v(" "),n("option",{attrs:{value:"1)"}},[e._v("1), 2), ...")]),e._v(" "),n("option",{attrs:{value:"Question A"}},[e._v("Question A, Question B, ...")]),e._v(" "),n("option",{attrs:{value:"a)"}},[e._v("a), b), ...")])])],1),e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Prerequisites")]},proxy:!0},{key:"description",fn:function(){return[e._v("\n\t\t\t\tIndicate which lessons from this module must be completed first before this lesson can be attempted.\n\t\t\t")]},proxy:!0}],null,!1,484891328)},[e._v(" "),e._v(" "),n("ListView",{staticClass:"lpedit-prereqs",attrs:{items:e.prerequisteItems,"selection-mode":"none"},scopedSlots:e._u([{key:"item",fn:function(t){var s=t.item;return[n("EdCheck",{staticClass:"lpedit-prereq-item",attrs:{label:s.title,disabled:e.loading||s.disabled,value:s.checked},on:{input:function(t){return e.setPrerequisite(s.id,t)}}})]}}],null,!1,912056151)})],1),e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Icon")]},proxy:!0}],null,!1,3105782512)},[e._v(" "),n("CollectionView",{attrs:{"item-component":e.LessonTypeItem,items:e.typeItems,"item-key":function(e){return e.key}},model:{value:e.selectedTypeItem,callback:function(t){e.selectedTypeItem=t},expression:"selectedTypeItem"}})],1),e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Outline")]},proxy:!0},{key:"description",fn:function(){return[e._v("Optionally write a short description of this lesson that will be displayed on the Lessons screen when the mouse is over the lesson item.")]},proxy:!0}],null,!1,2227207243)},[e._v(" "),e._v(" "),n("EdTextarea",{model:{value:e.model.outline,callback:function(t){e.$set(e.model,"outline",t)},expression:"model.outline"}})],1),e._v(" "),n("h2",{staticClass:"lpedit-heading"},[e._v("Access Control")]),e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Password")]},proxy:!0}],null,!1,2457811812)},[e._v(" "),n("EdCheck",{attrs:{label:"Show password field"},model:{value:e.passwordVisible,callback:function(t){e.passwordVisible=t},expression:"passwordVisible"}}),e._v(" "),!e.passwordVisible&&e.model.password?n("Message",{staticClass:"lpedit-password-msg"},[e._v("\n\t\t\t\tA password is set.\n\t\t\t")]):e.passwordVisible?n("EdInput",{staticClass:"lpedit-password",attrs:{disabled:e.loading,autocomplete:"off"},model:{value:e.model.password,callback:function(t){e.$set(e.model,"password",t)},expression:"model.password"}}):e._e()],1),e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Countdown Timer")]},proxy:!0}],null,!1,2508491981)},[e._v(" "),n("div",{staticClass:"lpedit-timer-layout"},[n("EdCheck",{attrs:{disabled:e.loading},model:{value:e.model.isTimed,callback:function(t){e.$set(e.model,"isTimed",t)},expression:"model.isTimed"}}),e._v("\n\t\t\t\tDisplay a countdown timer for\n\t\t\t\t"),n("EdInput",{staticClass:"lpedit-timer-input",attrs:{disabled:e.loading},model:{value:e.model.timerDuration,callback:function(t){e.$set(e.model,"timerDuration",e._n(t))},expression:"model.timerDuration"}}),e._v("\n\t\t\t\tminutes\n\t\t\t")],1)]),e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Safe Exam Browser")]},proxy:!0}],null,!1,4099908279)},[e._v(" "),n("EdCheck",{attrs:{label:"Require Safe Exam Browser",description:"Only students using Safe Exam Browser with one of the specified keys may access the course.",disabled:e.loading},model:{value:e.model.settings.safeExamBrowser.enabled,callback:function(t){e.$set(e.model.settings.safeExamBrowser,"enabled",t)},expression:"model.settings.safeExamBrowser.enabled"}})],1),e._v(" "),e.model.settings.safeExamBrowser.enabled?n("EdField",{scopedSlots:e._u([{key:"description",fn:function(){return[e._v("\n\t\t\t\tEnter the Safe Exam Browser keys here, one on each line:\n\t\t\t")]},proxy:!0}],null,!1,990715490)},[e._v(" "),n("EdTextarea",{staticClass:"adm-seb-textarea",attrs:{placeholder:"<Browser exam key>",disabled:e.loading,autocomplete:"off",spellcheck:"false"},model:{value:e.sebKeys,callback:function(t){e.sebKeys=t},expression:"sebKeys"}})],1):e._e()]:e._e()],2)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("header",{staticClass:"lpedit-header"},[t("h1",[this._v("Lesson Settings")])])}],!1,null,null,null));t.default=M.exports},YrDL:function(e,t,n){},Yswc:function(e,t,n){"use strict";var s=n("KHd+"),i=Object(s.a)({},void 0,void 0,!1,null,null,null);t.a=i.exports},Yv7X:function(e,t,n){"use strict";var s=n("2Yyy");n.n(s).a},YvKY:function(e,t,n){},Yvi7:function(e,t,n){},YxiV:function(e,t,n){},YxxY:function(e,t,n){"use strict";n("qePV");var s={props:{minFrac:{type:Number,default:null},maxFrac:{type:Number,default:null},frac:{type:Number,default:1},collapsedSize:{type:Number,default:30},sizing:{type:String,default:"flex"},priority:{type:Number,default:100},collapsable:{type:Boolean,default:!1},collapsedText:{type:String,default:void 0}},data:function(){return{resizingFrac:null}},computed:{renderFrac:function(){return null!=this.resizingFrac?this.resizingFrac:this.frac},normalizedFrac:function(){return"flex"===this.sizing?this.renderFrac/this.$parent.flexSum||0:this.renderFrac},collapsed:function(){return this.collapsable&&0===this.renderFrac},style:function(){return"fixed"===this.sizing?{flexBasis:(this.collapsed?this.collapsedSize:this.renderFrac)+"px",flexGrow:0,flexShrink:0}:{flexBasis:(this.collapsed?this.collapsedSize:0)+"px",flexGrow:this.normalizedFrac}}},watch:{frac:function(){this.$parent.persistFracs()}}},i=(n("sbB0"),n("KHd+")),r=Object(i.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"split-panel",class:"split-panel-"+e.$parent.orientation,style:e.style},[e._t("default",null,{collapsed:e.collapsed,frac:e.frac}),e._v(" "),e.collapsed&&"string"==typeof e.collapsedText?n("div",{key:"split-panel-collapsed",staticClass:"split-panel-collapsed"},[n("div",{staticClass:"split-panel-collapsed-text"},[e._v(e._s(e.collapsedText))])]):e._e(),e._v(" "),e.collapsed?e._t("collapsed"):e._e()],2)}),[],!1,null,null,null);t.a=r.exports},"Z0+6":function(e,t,n){},Z2Dp:function(e,t,n){"use strict";var s=n("lJ4G");n.n(s).a},Z3N9:function(e,t,n){"use strict";var s=n("+sSL");n.n(s).a},"ZDx+":function(e,t,n){},ZE4w:function(e,t,n){"use strict";var s={directives:{Resize:n("iiMZ").a},props:{mouseScroll:{type:Boolean,default:!1},stickToBottom:{type:Boolean,default:!1}},created:function(){this.atBottom=this.stickToBottom,this.programmaticScroll=!1},mounted:function(){this.updateView()},methods:{setScrollLeft:function(e){this.programmaticScroll=!0,this.$el.scrollLeft=e},setScrollTop:function(e){this.programmaticScroll=!0,this.$el.scrollTop=e},onMouseDown:function(e){this.mouseScroll&&(document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("mousemove",this.onMouseMove),this.startMouseX=e.clientX,this.startMouseY=e.clientY,this.startScrollLeft=this.$el.scrollLeft,this.startScrollTop=this.$el.scrollTop)},onMouseUp:function(){document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove)},onMouseMove:function(e){this.setScrollLeft(this.startScrollLeft-e.clientX+this.startMouseX),this.setScrollTop(this.startScrollTop-e.clientY+this.startMouseY)},onResize:function(){this.updateView()},onScroll:function(){this.updateModel();var e=this.programmaticScroll;this.programmaticScroll=!1,this.$emit("scroll",{scrollLeft:this.$el.scrollLeft,scrollTop:this.$el.scrollTop,user:!e})},updateModel:function(){this.atBottom=this.$el.scrollTop>=this.$el.scrollHeight-this.$el.clientHeight},updateView:function(){this.stickToBottom&&this.atBottom&&this.setScrollTop(this.$el.scrollHeight-this.$el.clientHeight)}}},i=(n("zWjI"),n("KHd+")),r=Object(i.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"resize",rawName:"v-resize",value:e.onResize,expression:"onResize"}],staticClass:"scroll-view",class:{"scroll-view-mouse":e.mouseScroll},on:{mousedown:e.onMouseDown,scroll:e.onScroll}},[e.stickToBottom?n("div",{directives:[{name:"resize",rawName:"v-resize",value:e.onResize,expression:"onResize"}]},[e._t("default")],2):e._t("default")],2)}),[],!1,null,null,null);t.a=r.exports},"ZG5+":function(e,t,n){"use strict";var s=n("Ygbk");n.n(s).a},ZKD5:function(e,t,n){},ZOv9:function(e,t,n){"use strict";var s=n("OH48"),i=n("PS4J"),r=n("TphV"),a=n("2PkB"),o={components:{PopupLayer:s.a,FocusTrap:i.a,Navbar:r.a,NavbarButton:a.a},props:{title:{type:String,default:""}},methods:{close:function(){this.$emit("close")}}},l=(n("QAA2"),n("KHd+")),c=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("PopupLayer",[n("Transition",{attrs:{appear:""}},[n("FocusTrap",{staticClass:"fsmodal"},[n("Navbar",{staticClass:"fsmodal-navbar",attrs:{title:e.title},scopedSlots:e._u([{key:"left",fn:function(){return[e._t("navbar-left")]},proxy:!0},{key:"right",fn:function(){return[e._t("navbar-right"),e._v(" "),n("NavbarButton",{attrs:{icon:"cross"},on:{action:function(t){return e.close()}}})]},proxy:!0}],null,!0)}),e._v(" "),n("div",{staticClass:"fsmodal-layout",on:{click:function(t){return t.target!==t.currentTarget?null:e.close()}}},[e._t("default")],2)],1)],1)],1)}),[],!1,null,null,null);t.a=c.exports},ZP83:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("4Brf"),n("0oug"),n("TeQF"),n("yXV3"),n("4mDm"),n("2B1R"),n("pDQq"),n("qePV"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("PKPk"),n("UxlC"),n("SYor"),n("FZtP"),n("3bBZ");var s=n("o0o1"),i=n.n(s),r=n("KQm4"),a=(n("ls82"),n("HaE+")),o=n("rePB"),l=n("L2JU"),c=n("Q2AE"),u=n("SBq4"),d=n("Pa8A"),h=n("t19P"),p=n("TphV"),f=n("2PkB"),m=n("Edju"),v=n("TdcQ"),b=n("xtk+"),g=n("5DV3"),y=n("6Voy"),w=n("Gqxi"),_=n("/Yj0"),k=n("5/Cn"),C=n("hSdx");function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O,S,E,T={directives:{Autofocus:u.a,Tooltip:d.a},components:{HeaderContainer:h.a,Navbar:p.a,NavbarButton:f.a,FormLayout:m.a,FormLayoutRow:v.a,EdInput:b.a,QuizQuestionElement:g.a,QuizElementAction:y.a},inject:["quizQuestionBankApi","keyboardShortcutManager"],props:{type:{type:String,default:"multiple-choice"},ids:{type:Array,default:function(){return[]}},quantity:{type:Number,default:0}},data:function(){return{questions:null,loading:!1,level:"",topic:"",category:"",subcategory:"",difficulty:""}},computed:j({},Object(l.e)(["course"])),created:function(){this.disposable=this.keyboardShortcutManager.register({default:"Control+s",mac:"Meta+s"},this.save,{description:"Save questions"}),this.update()},mounted:function(){this.setNavbarVisible(!0)},destroyed:function(){this.setNavbarVisible(!1),this.disposable.dispose()},methods:j({},Object(l.d)({setNavbarVisible:c.c.SET_NAVBAR_VISIBLE}),{update:(E=Object(a.a)(i.a.mark((function e(){var t,n,s,a,o,l=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,t=[],e.next=5,C.promiseMap(this.ids,(function(e){return l.quizQuestionBankApi.getQuestion(e)}),{concurrency:5});case 5:if((n=e.sent).every((function(e){return e.success}))){e.next=9;break}return _.b({type:"error",text:"Unable to fetch questions."}),e.abrupt("return");case 9:for(t.push.apply(t,Object(r.a)(n.map((function(e){return e.value})))),t.length&&(s=function(e){return t.every((function(n){return n[e]===t[0][e]}))?t[0][e]:""},this.level=s("level"),this.topic=s("topic"),this.category=s("category"),this.subcategory=s("subcategory"),this.difficulty=s("difficulty")),a=0;a<this.quantity;a++)(o=w.a.create(this.type)).courseId=this.course.id,t.push(o);this.questions=t;case 13:return e.prev=13,this.loading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[1,,13,16]])}))),function(){return E.apply(this,arguments)}),save:(S=Object(a.a)(i.a.mark((function e(){var t,n,s,r,o,l,c,u,d=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loading){e.next=2;break}return e.abrupt("return");case 2:for(this.loading=!0,this.level=this.level.trim(),this.topic=this.topic.trim(),this.category=this.category.trim(),this.subcategory=this.subcategory.trim(),this.difficulty=this.difficulty.trim(),t=!0,n=!1,s=void 0,e.prev=11,r=this.questions[Symbol.iterator]();!(t=(o=r.next()).done);t=!0)(l=o.value).level=this.level,l.topic=this.topic,l.category=this.category,l.subcategory=this.subcategory,l.difficulty=this.difficulty;e.next=19;break;case 15:e.prev=15,e.t0=e.catch(11),n=!0,s=e.t0;case 19:e.prev=19,e.prev=20,t||null==r.return||r.return();case 22:if(e.prev=22,!n){e.next=25;break}throw s;case 25:return e.finish(22);case 26:return e.finish(19);case 27:return e.prev=27,e.next=30,C.promiseMap(this.questions,function(){var e=Object(a.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.id){e.next=6;break}return e.next=3,d.quizQuestionBankApi.updateQuestion(t);case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,d.quizQuestionBankApi.createQuestion(t);case 8:e.t0=e.sent;case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{concurrency:5});case 30:for(c=e.sent,u=0;u<c.length;u++)c[u].success&&this.questions.splice(u,1,c[u].value);c.every((function(e){return e.success}))||_.b({type:"error",text:"Unable to save one or more questions."}),this.updateQuery();case 34:return e.prev=34,this.loading=!1,e.finish(34);case 37:case"end":return e.stop()}}),e,this,[[11,15,19,27],[20,,22,26],[27,,34,37]])}))),function(){return S.apply(this,arguments)}),updateQuery:function(){var e=this.questions.map((function(e){return e.id})).filter(Boolean),t=void 0,n=void 0;e.length!==this.questions.length&&(t=this.type,n=this.questions.length-e.length),this.$router.replace({query:{ids:e.length?e.join(","):void 0,type:t,quantity:n}})},removeQuestion:(O=Object(a.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.b({icon:"warning",title:"Remove question?",text:"This cannot be undone."});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:this.questions=this.questions.filter((function(e){return e!==t})),this.updateQuery();case 6:case"end":return e.stop()}}),e,this)}))),function(e){return O.apply(this,arguments)}),duplicateQuestion:function(e){var t=this.questions.indexOf(e);-1!==t&&(this.questions.splice(t+1,0,e.clone()),this.updateQuery())}})},I=(n("eIwD"),n("KHd+")),D=Object(I.a)(T,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.questions?n("HeaderContainer",{staticClass:"quiz-question-bulk-edit",scopedSlots:e._u([{key:"header",fn:function(){return[n("Navbar",{attrs:{title:"Bulk Question Edit",secondary:""},scopedSlots:e._u([{key:"left",fn:function(){return[n("NavbarButton",{attrs:{icon:"chevron-left",disabled:e.loading,text:"Questions",to:{name:"sway-questions-index"}}})]},proxy:!0},{key:"right",fn:function(){return[n("NavbarButton",{attrs:{text:"Cancel",disabled:e.loading,to:{name:"sway-questions-index"}}}),e._v(" "),n("NavbarButton",{attrs:{text:"Save",type:"default",disabled:e.loading},on:{action:e.save}})]},proxy:!0}],null,!1,3541541539)})]},proxy:!0}],null,!1,2159383743)},[e._v(" "),n("div",{staticClass:"qqbe-container"},[n("FormLayout",{staticClass:"qqbe-layout"},[n("FormLayoutRow",{attrs:{label:"Level"}},[n("EdInput",{directives:[{name:"autofocus",rawName:"v-autofocus"}],staticClass:"qqbe-input",attrs:{disabled:e.loading},model:{value:e.level,callback:function(t){e.level=t},expression:"level"}})],1),e._v(" "),n("FormLayoutRow",{attrs:{label:"Topic"}},[n("EdInput",{staticClass:"qqbe-input",attrs:{disabled:e.loading},model:{value:e.topic,callback:function(t){e.topic=t},expression:"topic"}})],1),e._v(" "),n("FormLayoutRow",{attrs:{label:"Category"}},[n("EdInput",{staticClass:"qqbe-input",attrs:{disabled:e.loading},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}})],1),e._v(" "),n("FormLayoutRow",{attrs:{label:"Subcategory"}},[n("EdInput",{staticClass:"qqbe-input",attrs:{disabled:e.loading},model:{value:e.subcategory,callback:function(t){e.subcategory=t},expression:"subcategory"}})],1),e._v(" "),n("FormLayoutRow",{attrs:{label:"Difficulty"}},[n("EdInput",{staticClass:"qqbe-input",attrs:{disabled:e.loading},model:{value:e.difficulty,callback:function(t){e.difficulty=t},expression:"difficulty"}})],1)],1),e._v(" "),e._l(e.questions,(function(t,s){return n("QuizQuestionElement",{key:t.id?"existing-"+t.id:"new-"+s,staticClass:"qqbe-question",attrs:{value:t.quizQuestion,number:e.questions.length>1?String(s+1):null,disabled:e.loading,assessible:"",editable:""},scopedSlots:e._u([{key:"actions",fn:function(){return[n("QuizElementAction",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Remove",expression:"'Remove'"}],attrs:{icon:"clear",disabled:e.loading||e.questions.length<=1},on:{click:function(n){return e.removeQuestion(t)}}}),e._v(" "),n("QuizElementAction",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Duplicate",expression:"'Duplicate'"}],attrs:{icon:"copy",disabled:e.loading},on:{click:function(n){return e.duplicateQuestion(t)}}})]},proxy:!0}],null,!0)})}))],2)]):e._e()}),[],!1,null,null,null);t.default=D.exports},ZQNl:function(e,t,n){},ZVI5:function(e,t,n){},ZVif:function(e,t,n){},Zc98:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("qePV"),n("5DmW"),n("27RR"),n("tkto"),n("Rm1S"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("L2JU"),l=n("Q2AE"),c=n("hSdx"),u=n("/Yj0"),d=n("t19P"),h=n("TphV"),p=n("2PkB"),f=n("CSuK");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b,g={components:{HeaderContainer:d.a,Navbar:h.a,NavbarButton:p.a,ChallengeEditor:f.a},inject:["keyboardShortcutManager"],props:{challengeId:{type:Number,required:!0}},data:function(){return{loading:!1}},computed:v({},Object(o.e)(["course"]),{type:function(){return this.$route.name.match(/^assessment/)?"assessment":"challenge"},indexBtnText:function(){return c.titleCase(this.type)+"s"},showBtnText:function(){return"Show ".concat(c.titleCase(this.type))},title:function(){return"Edit "+c.titleCase(this.type)},cancelRoute:function(){return this.$lastPathRoute&&this.$lastPathRoute.name!==this.$route.name?this.$lastPathRoute:{name:this.type+"s"}}}),created:function(){this.disposable=this.keyboardShortcutManager.register({default:"Control+s",mac:"Meta+s"},this.save,{description:"Save challenge"})},mounted:function(){this.setDisallowMediaSm(!0),this.setNavbarVisible(!0)},destroyed:function(){this.disposable.dispose(),this.setDisallowMediaSm(!1),this.setNavbarVisible(!1)},shouldConfirmRouteUpdate:function(e,t){return e.params.courseId!==t.params.courseId||e.params.challengeId!==t.params.challengeId},routeUpdateMessage:function(){var e=this;if(this.$refs.editor.dirty)return{message:"You have unsaved changes to this ".concat(this.type,"."),callback:function(){return e.save()}}},methods:v({},Object(o.d)({setDisallowMediaSm:l.c.SET_DISALLOW_MEDIA_SM,setNavbarVisible:l.c.SET_NAVBAR_VISIBLE}),{save:(b=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loading){e.next=2;break}return e.abrupt("return");case 2:return this.loading=!0,e.prev=3,e.next=6,this.$refs.editor.save();case 6:u.b({type:"success",title:"Saved ".concat(this.type," successfully")}),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),"string"!=typeof e.t0&&u.b({type:"error",title:"Unable to save ".concat(this.type)}),e.abrupt("return",!1);case 13:return e.prev=13,this.loading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[3,9,13,16]])}))),function(){return b.apply(this,arguments)})})},y=(n("/sYl"),n("KHd+")),w=Object(y.a)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("HeaderContainer",{staticClass:"challenge-edit",scopedSlots:e._u([{key:"header",fn:function(){return[n("Navbar",{attrs:{title:e.title,secondary:""},scopedSlots:e._u([{key:"left",fn:function(){return[n("NavbarButton",{attrs:{icon:"chevron-left",text:e.indexBtnText,to:{name:e.type+"s"}}})]},proxy:!0},{key:"right",fn:function(){return[n("NavbarButton",{attrs:{text:e.showBtnText,to:{name:e.type+"-show"}}}),e._v(" "),n("NavbarButton",{attrs:{text:"Cancel",to:e.cancelRoute}}),e._v(" "),n("NavbarButton",{attrs:{text:"Save",type:"default"},on:{action:e.save}})]},proxy:!0}])})]},proxy:!0}])},[e._v(" "),n("div",{staticClass:"che-container"},[n("ChallengeEditor",{ref:"editor",attrs:{course:e.course,"challenge-id":e.challengeId},on:{save:e.save}})],1)])}),[],!1,null,null,null);t.default=w.exports},ZcRu:function(e,t,n){"use strict";var s=n("7iXl");n.n(s).a},ZdC8:function(e,t,n){},ZoNg:function(e,t,n){},Zqso:function(e,t,n){"use strict";var s=n("hc6M");n.n(s).a},Zv1D:function(e,t,n){"use strict";n.r(t);n("CIk+");window.jQuery=n("EVdn")},ZvYO:function(e,t,n){"use strict";var s=n("xNPl");n.n(s).a},ZxZy:function(e,t,n){},ZxlL:function(e,t,n){"use strict";var s=n("7K5c");n.n(s).a},a3sl:function(e,t,n){"use strict";var s=n("wwwM");n.n(s).a},aExP:function(e,t,n){"use strict";var s=n("/PA5");n.n(s).a},aFKc:function(e,t,n){"use strict";var s=n("AJ9M");n.n(s).a},aG81:function(e,t,n){},aMaT:function(e,t,n){},aOZV:function(e,t,n){},aSSg:function(e,t,n){},aXZW:function(e,t,n){"use strict";var s=n("Etp7");n.n(s).a},abSr:function(e,t,n){"use strict";var s={props:{item:{type:null,required:!0}}},i={extends:s},r=(n("+Afr"),n("KHd+")),a=Object(r.a)(i,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"quiz-item-show-empty"},[this._t("default")],2)}),[],!1,null,null,null).exports,o=n("ltWs"),l=n("VYah"),c=n("YxxY"),u=n("gnd6"),d={components:{AmberDisplay:o.a,Split:l.a,SplitPanel:c.a,ReadingPassageDisplay:u.a},extends:s,data:function(){return{splitFracLeft:1,splitFracRight:1}}},h=(n("BriU"),{empty:a,"reading-passage":Object(r.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quiz-item-show-rp"},[n("Split",{staticClass:"qisrp-split",attrs:{orientation:"horizontal"}},[n("SplitPanel",{attrs:{frac:e.splitFracLeft},on:{"update:frac":function(t){e.splitFracLeft=t}}},[n("div",{staticClass:"qisrp-side left"},[n("div",{staticClass:"qisrp-container"},[n("ReadingPassageDisplay",{attrs:{value:e.item.passage,"line-numbers":e.item.lineNumbers,"passage-style":e.item.style},on:{spans:function(t){return e.$emit("event",{type:"spans",event:t})}}})],1)])]),e._v(" "),n("SplitPanel",{attrs:{frac:e.splitFracRight},on:{"update:frac":function(t){e.splitFracRight=t}}},[n("div",{staticClass:"qisrp-side right"},[n("div",{staticClass:"qisrp-container"},[n("AmberDisplay",{attrs:{value:e.item.content}}),e._v(" "),e._t("default")],2)])])],1)],1)}),[],!1,null,null,null).exports}),p={props:{item:{type:Object,required:!0}},computed:{itemComponent:function(){return h[this.item.type]}}},f=(n("mCHH"),Object(r.a)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quiz-item-show"},[n(e.itemComponent,{tag:"component",attrs:{item:e.item},on:{input:function(t){return e.$emit("input",t)},valid:function(t){return e.$emit("valid",t)},event:function(t){return e.$emit("event",t)}}},[e._t("default")],2)],1)}),[],!1,null,null,null));t.a=f.exports},ak9R:function(e,t,n){},ammm:function(e,t,n){"use strict";var s=n("VcWu");n.n(s).a},ar59:function(e,t,n){"use strict";var s=n("tK0z");n.n(s).a},aunw:function(e,t,n){},awxY:function(e,t,n){"use strict";var s=n("v2Iu");n.n(s).a},"b/5E":function(e,t,n){"use strict";var s=n("IL6b");n.n(s).a},"b/Uo":function(e,t,n){},"b/yj":function(e,t,n){"use strict";var s,i=n("o0o1"),r=n.n(i),a=(n("ls82"),n("HaE+")),o=n("1lsy"),l={props:{latex:{type:String,default:""},display:{type:Boolean,default:void 0},tag:{type:String,default:void 0}},computed:{computedTag:function(){return this.tag?this.tag:this.display||null==this.display?"div":"span"}},watch:{latex:"update",display:"update"},mounted:function(){this.update()},methods:{update:(s=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$el.textContent=this.latex||"",this.$emit("updating",!0),e.prev=2,e.next=5,Object(o.a)(this.$el,{display:this.display});case 5:return e.prev=5,this.$emit("updating",!1),e.finish(5);case 8:case"end":return e.stop()}}),e,this,[[2,,5,8]])}))),function(){return s.apply(this,arguments)})}},c=n("KHd+"),u=Object(c.a)(l,(function(){var e=this.$createElement;return(this._self._c||e)(this.computedTag,{tag:"component"})}),[],!1,null,null,null);t.a=u.exports},b9Xl:function(e,t,n){},bHgy:function(e,t,n){},bI3l:function(e,t,n){},bMvi:function(e,t,n){},bNVp:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("UxlC"),n("SYor"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=(n("4D86"),n("L2JU")),l=n("NC1X"),c=n("IbLZ"),u=n("loy4"),d=n("bfN9");function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var p,f,m,v={name:"StartLogin",components:{Spinner:l.a,EdField:c.a},inject:["sessionService","edApi","courseApi"],data:function(){return{ready:!1,loading:!1,email:"",password:"",failedAttempts:0,message:null,passwordMessage:!1,loginType:null}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.e)(["blockingLockdownRoute"]),{forgotPasswordRoute:function(){var e={};return this.email&&(e.email=this.email),{name:"forgot-password",query:e}},loggedInRedirectionRoute:function(){return this.blockingLockdownRoute||this.$route.query.redirect||{name:"dashboard"}}}),mounted:(m=Object(r.a)(i.a.mark((function e(){var t,n,s,r,a,o,l,c,d=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.redirectionIfLoggedIn())){e.next=4;break}return this.$router.replace(t),e.abrupt("return");case 4:if(n=this.$route.query,s=n.auth,r=n.reauth,a=n.redirect,!s&&!r||!a){e.next=20;break}if(!(o=this.$router.resolve(a)).route.matched.some((function(e){return"course"===e.name}))){e.next=20;break}return l=o.route.params.courseId,e.prev=9,e.next=12,this.courseApi.getOAuthInfo(l);case 12:c=e.sent,e.next=17;break;case 15:e.prev=15,e.t0=e.catch(9);case 17:if(!c||!c.hasOAuth){e.next=20;break}return this.edApi.oauthLogin(o.route.params.courseId,a),e.abrupt("return");case 20:return this.ready=!0,e.next=23,this.$nextTick();case 23:this.$refs.email.focus(),setTimeout((function(){var e=u.get("lastEmail");e&&!d.email&&(d.email=e)}),100),"oauth_no_user"===this.$route.query.error?this.message="Cannot log in because you do not have an Ed account. Speak to your instructor for the course access code.":this.$route.query.auth?this.message="Log in to continue.":this.$route.query.reauth?this.message="Your session has expired.\nLog in to continue.":this.$route.query.invalidlogintoken&&(this.message="Your login token has expired.\nLog in again to continue.");case 26:case"end":return e.stop()}}),e,this,[[9,15]])}))),function(){return m.apply(this,arguments)}),beforeRouteUpdate:function(e,t,n){var s=this.redirectionIfLoggedIn();s?n(s):n()},methods:{onEmailKeyup:function(e){var t=Object(d.a)(e);t&&(this.$refs.password.select(),this.email=t)},back:function(){var e=this;this.email="",this.password="",this.message=null,this.passwordMessage=!1,this.failedAttempts=0,this.loginType=null,this.$nextTick((function(){return e.$refs.email.focus()}))},continueAuth:function(){this.message="",this.passwordMessage=!1,this.loginType?this.login():this.validateEmail()},validateEmail:(f=Object(r.a)(i.a.mark((function e(){var t,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.email=this.email.trim(),this.email){e.next=5;break}return this.message="Enter your email.",this.$refs.email.focus(),e.abrupt("return");case 5:return this.loading=!0,e.prev=6,e.next=9,this.sessionService.getLoginType(this.email,this.$route.query.redirect);case 9:t=e.sent,e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(6),setTimeout((function(){n.loading=!1,n.message="Unable to log in.",n.$nextTick((function(){return n.$refs.email.select()}))}),500),e.abrupt("return");case 16:this.loginType=t.type,e.t1=this.loginType,e.next="invalid"===e.t1?20:"password"===e.t1?23:"saml"===e.t1?26:"sent-email"===e.t1?29:"wait-email"===e.t1?33:37;break;case 20:return this.loginType=null,setTimeout((function(){n.loading=!1,n.message="Invalid email address.",n.$nextTick((function(){return n.$refs.email.select()}))}),500),e.abrupt("break",37);case 23:return this.loading=!1,this.$nextTick((function(){return n.$refs.password.focus()})),e.abrupt("break",37);case 26:return this.message="Redirecting...",location.href=t.url,e.abrupt("break",37);case 29:return this.loading=!1,this.passwordMessage=!0,this.message="We just emailed a login link to you.\nClick the link to sign in.",e.abrupt("break",37);case 33:return this.loading=!1,this.passwordMessage=!0,this.message="We recently emailed a login link to you.\nClick the link to sign in.",e.abrupt("break",37);case 37:case"end":return e.stop()}}),e,this,[[6,12]])}))),function(){return f.apply(this,arguments)}),login:(p=Object(r.a)(i.a.mark((function e(){var t,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.password){e.next=4;break}return this.message="Enter your password.",this.$refs.password.focus(),e.abrupt("return");case 4:return this.loading=!0,e.prev=5,e.next=8,this.sessionService.logInWithCredentials(this.email,this.password);case 8:t=e.sent,e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(5),setTimeout((function(){n.loading=!1,n.password="",n.$nextTick((function(){return n.$refs.password.focus()})),n.message="Unable to log in."}),500),e.abrupt("return");case 15:t?this.$router.replace(this.loggedInRedirectionRoute):setTimeout((function(){n.loading=!1,n.password="",n.failedAttempts++,n.message="Email or password is incorrect.",n.$nextTick((function(){return n.$refs.password.focus()}))}),500);case 16:case"end":return e.stop()}}),e,this,[[5,11]])}))),function(){return p.apply(this,arguments)}),redirectionIfLoggedIn:function(){if(this.sessionService.authToken)return this.loggedInRedirectionRoute}}},b=(n("QBce"),n("KHd+")),g=Object(b.a)(v,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"start-container"},[s("form",{staticClass:"start-form",attrs:{method:"POST",novalidate:""},on:{submit:function(t){return t.preventDefault(),e.continueAuth(t)}}},[s("div",{staticClass:"start-title"},[s("RouterLink",{attrs:{to:"/"}},[e._v("Ed")])],1),e._v(" "),e.loginType?s("div",{staticClass:"start-user"},[s("img",{staticClass:"start-user-avatar",attrs:{src:n("YRNq")}}),e._v(" "),s("div",{staticClass:"start-user-email"},[e._v(e._s(e.email))])]):e._e(),e._v(" "),s("transition",[e.message?s("div",{staticClass:"start-message start-message-error"},[e._v(e._s(e.message))]):e._e()]),e._v(" "),e.passwordMessage?s("div",{staticClass:"start-message"},[s("p",[e._v("Set a password on your account so you won't need to wait for the email next time!")])]):e._e(),e._v(" "),e.ready?[s("EdField",{directives:[{name:"show",rawName:"v-show",value:!e.loginType,expression:"!loginType"}],staticClass:"start-field",scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Email")]},proxy:!0}])},[e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],ref:"email",staticClass:"start-input",attrs:{type:"text",name:"email",autocomplete:"off",autocorrect:"off",readonly:!!e.loginType,disabled:e.loading},domProps:{value:e.email},on:{keyup:e.onEmailKeyup,input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),"password"===e.loginType?s("EdField",{staticClass:"start-field",scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Password")]},proxy:!0}],null,!1,2457811812)},[e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],ref:"password",staticClass:"start-input",attrs:{type:"password",autocomplete:"current-password",name:"password",disabled:e.loading},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]):e._e(),e._v(" "),e.loginType&&"password"!==e.loginType?e._e():s("button",{staticClass:"start-btn",attrs:{type:"submit",disabled:e.loading}},[e._v("\n\t\t\t\t"+e._s("password"===e.loginType?"Log in":"Continue")+"\n\t\t\t\t"),e.loading?s("Spinner",{staticClass:"start-spinner"}):e._e()],1),e._v(" "),s("div",{staticClass:"start-footer"},[s("p",[s("RouterLink",{attrs:{to:e.forgotPasswordRoute}},[e._v("Forgot password?")])],1),e._v(" "),e.loginType&&"saml"!==e.loginType?s("p",[s("a",{on:{click:e.back}},[e._v("Log in with a different email")])]):e._e()]),e._v(" "),s("transition",[e.failedAttempts>=2?s("div",{staticClass:"start-result"},[e._v("\n\t\t\t\t\tYou can reset your password by clicking on the Forgot password? link above.\n\t\t\t\t")]):e._e()])]:s("Spinner",{staticClass:"login-spinner"})],2),e._v(" "),s("div",{staticClass:"login-footer-container"},[s("footer",{staticClass:"login-footer"},[s("RouterLink",{attrs:{to:{name:"terms"}}},[e._v("Terms")]),e._v(" "),s("RouterLink",{attrs:{to:{name:"privacy"}}},[e._v("Privacy")])],1)])])}),[],!1,null,null,null);t.default=g.exports},bRKa:function(e,t,n){},bU01:function(e,t,n){},bVVb:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("4Brf"),n("0oug"),n("TeQF"),n("fbCW"),n("x0AG"),n("4mDm"),n("2B1R"),n("pDQq"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("YGK4"),n("PKPk"),n("UxlC"),n("FZtP"),n("3bBZ");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("KQm4"),o=n("rePB"),l=n("Kw5r"),c=n("L2JU"),u=n("vlv3"),d=n("OBDa"),h=n("6XG0"),p=n("WmPt"),f=n("4K9I"),m={components:{DialogLayout:d.a,EdCheck:h.a,Icon:p.a,EdButton:f.a},data:function(){return{quiz:null,options:{mode:"sequential",shuffleItems:!1,shuffleAnswers:!1,immediateFeedback:!0}}},methods:{onSubmit:function(){"paced"===this.options.mode&&(this.options.shuffleItems=!1),this.$emit("done",{quiz:this.quiz,options:this.options})}}},v=(n("0M2/"),n("KHd+")),b=Object(v.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogLayout",{staticClass:"sway-launch-sheet",attrs:{title:"Launch Activity",subtitle:e.quiz.name},on:{submit:e.onSubmit},scopedSlots:e._u([{key:"primaryActions",fn:function(){return[n("EdButton",{staticClass:"primary",attrs:{type:"submit"}},[e._v("Launch")])]},proxy:!0}])},[n("div",{staticClass:"sls-body"},[n("h2",{staticClass:"sls-heading"},[e._v("Select the activity mode")]),e._v(" "),n("div",{staticClass:"sls-modes"},[n("div",{staticClass:"sls-mode",class:{selected:"sequential"===e.options.mode},on:{click:function(t){e.options.mode="sequential"}}},[n("Icon",{staticClass:"sls-mode-icon",attrs:{icon:"sway-sequential"}}),e._v(" "),n("div",{staticClass:"sls-mode-label"},[e._v("Sequential")])],1),e._v(" "),n("div",{staticClass:"sls-mode",class:{selected:"open"===e.options.mode},on:{click:function(t){e.options.mode="open"}}},[n("Icon",{staticClass:"sls-mode-icon",attrs:{icon:"sway-open"}}),e._v(" "),n("div",{staticClass:"sls-mode-label"},[e._v("Open")])],1),e._v(" "),n("div",{staticClass:"sls-mode",class:{selected:"fullpage"===e.options.mode},on:{click:function(t){e.options.mode="fullpage"}}},[n("Icon",{staticClass:"sls-mode-icon",attrs:{icon:"sway-fullpage"}}),e._v(" "),n("div",{staticClass:"sls-mode-label"},[e._v("Fullpage")])],1),e._v(" "),n("div",{staticClass:"sls-mode",class:{selected:"paced"===e.options.mode},on:{click:function(t){e.options.mode="paced"}}},[n("Icon",{staticClass:"sls-mode-icon",attrs:{icon:"sway-paced"}}),e._v(" "),n("div",{staticClass:"sls-mode-label"},[e._v("Teacher Paced")])],1)]),e._v(" "),n("p",{staticClass:"sls-text"},["sequential"===e.options.mode?[e._v("Students complete each question in order, one at a time")]:e._e(),e._v(" "),"open"===e.options.mode?[e._v("Students can attempt each question in any order, one at a time")]:e._e(),e._v(" "),"fullpage"===e.options.mode?[e._v("All questions are shown on the page at once")]:e._e(),e._v(" "),"paced"===e.options.mode?[e._v("The teacher controls the question shown to students")]:e._e()],2),e._v(" "),n("h2",{staticClass:"sls-heading"},[e._v("Options")]),e._v(" "),n("EdCheck",{directives:[{name:"show",rawName:"v-show",value:"paced"!==e.options.mode,expression:"options.mode !== 'paced'"}],staticClass:"sls-check",attrs:{label:"Shuffle questions"},model:{value:e.options.shuffleItems,callback:function(t){e.$set(e.options,"shuffleItems",t)},expression:"options.shuffleItems"}}),e._v(" "),n("EdCheck",{staticClass:"sls-check",attrs:{label:"Shuffle multiple choice options"},model:{value:e.options.shuffleAnswers,callback:function(t){e.$set(e.options,"shuffleAnswers",t)},expression:"options.shuffleAnswers"}}),e._v(" "),"survey"!==e.quiz.type?n("EdCheck",{staticClass:"sls-check",attrs:{label:"Display answer after submitting each question"},model:{value:e.options.immediateFeedback,callback:function(t){e.$set(e.options,"immediateFeedback",t)},expression:"options.immediateFeedback"}}):e._e()],1)])}),[],!1,null,null,null).exports,g=(n("yq1k"),n("ToJy"),n("Tskq"),n("JTJg"),n("bt/X")),y=n.n(g),w=n("0XH5"),_=n("Dm8+"),k=n("NC1X"),C=n("/Yj0"),x=n("hSdx");function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var O,S,E={components:{DialogLayout:d.a,SearchInput:w.a,ListView:_.a,Spinner:k.a,EdButton:f.a},inject:["swayApi"],data:function(){return{loading:!1,importing:!1,quizzes:[],searchQuery:"",selectedQuiz:null}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(c.e)(["user","course"]),{filteredQuizzes:function(){var e=this,t=new Set(this.user.courses.filter((function(t){return x.validateSubstrDeep(t,e.searchQuery,"code")})).map((function(e){return e.id})));return this.quizzes.filter((function(n){return t.has(n.courseId)||x.validateSubstrDeep(n,e.searchQuery,"name")}))},groups:function(){var e=new Map(this.user.courses.map((function(e){return[e.id,e]}))),t=y()(this.filteredQuizzes,(function(e){return e.courseId}));return Object.keys(t).map((function(n){var s=e.get(+n);return s&&{course:s,quizzes:t[n].sort((function(e,t){return x.naturalComparator(e.name,t.name)}))}})).filter(Boolean).sort((function(e,t){return x.naturalComparator(e.course.name,t.course.name)}))}}),watch:{filteredQuizzes:function(){this.selectedQuiz&&!this.filteredQuizzes.includes(this.selectedQuiz)&&(this.selectedQuiz=null)}},created:function(){this.update()},methods:{update:(S=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.swayApi.getUserQuizzes(this.user.id);case 4:this.quizzes=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),C.b({type:"error",text:"Unable to fetch activities."});case 10:return e.prev=10,this.loading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[1,7,10,13]])}))),function(){return S.apply(this,arguments)}),importQuiz:(O=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.importing=!0,e.prev=1,e.next=4,this.swayApi.cloneQuiz(this.selectedQuiz.id,this.course.id);case 4:t=e.sent,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(1),this.importing=!1,C.b({type:"error",text:"Unable to import activity."}),e.abrupt("return");case 12:C.b({type:"success",text:"Imported activity successfully."}),this.$emit("done",t);case 14:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(){return O.apply(this,arguments)})}},T=(n("Qg11"),Object(v.a)(E,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogLayout",{staticClass:"sheet-quiz-import",attrs:{title:"Import Activity",disabled:e.importing},scopedSlots:e._u([{key:"primaryActions",fn:function(){return[n("EdButton",{staticClass:"primary",attrs:{disabled:e.importing||!e.selectedQuiz},on:{click:e.importQuiz}},[e._v("Import Activity")])]},proxy:!0}])},[n("p",{staticClass:"sqzim-info"},[e._v("\n\t\tSelect the activity from the list below that you want to import into this\n\t\tlesson. You may only import activities from courses in which you have\n\t\t"),n("strong",[e._v("staff")]),e._v(" access.\n\t")]),e._v(" "),n("SearchInput",{model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),e._v(" "),e.loading?n("Spinner",{staticClass:"sqzim-spinner"}):n("ListView",{staticClass:"sqzim-list",attrs:{items:e.groups,"items-selector":function(e){return e.quizzes},"item-key":function(e){return e.id},"group-key":function(e){return e.course.id},"selected-item":e.selectedQuiz,grouped:""},on:{"update:selectedItem":function(t){e.selectedQuiz=t},"update:selected-item":function(t){e.selectedQuiz=t}},scopedSlots:e._u([{key:"group-header",fn:function(t){var s=t.group;return[n("div",{staticClass:"sqzim-header"},[e._v("\n\t\t\t\t"+e._s(s.course.code)+" – "+e._s(s.course.year)+" "+e._s(s.course.session)+"\n\t\t\t\t"+e._s(s.course.id===e.course.id?"(this course)":"")+"\n\t\t\t")])]}},{key:"item",fn:function(t){var s=t.item;return[n("div",{staticClass:"sqzim-item"},[e._v("\n\t\t\t\t"+e._s(s.name)+"\n\t\t\t")])]}}])})],1)}),[],!1,null,null,null).exports),I=n("Oshs"),D=n("1BOd"),P=n("clw3");function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R={name:"SwayMaster",components:{SheetContainer:I.a},inject:["swayApi","networkMonitorService","sessionService","streamService","eventBus"],data:function(){return{session:null,appbar:{titleLarge:"%PREV% – Sway"}}},computed:N({},Object(c.e)(["course"]),{},Object(c.e)("sway",["activities","loadingActivities"]),{attempts:function(){var e=[],t=!0,n=!1,s=void 0;try{for(var i,r=this.activities[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var o=i.value;o.result&&e.push.apply(e,Object(a.a)(o.result.attempts))}}catch(l){n=!0,s=l}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}return e}}),created:function(){this.session=new D.b(this.networkMonitorService,this.eventBus),this.session.courseId=this.course.id,this.session.token=this.sessionService.authToken,this.session.connect(),this.setLoadingActivities(!0),this.disposables=new P.a(this.eventBus.on("sway:launch",this.onSwayLaunch),this.eventBus.on("sway:quiz-import",this.onSwayQuizImport),this.eventBus.on("sway:attempt-begin",this.onSwayAttemptBegin),this.eventBus.on("sway:attempt-end",this.onSwayAttemptEnd),this.eventBus.on("sway:results",this.onSwayResults),this.eventBus.on("sway:activities",this.onSwayActivities),this.eventBus.on("sway:activity-item",this.onSwayActivityItem),this.eventBus.on("sway:activity-end",this.onSwayActivityEnd),this.eventBus.on("sway:activity-question",this.onSwayActivityQuestion),this.eventBus.on("sway:attempt",this.onSwayAttempt),this.eventBus.on("sway:response",this.onSwayResponse),this.eventBus.on("sway:responses-deleted",this.onSwayResponsesDeleted),this.eventBus.on("stream:quiz.new",this.onStreamQuizNew),this.eventBus.on("stream:quiz.update",this.onStreamQuizNew),this.eventBus.on("stream:quiz.delete",this.onStreamQuizDelete),this.streamService.subscribe("sway",this.course.id),this.session),this.course.features.sway||this.$router.replace({name:"course"})},destroyed:function(){this.disposables.dispose(),this.session.disconnect(),this.resetState()},methods:N({},Object(c.d)("sway",{resetState:u.c.RESET,addQuizzes:u.c.ADD_QUIZZES,removeQuizzes:u.c.REMOVE_QUIZZES,addResults:u.c.ADD_RESULTS,clearResults:u.c.CLEAR_RESULTS,addActivities:u.c.ADD_ACTIVITIES,setLoadingActivities:u.c.SET_LOADING_ACTIVITIES}),{},Object(c.b)("sway",{loadSwayData:u.a.LOAD_SWAY_DATA}),{onSwayLaunch:function(e){var t=this,n=l.default.extend(b).extend({data:function(){return{quiz:e.quiz}}});this.$refs.sheetContainer.showSheet(n,function(){var e=Object(r.a)(i.a.mark((function e(n){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$refs.sheetContainer.closeSheet(),n){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,t.swayApi.launchActivity(n.quiz.id,n.options);case 6:s=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),e.t0.data&&e.t0.data.message&&/no questions/i.test(e.t0.data.message)?C.b({type:"error",title:"Cannot launch activity",text:"Activity has no questions."}):C.b({type:"error",text:"Could not launch quiz."}),e.abrupt("return");case 13:C.b({type:"success",text:'Quiz "'.concat(n.quiz.name,'" launched.')}),t.$router.push({name:"sway-activities-host",params:{quizId:s.quizId}});case 15:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}())},onSwayQuizImport:function(){var e=this;this.$refs.sheetContainer.showSheet(T,Object(r.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.sheetContainer.closeSheet();case 1:case"end":return t.stop()}}),t)}))))},onSwayAttemptBegin:function(e){this.session.beginAttemptSession(e)},onSwayAttemptEnd:function(){this.session.endAttemptSession()},onSwayResults:function(e){var t=!0,n=!1,s=void 0;try{for(var i,r=e.results[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){i.value.active=!0}}catch(a){n=!0,s=a}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}this.addResults(e.results)},onSwayActivities:function(e){this.loadingActivities&&this.setLoadingActivities(!1);var t=!0,n=!1,s=void 0;try{for(var i,r=e.activities[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){i.value.active=!0}}catch(a){n=!0,s=a}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}this.addActivities(e.activities)},onSwayActivityEnd:function(e){var t=this.activities.find((function(t){return t.quizId===e.quizId}));t&&(t.active=!1)},onSwayActivityQuestion:function(e){var t=this.activities.find((function(t){return t.quizId===e.quizId}));if(t&&t.result){var n=t.result.questions.find((function(t){return t.id===e.question.id}));n&&(n.active=e.question.active),(n=t.quiz.questions.find((function(t){return t.id===e.question.id})))&&(n.active=e.question.active)}},onSwayAttempt:function(e){var t=e.attempt,n=this.activities.find((function(e){return e.quiz.id===t.quizId}));n&&n.result&&!n.result.attempts.find((function(e){return e.id===t.id}))&&n.result.attempts.push(t)},onSwayResponse:function(e){var t=e.response,n=this.attempts.find((function(e){return e.id===t.attemptId}));if(n){var s=n.responses.findIndex((function(e){return e.questionId===t.questionId}));-1!==s&&n.responses.splice(s,1),n.responses.push(t)}},onSwayActivityItem:function(e){var t=!0,n=!1,s=void 0;try{for(var i,r=this.activities[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;if(a.result){var o=!0,l=!1,c=void 0;try{for(var u,d=a.result.items[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var h=u.value;if(h.id===e.item.id)return void(h.active=e.item.active)}}catch(p){l=!0,c=p}finally{try{o||null==d.return||d.return()}finally{if(l)throw c}}}}}catch(p){n=!0,s=p}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}},onSwayResponsesDeleted:function(e){var t=e.itemId,n=!0,s=!1,i=void 0;try{for(var r,a=this.activities[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value;if(o.result){var l=!0,c=!1,u=void 0;try{for(var d,h=o.result.attempts[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var p=d.value,f=o.result.items.find((function(e){return e.id===t}));f&&function(){var e=new Set(f.questions.map((function(e){return e.id})));p.responses=p.responses.filter((function(t){return!e.has(t.questionId)}))}()}}catch(m){c=!0,u=m}finally{try{l||null==h.return||h.return()}finally{if(c)throw u}}}}}catch(m){s=!0,i=m}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}},onStreamQuizNew:function(e){var t=e.data;this.addQuizzes([t.quiz])},onStreamQuizDelete:function(e){var t=e.data;this.removeQuizzes([t.quizId])}})},M=(n("Lhhi"),Object(v.a)(R,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"sway-master"},[t("RouterView"),this._v(" "),t("SheetContainer",{ref:"sheetContainer",staticClass:"swm-sheet-container"})],1)}),[],!1,null,null,null));t.default=M.exports},bfN9:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n("Rm1S"),n("SYor");function s(e){if("Backspace"!==e.key&&"Delete"!==e.key){var t=e.target.value.trim().toLowerCase();if(t.match(/^[a-z]{4}\d{4}$/))return t+"@uni.sydney.edu.au";if(t.match(/^z\d{7}$/))return t+"@unsw.edu.au"}}},bive:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("UxlC"),n("FZtP");var s=n("rePB"),i=n("L2JU"),r=n("Q2AE");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l={name:"Workspace",data:function(){return{appbar:{titleLarge:"%PREV% – Workspaces"}}},computed:o({},Object(i.e)(["course"])),created:function(){this.setDisallowMediaSm(!0),this.course.features.workspaces||this.$router.replace({name:"course"})},destroyed:function(){this.setDisallowMediaSm(!1)},methods:o({},Object(i.d)([r.c.SET_DISALLOW_MEDIA_SM]))},c=(n("G5to"),n("KHd+")),u=Object(c.a)(l,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"workspace-master"},[t("RouterView")],1)}),[],!1,null,null,null);t.default=u.exports},"bww/":function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("yq1k"),n("qePV"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("JfAA"),n("FZtP");var s,i=n("o0o1"),r=n.n(i),a=(n("ls82"),n("HaE+")),o=n("rePB"),l=n("L2JU"),c=n("K4j9"),u=n("2PkB"),d=n("43W2"),h=n("IbLZ"),p=n("6XG0"),f=n("xtk+"),m=n("WmPt"),v=n("sl2b"),b=n("hSdx"),g=n("/Yj0"),y=n("5/Cn"),w=n("3I1m"),_=n("BtCt"),k={props:{model:{type:Object,required:!0},savingSlide:{type:Boolean,default:!1}}},C=n("gD3A"),x={components:{Amber:C.a},extends:k},j=(n("BcHV"),n("KHd+")),O=Object(j.a)(x,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("Amber",{staticClass:"lessli-doc-amber",model:{value:e.model.content,callback:function(t){e.$set(e.model,"content",t)},expression:"model.content"}})}),[],!1,null,null,null).exports,S=n("0gpV"),E=n("4K9I"),T=n("9Arg"),I={components:{EmbedEx:S.a,EdField:h.a,EdButton:E.a},extends:k,data:function(){return{previewVisible:!1,filename:null}},created:function(){this.file=null},methods:{prepareForSave:(s=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.file);case 1:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)}),togglePreview:function(){this.previewVisible=!this.previewVisible},chooseFile:function(){var e=this;T.m((function(t){"application/pdf"!==t.type?y.d({icon:"error",title:"Invalid file type",text:"Please choose a valid PDF file.",primaryAction:"OK"}):(e.file=t,e.filename=t.name)}),{accept:["pdf"]})}}},D=(n("2qlP"),Object(j.a)(I,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"lesedit-slide-pdf"},[n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("PDF Document")]},proxy:!0}])},[e._v(" "),n("EdButton",{attrs:{disabled:e.savingSlide},on:{click:e.chooseFile}},[e._v("Choose File")]),e._v(" "),e.filename?n("span",{staticClass:"lesedit-slide-pdf-file"},[e._v("File: "+e._s(e.filename))]):e._e()],1),e._v(" "),e.model.fileUrl?n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Preview")]},proxy:!0}],null,!1,3621701777)},[e._v(" "),n("EdButton",{on:{click:e.togglePreview}},[e._v(e._s(e.previewVisible?"Hide":"Show")+" Existing PDF")]),e._v(" "),e.previewVisible?n("EmbedEx",{staticClass:"lesedit-slide-pdf-embed",attrs:{src:e.model.fileUrl,type:"application/pdf"}}):e._e()],1):e._e()],1)}),[],!1,null,null,null).exports),P=n("AuRJ"),A=n("CSuK");function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var R,M,L,F,B,q,$,U={components:{Amber:C.a,EdField:h.a,DateTimeField:P.a,ChallengeEditor:A.a},extends:k,computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(l.e)(["course"])),methods:{isDirty:function(){return this.$refs.editor.dirty},prepareForSave:function(){return this.$refs.editor.save()}}},z=(n("e7Lu"),Object(j.a)(U,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Description")]},proxy:!0}])},[e._v(" "),n("Amber",{staticClass:"lessli-code-amber",model:{value:e.model.content,callback:function(t){e.$set(e.model,"content",t)},expression:"model.content"}})],1),e._v(" "),n("ChallengeEditor",{ref:"editor",attrs:{course:e.course,"challenge-id":e.model.challengeId},scopedSlots:e._u([{key:"header",fn:function(t){var s=t.model,i=t.loading;return[n("EdField",{staticClass:"lessli-field-no-margin",scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Due")]},proxy:!0}],null,!0)},[e._v(" "),n("DateTimeField",{attrs:{placeholder:"Select a date",disabled:i},model:{value:s.due_at,callback:function(t){e.$set(s,"due_at",t)},expression:"model.due_at"}})],1)]}}])})],1)}),[],!1,null,null,null).exports),V=n("hH85"),H=n("R84W"),W={components:{VideoEmbed:V.a,Flexible:H.a,Amber:C.a,EdField:h.a,EdInput:f.a},extends:k},Q=(n("eUu8"),Object(j.a)(W,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Video URL")]},proxy:!0},{key:"description",fn:function(){return[e._v("Paste the video URL here.")]},proxy:!0}])},[e._v(" "),e._v(" "),n("EdInput",{attrs:{disabled:e.savingSlide},model:{value:e.model.videoUrl,callback:function(t){e.$set(e.model,"videoUrl",t)},expression:"model.videoUrl"}})],1),e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Video Preview")]},proxy:!0}])},[e._v(" "),n("Flexible",{attrs:{ratio:9/16}},[n("VideoEmbed",{attrs:{url:e.model.videoUrl}})],1)],1),e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Description")]},proxy:!0}])},[e._v(" "),n("Amber",{staticClass:"lesedit-slide-video-amber",model:{value:e.model.content,callback:function(t){e.$set(e.model,"content",t)},expression:"model.content"}})],1)],1)}),[],!1,null,null,null).exports),K={components:{EdField:h.a,EdInput:f.a,EdButton:E.a},extends:k,data:function(){return{previewVisible:!1}},watch:{"model.url":function(){this.previewVisible=!1}},methods:{togglePreview:function(){this.previewVisible=!this.previewVisible}}},Y=(n("4ct1"),Object(j.a)(K,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Webpage URL")]},proxy:!0},{key:"description",fn:function(){return[e._v("Paste the URL of the webpage you want to embed here.")]},proxy:!0}])},[e._v(" "),e._v(" "),n("EdInput",{attrs:{disabled:e.savingSlide},model:{value:e.model.url,callback:function(t){e.$set(e.model,"url",t)},expression:"model.url"}})],1),e._v(" "),e.model.url?n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Preview")]},proxy:!0}],null,!1,3621701777)},[e._v(" "),n("EdButton",{on:{click:e.togglePreview}},[e._v(e._s(e.previewVisible?"Hide":"Show"))]),e._v(" "),e.previewVisible?n("iframe",{staticClass:"lesedit-slide-webpage-preview",attrs:{src:e.model.url,sandbox:"allow-scripts allow-forms allow-same-origin allow-popups"}}):e._e()],1):e._e()],1)}),[],!1,null,null,null).exports),G=n("q6QK"),X=n("vfuN"),J={components:{EdField:h.a,EdButton:E.a,Codemirror:G.a,Sandbox:X.a},extends:k,data:function(){return{htmlPreview:""}},methods:{updatePreview:function(){this.htmlPreview=this.model.html}}},Z=(n("VvJX"),Object(j.a)(J,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("HTML")]},proxy:!0},{key:"description",fn:function(){return[e._v("Enter the complete webpage HTML that you want to embed.")]},proxy:!0}])},[e._v(" "),e._v(" "),n("Codemirror",{staticClass:"lesedit-slide-html-codemirror",attrs:{filename:".html",readonly:e.savingSlide,layout:"fill","line-numbers":""},model:{value:e.model.html,callback:function(t){e.$set(e.model,"html",t)},expression:"model.html"}})],1),e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Preview")]},proxy:!0}])},[e._v(" "),n("EdButton",{on:{click:e.updatePreview}},[e._v(e._s(e.htmlPreview?"Update":"Show"))]),e._v(" "),e.htmlPreview?n("Sandbox",{staticClass:"lesedit-slide-html-sandbox",attrs:{html:e.htmlPreview}}):e._e()],1)],1)}),[],!1,null,null,null).exports),ee=n("CfgT"),te={components:{EdCheck:p.a,QuestionEdit:ee.a},extends:k,methods:{prepareForSave:function(){var e=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.$refs.question.validate()){e.next=2;break}return e.abrupt("return",!1);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onFormattedInput:(R=Object(a.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}this.$refs.question.convertToFormatted(),e.next=8;break;case 4:return e.next=6,y.b({icon:"warning",title:"Convert to plain text?",text:"This will remove all text formatting and multimedia content (images, videos, etc) from the question.",primaryAction:"Remove Formatting"});case 6:if(!e.sent){e.next=8;break}this.$refs.question.convertToUnformatted();case 8:case"end":return e.stop()}}),e,this)}))),function(e){return R.apply(this,arguments)})}},ne=(n("cpuY"),Object(j.a)(te,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("EdCheck",{staticClass:"lesedit-slide-quizquestion-check",attrs:{label:"Formatting",description:"Enables rich text.",value:e.model.question.formatted,disabled:e.savingSlide},on:{input:e.onFormattedInput}}),e._v(" "),n("EdCheck",{staticClass:"lesedit-slide-quizquestion-check",attrs:{label:"Multiple Attempts",description:"If multiple attempts are allowed, the student can keep attempting multiple times until they answer the question correctly, otherwise only one attempt will be allowed and the solution will always be given after the first attempt.",disabled:e.savingSlide},model:{value:e.model.multipleAttempts,callback:function(t){e.$set(e.model,"multipleAttempts",t)},expression:"model.multipleAttempts"}}),e._v(" "),n("QuestionEdit",{ref:"question",attrs:{value:e.model.question,disabled:e.savingSlide,editable:"",assessible:""}})],1)}),[],!1,null,null,null).exports),se=(n("4Brf"),n("0oug"),n("ma9I"),n("fbCW"),n("x0AG"),n("4mDm"),n("2B1R"),n("+2oP"),n("ToJy"),n("PKPk"),n("3bBZ"),n("KQm4")),ie=n("Pa8A"),re=n("4cYw"),ae=n("N+tE"),oe=n("5DV3"),le=n("6Voy"),ce=n("E8Rg"),ue=n("/jHr"),de=n("DG43"),he=n("E2AO"),pe={directives:{Tooltip:ie.a},components:{EdField:h.a,EdSelect:re.a,Amber:C.a,DisclosureButton:ae.a,QuizQuestionElement:oe.a,QuizElementAction:le.a,NewQuestionButtons:ce.a},extends:k,inject:["lessonApi"],data:function(){return{spans:[],questions:[],questionModels:{},questionEditing:null,loadingQuestions:!1,passageVisible:!1}},computed:{disabled:function(){return this.loadingQuestions||this.savingSlide},newQuestionButtonTypes:function(){return[].concat(Object(se.a)(he.a.byQuizType.get("quiz").map((function(e){return{type:e.type,label:e.humanized}}))),[{type:"general",label:he.a.types.get("general").humanized}])},computedQuestions:function(){var e=this.questions,t=this.questionModels,n=this.questionEditing;return e.slice().sort((function(e,t){return e.index-t.index})).map((function(s,i){return{question:s,model:t[s.id],key:s.id||0,cssClass:{disabled:!n||n.id!==s.id},editable:n&&n.id===s.id,disabled:!n||n.id!==s.id,number:String(i+1),canMoveUp:!n&&i>0,canMoveDown:!n&&i<e.length-1}}))}},watch:{model:{immediate:!0,handler:function(e){this.passageVisible=e.passage&&!ue.c(e.passage)}}},created:function(){this.loadQuestions()},methods:{loadQuestions:(q=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingQuestions=!0,e.prev=1,e.next=4,this.lessonApi.getSlideQuestions(this.model.id);case 4:this.questions=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),g.b({type:"error",text:"Unable to load questions."}),e.abrupt("return");case 11:return e.prev=11,this.loadingQuestions=!1,e.finish(11);case 14:this.createModels();case 15:case"end":return e.stop()}}),e,this,[[1,7,11,14]])}))),function(){return q.apply(this,arguments)}),createModels:function(){var e={},t=!0,n=!1,s=void 0;try{for(var i,r=this.questions[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;e[a.id]=de.a(a)}}catch(o){n=!0,s=o}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}this.questionModels=e},prepareForSave:function(){var e=Object(a.a)(r.a.mark((function e(){var t,n=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.questionEditing){e.next=4;break}return t=this.computedQuestions.find((function(e){return e.question===n.questionEditing})),e.next=4,this.saveQuestion(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),beginQuestionEdit:function(e){this.questionEditing=e},cancelQuestionEdit:(B=Object(a.a)(r.a.mark((function e(){var t=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.questionEditing.id){e.next=6;break}return e.next=3,y.b({icon:"warning",title:"Question not saved",text:"You have not saved this question. It will be deleted if you proceed.",primaryAction:"Delete"});case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:this.questions=this.questions.filter((function(e){return e!==t.questionEditing}));case 6:this.questionEditing=null,this.createModels();case 8:case"end":return e.stop()}}),e,this)}))),function(){return B.apply(this,arguments)}),saveQuestion:(F=Object(a.a)(r.a.mark((function e(t){var n,s,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.question,s=t.model,e.prev=1,null!=n.id){e.next=8;break}return e.next=5,this.lessonApi.createQuestion(s);case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,this.lessonApi.updateQuestion(s);case 10:e.t0=e.sent;case 11:i=e.t0,e.next=18;break;case 14:return e.prev=14,e.t1=e.catch(1),g.b({type:"error",text:"Unable to save question."}),e.abrupt("return");case 18:this.questions=this.questions.map((function(e){return e===n?i:e})),this.questionEditing=null,this.createModels();case 21:case"end":return e.stop()}}),e,this,[[1,14]])}))),function(e){return F.apply(this,arguments)}),destroyQuestion:(L=Object(a.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.b({icon:"warning",title:"Delete this question?",text:"This cannot be undone.",primaryAction:"Delete"});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:if(null==t.id){e.next=15;break}return e.prev=5,e.next=8,this.lessonApi.deleteQuestion(t.id);case 8:e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(5),e.next=14,y.a({icon:"error",title:"Unable to delete question",text:"Check your internet connection or try again later."});case 14:return e.abrupt("return");case 15:this.questions=this.questions.filter((function(e){return e.id!==t.id})),this.createModels(),g.b({type:"success",text:"Question deleted."});case 18:case"end":return e.stop()}}),e,this,[[5,10]])}))),function(e){return L.apply(this,arguments)}),reorderQuestion:(M=Object(a.a)(r.a.mark((function e(t,n){var s,i,a,o,l,c,u,d,h;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=this.computedQuestions,-1!==(i=s.findIndex((function(e){return e.question.id===t.id})))){e.next=4;break}return e.abrupt("return");case 4:if((a=s[i+n+(n>0?1:0)])||!(n<0)){e.next=7;break}return e.abrupt("return");case 7:return o=a&&a.question,l=o?o.id:0,e.prev=9,e.next=12,this.lessonApi.reorderQuestion(t.id,l);case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(9),g.b({type:"error",text:"Unable to move question."}),e.abrupt("return");case 18:c=s[i+n].question,u=s.find((function(e){return e.question.id===t.id})).question,d=s.find((function(e){return e.question.id===c.id})).question,h=[d.index,u.index],u.index=h[0],d.index=h[1],this.createModels();case 25:case"end":return e.stop()}}),e,this,[[9,14]])}))),function(e,t){return M.apply(this,arguments)}),createQuestion:function(e){var t=de.b(e);t.slideId=this.model.id,t.index=1/0,this.questions.push(t),this.questionEditing=t,this.createModels()}}},fe=(n("wjZH"),Object(j.a)(pe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Mode")]},proxy:!0}])},[e._v(" "),n("EdSelect",{attrs:{disabled:e.disabled},model:{value:e.model.mode,callback:function(t){e.$set(e.model,"mode",t)},expression:"model.mode"}},[n("option",{attrs:{value:"one-attempt"}},[e._v("One Attempt")]),e._v(" "),n("option",{attrs:{value:"multiple-attempts"}},[e._v("Multiple Attempts")]),e._v(" "),n("option",{attrs:{value:"hide-solution"}},[e._v("Hide Solution")])])],1),e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Quiz Status")]},proxy:!0},{key:"description",fn:function(){return[e._v("\n\t\t\tEnded quizzes cannot be attempted and the results will be shown to\n\t\t\tstudents when they visit this slide.\n\t\t")]},proxy:!0}])},[e._v(" "),e._v(" "),n("EdSelect",{attrs:{disabled:e.disabled},model:{value:e.model.activeStatus,callback:function(t){e.$set(e.model,"activeStatus",t)},expression:"model.activeStatus"}},[n("option",{attrs:{value:"active"}},[e._v("Active")]),e._v(" "),n("option",{attrs:{value:"ended"}},[e._v("Ended")]),e._v(" "),n("option",{attrs:{value:"correctness"}},[e._v("Ended – Show Correctness")]),e._v(" "),n("option",{attrs:{value:"correctness-explanation"}},[e._v("Ended – Show Correctness and Solution")])])],1),e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[n("DisclosureButton",{model:{value:e.passageVisible,callback:function(t){e.passageVisible=t},expression:"passageVisible"}},[e._v("Passage")])]},proxy:!0},e.passageVisible?{key:"description",fn:function(){return[e._v("Enter the reading passage that will precede the questions.")]},proxy:!0}:null],null,!0)},[e._v(" "),e._v(" "),e.passageVisible?n("Amber",{staticClass:"lesedit-slide-quiz-passage",attrs:{disabled:e.disabled},model:{value:e.model.passage,callback:function(t){e.$set(e.model,"passage",t)},expression:"model.passage"}}):e._e()],1),e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Questions")]},proxy:!0},{key:"description",fn:function(){return[e._v("Construct one or more questions that the student must complete for this slide.")]},proxy:!0}])},[e._v(" "),e._v(" "),e._l(e.computedQuestions,(function(t){return n("QuizQuestionElement",{key:t.key,staticClass:"lesedit-slide-quiz-question",class:t.cssClass,attrs:{value:t.model.quizQuestion,editable:t.editable,disabled:e.disabled||!!e.questionEditing&&e.questionEditing!==t.question,number:t.number,spans:e.spans,"etc-tools":"","show-buttons":"",assessible:""},on:{edit:function(n){return e.beginQuestionEdit(t.question)},cancel:e.cancelQuestionEdit,save:function(n){return e.saveQuestion(t)}},scopedSlots:e._u([{key:"actions",fn:function(){return[n("QuizElementAction",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Delete",expression:"'Delete'"}],attrs:{icon:"clear",disabled:e.disabled||!!e.questionEditing},on:{click:function(n){return e.destroyQuestion(t.question)}}}),e._v(" "),n("QuizElementAction",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Move Up",expression:"'Move Up'"}],attrs:{icon:"arrow-up",disabled:e.disabled||!t.canMoveUp},on:{click:function(n){return e.reorderQuestion(t.question,-1)}}}),e._v(" "),n("QuizElementAction",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Move Down",expression:"'Move Down'"}],attrs:{icon:"arrow-down",disabled:e.disabled||!t.canMoveDown},on:{click:function(n){return e.reorderQuestion(t.question,1)}}})]},proxy:!0}],null,!0)})})),e._v(" "),n("NewQuestionButtons",{attrs:{types:e.newQuestionButtonTypes,disabled:e.disabled||!!e.questionEditing,"quiz-type":"quiz","questions-only":""},on:{action:e.createQuestion}})],2)],1)}),[],!1,null,null,null).exports),me=($={},Object(o.a)($,w.h.document,O),Object(o.a)($,w.h.pdf,D),Object(o.a)($,w.h.code,z),Object(o.a)($,w.h.postgres,z),Object(o.a)($,w.h.rstudio,z),Object(o.a)($,w.h.jupyter,z),Object(o.a)($,w.h.web,z),Object(o.a)($,w.h.video,Q),Object(o.a)($,w.h.webpage,Y),Object(o.a)($,w.h.html,Z),Object(o.a)($,w.h.quizQuestion,ne),Object(o.a)($,w.h.quiz,fe),$);function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ge,ye,we={name:"LessonEditSlide",components:{Portal:c.Portal,NavbarButton:u.a,StatusMessage:d.a,EdField:h.a,EdCheck:p.a,EdInput:f.a,Icon:m.a},inject:["lessonApi","keyboardShortcutManager"],props:{slideId:{type:Number,required:!0}},data:function(){return{savingSlide:!1,model:null,originalModel:null,errorMessage:null}},computed:be({},Object(l.e)("lesson",["loadingSlide"]),{},Object(l.c)("lesson",["slide"]),{loading:function(){return this.loadingSlide||this.savingSlide},slideComponent:function(){return me[this.slide.type]},humanized:function(){return w.d(this.slide)},icon:function(){return v.b(this.slide)},isChallengeSlide:function(){return["code","postgres","rstudio","jupyter","web"].includes(this.slide.type)},points:{get:function(){return this.model.points.toString()},set:function(e){e=+e,this.model.points=isFinite(e)?e:0}}}),watch:{slideId:{immediate:!0,handler:"update"},slide:{immediate:!0,handler:function(e,t){t&&e&&e.id===t.id||this.updateModel()}}},created:function(){this.disposable=this.keyboardShortcutManager.register({default:"Control+s",mac:"Meta+s"},this.save,{description:"Save slide"})},destroyed:function(){this.disposable.dispose()},shouldConfirmRouteUpdate:function(e,t){return e.params.courseId!==t.params.courseId||e.params.lessonId!==t.params.lessonId||e.params.slideId!==t.params.slideId},routeUpdateMessage:function(){var e=this,t=this.$refs.slide;if(t){var n=t.isDirty&&t.isDirty(),s=!w.c(this.model,this.originalModel);if(n||s)return{message:"You have unsaved changes on this slide.",callback:function(){return e.save()}}}},methods:be({},Object(l.b)("lesson",{loadSlide:_.a.LOAD_SLIDE,updateSlide:_.a.UPDATE_SLIDE}),{updateModel:function(){this.model=this.slide&&w.a(this.slide),this.originalModel=this.slide&&w.a(this.slide)},update:(ye=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.errorMessage=null,e.prev=1,e.next=4,this.loadSlide(this.slideId);case 4:e.next=18;break;case 6:e.prev=6,e.t0=e.catch(1),this.model=null,this.originalModel=null,e.t1=e.t0.status,e.next=404===e.t1?13:410===e.t1?15:17;break;case 13:return this.errorMessage="Slide not found",e.abrupt("return");case 15:return this.errorMessage="Slide was deleted",e.abrupt("return");case 17:g.b({type:"error",text:"Could not load slide."});case 18:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(){return ye.apply(this,arguments)}),save:(ge=Object(a.a)(r.a.mark((function e(){var t,n,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.savingSlide=!0,t=this.model,e.prev=2,n=this.$refs.slide,s=null,!n.prepareForSave){e.next=14;break}return e.next=8,n.prepareForSave();case 8:if(!1!==(s=e.sent)){e.next=11;break}return e.abrupt("return");case 11:if(!(s&&s.size>this.lessonApi.maxFileSize)){e.next=14;break}return y.a({icon:"warning",title:"File is too large",text:"Cannot save the slide because the file is too large. The size of the file cannot exceed ".concat(b.humanizeFileSize(this.lessonApi.maxFileSize),".")}),e.abrupt("return");case 14:return e.next=16,this.updateSlide({id:t.id,slide:t,file:s});case 16:e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(2),g.b({type:"error",text:"Could not update slide."}),e.abrupt("return",!1);case 22:return e.prev=22,this.savingSlide=!1,e.finish(22);case 25:this.updateModel(),g.b({type:"success",text:"Slide updated."});case 27:case"end":return e.stop()}}),e,this,[[2,18,22,25]])}))),function(){return ge.apply(this,arguments)})})},_e=(n("0r9+"),Object(j.a)(we,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Portal",{attrs:{to:"slide-actions"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.disabled;return[n("NavbarButton",{attrs:{text:"Show Slide",to:{name:"lesson-slide-show"},disabled:s}}),e._v(" "),n("NavbarButton",{attrs:{text:"Cancel",to:{name:"lesson-edit"},disabled:s}}),e._v(" "),n("NavbarButton",{attrs:{type:"default",text:"Save",disabled:s||!e.slide},on:{action:e.save}})]}}])}),e._v(" "),e.errorMessage?n("StatusMessage",[e._v(e._s(e.errorMessage))]):e._e(),e._v(" "),e.slide?n("header",{staticClass:"lpedit-header"},[n("h1",[n("Icon",{attrs:{icon:e.icon}}),e._v(" "+e._s(e.humanized)+"\n\t\t")],1)]):e._e(),e._v(" "),e.model?[n("EdField",[n("EdCheck",{attrs:{label:"Hidden",description:"Students cannot see hidden slides.",disabled:e.savingSlide},model:{value:e.model.isHidden,callback:function(t){e.$set(e.model,"isHidden",t)},expression:"model.isHidden"}})],1),e._v(" "),n("div",{staticClass:"lpedit-title-points-layout"},[n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Title")]},proxy:!0}],null,!1,2416837851)},[e._v(" "),n("EdInput",{attrs:{disabled:e.savingSlide},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1),e._v(" "),e.isChallengeSlide?e._e():n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Points")]},proxy:!0}],null,!1,2248636292)},[e._v(" "),n("EdInput",{attrs:{disabled:e.savingSlide},model:{value:e.points,callback:function(t){e.points=t},expression:"points"}})],1)],1),e._v(" "),n(e.slideComponent,{key:e.model.id,ref:"slide",tag:"component",attrs:{model:e.model,"saving-slide":e.savingSlide}})]:e._e()],2)}),[],!1,null,null,null));t.default=_e.exports},bycc:function(e,t,n){"use strict";var s={props:{heading:{type:String,default:void 0}}},i=(n("qE/O"),n("KHd+")),r=Object(i.a)(s,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"table-view-section"},[this.heading?t("div",{staticClass:"table-view-section-heading"},[this._v("\n\t\t"+this._s(this.heading)+"\n\t")]):this._e(),this._v(" "),this._t("default")],2)}),[],!1,null,null,null);t.a=r.exports},bz5N:function(e,t,n){"use strict";var s=n("LMgf");n.n(s).a},bzkv:function(e,t,n){},"c/O/":function(e,t,n){},c3Va:function(e,t,n){},"cB/C":function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("qePV"),n("5DmW"),n("27RR"),n("tkto"),n("UxlC"),n("FZtP");var s=n("rePB"),i=n("sEfC"),r=n.n(i),a=(n("4Brf"),n("0oug"),n("ma9I"),n("fbCW"),n("x0AG"),n("yXV3"),n("4mDm"),n("2B1R"),n("pDQq"),n("zKZe"),n("07d7"),n("5s+n"),n("PKPk"),n("hByQ"),n("SYor"),n("3bBZ"),n("o0o1")),o=n.n(a),l=(n("ls82"),n("HaE+")),c=n("BkRI"),u=n.n(c),d=n("Y+p1"),h=n.n(d),p=n("L2JU"),f=n("wd/R"),m=n.n(f),v=n("Pa8A"),b=n("+/tv"),g=n("SS+4"),y=n("JBdv"),w=n("WmPt"),_=n("GJ+R");function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var C={directives:{Tooltip:v.a},components:{VirtualizedList:g.a,DateDisplay:y.a,Icon:w.a},props:{submissions:{type:Array,required:!0},challenge:{type:Object,required:!0}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(p.c)(["isStaff"])),methods:{submissionStatusIcon:_.c,lateSubmissionTooltip:function(e){var t=m()(e.created_at),n=m()(this.challenge.due_at);if(t>n){var s=m.a.duration(t-n).humanize();return"This was submitted ".concat(s," past the due date")}}}},x=(n("VOao"),n("KHd+")),j=Object(x.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("VirtualizedList",{staticClass:"submissions-list",attrs:{items:e.submissions,"header-height":35,"item-height":35,"container-class":"chasub-list-table","container-tag":"table","content-tag":"tbody","guide-tag":"tr"},scopedSlots:e._u([{key:"header",fn:function(){return[n("thead",[n("tr",{staticStyle:{height:"35px"}},[n("th",{staticClass:"chasub-list-td-number"},[e._v("#")]),e._v(" "),n("th",{staticClass:"chasub-list-td-date"},[e._v("Submitted")]),e._v(" "),e.challenge.features.git_submission?n("th",{staticClass:"chasub-list-td-commit"},[e._v("Git Commit")]):e._e(),e._v(" "),"none"!==e.challenge.type?n("th",{staticClass:"chasub-list-td-tc"},[e._v("Testcases")]):e._e(),e._v(" "),n("th",{staticClass:"chasub-list-td-result"},[e._v("Result")])])])]},proxy:!0},{key:"item",fn:function(t){var s=t.item,i=t.index;return[n("tr",{key:s.id,staticClass:"chasub-list-tr-sub",class:{new:s.new},staticStyle:{height:"35px"},on:{click:function(t){return e.$emit("submission-click",s)}}},[n("td",{staticClass:"chasub-list-td-number"},[e._v(e._s(e.submissions.length-i))]),e._v(" "),n("td",{staticClass:"chasub-list-td-date"},[n("div",{staticClass:"chasub-list-date-layout"},[e.lateSubmissionTooltip(s)?n("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.lateSubmissionTooltip(s),expression:"lateSubmissionTooltip(sub)"}],staticClass:"chasub-list-date-late"},[e._v("Late")]):e._e(),e._v(" "),n("DateDisplay",{staticClass:"chasub-list-date-date",attrs:{date:s.created_at,format:"fromNow"}})],1)]),e._v(" "),e.challenge.features.git_submission?n("td",{staticClass:"chasub-list-td-commit"},[""!==s.git_head?n("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:s.git_head,expression:"sub.git_head"}],staticClass:"chasub-list-git-hash"},[e._v(e._s(s.git_head.slice(0,8)))]):e._e()]):e._e(),e._v(" "),"none"!==e.challenge.type?n("td",{staticClass:"chasub-list-td-tc"},[["passed","failed"].includes(s.status)?[e._v(e._s(s.testcase_pass_count)+" / "),n("span",{staticClass:"chasub-list-td-tc-total"},[e._v(e._s(s.testcase_total_count))])]:[e._v("—")]],2):e._e(),e._v(" "),n("td",{staticClass:"chasub-list-td-result"},[n("Icon",{class:"chasub-status-icon-"+s.status,attrs:{icon:e.submissionStatusIcon(s.status)}}),e._v(" "),(e.isStaff||e.challenge.is_feedback_visible)&&s.feedback?n("Icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"This submission has feedback",expression:"'This submission has feedback'"}],staticClass:"chasub-status-icon-feedback",attrs:{icon:"speech"}}):e._e()],1)])]}}])})}),[],!1,null,null,null).exports,O=(n("ToJy"),n("EnZy"),n("KQm4")),S={props:{added:{type:Number,required:!0},removed:{type:Number,required:!0},total:{type:Number,required:!0},blocks:{type:Number,default:5}},computed:{addedCount:function(){return Math.floor(this.added/this.total*this.blocks)||0},removedCount:function(){return Math.floor(this.removed/this.total*this.blocks)||0},neutralCount:function(){return this.blocks-this.addedCount-this.removedCount}}},E=(n("jpZP"),Object(x.a)(S,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"diff-stat"},[e.added?n("span",{staticClass:"diff-stat-added"},[e._v("+"+e._s(e.added))]):e._e(),e._v(" "),e.removed?n("span",{staticClass:"diff-stat-removed"},[e._v("-"+e._s(e.removed))]):e._e(),e._v(" "),e._l(e.addedCount,(function(e){return n("span",{key:"a"+e,staticClass:"diff-stat-block diff-stat-block-added"})})),e._v(" "),e._l(e.removedCount,(function(e){return n("span",{key:"r"+e,staticClass:"diff-stat-block diff-stat-block-removed"})})),e._v(" "),e._l(e.neutralCount,(function(e){return n("span",{key:"n"+e,staticClass:"diff-stat-block diff-stat-block-neutral"})}))],2)}),[],!1,null,null,null).exports),T=n("9oRF"),I=n("hSdx"),D={components:{DiffStat:E,DiffText:T.a,Icon:w.a},props:{path:{type:String,required:!0},action:{type:String,required:!0},diff:{type:Array,default:void 0},added:{type:Number,required:!0},removed:{type:Number,required:!0},total:{type:Number,required:!0},split:{type:Boolean,default:!1}},computed:{language:function(){return I.filenameExtensionToLanguage(I.splitPath(this.path).extension)},show:function(){return this.split?"split":"added"===this.action?"to":"removed"===this.action?"from":"both"}},methods:{stripHome:function(e){return e.replace(/^\/home\//,"")}}},P=(n("RiuU"),Object(x.a)(D,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"workspace-file-diff"},[n("header",{staticClass:"wsfd-header"},[n("Icon",{staticClass:"wsfd-header-icon",attrs:{icon:"diff-"+e.action}}),e._v(" "),n("span",{staticClass:"wsfd-header-path"},[e._v(e._s(e.stripHome(e.path)))]),e._v(" "),n("DiffStat",{staticClass:"wsfd-header-stat",attrs:{added:e.added,removed:e.removed,total:e.total}})],1),e._v(" "),e.diff?n("DiffText",{attrs:{diff:e.diff,show:e.show,language:e.language,"line-numbers":"",thunked:""}}):n("div",{staticClass:"wsfd-no-diff"},[e._v("Diff cannot be displayed for this file type")])],1)}),[],!1,null,null,null).exports),A=n("NC1X"),N=n("EML8"),R=n("6XG0"),M=n("/Yj0");function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e,t){var n=t?"+":"-";return e.split("\n").map((function(e){return{type:n,words:[{type:"=",text:e}]}}))}var q,$={directives:{Tooltip:v.a},components:{FileDiff:P,DiffStat:E,Icon:w.a,Spinner:A.a,ShowMore:N.a,EdCheck:R.a},inject:["workspaceApi"],props:{workspaceId:{type:String,required:!0},hash1:{type:String,required:!0},hash2:{type:String,required:!0}},data:function(){return{loading:!1,files:null,split:!1}},computed:{maxChanges:function(){return Math.max.apply(Math,[0].concat(Object(O.a)(this.files.map((function(e){return e.added+e.removed})))))},totalAdditions:function(){return this.files.reduce((function(e,t){return e+t.added}),0)},totalRemovals:function(){return this.files.reduce((function(e,t){return e+t.removed}),0)}},created:function(){this.update()},methods:{pluralize:I.pluralize,stripHome:function(e){return e.replace(/^\/home\//,"")},update:(q=Object(l.a)(o.a.mark((function e(){var t,n,s,i,r,a,c,u,d=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.prev=2,e.next=5,this.workspaceApi.commitsDiff(this.workspaceId,this.hash1,this.hash2);case 5:t=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),M.b({type:"error",text:"Unable to load diff."}),e.abrupt("return");case 12:return n=[].concat(Object(O.a)(t.added.map((function(e){return F({},e,{action:"added",actionText:"Added"})}))),Object(O.a)(t.removed.map((function(e){return F({},e,{action:"removed",actionText:"Removed"})}))),Object(O.a)(t.modified.map((function(e){return F({},e,{action:"modified",actionText:"Modified"})})))).filter((function(e){return"file"===e.type})).sort((function(e,t){return I.naturalComparator(e.path,t.path)})),e.next=15,I.promiseMap(n,function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.diff=null,!I.filenameExtensionToLanguage(I.splitPath(t.path).extension)){e.next=12;break}if("modified"!==t.action){e.next=8;break}return e.next=5,d.workspaceApi.contentsDiff(d.workspaceId,t.path,d.hash1,t.path,d.hash2);case 5:t.diff=e.sent,e.next=12;break;case 8:return e.next=10,d.workspaceApi.fileContents(d.workspaceId,t.path,"added"===t.action?d.hash2:d.hash1);case 10:n=e.sent,t.diff=B(n,"added"===t.action);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{concurrency:5});case 15:if(!e.sent.some((function(e){return!e.success}))){e.next=19;break}return M.b({type:"error",text:"Unable to load diff."}),e.abrupt("return");case 19:for(s=!0,i=!1,r=void 0,e.prev=22,a=n[Symbol.iterator]();!(s=(c=a.next()).done);s=!0)(u=c.value).diff?(u.added=u.diff.reduce((function(e,t){return e+("+"===t.type?1:0)}),0),u.removed=u.diff.reduce((function(e,t){return e+("-"===t.type?1:0)}),0)):(u.added=0,u.removed=0);e.next=30;break;case 26:e.prev=26,e.t1=e.catch(22),i=!0,r=e.t1;case 30:e.prev=30,e.prev=31,s||null==a.return||a.return();case 33:if(e.prev=33,!i){e.next=36;break}throw r;case 36:return e.finish(33);case 37:return e.finish(30);case 38:this.files=n;case 39:return e.prev=39,this.loading=!1,e.finish(39);case 42:case"end":return e.stop()}}),e,this,[[1,,39,42],[2,8],[22,26,30,38],[31,,33,37]])}))),function(){return q.apply(this,arguments)}),scrollToDiff:function(e){var t=this.files.indexOf(e);-1!==t&&this.$refs.diffs[t].$el.scrollIntoView()}}},U=(n("lQ8/"),Object(x.a)($,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"workspace-compare"},[e.loading?n("Spinner",{staticClass:"wsc-spinner"}):e._e(),e._v(" "),e.files?[n("h2",{staticClass:"wsc-heading"},[e._v("\n\t\t\tShowing "),n("strong",[e._v(e._s(e.files.length)+" changed "+e._s(e.pluralize(e.files.length,"file")))]),e._v("\n\t\t\twith "),n("strong",[e._v(e._s(e.totalAdditions)+" "+e._s(e.pluralize(e.totalAdditions,"addition")))]),e._v("\n\t\t\tand "),n("strong",[e._v(e._s(e.totalRemovals)+" "+e._s(e.pluralize(e.totalRemovals,"deletion")))]),e._v(".\n\t\t")]),e._v(" "),n("ol",{staticClass:"wsc-toc"},[n("ShowMore",{attrs:{items:e.files},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.item;return[n("li",{key:s.path},[n("span",[n("Icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:s.actionText,expression:"file.actionText"}],staticClass:"wsc-toc-icon",attrs:{icon:"diff-"+s.action}}),e._v(" "),n("a",{on:{click:function(t){return t.preventDefault(),e.scrollToDiff(s)}}},[e._v(e._s(e.stripHome(s.path)))])],1),e._v(" "),n("DiffStat",{attrs:{added:s.added,removed:s.removed,total:e.maxChanges}})],1)]}}],null,!1,3818848271)})],1),e._v(" "),n("EdCheck",{attrs:{label:"Split view"},model:{value:e.split,callback:function(t){e.split=t},expression:"split"}}),e._v(" "),e._l(e.files,(function(t){return n("FileDiff",{key:t.path,ref:"diffs",refInFor:!0,attrs:{action:t.action,path:t.path,diff:t.diff,added:t.added,removed:t.removed,total:e.maxChanges,split:e.split}})}))]:e._e()],2)}),[],!1,null,null,null).exports),z=n("4K9I"),V=n("4cYw"),H=n("gD3A"),W=n("ltWs"),Q=n("xtk+"),K=n("VYah"),Y=n("YxxY"),G=n("Gste"),X=n("wSyZ"),J=n("83PK"),Z=n("43W2"),ee=n("kUIt"),te=n("G7T9"),ne={props:{text:{type:String,default:""}}},se=(n("z/0E"),Object(x.a)(ne,(function(){var e=this.$createElement;return(this._self._c||e)("div",{directives:[{name:"show",rawName:"v-show",value:this.$parent.selectedTab===this.$vnode.key,expression:"$parent.selectedTab === $vnode.key"}],staticClass:"vertical-tab"},[this._t("default")],2)}),[],!1,null,null,null).exports),ie={props:{selectedTab:{type:String,default:null},side:{type:String,default:"left"}},methods:{renderTabs:function(e){var t=this,n=this.$createElement;return e.map((function(e){var s=e.componentOptions.propsData.text;return n("div",{staticClass:"vtabs-tab",class:{selected:t.selectedTab===e.key},on:{click:function(){return t.$emit("update:selectedTab",e.key)}}},[n("div",{staticClass:"vtabs-tab-content"},[s])])}))}},render:function(){var e=arguments[0],t=this.$scopedSlots.default&&this.$scopedSlots.default()||[],n=t.filter((function(e){return te.j(e,se)}));return e("div",{staticClass:"vertical-tabs",class:"vtabs-side-".concat(this.side)},[e("div",{staticClass:"vtabs-tabs"},[this.renderTabs(n)]),n])}},re=(n("FVD3"),Object(x.a)(ie,void 0,void 0,!1,null,null,null).exports),ae=n("gA4q"),oe=(n("LKBx"),n("bt/X")),le=n.n(oe),ce=n("0yhy"),ue=n("5dcz"),de=n("B7nN"),he=n("7zca"),pe=n("F3Tp"),fe={components:{Amber:H.a,EdButton:z.a},props:{value:{type:String,default:null}}},me=(n("qcHD"),Object(x.a)(fe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"feedback-comment-input"},[n("Amber",{staticClass:"fci-amber",attrs:{autofocus:"",value:e.value},on:{input:function(t){return e.$emit("input",t)}}}),e._v(" "),n("div",{staticClass:"fci-actions"},[n("EdButton",{staticClass:"primary",on:{click:function(t){return e.$emit("save")}}},[e._v("Post")]),e._v(" "),n("EdButton",{on:{click:function(t){return e.$emit("cancel")}}},[e._v("Cancel")])],1)],1)}),[],!1,null,null,null).exports);function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var be={components:{Avatar:pe.a,UserRoleLabel:J.a,AmberDisplay:W.a,DateDisplay:y.a,FeedbackCommentInput:me},props:{userName:{type:String,required:!0},userCourseRole:{type:String,required:!0},value:{type:String,default:null},editable:{type:Boolean,default:!1},canEditAndDelete:{type:Boolean,default:!1},date:{type:Object,default:null}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(p.e)(["course"]))},ge=(n("Bl3d"),Object(x.a)(be,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"feedback-comment"},[n("Avatar",{staticClass:"fbc-avatar",attrs:{user:e.userName}}),e._v(" "),n("div",{staticClass:"fbc-body"},[n("div",{staticClass:"fbc-header"},[n("span",{staticClass:"fbc-user-name"},[e._v(e._s(e.userName))]),e._v(" "),n("UserRoleLabel",{attrs:{role:e.userCourseRole,course:e.course}}),e._v(" "),e.date?n("DateDisplay",{staticClass:"fbc-date",attrs:{date:e.date,format:"fromNow"}}):e._e()],1),e._v(" "),e.editable?n("FeedbackCommentInput",{attrs:{value:e.value},on:{input:function(t){return e.$emit("input",t)},save:function(t){return e.$emit("save")},cancel:function(t){return e.$emit("cancel")}}}):[n("AmberDisplay",{attrs:{value:e.value}}),e._v(" "),n("div",{staticClass:"fbc-actions"},[n("a",{staticClass:"fbc-action",on:{click:function(t){return e.$emit("reply")}}},[e._v("Reply")]),e._v(" "),e.canEditAndDelete?n("a",{staticClass:"fbc-action",on:{click:function(t){return e.$emit("edit")}}},[e._v("Edit")]):e._e(),e._v(" "),e.canEditAndDelete?n("a",{staticClass:"fbc-action",on:{click:function(t){return e.$emit("delete")}}},[e._v("Delete")]):e._e()])]],2)],1)}),[],!1,null,null,null).exports),ye=n("5/Cn"),we=n("MXzO"),_e=n("uq/U");function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var Ce,xe,je,Oe,Se,Ee={directives:{Tooltip:v.a},components:{Split:K.a,SplitPanel:Y.a,Outline:ce.a,DiffText:T.a,Icon:w.a,Spinner:A.a,Toolbar:ue.a,ToolbarGroup:de.a,ToolbarButton:he.a,LineContent:{functional:!0,render:function(e,t){var n=t.props.lineNumber,s=t.parent,i=s.feedbackVisible,r=s.displayFilePath,a=s.model,o=s.user,l=s.course,c=s.isStaff,u=s.handleSaveNewComment,d=s.handleCancelNewComment,h=s.handleCommentEditBegin,p=s.handleCommentEditCancel,f=s.handleCommentEditSave,m=s.handleCommentEditInput,v=s.handleCommentReply,b=s.handleCommentDelete;if(i){var g=a[r],y=g&&g[n];return y?e("div",{staticClass:"ffview-line-content"},[e("div",{staticClass:"ffview-line-content-layout"},[y.comments.map((function(t){return e(ge,{staticClass:"ffview-comment",attrs:{userName:t.comment.userName,userCourseRole:t.comment.userCourseRole,date:t.comment.createdAt,value:t.model,editable:t.editing,canEditAndDelete:o.id===t.comment.userId||c},on:{edit:function(){return h(t)},reply:function(){return v(n)},delete:function(){return b(g,n,t)},cancel:function(){return p(t)},save:function(){return f(t)},input:function(e){return m(t,e)}}})})),y.creatingNewComment&&e(ge,{staticClass:"ffview-comment",attrs:{editable:!0,userName:o.name,userCourseRole:l.role.role,value:y.newCommentContent},on:{input:function(e){return y.newCommentContent=e},save:function(){return u(n)},cancel:function(){return d(n)}}})])]):void 0}}}},inject:["fetch","sessionService","challengeApi"],props:{submissionId:{type:Number,required:!0},connectPassword:{type:String,default:null},connectIpHash:{type:Number,default:null},connectUserId:{type:Number,default:null}},data:function(){return{ctrl:null,selectedPath:null,filesFrac:200,bodyFrac:1,treeVisible:!0,hiddenFilesVisible:!1,feedbackVisible:!0,displayFilePath:null,displayFileContents:null,displayFileError:null,displayFileLoading:!1,model:{}}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(p.e)(["user","course"]),{},Object(p.c)(["isStaff"]),{diff:function(){return null==this.displayFileContents?null:this.displayFileContents.split(/\r?\n/).map((function(e){return{type:"=",words:[{type:"=",text:e}]}}))},displayFileBase:function(){return I.splitPath(this.displayFilePath).filename},displayFileLanguage:function(){return this.displayFilePath&&I.filenameExtensionToLanguage(I.splitPath(this.displayFilePath).extension)}}),created:function(){this.ctrl=new we.a(this.fetch,this.sessionService),this.loadWorkspace(),this.loadComments()},destroyed:function(){this.unloadWorkspace()},methods:{fileFolderIcon:I.fileFolderIcon,loadWorkspace:function(){this.ctrl.load("submission",this.submissionId,{userId:this.connectUserId,password:this.connectPassword,ipHash:this.connectIpHash})},unloadWorkspace:function(){this.ctrl.unload()},loadComments:(Se=Object(l.a)(o.a.mark((function e(){var t,n,s,i,r,a,l,c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.challengeApi.getLineComments(this.submissionId);case 3:t=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),M.b({type:"error",text:"Unable to load comments."});case 9:for(t.sort((function(e,t){return e.createdAt-t.createdAt})),n={},s=le()(t,(function(e){return e.filePath})),i=0,r=Object.keys(s);i<r.length;i++)for(a=r[i],n[a]=le()(s[a],(function(e){return e.lineNumber})),l=0,c=Object.keys(n[a]);l<c.length;l++)u=c[l],n[a][u]=this.createLineModel(n[a][u]);this.model=n;case 14:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(){return Se.apply(this,arguments)}),fileHasFeedback:function(e,t){var n=this;if(t)return Object.keys(this.model).some((function(t){return t.startsWith(e+"/")&&Object.keys(n.model[t]).some((function(e){return n.model[t][e].comments.length}))}));var s=this.model[e];return!!s&&Object.keys(s).some((function(e){return s[e].comments.length}))},displayFile:(Oe=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.displayFileLoading=!0,e.prev=1,e.next=4,this.ctrl.workspaceSession.getFileDataFromIndex(t);case 4:n=e.sent,this.displayFileContents=n,this.displayFileError=null,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),this.displayFileContents=null,this.displayFileError="binary"===String(e.t0.data).trim().toLowerCase()?"binary":"other";case 13:this.displayFileLoading=!1,this.displayFilePath=t;case 15:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(e){return Oe.apply(this,arguments)}),childrenSelector:function(e){var t=this;return e.children.filter((function(e){return t.hiddenFilesVisible||!e.name.startsWith(".")}))},createLineModel:function(e){var t=this;return{newCommentContent:null,creatingNewComment:!1,comments:e.map((function(e){return t.createCommentModel(e)}))}},createCommentModel:function(e){return{comment:e,model:e.content,editing:!1}},handleItemExpand:function(e){var t=e.data,n=e.expanded;t.expanded=n,n&&this.ctrl.loadFolderContents(t.path)},handleItemSelect:function(e){var t=e.data;e.selected&&(this.selectedPath=t.path,"file"===t.type&&this.displayFile(t.path))},handleLineButtonClick:function(e){var t=e.lineNumber,n=this.model,s=this.displayFilePath;this.feedbackVisible=!0,n[s]||this.$set(n,s,{});for(var i=n[s],r=0,a=Object.keys(i);r<a.length;r++){var o=a[r];i[o].creatingNewComment||i[o].comments.length||this.$delete(i,o)}i[t]||this.$set(i,t,this.createLineModel([])),i[t].creatingNewComment=!0},handleCancelNewComment:function(e){var t=this.model,n=this.displayFilePath,s=t[n][e];s.creatingNewComment=!1,s.newCommentContent=null,s.comments.length||this.$delete(t[n],e)},handleSaveNewComment:(je=Object(l.a)(o.a.mark((function e(t){var n,s,i,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.model,s=this.displayFilePath,i=this.challengeApi,r=n[s][t],(a=new _e.a).content=r.newCommentContent,a.filePath=s,a.lineNumber=t,e.prev=6,e.next=9,i.createLineComment(this.submissionId,a);case 9:a=e.sent,e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(6),M.b({type:"error",text:"Unable to save comment."}),e.abrupt("return");case 16:r.comments.push(this.createCommentModel(a)),r.newCommentContent=null,r.creatingNewComment=!1;case 19:case"end":return e.stop()}}),e,this,[[6,12]])}))),function(e){return je.apply(this,arguments)}),handleCommentDelete:(xe=Object(l.a)(o.a.mark((function e(t,n,s){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye.b({icon:"warning",title:"Delete comment?",text:"This cannot be undone.",primaryAction:"Delete"});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,this.challengeApi.destroyLineComment(s.comment.id);case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(4),M.b({type:"error",text:"Unable to delete comment."}),e.abrupt("return");case 13:t[n].comments=t[n].comments.filter((function(e){return e.comment.id!==s.comment.id})),t[n].comments.length||this.$delete(t,n),M.b({type:"success",text:"Comment deleted."});case 16:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(e,t,n){return xe.apply(this,arguments)}),handleCommentReply:function(e){this.model[this.displayFilePath][e].creatingNewComment=!0},handleCommentEditBegin:function(e){e.editing=!0},handleCommentEditCancel:function(e){e.editing=!1,e.model=e.comment.content},handleCommentEditSave:(Ce=Object(l.a)(o.a.mark((function e(t){var n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new _e.a).id=t.comment.id,n.content=t.model,e.prev=3,e.next=6,this.challengeApi.updateLineComment(n);case 6:s=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),M.b({type:"error",text:"Unable to save comment."}),e.abrupt("return");case 13:t.editing=!1,t.comment=s,t.model=s.content;case 16:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(e){return Ce.apply(this,arguments)}),handleCommentEditInput:function(e,t){e.model=t}}},Te=(n("lRVQ"),Object(x.a)(Ee,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"feedback-file-viewer"},[n("Toolbar",{staticClass:"ffview-toolbar"},[n("ToolbarGroup",[n("ToolbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Toggle Tree View",expression:"'Toggle Tree View'"}],attrs:{icon:"tree-view",pressed:e.treeVisible},on:{click:function(t){e.treeVisible=!e.treeVisible}}}),e._v(" "),n("ToolbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Show Feedback",expression:"'Show Feedback'"}],attrs:{icon:"pencil",pressed:e.feedbackVisible},on:{click:function(t){e.feedbackVisible=!e.feedbackVisible}}}),e._v(" "),n("ToolbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Show Hidden Files",expression:"'Show Hidden Files'"}],attrs:{icon:"dot-files",pressed:e.hiddenFilesVisible},on:{click:function(t){e.hiddenFilesVisible=!e.hiddenFilesVisible}}})],1),e._v(" "),e.ctrl.loading||e.displayFileLoading?n("Spinner",{staticClass:"ffview-spinner"}):e._e()],1),e._v(" "),n("Split",{staticClass:"ffview-split",attrs:{orientation:"horizontal"}},[e.treeVisible?n("SplitPanel",{attrs:{sizing:"fixed",frac:e.filesFrac,"min-frac":50,"max-frac":400},on:{"update:frac":function(t){e.filesFrac=t}}},[n("Outline",{staticClass:"ffview-outline",attrs:{data:e.childrenSelector(e.ctrl.homeNode),"key-selector":function(e){return e.path},"children-selector":e.childrenSelector,"expandable-selector":function(e){return"folder"===e.type},"expanded-selector":function(e){return e.expanded},"selected-selector":function(t){return t.path===e.selectedPath}},on:{"item-expand":e.handleItemExpand,"item-select":e.handleItemSelect},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data,i=t.selected;return[n("div",{staticClass:"ffview-outline-item",class:{selected:i}},[n("Icon",{staticClass:"ffview-outline-item-icon colored",attrs:{icon:e.fileFolderIcon(s.path,s.type)}}),e._v(" "),n("span",{staticClass:"ffview-outline-item-name"},[e._v(e._s(s.name))]),e._v(" "),e.fileHasFeedback(s.path,"folder"===s.type)?n("Icon",{staticClass:"ffview-outline-item-feedback-icon",class:{folder:"folder"===s.type},attrs:{icon:"pencil"}}):e._e()],1)]}}],null,!1,1553827402)})],1):e._e(),e._v(" "),n("SplitPanel",{attrs:{frac:e.bodyFrac},on:{"update:frac":function(t){e.bodyFrac=t}}},[n("div",{staticClass:"ffview-scroll"},[e.displayFileError?n("div",{staticClass:"ffview-error"},["binary"===e.displayFileError?[e._v("\n\t\t\t\t\t\tCannot display the binary file "),n("strong",[e._v(e._s(e.displayFileBase))])]:[e._v("\n\t\t\t\t\t\tCould not display the file "),n("strong",[e._v(e._s(e.displayFileBase))])]],2):e.diff?n("DiffText",{attrs:{diff:e.diff,"line-numbers":"","line-buttons":"",show:"to",language:e.displayFileLanguage},on:{"line-button-click":e.handleLineButtonClick},scopedSlots:e._u([{key:"lineContent",fn:function(e){var t=e.lineNumberA;return[n("LineContent",{attrs:{"line-number":t}})]}}])}):e._e()],1)])],1)],1)}),[],!1,null,null,null).exports),Ie=n("SBq4"),De=n("bBMf"),Pe=n("PBi1"),Ae={directives:{Autofocus:Ie.a},components:{Alert:De.a,AlertButton:Pe.a,EdCheck:R.a},data:function(){return{checked:!1}}},Ne=(n("IgPd"),Object(x.a)(Ae,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Alert",{attrs:{icon:"warning",title:"Delete Submission?",text:"This cannot be undone."},scopedSlots:e._u([{key:"primaryActions",fn:function(){return[n("AlertButton",{directives:[{name:"autofocus",rawName:"v-autofocus"}],on:{click:function(t){return e.$emit("action",!1)}}},[e._v("Cancel")]),e._v(" "),n("AlertButton",{attrs:{disabled:!e.checked},on:{click:function(t){return e.$emit("action",!0)}}},[e._v("Delete")])]},proxy:!0}])},[n("div",{staticClass:"asd-check"},[n("EdCheck",{attrs:{label:"I confirm I want to delete the submission"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)])}),[],!1,null,null,null).exports),Re=n("/jHr"),Me=n("clw3");function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Be=[],qe={functional:!0,render:function(e,t){var n=t.props,s=n.cell,i=n.row,r=n.column,a=t.parent,o=a.challenge,l=a.course;switch(r.key){case"name":case"email":if("name"===r.key||o.features.anonymous_submissions)return[e(X.a,{attrs:{column:r,value:s}})," ",e(J.a,{staticClass:"chasub-user-role",attrs:{user:i,course:l}})];break;case"completed":return s?e(w.a,{staticClass:"chasub-user-completed",attrs:{icon:"tick"}}):Be;case"feedback":return s?e(w.a,{staticClass:"chasub-user-feedback",attrs:{icon:"speech"},directives:[{name:"tooltip",value:"One or more submissions has feedback"}]}):Be}}};function $e(e){return e.loading=!1,e.loaded=!1,e.new=!1,e}var Ue,ze,Ve,He,We,Qe,Ke,Ye,Ge,Xe,Je,Ze={name:"ChallengeSubmissions",directives:{Tooltip:v.a},components:{EdButton:z.a,EdSelect:V.a,Amber:H.a,AmberDisplay:W.a,EdInput:Q.a,Icon:w.a,Submission:b.a,SubmissionsList:j,Compare:U,Split:K.a,SplitPanel:Y.a,Datatable:G.a,Spinner:A.a,StatusMessage:Z.a,DateDisplay:y.a,KeyboardShortcut:ee.a,VerticalTabs:re,VerticalTab:se,ChallengeWorkspace:ae.a,FeedbackFileViewer:Te,UsersCell:qe},inject:["challengeApi","eventBus"],props:{challenge:{type:Object,required:!0},searchQuery:{type:String,default:null},userId:{type:Number,default:null},email:{type:String,default:null},submissionId:{type:Number,default:null},password:{type:String,default:null},ipHash:{type:String,default:null},shortcutKeysDisabled:{type:Boolean,default:!1}},data:function(){return{users:[],usersState:"loading",selectedUser:null,usersVisible:!1,internalSearchQuery:"",searchQueryDisplay:"",searchLocked:!1,usersSortColumn:"tutorial",usersSortDescending:!1,submissions:[],submissionsState:"loading",selectedSubmissionId:null,compareSubA:null,compareSubB:null,feedbackVisible:!1,feedbackLoading:!1,feedback:null,feedback_content:"",feedbackCriteria:null,splitPanelSubmissionsFrac:2,splitPanelWorkspaceFrac:3,selectedVerticalTab:"workspace",verticalTabsLoaded:{workspace:!1,compare:!1,feedback:!1}}},computed:Fe({},Object(p.e)(["course","user"]),{},Object(p.c)(["isStaff"]),{usersColumns:function(){return[!this.challenge.features.anonymous_submissions&&{key:"name",header:"Name",type:"text",sortable:!0},{key:"email",header:"Email",type:"text",sortable:!0},{key:"tutorial",header:"Tutorial",type:"text",sortable:!0},{key:"submissions",header:"Submissions",type:"number",sortable:!0},{key:"completed",header:"Completed",type:"boolean",sortable:!0},{key:"feedback",header:"Feedback",type:"boolean",sortable:!0}].filter(Boolean)},usersRowSort:function(){var e=this.usersSortDescending?-1:1;switch(this.usersSortColumn){case"completed":return function(t,n){var s=(t.completed?0:1)-(n.completed?0:1);return(0!==s?s:I.naturalComparator(t.name,n.name))*e}}},filteredUsers:function(){var e=this,t=["username","tutorial","email"];return this.challenge.features.anonymous_submissions||t.push("name"),this.users.filter((function(n){return I.validateSubstrDeep.apply(I,[n,e.internalSearchQuery].concat(t))}))},feedbackAmberContent:function(){return this.selectedSubmission.feedback.formatted?this.selectedSubmission.feedback.content:Re.b(this.selectedSubmission.feedback.content)},feedbackEditData:function(){return Fe({},this.feedback,{content:this.feedback_content,formatted:!0,criteria:this.feedbackCriteria.filter((function(e){return e.level})).map((function(e){return{name:e.name,description:e.level.description,mark:e.level.mark}}))})},feedbackCriteriaCalculatedMark:function(){return this.feedbackCriteria.reduce((function(e,t){return e+(t.level?t.level.mark:0)}),0)},feedbackTestsCalculatedMark:function(){return this.selectedSubmission.result.testcases.reduce((function(e,t){return e+(t.passed?t.score:0)}),0)},userIndex:function(){return this.filteredUsers.indexOf(this.selectedUser)},prevUserEnabled:function(){return!this.usersVisible&&this.userIndex>0},nextUserEnabled:function(){return!this.usersVisible&&this.userIndex<this.filteredUsers.length-1},selectedSubmission:function(){var e=this;return this.submissions.find((function(t){return t.id===e.selectedSubmissionId}))},selectedSubmissionNumber:function(){var e=this.submissions.indexOf(this.selectedSubmission);return-1===e?-1:this.submissions.length-e},summaryTotal:function(){return this.users.reduce((function(e,t){return e+("student"===t.course_role?1:0)}),0)},summaryCompleted:function(){return this.users.reduce((function(e,t){return e+("student"===t.course_role&&t.completed?1:0)}),0)},summaryCompletedPercent:function(){return this.summaryCompleted/this.summaryTotal}}),watch:{searchQuery:function(e){this.internalSearchQuery=e||""},internalSearchQuery:function(e){this.$emit("search-query",e)},searchQueryDisplay:function(e){this.searchLocked||(this.internalSearchQuery=e)},userId:function(e){var t=this.users.find((function(t){return t.id===e}));t&&(this.selectedUser=t)},selectedUser:function(e){this.$emit("user-id",e&&e.id)},submissionId:function(e){var t=this.submissions.find((function(t){return t.id===e}));t&&(this.selectedSubmissionId=t.id)},selectedSubmission:(Je=Object(l.a)(o.a.mark((function e(t){var n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.$emit("submission-id",t&&t.id),this.resetVerticalTabs(),n=t&&this.submissions[this.submissions.indexOf(t)+1],t&&n?(this.compareSubA=n,this.compareSubB=t):(this.compareSubA=null,this.compareSubB=null),t&&!t.loading){e.next=6;break}return e.abrupt("return");case 6:return t.loaded=!1,t.loading=!0,e.prev=8,e.next=11,this.challengeApi.getSubmission(t.id,{password:this.password,ipHash:this.ipHash});case 11:s=e.sent,e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(8),M.b({type:"error",text:"Unable to load submission."}),e.abrupt("return");case 18:return e.prev=18,t.loading=!1,e.finish(18);case 21:Object.assign(t,s),t.loaded=!0;case 23:case"end":return e.stop()}}),e,this,[[8,14,18,21]])}))),function(e){return Je.apply(this,arguments)}),usersVisible:(Xe=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&m()()-this.usersFetchedAt>6e4)){e.next=5;break}return this.usersFetchedAt=m()(),e.next=4,this.challengeApi.getUsers(this.challenge.id);case 4:this.users=e.sent;case 5:case"end":return e.stop()}}),e,this)}))),function(e){return Xe.apply(this,arguments)}),selectedVerticalTab:{immediate:!0,handler:"loadSelectedVerticalTab"}},shouldConfirmRouteUpdate:function(e,t){return this.isStaff&&(e.params.courseId!==t.params.courseId||e.params.challengeId!==t.params.challengeId)},routeUpdateMessage:function(){if(this.isStaff&&this.feedbackVisible&&!h()(this.feedbackEditData,this.selectedSubmission.feedback))return{message:"You have not saved your feedback. If you continue, you will lose any changes you have made to the feedback.",action:"Discard"}},created:function(){this.disposables=new Me.a(this.eventBus.on("stream:challenge.submission",this.onStreamSubmission),this.eventBus.on("stream:challenge.submission-status",this.onStreamSubmissionStatus)),this.usersFetchedAt=m()(0),document.addEventListener("keyup",this.onDocumentKeyup),this.update()},destroyed:function(){this.disposables.dispose(),document.removeEventListener("keyup",this.onDocumentKeyup)},methods:{formatPercent:I.formatPercent,pluralize:I.pluralize,update:function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,s,i=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isStaff){e.next=28;break}return this.usersState="loading",this.usersFetchedAt=m()(),e.prev=3,e.next=6,this.challengeApi.getUsers(this.challenge.id);case 6:this.users=e.sent,e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(3),this.usersState="error",M.b({type:"error",text:"Unable to fetch users."}),e.abrupt("return");case 14:if(this.usersState="loaded",this.searchQuery){e.next=25;break}if(t=null,!(t=this.userId?this.users.find((function(e){return e.id===i.userId})):this.email?this.users.find((function(e){return e.email===i.email})):this.users.find((function(e){return e.id===i.user.id})))){e.next=24;break}return e.next=21,this.selectUser(t);case 21:this.submissionId&&(n=this.submissions.find((function(e){return e.id===i.submissionId})))&&this.selectSubmission(n),e.next=25;break;case 24:this.loadUserSubmissions(this.user.id);case 25:this.searchQuery&&(this.usersVisible=!0,this.searchQueryDisplay=this.searchQuery.trim()),e.next=31;break;case 28:return e.next=30,this.loadUserSubmissions(this.user.id);case 30:this.submissionId&&(s=this.submissions.find((function(e){return e.id===i.submissionId})))&&this.selectSubmission(s);case 31:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(){return e.apply(this,arguments)}}(),loadSelectedVerticalTab:function(){this.verticalTabsLoaded[this.selectedVerticalTab]=!0},resetVerticalTabs:function(){for(var e=0,t=Object.keys(this.verticalTabsLoaded);e<t.length;e++){var n=t[e];this.verticalTabsLoaded[n]=n===this.selectedVerticalTab}},feedbackSubmissionLabel:function(e){var t=this.submissions.length-this.submissions.indexOf(e),n=m()(e.created_at).format("dddd D MMMM YYYY, h:mm:ss a");return"#".concat(t," on ").concat(n)},onSearchQueryFocus:(Ge=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.searchQueryFocusTime&&new Date-this.searchQueryFocusTime<1e3)){e.next=3;break}return t.target.blur(),e.abrupt("return");case 3:return e.next=5,this.$showRouteUpdateAlert();case 5:if(!e.sent){e.next=10;break}this.searchLocked&&(this.searchLocked=!1,this.searchQueryDisplay=this.internalSearchQuery),this.feedbackVisible=!1,this.usersVisible=!0,this.$refs.search.focus();case 10:this.searchQueryFocusTime=new Date;case 11:case"end":return e.stop()}}),e,this)}))),function(e){return Ge.apply(this,arguments)}),clearSearchQuery:function(){this.searchLocked?(this.searchLocked=!1,this.searchQueryDisplay="",this.usersVisible=!0,this.$refs.search.focus()):this.searchQueryDisplay=""},selectUser:function(e){return this.usersVisible=!1,this.feedbackVisible=!1,this.selectedUser=e,this.submissions=[],this.selectedSubmissionId=null,this.searchLocked=!0,this.searchQueryDisplay=this.challenge.features.anonymous_submissions?e.email:e.name,e?this.loadUserSubmissions(e.id):Promise.resolve(!0)},selectFirstUser:function(){this.filteredUsers.length&&(this.selectUser(this.filteredUsers[0]),this.$refs.search.blur())},selectPrevUser:(Ye=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$showRouteUpdateAlert();case 2:if(e.t0=e.sent,!e.t0){e.next=5;break}e.t0=this.prevUserEnabled;case 5:if(!e.t0){e.next=7;break}this.selectUser(this.filteredUsers[this.userIndex-1]);case 7:case"end":return e.stop()}}),e,this)}))),function(){return Ye.apply(this,arguments)}),selectNextUser:(Ke=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$showRouteUpdateAlert();case 2:if(e.t0=e.sent,!e.t0){e.next=5;break}e.t0=this.nextUserEnabled;case 5:if(!e.t0){e.next=7;break}this.selectUser(this.filteredUsers[this.userIndex+1]);case 7:case"end":return e.stop()}}),e,this)}))),function(){return Ke.apply(this,arguments)}),onDocumentKeyup:function(e){if(e.target===document.body){switch(e.key){case"Escape":this.$refs.search.focus();break;case"j":this.selectPrevUser();break;case"k":this.selectNextUser();break;default:return}e.preventDefault()}},loadUserSubmissions:(Qe=Object(l.a)(o.a.mark((function e(t){var n,s,i,r,a,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.submissions=[],this.submissionsState="loading",e.prev=2,e.next=5,this.challengeApi.getUserSubmissions(t,this.challenge.id);case 5:n=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),this.submissionsState="error",M.b({type:"error",text:"Unable to load submissions."}),e.abrupt("return");case 13:for(this.submissionsState="loaded",s=!0,i=!1,r=void 0,e.prev=17,a=n[Symbol.iterator]();!(s=(l=a.next()).done);s=!0)$e(l.value);e.next=25;break;case 21:e.prev=21,e.t1=e.catch(17),i=!0,r=e.t1;case 25:e.prev=25,e.prev=26,s||null==a.return||a.return();case 28:if(e.prev=28,!i){e.next=31;break}throw r;case 31:return e.finish(28);case 32:return e.finish(25);case 33:this.submissions=n;case 34:case"end":return e.stop()}}),e,this,[[2,8],[17,21,25,33],[26,,28,32]])}))),function(e){return Qe.apply(this,arguments)}),selectSubmission:function(e){e?(this.selectedSubmissionId=e.id,e.new=!1):this.selectedSubmissionId=null},isSubmissionSelected:function(e){return this.selectedSubmissionId===e.id},remarkSubmission:(We=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.status="queued",e.prev=1,e.next=4,this.challengeApi.remarkSubmission(t.id);case 4:n=e.sent,Object.assign(t,n),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),t.status="errored",M.b({type:"error",text:"Unable to remark submission."});case 12:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e){return We.apply(this,arguments)}),deleteSubmission:(He=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye.e(Ne);case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,this.challengeApi.deleteSubmission(t.id);case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(4),M.b({type:"error",text:"Unable to delete submission."}),e.abrupt("return");case 13:this.submissions=this.submissions.filter((function(e){return e!==t})),this.isSubmissionSelected(t)&&this.selectSubmission(null),M.b({type:"success",text:"Submission deleted."});case 16:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(e){return He.apply(this,arguments)}),onOpenWorkspace:function(){this.$emit("open-workspace",this.selectedUser.id)},feedbackEdit:function(){var e=this;this.feedbackVisible=!0,this.feedback=this.selectedSubmission.feedback?u()(this.selectedSubmission.feedback):{mark:null,content:"",formatted:!1,criteria:[]},this.feedback_content=this.feedback.formatted?this.feedback.content:Re.b(this.feedback.content),this.feedbackCriteria=this.challenge.settings.criteria.map((function(t){var n=e.feedback.criteria.find((function(e){return e.name===t.name}));return{name:t.name,levels:t.levels,level:n&&t.levels.find((function(e){return e.mark===n.mark}))||null}}))},feedbackCancel:(Ve=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!this.isStaff,e.t0){e.next=5;break}return e.next=4,this.$showRouteUpdateAlert();case 4:e.t0=e.sent;case 5:if(!e.t0){e.next=7;break}this.feedbackVisible=!1;case 7:case"end":return e.stop()}}),e,this)}))),function(){return Ve.apply(this,arguments)}),feedbackSave:(ze=Object(l.a)(o.a.mark((function e(){var t,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.selectedSubmission,n=this.feedbackEditData,!this.feedbackLoading&&t){e.next=4;break}return e.abrupt("return");case 4:if(!(s=this.feedbackCriteria.find((function(e){return!e.level})))){e.next=9;break}return e.next=8,ye.a({icon:"warning",title:"Invalid feedback",text:'Choose a mark for the "'.concat(s.name,'" criterion.')});case 8:return e.abrupt("return");case 9:if(!("number"!=typeof n.mark||n.mark<0||n.mark>this.challenge.settings.max_mark)){e.next=14;break}return e.next=12,ye.a({icon:"warning",title:"Invalid feedback",text:"Enter a valid final mark for this submission."});case 12:return this.$refs.feedbackMark.$el.select(),e.abrupt("return");case 14:return this.feedbackLoading=!0,e.prev=15,e.next=18,this.challengeApi.updateSubmissionFeedback(t.id,n);case 18:e.next=24;break;case 20:return e.prev=20,e.t0=e.catch(15),M.b({type:"error",text:"Unable to save submission feedback."}),e.abrupt("return");case 24:return e.prev=24,this.feedbackLoading=!1,e.finish(24);case 27:this.feedbackVisible=!1,M.b({type:"success",text:"Submission feedback saved."}),t.feedback=u()(n),this.selectedUser&&(this.selectedUser.feedback=!0);case 31:case"end":return e.stop()}}),e,this,[[15,20,24,27]])}))),function(){return ze.apply(this,arguments)}),feedbackRemove:(Ue=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.selectedSubmission,!this.feedbackLoading&&t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,ye.b({icon:"warning",title:"Remove submission feedback?",text:"The existing feedback for this submission will be removed. This cannot be undone."});case 5:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return this.feedbackLoading=!0,e.prev=8,e.next=11,this.challengeApi.updateSubmissionFeedback(t.id,null);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(8),M.b({type:"error",text:"Unable to remove submission feedback."}),e.abrupt("return");case 17:return e.prev=17,this.feedbackLoading=!1,e.finish(17);case 20:this.feedbackVisible=!1,M.b({type:"success",text:"Submission feedback removed."}),t.feedback=null,this.selectedUser&&(this.selectedUser.feedback=!1);case 24:case"end":return e.stop()}}),e,this,[[8,13,17,20]])}))),function(){return Ue.apply(this,arguments)}),onStreamSubmission:function(e){var t=e.data.submission;if(t.user_id===(this.selectedUser||this.user).id){(t=$e(Fe({},t))).new=!0;var n=this.submissions.findIndex((function(e){return e.id===t.id}));-1===n?this.submissions.unshift(t):this.submissions.splice(n,1,t)}},onStreamSubmissionStatus:function(e){var t=e.data,n=this.submissions.find((function(e){return e.id===t.submissionId}));n&&(n.status=t.status,n.new=!0)}}};n("G7fi");function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nt={components:{Submissions:Object(x.a)(Ze,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chasub-layout"},[e.isStaff?n("div",{staticClass:"chasub-search-header"},["loading"===e.usersState?n("Spinner",{staticClass:"chasub-search-loading-spinner"}):e._e(),e._v(" "),"error"===e.usersState?n("div",{staticClass:"chasub-search-error"},[e._v("Unable to load users. Check your Internet connection.")]):e._e(),e._v(" "),"loaded"===e.usersState?[n("button",{directives:[{name:"show",rawName:"v-show",value:!e.usersVisible,expression:"!usersVisible"}],staticClass:"chasub-search-btn prev",attrs:{disabled:!e.prevUserEnabled},on:{click:e.selectPrevUser}},[e._v("Previous "),n("KeyboardShortcut",{attrs:{value:"j"}})],1),e._v(" "),n("div",{staticClass:"chasub-search-box"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQueryDisplay,expression:"searchQueryDisplay"}],ref:"search",staticClass:"chasub-search-box-input",class:{locked:e.searchLocked},attrs:{placeholder:"Search for a user",autocomplete:"off",spellcheck:"false"},domProps:{value:e.searchQueryDisplay},on:{focus:e.onSearchQueryFocus,keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.clearSearchQuery(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.selectFirstUser(t)}],input:function(t){t.target.composing||(e.searchQueryDisplay=t.target.value)}}}),e._v(" "),n("Icon",{directives:[{name:"show",rawName:"v-show",value:e.searchQueryDisplay,expression:"searchQueryDisplay"}],staticClass:"chasub-search-box-icon",attrs:{icon:"cross"},on:{mousedown:function(t){return t.preventDefault(),e.clearSearchQuery(t)}}})],1),e._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:!e.usersVisible,expression:"!usersVisible"}],staticClass:"chasub-search-btn next",attrs:{disabled:!e.nextUserEnabled},on:{click:e.selectNextUser}},[e._v("Next "),n("KeyboardShortcut",{attrs:{value:"k"}})],1)]:e._e()],2):e._e(),e._v(" "),e.isStaff&&e.usersVisible?[e.summaryTotal>0?n("div",{staticClass:"chasub-users-summary"},[n("strong",[e._v(e._s(e.summaryCompleted))]),e._v(" of "),n("strong",[e._v(e._s(e.summaryTotal))]),e._v("\n\t\t\t"+e._s(e.pluralize(e.summaryTotal,"student"))+" completed ("),n("strong",[e._v(e._s(e.formatPercent(e.summaryCompletedPercent)))]),e._v(")\n\t\t")]):e._e(),e._v(" "),e.filteredUsers.length?n("div",{staticClass:"chasub-users-container"},[n("Datatable",{staticClass:"chasub-users",attrs:{theme:"rowBorder",columns:e.usersColumns,rows:e.filteredUsers,"row-height":36,"row-key":function(e){return e.id},"sort-column":e.usersSortColumn,"sort-descending":e.usersSortDescending,"row-sort":e.usersRowSort,"selection-mode":"row",virtualized:""},on:{"update:sortColumn":function(t){e.usersSortColumn=t},"update:sort-column":function(t){e.usersSortColumn=t},"update:sortDescending":function(t){e.usersSortDescending=t},"update:sort-descending":function(t){e.usersSortDescending=t},"row-click":function(t){return e.selectUser(t.row)}},scopedSlots:e._u([{key:"cell",fn:function(t){return[n("UsersCell",e._b({},"UsersCell",t,!1))]}}],null,!1,3885708805)})],1):e._e(),e._v(" "),"loaded"!==e.usersState||e.filteredUsers.length?e._e():n("StatusMessage",{staticClass:"chasub-users-none"},[e.users.length?e._e():[e._v("No users")],e._v(" "),e.users.length?[e._v("No users match your search query")]:e._e()],2)]:e.usersVisible?e._e():n("div",{staticClass:"chasub-subs-container"},["error"===e.submissionsState?n("div",{staticClass:"chasub-placeholder"},[e._v("Unable to load submissions. Check your Internet connection.")]):e._e(),e._v(" "),n("Split",{directives:[{name:"show",rawName:"v-show",value:"loaded"===e.submissionsState,expression:"submissionsState === 'loaded'"}],staticClass:"chasub-subs-split",attrs:{orientation:"horizontal","persist-id":"challengeSubmissions"}},[n("SplitPanel",{key:"submissions",attrs:{frac:e.splitPanelSubmissionsFrac,collapsable:"","collapsed-text":"Submissions"},on:{"update:frac":function(t){e.splitPanelSubmissionsFrac=t}}},[e.feedbackVisible?n("div",{staticClass:"chasub-fb-container"},[e.isStaff?e._e():n("h4",{staticClass:"chasub-fb-heading"},[n("a",{on:{click:e.feedbackCancel}},[e._v("Back to Submissions")])]),e._v(" "),n("h3",{staticClass:"chasub-fb-heading"},[e._v(e._s(e.isStaff?"Editing":"Viewing")+" Feedback")]),e._v(" "),e.selectedUser&&e.selectedSubmission?n("div",{staticClass:"chasub-fb-info"},[n("strong",[e._v("User:")]),e._v(" "+e._s(e.challenge.features.anonymous_submissions?e.selectedUser.email:e.selectedUser.name)),n("br"),e._v(" "),n("strong",[e._v("Submission:")]),e._v(" "+e._s(e.feedbackSubmissionLabel(e.selectedSubmission))+"\n\t\t\t\t\t")]):e._e(),e._v(" "),e.isStaff?[e._l(e.feedbackCriteria,(function(t,s){return n("div",{key:s,staticClass:"chasub-fb-field"},[n("div",{staticClass:"chasub-fb-label"},[e._v(e._s(t.name))]),e._v(" "),n("EdSelect",{staticClass:"chasub-fb-criterion-levels",model:{value:t.level,callback:function(n){e.$set(t,"level",n)},expression:"criterion.level"}},e._l(t.levels,(function(t,s){return n("option",{key:s,domProps:{value:t}},[e._v("("+e._s(t.mark)+" marks) "+e._s(t.description))])})),0)],1)})),e._v(" "),n("div",{staticClass:"chasub-fb-field"},[n("div",{staticClass:"chasub-fb-label"},[e._v("Feedback")]),e._v(" "),n("div",{staticClass:"chasub-fb-feedback"},[n("Amber",{staticClass:"chasub-fb-feedback-amber",model:{value:e.feedback_content,callback:function(t){e.feedback_content=t},expression:"feedback_content"}})],1)]),e._v(" "),n("div",{staticClass:"chasub-fb-mark-container"},[n("div",{staticClass:"chasub-fb-mark-calculated"},[e.feedbackCriteria.length?n("div",[e._v("Marks calculated from criteria: "+e._s(e.feedbackCriteriaCalculatedMark))]):e._e(),e._v(" "),e.challenge.settings.per_testcase_scores?[n("div",[e._v("Marks calculated from testcases: "+e._s(e.feedbackTestsCalculatedMark))]),e._v(" "),n("div",[e._v("Total calculated marks: "+e._s(e.feedbackCriteriaCalculatedMark+e.feedbackTestsCalculatedMark))])]:e._e()],2),e._v(" "),n("label",{staticClass:"chasub-fb-mark-final"},[e._v("\n\t\t\t\t\t\t\t\tFinal mark"),n("br"),e._v(" "),n("span",{staticClass:"sub"},[e._v("(out of "+e._s(e.challenge.settings.max_mark)+")")])]),e._v(" "),n("EdInput",{ref:"feedbackMark",staticClass:"chasub-fb-mark-input",attrs:{disabled:e.feedbackLoading},model:{value:e.feedback.mark,callback:function(t){e.$set(e.feedback,"mark",e._n(t))},expression:"feedback.mark"}})],1),e._v(" "),n("div",{staticClass:"chasub-fb-actions"},[n("div",{staticClass:"chasub-fb-actions-group"},[e.selectedSubmission.feedback?n("EdButton",{staticClass:"danger",on:{click:e.feedbackRemove}},[e._v("Remove")]):e._e()],1),e._v(" "),n("div",{staticClass:"chasub-fb-actions-group"},[n("EdButton",{on:{click:e.feedbackCancel}},[e._v("Cancel")]),e._v(" "),n("EdButton",{staticClass:"primary",on:{click:e.feedbackSave}},[e._v("Save")])],1)])]:[e._l(e.selectedSubmission.feedback.criteria,(function(t,s){return n("div",{key:s,staticClass:"chasub-fb-field"},[n("div",{staticClass:"chasub-fb-label"},[e._v(e._s(t.name))]),e._v(" "),n("div",{staticClass:"chasub-fb-value"},[e._v("("+e._s(t.mark)+" marks) "+e._s(t.description))])])})),e._v(" "),n("div",{staticClass:"chasub-fb-field"},[n("div",{staticClass:"chasub-fb-label"},[e._v("Final mark")]),e._v(" "),n("div",{staticClass:"chasub-fb-value"},[e._v(e._s(e.feedback.mark))])]),e._v(" "),e.selectedSubmission.feedback.content?n("div",{staticClass:"chasub-fb-field"},[n("div",{staticClass:"chasub-fb-label"},[e._v("Feedback")]),e._v(" "),n("div",{staticClass:"chasub-fb-value"},[n("AmberDisplay",{attrs:{value:e.feedbackAmberContent}})],1)]):e._e()]],2):e._e(),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.feedbackVisible,expression:"!feedbackVisible"}],staticClass:"chasub-list-container"},[e.isStaff&&e.$listeners["open-workspace"]?n("div",{staticClass:"chasub-list-actions"},[n("EdButton",{on:{click:e.onOpenWorkspace}},[e._v("Open Workspace")])],1):e._e(),e._v(" "),e.selectedSubmission?[n("header",{staticClass:"chasub-list-header"},[n("button",{staticClass:"chasub-list-header-btn",on:{click:function(t){return e.selectSubmission(null)}}},[n("Icon",{attrs:{icon:"chevron-left"}}),e._v(" "),n("span",[e._v("Submissions")])],1),e._v(" "),n("span",{staticClass:"chasub-list-header-text-aside"},[e._v("\n\t\t\t\t\t\t\t\tSubmission "+e._s(e.selectedSubmissionNumber)+", "),n("DateDisplay",{staticClass:"date",attrs:{date:e.selectedSubmission.created_at,format:"fromNow"}})],1)]),e._v(" "),n("div",{staticClass:"chasub-sub"},[n("div",{staticClass:"chasub-sub-inner"},[e.isStaff?n("div",{staticClass:"chasub-sub-actions"},["none"!==e.challenge.type?n("button",{staticClass:"chasub-sub-action",attrs:{disabled:"queued"===e.selectedSubmission.status},on:{click:function(t){return e.remarkSubmission(e.selectedSubmission)}}},[n("Icon",{attrs:{icon:"reload"}}),e._v(" Remark")],1):e._e(),e._v(" "),n("button",{staticClass:"chasub-sub-action",on:{click:function(t){return e.deleteSubmission(e.selectedSubmission)}}},[n("Icon",{attrs:{icon:"cross"}}),e._v(" Delete")],1),e._v(" "),e.challenge.features.feedback?n("button",{staticClass:"chasub-sub-action",on:{click:function(t){return t.stopPropagation(),e.feedbackEdit(t)}}},[n("Icon",{attrs:{icon:"pencil"}}),e._v(" "+e._s(e.selectedSubmission.feedback?"Edit":"Give")+" Feedback")],1):e._e()]):e._e(),e._v(" "),!e.isStaff&&e.challenge.is_feedback_visible&&e.selectedSubmission.feedback?n("div",{staticClass:"chasub-sub-actions"},[n("button",{staticClass:"chasub-sub-action",on:{click:function(t){return t.stopPropagation(),e.feedbackEdit(t)}}},[e._v("View Feedback")])]):e._e(),e._v(" "),e.selectedSubmission.loaded&&"queued"!==e.selectedSubmission.status?n("Submission",{staticClass:"chasub-submission",attrs:{submission:e.selectedSubmission,"challenge-type":e.challenge.type,role:e.course.role,"per-testcase-scores":e.challenge.settings.per_testcase_scores}}):e._e(),e._v(" "),e.selectedSubmission.loading?n("Spinner",{staticClass:"chasub-loading-spinner"}):e._e()],1)])]:[n("header",{staticClass:"chasub-list-header"},[n("span",{staticClass:"chasub-list-header-text"},[e._v("Submissions")])]),e._v(" "),n("SubmissionsList",{staticClass:"chasub-list",attrs:{submissions:e.submissions,challenge:e.challenge},on:{"submission-click":function(t){return e.selectSubmission(t)}}})]],2)]),e._v(" "),n("SplitPanel",{key:"workspace",attrs:{frac:e.splitPanelWorkspaceFrac,collapsable:"","collapsed-text":"Workspace"},on:{"update:frac":function(t){e.splitPanelWorkspaceFrac=t}}},[e.selectedSubmission?n("VerticalTabs",{staticClass:"chasub-vertical-tabs",attrs:{side:"right","selected-tab":e.selectedVerticalTab},on:{"update:selectedTab":function(t){e.selectedVerticalTab=t},"update:selected-tab":function(t){e.selectedVerticalTab=t}}},[n("VerticalTab",{key:"workspace",attrs:{text:"Workspace"}},[e.verticalTabsLoaded.workspace&&e.selectedSubmission.loaded?n("ChallengeWorkspace",{staticClass:"chasub-workspace",attrs:{"persist-id":"challengeSubmissionWorkspace",challenge:e.challenge,"connect-type":"submission","connect-param":e.selectedSubmission.id,password:e.password,"ip-hash":e.ipHash,"shortcut-keys-disabled":"workspace"!==e.selectedVerticalTab||e.shortcutKeysDisabled}}):e._e()],1),e._v(" "),e.compareSubA&&e.compareSubB?n("VerticalTab",{key:"compare",attrs:{text:"Compare"}},[e.verticalTabsLoaded.compare?n("div",{staticClass:"chasub-compare-scroll"},[n("Compare",{staticClass:"chasub-compare",attrs:{"workspace-id":e.compareSubA.workspace_id,hash1:e.compareSubA.workspace_hash,hash2:e.compareSubB.workspace_hash}})],1):e._e()]):e._e(),e._v(" "),n("VerticalTab",{key:"feedback",attrs:{text:"Feedback"}},[e.verticalTabsLoaded.feedback&&e.selectedSubmission.loaded?n("FeedbackFileViewer",{staticClass:"chasub-feedback-file-viewer",attrs:{"submission-id":e.selectedSubmission.id,"connect-password":e.password,"connect-ip-hash":e.ipHash}}):e._e()],1)],1):n("div",{staticClass:"chasub-placeholder"},[e._v("Select a submission")])],1)],1)],1)],2)}),[],!1,null,null,null).exports},props:{challenge:{type:Object,required:!0},searchQuery:{type:String,default:null},userId:{type:Number,default:null},email:{type:String,default:null},submissionId:{type:Number,default:null},password:{type:String,default:null},workspaceShowRoute:{type:String,required:!0}},data:function(){return{internalSearchQuery:this.searchQuery,internalUserId:this.userId,internalSubmissionId:this.submissionId}},watch:{searchQuery:function(e){this.internalSearchQuery=e},userId:function(e){this.internalUserId=e},submissionId:function(e){this.internalSubmissionId=e},internalSearchQuery:"updateRouteQuery",internalUserId:"updateRouteQuery",internalSubmissionId:"updateRouteQuery"},created:function(){this.updateRouteQuery=r()(this.updateRouteQuery,200)},methods:{updateRouteQuery:function(){this.$router.replace({name:this.$route.name,query:tt({},this.$route.query,{email:void 0,q:this.internalSearchQuery||void 0,u:this.internalUserId||void 0,s:this.internalSubmissionId||void 0})})},onOpenWorkspace:function(e){this.$router.push({name:this.workspaceShowRoute,query:{masquerade:e}})}}},st=Object(x.a)(nt,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("Submissions",{attrs:{challenge:e.challenge,password:e.password,"search-query":e.searchQuery,"user-id":e.userId,email:e.email,"submission-id":e.submissionId},on:{"search-query":function(t){e.internalSearchQuery=t},"user-id":function(t){e.internalUserId=t},"submission-id":function(t){e.internalSubmissionId=t},"open-workspace":e.onOpenWorkspace}})}),[],!1,null,null,null);t.default=st.exports},cDke:function(e,t,n){var s=n("I+eb"),i=n("0Dky"),r=n("BX/b").f;s({target:"Object",stat:!0,forced:i((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:r})},cGAI:function(e,t,n){"use strict";var s=n("8qT0");n.n(s).a},cHTo:function(e,t,n){"use strict";var s=n("gy6L");n.n(s).a},cIHA:function(e,t,n){},cPdD:function(e,t,n){"use strict";var s=n("ym4s");n.n(s).a},cW4G:function(e,t,n){},ca2K:function(e,t,n){"use strict";var s=n("Mpt7");n.n(s).a},ccaa:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("UxlC"),n("FZtP");var s=n("rePB"),i=n("L2JU");function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var a={name:"AssessmentMaster",data:function(){return{appbar:{titleLarge:"%PREV% – Assessments"}}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(i.e)(["course"])),created:function(){this.course.features.assessments||this.$router.replace({name:"course"})}},o=n("KHd+"),l=Object(o.a)(a,(function(){var e=this.$createElement;return(this._self._c||e)("RouterView")}),[],!1,null,null,null);t.default=l.exports},cfBO:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("4Brf"),n("0oug"),n("TeQF"),n("4mDm"),n("2B1R"),n("+2oP"),n("ToJy"),n("Tskq"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("PKPk"),n("FZtP"),n("3bBZ");var s=n("rePB"),i=n("bt/X"),r=n.n(i),a=n("L2JU"),o=n("WmPt"),l=n("hSdx"),c=n("NB5Z");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var d={directives:{Tooltip:n("Pa8A").a},props:{course:{type:Object,required:!0},sessionVisible:{type:Boolean,default:!1}},data:function(){return{codeId:l.uniqueId(),nameId:l.uniqueId()}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(a.e)(["user"]),{styleAside:function(){var e=l.hash(this.course.code+this.course.name);return{backgroundColor:c.a[e%c.a.length]}}})},h=(n("mEIf"),n("KHd+")),p=Object(h.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("RouterLink",{staticClass:"dash-course",attrs:{tabindex:"0",to:{name:"course",params:{courseId:e.course.id}},"aria-labelledby":e.codeId,"aria-describedby":e.nameId}},[n("div",{staticClass:"dash-course-inner"},[n("div",{staticClass:"dash-course-inner-aside",style:e.styleAside}),e._v(" "),n("div",{staticClass:"dash-course-inner-content"},[n("div",{staticClass:"dash-course-header"},[n("div",{staticClass:"dash-course-code",attrs:{id:e.codeId}},[e._v(e._s(e.course.code))]),e._v(" "),e.course.discussion&&e.course.discussion.unread?n("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Unread Threads",expression:"'Unread Threads'"}],staticClass:"dash-course-unread-count"},[e._v("\n\t\t\t\t\t"+e._s(e.course.discussion.unread>99?"99+":e.course.discussion.unread)+"\n\t\t\t\t")]):e._e()]),e._v(" "),n("div",{attrs:{id:e.nameId}},[n("div",{staticClass:"dash-course-name"},[e._v(e._s(e.course.name))]),e._v(" "),e.sessionVisible?n("div",{staticClass:"dash-course-session"},[e._v(e._s(e.course.session))]):e._e()])])])])}),[],!1,null,null,null).exports,f=n("N+Un"),m=n("9wdi");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var b={name:"Dashboard",components:{Icon:o.a,Course:p,Actionbar:m.a,ActionbarAction:f.a},inject:["eventBus"],data:function(){return{appbar:{title:"Dashboard",visible:!0}}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(a.e)(["user"]),{},Object(a.c)(["courseCreationRealms","activeLabCourses"]),{courses:function(){return this.user&&this.user.courses&&this.user.courses.slice().sort((function(e,t){return l.naturalComparator(e.code,t.code)}))||[]},activeCourseItems:function(){var e=this.courses.filter((function(e){return"archived"!==e.status})),t=new Map,n=!0,s=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value;t.has(o.code)||t.set(o.code,[]),t.get(o.code).push(o)}}catch(l){s=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}return e.map((function(e){return{course:e,sessionVisible:t.has(e.code)&&t.get(e.code).filter((function(t){return t.name===e.name})).length>1}}))},archivedGroups:function(){var e=this.courses.filter((function(e){return"archived"===e.status})),t=r()(e,(function(e){return e.year})),n=Object.keys(t).map((function(e){var n=t[e],s=r()(n,(function(e){return e.session})),i=Object.keys(s).map((function(e){var t=s[e];return t.sort((function(e,t){return l.naturalComparator(e.code,t.code)})),{session:e,courses:t}}));return i.sort((function(e,t){return l.naturalComparator(t.session,e.session)})),{year:e,sessions:i}}));n.sort((function(e,t){return l.naturalComparator(t.year,e.year)}));var s=[],i=!0,a=!1,o=void 0;try{for(var c,u=n[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var d=c.value,h=!0,p=!1,f=void 0;try{for(var m,v=d.sessions[Symbol.iterator]();!(h=(m=v.next()).done);h=!0){var b=m.value;s.push({year:d.year,session:b.session,courses:b.courses})}}catch(g){p=!0,f=g}finally{try{h||null==v.return||v.return()}finally{if(p)throw f}}}}catch(g){a=!0,o=g}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return s}}),created:function(){this.eventBus.emit("refresh-discussion-unread-counts")}},g=(n("6BMF"),Object(h.a)(b,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dashboard"},[e.courses.length?e._e():n("div",{staticClass:"dash-no-courses"},[n("p",[e._v("You have not been added to any courses in this system.")]),e._v(" "),n("p",[e._v("Not to worry, speak to your tutor or lecturer to be added.")])]),e._v(" "),e.activeLabCourses.length?[n("h1",{staticClass:"dash"},[e._v("Active Labs")]),e._v(" "),n("div",{staticClass:"dash-courses"},e._l(e.activeLabCourses,(function(e){return n("Course",{key:e.id,attrs:{course:e}})})),1)]:e._e(),e._v(" "),e.activeCourseItems.length?[n("h1",{staticClass:"dash"},[e._v("\n\t\t\tCourses\n\t\t\t"),n("Actionbar",{scopedSlots:e._u([{key:"primary",fn:function(){return[n("RouterLink",{attrs:{to:{name:"typefast"}}},[n("ActionbarAction",{staticClass:"dash-typefast media-not-sm"},[n("Icon",{attrs:{icon:"keyboard"}})],1)],1),e._v(" "),n("RouterLink",{staticClass:"dash-new-course-link",attrs:{to:{name:"course-new"}}},[0!==e.courseCreationRealms.length?n("ActionbarAction",{staticClass:"primary dash-new-course",attrs:{icon:"plus"}},[e._v("New")]):e._e()],1)]},proxy:!0}],null,!1,1686419842)})],1),e._v(" "),n("div",{staticClass:"dash-courses"},e._l(e.activeCourseItems,(function(e){return n("Course",{key:e.course.id,attrs:{course:e.course,"session-visible":e.sessionVisible}})})),1)]:e._e(),e._v(" "),e._l(e.archivedGroups,(function(t,s){return[n("h2",{key:2*s,staticClass:"dash"},[t.year?n("span",{staticClass:"dash-year"},[e._v(e._s(t.year))]):e._e(),e._v(" "),n("span",{staticClass:"dash-session"},[e._v(e._s(t.year||t.session?t.session:"Other"))])]),e._v(" "),n("div",{key:2*s+1,staticClass:"dash-courses"},e._l(t.courses,(function(e){return n("Course",{key:e.id,attrs:{course:e}})})),1)]}))],2)}),[],!1,null,null,null));t.default=g.exports},"ch+2":function(e,t,n){},cnFG:function(e,t,n){},cpuY:function(e,t,n){"use strict";var s=n("hNCp");n.n(s).a},cqJE:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("ma9I"),n("TeQF"),n("fbCW"),n("yq1k"),n("qePV"),n("5DmW"),n("27RR"),n("tkto"),n("JTJg"),n("SYor"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("L2JU"),l=n("Q2AE"),c=n("/Yj0"),u=n("5/Cn"),d=n("9Arg"),h=n("/jHr"),p=n("1mnw"),f=n("WPpO"),m=n("t19P"),v=n("4K9I"),b=n("tjHA"),g=n("TphV"),y=n("2PkB"),w=n("oDEV");function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e){return!e||h.c(e)?h.a:e}function x(){return{type:"question",title:"",category:"",subcategory:"",content:h.a,is_pinned:!1,is_private:!1,is_anonymous:!1}}var j,O,S,E={name:"DiscussEdit",components:{ThreadEditor:f.a,HeaderContainer:m.a,EdButton:v.a,EdButtonLink:b.a,Navbar:g.a,NavbarButton:y.a,FadeTransition:w.a},inject:["discussApi","courseApi","keyboardShortcutManager"],props:{threadId:{type:Number,default:null},threadList:{type:Object,required:!0},newType:{type:String,default:null}},data:function(){return{loadingThread:!1,savingThread:!1,original:null,model:x(),email:!1,errors:[],allowInvalid:!1}},computed:k({},Object(o.e)(["course"]),{},Object(o.e)("discuss",["category","subcategory","categoryChangedByUser"]),{},Object(o.c)(["isStaff"]),{},Object(o.c)("discuss",["categories"]),{types:function(){return["question","post",this.isStaff&&"announcement"].filter(Boolean)},isPinnedAvailable:function(){return this.isStaff},settings:function(){return this.course.settings.discussion},isPrivateForced:function(){return"announcement"!==this.model.type&&this.settings.private_threads_only&&(!this.original||this.original.is_private)},isPrivateAvailable:function(){return"announcement"!==this.model.type&&(this.isStaff||this.settings.private||this.isPrivateForced)},isPrivateDisabled:function(){return this.loading||this.isPrivateForced||!this.course.settings.discussion.anonymous_to_staff&&!this.isStaff&&!this.model.is_private&&this.model.is_anonymous},isAnonymousAvailable:function(){return"announcement"!==this.model.type&&this.settings.anonymous},isAnonymousDisabled:function(){return this.loading||!this.course.settings.discussion.anonymous_to_staff&&!this.isStaff&&!this.model.is_anonymous&&this.model.is_private},emailAvailable:function(){return"announcement"===this.model.type},loading:function(){return this.loadingThread||this.savingThread},categoryItem:function(){var e=this;return(this.categories||[]).find((function(t){return t.name===e.model.category}))},saveLabel:function(){return this.$t("".concat(this.original?"save":"post","Button"))},saveAnywayLabel:function(){return this.$t("discussion.threadEdit.".concat(this.original?"save":"post","AnywayButton"))},emptyContent:function(){return C("question"===this.model.type&&this.settings.thread_templates_enabled&&this.categoryItem?this.categoryItem.threadTemplate:null)},appbar:function(){var e=this;return{titleSmall:this.$t("discussion.threadEdit.titleSmall.".concat(this.threadId?"edit":"new",".").concat(this.model.type)),hamburger:!1,loading:this.loading,primaryActions:[{text:this.saveLabel,type:"default",disabled:this.loading,handler:function(){return e.save()}}],secondaryActions:[{text:this.$t("cancelButton"),handler:function(){return e.cancel()}}]}}}),watch:{threadId:"update",newType:"update","model.category":function(e){this.isPrivateForced||this.original||"staff"!==(e||"").toLowerCase()||(this.model.is_private=!0)},emptyContent:function(e,t){(C(this.model.content)===t||h.c(this.model.content))&&(this.model.content=e)}},created:function(){this.disposable=this.keyboardShortcutManager.registerMany([{description:"Save thread",shortcut:{default:"Control+s",mac:"Meta+s"},handler:this.save},{description:"Cancel thread edit",shortcut:"Escape",handler:this.cancel}]),this.update()},mounted:function(){this.setNavbarVisible(!0)},destroyed:function(){this.setNavbarVisible(!1),this.disposable.dispose()},shouldConfirmRouteUpdate:function(e,t){return t.params.threadId!==e.params.threadId},routeUpdateMessage:function(){var e=C(this.model.content);return this.original&&C(this.original.content)!==e?{message:this.$t("discussion.threadEdit.discardChanges.unsaved"),action:this.$t("discardButton")}:this.original||h.c(e)||e===this.emptyContent?void 0:{message:this.$t("discussion.threadEdit.discardChanges.unposted"),action:this.$t("discardButton")}},methods:k({},Object(o.d)({setNavbarVisible:l.c.SET_NAVBAR_VISIBLE}),{resetScroll:function(){var e=d.o(this.$refs.content);e&&(e.scrollTop=0)},update:(S=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loadingThread=!1,this.savingThread=!1,this.original=null,this.model=x(),this.model.type=this.types.includes(this.newType)?this.newType:"question",this.email=!1,!this.threadId){e.next=24;break}return this.loadingThread=!0,e.prev=7,e.next=10,this.discussApi.getThread(this.threadId);case 10:t=e.sent,this.original=t,this.model=k({},t),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(7),c.b({type:"error",text:this.$t("discussion.threadEdit.loadError")});case 18:return e.prev=18,this.loadingThread=!1,this.resetScroll(),e.finish(18);case 22:e.next=28;break;case 24:this.email=!0,this.settings.category_unselected&&this.categoryChangedByUser||(this.model.category=this.category?this.category.name:this.categories[0]?this.categories[0].name:"",this.model.subcategory=this.subcategory||""),this.isPrivateForced&&(this.model.is_private=!0),this.resetScroll();case 28:case"end":return e.stop()}}),e,this,[[7,15,18,22]])}))),function(){return S.apply(this,arguments)}),cancel:function(){this.$router.push(this.threadId?{name:"discuss-show"}:{name:"discuss-landing"})},save:(O=Object(r.a)(i.a.mark((function e(){var t,n=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]&&n[0],!this.loading){e.next=3;break}return e.abrupt("return");case 3:return this.savingThread=!0,e.prev=4,e.next=7,this.saveInternal(t);case 7:return e.prev=7,this.savingThread=!1,e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[4,,7,10]])}))),function(){return O.apply(this,arguments)}),saveInternal:(j=Object(r.a)(i.a.mark((function e(){var t,n,s,r,a,o,l,d,f,m,v,b,g=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=g.length>0&&void 0!==g[0]&&g[0],(n=this.model).title=n.title.trim(),s=[],n.title||s.push({field:"title",message:this.$t("discussion.threadEdit.emptyTitleError")}),n.category||s.push({field:"category",message:this.$t("discussion.threadEdit.emptyCategoryError")}),h.c(n.content)&&s.push({field:"content",message:this.$t("discussion.threadEdit.emptyContentError")}),!s.length){e.next=12;break}return this.errors=s,this.allowInvalid=!1,this.resetScroll(),e.abrupt("return");case 12:return e.prev=12,e.next=15,this.courseApi.get(this.course.id);case 15:r=e.sent,this.course.features.bots=r.features.bots,this.settings.bot_enabled=r.settings.discussion.bot_enabled,this.settings.bot_source=r.settings.discussion.bot_source,e.next=25;break;case 21:return e.prev=21,e.t0=e.catch(12),c.b({type:"error",text:this.$t("discussion.threadEdit.".concat(this.original?"save":"post","Error"))}),e.abrupt("return");case 25:if(a={type:n.type,title:n.title,content:n.content,category:n.category,subcategory:n.subcategory,is_pinned:!!this.isPinnedAvailable&&n.is_pinned,is_private:!!this.isPrivateAvailable&&n.is_private,is_anonymous:!!this.isAnonymousAvailable&&n.is_anonymous},"announcement"===n.type&&(a.send_emails=this.email),!this.course.features.bots||!this.settings.bot_enabled){e.next=52;break}return e.next=30,p.a(this.settings.bot_source);case 30:if(o=e.sent,!(l=o.error)){e.next=36;break}return e.next=35,u.a({icon:"error",title:this.$t("discussion.threadEdit.botErrorTitle"),text:this.$t("discussion.threadEdit.botErrorText"),subtext:"Error: ".concat(l)});case 35:return e.abrupt("return");case 36:return e.next=38,p.b({isNew:!this.original,type:a.type,title:a.title,plaintext:h.f(a.content),xml:a.content,category:a.category||null,subcategory:a.subcategory||null,isPinned:a.is_pinned,isPrivate:a.is_private,isAnonymous:a.is_anonymous});case 38:if(d=e.sent,f=d.error,m=d.result,!f&&m.valid||this.discussApi.logThreadBotActivity({thread_id:this.original?this.threadId:null,course_id:this.course.id,type:a.type,title:a.title,content:a.content,category:a.category,subcategory:a.subcategory,is_pinned:a.is_pinned,is_private:a.is_private,is_anonymous:a.is_anonymous,bot_result:f?{error:f}:m}),!f){e.next=46;break}return e.next=45,u.a({icon:"error",title:this.$t("discussion.threadEdit.botErrorTitle"),text:this.$t("discussion.threadEdit.botErrorText"),subtext:"Error: ".concat(f)});case 45:return e.abrupt("return");case 46:if(v=m.skippable||this.isStaff,m.valid||t&&v){e.next=52;break}return this.errors=m.errors,this.allowInvalid=v,this.resetScroll(),e.abrupt("return");case 52:if(e.t1=a.send_emails,!e.t1){e.next=57;break}return e.next=56,u.d({title:this.$t("discussion.threadEdit.emailConfirm.title"),text:this.$t("discussion.threadEdit.emailConfirm.text.".concat(this.original?"save":"post")),icon:"question",primaryAction:this.saveLabel,secondaryAction:this.$t("cancelButton")});case 56:e.t1=!e.sent;case 57:if(!e.t1){e.next=59;break}return e.abrupt("return");case 59:if(!this.original){e.next=72;break}return e.prev=60,e.next=63,this.discussApi.updateThread(this.threadId,a);case 63:b=e.sent,e.next=70;break;case 66:return e.prev=66,e.t2=e.catch(60),c.b({type:"error",text:this.$t("discussion.threadEdit.saveError")}),e.abrupt("return");case 70:e.next=82;break;case 72:return e.prev=72,e.next=75,this.discussApi.createThread(this.course.id,a);case 75:b=e.sent,e.next=82;break;case 78:return e.prev=78,e.t3=e.catch(72),c.b({type:"error",text:this.$t("discussion.threadEdit.postError")}),e.abrupt("return");case 82:this.original?this.threadList.putThread(b):this.threadList.prependThread(b),this.original=b,this.$router.push({name:"discuss-show",params:{threadId:b.id}});case 85:case"end":return e.stop()}}),e,this,[[12,21],[60,66],[72,78]])}))),function(){return j.apply(this,arguments)})})},T=(n("gvpz"),n("KHd+")),I=Object(T.a)(E,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("HeaderContainer",{staticClass:"discuss-edit",scopedSlots:e._u([{key:"header",fn:function(){return[n("Navbar",{staticClass:"media-not-sm-device",attrs:{title:e.appbar.titleSmall},scopedSlots:e._u([{key:"left",fn:function(){return e._l(e.appbar.secondaryActions,(function(e,t){return n("NavbarButton",{key:t,attrs:{text:e.text,type:e.type,disabled:e.disabled},on:{action:e.handler}})}))},proxy:!0},{key:"right",fn:function(){return e._l(e.appbar.primaryActions,(function(e,t){return n("NavbarButton",{key:t,attrs:{text:e.text,type:e.type,disabled:e.disabled},on:{action:e.handler}})}))},proxy:!0}])})]},proxy:!0}])},[e._v(" "),n("div",{ref:"content",staticClass:"de-content"},[e.loadingThread?e._e():[n("FadeTransition",[e.errors.length?n("div",{staticClass:"de-message"},[e._v("\n\t\t\t\t\t"+e._s(e.$t("discussion.threadEdit.threadInvalidError"))+"\n\t\t\t\t\t"),e.allowInvalid?n("EdButtonLink",{attrs:{disabled:e.loading},on:{click:function(t){return e.save(!0)}}},[e._v("\n\t\t\t\t\t\t"+e._s(e.saveAnywayLabel)+"\n\t\t\t\t\t")]):e._e()],1):e._e()]),e._v(" "),n("ThreadEditor",{attrs:{value:e.model,original:e.original,"pinned-hidden":!e.isPinnedAvailable,"private-hidden":!e.isPrivateAvailable,"private-disabled":e.isPrivateDisabled,"anonymous-hidden":!e.isAnonymousAvailable,"anonymous-disabled":e.isAnonymousDisabled,"suggestions-enabled":!e.original,email:e.email,errors:e.errors,"error-type":e.allowInvalid?"warning":"error"},on:{"update:email":function(t){e.email=t}}}),e._v(" "),n("div",{staticClass:"de-actions media-not-sm-device"},[n("EdButton",{staticClass:"primary",attrs:{disabled:e.loading},on:{click:function(t){return e.save(!1)}}},[e._v("\n\t\t\t\t\t"+e._s(e.saveLabel)+"\n\t\t\t\t")])],1)]],2)])}),[],!1,null,null,null);t.default=I.exports},cs2i:function(e,t,n){},d0Yx:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("rePB"),i=n("L2JU");function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var a={name:"NotFound",computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(i.e)(["user"]),{canGoBack:function(){return window.history.length>0}}),methods:{goBack:function(){window.history.back()}}},o=(n("o+Ch"),n("KHd+")),l=Object(o.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"notfound"},[n("h1",[e._v("Page not found")]),e._v(" "),n("p",[e._v("We could not find the page you requested. You can try the following:")]),e._v(" "),n("ul",[e.canGoBack?n("li",[n("a",{on:{click:e.goBack}},[e._v("Go back")])]):e._e(),e._v(" "),e.user?n("li",[n("RouterLink",{attrs:{to:{name:"dashboard"}}},[e._v("Go to your dashboard")])],1):n("li",[n("RouterLink",{attrs:{to:{name:"login"}}},[e._v("Go to log in page")])],1)])])}),[],!1,null,null,null);t.default=l.exports},d1fo:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("UxlC"),n("FZtP");var s=n("rePB"),i=n("L2JU");function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var a={name:"Settings",components:{SettingsPage:n("mx2J").a},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(i.e)(["isSmall","user"]),{},Object(i.c)(["isUserAdmin"]),{compact:function(){return this.isSmall},sections:function(){return[[{title:"Profile",route:"settings/profile"},{title:"Password",route:"settings/password"},{title:"Emails",route:"settings/emails"},{title:"My Courses",route:"settings/courses"},this.isUserAdmin&&{title:"Language",route:"settings/language"}].filter(Boolean),[{title:"Notifications",route:"settings/notifications"},{title:"SSH Keys",route:"settings/ssh"},!this.user.is_lti&&{title:"Merge Accounts",route:"settings/merge-accounts"}].filter(Boolean)]},rootPageVisible:function(){return"settings"===this.$route.name},appbar:function(){var e=this,t={visible:!0,title:"Settings"};return this.rootPageVisible||(t.hamburger=!1,t.secondaryActions=[{icon:"chevron-left",handler:function(){return e.$router.push({name:"settings"})}}]),t}}),created:function(){var e=this;this.$watch((function(){return!e.compact&&"settings"===e.$route.name}),(function(t){t&&e.$router.replace({name:e.sections[0][0].route})}),{immediate:!0})}},o=(n("olya"),n("KHd+")),l=Object(o.a)(a,(function(){var e=this.$createElement,t=this._self._c||e;return t("SettingsPage",{staticClass:"settings",attrs:{compact:this.compact,sections:this.sections,"root-page-visible":this.rootPageVisible,"detail-max-width":600}},[t("div",{staticClass:"settings-detail"},[t("RouterView")],1)])}),[],!1,null,null,null);t.default=l.exports},d4Fw:function(e,t,n){"use strict";n("07d7"),n("rNhl"),n("JfAA");var s=n("zBf9"),i=n("WmPt"),r=n("xtk+"),a={components:{Icon:i.a,EdInput:r.a},extends:s.a,data:function(){return{internalValue:""}},computed:{feedbackIcon:function(){switch(this.correct){case!0:return"tick";case!1:return"cross"}},feedbackClass:function(){switch(this.correct){case!0:return"correct";case!1:return"incorrect"}},feedbackText:function(){switch(this.correct){case!0:return"Correct";case!1:return this.solution?"Incorrect, correct answer is ".concat(this.solution):"Incorrect"}},valid:function(){return!isNaN(parseFloat(this.internalValue))}},watch:{value:{immediate:!0,handler:function(e){"number"!=typeof e||isNaN(e)||(this.internalValue=e.toString())}}},methods:{onInput:function(e){this.internalValue=e;var t=parseFloat(this.internalValue);isNaN(t)||this.$emit("input",t)}}},o=(n("ukqi"),n("KHd+")),l=Object(o.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quiz-question-show-num"},[n("EdInput",{staticClass:"qqen-input",attrs:{value:e.internalValue,readonly:!e.editable},on:{input:e.onInput}}),e._v(" "),null!=e.correct?n("div",{staticClass:"qqen-feedback",class:e.feedbackClass},[n("Icon",{staticClass:"qqen-fb-icon",attrs:{icon:e.feedbackIcon}}),e._v("\n\t\t"+e._s(e.feedbackText)+"\n\t")],1):e._e()],1)}),[],!1,null,null,null);t.a=l.exports},d8FT:function(e,t,n){var s=n("eUgh"),i=n("ut/Y"),r=n("idmN"),a=n("G6z8");e.exports=function(e,t){if(null==e)return{};var n=s(a(e),(function(e){return[e]}));return t=i(t),r(e,n,(function(e,n){return t(e,n[0])}))}},d8JK:function(e,t,n){e.exports=n.p+"assets/table-view-cell-accessory-disclosure.e1ded569.svg"},dA1T:function(e,t,n){"use strict";n("qePV");var s=n("Kaxq"),i=n("Yswc");function r(){}var a={functional:!0,props:{showInvisibles:{type:Boolean,default:!1},detectIndentation:{type:Boolean,default:!1},softTabs:{type:Boolean,default:!1},tabSize:{type:Number,default:4}},render:function(e,t){var n=t.props,a=n.showInvisibles,o=n.detectIndentation,l=n.softTabs,c=n.tabSize,u=t.listeners,d=u["update:showInvisibles"],h=void 0===d?r:d,p=u["update:detectIndentation"],f=void 0===p?r:p,m=u["update:softTabs"],v=void 0===m?r:m,b=u["update:tabSize"],g=void 0===b?r:b,y=u.convertIndentation,w=void 0===y?r:y;return[e(s.a,{key:"invisibles",attrs:{text:"Show Invisibles",checked:a},on:{click:function(){return h(!a)}}}),e(i.a),e(s.a,{key:"detect",attrs:{text:"Detect Indentation",checked:o},on:{click:function(){return f(!o)}}}),e(i.a),e(s.a,{key:"tabs",attrs:{text:"Indent Using Tabs",checked:!l},on:{click:function(){return v(!1)}}}),e(s.a,{key:"spaces",attrs:{text:"Indent Using Spaces",checked:l},on:{click:function(){return v(!0)}}}),e(i.a),e(s.a,{key:"tabSizeHeading",attrs:{text:"Tab Size",disabled:!0}}),e(s.a,{key:"tabSize2",attrs:{text:"  2 Spaces",checked:2===c},on:{click:function(){return g(2)}}}),e(s.a,{key:"tabSize3",attrs:{text:"  3 Spaces",checked:3===c},on:{click:function(){return g(3)}}}),e(s.a,{key:"tabSize4",attrs:{text:"  4 Spaces",checked:4===c},on:{click:function(){return g(4)}}}),e(i.a),e(s.a,{key:"convertTabsToSpaces",attrs:{text:"Convert Indentation to Spaces"},on:{click:function(){return w("spaces")}}}),e(s.a,{key:"convertSpacesToTabs",attrs:{text:"Convert Indentation to Tabs"},on:{click:function(){return w("tabs")}}})]}},o=n("KHd+"),l=Object(o.a)(a,void 0,void 0,!1,null,null,null);t.a=l.exports},dAzZ:function(e,t,n){},dDJA:function(e,t,n){},dFez:function(e,t,n){},dGVo:function(e,t,n){},dGaT:function(e,t,n){},dKa9:function(e,t,n){},dKf3:function(e,t,n){"use strict";var s=n("Ndut");n.n(s).a},dPHi:function(e,t,n){},dQhs:function(e,t,n){var s;window,s=function(e,t,n,s,i,r,a,o,l,c,u,d,h,p,f,m,v,b,g,y,w,_,k,C,x,j,O,S,E,T,I,D,P,A,N,R,M,L,F,B,q,$,U,z,V){return function(e){var t={};function n(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(s,i,function(t){return e[t]}.bind(null,i));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}({"./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js":function(e,t,n){"use strict";function s(e){if(Array.isArray(e))return e}n.r(t),n.d(t,"default",(function(){return s}))},"./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js":function(e,t,n){"use strict";function s(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}n.r(t),n.d(t,"default",(function(){return s}))},"./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js":function(e,t,n){"use strict";function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.r(t),n.d(t,"default",(function(){return s}))},"./node_modules/@babel/runtime/helpers/esm/classCallCheck.js":function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t),n.d(t,"default",(function(){return s}))},"./node_modules/@babel/runtime/helpers/esm/construct.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return r}));var s=n("./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js");function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function r(e,t,n){return(r=i()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&Object(s.default)(r,n.prototype),r}).apply(null,arguments)}},"./node_modules/@babel/runtime/helpers/esm/createClass.js":function(e,t,n){"use strict";function s(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function i(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}n.r(t),n.d(t,"default",(function(){return i}))},"./node_modules/@babel/runtime/helpers/esm/defineProperty.js":function(e,t,n){"use strict";function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,"default",(function(){return s}))},"./node_modules/@babel/runtime/helpers/esm/get.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var s=n("./node_modules/@babel/runtime/helpers/esm/superPropBase.js");function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=Object(s.default)(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}},"./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js":function(e,t,n){"use strict";function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.r(t),n.d(t,"default",(function(){return s}))},"./node_modules/@babel/runtime/helpers/esm/inherits.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var s=n("./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js");function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(s.default)(e,t)}},"./node_modules/@babel/runtime/helpers/esm/iterableToArray.js":function(e,t,n){"use strict";function s(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}n.r(t),n.d(t,"default",(function(){return s}))},"./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js":function(e,t,n){"use strict";function s(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],s=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(s=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);s=!0);}catch(l){i=!0,r=l}finally{try{s||null==o.return||o.return()}finally{if(i)throw r}}return n}}n.r(t),n.d(t,"default",(function(){return s}))},"./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js":function(e,t,n){"use strict";function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}n.r(t),n.d(t,"default",(function(){return s}))},"./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js":function(e,t,n){"use strict";function s(){throw new TypeError("Invalid attempt to spread non-iterable instance")}n.r(t),n.d(t,"default",(function(){return s}))},"./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return r}));var s=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),i=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");function r(e,t){return!t||"object"!==Object(s.default)(t)&&"function"!=typeof t?Object(i.default)(e):t}},"./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js":function(e,t,n){"use strict";function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.r(t),n.d(t,"default",(function(){return s}))},"./node_modules/@babel/runtime/helpers/esm/slicedToArray.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));var s=n("./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js"),i=n("./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js"),r=n("./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js");function a(e,t){return Object(s.default)(e)||Object(i.default)(e,t)||Object(r.default)()}},"./node_modules/@babel/runtime/helpers/esm/superPropBase.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var s=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");function i(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(s.default)(e)););return e}},"./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));var s=n("./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js"),i=n("./node_modules/@babel/runtime/helpers/esm/iterableToArray.js"),r=n("./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js");function a(e){return Object(s.default)(e)||Object(i.default)(e)||Object(r.default)()}},"./node_modules/@babel/runtime/helpers/esm/typeof.js":function(e,t,n){"use strict";function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t),n.d(t,"default",(function(){return s}))},"./node_modules/@babel/runtime/regenerator/index.js":function(e,t,n){e.exports=n("regenerator-runtime")},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/components/Dropper.vue?vue&type=script&lang=js&":function(e,t,n){"use strict";n.r(t),t.default={data:function(){return{dragCounter:0}},methods:{onDragEnter:function(e){e.preventDefault(),this.dragCounter++},onDragLeave:function(e){e.preventDefault(),this.dragCounter--},onDragOver:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault(),this.dragCounter=0,this.$emit("drop",e)}}}},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/ui/components/ContextMenuComponent.vue?vue&type=script&lang=js&":function(e,t,n){"use strict";n.r(t),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.set"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=n("vue"),r=n.n(i),a=n("./src/media.ts"),o=n("./src/domUtil.ts"),l=n("./src/ui/components/PopoverMixin.js"),c=new Set;t.default=r.a.extend({name:"context-menu",mixins:[l.default],data:function(){return{visible:!1,popover:!1,modal:!0,phone:!1,itemForVisibleSubMenu:null}},computed:{groups:function(){var e=[],t=[],n=!0,s=!1,i=void 0;try{for(var r,a=this.items[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value;!o&&t.length>0?(e.push(t),t=[]):o&&!o.hidden&&t.push(o)}}catch(l){s=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}return t.length>0&&e.push(t),e}},mounted:function(){this.dismissable=!1,this.subMenuTimeout=null,this.targetElement=null,c.add(this),document.body.appendChild(this.$el)},destroyed:function(){c.delete(this),o.setWindowScrollEnabled(!0),this.$el.remove()},watch:{visible:function(){var e=this;this.visible?setTimeout((function(){e.dismissable=!0})):this.dismissable=!1}},methods:{onBeforeEnter:function(){this.phone&&o.setWindowScrollEnabled(!1)},onAfterLeave:function(){this.phone&&o.setWindowScrollEnabled(!0)},show:function(){for(var e=this,t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];this.visible=!0,this.phone=a.isSmall,this.$nextTick((function(){if(e.$el)if(e.phone)e.$el.style.left=0,e.$el.style.top=0,e.$el.style.right=0,e.$el.style.bottom=0;else{if(e.targetElement===n[0])return void e.hide();if(e.$el.style.left="",e.$el.style.top="",e.$el.style.right="",e.$el.style.bottom="",e.popover&&1===n.length)e.targetElement=n[0],e.positionAtElement(e.targetElement);else{var t,s;switch(n.length){case 0:t=o.mouseX,s=o.mouseY;break;case 1:var i=n[0].getBoundingClientRect();t=i.left+i.width/2,s=i.bottom;break;default:t=n[0],s=n[1]}e.popover?e.positionAtRect({left:t,top:s,width:0,height:0},"bottom"):e.positionAtPoint(t,s)}}}))},hide:function(){this.visible=!1,this.targetElement=null,this.hideSubMenu()},onItemClick:function(e){e.disabled||(e.click&&e.click(),function(){var e=!0,t=!1,n=void 0;try{for(var s,i=c[Symbol.iterator]();!(e=(s=i.next()).done);e=!0)s.value.hide()}catch(r){t=!0,n=r}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}())},onItemMouseEnter:function(e,t){var n=this;t!==this.itemForVisibleSubMenu&&this.hideSubMenu(),t.menu&&(this.subMenuTimeout=setTimeout((function(){n.showSubMenuForItem(e.target,t)}),250))},onItemMouseLeave:function(){null!==this.subMenuTimeout&&(clearTimeout(this.subMenuTimeout),this.subMenuTimeout=null)},itemClass:function(e){return Object(s.default)({disabled:e.disabled,hover:this.itemForVisibleSubMenu===e},e.style,!0)},showSubMenuForItem:function(e,t){var n=e.getBoundingClientRect();t.menu.show(n.right-1,n.top-5),t.menu.$el.style.zIndex=window.getComputedStyle(this.$el).zIndex+1,this.itemForVisibleSubMenu=t},hideSubMenu:function(){this.itemForVisibleSubMenu&&(this.itemForVisibleSubMenu.menu.hide(),this.itemForVisibleSubMenu=null)}}})},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/ui/components/IntellisenseComponent.vue?vue&type=script&lang=js&":function(e,t,n){"use strict";n.r(t),n("core-js/modules/es.array.index-of"),n("core-js/modules/es.number.constructor");var s=n("./src/util.ts");t.default={components:{Label:{functional:!0,render:function(e,t){var n=t.parent.query,i=t.props.label,r=s.stripDiacritics(i.toLowerCase()).indexOf(s.stripDiacritics(n.toLowerCase()));return[i.substring(0,r),e("strong",i.substring(r,r+n.length)),i.substring(r+n.length)]}}},props:{loading:{type:Boolean,default:!1},items:{type:Array,default:function(){return[]}},query:{type:String,default:""},selectedIndex:{type:Number,default:0}},watch:{selectedIndex:function(){var e=this;this.$nextTick((function(){var t=e.$refs.items[e.selectedIndex];t&&(t.offsetTop<e.$el.scrollTop?e.$el.scrollTop=t.offsetTop:t.offsetTop+t.clientHeight>e.$el.scrollTop+e.$el.clientHeight&&(e.$el.scrollTop=t.offsetTop+t.clientHeight-e.$el.clientHeight))}))}},methods:{itemClass:function(e){return e===this.selectedIndex?"am-ui-intelli-item-selected":null}}}},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/ui/components/TableContextComponent.vue?vue&type=script&lang=js&":function(e,t,n){"use strict";n.r(t),n("core-js/modules/es.array.concat");var s=n("vue"),i=n.n(s),r=n("./src/domUtil.ts"),a=n("./src/model/formula/Types.ts"),o=n("./src/ui/components/TableResizerComponent.vue"),l=n("./src/ui/components/ContextMenuComponent.vue");t.default=i.a.extend({components:{TableResizer:o.default},data:function(){return{colSizes:[],rowSizes:[],selectionStartCol:-1,selectionStartRow:-1,selectionEndCol:-1,selectionEndRow:-1}},computed:{cornerClass:function(){return 0===this.selectionStartCol&&0===this.selectionStartRow&&this.selectionEndCol===this.colSizes.length-1&&this.selectionEndRow===this.rowSizes.length-1?"selected":""}},created:function(){var e=this;this.dragFrom=-1,this.menuContextMode=null,this.menuContextIndex=null,this.onDocumentMouseUp=this.onDocumentMouseUp.bind(this),this.menuItems={insertBefore:{text:null,hidden:!1,click:function(){return e.onInsertBefore()}},insertAfter:{text:null,hidden:!1,click:function(){return e.onInsertAfter()}},delete:{text:null,hidden:!1,click:function(){return e.onDelete()}},clear:{text:null,click:function(){return e.onClear()}},deleteTable:{text:"Delete Table",click:function(){return e.onDeleteTable()}}},this.menu=new l.default({el:document.createElement("div"),data:{popover:!0,items:[this.menuItems.insertBefore,this.menuItems.insertAfter,null,this.menuItems.delete,this.menuItems.clear]}}),this.menuCorner=new l.default({el:document.createElement("div"),data:{popover:!0,items:[this.menuItems.clear,this.menuItems.deleteTable]}}),document.body.appendChild(this.menu.$el)},destroyed:function(){this.menu.$destroy()},methods:{colLabel:function(e){return a.CellReference.columnIndexToLabel(e)},rowLabel:function(e){return a.CellReference.rowIndexToLabel(e)},colStyle:function(e){return{width:e+"px"}},rowStyle:function(e){return{height:e+"px",lineHeight:e+"px"}},colClass:function(e){return e>=this.selectionStartCol&&e<=this.selectionEndCol?"selected":""},rowClass:function(e){return e>=this.selectionStartRow&&e<=this.selectionEndRow?"selected":""},updateSizes:function(e,t){this.colSizes=e,this.rowSizes=t},updateSelection:function(e,t,n,s){this.selectionStartCol=e,this.selectionStartRow=t,this.selectionEndCol=n,this.selectionEndRow=s},onDocumentMouseUp:function(){document.removeEventListener("mouseup",this.onDocumentMouseUp),this.dragFrom=-1},onColMouseDown:function(e){var t=r.closest(e.target,"td");if(t){var n=r.parentIndex(t);n>=this.colSizes.length||(e.button===r.MouseButton.left?(this.dragFrom=n,this.$emit("select",n,0,n,this.rowSizes.length-1),document.addEventListener("mouseup",this.onDocumentMouseUp)):e.button===r.MouseButton.right&&(n<this.selectionStartCol||n>this.selectionEndCol)&&this.$emit("select",n,0,n,this.rowSizes.length-1))}},onColMouseOver:function(e){if(-1!==this.dragFrom){var t=r.closest(e.target,"td");if(t){var n=r.parentIndex(t);n>=this.colSizes.length||this.$emit("select",this.dragFrom,0,n,this.rowSizes.length-1)}}},onRowMouseDown:function(e){var t=r.closest(e.target,"tr");if(t){var n=r.parentIndex(t);n>=this.rowSizes.length||(e.button===r.MouseButton.left?(this.dragFrom=n,this.$emit("select",0,n,this.colSizes.length-1,n),document.addEventListener("mouseup",this.onDocumentMouseUp)):e.button===r.MouseButton.right&&(n<this.selectionStartRow||n>this.selectionEndRow)&&this.$emit("select",0,n,this.colSizes.length-1,n))}},onRowMouseOver:function(e){if(-1!==this.dragFrom){var t=r.closest(e.target,"tr");if(t){var n=r.parentIndex(t);n>=this.rowSizes.length||this.$emit("select",0,this.dragFrom,this.colSizes.length-1,n)}}},onCornerMouseDown:function(){this.$emit("select",0,0,this.colSizes.length-1,this.rowSizes.length-1)},onAddClick:function(e){this.$emit("insert",e,"col"===e?this.colSizes.length:this.rowSizes.length)},onContextMenu:function(e,t){if(this.menuContextMode=e,"all"===e)this.menuItems.clear.text="Clear All Cells",this.menuCorner.show(t.target);else{this.menuContextIndex=r.parentIndex(r.closest(t.target,"col"===e?"td":"tr"));var n="col"===e?this.selectionEndCol-this.selectionStartCol+1:this.selectionEndRow-this.selectionStartRow+1;this.menuItems.delete.hidden="col"===e&&n===this.colSizes.length||"row"===e&&n===this.rowSizes.length;var s="col"===e?"Column":"Row";n>1?(this.menuItems.insertBefore.hidden=!0,this.menuItems.insertAfter.hidden=!0,this.menuItems.delete.text="Delete ".concat(n," ").concat(s,"s"),this.menuItems.clear.text="Clear ".concat(n," ").concat(s,"s"),this.menu.popover=!1,this.menu.show()):(this.menuItems.insertBefore.hidden=!1,this.menuItems.insertAfter.hidden=!1,this.menuItems.insertBefore.text="Insert ".concat(s," Before"),this.menuItems.insertAfter.text="Insert ".concat(s," After"),this.menuItems.delete.text="Delete ".concat(s),this.menuItems.clear.text="Clear ".concat(s),this.menu.popover=!0,this.menu.show(t.target))}},onInsertBefore:function(){this.$emit("insert",this.menuContextMode,this.menuContextIndex)},onInsertAfter:function(){this.$emit("insert",this.menuContextMode,this.menuContextIndex+1)},onDelete:function(){"col"===this.menuContextMode?this.$emit("delete","col",this.selectionStartCol,this.selectionEndCol):this.$emit("delete","row",this.selectionStartRow,this.selectionEndRow)},onClear:function(){this.$emit("clear",this.selectionStartCol,this.selectionStartRow,this.selectionEndCol,this.selectionEndRow)},onDeleteTable:function(){this.$emit("deleteTable")},onResizerResize:function(e,t){this.$emit("resize",e,t)},onResizerAppend:function(e,t){this.$emit("insert",e,("col"===e?this.colSizes:this.rowSizes).length,t)}}})},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/ui/components/TableResizerComponent.vue?vue&type=script&lang=js&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=n("./src/domUtil.ts");t.default={props:["rowSizes","colSizes"],data:function(){return{resizing:!1,resizeCols:0,resizeRows:0}},computed:{rows:function(){return this.rowSizes?this.rowSizes.length:0},cols:function(){return this.colSizes?this.colSizes.length:0}},render:function(e){var t=[];if(this.resizing)for(var n=Math.max(this.rows+1,this.resizeRows),i=Math.max(this.cols+1,this.resizeCols),r=0;r<n;r++){for(var a=[],o=0;o<i;o++)if(0===o&&0===r&&this.resizeRows>0&&this.resizeCols>0)a.push(e("td",{attrs:{rowspan:Math.min(this.resizeRows,this.rows),colspan:Math.min(this.resizeCols,this.cols)}}));else{var l=r<this.resizeRows&&o>=this.cols,c=o<this.resizeCols&&r>=this.rows,u=o>=this.resizeCols&&r<this.rows,d=r>=this.resizeRows&&o<this.cols,h=this.resizeCols<=this.cols&&o>=this.cols||this.resizeRows<=this.rows&&r>=this.rows,p=void 0,f=void 0,m=void 0;if(c||l?(m="insert",l?(p=20,f=this.rowSizes[r]||20):(p=this.colSizes[o]||20,f=20)):(d||u)&&(m="delete",p=this.colSizes[o],f=this.rowSizes[r]),m){var v=e("div",{style:{width:p+"px",height:f+"px"}});a.push(e("td",{class:Object(s.default)({"am-ui-tableResizer-cell":!0,hidden:h},m,!0)},[v]))}}t.push(e("tr",a))}else for(var b=0;b<this.rows+1;b++){for(var g=[],y=0;y<this.cols+1;y++)if(0===y&&0===b)g.push(e("td",{attrs:{rowspan:this.rows,colspan:this.cols}}));else{var w=b===this.rows&&y===this.cols,_=y>=this.cols,k=b>=this.rows;if(w)g.push(e("td",{class:"am-ui-tableResizer-handle",attrs:{title:"Resize"},on:{mousedown:this.onHandleMouseDown}}));else if(_||k){var C=e("div",{style:_?{width:"20px",height:(this.rowSizes[b]||"20")+"px"}:{height:"20px",width:(this.colSizes[y]||"20")+"px"}});g.push(e("td",{class:"am-ui-tableResizer-cell placeholder",attrs:{title:"Add ".concat(_?"Column":"Row")},on:{click:_?this.onRowClick:this.onColClick}},[C]))}}t.push(e("tr",g))}return e("table",{class:{"am-ui-tableResizer":!0,resizing:this.resizing},attrs:{role:"presentation"}},t)},created:function(){this.onDocumentMouseMove=this.onDocumentMouseMove.bind(this),this.onDocumentMouseUp=this.onDocumentMouseUp.bind(this),this.resizeStartX=null,this.resizeStartY=null},methods:{onHandleMouseDown:function(e){e.preventDefault(),document.addEventListener("mousemove",this.onDocumentMouseMove),document.addEventListener("mouseup",this.onDocumentMouseUp),this.resizing=!0;var t=e.target.getBoundingClientRect();this.resizeStartX=t.left-1,this.resizeStartY=t.top-1,this.updateResize(t.left,t.top)},onDocumentMouseMove:function(e){this.updateResize(e.clientX,e.clientY)},onDocumentMouseUp:function(){document.removeEventListener("mousemove",this.onDocumentMouseMove),document.removeEventListener("mouseup",this.onDocumentMouseUp),this.resizing=!1,this.resizeCols===this.cols&&this.resizeRows===this.rows||this.$emit("resize",this.resizeCols,this.resizeRows)},onColClick:function(e){var t=i.parentIndex(i.closest(e.target,"td"));this.$emit("append","row",t)},onRowClick:function(e){var t=i.parentIndex(i.closest(e.target,"tr"));this.$emit("append","col",t)},updateResize:function(e,t){var n=function(e,t){if(e>=0)return Math.ceil(e/20);var n;for(n=0;n<t.length&&!((e+=t[t.length-n-1])>=0);n++);return-n};this.resizeCols=Math.max(1,this.cols+n(e-this.resizeStartX,this.colSizes)),this.resizeRows=Math.max(1,this.rows+n(t-this.resizeStartY,this.rowSizes))}}}},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/view/components/FileViewNodeComponent.vue?vue&type=script&lang=js&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),i=n("./src/components/Spinner.vue"),r=n("./src/components/Dropper.vue"),a=n("./src/components/AmberButton.vue"),o=n("./src/view/viewUtil.ts");t.default={components:{Spinner:i.default,Dropper:r.default,AmberButton:a.default},props:{loading:{type:Boolean,default:!1},filename:{type:String,default:void 0},url:{type:String,default:void 0}},methods:{onUploadClick:function(){var e=this;o.filePicker((function(t){var n=Object(s.default)(t,1)[0];e.$emit("upload",n)}))},onDrop:function(e){if(e.dataTransfer.items.length){var t=e.dataTransfer.items[0];"file"===t.kind&&this.$emit("upload",t.getAsFile())}},download:function(){var e=document.createElement("a");e.href=this.url,e.rel="noopener noreferrer",e.target="_blank",e.click()}}}},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/view/components/GeneralVideoEmbed.vue?vue&type=script&lang=js&":function(e,t,n){"use strict";n.r(t),t.default={props:{url:{type:String,default:void 0}}}},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/view/components/ImageViewNodeComponent.vue?vue&type=script&lang=js&":function(e,t,n){"use strict";n.r(t),n("core-js/modules/es.number.constructor");var s=n("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),i=n("./src/components/Spinner.vue"),r=n("./src/components/Dropper.vue"),a=n("./src/components/AmberButton.vue"),o=n("./src/view/viewUtil.ts");t.default={components:{Spinner:i.default,Dropper:r.default,AmberButton:a.default},props:{src:{type:String,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},loading:{type:Boolean,default:!1}},data:function(){return{canEdit:!/Firefox/.test(navigator.userAgent)}},computed:{style:function(){return{width:null!=this.width?"".concat(this.width,"px"):void 0,height:null!=this.height?"".concat(this.height,"px"):void 0}}},methods:{onUploadClick:function(){var e=this;o.filePicker((function(t){var n=Object(s.default)(t,1)[0];e.$emit("upload",n)}),{accept:".png,.jpg,.jpeg,.svg,.gif"})},onDrop:function(e){if(e.dataTransfer.items.length){var t=e.dataTransfer.items[0];"file"===t.kind&&this.$emit("upload",t.getAsFile())}}}}},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/view/components/VideoEmbed.vue?vue&type=script&lang=js&":function(e,t,n){"use strict";n.r(t);var s=n("./src/util.ts"),i=n("./src/view/components/YoutubeVideoEmbed.vue"),r=n("./src/view/components/VimeoVideoEmbed.vue"),a=n("./src/view/components/GeneralVideoEmbed.vue");t.default={props:{url:{type:String,default:void 0}},computed:{component:function(){return this.url?s.parseYoutubeVideoUrl(this.url)?i.default:s.parseVimeoVideoUrl(this.url)?r.default:a.default:null}}}},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/view/components/VideoViewNodeComponent.vue?vue&type=script&lang=js&":function(e,t,n){"use strict";n.r(t);var s=n("vue"),i=n.n(s),r=n("./src/view/components/VideoEmbed.vue");t.default=i.a.extend({components:{VideoEmbed:r.default},props:["node"],data:function(){return{src:null}},computed:{style:function(){return{width:null===this.width?"":this.width+"px",height:null===this.height?"":this.height+"px"}}},watch:{src:function(e){this.node.setResizeEnabled(!!e)}},methods:{init:function(e){this.node=e,this.src=this.node.model.element.attributes.src,this.node.setResizeEnabled(!!this.src)},onAttributeChange:function(e,t,n){"src"===e&&(this.src=n)},onSetUrlClick:function(){this.node.showInspector()}}})},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/view/components/VimeoVideoEmbed.vue?vue&type=script&lang=js&":function(e,t,n){"use strict";n.r(t);var s=n("./src/util.ts");t.default={props:{url:{type:String,default:void 0}},computed:{src:function(){var e=this.url&&s.parseVimeoVideoUrl(this.url);return e&&"https://player.vimeo.com/video/".concat(e.id,"?color=a086ee&title=0&byline=0&portrait=0")}}}},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/view/components/YoutubeVideoEmbed.vue?vue&type=script&lang=js&":function(e,t,n){"use strict";n.r(t),n("core-js/modules/es.array.concat");var s=n("./src/util.ts");t.default={props:{url:{type:String,default:void 0}},computed:{src:function(){var e=this.url&&s.parseYoutubeVideoUrl(this.url);return e&&"https://www.youtube.com/embed/".concat(e.path,"?showinfo=0&rel=0&disablekb=1&theme=light").concat(e.params)}}}},"./node_modules/marked/src/InlineLexer.js":function(e,t,n){const s=n("./node_modules/marked/src/Renderer.js"),{defaults:i}=n("./node_modules/marked/src/defaults.js"),{inline:r}=n("./node_modules/marked/src/rules.js"),{findClosingBracket:a,escape:o}=n("./node_modules/marked/src/helpers.js");e.exports=class e{constructor(e,t){if(this.options=t||i,this.links=e,this.rules=r.normal,this.options.renderer=this.options.renderer||new s,this.renderer=this.options.renderer,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=r.pedantic:this.options.gfm&&(this.options.breaks?this.rules=r.breaks:this.rules=r.gfm)}static get rules(){return r}static output(t,n,s){return new e(n,s).output(t)}output(t){let n,s,i,r,l,c,u="";for(;t;)if(l=this.rules.escape.exec(t))t=t.substring(l[0].length),u+=o(l[1]);else if(l=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(l[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(l[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(l[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(l[0])&&(this.inRawBlock=!1),t=t.substring(l[0].length),u+=this.renderer.html(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(l[0]):o(l[0]):l[0]);else if(l=this.rules.link.exec(t)){const s=a(l[2],"()");if(s>-1){const e=(0===l[0].indexOf("!")?5:4)+l[1].length+s;l[2]=l[2].substring(0,s),l[0]=l[0].substring(0,e).trim(),l[3]=""}t=t.substring(l[0].length),this.inLink=!0,i=l[2],this.options.pedantic?(n=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i),n?(i=n[1],r=n[3]):r=""):r=l[3]?l[3].slice(1,-1):"",i=i.trim().replace(/^<([\s\S]*)>$/,"$1"),u+=this.outputLink(l,{href:e.escapes(i),title:e.escapes(r)}),this.inLink=!1}else if((l=this.rules.reflink.exec(t))||(l=this.rules.nolink.exec(t))){if(t=t.substring(l[0].length),n=(l[2]||l[1]).replace(/\s+/g," "),n=this.links[n.toLowerCase()],!n||!n.href){u+=l[0].charAt(0),t=l[0].substring(1)+t;continue}this.inLink=!0,u+=this.outputLink(l,n),this.inLink=!1}else if(l=this.rules.strong.exec(t))t=t.substring(l[0].length),u+=this.renderer.strong(this.output(l[4]||l[3]||l[2]||l[1]));else if(l=this.rules.em.exec(t))t=t.substring(l[0].length),u+=this.renderer.em(this.output(l[6]||l[5]||l[4]||l[3]||l[2]||l[1]));else if(l=this.rules.code.exec(t))t=t.substring(l[0].length),u+=this.renderer.codespan(o(l[2].trim(),!0));else if(l=this.rules.br.exec(t))t=t.substring(l[0].length),u+=this.renderer.br();else if(l=this.rules.del.exec(t))t=t.substring(l[0].length),u+=this.renderer.del(this.output(l[1]));else if(l=this.rules.autolink.exec(t))t=t.substring(l[0].length),"@"===l[2]?(s=o(this.mangle(l[1])),i="mailto:"+s):(s=o(l[1]),i=s),u+=this.renderer.link(i,null,s);else if(this.inLink||!(l=this.rules.url.exec(t))){if(l=this.rules.text.exec(t))t=t.substring(l[0].length),this.inRawBlock?u+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(l[0]):o(l[0]):l[0]):u+=this.renderer.text(o(this.smartypants(l[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else{if("@"===l[2])s=o(l[0]),i="mailto:"+s;else{do{c=l[0],l[0]=this.rules._backpedal.exec(l[0])[0]}while(c!==l[0]);s=o(l[0]),i="www."===l[1]?"http://"+s:s}t=t.substring(l[0].length),u+=this.renderer.link(i,null,s)}return u}static escapes(t){return t?t.replace(e.rules._escapes,"$1"):t}outputLink(e,t){const n=t.href,s=t.title?o(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,s,this.output(e[1])):this.renderer.image(n,s,o(e[1]))}smartypants(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e}mangle(e){if(!this.options.mangle)return e;const t=e.length;let n,s="",i=0;for(;i<t;i++)n=e.charCodeAt(i),Math.random()>.5&&(n="x"+n.toString(16)),s+="&#"+n+";";return s}}},"./node_modules/marked/src/Lexer.js":function(e,t,n){const{defaults:s}=n("./node_modules/marked/src/defaults.js"),{block:i}=n("./node_modules/marked/src/rules.js"),{rtrim:r,splitCells:a,escape:o}=n("./node_modules/marked/src/helpers.js");e.exports=class e{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||s,this.rules=i.normal,this.options.pedantic?this.rules=i.pedantic:this.options.gfm&&(this.rules=i.gfm)}static get rules(){return i}static lex(t,n){return new e(n).lex(t)}lex(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.token(e,!0)}token(e,t){let n,s,l,c,u,d,h,p,f,m,v,b,g,y,w,_;for(e=e.replace(/^ +$/gm,"");e;)if((l=this.rules.newline.exec(e))&&(e=e.substring(l[0].length),l[0].length>1&&this.tokens.push({type:"space"})),l=this.rules.code.exec(e)){const t=this.tokens[this.tokens.length-1];e=e.substring(l[0].length),t&&"paragraph"===t.type?t.text+="\n"+l[0].trimRight():(l=l[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?l:r(l,"\n")}))}else if(l=this.rules.fences.exec(e))e=e.substring(l[0].length),this.tokens.push({type:"code",lang:l[2]?l[2].trim():l[2],text:l[3]||""});else if(l=this.rules.heading.exec(e))e=e.substring(l[0].length),this.tokens.push({type:"heading",depth:l[1].length,text:l[2]});else if((l=this.rules.nptable.exec(e))&&(d={type:"table",header:a(l[1].replace(/^ *| *\| *$/g,"")),align:l[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:l[3]?l[3].replace(/\n$/,"").split("\n"):[]},d.header.length===d.align.length)){for(e=e.substring(l[0].length),v=0;v<d.align.length;v++)/^ *-+: *$/.test(d.align[v])?d.align[v]="right":/^ *:-+: *$/.test(d.align[v])?d.align[v]="center":/^ *:-+ *$/.test(d.align[v])?d.align[v]="left":d.align[v]=null;for(v=0;v<d.cells.length;v++)d.cells[v]=a(d.cells[v],d.header.length);this.tokens.push(d)}else if(l=this.rules.hr.exec(e))e=e.substring(l[0].length),this.tokens.push({type:"hr"});else if(l=this.rules.blockquote.exec(e))e=e.substring(l[0].length),this.tokens.push({type:"blockquote_start"}),l=l[0].replace(/^ *> ?/gm,""),this.token(l,t),this.tokens.push({type:"blockquote_end"});else if(l=this.rules.list.exec(e)){for(e=e.substring(l[0].length),c=l[2],y=c.length>1,h={type:"list_start",ordered:y,start:y?+c:"",loose:!1},this.tokens.push(h),l=l[0].match(this.rules.item),p=[],n=!1,g=l.length,v=0;v<g;v++)d=l[v],m=d.length,d=d.replace(/^ *([*+-]|\d+\.) */,""),~d.indexOf("\n ")&&(m-=d.length,d=this.options.pedantic?d.replace(/^ {1,4}/gm,""):d.replace(new RegExp("^ {1,"+m+"}","gm"),"")),v!==g-1&&(u=i.bullet.exec(l[v+1])[0],(c.length>1?1===u.length:u.length>1||this.options.smartLists&&u!==c)&&(e=l.slice(v+1).join("\n")+e,v=g-1)),s=n||/\n\n(?!\s*$)/.test(d),v!==g-1&&(n="\n"===d.charAt(d.length-1),s||(s=n)),s&&(h.loose=!0),w=/^\[[ xX]\] /.test(d),_=void 0,w&&(_=" "!==d[1],d=d.replace(/^\[[ xX]\] +/,"")),f={type:"list_item_start",task:w,checked:_,loose:s},p.push(f),this.tokens.push(f),this.token(d,!1),this.tokens.push({type:"list_item_end"});if(h.loose)for(g=p.length,v=0;v<g;v++)p[v].loose=!0;this.tokens.push({type:"list_end"})}else if(l=this.rules.html.exec(e))e=e.substring(l[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===l[1]||"script"===l[1]||"style"===l[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(l[0]):o(l[0]):l[0]});else if(t&&(l=this.rules.def.exec(e)))e=e.substring(l[0].length),l[3]&&(l[3]=l[3].substring(1,l[3].length-1)),b=l[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[b]||(this.tokens.links[b]={href:l[2],title:l[3]});else if((l=this.rules.table.exec(e))&&(d={type:"table",header:a(l[1].replace(/^ *| *\| *$/g,"")),align:l[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:l[3]?l[3].replace(/\n$/,"").split("\n"):[]},d.header.length===d.align.length)){for(e=e.substring(l[0].length),v=0;v<d.align.length;v++)/^ *-+: *$/.test(d.align[v])?d.align[v]="right":/^ *:-+: *$/.test(d.align[v])?d.align[v]="center":/^ *:-+ *$/.test(d.align[v])?d.align[v]="left":d.align[v]=null;for(v=0;v<d.cells.length;v++)d.cells[v]=a(d.cells[v].replace(/^ *\| *| *\| *$/g,""),d.header.length);this.tokens.push(d)}else if(l=this.rules.lheading.exec(e))e=e.substring(l[0].length),this.tokens.push({type:"heading",depth:"="===l[2].charAt(0)?1:2,text:l[1]});else if(t&&(l=this.rules.paragraph.exec(e)))e=e.substring(l[0].length),this.tokens.push({type:"paragraph",text:"\n"===l[1].charAt(l[1].length-1)?l[1].slice(0,-1):l[1]});else if(l=this.rules.text.exec(e))e=e.substring(l[0].length),this.tokens.push({type:"text",text:l[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens}}},"./node_modules/marked/src/Parser.js":function(e,t,n){const s=n("./node_modules/marked/src/Renderer.js"),i=n("./node_modules/marked/src/Slugger.js"),r=n("./node_modules/marked/src/InlineLexer.js"),a=n("./node_modules/marked/src/TextRenderer.js"),{defaults:o}=n("./node_modules/marked/src/defaults.js"),{merge:l,unescape:c}=n("./node_modules/marked/src/helpers.js");e.exports=class e{constructor(e){this.tokens=[],this.token=null,this.options=e||o,this.options.renderer=this.options.renderer||new s,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new i}static parse(t,n){return new e(n).parse(t)}parse(e){this.inline=new r(e.links,this.options),this.inlineText=new r(e.links,l({},this.options,{renderer:new a})),this.tokens=e.reverse();let t="";for(;this.next();)t+=this.tok();return t}next(){return this.token=this.tokens.pop(),this.token}peek(){return this.tokens[this.tokens.length-1]||0}parseText(){let e=this.token.text;for(;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)}tok(){let e="";switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,c(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":{let t,n,s,i,r="";for(s="",t=0;t<this.token.header.length;t++)s+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(r+=this.renderer.tablerow(s),t=0;t<this.token.cells.length;t++){for(n=this.token.cells[t],s="",i=0;i<n.length;i++)s+=this.renderer.tablecell(this.inline.output(n[i]),{header:!1,align:this.token.align[i]});e+=this.renderer.tablerow(s)}return this.renderer.table(r,e)}case"blockquote_start":for(e="";"blockquote_end"!==this.next().type;)e+=this.tok();return this.renderer.blockquote(e);case"list_start":{e="";const t=this.token.ordered,n=this.token.start;for(;"list_end"!==this.next().type;)e+=this.tok();return this.renderer.list(e,t,n)}case"list_item_start":{e="";const t=this.token.loose,n=this.token.checked,s=this.token.task;if(this.token.task)if(t)if("text"===this.peek().type){const e=this.peek();e.text=this.renderer.checkbox(n)+" "+e.text}else this.tokens.push({type:"text",text:this.renderer.checkbox(n)});else e+=this.renderer.checkbox(n);for(;"list_item_end"!==this.next().type;)e+=t||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(e,s,n)}case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:{const e='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(e);console.log(e)}}}}},"./node_modules/marked/src/Renderer.js":function(e,t,n){const{defaults:s}=n("./node_modules/marked/src/defaults.js"),{cleanUrl:i,escape:r}=n("./node_modules/marked/src/helpers.js");e.exports=class{constructor(e){this.options=e||s}code(e,t,n){const s=(t||"").match(/\S*/)[0];if(this.options.highlight){const t=this.options.highlight(e,s);null!=t&&t!==e&&(n=!0,e=t)}return s?'<pre><code class="'+this.options.langPrefix+r(s,!0)+'">'+(n?e:r(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:r(e,!0))+"</code></pre>"}blockquote(e){return"<blockquote>\n"+e+"</blockquote>\n"}html(e){return e}heading(e,t,n,s){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+s.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,n){const s=t?"ol":"ul";return"<"+s+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+s+">\n"}listitem(e){return"<li>"+e+"</li>\n"}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>"+e+"</p>\n"}table(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return"<tr>\n"+e+"</tr>\n"}tablecell(e,t){const n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,n){if(null===(e=i(this.options.sanitize,this.options.baseUrl,e)))return n;let s='<a href="'+r(e)+'"';return t&&(s+=' title="'+t+'"'),s+=">"+n+"</a>",s}image(e,t,n){if(null===(e=i(this.options.sanitize,this.options.baseUrl,e)))return n;let s='<img src="'+e+'" alt="'+n+'"';return t&&(s+=' title="'+t+'"'),s+=this.options.xhtml?"/>":">",s}text(e){return e}}},"./node_modules/marked/src/Slugger.js":function(e,t){e.exports=class{constructor(){this.seen={}}slug(e){let t=e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(t)){const e=t;do{this.seen[e]++,t=e+"-"+this.seen[e]}while(this.seen.hasOwnProperty(t))}return this.seen[t]=0,t}}},"./node_modules/marked/src/TextRenderer.js":function(e,t){e.exports=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}}},"./node_modules/marked/src/defaults.js":function(e,t){function n(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}}e.exports={defaults:{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1},getDefaults:n,changeDefaults:function(t){e.exports.defaults=t}}},"./node_modules/marked/src/helpers.js":function(e,t){const n=/[&<>"']/,s=/[&<>"']/g,i=/[<>"']|&(?!#?\w+;)/,r=/[<>"']|&(?!#?\w+;)/g,a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},o=e=>a[e],l=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function c(e){return e.replace(l,(e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):"")}const u=/(^|[^\[])\^/g,d=/[^\w:]/g,h=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i,p={},f=/^[^:]+:\/*[^/]*$/,m=/^([^:]+:)[\s\S]*$/,v=/^([^:]+:\/*[^/]*)[\s\S]*$/;function b(e,t){p[" "+e]||(f.test(e)?p[" "+e]=e+"/":p[" "+e]=g(e,"/",!0));const n=-1===(e=p[" "+e]).indexOf(":");return"//"===t.substring(0,2)?n?t:e.replace(m,"$1")+t:"/"===t.charAt(0)?n?t:e.replace(v,"$1")+t:e+t}function g(e,t,n){const s=e.length;if(0===s)return"";let i=0;for(;i<s;){const r=e.charAt(s-i-1);if(r!==t||n){if(r===t||!n)break;i++}else i++}return e.substr(0,s-i)}e.exports={escape:function(e,t){if(t){if(n.test(e))return e.replace(s,o)}else if(i.test(e))return e.replace(r,o);return e},unescape:c,edit:function(e,t){e=e.source||e,t=t||"";const n={replace:(t,s)=>(s=(s=s.source||s).replace(u,"$1"),e=e.replace(t,s),n),getRegex:()=>new RegExp(e,t)};return n},cleanUrl:function(e,t,n){if(e){let e;try{e=decodeURIComponent(c(n)).replace(d,"").toLowerCase()}catch(s){return null}if(0===e.indexOf("javascript:")||0===e.indexOf("vbscript:")||0===e.indexOf("data:"))return null}t&&!h.test(n)&&(n=b(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(s){return null}return n},resolveUrl:b,noopTest:{exec:function(){}},merge:function(e){let t,n,s=1;for(;s<arguments.length;s++)for(n in t=arguments[s],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},splitCells:function(e,t){const n=e.replace(/\|/g,(e,t,n)=>{let s=!1,i=t;for(;--i>=0&&"\\"===n[i];)s=!s;return s?"|":" |"}).split(/ \|/);let s=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;s<n.length;s++)n[s]=n[s].trim().replace(/\\\|/g,"|");return n},rtrim:g,findClosingBracket:function(e,t){if(-1===e.indexOf(t[1]))return-1;const n=e.length;let s=0,i=0;for(;i<n;i++)if("\\"===e[i])i++;else if(e[i]===t[0])s++;else if(e[i]===t[1]&&(s--,s<0))return i;return-1},checkSanitizeDeprecation:function(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}}},"./node_modules/marked/src/marked.js":function(e,t,n){const s=n("./node_modules/marked/src/Lexer.js"),i=n("./node_modules/marked/src/Parser.js"),r=n("./node_modules/marked/src/Renderer.js"),a=n("./node_modules/marked/src/TextRenderer.js"),o=n("./node_modules/marked/src/InlineLexer.js"),l=n("./node_modules/marked/src/Slugger.js"),{merge:c,checkSanitizeDeprecation:u,escape:d}=n("./node_modules/marked/src/helpers.js"),{getDefaults:h,changeDefaults:p,defaults:f}=n("./node_modules/marked/src/defaults.js");function m(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(n||"function"==typeof t){n||(n=t,t=null),t=c({},m.defaults,t||{}),u(t);const a=t.highlight;let o,l,d=0;try{o=s.lex(e,t)}catch(r){return n(r)}l=o.length;const h=function(e){if(e)return t.highlight=a,n(e);let s;try{s=i.parse(o,t)}catch(r){e=r}return t.highlight=a,e?n(e):n(null,s)};if(!a||a.length<3)return h();if(delete t.highlight,!l)return h();for(;d<o.length;d++)!function(e){"code"!==e.type?--l||h():a(e.text,e.lang,(function(t,n){return t?h(t):null==n||n===e.text?--l||h():(e.text=n,e.escaped=!0,void(--l||h()))}))}(o[d])}else try{return t=c({},m.defaults,t||{}),u(t),i.parse(s.lex(e,t),t)}catch(r){if(r.message+="\nPlease report this to https://github.com/markedjs/marked.",(t||m.defaults).silent)return"<p>An error occurred:</p><pre>"+d(r.message+"",!0)+"</pre>";throw r}}m.options=m.setOptions=function(e){return c(m.defaults,e),p(m.defaults),m},m.getDefaults=h,m.defaults=f,m.Parser=i,m.parser=i.parse,m.Renderer=r,m.TextRenderer=a,m.Lexer=s,m.lexer=s.lex,m.InlineLexer=o,m.inlineLexer=o.output,m.Slugger=l,m.parse=m,e.exports=m},"./node_modules/marked/src/rules.js":function(e,t,n){const{noopTest:s,edit:i,merge:r}=n("./node_modules/marked/src/helpers.js"),a={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:s,table:s,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};a.def=i(a.def).replace("label",a._label).replace("title",a._title).getRegex(),a.bullet=/(?:[*+-]|\d{1,9}\.)/,a.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,a.item=i(a.item,"gm").replace(/bull/g,a.bullet).getRegex(),a.list=i(a.list).replace(/bull/g,a.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+a.def.source+")").getRegex(),a._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",a._comment=/<!--(?!-?>)[\s\S]*?-->/,a.html=i(a.html,"i").replace("comment",a._comment).replace("tag",a._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),a.paragraph=i(a._paragraph).replace("hr",a.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",a._tag).getRegex(),a.blockquote=i(a.blockquote).replace("paragraph",a.paragraph).getRegex(),a.normal=r({},a),a.gfm=r({},a.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),a.gfm.nptable=i(a.gfm.nptable).replace("hr",a.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",a._tag).getRegex(),a.gfm.table=i(a.gfm.table).replace("hr",a.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",a._tag).getRegex(),a.pedantic=r({},a.normal,{html:i("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",a._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:s,paragraph:i(a.normal._paragraph).replace("hr",a.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",a.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const o={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:s,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:s,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/,_punctuation:"!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~"};o.em=i(o.em).replace(/punctuation/g,o._punctuation).getRegex(),o._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,o._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,o._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,o.autolink=i(o.autolink).replace("scheme",o._scheme).replace("email",o._email).getRegex(),o._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,o.tag=i(o.tag).replace("comment",a._comment).replace("attribute",o._attribute).getRegex(),o._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,o._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,o._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,o.link=i(o.link).replace("label",o._label).replace("href",o._href).replace("title",o._title).getRegex(),o.reflink=i(o.reflink).replace("label",o._label).getRegex(),o.normal=r({},o),o.pedantic=r({},o.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:i(/^!?\[(label)\]\((.*?)\)/).replace("label",o._label).getRegex(),reflink:i(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",o._label).getRegex()}),o.gfm=r({},o.normal,{escape:i(o.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),o.gfm.url=i(o.gfm.url,"i").replace("email",o.gfm._extended_email).getRegex(),o.breaks=r({},o.gfm,{br:i(o.br).replace("{2,}","*").getRegex(),text:i(o.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),e.exports={block:a,inline:o}},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js!./node_modules/vue-loader/lib/index.js?!./src/components/AmberButton.vue?vue&type=style&index=0&lang=scss&":function(e,t,n){},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js!./node_modules/vue-loader/lib/index.js?!./src/components/Dropper.vue?vue&type=style&index=0&lang=scss&":function(e,t,n){},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js!./node_modules/vue-loader/lib/index.js?!./src/components/Spinner.vue?vue&type=style&index=0&lang=scss&":function(e,t,n){},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js!./node_modules/vue-loader/lib/index.js?!./src/ui/components/ContextMenuComponent.vue?vue&type=style&index=0&lang=scss&":function(e,t,n){},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js!./node_modules/vue-loader/lib/index.js?!./src/ui/components/IntellisenseComponent.vue?vue&type=style&index=0&lang=scss&":function(e,t,n){},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js!./node_modules/vue-loader/lib/index.js?!./src/view/components/FileViewNodeComponent.vue?vue&type=style&index=0&lang=scss&":function(e,t,n){},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js!./node_modules/vue-loader/lib/index.js?!./src/view/components/ImageViewNodeComponent.vue?vue&type=style&index=0&lang=scss&":function(e,t,n){},"./node_modules/rangefix/rangefix.js":function(e,t,n){var s,i;void 0===(i="function"==typeof(s=function(){var e,t={};function n(e){var t;return e?screen.deviceXDPI===screen.logicalXDPI?e:"length"in e?Array.prototype.map.call(e,n):(t=screen.deviceXDPI/screen.logicalXDPI,{top:e.top/t,bottom:e.bottom/t,left:e.left/t,right:e.right/t,width:e.width/t,height:e.height/t}):e}function s(e,t){var n,s=0;if(1024>=t.length)return Array.prototype.push.apply(e,t);for(;s<t.length;)n=Array.prototype.push.apply(e,Array.prototype.slice.call(t,s,s+1024)),s+=1024;return n}return t.isBroken=function(){var t,n,s,i,r,a,o,l;return void 0===e&&(n=document.createElement("p"),s=document.createElement("span"),i=document.createTextNode("aa"),r=document.createTextNode("aa"),(a=document.createElement("img")).setAttribute("src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="),o=document.createRange(),e={},n.appendChild(i),n.appendChild(s),s.appendChild(a),s.appendChild(r),document.body.appendChild(n),o.setStart(i,1),o.setEnd(s,0),e.getClientRects=e.getBoundingClientRect=o.getClientRects().length>1,e.getClientRects||(o.setEnd(r,1),e.getClientRects=e.getBoundingClientRect=2===o.getClientRects().length),e.getBoundingClientRect||(o.setEnd(o.startContainer,o.startOffset),t=o.getBoundingClientRect(),e.getBoundingClientRect=0===t.top&&0===t.left),document.body.removeChild(n),l=window.ActiveXObject&&new Function("/*@cc_on return @_jscript_version; @*/")(),e.ieZoom=!!l&&l<=10),e},t.getClientRects=function(e){var t,i,r,a,o,l=this.isBroken();if(l.ieZoom)return n(e.getClientRects());if(!l.getClientRects)return e.getClientRects();for(t=[],r=[],i=e.endContainer,a=e.endOffset,o=document.createRange();i!==e.commonAncestorContainer;)o.setStart(i,0),o.setEnd(i,a),s(r,o.getClientRects()),a=Array.prototype.indexOf.call(i.parentNode.childNodes,i),i=i.parentNode;return(o=e.cloneRange()).setEnd(i,a),s(t,o.getClientRects()),s(t,r),t},t.getBoundingClientRect=function(e){var t,s,i,r,a,o,l=this.getClientRects(e);if(0===l.length)return null;if(a=e.getBoundingClientRect(),(o=this.isBroken()).ieZoom)return n(a);if(!o.getBoundingClientRect)return a;if(0===a.width&&0===a.height)return l[0];for(t=0,s=l.length;t<s;t++)r=l[t],i?(i.left=Math.min(i.left,r.left),i.top=Math.min(i.top,r.top),i.right=Math.max(i.right,r.right),i.bottom=Math.max(i.bottom,r.bottom)):i={left:r.left,top:r.top,right:r.right,bottom:r.bottom};return i&&(i.width=i.right-i.left,i.height=i.bottom-i.top),i},t})?s.call(t,n,t,e):s)||(e.exports=i)},"./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/components/AmberButton.vue?vue&type=template&id=29804636&":function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return s})),n.d(t,"staticRenderFns",(function(){return i}));var s=function(){var e=this,t=e.$createElement;return(e._self._c||t)("button",{staticClass:"amber-button",on:{click:function(t){return e.$emit("click",t)}}},[e._t("default")],2)},i=[]},"./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/components/Dropper.vue?vue&type=template&id=0cf375bc&":function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return s})),n.d(t,"staticRenderFns",(function(){return i}));var s=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"amber-dropper",class:{"amber-dropper-over":this.dragCounter>0},on:{dragenter:this.onDragEnter,dragleave:this.onDragLeave,dragover:this.onDragOver,drop:this.onDrop}},[this._t("default")],2)},i=[]},"./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/components/Spinner.vue?vue&type=template&id=6fc9f761&":function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return s})),n.d(t,"staticRenderFns",(function(){return i}));var s=function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{staticClass:"am-spinner",attrs:{viewBox:"0 0 10 10"}},[t("circle",{staticClass:"am-spinner-ring",attrs:{cx:"5",cy:"5",r:"4.5"}})])},i=[]},"./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/ui/components/ContextMenuComponent.vue?vue&type=template&id=4b71be06&":function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return s})),n.d(t,"staticRenderFns",(function(){return i}));var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{on:{"before-enter":e.onBeforeEnter,"after-leave":e.onAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"am-context-menu popover-blocker",on:{contextmenu:function(e){e.preventDefault()},mousedown:function(e){e.stopPropagation()}}},[e.phone?[n("div",{staticClass:"am-cmenu-sm-backdrop",on:{click:e.hide}}),e._v(" "),n("div",{staticClass:"am-cmenu-sm-items"},[e._l(e.groups,(function(t){return n("div",{staticClass:"am-cmenu-sm-group"},e._l(t,(function(t){return t.menu?e._e():n("div",{staticClass:"am-cmenu-sm-item",class:e.itemClass(t),on:{click:function(n){return e.onItemClick(t)}}},[t.checked?n("img",{staticClass:"am-cmenu-sm-item-check",attrs:{draggable:"false"}}):e._e(),e._v("\n\t\t\t\t\t\t"+e._s(t.text)+"\n\t\t\t\t\t")])})),0)})),e._v(" "),n("div",{staticClass:"am-cmenu-sm-group"},[n("div",{staticClass:"am-cmenu-sm-item default",on:{click:e.hide}},[e._v("Cancel")])])],2)]:e._e(),e._v(" "),e.phone?e._e():n("div",{staticClass:"am-cmenu-lg"},[e._l(e.groups,(function(t){return n("div",{staticClass:"am-cmenu-lg-group"},e._l(t,(function(t){return n("div",{staticClass:"am-cmenu-lg-item",class:e.itemClass(t),on:{mouseup:function(n){return e.onItemClick(t)},mouseenter:function(n){return e.onItemMouseEnter(n,t)},mouseleave:e.onItemMouseLeave,touchstart:function(n){return e.onItemClick(t)}}},[t.checked?n("svg",{staticClass:"am-cmenu-lg-item-check",attrs:{viewBox:"0 0 17 17"}},[n("polyline",{attrs:{points:"15.512,3.669 6.037,13.143 1.3,8.405"}})]):e._e(),e._v("\n\t\t\t\t\t"+e._s(t.text)+"\n\t\t\t\t\t"),t.menu?n("svg",{staticClass:"am-cmenu-lg-item-arrow",attrs:{viewBox:"0 0 17 17"}},[n("polygon",{attrs:{points:"2.424,1.143 14.576,8.5 2.424,15.858"}})]):e._e()])})),0)})),e._v(" "),n("svg",{directives:[{name:"show",rawName:"v-show",value:e.popover,expression:"popover"}],ref:"arrow",staticClass:"am-cmenu-lg-arrow",attrs:{viewBox:"0 0 20 10"}},[n("path",{attrs:{d:"M1,10 L10,1 L19,10"}})])],2)],2)])},i=[]},"./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/ui/components/IntellisenseComponent.vue?vue&type=template&id=24d16d42&":function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return s})),n.d(t,"staticRenderFns",(function(){return i}));var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"am-ui-intelli"},[e.loading?n("div",[e._v("Loading...")]):[e._l(e.items,(function(t,s){return n("div",{ref:"items",refInFor:!0,staticClass:"am-ui-intelli-item",class:e.itemClass(s),on:{mousedown:function(n){return n.stopPropagation(),n.preventDefault(),e.$emit("itemClick",t)}}},[n("Label",{attrs:{label:t.label}})],1)})),e._v(" "),e.items.length?e._e():n("div",{staticClass:"am-ui-intelli-item am-ui-intelli-item-empty"},[e._v("\n\t\t\tNo match\n\t\t")])]],2)},i=[]},"./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/ui/components/TableContextComponent.vue?vue&type=template&id=287f8b1d&":function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return s})),n.d(t,"staticRenderFns",(function(){return i}));var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"am-ui-tableContext"},[n("div",{staticClass:"am-ui-tableContext-cell am-ui-tableContext-corner",class:e.cornerClass,on:{mousedown:function(t){return t.preventDefault(),t.stopPropagation(),e.onCornerMouseDown(t)},contextmenu:function(t){return t.preventDefault(),e.onContextMenu("all",t)}}}),e._v(" "),n("table",{staticClass:"am-ui-tableContext-line columns",attrs:{role:"presentation"},on:{mousedown:function(t){return t.preventDefault(),t.stopPropagation(),e.onColMouseDown(t)},mouseover:function(t){return t.preventDefault(),t.stopPropagation(),e.onColMouseOver(t)}}},[n("tr",[e._l(e.colSizes,(function(t,s){return n("td",{key:s,staticClass:"am-ui-tableContext-cell",class:e.colClass(s),on:{contextmenu:function(t){return t.preventDefault(),e.onContextMenu("col",t)}}},[n("div",{style:e.colStyle(t)},[e._v(e._s(e.colLabel(s)))])])})),e._v(" "),n("td",{staticClass:"am-ui-tableContext-cell add",attrs:{title:"Add Column"},on:{click:function(t){return e.onAddClick("col")}}},[n("div",{staticStyle:{width:"20px"}})])],2)]),e._v(" "),n("table",{staticClass:"am-ui-tableContext-line rows",attrs:{role:"presentation"},on:{mousedown:function(t){return t.preventDefault(),t.stopPropagation(),e.onRowMouseDown(t)},mouseover:function(t){return t.preventDefault(),t.stopPropagation(),e.onRowMouseOver(t)}}},[e._l(e.rowSizes,(function(t,s){return n("tr",{key:s},[n("td",{staticClass:"am-ui-tableContext-cell",class:e.rowClass(s),on:{contextmenu:function(t){return t.preventDefault(),e.onContextMenu("row",t)}}},[n("div",{style:e.rowStyle(t)},[e._v(e._s(e.rowLabel(s)))])])])})),e._v(" "),n("tr",[n("td",{staticClass:"am-ui-tableContext-cell add",attrs:{title:"Add Row"},on:{click:function(t){return e.onAddClick("row")}}},[n("div",{staticStyle:{height:"20px"}})])])],2),e._v(" "),n("table-resizer",{staticClass:"am-ui-tableContext-resizer",attrs:{"row-sizes":e.rowSizes,"col-sizes":e.colSizes},on:{resize:e.onResizerResize,append:e.onResizerAppend}})],1)},i=[]},"./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/view/components/FileViewNodeComponent.vue?vue&type=template&id=0f473c30&":function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return s})),n.d(t,"staticRenderFns",(function(){return i}));var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"amber-file-component am-view-focusableNode-grip",attrs:{draggable:"true"}},[null!=e.filename?s("div",{staticClass:"am-fin-display"},[s("AmberButton",{staticClass:"am-fin-download",on:{click:e.download}},[e._v("\n\t\t\tDownload\n\t\t")]),e._v(" "),s("img",{staticClass:"am-fin-icon",attrs:{src:n("./src/icons/fileColored.svg"),draggable:"false"}}),e._v(" "),s("div",{staticClass:"am-fin-filename"},[e._v(e._s(e.filename))])],1):e.loading?s("div",{staticClass:"am-fin-loading"},[s("Spinner",{staticClass:"am-fin-spinner"}),e._v("\n\t\tLoading...\n\t")],1):s("div",{staticClass:"am-fin-layout"},[s("Dropper",{staticClass:"am-fin-drop",on:{drop:e.onDrop}},[s("div",{staticClass:"am-fin-drop-layout"},[s("img",{staticClass:"am-fin-icon-large",attrs:{src:n("./src/icons/fileColored.svg"),draggable:"false"}}),e._v(" "),s("AmberButton",{on:{click:e.onUploadClick}},[e._v("Upload file")])],1)])],1)])},i=[]},"./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/view/components/GeneralVideoEmbed.vue?vue&type=template&id=7c70c45d&":function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return s})),n.d(t,"staticRenderFns",(function(){return i}));var s=function(){var e=this.$createElement,t=this._self._c||e;return t("video",{attrs:{controls:""}},[this.url?t("source",{attrs:{src:this.url}}):this._e()])},i=[]},"./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/view/components/ImageViewNodeComponent.vue?vue&type=template&id=1bc49446&":function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return s})),n.d(t,"staticRenderFns",(function(){return i}));var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"amber-image-component am-view-focusableNode-grip",class:{"am-image-component-empty":!e.src},style:e.style,attrs:{draggable:"true"}},[e.src?[s("img",{staticClass:"am-imn-img",attrs:{src:e.src}}),e._v(" "),e.canEdit?s("img",{staticClass:"am-imn-edit",attrs:{src:n("./src/icons/edit.svg"),title:"Edit",draggable:"false"},on:{click:function(t){return e.$emit("edit")}}}):e._e()]:s("div",{staticClass:"am-imn-layout"},[e.loading?s("div",{staticClass:"am-imn-loading"},[s("Spinner",{staticClass:"am-imn-spinner"}),e._v("\n\t\t\tLoading...\n\t\t")],1):s("Dropper",{staticClass:"am-imn-drop",on:{drop:e.onDrop}},[s("div",{staticClass:"am-imn-drop-layout"},[s("img",{staticClass:"am-imn-icon",attrs:{src:n("./src/icons/imageColored.svg"),draggable:"false"}}),e._v(" "),s("AmberButton",{on:{click:e.onUploadClick}},[e._v("Upload image file")]),e._v(" "),s("AmberButton",{on:{click:function(t){return e.$emit("setUrl")}}},[e._v("Embed from link")])],1)])],1)],2)},i=[]},"./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/view/components/VideoEmbed.vue?vue&type=template&id=f207c97e&":function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return s})),n.d(t,"staticRenderFns",(function(){return i}));var s=function(){var e=this.$createElement;return(this._self._c||e)(this.component,{tag:"component",attrs:{url:this.url}})},i=[]},"./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/view/components/VideoViewNodeComponent.vue?vue&type=template&id=d97f4b44&":function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return s})),n.d(t,"staticRenderFns",(function(){return i}));var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"am-vvn-component am-view-focusableNode-grip",class:{empty:!e.src},style:e.style,attrs:{draggable:"true"}},[e.src?e._e():s("div",{staticClass:"am-vin-empty"},[s("img",{staticClass:"am-vin-icon",attrs:{src:n("./src/icons/video.svg"),draggable:"false"}}),e._v(" "),s("div",{staticClass:"am-vin-body"},[s("div",{staticClass:"am-vin-btn",on:{click:e.onSetUrlClick}},[e._v("Click to embed a video")])])]),e._v(" "),s("div",{staticClass:"am-vvn-embed"},[s("video-embed",{attrs:{url:e.src}})],1),e._v(" "),s("div",{staticClass:"am-view-focusableNode-grip am-view-focusableNode-noHighlight am-vvn-grip am-vvn-grip-left"}),e._v(" "),s("div",{staticClass:"am-view-focusableNode-grip am-view-focusableNode-noHighlight am-vvn-grip am-vvn-grip-top"}),e._v(" "),s("div",{staticClass:"am-view-focusableNode-grip am-view-focusableNode-noHighlight am-vvn-grip am-vvn-grip-right"}),e._v(" "),s("div",{staticClass:"am-view-focusableNode-grip am-view-focusableNode-noHighlight am-vvn-grip am-vvn-grip-bottom"})])},i=[]},"./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/view/components/VimeoVideoEmbed.vue?vue&type=template&id=21fc42e2&":function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return s})),n.d(t,"staticRenderFns",(function(){return i}));var s=function(){var e=this.$createElement,t=this._self._c||e;return this.src?t("iframe",{attrs:{src:this.src,frameborder:"0",webkitallowfullscreen:"",mozallowfullscreen:"",allowfullscreen:""}}):this._e()},i=[]},"./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/view/components/YoutubeVideoEmbed.vue?vue&type=template&id=a6d672b0&":function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return s})),n.d(t,"staticRenderFns",(function(){return i}));var s=function(){var e=this.$createElement,t=this._self._c||e;return this.src?t("iframe",{attrs:{src:this.src,frameborder:"0",webkitallowfullscreen:"",mozallowfullscreen:"",allowfullscreen:""}}):this._e()},i=[]},"./node_modules/vue-loader/lib/runtime/componentNormalizer.js":function(e,t,n){"use strict";function s(e,t,n,s,i,r,a,o){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),s&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):i&&(l=o?function(){i.call(this,this.$root.$options.shadowRoot)}:i),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}n.r(t),n.d(t,"default",(function(){return s}))},"./src/BranchNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"BranchNode",(function(){return o})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./src/oo.ts"),a=n("./src/Node.ts"),o=function(){function e(){Object(s.default)(this,e)}return Object(i.default)(e,[{key:"hasChildren",value:function(){return!0}},{key:"setRoot",value:function(e){if(e!==this.root){a.Node.prototype.setRoot.call(this,e);var t=!0,n=!1,s=void 0;try{for(var i,r=this.children[Symbol.iterator]();!(t=(i=r.next()).done);t=!0)i.value.setRoot(e)}catch(o){n=!0,s=o}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}}}},{key:"setDocument",value:function(e){if(e!==this.document){a.Node.prototype.setDocument.call(this,e);var t=!0,n=!1,s=void 0;try{for(var i,r=this.children[Symbol.iterator]();!(t=(i=r.next()).done);t=!0)i.value.setDocument(e)}catch(o){n=!0,s=o}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}}}},{key:"traverseDepth",value:function(t){var n=!0,s=!1,i=void 0;try{for(var a,o=this.children[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var l=a.value;t(l),r.hasMixin(l,e)&&l.traverseDepth(t)}}catch(c){s=!0,i=c}finally{try{n||null==o.return||o.return()}finally{if(s)throw i}}}},{key:"getNodeFromOffset",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this,s=0;if(0===e)return n;e:for(;n.children.length;){var i=!0,r=!1,a=void 0;try{for(var o,l=n.children[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value;if(e===s)return n;var u=c.getOuterLength();if(e>=s&&e<s+u){if(!t&&c.hasChildren()&&c.children.length){s++,n=c;continue e}return c}s+=u}}catch(d){r=!0,a=d}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}if(e===s)return n}return null}}],[{key:"construct",value:function(e){e.children=[]}}]),e}()},"./src/CtorFactory.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"CtorFactory",(function(){return a})),n("core-js/modules/es.array.concat");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./src/Factory.ts"),a=function(){function e(){Object(s.default)(this,e),this.register=this.register.bind(this),this.factory=new r.Factory,this.items=this.factory.items}return Object(i.default)(e,[{key:"register",value:function(e){this.factory.register(e.id,e)}},{key:"unregister",value:function(e){this.factory.unregister(e.id)}},{key:"contains",value:function(e){return this.factory.contains(e)}},{key:"lookup",value:function(e){return this.factory.lookup(e)}},{key:"create",value:function(e){for(var t,n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return(t=this.factory).create.apply(t,[e].concat(s))}}]),e}()},"./src/Document.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"Document",(function(){return u})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),a=n("./src/oo.ts"),o=n("./src/EventEmitter.ts"),l=n("./src/Range.ts"),c=function(e,t,n,s){var i,a=arguments.length,o=a<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(r.default)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},u=function(){function e(t){Object(s.default)(this,e),o.EventEmitter.construct(this),this.documentNode=t,this.documentNode.setDocument(this)}return Object(i.default)(e,[{key:"getBranchNodeFromOffset",value:function(e){var t=this.documentNode.getNodeFromOffset(e);return t?t.hasChildren()?t:t.parent:null}},{key:"selectNodes",value:function(e,t){var n=e.start,s=e.end,i=[{node:this.documentNode,index:0,startOffset:0}],r=i[0];if(n<0||n>this.documentNode.getLength())throw new Error("Start offset out of range: ".concat(n));if(s<0||s>this.documentNode.getLength())throw new Error("End offset out of range: ".concat(s));if(!this.documentNode.children.length){var a=new l.Range(0,this.documentNode.getLength());return[{node:this.documentNode,range:new l.Range(n,s),index:0,nodeRange:a,nodeOuterRange:a}]}var o,c=this.documentNode.children[0].isWrapped()?1:0,u=[],d=!1;do{var h=r.node.children[r.index],p=r.node.children[r.index-1],f=r.node.children[r.index+1];o=c+h.getLength();var m=n>=c&&n<=o,v=s>=c&&s<=o,b=h.isWrapped(),g=!!p&&!p.isWrapped(),y=!!f&&!f.isWrapped(),w=(0===h.getLength()||h.shouldIgnoreChildren())&&!h.isContent()&&!h.canContainContent(),_=(b?n===c-1:n===c)&&!g,k=(b?s===o+1:s===o)&&!y,C=new l.Range(r.startOffset,r.startOffset+r.node.getLength());if(b&&s===c-1&&0===r.index){b=r.node.isWrapped(),u.push({node:r.node,indexInNode:0,range:new l.Range(s,s),nodeRange:C,nodeOuterRange:new l.Range(C.start-+b,C.end+ +b)});var x=i[i.length-2];return x&&(u[u.length-1].index=x.index),u}if(n===s&&(_||k)&&b){b=r.node.isWrapped(),u=[{node:r.node,indexInNode:r.index+(k?1:0),range:new l.Range(n,s),nodeRange:C,nodeOuterRange:new l.Range(C.start-+b,C.end+ +b)}];var j=i[i.length-2];return j&&(u[0].index=j.index),u}if(_){if(("leaves"===t||"covered"===t&&v||"branches"===t&&h.canHaveChildrenNotContent())&&h.hasChildren()&&h.children.length&&!h.shouldIgnoreChildren()){r={node:h,index:0,startOffset:c},i.push(r),d=!0,c+=+h.children[0].isWrapped();continue}if(v)return[{node:h,range:new l.Range(n,s),index:r.index,nodeRange:new l.Range(c,o),nodeOuterRange:new l.Range(c-+b,o+ +b),parentOuterRange:new l.Range(C.start-+r.node.isWrapped(),C.end+ +r.node.isWrapped())}];u.push({node:h,index:r.index,nodeRange:new l.Range(c,o),nodeOuterRange:new l.Range(c-+b,o+ +b),parentOuterRange:new l.Range(C.start-+r.node.isWrapped(),C.end+ +r.node.isWrapped())}),d=!0}else{if(m&&v){if(h.hasChildren()&&h.children.length&&("branches"!==t||h.canHaveChildrenNotContent())){r={node:h,index:0,startOffset:c},i.push(r),c+=+h.children[0].isWrapped();continue}return u=[{node:h,range:new l.Range(n,s),index:r.index,nodeRange:new l.Range(c,o),nodeOuterRange:new l.Range(c-+b,o+ +b),parentOuterRange:new l.Range(C.start-+r.node.isWrapped(),C.end+ +r.node.isWrapped())}],w&&(u[0].indexInNode=0),u}if(m){if(("leaves"===t||"covered"===t||"branches"===t&&h.canHaveChildrenNotContent())&&h.hasChildren()&&h.children.length){r={node:h,index:0,startOffset:c},i.push(r),c+=+h.children[0].isWrapped();continue}u.push({node:h,range:new l.Range(n,o),index:r.index,nodeRange:new l.Range(c,o),nodeOuterRange:new l.Range(c-+b,o+ +b),parentOuterRange:new l.Range(C.start-+r.node.isWrapped(),C.end+ +r.node.isWrapped())}),d=!0}else{if(k){if(("leaves"===t||"branches"===t&&h.canHaveChildrenNotContent())&&h.hasChildren()&&h.children.length){r={node:h,index:0,startOffset:c},i.push(r),c+=+h.children[0].isWrapped();continue}return u.push({node:h,index:r.index,nodeRange:new l.Range(c,o),nodeOuterRange:new l.Range(c-+b,o+ +b),parentOuterRange:new l.Range(C.start-+r.node.isWrapped(),C.end+ +r.node.isWrapped())}),u}if(v){if(("leaves"===t||"covered"===t||"branches"===t&&h.canHaveChildrenNotContent())&&h.hasChildren()&&h.children.length){r={node:h,index:0,startOffset:c},i.push(r),c+=+h.children[0].isWrapped();continue}return u.push({node:h,range:new l.Range(c,s),index:r.index,nodeRange:new l.Range(c,o),nodeOuterRange:new l.Range(c-+b,o+ +b),parentOuterRange:new l.Range(C.start-+r.node.isWrapped(),C.end+ +r.node.isWrapped())}),u}if(d&&s>o){if(("leaves"===t||"branches"===t&&h.canHaveChildrenNotContent())&&h.hasChildren()&&h.children.length){r={node:h,index:0,startOffset:c},i.push(r),c+=+h.children[0].isWrapped();continue}u.push({node:h,index:r.index,nodeRange:new l.Range(c,o),nodeOuterRange:new l.Range(c-+b,o+ +b),parentOuterRange:new l.Range(C.start-+r.node.isWrapped(),C.end+ +r.node.isWrapped())})}}}if(f)r.index++,c=o+ +h.isWrapped()+ +f.isWrapped();else{for(c=o+ +h.isWrapped();!f;){if(h.isWrapped()&&n===c){C=new l.Range(r.startOffset,r.startOffset+r.node.getLength()),b=r.node.isWrapped(),u=[{node:r.node,indexInNode:r.index+1,range:new l.Range(c,c),nodeRange:C,nodeOuterRange:new l.Range(C.start-+b,C.end+ +b)}];var O=i[i.length-2];O&&(u[0].index=O.index)}if(i.pop(),!i.length)return u;(r=i[i.length-1]).index++,f=r.node.children[r.index],c++}c+=+f.isWrapped()}}while(s>=c-1);if(!u.length)throw new Error("Failed to select any nodes");return u}},{key:"getCoveredSiblingGroups",value:function(e){for(var t=this.selectNodes(e,"leaves"),n=[],s=0,i=0;i<t.length;i++)if(!(t[i].nodeOuterRange.end<=s)){var r=t[i].node;r.isContent()&&(r=r.parent);var a=r.parent;if(!a)break;n.push({parent:a,grandparent:a.parent,nodes:[]});var o=r;do{if(n[n.length-1].nodes.push(o),!t[++i])break;(o=t[i].node).isContent()&&(o=o.parent)}while(o.parent===a);i--,s=a.getOuterRange().end}return n}},{key:"rangeInsideOneLeafNode",value:function(e){var t=this.selectNodes(e,"leaves");return 1===t.length&&t[0].nodeRange.containsRange(e)&&void 0===t[0].indexInNode}}]),e}();u=c([a.mixin(o.EventEmitter)],u)},"./src/ErrorBase.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ErrorBase",(function(){return i}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=function e(t){Object(s.default)(this,e),this.message=t,this.stack=Error().stack}},"./src/EventEmitter.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"CompositeDisposable",(function(){return r})),n.d(t,"EventEmitter",(function(){return a})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.index-of"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.splice"),n("core-js/modules/es.map"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=function(){function e(){Object(s.default)(this,e);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];this.disposables=n}return Object(i.default)(e,[{key:"add",value:function(){var e;(e=this.disposables).push.apply(e,arguments)}},{key:"dispose",value:function(){var e=!0,t=!1,n=void 0;try{for(var s,i=this.disposables[Symbol.iterator]();!(e=(s=i.next()).done);e=!0)s.value.dispose()}catch(r){t=!0,n=r}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}}]),e}(),a=function(){function e(){Object(s.default)(this,e),e.construct(this)}return Object(i.default)(e,[{key:"on",value:function(e,t){var n=this;return this.eventHandlerMap.has(e)||this.eventHandlerMap.set(e,[]),this.eventHandlerMap.get(e).push(t),{dispose:function(){n.off(e,t)}}}},{key:"off",value:function(e,t){if(!this.eventHandlerMap.has(e))return!1;var n=this.eventHandlerMap.get(e),s=n.indexOf(t);return-1!==s&&(n.splice(s,1),0===n.length&&this.eventHandlerMap.delete(e),!0)}},{key:"emit",value:function(e){var t=this.eventHandlerMap.get(e);if(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];var r=!0,a=!1,o=void 0;try{for(var l,c=t[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;u.apply(this,s)}}catch(d){a=!0,o=d}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}}}}],[{key:"construct",value:function(e){e.eventHandlerMap=new Map}}]),e}()},"./src/EventSequencer.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"EventSequencer",(function(){return r})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.slice"),n("core-js/modules/es.array.splice"),n("core-js/modules/es.map"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.set"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=function(){function e(){Object(s.default)(this,e),this.node=null,this.events=new Set,this.onListeners=new Map,this.afterListeners=new Map,this.afterOnceListeners=new Map,this.pendingCalls=[],this.onEvent=this.onEvent.bind(this)}return Object(i.default)(e,[{key:"attach",value:function(e){this.detatch(),this.node=e;var t=!0,n=!1,s=void 0;try{for(var i,r=this.events[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;this.node.addEventListener(a,this.onEvent)}}catch(o){n=!0,s=o}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}return this}},{key:"detatch",value:function(){if(this.node){var e=!0,t=!1,n=void 0;try{for(var s,i=this.events[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){var r=s.value;this.node.removeEventListener(r,this.onEvent)}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}return this.node=null,this}}},{key:"onEvent",value:function(e){var t=this;if(this.runPendingCalls(e.type),this.onListeners.has(e.type))for(var n=this.onListeners.get(e.type).slice(),s=0;s<n.length;s++)n[s](e);var i={id:null,e:e},r=this.postpone((function(){null!==i.id&&(i.id=null,t.afterEvent(e))}));i.id=r,this.pendingCalls.push(i)}},{key:"afterEvent",value:function(e){if(this.afterListeners.has(e.type)){var t=!0,n=!1,s=void 0;try{for(var i,r=this.afterListeners.get(e.type).slice()[Symbol.iterator]();!(t=(i=r.next()).done);t=!0)(0,i.value)(e)}catch(d){n=!0,s=d}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}}if(this.afterOnceListeners.has(e.type)){var a=!0,o=!1,l=void 0;try{for(var c,u=this.afterOnceListeners.get(e.type).splice(0)[Symbol.iterator]();!(a=(c=u.next()).done);a=!0)(0,c.value)(e)}catch(d){o=!0,l=d}finally{try{a||null==u.return||u.return()}finally{if(o)throw l}}0===this.afterOnceListeners.get(e.type).length&&this.afterOnceListeners.delete(e.type)}}},{key:"postpone",value:function(e){return setTimeout(e)}},{key:"ensureListener",value:function(e){this.events.has(e)||(this.events.add(e),this.node&&this.node.addEventListener(e,this.onEvent))}},{key:"registerListener",value:function(e,t,n){var s=t.get(e);return s||(s=[],t.set(e,s)),s.push(n),this.ensureListener(e),this}},{key:"runPendingCalls",value:function(e){for(var t=[],n=0;n<this.pendingCalls.length;n++){var s=this.pendingCalls[n];null!==s.id&&("keypress"!==e||"keydown"!==s.e.type?(clearTimeout(s.id),s.id=null,this.afterEvent(s.e)):t.push(s))}this.pendingCalls=t}},{key:"on",value:function(e,t){return this.registerListener(e,this.onListeners,t)}},{key:"after",value:function(e,t){return this.registerListener(e,this.afterListeners,t)}},{key:"afterOnce",value:function(e,t){return this.registerListener(e,this.afterOnceListeners,t)}}]),e}()},"./src/Factory.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"Factory",(function(){return c}));var s=n("./node_modules/@babel/runtime/helpers/esm/construct.js"),i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=function(e){function t(){return Object(i.default)(this,t),Object(a.default)(this,Object(o.default)(t).apply(this,arguments))}return Object(l.default)(t,e),Object(r.default)(t,[{key:"create",value:function(e){var t=this.lookup(e);if(!t)throw new Error("No constructor registered with that key");for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return Object(s.default)(t,i)}}]),t}(n("./src/Registry.ts").Registry)},"./src/Filibuster.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"Filibuster",(function(){return f})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.concat"),n("core-js/modules/es.array.index-of"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.map"),n("core-js/modules/es.map"),n("core-js/modules/es.number.to-fixed"),n("core-js/modules/es.object.get-own-property-names"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.set"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),i=n("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),r=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),a=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),l=n("./src/util.ts"),c=n("./src/domUtil.ts"),u=n("./src/Range.ts"),d=n("./src/model/Transaction.ts"),h=n("./src/model/selections/SelectionModel.ts"),p=n("./src/model/AnnotationSet.ts"),f=function(){function e(){Object(a.default)(this,e),this.count=0,this.states=new Map,this.observers=new Map,this.callTree={children:[]},this.frame=this.callTree,this.callPath=[],this.observationTree={children:{}},this.active=!1,this.startTime=null}return Object(o.default)(e,[{key:"clearLogs",value:function(){this.count=0,this.states.clear(),this.observationTree.children={},this.callTree.children.length=0,this.frame=this.callTree,this.callPath.length=0}},{key:"setObserver",value:function(e,t){return this.observers.set(e,t),this}},{key:"observe",value:function(e){var t,n,s,i,r=this,a=new Map,o=!0,l=!1,c=void 0;try{for(var u,d=this.observers.keys()[Symbol.iterator]();!(o=(u=d.next()).done);o=!0)t=void 0,n=void 0,s=void 0,i=void 0,t=u.value,n=r.observers.get(t),s=r.states.get(t),i=function(){try{return n()}catch(e){return"Error: ".concat(e)}}(),r.states.get(t)!==i&&(r.states.has(t)&&a.set(t,{oldState:s,newState:i}),r.states.set(t,i))}catch(y){l=!0,c=y}finally{try{o||null==d.return||d.return()}finally{if(l)throw c}}if(a.size){var h=this.observationTree,p=!0,f=!1,m=void 0;try{for(var v,b=this.callPath[Symbol.iterator]();!(p=(v=b.next()).done);p=!0){var g=v.value;h.children||(h.children={}),h.children[g]||(h.children[g]={}),h=h.children[g]}}catch(y){f=!0,m=y}finally{try{p||null==b.return||b.return()}finally{if(f)throw m}}h.changes||(h.changes={}),"call"===e?h.changes.enter=a:h.changes.exit=a}}},{key:"log",value:function(t,n,s,i){if(this.active){var r=l.now()-this.startTime;if("call"===n){var a=this.frame;a.children||(a.children=[]),this.callPath.push(a.children.length),this.frame={count:this.count++,funcName:t,args:e.clonePlain(s),start:r,parent:a},a.children.push(this.frame)}if(this.observe(n),"return"===n||"throw"===n){if(void 0===this.frame.funcName)throw new Error('No call logged, but leaving "'.concat(t,'" (').concat(n,")"));if(this.frame.funcName!==t)throw new Error('Logged call to "'.concat(this.frame.funcName,'" but leaving "').concat(t,'" (').concat(n,")"));this.frame.end=r,"return"===n?this.frame.returned=e.clonePlain(i):"throw"===n&&(this.frame.thrown=!0),this.frame=this.frame.parent,this.callPath.pop()}}}},{key:"wrapFunction",value:function(e,t,n){var s="".concat(t||"unknown",".").concat(n),i=e[n];if("function"!=typeof i)throw new Error("Not a function");var r=this,a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.log(s,"call",t);var a=!1;try{var o=i.apply(this,t);return a=!0,r.log(s,"return",void 0,o),o}catch(l){a||r.log(s,"throw")}};return a.wrappedFunction=i,e[n]=a,this}},{key:"wrapClass",value:function(e){for(var t=e.prototype,n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];var r=!0,a=!1,o=void 0;try{for(var l,c=Object.getOwnPropertyNames(t)[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;if("prototype"!==u&&"constructor"!==u){var d=t[u];"function"!=typeof d||d.wrappedFunction||-1!==s.indexOf(d)||this.wrapFunction(t,e.name,u)}}}catch(h){a=!0,o=h}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return this}},{key:"start",value:function(){this.active=!0,this.startTime=l.now()}},{key:"stop",value:function(){this.active=!1}},{key:"getObservationsHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=function(e){return"<strong>(</strong>".concat(c.escapeHtml(e.map((function(e){return JSON.stringify(e)})).join(",")),"<strong>)</strong>")},n=function(e){return c.escapeHtml(JSON.stringify(e))},s=function(e,t){return("enter"===t?"<hr>":"")+'<div class="am-filibuster-changes">'+Object(r.default)(e.entries()).map((function(e){var t=Object(i.default)(e,2),n=t[0],s=t[1];return""+"<strong>".concat(c.escapeHtml(n)," old</strong><br>").concat(c.escapeHtml(s.oldState),"<br>")+"<strong>".concat(c.escapeHtml(n)," new</strong><br>").concat(c.escapeHtml(s.newState))})).join("<br>")+"</div>"+("exit"===t?"<hr>":"")},a=function(e){return"<code><strong>".concat(e.count,"</strong> ")+"(".concat(e.start.toFixed(2),"ms-").concat(e.end.toFixed(2),"ms)</code> ")+"<strong>".concat(c.escapeHtml(e.funcName),"</strong>")+t(e.args)},o=function(e){return"<strong>exit ".concat(c.escapeHtml(e.funcName),"</strong> ")+"-> ".concat(e.thrown?"thrown":n(e.returned))},l=function(e){return"<code><strong>".concat(e.count,"</strong> ")+"(".concat(e.start.toFixed(2),"ms-").concat(e.end.toFixed(2),"ms)</code> ")+"<strong>".concat(c.escapeHtml(e.funcName),"</strong>")+t(e.args)+"<span/> -> ".concat(e.thrown?"thrown":n(e.returned))},u=function e(t,n,i){var u=[];u.push("<ul>");for(var d=0;d<t.length;d++){var h=t[d],p=n[d];p&&p.changes&&p.changes.enter&&u.push(s(p.changes.enter,"enter"));var f=p&&p.children,m=!f&&h.children&&h.children.length>0;u.push('<li class="am-filibuster-frame'),m&&u.push(" am-filibuster-frame-expandable"),u.push(' data-am-filibuster-frame="'.concat(c.escapeHtml(JSON.stringify([].concat(Object(r.default)(i),[d]))),'">')),f?(u.push(a(h)),u.push.apply(u,Object(r.default)(e(h.children||[],p.children,[].concat(Object(r.default)(i),[d])))),u.push(o(h))):u.push(l(h)),u.push("</li>"),p&&p.changes&&p.changes.exit&&u.push(s(p.changes.exit,"exit"))}return u.push("</ul>"),u},d=this.callTree,h=this.observationTree,p=!0,f=!1,m=void 0;try{for(var v,b=e[Symbol.iterator]();!(p=(v=b.next()).done);p=!0){var g=v.value;d=d.children[g],h=h&&h.children?h.children[g]:void 0}}catch(y){f=!0,m=y}finally{try{p||null==b.return||b.return()}finally{if(f)throw m}}return u(d.children||[],h&&h.children||{},e).join("")}}],[{key:"clonePlain",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;if(n.has(e))return"...";if(Array.isArray(e))return n.add(e),e.map((function(e){return t.clonePlain(e,n)}));if("function"==typeof e)return"(function ".concat(e.name,")");if(void 0===e)return"(undefined)";if(null===e)return null;if(e===window)return"(window)";if("object"!==Object(s.default)(e))return e;if(e instanceof u.Range)return{Range:[e.from,e.to]};if(e instanceof d.Transaction)return{Transaction:e.operations.map((function(e){return t.clonePlain(e,n)}))};if(e instanceof h.SelectionModel)return{Selection:e.getDescription()};if(e instanceof p.AnnotationSet)return{AnnotationSet:e.getIndices().map((function(t){return e.getStore().value(t)})).map((function(e){return e.constructor.name}))};if(e.constructor!==Object)return"(".concat(e.constructor.name||"unknown",")");n.add(e);var i={},r=!0,a=!1,o=void 0;try{for(var l,c=Object.getOwnPropertyNames(e)[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var f=l.value;i[f]=this.clonePlain(e[f],n)}}catch(m){a=!0,o=m}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return i}}]),e}()},"./src/LeafNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"LeafNode",(function(){return r}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=function(){function e(){Object(s.default)(this,e)}return Object(i.default)(e,[{key:"hasChildren",value:function(){return!1}}],[{key:"construct",value:function(e){}}]),e}()},"./src/Node.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"Node",(function(){return u})),n("core-js/modules/es.array.index-of"),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),a=n("./src/oo.ts"),o=n("./src/EventEmitter.ts"),l=n("./src/Range.ts"),c=function(e,t,n,s){var i,a=arguments.length,o=a<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(r.default)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},u=function(){function e(){Object(s.default)(this,e)}return Object(i.default)(e,[{key:"getOuterLength",value:function(){return this.getLength()+(this.isWrapped()?2:0)}},{key:"getRange",value:function(){var e=this.getOffset()+(this.isWrapped()?1:0);return new l.Range(e,e+this.getLength())}},{key:"getOuterRange",value:function(){var e=this.getOffset();return new l.Range(e,e+this.getOuterLength())}},{key:"canHaveChildType",value:function(e){var t=this.getChildNodeTypes();return null===t||-1!==t.indexOf(e)}},{key:"canHaveParentType",value:function(e){var t=this.getParentNodeTypes();return null===t||-1!==t.indexOf(e)}},{key:"canHaveChildren",value:function(){var e=this.getChildNodeTypes();return null===e||e.length>0}},{key:"canHaveChildrenNotContent",value:function(){return this.canHaveChildren()&&!this.canContainContent()&&!this.isContent()}},{key:"setRoot",value:function(e){e!==this.root&&(this.root=e,e?this.emit("root"):this.emit("unroot"))}},{key:"setDocument",value:function(e){this.document=e}},{key:"attach",value:function(e){this.parent=e,this.setRoot(e.root),this.setDocument(e.document),this.emit("attach",{parent:e})}},{key:"detatch",value:function(){var e=this.parent;this.parent=null,this.setRoot(null),this.setDocument(null),this.emit("detatch",{parent:e})}},{key:"traverseUp",value:function(e){for(var t=this;t;){if(!1===e(t))return t;t=t.parent}return null}}],[{key:"construct",value:function(e){e.type=e.constructor.id,e.root=null,e.parent=null,e.document=null}}]),e}();u.id=null,u=c([a.mixin(o.EventEmitter)],u)},"./src/Range.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"Range",(function(){return r}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;Object(s.default)(this,e),this.from=t,this.to=n,this.start=Math.min(this.from,this.to),this.end=Math.max(this.from,this.to)}return Object(i.default)(e,[{key:"getLength",value:function(){return this.end-this.start}},{key:"isCollapsed",value:function(){return this.from===this.to}},{key:"isBackwards",value:function(){return this.from>this.to}},{key:"fixDirection",value:function(){return this.isBackwards()?this.flipped():this.clone()}},{key:"clone",value:function(){return new e(this.from,this.to)}},{key:"containsOffset",value:function(e){return e>=this.start&&e<=this.end}},{key:"containsRange",value:function(e){return e.start>=this.start&&e.end<=this.end}},{key:"overlapsRange",value:function(e){return e.end>=this.start&&e.start<=this.end}},{key:"flipped",value:function(){return new e(this.to,this.from)}},{key:"collapsedToStart",value:function(){return new e(this.start)}},{key:"collapsedToEnd",value:function(){return new e(this.end)}},{key:"collapsedToFrom",value:function(){return new e(this.from)}},{key:"collapsedToTo",value:function(){return new e(this.to)}},{key:"add",value:function(t,n){return new e(this.from+t,this.to+n)}},{key:"translated",value:function(t){return new e(this.from+t,this.to+t)}},{key:"truncated",value:function(t){return t>=0?new e(this.start,Math.min(this.start+t,this.end)):new e(Math.max(this.end+t,this.start),this.end)}},{key:"equals",value:function(e){return e&&this.from===e.from&&this.to===e.to}},{key:"equalsSelection",value:function(e){return e&&this.start===e.start&&this.end===e.end}}],[{key:"newCoveringRange",value:function(t){for(var n=t[0].start,s=t[0].end,i=1;i<t.length;i++)n=Math.min(n,t[i].start),s=Math.max(s,t[i].end);return new e(n,s)}},{key:"fromHash",value:function(t){return new e(t.from,t.to)}}]),e}()},"./src/Registry.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"Registry",(function(){return r})),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.map"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=function(){function e(){Object(s.default)(this,e),this.items=new Map}return Object(i.default)(e,[{key:"register",value:function(e,t){this.items.has(e)||this.items.set(e,t)}},{key:"unregister",value:function(e){this.items.delete(e)}},{key:"lookup",value:function(e){return this.items.get(e)}},{key:"contains",value:function(e){return this.items.has(e)}}]),e}()},"./src/SelectionState.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"SelectionState",(function(){return a}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./src/domUtil.ts"),a=function(){function e(t){Object(s.default)(this,e),this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset,void 0===t.isCollapsed?this.isCollapsed=this.anchorNode===this.focusNode&&this.anchorOffset===this.focusOffset:this.isCollapsed=t.isCollapsed,void 0===t.isBackwards?this.isBackwards=r.compareDocumentOrder(this.focusNode,this.focusOffset,this.anchorNode,this.anchorOffset)<0:this.isBackwards=t.isBackwards}return Object(i.default)(e,[{key:"flipped",value:function(){return new e({anchorNode:this.focusNode,anchorOffset:this.focusOffset,focusNode:this.anchorNode,focusOffset:this.anchorOffset})}},{key:"equals",value:function(e){return this.anchorNode===e.anchorNode&&this.anchorOffset===e.anchorOffset&&this.focusNode===e.focusNode&&this.focusOffset===e.focusOffset}},{key:"getNativeRange",value:function(){var e=document.createRange();return this.isBackwards?(e.setStart(this.focusNode,this.focusOffset),e.setEnd(this.anchorNode,this.anchorOffset)):(e.setStart(this.anchorNode,this.anchorOffset),e.setEnd(this.focusNode,this.focusOffset)),e}}],[{key:"newNullSelection",value:function(){return new e({anchorNode:null,anchorOffset:0,focusNode:null,focusOffset:0})}}]),e}()},"./src/components/AmberButton.vue":function(e,t,n){"use strict";n.r(t);var s=n("./src/components/AmberButton.vue?vue&type=template&id=29804636&"),i=(n("./src/components/AmberButton.vue?vue&type=style&index=0&lang=scss&"),n("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),r=Object(i.default)({},s.render,s.staticRenderFns,!1,null,null,null);t.default=r.exports},"./src/components/AmberButton.vue?vue&type=style&index=0&lang=scss&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js!./node_modules/vue-loader/lib/index.js?!./src/components/AmberButton.vue?vue&type=style&index=0&lang=scss&"),i=n.n(s);for(var r in s)"default"!==r&&function(e){n.d(t,e,(function(){return s[e]}))}(r);t.default=i.a},"./src/components/AmberButton.vue?vue&type=template&id=29804636&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/components/AmberButton.vue?vue&type=template&id=29804636&");n.d(t,"render",(function(){return s.render})),n.d(t,"staticRenderFns",(function(){return s.staticRenderFns}))},"./src/components/Dropper.vue":function(e,t,n){"use strict";n.r(t);var s=n("./src/components/Dropper.vue?vue&type=template&id=0cf375bc&"),i=n("./src/components/Dropper.vue?vue&type=script&lang=js&"),r=(n("./src/components/Dropper.vue?vue&type=style&index=0&lang=scss&"),n("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),a=Object(r.default)(i.default,s.render,s.staticRenderFns,!1,null,null,null);t.default=a.exports},"./src/components/Dropper.vue?vue&type=script&lang=js&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/components/Dropper.vue?vue&type=script&lang=js&");t.default=s.default},"./src/components/Dropper.vue?vue&type=style&index=0&lang=scss&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js!./node_modules/vue-loader/lib/index.js?!./src/components/Dropper.vue?vue&type=style&index=0&lang=scss&"),i=n.n(s);for(var r in s)"default"!==r&&function(e){n.d(t,e,(function(){return s[e]}))}(r);t.default=i.a},"./src/components/Dropper.vue?vue&type=template&id=0cf375bc&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/components/Dropper.vue?vue&type=template&id=0cf375bc&");n.d(t,"render",(function(){return s.render})),n.d(t,"staticRenderFns",(function(){return s.staticRenderFns}))},"./src/components/Spinner.vue":function(e,t,n){"use strict";n.r(t);var s=n("./src/components/Spinner.vue?vue&type=template&id=6fc9f761&"),i=(n("./src/components/Spinner.vue?vue&type=style&index=0&lang=scss&"),n("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),r=Object(i.default)({},s.render,s.staticRenderFns,!1,null,null,null);t.default=r.exports},"./src/components/Spinner.vue?vue&type=style&index=0&lang=scss&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js!./node_modules/vue-loader/lib/index.js?!./src/components/Spinner.vue?vue&type=style&index=0&lang=scss&"),i=n.n(s);for(var r in s)"default"!==r&&function(e){n.d(t,e,(function(){return s[e]}))}(r);t.default=i.a},"./src/components/Spinner.vue?vue&type=template&id=6fc9f761&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/components/Spinner.vue?vue&type=template&id=6fc9f761&");n.d(t,"render",(function(){return s.render})),n.d(t,"staticRenderFns",(function(){return s.staticRenderFns}))},"./src/debug.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"serializeNode",(function(){return i}));var s=n("./src/domUtil.ts");function i(e){var t=[];return function e(n){if(n.nodeType!==Node.TEXT_NODE)if(n.nodeType===Node.ELEMENT_NODE){var i=n;t.push("<",s.escapeHtml(i.nodeName.toLowerCase()));for(var r=0;r<i.attributes.length;r++){var a=i.attributes[r];t.push(" ",s.escapeHtml(a.name),'="',s.escapeHtml(a.value),'"')}t.push(">");for(var o=0;o<i.childNodes.length;o++)e(i.childNodes[o])}else t.push('<#unknown type="',n.nodeType,'"/>');else t.push("<#text>",s.escapeHtml(n.nodeValue),"</#text>")}(e),t.join("")}},"./src/domUtil.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"smallImageUri",(function(){return o})),n.d(t,"Key",(function(){return s})),n.d(t,"MouseButton",(function(){return i})),n.d(t,"findVendorProperty",(function(){return l})),n.d(t,"matches",(function(){return d})),n.d(t,"closestAncestor",(function(){return h})),n.d(t,"parentIndex",(function(){return p})),n.d(t,"getOffsetPath",(function(){return f})),n.d(t,"compareDocumentOrder",(function(){return m})),n.d(t,"contains",(function(){return v})),n.d(t,"closest",(function(){return b})),n.d(t,"getOffset",(function(){return g})),n.d(t,"getRelativePosition",(function(){return y})),n.d(t,"removeAllChildren",(function(){return w})),n.d(t,"selectElement",(function(){return _})),n.d(t,"nextCursorOffset",(function(){return k})),n.d(t,"prevCursorOffset",(function(){return C})),n.d(t,"createXmlDocumentFromXml",(function(){return x})),n.d(t,"createHtmlDocumentFromHtml",(function(){return j})),n.d(t,"getClosestScrollableContainer",(function(){return O})),n.d(t,"getRootScrollableElement",(function(){return S})),n.d(t,"unwrap",(function(){return E})),n.d(t,"isContentEditable",(function(){return T})),n.d(t,"setAttributes",(function(){return I})),n.d(t,"setWindowScrollEnabled",(function(){return P})),n.d(t,"mouseX",(function(){return A})),n.d(t,"mouseY",(function(){return N})),n.d(t,"documentFragmentToXml",(function(){return R})),n.d(t,"escapeHtml",(function(){return L})),n.d(t,"setIframePointerEventsEnabled",(function(){return F})),n.d(t,"getBorders",(function(){return B})),n.d(t,"getMargins",(function(){return q})),n.d(t,"getDimensions",(function(){return $})),n.d(t,"scrollIntoView",(function(){return U})),n.d(t,"showCursorOverlay",(function(){return V})),n.d(t,"hideCursorOverlay",(function(){return H})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.concat"),n("core-js/modules/es.array.index-of"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.parse-float"),n("core-js/modules/es.set"),n("core-js/modules/es.string.iterator"),n("core-js/modules/es.string.match"),n("core-js/modules/web.dom-collections.iterator");var s,i,r=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),a=n("./src/util.ts"),o="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";function l(e,t){var n=t[0].toUpperCase()+t.substr(1);return e[t]||e["webkit"+n]||e["moz"+n]||e["ms"+n]||e["o"+n]}!function(e){e[e[void 0]=0]="undefined",e[e.backspace=8]="backspace",e[e.delete=46]="delete",e[e.left=37]="left",e[e.right=39]="right",e[e.up=38]="up",e[e.down=40]="down",e[e.enter=13]="enter",e[e.end=35]="end",e[e.home=36]="home",e[e.tab=9]="tab",e[e.pageUp=33]="pageUp",e[e.pageDown=34]="pageDown",e[e.escape=27]="escape",e[e.shift=16]="shift",e[e.space=32]="space"}(s||(s={})),function(e){e[e.left=0]="left",e[e.middle=1]="middle",e[e.right=2]="right"}(i||(i={}));var c,u=Element.prototype.matches||l(Element.prototype,"matchesSelector");function d(e,t){return u.call(e,t)}function h(e,t){for(var n=[];e;)n.unshift(e),e=e.parentNode;for(var s=[];t;)s.unshift(t),t=t.parentNode;if(n[0]!==s[0])return null;for(var i=1;i<n.length&&i<s.length&&n[i]===s[i];)i++;return n[i-1]}function p(e){return Array.prototype.indexOf.call(e.parentNode.childNodes,e)}function f(e,t){for(var n=[];t!==e;)if(n.unshift(p(t)),!(t=t.parentNode))throw new Error("Invalid ancestor node");return n}function m(e,t,n,s){var i=h(e,n);if(!i)return null;var r=f(i,e);r.push(t);var a=f(i,n);a.push(s);for(var o=0,l=Math.min(r.length,a.length);o<l;o++)if(r[o]!==a[o])return r[o]-a[o];return r.length>a.length?1/0:r.length<a.length?-1/0:0}function v(e,t){if("string"==typeof t)return e.nodeType===Node.ELEMENT_NODE&&!!e.querySelector(t);for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function b(e,t){for(var n=e.nodeType===Node.ELEMENT_NODE?e:e.parentElement;n&&!d(n,t);)n=n.parentElement;return n}function g(e){var t=e.getBoundingClientRect();return{x:t.left+window.pageXOffset,y:t.top+window.pageYOffset}}function y(e,t){var n=e.getBoundingClientRect(),s=t.getBoundingClientRect();return{x:n.left-s.left,y:n.top-s.top}}function w(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function _(e){var t=document.createRange();t.setStart(e,0),t.setEnd(e,e.childNodes.length);var n=document.getSelection();n.removeAllRanges(),n.addRange(t)}function k(e){var t,n;return e.nextSibling&&e.nextSibling.nodeType===Node.TEXT_NODE?(t=e.nextSibling,n=0):(t=e.parentNode,n=1+p(e)),{node:t,offset:n}}function C(e){var t,n;return e.previousSibling&&e.previousSibling.nodeType===Node.TEXT_NODE?n=(t=e.previousSibling).data.length:(t=e.parentNode,n=p(e)),{node:t,offset:n}}function x(e){try{var t=new DOMParser,n=t.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI,s=t.parseFromString(e,"text/xml");return s.getElementsByTagNameNS(n,"parsererror").length?null:s}catch(i){return null}}function j(e){try{return(new DOMParser).parseFromString(e||"<body/>","text/html")}catch(t){}return null}function O(e,t){for(var n=e.parentElement,s=S();n;){if(n===s)return n;var i=getComputedStyle(n);if((t&&"x"!==t||"auto"===i.overflowX||"scroll"===i.overflowX)&&(t&&"y"!==t||"auto"===i.overflowY||"scroll"===i.overflowY))return n;n=n.parentElement}return null}function S(){if(!c){var e=document.body,t=e.scrollTop;e.scrollTop=1,1===e.scrollTop?(e.scrollTop=t,c=e):c=document.documentElement}return c}function E(e){Array.isArray(e)||(e=[e]);var t=new Set,n=!0,s=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value;if(o.parentNode&&o.parentNode.parentNode){for(var l=o.parentNode,c=l.parentNode;l.firstChild;)t.has(l.firstChild)||(t.add(l.firstChild),c.insertBefore(l.firstChild,l));c.removeChild(l)}}}catch(u){s=!0,i=u}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}}function T(e){return(e.nodeType===Node.TEXT_NODE?e.parentNode:e).isContentEditable}function I(e,t){for(var n in t)null==t[n]?e.removeAttribute(n):e.setAttribute(n,t[n])}function D(e){e.preventDefault()}function P(e){e?(document.documentElement.style.overflow="",window.removeEventListener("touchmove",D)):(document.documentElement.style.overflow="hidden",window.addEventListener("touchmove",D))}var A=0,N=0;function R(e){return'<document version="2.0">'.concat(a.serializeDocument(e),"</document>")}document.addEventListener("mousemove",(function(e){A=e.clientX,N=e.clientY}));var M=document.createElement("div");function L(e){var t=document.createTextNode(e);return M.appendChild(t),e=M.innerHTML,t.remove(),e}function F(e){for(var t=e?"":"none",n=0,s=[].concat(Object(r.default)(document.querySelectorAll("iframe")),Object(r.default)(document.querySelectorAll("embed")));n<s.length;n++)s[n].style.pointerEvents=t;t=e?"none":"";for(var i=0,a=Object(r.default)(document.querySelectorAll(".iframe-blocker"));i<a.length;i++)a[i].style.display=t}function B(e){var t=e.ownerDocument.defaultView.getComputedStyle(e);return{left:parseFloat(t.borderLeftWidth),top:parseFloat(t.borderTopWidth),right:parseFloat(t.borderRightWidth),bottom:parseFloat(t.borderBottomWidth)}}function q(e){var t=e.ownerDocument.defaultView.getComputedStyle(e);return{left:parseFloat(t.marginLeft),top:parseFloat(t.marginTop),right:parseFloat(t.marginRight),bottom:parseFloat(t.marginBottom)}}function $(e){var t=e instanceof HTMLElement?e.ownerDocument:e.document,n=t.defaultView;return e instanceof Window||e===t.documentElement?{borders:{left:0,top:0,right:0,bottom:0},rect:{left:0,top:0,right:n.innerWidth,bottom:n.innerHeight},scroll:{top:n.pageYOffset,left:n.pageXOffset}}:{borders:B(e),rect:e.getBoundingClientRect(),scroll:{top:e.scrollTop,left:e.scrollLeft}}}function U(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=O(e,"y"),i=$(s),r=$(e),a=e.ownerDocument.defaultView;if(t=s.tagName.match(/^(html|body)$/i)?{left:r.rect.left,top:r.rect.top,right:a.innerWidth-r.rect.right,bottom:a.innerHeight-r.rect.bottom}:{left:r.rect.left-(i.rect.left+i.borders.left),top:r.rect.top-(i.rect.top+i.borders.top),right:i.rect.right-i.borders.right-r.rect.right,bottom:i.rect.bottom-i.borders.bottom-r.rect.bottom},n.margin){var o=q(e);t.left-=o.left,t.top-=o.top,t.right-=o.right,t.bottom-=o.bottom}t.top<0?s.scrollTop=i.scroll.top+t.top:t.top>0&&t.bottom<0&&(s.scrollTop=i.scroll.top+Math.min(t.top,-t.bottom))}var z=document.createElement("div");function V(e){z.style.cursor=e,document.body.appendChild(z)}function H(){z.remove()}z.style.position="fixed",z.style.left="0",z.style.top="0",z.style.right="0",z.style.bottom="0"},"./src/icons/edit.svg":function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE2LjAuNCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyM3B4IiBoZWlnaHQ9IjIzcHgiIHZpZXdCb3g9IjAgMCAyMyAyMyIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjMgMjMiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8Zz4KCTxwYXRoIGQ9Ik0xOS40NzksNi40N2wwLjk0My0wLjk0M2MwLjY4OS0wLjY4OSwwLjU5MS0xLjkxLTAuMjI1LTIuNzI0Yy0wLjgxNS0wLjgxNS0yLjAzNy0wLjkxNi0yLjcyNS0wLjIyOEwxNi41MjgsMy41MgoJCUwxOS40NzksNi40N3oiLz4KCTxwb2x5Z29uIHBvaW50cz0iMTUuNjI5LDQuNDE4IDMuODM5LDE2LjIwOCAyLjExOSwyMC44ODIgNi43OTEsMTkuMTU5IDE4LjU4MSw3LjM2OCAJIi8+CjwvZz4KPC9zdmc+Cg=="},"./src/icons/fileColored.svg":function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+Cjxzdmcgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDMyIDY0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zOnNlcmlmPSJodHRwOi8vd3d3LnNlcmlmLmNvbS8iIHN0eWxlPSJmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6MjsiPgogICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMi45MDkwOSwwLDAsMi45MDkwOSwtMjAuMzYzNiwtMi45MDkwOSkiPgogICAgICAgIDxwYXRoIGQ9Ik0xNi41LDZMMTYuNSwxNy41QzE2LjUsMTkuNzEgMTQuNzEsMjEuNSAxMi41LDIxLjVDMTAuMjksMjEuNSA4LjUsMTkuNzEgOC41LDE3LjVMOC41LDVDOC41LDMuNjIgOS42MiwyLjUgMTEsMi41QzEyLjM4LDIuNSAxMy41LDMuNjIgMTMuNSw1TDEzLjUsMTUuNUMxMy41LDE2LjA1IDEzLjA1LDE2LjUgMTIuNSwxNi41QzExLjk1LDE2LjUgMTEuNSwxNi4wNSAxMS41LDE1LjVMMTEuNSw2TDEwLDZMMTAsMTUuNUMxMCwxNi44OCAxMS4xMiwxOCAxMi41LDE4QzEzLjg4LDE4IDE1LDE2Ljg4IDE1LDE1LjVMMTUsNUMxNSwyLjc5IDEzLjIxLDEgMTEsMUM4Ljc5LDEgNywyLjc5IDcsNUw3LDE3LjVDNywyMC41NCA5LjQ2LDIzIDEyLjUsMjNDMTUuNTQsMjMgMTgsMjAuNTQgMTgsMTcuNUwxOCw2TDE2LjUsNloiIHN0eWxlPSJmaWxsOnJnYig0MSw2NywxMjQpO2ZpbGwtcnVsZTpub256ZXJvOyIvPgogICAgPC9nPgo8L3N2Zz4K"},"./src/icons/imageColored.svg":function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+Cjxzdmcgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEwMCA4MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWw6c3BhY2U9InByZXNlcnZlIiB4bWxuczpzZXJpZj0iaHR0cDovL3d3dy5zZXJpZi5jb20vIiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjI7Ij4KICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDEuMTExMTEsMCwwLDEuMTI5MTEsLTYxLjExMTEsLTEwNi4zMDQpIj4KICAgICAgICA8cmVjdCB4PSI1NSIgeT0iOTQuMTQ4IiB3aWR0aD0iOTAiIGhlaWdodD0iNzAuODUyIiBzdHlsZT0iZmlsbDpyZ2IoMTcxLDI0MywyNTUpOyIvPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMS4xMzM3NywwLDAsMS4xMzM3NywtNTYuMDc2MSwtMTE3LjkyNikiPgogICAgICAgIDxjaXJjbGUgY3g9Ijc5LjA2IiBjeT0iMTIyLjc4NyIgcj0iMTEuMjEzIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LDE4NCwwKTsiLz4KICAgIDwvZz4KICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDEuMTAxNzYsMCwwLDEuMTAxNzYsLTU5Ljc1NSwtMTAxLjc5KSI+CiAgICAgICAgPHBhdGggZD0iTTE0NSwxMjcuMjFMMTQ1LDE2NUw3Ni4yMSwxNjVMMTI5LjUsMTExLjcxTDE0NSwxMjcuMjFaIiBzdHlsZT0iZmlsbDpyZ2IoMzgsMTg2LDMxKTsiLz4KICAgIDwvZz4KICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDEuMDkwOTYsMCwwLDEuMDkwOTYsLTYwLjAwMywtMTAwLjAwOSkiPgogICAgICAgIDxwYXRoIGQ9Ik0xMDkuOTY3LDE2NUw1NSwxNjVMNTUsMTQzLjY0MUw3MS44MDQsMTI2LjgzN0wxMDkuOTY3LDE2NVoiIHN0eWxlPSJmaWxsOnJnYigxMywxNTgsMTkpOyIvPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMS4xMTExMSwwLDAsMS4xMjkxMSwtNjEuMTExMSwtMTA2LjMwNCkiPgogICAgICAgIDxwYXRoIGQ9Ik0xNDUsMTY1TDU1LDE2NUw1NSw5NC4xNDhMMTQ1LDk0LjE0OEwxNDUsMTY1Wk01Ni44LDE2My4yMjlMMTQzLjIsMTYzLjIyOUwxNDMuMiw5NS45MTlMNTYuOCw5NS45MTlMNTYuOCwxNjMuMjI5WiIgc3R5bGU9ImZpbGw6cmdiKDAsNjIsNzIpO2ZpbGwtb3BhY2l0eTowLjI1OyIvPgogICAgPC9nPgo8L3N2Zz4K"},"./src/icons/video.svg":function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE2LjAuNCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIxMDBweCIgaGVpZ2h0PSI4MC44NTJweCIgdmlld0JveD0iLTQwIC0zMC40MjYgMTAwIDgwLjg1MiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAtNDAgLTMwLjQyNiAxMDAgODAuODUyIgoJIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8Zz4KCTxwb2x5Z29uIHBvaW50cz0iLTcuMjY0LC05LjkzMiAyNy4yNjYsMTAuMDAxIC03LjI2NCwyOS45MzUgCSIvPgoJPHBhdGggZD0iTTYwLDUwLjQyNkgtNDB2LTgwLjg1Mkg2MFY1MC40MjZ6IE0tMzUuNzQ2LDQ2LjE3Nmg5MS40OTh2LTcyLjM0OGgtOTEuNDk4VjQ2LjE3NnoiLz4KPC9nPgo8L3N2Zz4K"},"./src/index.ts":function(e,t,n){"use strict";n.r(t);var s=n("./src/oo.ts");n.d(t,"oo",(function(){return s}));var i=n("./src/util.ts");n.d(t,"util",(function(){return i}));var r=n("./src/model/DocumentFormat.ts");n.d(t,"documentFormat",(function(){return r}));var a=n("./src/Node.ts");n.d(t,"Node",(function(){return a.Node}));var o=n("./src/LeafNode.ts");n.d(t,"LeafNode",(function(){return o.LeafNode}));var l=n("./src/BranchNode.ts");n.d(t,"BranchNode",(function(){return l.BranchNode}));var c=n("./src/Range.ts");n.d(t,"Range",(function(){return c.Range}));var u=n("./src/Registry.ts");n.d(t,"Registry",(function(){return u.Registry}));var d=n("./src/Factory.ts");n.d(t,"Factory",(function(){return d.Factory}));var h=n("./src/Filibuster.ts");n.d(t,"Filibuster",(function(){return h.Filibuster}));var p=n("./src/Document.ts");n.d(t,"Document",(function(){return p.Document}));var f=n("./src/model/Model.ts");n.d(t,"Model",(function(){return f.Model}));var m=n("./src/model/ModelNodeFactory.ts");n.d(t,"ModelNodeFactory",(function(){return m.ModelNodeFactory})),n.d(t,"modelNodeFactory",(function(){return m.modelNodeFactory}));var v=n("./src/model/ModelRegistry.ts");n.d(t,"ModelRegistry",(function(){return v.ModelRegistry})),n.d(t,"modelRegistry",(function(){return v.modelRegistry}));var b=n("./src/model/AnnotationModelFactory.ts");n.d(t,"AnnotationModelFactory",(function(){return b.AnnotationModelFactory})),n.d(t,"annotationModelFactory",(function(){return b.annotationModelFactory}));var g=n("./src/model/SurfaceModel.ts");n.d(t,"SurfaceModel",(function(){return g.SurfaceModel}));var y=n("./src/model/IndexValueStore.ts");n.d(t,"IndexValueStore",(function(){return y.IndexValueStore}));var w=n("./src/model/LinearData.ts");n.d(t,"LinearData",(function(){return w.LinearData}));var _=n("./src/model/DocumentModel.ts");n.d(t,"DocumentModel",(function(){return _.DocumentModel})),n.d(t,"DocumentSlice",(function(){return _.DocumentSlice}));var k=n("./src/model/Converter.ts");n.d(t,"Converter",(function(){return k.Converter})),n.d(t,"converter",(function(){return k.converter}));var C=n("./src/model/Transaction.ts");n.d(t,"Transaction",(function(){return C.Transaction}));var x=n("./src/model/TransactionProcessor.ts");n.d(t,"TransactionProcessor",(function(){return x.TransactionProcessor}));var j=n("./src/model/AnnotationSet.ts");n.d(t,"AnnotationSet",(function(){return j.AnnotationSet}));var O=n("./src/view/ViewNodeFactory.ts");n.d(t,"ViewNodeFactory",(function(){return O.ViewNodeFactory})),n.d(t,"viewNodeFactory",(function(){return O.viewNodeFactory}));var S=n("./src/ui/DesktopTargetUi.ts");n.d(t,"DesktopTargetUi",(function(){return S.DesktopTargetUi}));var E=n("./src/ui/DebugBarUi.ts");n.d(t,"DebugBarUi",(function(){return E.DebugBarUi}));var T=n("./src/ui/ToolUiFactory.ts");n.d(t,"ToolUiFactoryBase",(function(){return T.ToolUiFactoryBase})),n.d(t,"SurfaceToolUiFactory",(function(){return T.SurfaceToolUiFactory})),n.d(t,"surfaceToolUiFactory",(function(){return T.surfaceToolUiFactory}));var I=n("./src/ui/ToolGroupUiFactory.ts");n.d(t,"ToolGroupUiFactory",(function(){return I.ToolGroupUiFactory})),n.d(t,"toolGroupUiFactory",(function(){return I.toolGroupUiFactory}));var D=n("./src/model/nodes/LeafModelNode.ts");n.d(t,"LeafModelNode",(function(){return D.LeafModelNode}));var P=n("./src/model/nodes/BranchModelNode.ts");n.d(t,"BranchModelNode",(function(){return P.BranchModelNode}));var A=n("./src/model/nodes/ContentBranchModelNode.ts");n.d(t,"ContentBranchModelNode",(function(){return A.ContentBranchModelNode}));var N=n("./src/model/nodes/DocumentModelNode.ts");n.d(t,"DocumentModelNode",(function(){return N.DocumentModelNode}));var R=n("./src/model/nodes/ParagraphModelNode.ts");n.d(t,"ParagraphModelNode",(function(){return R.ParagraphModelNode}));var M=n("./src/model/nodes/CalloutModelNode.ts");n.d(t,"CalloutModelNode",(function(){return M.CalloutModelNode}));var L=n("./src/model/nodes/HeadingModelNode.ts");n.d(t,"HeadingModelNode",(function(){return L.HeadingModelNode}));var F=n("./src/model/nodes/TextModelNode.ts");n.d(t,"TextModelNode",(function(){return F.TextModelNode}));var B=n("./src/model/nodes/ImageModelNode.ts");n.d(t,"ImageModelNode",(function(){return B.ImageModelNode}));var q=n("./src/model/nodes/FileModelNode.ts");n.d(t,"FileModelNode",(function(){return q.FileModelNode}));var $=n("./src/model/nodes/ListModelNode.ts");n.d(t,"ListModelNode",(function(){return $.ListModelNode}));var U=n("./src/model/nodes/ListItemModelNode.ts");n.d(t,"ListItemModelNode",(function(){return U.ListItemModelNode}));var z=n("./src/model/nodes/BlockquoteModelNode.ts");n.d(t,"BlockquoteModelNode",(function(){return z.BlockquoteModelNode}));var V=n("./src/model/nodes/CodeModelNode.ts");n.d(t,"CodeModelNode",(function(){return V.CodeModelNode}));var H=n("./src/model/nodes/HorizontalRuleModelNode.ts");n.d(t,"HorizontalRuleModelNode",(function(){return H.HorizontalRuleModelNode}));var W=n("./src/model/nodes/BreakModelNode.ts");n.d(t,"BreakModelNode",(function(){return W.BreakModelNode}));var Q=n("./src/model/nodes/VideoModelNode.ts");n.d(t,"VideoModelNode",(function(){return Q.VideoModelNode}));var K=n("./src/model/nodes/LabelModelNode.ts");n.d(t,"LabelModelNode",(function(){return K.LabelModelNode}));var Y=n("./src/model/nodes/SpanRefModelNode.ts");n.d(t,"SpanRefModelNode",(function(){return Y.SpanRefModelNode}));var G=n("./src/model/nodes/StackModelNode.ts");n.d(t,"StackModelNode",(function(){return G.StackModelNode}));var X=n("./src/model/nodes/StackItemModelNode.ts");n.d(t,"StackItemModelNode",(function(){return X.StackItemModelNode}));var J=n("./src/model/nodes/TableModelNode.ts");n.d(t,"TableModelNode",(function(){return J.TableModelNode}));var Z=n("./src/model/nodes/TableSectionModelNode.ts");n.d(t,"TableSectionModelNode",(function(){return Z.TableSectionModelNode}));var ee=n("./src/model/nodes/TableRowModelNode.ts");n.d(t,"TableRowModelNode",(function(){return ee.TableRowModelNode}));var te=n("./src/model/nodes/TableCellModelNode.ts");n.d(t,"TableCellModelNode",(function(){return te.TableCellModelNode}));var ne=n("./src/model/nodes/FocusableModelNode.ts");n.d(t,"FocusableModelNode",(function(){return ne.FocusableModelNode}));var se=n("./src/model/nodes/MentionModelNode.ts");n.d(t,"MentionModelNode",(function(){return se.MentionModelNode}));var ie=n("./src/model/annotations/BoldAnnotationModel.ts");n.d(t,"BoldAnnotationModel",(function(){return ie.BoldAnnotationModel}));var re=n("./src/model/annotations/ItalicAnnotationModel.ts");n.d(t,"ItalicAnnotationModel",(function(){return re.ItalicAnnotationModel}));var ae=n("./src/model/annotations/UnderlineAnnotationModel.ts");n.d(t,"UnderlineAnnotationModel",(function(){return ae.UnderlineAnnotationModel}));var oe=n("./src/model/annotations/CodeAnnotationModel.ts");n.d(t,"CodeAnnotationModel",(function(){return oe.CodeAnnotationModel}));var le=n("./src/model/annotations/StrikethroughAnnotationModel.ts");n.d(t,"StrikethroughAnnotationModel",(function(){return le.StrikethroughAnnotationModel}));var ce=n("./src/model/annotations/LinkAnnotationModel.ts");n.d(t,"LinkAnnotationModel",(function(){return ce.LinkAnnotationModel}));var ue=n("./src/model/annotations/SubscriptAnnotationModel.ts");n.d(t,"SubscriptAnnotationModel",(function(){return ue.SubscriptAnnotationModel}));var de=n("./src/model/annotations/SuperscriptAnnotationModel.ts");n.d(t,"SuperscriptAnnotationModel",(function(){return de.SuperscriptAnnotationModel}));var he=n("./src/model/annotations/SpanAnnotationModel.ts");n.d(t,"SpanAnnotationModel",(function(){return he.SpanAnnotationModel}));var pe=n("./src/model/selections/NullSelectionModel.ts");n.d(t,"NullSelectionModel",(function(){return pe.NullSelectionModel}));var fe=n("./src/model/selections/LinearSelectionModel.ts");n.d(t,"LinearSelectionModel",(function(){return fe.LinearSelectionModel}));var me=n("./src/model/selections/TableSelectionModel.ts");n.d(t,"TableSelectionModel",(function(){return me.TableSelectionModel}));var ve=n("./src/model/documentFormats/HtmlDocumentFormat.ts");n.d(t,"HtmlDocumentFormat",(function(){return ve.HtmlDocumentFormat}));var be=n("./src/model/documentFormats/MarkdownDocumentFormat.ts");n.d(t,"MarkdownDocumentFormat",(function(){return be.MarkdownDocumentFormat})),n("./src/model/formula/Functions.ts");var ge=n("./src/view/nodes/LeafViewNode.ts");n.d(t,"LeafViewNode",(function(){return ge.LeafViewNode}));var ye=n("./src/view/nodes/BranchViewNode.ts");n.d(t,"BranchViewNode",(function(){return ye.BranchViewNode}));var we=n("./src/view/nodes/ContentBranchViewNode.ts");n.d(t,"ContentBranchViewNode",(function(){return we.ContentBranchViewNode}));var _e=n("./src/view/nodes/DocumentViewNode.ts");n.d(t,"DocumentViewNode",(function(){return _e.DocumentViewNode}));var ke=n("./src/view/nodes/ParagraphViewNode.ts");n.d(t,"ParagraphViewNode",(function(){return ke.ParagraphViewNode}));var Ce=n("./src/view/nodes/CalloutViewNode.ts");n.d(t,"CalloutViewNode",(function(){return Ce.CalloutViewNode}));var xe=n("./src/view/nodes/HeadingViewNode.ts");n.d(t,"HeadingViewNode",(function(){return xe.HeadingViewNode}));var je=n("./src/view/nodes/TextViewNode.ts");n.d(t,"TextViewNode",(function(){return je.TextViewNode}));var Oe=n("./src/view/nodes/ImageViewNode.ts");n.d(t,"ImageViewNode",(function(){return Oe.ImageViewNode}));var Se=n("./src/view/nodes/FileViewNode.ts");n.d(t,"FileViewNode",(function(){return Se.FileViewNode}));var Ee=n("./src/view/nodes/ListViewNode.ts");n.d(t,"ListViewNode",(function(){return Ee.ListViewNode}));var Te=n("./src/view/nodes/ListItemViewNode.ts");n.d(t,"ListItemViewNode",(function(){return Te.ListItemViewNode}));var Ie=n("./src/view/nodes/BlockquoteViewNode.ts");n.d(t,"BlockquoteViewNode",(function(){return Ie.BlockquoteViewNode}));var De=n("./src/view/nodes/CodeViewNode.ts");n.d(t,"CodeViewNode",(function(){return De.CodeViewNode}));var Pe=n("./src/view/nodes/HorizontalRuleViewNode.ts");n.d(t,"HorizontalRuleViewNode",(function(){return Pe.HorizontalRuleViewNode}));var Ae=n("./src/view/nodes/BreakViewNode.ts");n.d(t,"BreakViewNode",(function(){return Ae.BreakViewNode}));var Ne=n("./src/view/nodes/VideoViewNode.ts");n.d(t,"VideoViewNode",(function(){return Ne.VideoViewNode}));var Re=n("./src/view/nodes/LabelViewNode.ts");n.d(t,"LabelViewNode",(function(){return Re.LabelViewNode}));var Me=n("./src/view/nodes/SpanRefViewNode.ts");n.d(t,"SpanRefViewNode",(function(){return Me.SpanRefViewNode}));var Le=n("./src/view/nodes/StackViewNode.ts");n.d(t,"StackViewNode",(function(){return Le.StackViewNode}));var Fe=n("./src/view/nodes/StackItemViewNode.ts");n.d(t,"StackItemViewNode",(function(){return Fe.StackItemViewNode}));var Be=n("./src/view/nodes/TableViewNode.ts");n.d(t,"TableViewNode",(function(){return Be.TableViewNode}));var qe=n("./src/view/nodes/TableSectionViewNode.ts");n.d(t,"TableSectionViewNode",(function(){return qe.TableSectionViewNode}));var $e=n("./src/view/nodes/TableRowViewNode.ts");n.d(t,"TableRowViewNode",(function(){return $e.TableRowViewNode}));var Ue=n("./src/view/nodes/TableCellViewNode.ts");n.d(t,"TableCellViewNode",(function(){return Ue.TableCellViewNode}));var ze=n("./src/view/nodes/FocusableViewNode.ts");n.d(t,"FocusableViewNode",(function(){return ze.FocusableViewNode}));var Ve=n("./src/view/nodes/MentionViewNode.ts");n.d(t,"MentionViewNode",(function(){return Ve.MentionViewNode}));var He=n("./src/view/annotations/BoldAnnotationView.ts");n.d(t,"BoldAnnotationView",(function(){return He.BoldAnnotationView}));var We=n("./src/view/annotations/ItalicAnnotationView.ts");n.d(t,"ItalicAnnotationView",(function(){return We.ItalicAnnotationView}));var Qe=n("./src/view/annotations/UnderlineAnnotationView.ts");n.d(t,"UnderlineAnnotationView",(function(){return Qe.UnderlineAnnotationView}));var Ke=n("./src/view/annotations/CodeAnnotationView.ts");n.d(t,"CodeAnnotationView",(function(){return Ke.CodeAnnotationView}));var Ye=n("./src/view/annotations/StrikethroughAnnotationView.ts");n.d(t,"StrikethroughAnnotationView",(function(){return Ye.StrikethroughAnnotationView}));var Ge=n("./src/view/annotations/LinkAnnotationView.ts");n.d(t,"LinkAnnotationView",(function(){return Ge.LinkAnnotationView}));var Xe=n("./src/view/annotations/SubscriptAnnotationView.ts");n.d(t,"SubscriptAnnotationView",(function(){return Xe.SubscriptAnnotationView}));var Je=n("./src/view/annotations/SuperscriptAnnotationView.ts");n.d(t,"SuperscriptAnnotationView",(function(){return Je.SuperscriptAnnotationView}));var Ze=n("./src/view/annotations/SpanAnnotationView.ts");n.d(t,"SpanAnnotationView",(function(){return Ze.SpanAnnotationView}));var et=n("./src/view/selections/NullSelectionView.ts");n.d(t,"NullSelectionView",(function(){return et.NullSelectionView}));var tt=n("./src/view/selections/LinearSelectionView.ts");n.d(t,"LinearSelectionView",(function(){return tt.LinearSelectionView}));var nt=n("./src/view/selections/TableSelectionView.ts");n.d(t,"TableSelectionView",(function(){return nt.TableSelectionView}));var st=n("./src/view/keydownhandlers/LinearDeleteKeyDownHandler.ts");n.d(t,"LinearDeleteKeyDownHandler",(function(){return st.LinearDeleteKeyDownHandler}));var it=n("./src/view/keydownhandlers/LinearEnterKeyDownHandler.ts");n.d(t,"LinearEnterKeyDownHandler",(function(){return it.LinearEnterKeyDownHandler}));var rt=n("./src/view/keydownhandlers/LinearArrowKeyDownHandler.ts");n.d(t,"LinearArrowKeyDownHandler",(function(){return rt.LinearArrowKeyDownHandler}));var at=n("./src/view/keydownhandlers/LinearEscapeKeyDownHandler.ts");n.d(t,"LinearEscapeKeyDownHandler",(function(){return at.LinearEscapeKeyDownHandler}));var ot=n("./src/view/keydownhandlers/LinearTabKeyDownHandler.ts");n.d(t,"LinearTabKeyDownHandler",(function(){return ot.LinearTabKeyDownHandler}));var lt=n("./src/view/keydownhandlers/TableDeleteKeyDownHandler.ts");n.d(t,"TableDeleteKeyDownHandler",(function(){return lt.TableDeleteKeyDownHandler}));var ct=n("./src/view/keydownhandlers/TableArrowKeyDownHandler.ts");n.d(t,"TableArrowKeyDownHandler",(function(){return ct.TableArrowKeyDownHandler}));var ut=n("./src/view/keydownhandlers/TableEnterKeyDownHandler.ts");n.d(t,"TableEnterKeyDownHandler",(function(){return ut.TableEnterKeyDownHandler}));var dt=n("./src/ui/SurfaceToolUi.ts");n.d(t,"SurfaceToolUi",(function(){return dt.SurfaceToolUi}));var ht=n("./src/ui/tools/AnnotationTools.ts");n.d(t,"AnnotationToolUi",(function(){return ht.AnnotationToolUi})),n.d(t,"BoldAnnotationToolUi",(function(){return ht.BoldAnnotationToolUi})),n.d(t,"ItalicAnnotationToolUi",(function(){return ht.ItalicAnnotationToolUi})),n.d(t,"UnderlineAnnotationToolUi",(function(){return ht.UnderlineAnnotationToolUi})),n.d(t,"CodeAnnotationToolUi",(function(){return ht.CodeAnnotationToolUi})),n.d(t,"StrikethroughAnnotationToolUi",(function(){return ht.StrikethroughAnnotationToolUi})),n.d(t,"SubscriptAnnotationToolUi",(function(){return ht.SubscriptAnnotationToolUi})),n.d(t,"SuperscriptAnnotationToolUi",(function(){return ht.SuperscriptAnnotationToolUi}));var pt=n("./src/ui/tools/HistoryTools.ts");n.d(t,"HistoryToolUi",(function(){return pt.HistoryToolUi})),n.d(t,"UndoHistoryToolUi",(function(){return pt.UndoHistoryToolUi})),n.d(t,"RedoHistoryToolUi",(function(){return pt.RedoHistoryToolUi}));var ft=n("./src/ui/tools/FormatTools.ts");n.d(t,"FormatToolUi",(function(){return ft.FormatToolUi})),n.d(t,"ParagraphFormatToolUi",(function(){return ft.ParagraphFormatToolUi})),n.d(t,"CalloutSuccessFormatToolUi",(function(){return ft.CalloutSuccessFormatToolUi})),n.d(t,"CalloutErrorFormatToolUi",(function(){return ft.CalloutErrorFormatToolUi})),n.d(t,"CalloutWarningFormatToolUi",(function(){return ft.CalloutWarningFormatToolUi})),n.d(t,"CalloutInfoFormatToolUi",(function(){return ft.CalloutInfoFormatToolUi})),n.d(t,"Heading1FormatToolUi",(function(){return ft.Heading1FormatToolUi})),n.d(t,"Heading2FormatToolUi",(function(){return ft.Heading2FormatToolUi})),n.d(t,"CodeFormatToolUi",(function(){return ft.CodeFormatToolUi})),n.d(t,"BlockquoteFormatToolUi",(function(){return ft.BlockquoteFormatToolUi}));var mt=n("./src/ui/tools/ListTools.ts");n.d(t,"ListToolUi",(function(){return mt.ListToolUi})),n.d(t,"BulletListToolUi",(function(){return mt.BulletListToolUi})),n.d(t,"NumberedListToolUi",(function(){return mt.NumberedListToolUi}));var vt=n("./src/ui/tools/InsertBlockTools.ts");n.d(t,"InsertImageTool",(function(){return vt.InsertImageTool})),n.d(t,"InsertVideoTool",(function(){return vt.InsertVideoTool})),n.d(t,"InsertFileTool",(function(){return vt.InsertFileTool}));var bt=n("./src/ui/tools/WindowTools.ts");n.d(t,"WindowToolUi",(function(){return bt.WindowToolUi})),n.d(t,"LinkInspectorToolUi",(function(){return bt.LinkInspectorToolUi})),n.d(t,"InsertLabelTool",(function(){return bt.InsertLabelTool})),n.d(t,"SpanInspectorToolUi",(function(){return bt.SpanInspectorToolUi})),n.d(t,"InsertSpanRefTool",(function(){return bt.InsertSpanRefTool}));var gt=n("./src/ui/contextItems/LinkContextItemUi.ts");n.d(t,"LinkContextItemUi",(function(){return gt.LinkContextItemUi}));var yt=n("./src/ui/contextItems/LabelContextItemUi.ts");n.d(t,"LabelContextItemUi",(function(){return yt.LabelContextItemUi}));var wt=n("./src/ui/contextItems/SpanContextItemUi.ts");n.d(t,"SpanContextItemUi",(function(){return wt.SpanContextItemUi}));var _t=n("./src/ui/contextItems/SpanRefContextItemUi.ts");n.d(t,"SpanRefContextItemUi",(function(){return _t.SpanRefContextItemUi}));var kt=n("./src/ui/contextItems/AlignableContextItemUi.ts");n.d(t,"AlignableContextItemUi",(function(){return kt.AlignableContextItemUi}));var Ct=n("./src/ui/commands/InsertBranchNodeCommand.ts");n.d(t,"InsertBranchNodeCommand",(function(){return Ct.InsertBranchNodeCommand}));var xt=n("./src/ui/Command.ts");n.d(t,"Command",(function(){return xt.Command}));var jt=n("./src/ui/CommandRegistry.ts");n.d(t,"CommandRegistry",(function(){return jt.CommandRegistry})),n.d(t,"commandRegistry",(function(){return jt.commandRegistry}))},"./src/log.ts":function(e,t,n){"use strict";function s(e){var t="background-color: gold; font-weight: bold;";return function(){for(var n,s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];return(n=console).log.apply(n,["%c%s%c %s",t,e,""].concat(i))}}n.r(t),n.d(t,"makeLogger",(function(){return s})),n.d(t,"log",(function(){return i})),n("core-js/modules/es.array.concat");var i=s("AMBER")},"./src/media.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"isSmall",(function(){return s})),n.d(t,"isMedium",(function(){return i})),n.d(t,"isLarge",(function(){return r}));var s,i,r,a=window.matchMedia("screen and (max-width: ".concat(736,"px)")),o=window.matchMedia("screen and (max-width: ".concat(960,"px)")),l=window.matchMedia("screen and (max-width: ".concat(1312,"px)"));a.addListener((function(e){return s=e.matches})),o.addListener((function(e){return i=e.matches})),l.addListener((function(e){return r=e.matches})),s=a.matches,i=o.matches,r=l.matches},"./src/model/AnnotationModelFactory.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"AnnotationModelFactory",(function(){return o})),n.d(t,"annotationModelFactory",(function(){return l}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(r.default)(t).apply(this,arguments))}return Object(a.default)(t,e),t}(n("./src/model/ModelFactory.ts").ModelFactory),l=new o},"./src/model/AnnotationSet.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"AnnotationSet",(function(){return c})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.filter"),n("core-js/modules/es.array.index-of"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.slice"),n("core-js/modules/es.array.splice"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),i=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(i),a=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),o=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),l=n("./src/util.ts"),c=function(){function e(t,n){Object(a.default)(this,e),this.store=t,this.storeIndices=n||[]}return Object(o.default)(e,[{key:"annotations",value:r.a.mark((function e(){var t,n,s,i,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,n=!1,s=void 0,e.prev=3,i=this.storeIndices[Symbol.iterator]();case 5:if(t=(a=i.next()).done){e.next=12;break}return o=a.value,e.next=9,this.store.value(o);case 9:t=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),n=!0,s=e.t0;case 18:e.prev=18,e.prev=19,t||null==i.return||i.return();case 21:if(e.prev=21,!n){e.next=24;break}throw s;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}}),e,this,[[3,14,18,26],[19,,21,25]])}))},{key:"indices",value:r.a.mark((function e(){var t,n,s,i,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,n=!1,s=void 0,e.prev=3,i=this.storeIndices[Symbol.iterator]();case 5:if(t=(a=i.next()).done){e.next=12;break}return o=a.value,e.next=9,o;case 9:t=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),n=!0,s=e.t0;case 18:e.prev=18,e.prev=19,t||null==i.return||i.return();case 21:if(e.prev=21,!n){e.next=24;break}throw s;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}}),e,this,[[3,14,18,26],[19,,21,25]])}))},{key:"getLength",value:function(){return this.storeIndices.length}},{key:"getIndex",value:function(e){return this.storeIndices[e]}},{key:"get",value:function(e){return this.store.value(this.storeIndices[e])}},{key:"getStore",value:function(){return this.store}},{key:"getIndices",value:function(){return this.storeIndices}},{key:"getAnnotations",value:function(){return Object(s.default)(this.annotations())}},{key:"clone",value:function(){return new e(this.store,this.storeIndices.slice())}},{key:"isEmpty",value:function(){return 0===this.storeIndices.length}},{key:"offsetOfIndex",value:function(e){return this.storeIndices.indexOf(e)}},{key:"offsetOf",value:function(e){return this.offsetOfIndex(this.store.indexOfHash(l.hashObject(e)))}},{key:"removeAt",value:function(e){this.storeIndices.splice(e,1)}},{key:"removeIndex",value:function(e){var t=this.storeIndices.indexOf(e);-1!==t&&this.storeIndices.splice(t,1)}},{key:"removeSet",value:function(e){this.storeIndices=l.arrayDifference(this.storeIndices,e.storeIndices)}},{key:"remove",value:function(e){var t=this.offsetOf(e);-1!==t&&this.storeIndices.splice(t,1)}},{key:"clear",value:function(){this.storeIndices.length=0}},{key:"push",value:function(e){this.pushIndex(this.store.index(e))}},{key:"pushIndex",value:function(e){this.storeIndices.push(e)}},{key:"add",value:function(e,t){var n=this.store.index(e);void 0===t?t=this.storeIndices.length:t<0&&(t+=this.storeIndices.length),this.containsIndex(n)||(t>=this.storeIndices.length?this.storeIndices.push(n):this.storeIndices.splice(t,0,n))}},{key:"addSet",value:function(e,t){void 0===t&&(t=this.storeIndices.length),this.storeIndices=l.arrayUnion(this.storeIndices.slice(0,t),e.storeIndices,this.storeIndices.slice(t))}},{key:"filter",value:function(t){var n=new e(this.store),s=!0,i=!1,r=void 0;try{for(var a,o=this.storeIndices[Symbol.iterator]();!(s=(a=o.next()).done);s=!0){var l=a.value;t(this.store.value(l))&&n.storeIndices.push(l)}}catch(c){i=!0,r=c}finally{try{s||null==o.return||o.return()}finally{if(i)throw r}}return n}},{key:"any",value:function(e){var t=!0,n=!1,s=void 0;try{for(var i,r=this.annotations()[Symbol.iterator]();!(t=(i=r.next()).done);t=!0)if(e(i.value))return!0}catch(a){n=!0,s=a}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}return!1}},{key:"contains",value:function(e){return-1!==this.offsetOf(e)}},{key:"containsAnyOf",value:function(e){var t=!0,n=!1,s=void 0;try{for(var i,r=e.storeIndices[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;if(-1!==this.storeIndices.indexOf(a))return!0}}catch(o){n=!0,s=o}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}return!1}},{key:"containsAllOf",value:function(e){var t=!0,n=!1,s=void 0;try{for(var i,r=e.storeIndices[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;if(-1===this.storeIndices.indexOf(a))return!1}}catch(o){n=!0,s=o}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}return!0}},{key:"containsIndex",value:function(e){return-1!==this.storeIndices.indexOf(e)}},{key:"containsAnnotationWithId",value:function(e){return this.any((function(t){return t.constructor.id===e}))}},{key:"containsComparable",value:function(e){return this.any((function(t){return e.compareTo(t)}))}},{key:"containsComparableForSerialization",value:function(e){return this.any((function(t){return e.compareToForSerialization(t)}))}},{key:"getComparable",value:function(e){var t=!0,n=!1,s=void 0;try{for(var i,r=this.storeIndices[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value,o=this.store.value(a);if(o.compareTo(e))return o}}catch(l){n=!0,s=l}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}return null}},{key:"getComparableAnnotationsFromSet",value:function(e){return this.filter((function(t){return e.containsComparable(t)}))}},{key:"getAnnotationsById",value:function(e){return this.filter((function(t){return t.constructor.id===e}))}},{key:"equalsInOrder",value:function(e){return l.compare(this.storeIndices,e.storeIndices)}},{key:"compareTo",value:function(e){if(this.storeIndices.length!==e.storeIndices.length)return!1;var t=!0,n=!1,s=void 0;try{for(var i,r=this.getAnnotations()[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;if(!e.containsComparable(a))return!1}}catch(o){n=!0,s=o}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}return!0}}]),e}()},"./src/model/Converter.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"Converter",(function(){return g})),n.d(t,"converter",(function(){return y})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.concat"),n("core-js/modules/es.array.from"),n("core-js/modules/es.array.index-of"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.map"),n("core-js/modules/es.array.slice"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/es.string.match"),n("core-js/modules/es.string.replace"),n("core-js/modules/es.string.split"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./src/util.ts"),o=n("./src/log.ts"),l=n("./src/model/DocumentModel.ts"),c=n("./src/model/LinearData.ts"),u=n("./src/model/IndexValueStore.ts"),d=n("./src/model/ModelRegistry.ts"),h=n("./src/model/ModelNodeFactory.ts"),p=n("./src/model/AnnotationModelFactory.ts"),f=n("./src/model/nodes/ModelNode.ts"),m=n("./src/model/annotations/AnnotationModel.ts"),v=n("./src/model/AnnotationSet.ts"),b=Object(o.makeLogger)("Converter"),g=function(){function e(t,n,s){Object(i.default)(this,e),this.modelRegistry=t,this.modelNodeFactory=n,this.annotationModelFactory=s}return Object(r.default)(e,[{key:"getModelFromDom",value:function(e){this.contextStack=[],this.store=new u.IndexValueStore;var t=new c.LinearData(this.store,this.getDataFromDomSubtree(e.firstChild));return this.contextStack=null,this.store=null,new l.DocumentModel(t,e)}},{key:"getDataFromDomClean",value:function(e,t,n){var s=this.contextStack;this.contextStack=[];var i=this.getDataFromDomSubtree(e,t,n);return this.contextStack=s,i}},{key:"getDataFromDomSubtree",value:function(t,n,i){var r=[],a=this.contextStack[this.contextStack.length-1],o=null,l={annotations:i||(a?a.annotations.clone():new v.AnnotationSet(this.store)),branchType:n?n.type:a?a.branchType:"document",canCloseWrapper:!1,branchHasContent:!1,inWrapper:!1,expectingContent:!1,originallyExpectingContent:!1};l.branchHasContent=this.modelNodeFactory.canNodeContainContent(l.branchType),l.originallyExpectingContent=l.branchHasContent||!l.annotations.isEmpty(),l.expectingContent=l.originallyExpectingContent,l.inWrapper=!!a&&a.inWrapper,this.contextStack.push(l);var c=function(){o={type:"paragraph"},r.push(o),l.inWrapper=!0,l.canCloseWrapper=!0,l.expectingContent=!0},u=function(){r.push({type:"/paragraph"}),o=null,l.inWrapper=!1,l.canCloseWrapper=!1,l.expectingContent=l.originallyExpectingContent};n&&r.push(n);for(var d=0;d<t.childNodes.length;d++){var h=t.childNodes[d];switch(h.nodeType){case Node.ELEMENT_NODE:var p=this.modelRegistry.matchElement(h),f=this.modelRegistry.lookup(p);if(!f){b("Ignoring unknown DOM node: ".concat(h.nodeName));break}var g=[h],y=this.createDataElements(f,g);if(!y){b("Ignoring unknown DOM node: ".concat(h.nodeName));break}if(!y.length){b("Model '".concat(p,"' produced no data elements for DOM node '").concat(h.nodeName,"'"));break}if((f=this.modelRegistry.lookup(y[0].type)).prototype instanceof m.AnnotationModel){var w=this.annotationModelFactory.createFromElement(y[0]);l.inWrapper||l.expectingContent||c();var _=l.annotations.clone();_.push(w),r.push.apply(r,Object(s.default)(this.getDataFromDomSubtree(h,void 0,_)))}else{var k=this.modelNodeFactory.isNodeContent(y[0].type);if(!l.expectingContent&&k)c();else if(l.expectingContent&&!k){if(!l.inWrapper||!l.canCloseWrapper){b("Was expecting content but found '".concat(p,"' instead"));break}u()}k&&!l.annotations.isEmpty()&&(y[0].annotations=l.annotations.getIndices().slice()),1===y.length&&1===g.length&&this.modelNodeFactory.canNodeHaveChildren(y[0].type)&&!this.modelNodeFactory.handlesOwnChildren(y[0].type)?r.push.apply(r,Object(s.default)(this.getDataFromDomSubtree(h,y[0]))):(1===y.length&&y.push({type:"/"+y[0].type}),r.push.apply(r,Object(s.default)(y))),d+=g.length-1}break;case Node.TEXT_NODE:var C=h.data;if(!C){b("Ignoring empty text node");break}l.originallyExpectingContent||l.inWrapper||c(),r.push.apply(r,Object(s.default)(e.getDataContentFromText(C,l.annotations)))}}return l.inWrapper&&l.canCloseWrapper&&(u(),l.inWrapper=!0),"paragraph"===l.branchType||!n||r[r.length-1]!==n||l.inWrapper||this.modelNodeFactory.canNodeContainContent(l.branchType)||this.modelNodeFactory.isNodeContent(l.branchType)||!this.isValidChildNodeType("paragraph")||r.push({type:"paragraph"},{type:"/paragraph"}),n&&r.push({type:"/"+n.type}),"document"!==l.branchType||r.length||i||r.push({type:"paragraph"},{type:"/paragraph"}),this.contextStack.pop(),r}},{key:"getDomElementsFromDataElement",value:function(t,n,s){var i=t[0],r=d.modelRegistry.lookup(i.type);if(!r)throw new Error("Attempting to convert unknown data element type ".concat(i.type));var o=r.toDomElements(t,n,this);if(!(o||r.prototype instanceof m.AnnotationModel))throw new Error("toDomElements() failed to return an array when converting element of type ".concat(i.type));return i.originalDomNodes&&!a.compareArrays(o,i.originalDomNodes,(function(e,t){return e.isEqualNode(t)}))&&e.renderAttributeList(i.originalDomNodes,o,r.preserveHtmlAttributes,!1,!(r.prototype instanceof f.ModelNode)||!this.modelNodeFactory.canNodeHaveChildren(i.type)||this.modelNodeFactory.handlesOwnChildren(i.type)),o}},{key:"getDomSubtreeFromModel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.store=e.store,this.forClipboard=n;var s=e.data.slice(),i=this.getDomSubtreeFromData(s,t);return this.store=null,this.forClipboard=null,i}},{key:"getDomSubtreeFromData",value:function(t,n){for(var i,r,a,o=this,l=n.createDocumentFragment(),u=l,d=new v.AnnotationSet(this.store),p=function(){i.length>0&&(r.push(n.createTextNode(i)),i="")},f=function(){p(),r=[],a.push(r)},m=function(e){p();var t=a.pop();r=a[a.length-1];for(var s,i=t[0],l=(e.element.originalDomNodes||[])[0]&&e.element.originalDomNodes[0].textContent||"",c="",u="";i&&i.nodeType===Node.TEXT_NODE&&(s=i.data.match(/^\s+/))&&!l.match(/^\s/)&&(c+=s[0],i.deleteData(0,s[0].length),0===i.data.length);)t.shift(),i=t[0];for(var d,h=t[t.length-1];h&&h.nodeType===Node.TEXT_NODE&&(s=h.data.match(/\s+$/))&&!l.match(/\s$/)&&(u=s[0]+u,h.deleteData(h.data.length-s[0].length,s[0].length),0===h.data.length);)t.pop(),h=t[t.length-1];t.length&&(d=o.getDomElementsFromDataElement([e.element],n,t)[0]),c&&r.push(n.createTextNode(c));var f=!0,m=!1,v=void 0;try{for(var b,g=t[Symbol.iterator]();!(f=(b=g.next()).done);f=!0){var y=b.value;d.appendChild(y)}}catch(w){m=!0,v=w}finally{try{f||null==g.return||g.return()}finally{if(m)throw v}}d&&r.push(d),u&&r.push(n.createTextNode(u))},b=function(e){var n,s;for(n=e+1,s=1;n<t.length&&s>0;n++)t[n].type&&(s+="/"===t[n].type[0]?-1:1);if(0!==s)throw new Error("Unbalanced data: ".concat(s," element(s) left open"));return n},g=function(e){return h.modelNodeFactory.lookup(t[e].type)&&h.modelNodeFactory.handlesOwnChildren(t[e].type)?t.slice(e,b(e)):t[e]},y=0;y<t.length;y++)if("string"==typeof t[y]){for(i="";"string"==typeof t[y];)i+=t[y++];y--,i.length>0&&u.appendChild(n.createTextNode(i))}else if(Array.isArray(t[y])||t[y].annotations&&this.modelNodeFactory.isNodeContent(t[y].type)){for(i="",a=[r=[]];void 0!==t[y]&&(Array.isArray(t[y])||t[y].annotations&&this.modelNodeFactory.isNodeContent(t[y].type));){var w=new v.AnnotationSet(this.store,t[y].annotations||t[y][1]);if(e.openAndCloseAnnotations(d,w,f,m),void 0===t[y].annotations)i+=t[y][0];else{var _;p();var k=g(y),C=Array.isArray(k)?k:[k],x=this.getDomElementsFromDataElement(C,n);(_=r).push.apply(_,Object(s.default)(x)),Array.isArray(k)?y+=k.length-1:y++}y++}y--,p(),e.openAndCloseAnnotations(d,new v.AnnotationSet(this.store),f,m);var j=!0,O=!1,S=void 0;try{for(var E,T=r[Symbol.iterator]();!(j=(E=T.next()).done);j=!0){var I=E.value;u.appendChild(I)}}catch($){O=!0,S=$}finally{try{j||null==T.return||T.return()}finally{if(O)throw S}}}else if(void 0!==t[y].type){var D=t[y];if(c.LinearData.isCloseElementData(D))u=u.parentNode;else{var P=g(y),A=Array.isArray(P)?P:[P],N=this.getDomElementsFromDataElement(A,n);if(N&&!N.length){y=b(y)-1;continue}if(N){var R=!0,M=!1,L=void 0;try{for(var F,B=N[Symbol.iterator]();!(R=(F=B.next()).done);R=!0){var q=F.value;u.appendChild(q)}}catch($){M=!0,L=$}finally{try{R||null==B.return||B.return()}finally{if(M)throw L}}u=N[0]}Array.isArray(P)&&(y+=P.length-2)}}return l.normalize(),l}},{key:"createDataElements",value:function(e,t){var n=e.toDataElements(t,this);return n?(n.length&&(n[0].originalDomNodes=t),n):null}},{key:"getCurrentContext",value:function(){return this.contextStack&&this.contextStack[this.contextStack.length-1]}},{key:"isValidChildNodeType",value:function(e){var t=this.getCurrentContext();if(!t)return null;var n=this.modelNodeFactory.getChildNodeTypes(t.branchType);return!n||-1!==n.indexOf(e)}}],[{key:"getDocumentFromPlaintext",value:function(e){var t=document.implementation.createDocument(null,"",null),n=t.createElement("document");n.setAttribute("version","2.0"),t.appendChild(n);var s=e.replace("\r","").split(/\n\n/),i=!0,r=!1,a=void 0;try{for(var o,l=s[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){for(var c=o.value,u=t.createElement("paragraph"),d=c.split("\n"),h=0;h<d.length;h++)d[h]&&u.appendChild(t.createTextNode(d[h])),h!==d.length-1&&u.appendChild(t.createElement("break"));n.appendChild(u)}}catch(p){r=!0,a=p}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}return t}},{key:"getDataContentFromText",value:function(e,t){var n=e.split("");return!t||t.isEmpty()?n:n.map((function(e){return[e,t.getIndices().slice()]}))}},{key:"openAndCloseAnnotations",value:function(e,t,n,s){for(var i=t.clone(),r=0;r<e.getLength();r++){var a=e.getIndex(r);if(!i.containsIndex(a)&&!i.containsComparableForSerialization(e.get(r))){for(var o=e.getLength()-1;o>=r;o--)s(e.get(o)),e.removeAt(o);break}i.removeIndex(a)}for(var l=e.clone(),c=0;c<t.getLength();c++){var u=t.getIndex(c);l.containsIndex(u)||l.containsComparableForSerialization(t.get(c))?l.removeIndex(u):(n(t.get(c)),e.pushIndex(u))}}},{key:"renderAttributeList",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"!=typeof n){var r=n;n=function(e){return r}}for(var a=0;a<e.length;a++)if(t[a]){var o=e[a].attributes;if(o){for(var l=0;l<o.length;l++)if(!t[a].hasAttribute(o[l].name)&&n(o[l].name)){var c=void 0;c=s&&-1!==this.computedAttributes.indexOf(o[l].name)?e[a].getAttribute(o[l].name):o[l].value,t[a].setAttribute(o[l].name,c)}i&&e[a].children.length>0&&this.renderAttributeList(Array.from(e[a].children),Array.from(t[a].children),n,s,!0)}}}}]),e}();g.computedAttributes=["href","src"];var y=new g(d.modelRegistry,h.modelNodeFactory,p.annotationModelFactory)},"./src/model/DataString.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"DataString",(function(){return r})),n("core-js/modules/es.array.concat"),n("core-js/modules/es.array.slice"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.regexp.to-string"),n("core-js/modules/es.string.match"),n("core-js/modules/es.string.split");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=function(){function e(t){Object(s.default)(this,e),this.data=t}return Object(i.default)(e,[{key:"read",value:function(e){var t=this.data[e];if(void 0!==t){if(Array.isArray(t))return t[0];if("string"==typeof t)return t}return null}},{key:"moveBreakOffset",value:function(e,t){for(var n=1===e?0:-1,s=t;null!==this.read(s+n)&&(s+=e,!this.isBreak(s)););return s}},{key:"isBreak",value:function(e){if(null===this.read(e-1)||null===this.read(e))return!0;if(this.read(e-1).match(/[\uD800-\uDBFF]/)&&this.read(e).match(/[\uDC00-\uDFFF]/))return!1;var t=this.read(e-1),n=this.read(e);return!("\r"===t&&"\n"===n||"\r"!==t&&"\n"!==t&&"\r"!==n&&"\n"!==n&&t.match(/[a-z]/i)&&n.match(/[a-z]/i))}}],[{key:"uEsc",value:function(e){return"\\u".concat((e+65536).toString(16).slice(-4))}},{key:"codeUnitRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e===t)return this.uEsc(e);var s="".concat(this.uEsc(e),"-").concat(this.uEsc(t));return n?"[".concat(s,"]"):s}},{key:"splitCharacters",value:function(e){return e.split(/(?![\uDC00-\uDFFF])/g)}}]),e}();r.wordbreakProperties={DoubleQuote:[34],SingleQuote:[39],CR:[13],LF:[10],Newline:[11,12,133,8232,8233],Numeric:[[48,57],[1632,1641],1643,[1776,1785],[1984,1993],[2406,2415],[2534,2543],[2662,2671],[2790,2799],[2918,2927],[3046,3055],[3174,3183],[3302,3311],[3430,3439],[3558,3567],[3664,3673],[3792,3801],[3872,3881],[4160,4169],[4240,4249],[6112,6121],[6160,6169],[6470,6479],[6608,6617],[6784,6793],[6800,6809],[6992,7001],[7088,7097],[7232,7241],[7248,7257],[42528,42537],[43216,43225],[43264,43273],[43472,43481],[43504,43513],[43600,43609],[44016,44025],[66720,66729],[69734,69743],[69872,69881],[69942,69951],[70096,70105],[70384,70393],[70864,70873],[71248,71257],[71360,71369],[71472,71481],[71904,71913],[92768,92777],[93008,93017],[120782,120831]]}},"./src/model/DocumentBuilder.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"DocumentBuilder",(function(){return r}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=function(){function e(){Object(s.default)(this,e),this.document={type:"document",children:[]},this.branchStack=[],this.branch=this.document,this.contentBranchStack=[],this.contentBranch=null,this.blockquoteLevel=0}return Object(i.default)(e,[{key:"appendText",value:function(e){if(e){var t=this.ensureContentBranch(),n=t.children[t.children.length-1];n&&"text"===n.type?n.value+=e:t.children.push({type:"text",value:e})}}},{key:"appendBreak",value:function(){this.ensureContentBranch().children.push({type:"break"})}},{key:"appendParagraph",value:function(){var e=this.applyBlockquote()||{type:"paragraph",children:[]};this.branch.children.push(e),this.contentBranch=e}},{key:"appendHeading",value:function(e){var t=this.applyBlockquote()||{type:"heading",level:e,children:[]};this.branch.children.push(t),this.contentBranch=t}},{key:"appendCode",value:function(){var e={type:"code",children:[]};this.branch.children.push(e),this.contentBranch=e}},{key:"appendList",value:function(e){for(;"document"!==this.branch.type&&"listItem"!==this.branch.type&&"list"!==this.branch.type;)this.popBranch();"list"===this.branch.type&&this.appendListItem(),this.pushBranch({type:"list",style:e,children:[]})}},{key:"appendListItem",value:function(){this.ensureList(),this.pushBranch({type:"listItem",children:[]})}},{key:"pushBlockquote",value:function(){this.blockquoteLevel++,this.endContentBranch()}},{key:"popBlockquote",value:function(){this.blockquoteLevel--,this.endContentBranch()}},{key:"applyBlockquote",value:function(){return this.blockquoteLevel>0?{type:"blockquote",children:[]}:null}},{key:"pushBranch",value:function(e){this.branch.children.push(e),this.branchStack.push(this.branch),this.branch=e,this.endContentBranch()}},{key:"popBranch",value:function(){this.branch=this.branchStack.pop(),this.endContentBranch()}},{key:"pushBasicAnnotation",value:function(e){this.pushAnnotation({type:"annotation",annotation:e,children:[]})}},{key:"pushLinkAnnotation",value:function(e){this.pushAnnotation({type:"annotation",annotation:"link",url:e,children:[]})}},{key:"pushAnnotation",value:function(e){var t=this.ensureContentBranch();t.children.push(e),this.contentBranchStack.push(t),this.contentBranch=e}},{key:"popAnnotation",value:function(){this.contentBranch=this.contentBranchStack.pop()}},{key:"endList",value:function(){for(;"list"===this.branch.type;)this.popBranch()}},{key:"endListItem",value:function(){for(;"listItem"===this.branch.type;)this.popBranch()}},{key:"ensureList",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unordered";"document"!==this.branch.type&&"list"!==this.branch.type;)this.popBranch();if("list"===this.branch.type)return this.branch;var t={type:"list",style:e,children:[]};return this.pushBranch(t),t}},{key:"ensureContentBranch",value:function(){return this.contentBranch||this.appendParagraph(),this.contentBranch}},{key:"endContentBranch",value:function(){this.contentBranch=null,this.contentBranchStack=[]}}]),e}()},"./src/model/DocumentFormat.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"documentToXml",(function(){return a})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.regexp.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=function(){function e(){Object(s.default)(this,e)}return Object(i.default)(e,[{key:"render",value:function(e){this.xmlDoc=document.implementation.createDocument(null,"document",null),this.xmlDoc.documentElement.setAttribute("version","2.0"),this.current=this.xmlDoc.documentElement;var t=!0,n=!1,s=void 0;try{for(var i,r=e.children[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;this.renderNode(a)}}catch(o){n=!0,s=o}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}return this.xmlDoc}},{key:"renderNode",value:function(e){switch(e.type){case"paragraph":this.renderParagraph(e);break;case"heading":this.renderHeading(e);break;case"blockquote":this.renderBlockquote(e);break;case"code":this.renderCode(e);break;case"list":this.renderList(e);break;case"listItem":this.renderListItem(e);break;case"text":this.renderText(e);break;case"break":this.renderBreak(e);break;case"annotation":this.renderAnnotation(e)}}},{key:"renderParagraph",value:function(e){var t=this.xmlDoc.createElement("paragraph");this.current.appendChild(t),this.current=t;var n=!0,s=!1,i=void 0;try{for(var r,a=e.children[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value;this.renderNode(o)}}catch(l){s=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}this.current=this.current.parentElement}},{key:"renderHeading",value:function(e){var t=this.xmlDoc.createElement("heading");t.setAttribute("level",e.level.toString()),this.current.appendChild(t),this.current=t;var n=!0,s=!1,i=void 0;try{for(var r,a=e.children[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value;this.renderNode(o)}}catch(l){s=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}this.current=this.current.parentElement}},{key:"renderBlockquote",value:function(e){var t=this.xmlDoc.createElement("blockquote");this.current.appendChild(t),this.current=t;var n=!0,s=!1,i=void 0;try{for(var r,a=e.children[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value;this.renderNode(o)}}catch(l){s=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}this.current=this.current.parentElement}},{key:"renderCode",value:function(e){var t=this.xmlDoc.createElement("pre");this.current.appendChild(t),this.current=t;var n=!0,s=!1,i=void 0;try{for(var r,a=e.children[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value;this.renderNode(o)}}catch(l){s=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}this.current=this.current.parentElement}},{key:"renderList",value:function(e){var t=this.xmlDoc.createElement("list");t.setAttribute("style",e.style),this.current.appendChild(t),this.current=t;var n=!0,s=!1,i=void 0;try{for(var r,a=e.children[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value;this.renderNode(o)}}catch(l){s=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}this.current=this.current.parentElement}},{key:"renderListItem",value:function(e){var t=this.xmlDoc.createElement("list-item");this.current.appendChild(t),this.current=t;var n=!0,s=!1,i=void 0;try{for(var r,a=e.children[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value;this.renderNode(o)}}catch(l){s=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}this.current=this.current.parentElement}},{key:"renderText",value:function(e){this.current.appendChild(this.xmlDoc.createTextNode(e.value))}},{key:"renderBreak",value:function(e){this.current.appendChild(this.xmlDoc.createElement("break"))}},{key:"renderAnnotation",value:function(e){var t;"link"===e.annotation?(t=this.xmlDoc.createElement("link")).setAttribute("href",e.url):t=this.xmlDoc.createElement(e.annotation),this.current.appendChild(t),this.current=t;var n=!0,s=!1,i=void 0;try{for(var r,a=e.children[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value;this.renderNode(o)}}catch(l){s=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}this.current=this.current.parentElement}}]),e}();function a(e){var t=(new r).render(e);return(new XMLSerializer).serializeToString(t)}},"./src/model/DocumentModel.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"DocumentModel",(function(){return k})),n.d(t,"DocumentSlice",(function(){return C})),n("core-js/modules/es.array.concat"),n("core-js/modules/es.array.index-of"),n("core-js/modules/es.array.reverse"),n("core-js/modules/es.array.slice"),n("core-js/modules/es.array.splice");var s=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=n("./node_modules/@babel/runtime/helpers/esm/get.js"),u=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),d=n("./src/Document.ts"),h=n("./src/model/LinearData.ts"),p=n("./src/model/TransactionProcessor.ts"),f=n("./src/model/DataString.ts"),m=n("./src/model/AnnotationSet.ts"),v=n("./src/model/ModelNodeFactory.ts"),b=n("./src/model/nodes/DocumentModelNode.ts"),g=n("./src/model/nodes/TextModelNode.ts"),y=n("./src/model/selections/LinearSelectionModel.ts"),w=n("./src/Range.ts"),_=n("./src/util.ts"),k=function(e){function t(e,n,s){var r;Object(i.default)(this,t),(r=Object(a.default)(this,Object(l.default)(t).call(this,new b.DocumentModelNode))).data=e,r.store=e.getStore(),r.domDocument=n,r.completeHistory=[];var c=s||Object(o.default)(r);return r.documentNode.setRoot(r.documentNode),r.documentNode.setDocument(c),r}return Object(u.default)(t,e),Object(r.default)(t,[{key:"getBranchNodeFromOffset",value:function(e){if(e<0||e>this.data.getLength())throw new Error("Offset ".concat(e," out of bounds"));return Object(c.default)(Object(l.default)(t.prototype),"getBranchNodeFromOffset",this).call(this,e)}},{key:"selectNodes",value:function(e,n){return Object(c.default)(Object(l.default)(t.prototype),"selectNodes",this).call(this,e,n)}},{key:"getCoveredSiblingGroups",value:function(e){return Object(c.default)(Object(l.default)(t.prototype),"getCoveredSiblingGroups",this).call(this,e)}},{key:"buildNodeTree",value:function(){for(var e,t=!1,n=[],i=[this.documentNode],r=[i,n],a=this.documentNode,o=0,l=0;l<this.data.getLength();l++){var c=this.data.getDataAt(l);if(h.LinearData.isElementData(c))if(t&&(a.setLength(o),a=i[i.length-1],t=!1,o=0),h.LinearData.isOpenElementData(c)){var u=v.modelNodeFactory.createFromElement(c);if(u.setDocument(this),n.push(u),v.modelNodeFactory.canNodeHaveChildren(u.getType()))i=n,n=[],r.push(n),a=u;else{if(!this.data.isCloseElementData(l+1)||this.data.getTypeAtOffset(l+1)!==this.data.getTypeAtOffset(l))throw new Error("Did not expect node to have children");l++}}else{var d,p=r.pop();if(n=i,!(i=r[r.length-2]))throw new Error("Unbalanced input passed to the document");(d=a).splice.apply(d,[0,0].concat(Object(s.default)(p))),a=i[i.length-1]}else{if(!t){var f=new g.TextModelNode;f.setDocument(this),n.push(f),a=f,t=!0}o++}}t&&a.setLength(o),(e=this.documentNode).splice.apply(e,[0,0].concat(Object(s.default)(n)))}},{key:"rebuildNodes",value:function(e,n,i,r,a){var o=new t(this.data.sliceObject(r,r+a),this.domDocument,this);o.buildNodeTree();var l=o.documentNode.children;return e.splice.apply(e,[n,i].concat(Object(s.default)(l))),l}},{key:"getDataFromNode",value:function(e){var t=e.getLength(),n=e.getOffset();return n>=0?this.data.slice(n,n+t):null}},{key:"fixInsertion",value:function(e,t){for(var n=[],s=[],i=[],r=0,a=e.length,o=this.getBranchNodeFromOffset(t),l=o.type,c=!1,u=this.data.isOpenElementData(t-1),d=function(e,t){var r;if(h.LinearData.isElementData(e))if(h.LinearData.isOpenElementData(e))!s.length&&i.length&&i[i.length-1].type===e.type?o=i.pop():s.push(e),l=e.type;else if(s.length)r=s.pop().type;else{if(r=o.type,i.push(o),!(o=o.parent))throw new Error("Inserted data (index ".concat(t,") is trying to close the root node"));if(l=r,!(e.type==="/".concat(r)||v.modelNodeFactory.canNodeContainContent(e.type.slice(1))&&v.modelNodeFactory.canNodeContainContent(r)))throw new Error("Cannot adopt content from ".concat(e.type," nodes into ").concat(r," nodes (index ").concat(t,")"))}n.push(e)},p=0;p<e.length;p++){var f=e[p];if(c&&h.LinearData.isElementData(f)&&(l=s.length?s[s.length-1].type:o.type),!h.LinearData.isElementData(f)||h.LinearData.isOpenElementData(f)){var m=f.type||"text",b=[],g=[],y=[];v.modelNodeFactory.isNodeContent(m)&&!v.modelNodeFactory.canNodeHaveChildren(l)&&(m="paragraph",b.unshift(v.modelNodeFactory.getDataElement(m)));var w=void 0;do{var k=v.modelNodeFactory.getParentNodeTypes(m);if(!(w=null===k||-1!==k.indexOf(l))){if(!k.length)throw new Error("Cannot insert ".concat(m," (index ").concat(p,") because it cannot have a parent"));m=k[0],b.unshift(v.modelNodeFactory.getDataElement(m))}}while(!w);var C=void 0;do{var x=v.modelNodeFactory.getChildNodeTypes(l);if(!(C=(null===x||-1!==x.indexOf(m))&&(v.modelNodeFactory.isNodeContent(m)||!v.modelNodeFactory.canNodeContainContent(l)))){if(u)return this.fixInsertion(e,t-1);if(g.push({type:"/"+l}),s.length){var j=s.pop();l=j.type,y.push(_.clone(j))}else{if(!o.parent)throw new Error("Cannot insert ".concat(m," (index ").concat(p,") even after closing all containing nodes"));i.push(o),y.push(o.getClonedElement()),o=o.parent,l=o.type}}}while(!C);for(var O=0,S=g;O<S.length;O++){var E=S[O];0===p?r++:a++,n.push(E)}for(var T=0,I=b;T<I.length;T++)0===p?r++:a++,d(I[T],p);!h.LinearData.isElementData(f)&&("string"==typeof f&&"\t"===f||Array.isArray(f)&&"\t"===f[0])?"string"==typeof f?(d(" ",p),d(" ",p),d(" ",p),d(" ",p)):(d([" ",f[1].slice()],p),d([" ",f[1].slice()],p),d([" ",f[1].slice()],p),d([" ",f[1].slice()],p)):d(f,p),h.LinearData.isElementData(f)?l=f.type:(c=!0,b.length&&(l=m))}else d(f,p),l=s.length?s[s.length-1].type:o.type}for(c&&(l=s.length?s[s.length-1].type:o.type);s.length;)d({type:"/"+s[s.length-1].type},e.length-1);for(;i.length;){var D=i[i.length-1];d(_.clone(D.element),e.length-1)}return{offset:t,remove:0,data:n,insertedDataOffset:r,insertedDataLength:a}}},{key:"commit",value:function(e){var t=this;if(e.hasBeenApplied())throw new Error("Cannot commit a transaction that has already been applied");this.emit("precommit"),new p.TransactionProcessor(this,e).process((function(){return t.emit("presynchronize",e)})),this.completeHistory.push(e),this.emit("transact",e)}},{key:"getNearestCursorOffset",value:function(e,t){if(this.data.isContentOffset(e)||this.hasSlugAtOffset(e))return e;var n=this.data.getNearestContentOffset(e,t),s=this.data.getNearestStructuralOffset(e,t);return this.hasSlugAtOffset(s)||-1===n?1===t?n<e?s:Math.min(n,s):n>e?s:Math.max(n,s):n}},{key:"getNearestFocusableNode",value:function(e,t,n){var s,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.data.getRelativeOffset(e,1===t?0:-1,(function(t){if(t>=Math.max(e,n)||t<Math.min(e,n))return!0;var r=this.getTypeAtOffset(t);return this.isOpenElementData(t)&&v.modelNodeFactory.isNodeFocusable(r)&&(i||!v.modelNodeFactory.canNodeContainContent(r))?(s=t+1,!0):!(!this.isCloseElementData(t)||!v.modelNodeFactory.isNodeFocusable(r)||!i&&v.modelNodeFactory.canNodeContainContent(r)||(s=t,0))})),s?this.documentNode.getNodeFromOffset(s):null}},{key:"getSiblingWordBoundary",value:function(e,t){return new f.DataString(this.data.getData()).moveBreakOffset(t,e)}},{key:"getRelativeOffset",value:function(e,t,n){var s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if("word"===n){var i=this.getSiblingWordBoundary(e,t);return i===e?this.getRelativeOffset(e,t,"character"):i}var r=e+(1===t?0:-1),a=this.data.getTypeAtOffset(r);if(this.data.isElementData(r)&&v.modelNodeFactory.isNodeFocusable(a)&&(s||!v.modelNodeFactory.canNodeContainContent(a)))return e+t;var o=this.data.getRelativeContentOffset(e,t),l=this.data.getRelativeStructuralOffset(e,t,!0),c=!1;if((l<e?-1:1)!==t)l=e;else{var u=this.data.getTypeAtOffset(l+t);c=(l<e?-1:1)===t&&this.data.isElementData(l+t)&&v.modelNodeFactory.isNodeFocusable(u)&&(s||!v.modelNodeFactory.canNodeContainContent(u))}return c||this.hasSlugAtOffset(l)?(c&&(l+=t),o===e||(o<e?-1:1)!==t?l:1===t?Math.min(o,l):Math.max(o,l)):1===t?Math.max(o,e):Math.min(o,e)}},{key:"getRelativeRange",value:function(e,t,n,s,i){var r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=e.to;if(!e.isCollapsed()&&!s){var o=1===t?e.end:e.start;if(this.data.isContentOffset(o)||this.hasSlugAtOffset(o))return new w.Range(o);a=o}var l,c=this.getRelativeOffset(a,t,n,r),u=this.getNearestFocusableNode(a,t,c,r);return u?(l=u.getOuterRange(),-1===t&&(l=l.flipped())):l=new w.Range(c),i&&!i.containsRange(l)?e:s?new w.Range(e.from,l.to):l}},{key:"hasSlugAtOffset",value:function(e){var t=this.getBranchNodeFromOffset(e);return!!t&&t.hasSlugAtOffset(e)}},{key:"getCompleteHistoryLength",value:function(){return this.completeHistory.length}},{key:"getCompleteHistorySince",value:function(e){return this.completeHistory.slice(e)}},{key:"shallowCloneFromSelection",value:function(e){return e instanceof y.LinearSelectionModel?this.shallowCloneFromRange(e.getRange()):this.shallowCloneFromRange(new w.Range(0))}},{key:"shallowCloneFromRange",value:function(e){for(var t,n,i,r,a=this.getBranchNodeFromOffset(e.start),o=this.getBranchNodeFromOffset(e.end),l=this.selectNodes(e,"siblings"),c=[],u=[],d=[],p=[];l[0]&&l[0].range&&l[0].range.isCollapsed()&&!l[0].node.isWrapped();)l.shift();for(var f=l.length-1;l[f]&&l[f].range&&l[f].range.isCollapsed()&&!l[f].node.isWrapped();)l.pop(),f--;if(0===l.length)t=new h.LinearData(this.store,[{type:"paragraph"},{type:"/paragraph"}]),n=i=new w.Range(1);else if(a===o)r=l;else{for(var m=l[0],v=l[l.length-1],b=m.node,g=v.node;!b.isWrapped();)b=b.parent;for(;!g.isWrapped();)g=g.parent;if(m.range)for(;;){for(;!a.isWrapped();)a=a.parent;if(c.push(a.getClonedElement()),a===b)break;a=a.parent}if(v!==m&&v.range)for(;;){for(;!o.isWrapped();)o=o.parent;if(u.push({type:"/".concat(o.getType())}),o===g)break;o=o.parent}r=this.selectNodes(new w.Range(b.getOuterRange().start,g.getOuterRange().end),"covered")}var y=function(e){return null!==e.getParentNodeTypes()||e.isContent()};if(!i){for(var _=!1,k=r.length-1;k>=0;k--)if(y(r[k].node)){_=!0;break}if(_)for(a=r[0].node;a.parent&&y(a);){a.isContent();var x=(a=a.parent).getClonedElement();d.push(x),p.push({type:"/".concat(x.type)})}t=new h.LinearData(this.store,[].concat(Object(s.default)(d.reverse()),Object(s.default)(c.reverse()),Object(s.default)(this.data.slice(e.start,e.end)),u,p)),n=new w.Range(d.length+c.length,d.length+c.length+e.getLength()),i=new w.Range(d.length,d.length+c.length+e.getLength()+u.length)}return new C(t,void 0,void 0,n,i)}},{key:"cloneWithData",value:function(e){var n=this.store.clone();return new t(new h.LinearData(n,e),this.domDocument)}},{key:"toFormatPlaintext",value:function(){return this.documentNode.toFormatPlaintext()}}],[{key:"addAnnotationsToData",value:function(e,t){if(!t.isEmpty())for(var n=0;n<e.length;n++){var s=e[n];if(h.LinearData.isElementData(s));else if(Array.isArray(s)){var i=new m.AnnotationSet(t.getStore(),s[1]);i.addSet(t),s[1]=i.getIndices()}else e[n]=[s,t.getIndices().slice()]}}}]),t}(d.Document),C=function(e){function t(e,n,s,r,o){var c;return Object(i.default)(this,t),(c=Object(a.default)(this,Object(l.default)(t).call(this,e,n,s))).originalRange=r,c.balancedRange=o,c}return Object(u.default)(t,e),Object(r.default)(t,[{key:"getOriginalData",value:function(){return this.data.slice(this.originalRange)}},{key:"getBalancedData",value:function(){return this.data.slice(this.balancedRange)}}]),t}(k)},"./src/model/DocumentModelSynchronizer.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"DocumentModelSynchronizer",(function(){return l})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.concat"),n("core-js/modules/es.array.index-of"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.splice"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.set"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./src/model/nodes/TextModelNode.ts"),o=n("./src/util.ts"),l=function(){function e(t,n){Object(i.default)(this,e),this.document=t,this.transaction=n,this.actionQueue=[],this.eventQueue=[],this.adjustment=0}return Object(r.default)(e,[{key:"synchronize",value:function(){var t=!0,n=!1,i=void 0;try{for(var r,a=this.actionQueue[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var l=r.value;if(!e.synchronizers.hasOwnProperty(l.type))throw new Error("Invalid action type ".concat(l.type));e.synchronizers[l.type].call(this,l)}}catch(v){n=!0,i=v}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}var c=!0,u=!1,d=void 0;try{for(var h,p=this.eventQueue[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var f,m=h.value;(f=m.node.emit).call.apply(f,[m.node,m.event].concat(Object(s.default)(m.args))),o.deleteData(m.node,"queuedEventHashes")}}catch(v){u=!0,d=v}finally{try{c||null==p.return||p.return()}finally{if(u)throw d}}this.actionQueue.length=0,this.eventQueue.length=0}},{key:"pushAnnotation",value:function(e){this.actionQueue.push({type:"annotation",range:e})}},{key:"pushRebuild",value:function(e,t){this.actionQueue.push({type:"rebuild",oldRange:e,newRange:t})}},{key:"pushResize",value:function(e,t){var n=this.actionQueue[this.actionQueue.length-1];n&&"resize"===n.type&&n.node===e?n.adjustment+=t:this.actionQueue.push({type:"resize",node:e,adjustment:t})}},{key:"pushInsertTextNode",value:function(e,t,n){this.actionQueue.push({type:"insertTextNode",parentNode:e,index:t,length:n})}},{key:"pushAttributeChange",value:function(e,t,n,s){this.actionQueue.push({type:"attributeChange",node:e,key:t,from:n,to:s})}},{key:"queueEvent",value:function(e,t){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i];var r=o.hashObject([t].concat(s)),a=o.getData(e,"queuedEventHashes");a||(a=new Set,o.setData(e,"queuedEventHashes",a)),a.has(r)||(a.add(r),this.eventQueue.push({node:e,event:t,args:[].concat(s,[this.transaction])}))}}]),e}();l.synchronizers={annotation:function(e){var t=e.range.translated(this.adjustment),n=this.document.selectNodes(t,"leaves"),s=!0,i=!1,r=void 0;try{for(var a,o=n[Symbol.iterator]();!(s=(a=o.next()).done);s=!0){var l=a.value;this.queueEvent(l.node,"annotation"),this.queueEvent(l.node,"update")}}catch(c){i=!0,r=c}finally{try{s||null==o.return||o.return()}finally{if(i)throw r}}},resize:function(e){var t=e.node,n=t.parent;n&&t.getLength()+e.adjustment===0?n.splice(n.children.indexOf(t),1):t.setLength(t.getLength()+e.adjustment),this.adjustment+=e.adjustment},insertTextNode:function(e){var t=new a.TextModelNode;t.setLength(e.length),e.parentNode.splice(e.index,0,t),this.adjustment+=e.length},rebuild:function(e){var t,n,s,i=e.oldRange.translated(this.adjustment),r=this.document.selectNodes(i,"siblings");void 0===r[0].indexInNode&&r[0].node.parent?(t=r[0].node.parent,n=r[0].index,s=r.length):(t=r[0].node,n=r[0].indexInNode||0,s=0),this.document.rebuildNodes(t,n,s,i.from,e.newRange.getLength()),this.adjustment+=e.newRange.getLength()-i.getLength()},attributeChange:function(e){this.queueEvent(e.node,"attributeChange",e.key,e.from,e.to),this.queueEvent(e.node,"update")}}},"./src/model/IndexValueStore.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"IndexValueStore",(function(){return l})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.slice"),n("core-js/modules/es.map"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),i=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),r=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),a=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("./src/util.ts"),l=function(){function e(){Object(r.default)(this,e),this.hashStore=new Map,this.valueStore=[]}return Object(a.default)(e,[{key:"index",value:function(e,t,n){"string"!=typeof t&&(t=o.hashObject(e));var s=this.indexOfHash(t);return(null===s||n)&&(null===s&&(s=this.valueStore.length),Array.isArray(e)?this.valueStore[s]=o.clone(e):"object"===Object(i.default)(e)?this.valueStore[s]=o.cloneObject(e):this.valueStore[s]=e,this.hashStore.set(t,s)),s}},{key:"indexOfHash",value:function(e){return this.hashStore.has(e)?this.hashStore.get(e):null}},{key:"value",value:function(e){return this.valueStore[e]}},{key:"clone",value:function(){var e=new this.constructor;e.valueStore=this.valueStore.slice();var t=!0,n=!1,i=void 0;try{for(var r,a=this.hashStore.entries()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=Object(s.default)(r.value,2),l=o[0],c=o[1];e.hashStore.set(l,c)}}catch(u){n=!0,i=u}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"merge",value:function(e){var t=new Map,n=!0,i=!1,r=void 0;try{for(var a,o=e.hashStore.entries()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var l=Object(s.default)(a.value,2),c=l[0],u=l[1];if(!this.hashStore.has(c)){var d=this.valueStore.push(e.valueStore[u])-1;this.hashStore.set(c,d)}t.set(u,this.hashStore.get(c))}}catch(h){i=!0,r=h}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return t}}]),e}()},"./src/model/LinearData.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"LinearData",(function(){return p})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.concat"),n("core-js/modules/es.array.filter"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.map"),n("core-js/modules/es.array.slice"),n("core-js/modules/es.array.splice"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/es.string.match"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),i=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(i),a=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),o=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),l=n("./src/util.ts"),c=n("./src/Range.ts"),u=n("./src/model/DataString.ts"),d=n("./src/model/AnnotationSet.ts"),h=n("./src/model/ModelNodeFactory.ts"),p=function(){function e(t,n){Object(a.default)(this,e),this.store=t,this.data=n||[]}return Object(o.default)(e,[{key:Symbol.iterator,value:r.a.mark((function e(){var t,n,s,i,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,n=!1,s=void 0,e.prev=3,i=this.data[Symbol.iterator]();case 5:if(t=(a=i.next()).done){e.next=12;break}return o=a.value,e.next=9,o;case 9:t=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),n=!0,s=e.t0;case 18:e.prev=18,e.prev=19,t||null==i.return||i.return();case 21:if(e.prev=21,!n){e.next=24;break}throw s;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}}),e,this,[[3,14,18,26],[19,,21,25]])}))},{key:"getLength",value:function(){return this.data.length}},{key:"getStore",value:function(){return this.store}},{key:"getTypeAtOffset",value:function(e){return this.isElementData(e)?this.constructor.getType(this.getDataAt(e)):null}},{key:"getCharacterData",value:function(t){return e.getCharacter(this.data[t])}},{key:"getWordRange",value:function(t){var n=new u.DataString(this.data);return t=this.getNearestContentOffset(t),n.isBreak(t)?e.endWordRegExp.exec((n.read(t-2)||" ")+(n.read(t-1)||" "))?new c.Range(n.moveBreakOffset(-1,t),t):e.startWordRegExp.exec((n.read(t)||" ")+(n.read(t+1)||" "))?new c.Range(t,n.moveBreakOffset(1,t)):new c.Range(t):new c.Range(n.moveBreakOffset(-1,t),n.moveBreakOffset(1,t))}},{key:"getAnnotatedRangeFromSelection",value:function(e,t){for(var n=e.start,s=e.end;n>0;)if(n--,!this.getAnnotationsAtOffset(n).contains(t)){n++;break}for(;s<this.data.length&&this.getAnnotationsAtOffset(s).contains(t);)s++;return new c.Range(n,s)}},{key:"getInsertionAnnotationsFromRange",value:function(e){var t,n,s,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=e.isCollapsed()&&!i?Math.max(0,e.start-1):e.start,n=this.isContentOffset(t)?this.getAnnotationsAtOffset(t):new d.AnnotationSet(this.store),s=this.isContentOffset(e.end)?this.getAnnotationsAtOffset(e.end):new d.AnnotationSet(this.store),n.filter((function(e){return e.constructor.applyToAppendedContent||s.containsComparable(e)}))}},{key:"getAnnotationsFromRange",value:function(e){for(var t,n,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=0,r=e.start;r<e.end;r++)if((!this.isElementData(r)||(h.modelNodeFactory.shouldIgnoreChildren(this.getTypeAtOffset(r))&&(i+=this.isOpenElementData(r)?1:-1),h.modelNodeFactory.isNodeContent(this.getTypeAtOffset(r))))&&!(i>0))if(t)if(n=this.getAnnotationsAtOffset(r),s)n.isEmpty()||t.addSet(n);else{if(n.isEmpty())return new d.AnnotationSet(this.store);if((t=t.getComparableAnnotationsFromSet(n)).isEmpty())break}else if(t=this.getAnnotationsAtOffset(r),0===e.getLength()||1===e.getLength())return t;return t||new d.AnnotationSet(this.store)}},{key:"getAnnotationsAtOffset",value:function(e){return new d.AnnotationSet(this.store,this.getAnnotationIndicesAtOffset(e))}},{key:"setAnnotationsAtOffset",value:function(e,t){var n=this;this.setAnnotationIndicesAtOffset(e,t.getAnnotations().map((function(e){return n.store.index(e)})))}},{key:"getAnnotationIndicesAtOffset",value:function(e){var t=this.data[e];return t&&"string"!=typeof t?Array.isArray(t)?(t[1]||[]).slice():(t.annotations||[]).slice():[]}},{key:"setAnnotationIndicesAtOffset",value:function(t,n){var s=this.data[t];if(n.length)if(e.isElementData(s))s.annotations=n;else{var i=this.getCharacterData(t);this.setData(t,[i,n])}else if(e.isElementData(s))delete s.annotations;else{var r=this.getCharacterData(t);this.setData(t,r)}}},{key:"getRelativeOffset",value:function(e,t,n){for(var s=e,i=0,r=!1,a=0,o=arguments.length,l=new Array(o>3?o-3:0),c=3;c<o;c++)l[c-3]=arguments[c];if(0===t){if(n.call.apply(n,[this,e].concat(l)))return e;t=1}var u=e<=0?1:e>=this.data.length?-1:t>0?1:-1;t=Math.abs(t),e=-1;for(var d=s+u,p=!1;d>=0&&d<this.data.length;){var f=d+(u>0?-1:0);if(this.isElementData(f)&&h.modelNodeFactory.shouldIgnoreChildren(this.getTypeAtOffset(f)))if(p=this.isOpenElementData(f),u>0&&p||u<0&&!p)a++;else if(--a<0)throw new Error("Offset was inside an ignoreChildren node");if(n.call.apply(n,[this,d].concat(l))){if(!a&&(e=d,t===++i))return e}else if(!r&&0===i&&(u<0&&0===d||u>0&&d===this.data.length)){if(n.call.apply(n,[this,s].concat(l)))return s;u=-u,d=s,t=1,r=!0,a=0}d+=u}return e}},{key:"getRelativeContentOffset",value:function(e,t){return this.getRelativeOffset(e,t,this.isContentOffset)}},{key:"getRelativeStructuralOffset",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return 0!==t||0!==e&&e!==this.data.length?this.getRelativeOffset(e,t,this.isStructuralOffset,n):e}},{key:"getNearestContentOffset",value:function(e,t){if(this.isContentOffset(e))return e;if(void 0===t){var n=this.getRelativeContentOffset(e,-1),s=this.getRelativeContentOffset(e,1);return e-n<s-e?n:s}return this.getRelativeContentOffset(e,t)}},{key:"getNearestStructuralOffset",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.isStructuralOffset(e,n))return e;if(void 0===t){var s=this.getRelativeStructuralOffset(e,-1,n),i=this.getRelativeStructuralOffset(e,1,n);return e-s<i-e?s:i}return this.getRelativeStructuralOffset(e,t,n)}},{key:"isContentOffset",value:function(t){if(0===t||t===this.data.length)return!1;var n=this.data[t-1],s=this.data[t];return void 0!==n&&void 0!==s&&("string"==typeof n||"string"==typeof s||Array.isArray(n)||Array.isArray(s)||e.isElementData(n)&&e.isCloseElementData(n)&&h.modelNodeFactory.isNodeContent(n.type.slice(1))||e.isElementData(s)&&e.isOpenElementData(s)&&h.modelNodeFactory.isNodeContent(s.type)||"/"+n.type===s.type&&h.modelNodeFactory.canNodeContainContent(n.type))}},{key:"isStructuralOffset",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0===t||t===this.data.length)return!0;var s=this.data[t-1],i=this.data[t];return void 0!==s&&void 0!==i&&e.isElementData(s)&&e.isElementData(i)&&("/"===s.type[0]&&(h.modelNodeFactory.canNodeHaveChildren(s.type.slice(1))||!h.modelNodeFactory.isNodeContent(s.type.slice(1)))&&(!n||null===h.modelNodeFactory.getParentNodeTypes(s.type.slice(1)))||"/"!==i.type[0]&&(h.modelNodeFactory.canNodeHaveChildren(i.type)||!h.modelNodeFactory.isNodeContent(i.type))&&(!n||null===h.modelNodeFactory.getParentNodeTypes(i.type))||"/"+s.type===i.type&&h.modelNodeFactory.canNodeHaveChildren(s.type)&&(!n||null===h.modelNodeFactory.getChildNodeTypes(s.type)))}},{key:"isElementData",value:function(e){return this.constructor.isElementData(this.data[e])}},{key:"isOpenElementData",value:function(e){var t=this.constructor,n=this.data[e];return t.isElementData(n)&&t.isOpenElementData(n)}},{key:"isCloseElementData",value:function(e){var t=this.constructor,n=this.data[e];return t.isElementData(n)&&t.isCloseElementData(n)}},{key:"containsElementData",value:function(){var e=this;return this.data.some((function(t){return e.constructor.isElementData(t)}))}},{key:"isContentData",value:function(){return this.data.every((function(e){return"string"==typeof e||Array.isArray(e)||"/"===e.type[0]||h.modelNodeFactory.isNodeContent(e.type)}))}},{key:"getData",value:function(){return this.data}},{key:"getDataAt",value:function(e){return this.data[e]}},{key:"setData",value:function(e,t){this.data[e]=t}},{key:"push",value:function(){var e;return(e=this.data).push.apply(e,arguments)}},{key:"slice",value:function(){for(var e,t,n,s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];void 0===i[0]?(e=0,t=this.data.length,n=!1):"number"==typeof i[0]?(e=i[0],t=i[1],n=i[2]):(e=i[0].start,t=i[0].end,n=i[1]),e=Math.max(0,Math.min(this.data.length,e)),t=Math.max(0,Math.min(this.data.length,t));var a=this.data.slice(e,t);return n?l.clone(a):a}},{key:"sliceObject",value:function(e,t){return new this.constructor(this.store,this.data.slice(e,t))}},{key:"splice",value:function(e,t){for(var n,s=arguments.length,i=new Array(s>2?s-2:0),r=2;r<s;r++)i[r-2]=arguments[r];return(n=this.data).splice.apply(n,[e,t].concat(i))}},{key:"spliceObject",value:function(e,t){for(var n,s=arguments.length,i=new Array(s>2?s-2:0),r=2;r<s;r++)i[r-2]=arguments[r];return new this.constructor(this.store,(n=this.data).splice.apply(n,[e,t].concat(i)))}},{key:"getText",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n="",s=(t=t||new c.Range(0,this.data.length)).start;s<t.end;s++)this.isElementData(s)?(e||"break"===this.data[s].type)&&(n+="\n"):n+=this.getCharacterData(s);return n}},{key:"trimOuterSpaceFromRange",value:function(e){for(var t=e.start,n=e.end;this.getCharacterData(n-1).match(/\s/);)n--;for(;t<n&&this.getCharacterData(t).match(/\s/);)t++;return e.to<e.end?new c.Range(n,t):new c.Range(t,n)}},{key:"setAttributeAtOffset",value:function(e,t,n){if(this.isElementData(e)){var s=this.data[e];void 0===n?s.attributes&&delete s.attributes[t]:(s.attributes||(s.attributes={}),s.attributes[t]=n)}}},{key:"cloneElements",value:function(){for(var e=0;e<this.data.length;e++)if(this.isOpenElementData(e)){var t=h.modelNodeFactory.lookup(this.getTypeAtOffset(e));t&&this.setData(e,t.cloneElement(this.getDataAt(e)))}}},{key:"remapStoreIndexes",value:function(e){for(var t=0;t<this.data.length;t++){for(var n=this.getAnnotationIndicesAtOffset(t),s=0;s<n.length;s++)n[s]=e.get(n[s]);this.setAnnotationIndicesAtOffset(t,n)}}}],[{key:"getType",value:function(e){return this.isCloseElementData(e)?e.type.slice(1):e.type}},{key:"getCharacter",value:function(e){return this.isElementData(e)?"":Array.isArray(e)?e[0]:e}},{key:"isElementData",value:function(e){return void 0!==e&&"object"===Object(s.default)(e)&&!Array.isArray(e)&&"string"==typeof e.type}},{key:"isOpenElementData",value:function(e){return"/"!==e.type[0]}},{key:"isCloseElementData",value:function(e){return"/"===e.type[0]}},{key:"compareItems",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0===e||void 0===t)return!1;var s=e,i=t;return Array.isArray(e)&&(s=e[0]),Array.isArray(t)&&(i=t[0]),e&&e.type&&(s={type:e.type,attributes:n?e.attributes:void 0}),t&&t.type&&(i={type:t.type,attributes:n?t.attributes:void 0}),l.compare(s,i)}},{key:"convertDataToSignificantWhitespace",value:function(e){for(var t=[],n=0;n<e.length;n++){var s=e[n],i=e[n+1];this.isElementData(s)&&"break"===s.type&&i&&this.isElementData(i)&&"/break"===i.type?(t.push("\n"),n++):t.push(s)}return t}},{key:"convertDataFromSignificantWhitespace",value:function(e){var t=[],n=!0,s=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value;"\n"===this.getCharacter(o)?t.push({type:"break"},{type:"/break"}):t.push(o)}}catch(l){s=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}return t}}]),e}();p.startWordRegExp=/^\w/,p.endWordRegExp=/\w$/},"./src/model/Model.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"Model",(function(){return u})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),a=n("./src/oo.ts"),o=n("./src/util.ts"),l=n("./src/EventEmitter.ts"),c=function(e,t,n,s){var i,a=arguments.length,o=a<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(r.default)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},u=function(){function e(t){Object(s.default)(this,e),l.EventEmitter.construct(this),this.element=t||{type:this.constructor.id}}return Object(i.default)(e,[{key:"getType",value:function(){return this.constructor.id}},{key:"getHashObject",value:function(){return this.constructor.getHashObject(this.element)}},{key:"getClonedElement",value:function(){return o.clone(this.element)}},{key:"isInspectable",value:function(){return!0}},{key:"isEditable",value:function(){return!0}},{key:"toFormatPlaintext",value:function(){return""}}],[{key:"getHashObject",value:function(e){return{type:e.type,attributes:e.attributes,originalDomNodes:e.originalDomNodes&&e.originalDomNodes[0].nodeType===Node.ELEMENT_NODE?e.originalDomNodes[0].cloneNode().outerHTML:void 0}}},{key:"toDataElements",value:function(e,t){return[{type:this.id}]}},{key:"toDomElements",value:function(e,t,n){if(this.matchTagNames&&1===this.matchTagNames.length)return[t.createElement(this.matchTagNames[0])];throw new Error("".concat(this.name," subclass must match a single tag name or implement toDomElements"))}}]),e}();u.id=null,u.matchTagNames=null,u.matchTypes=null,u.preserveHtmlAttributes=!0,u=c([a.mixin(l.EventEmitter)],u)},"./src/model/ModelFactory.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ModelFactory",(function(){return l}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(o.default)(t,e),Object(i.default)(t,[{key:"createFromElement",value:function(e){return this.create(e.type,e)}}]),t}(n("./src/CtorFactory.ts").CtorFactory)},"./src/model/ModelNodeFactory.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ModelNodeFactory",(function(){return u})),n.d(t,"modelNodeFactory",(function(){return d})),n("core-js/modules/es.object.assign");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./src/model/ModelFactory.ts"),c=n("./src/util.ts"),u=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(o.default)(t,e),Object(i.default)(t,[{key:"ensureExists",value:function(e){if(!this.contains(e))throw new Error("Unknown node type: ".concat(e))}},{key:"getDataElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.ensureExists(e);var n={type:e};return t=Object.assign(Object.assign({},this.lookup(e).defaultAttributes),t),c.isEmptyObject(t)||(n.attributes=t),n}},{key:"isNodeContent",value:function(e){return this.ensureExists(e),this.lookup(e).isContent}},{key:"isNodeFocusable",value:function(e){return this.ensureExists(e),this.lookup(e).isFocusable}},{key:"canNodeHaveChildren",value:function(e){this.ensureExists(e);var t=this.lookup(e).childNodeTypes;return null===t||t.length>0}},{key:"canNodeContainContent",value:function(e){return this.ensureExists(e),this.lookup(e).canContainContent}},{key:"canNodeTakeAnnotationType",value:function(e,t){return this.ensureExists(e),!0}},{key:"getChildNodeTypes",value:function(e){return this.ensureExists(e),this.lookup(e).childNodeTypes}},{key:"getParentNodeTypes",value:function(e){return this.ensureExists(e),this.lookup(e).parentNodeTypes}},{key:"getSuggestedParentNodeTypes",value:function(e){return this.ensureExists(e),this.lookup(e).suggestedParentNodeTypes}},{key:"shouldIgnoreChildren",value:function(e){return this.ensureExists(e),this.lookup(e).ignoreChildren}},{key:"handlesOwnChildren",value:function(e){return this.ensureExists(e),this.lookup(e).handlesOwnChildren}},{key:"hasSignificantWhitespace",value:function(e){return this.ensureExists(e),this.lookup(e).hasSignificantWhitespace}}]),t}(l.ModelFactory),d=new u},"./src/model/ModelRegistry.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ModelRegistry",(function(){return h})),n.d(t,"modelRegistry",(function(){return p})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.map"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.set"),n("core-js/modules/es.string.iterator"),n("core-js/modules/es.string.split"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./src/Registry.ts"),o=n("./src/model/nodes/ModelNode.ts"),l=n("./src/model/ModelNodeFactory.ts"),c=n("./src/model/AnnotationModelFactory.ts"),u=n("./src/model/annotations/AnnotationModel.ts");function d(e,t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)}var h=function(){function e(){Object(i.default)(this,e),this.register=this.register.bind(this),this.registry=new a.Registry,this.modelsByTag=new Map,this.modelsByType=new Map,this.registrationOrder=new Map,this.nextOrderNumber=0}return Object(r.default)(e,[{key:"register",value:function(e){var t=e;if(t.prototype instanceof o.ModelNode)l.modelNodeFactory.register(t);else{if(!(t.prototype instanceof u.AnnotationModel))throw new Error("No factory associated with this Model subclass");c.annotationModelFactory.register(t)}this.registry.register(t.id,t);var n=!0,s=!1,i=void 0;try{for(var r,a=(t.matchTagNames||[""])[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var h=r.value;d(this.modelsByTag,h,t.id)}}catch(y){s=!0,i=y}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}var p=!0,f=!1,m=void 0;try{for(var v,b=(t.matchTypes||[""])[Symbol.iterator]();!(p=(v=b.next()).done);p=!0){var g=v.value;d(this.modelsByType,g,t.id)}}catch(y){f=!0,m=y}finally{try{p||null==b.return||b.return()}finally{if(f)throw m}}this.registrationOrder.set(e.id,this.nextOrderNumber++)}},{key:"unregister",value:function(e){var t=e;if(t.prototype instanceof o.ModelNode)l.modelNodeFactory.unregister(t);else{if(!(t.prototype instanceof u.AnnotationModel))throw new Error("No factory associated with this Model subclass");c.annotationModelFactory.unregister(t)}this.registry.unregister(t.id);var n,s,i,r,a=null===t.matchTagNames?[""]:t.matchTagNames,d=!0,h=!1,p=void 0;try{for(var f,m=a[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){var v=f.value;n=this.modelsByTag,s=v,i=t.id,r=void 0,(r=n.get(s))&&r.delete(i)&&0===r.size&&n.delete(s)}}catch(b){h=!0,p=b}finally{try{d||null==m.return||m.return()}finally{if(h)throw p}}this.registrationOrder.delete(e.id)}},{key:"matchElement",value:function(e){var t=[];e.getAttribute("typeof")&&t.push.apply(t,Object(s.default)(e.getAttribute("typeof").split(" ")));for(var n=0,i=t;n<i.length;n++){var r=i[n],a=this.modelsByType.get(r);if(a&&a.size)return a.values().next().value}var o=e.nodeName.toLowerCase(),l=this.modelsByTag.get(o);return l&&l.size?l.values().next().value:null}},{key:"lookup",value:function(e){return this.registry.lookup(e)}},{key:"isAnnotation",value:function(e){if(e.nodeType!==Node.ELEMENT_NODE)return!1;var t=this.lookup(this.matchElement(e));return(t&&t.prototype)instanceof u.AnnotationModel}}]),e}(),p=new h},"./src/model/Scalable.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"Scalable",(function(){return d})),n("core-js/modules/es.object.assign"),n("core-js/modules/es.object.get-own-property-descriptor");var s,i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),o=n("./src/oo.ts"),l=n("./src/util.ts"),c=n("./src/EventEmitter.ts"),u=function(e,t,n,s){var i,r=arguments.length,o=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(a.default)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(o=(r<3?i(o):r>3?i(t,n,o):i(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},d=s=function(){function e(t){Object(i.default)(this,e),t=Object.assign({fixedRatio:!0,enforceMin:!0,enforceMax:!0,isDefault:!1},t),c.EventEmitter.construct(this),this.ratio=null,this.valid=null,this.defaultSize=!1,this.currentDimensions=null,this.originalDimensions=null,this.defaultDimensions=null,this.minDimensions=null,this.maxDimensions=null,this.fixedRatio=t.fixedRatio,t.currentDimensions&&this.setCurrentDimensions(t.currentDimensions),t.originalDimensions&&this.setOriginalDimensions(t.originalDimensions),t.defaultDimensions&&this.setDefaultDimensions(t.defaultDimensions),t.isDefault&&this.toggleDefault(t.isDefault),t.minDimensions&&this.setMinDimensions(t.minDimensions),t.maxDimensions&&this.setMaxDimensions(t.maxDimensions),this.setEnforceMin(t.enforceMin),this.setEnforceMax(t.enforceMax)}return Object(r.default)(e,[{key:"setCurrentDimensions",value:function(e){s.isSizeValid(e)&&!l.compare(e,this.currentDimensions)&&(this.currentDimensions=l.clone(e),this.fixedRatio&&!this.ratio&&this.setRatioFromDimensions(this.currentDimensions),this.valid=null,this.emit("currentSizeChange",this.currentDimensions))}},{key:"setOriginalDimensions",value:function(e){s.isSizeValid(e)&&!l.compare(e,this.originalDimensions)&&(this.originalDimensions=l.clone(e),this.fixedRatio&&this.setRatioFromDimensions(this.originalDimensions),this.valid=null,this.emit("originalSizeChange",this.originalDimensions))}},{key:"setDefaultDimensions",value:function(e){s.isSizeValid(e)&&!l.compare(e,this.defaultDimensions)&&(this.defaultDimensions=l.clone(e),this.valid=null,this.emit("defaultSizeChange",this.defaultDimensions))}},{key:"setMinDimensions",value:function(e){s.isSizeValid(e)&&!l.compare(e,this.minDimensions)&&(this.minDimensions=l.clone(e),this.valid=null,this.emit("minSizeChange",this.minDimensions))}},{key:"setMaxDimensions",value:function(e){s.isSizeValid(e)&&!l.compare(e,this.maxDimensions)&&(this.maxDimensions=l.clone(e),this.valid=null,this.emit("maxSizeChange",this.maxDimensions))}},{key:"setEnforceMin",value:function(e){this.valid=null,this.enforceMin=!!e}},{key:"setEnforceMax",value:function(e){this.valid=null,this.enforceMax=!!e}},{key:"setRatioFromDimensions",value:function(e){e&&e.width&&e.height&&(this.ratio=e.width/e.height),this.valid=null}},{key:"toggleDefault",value:function(e){void 0===e&&(e=!this.defaultSize),e!==this.defaultSize&&(this.defaultSize=e,e&&this.setCurrentDimensions(this.defaultDimensions),this.emit("defaultSizeChange",e))}},{key:"getBoundedDimensions",value:function(e,t){var n=this.enforceMin&&this.minDimensions,s=this.enforceMax&&this.maxDimensions;if(e=l.clone(e),n&&(e.width=Math.max(e.width,n.width),e.height=Math.max(e.height,n.height)),s&&(e.width=Math.min(e.width,s.width),e.height=Math.min(e.height,s.height)),this.fixedRatio&&(e.width/e.height<this.ratio?e.height=Math.round(e.width/this.ratio):e.width=Math.round(e.height*this.ratio)),t){var i=n?Math.ceil(n.width/t):-1/0,r=s?Math.floor(s.width/t):1/0,a=Math.round(e.width/t);e.width=Math.max(Math.min(a,r),i)*t,this.fixedRatio?e.height=Math.round(e.width/this.ratio):(i=n?Math.ceil(n.height/t):-1/0,r=s?Math.floor(s.height/t):1/0,a=Math.round(e.height/t),e.height=Math.max(Math.min(a,r),i)*t)}return e}},{key:"getCurrentScale",value:function(){return this.fixedRatio&&this.currentDimensions&&this.originalDimensions?this.currentDimensions.width/this.originalDimensions.width:null}}],[{key:"isSizeValid",value:function(e){return e&&void 0!==e.width&&void 0!==e.height}}]),e}();d=s=u([o.mixin(c.EventEmitter)],d)},"./src/model/SurfaceModel.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"SurfaceModel",(function(){return v})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.map"),n("core-js/modules/es.array.reverse"),n("core-js/modules/es.array.slice"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),a=n("./src/oo.ts"),o=n("./src/Range.ts"),l=n("./src/EventEmitter.ts"),c=n("./src/model/AnnotationSet.ts"),u=n("./src/model/annotations/AnnotationModel.ts"),d=n("./src/model/SurfaceModelFragment.ts"),h=n("./src/model/selections/NullSelectionModel.ts"),p=n("./src/model/selections/LinearSelectionModel.ts"),f=n("./src/model/selections/TableSelectionModel.ts"),m=function(e,t,n,s){var i,a=arguments.length,o=a<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(r.default)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},v=function(){function e(t,n){Object(s.default)(this,e),l.EventEmitter.construct(this),this.api=n,this.documentModel=t,this.enabled=!0,this.selectedNode=null,this.branchNodesStart=null,this.branchNodesEnd=null,this.isCollapsed=null,this.selection=new h.NullSelectionModel(this.documentModel),this.selectionBefore=new h.NullSelectionModel(this.documentModel),this.translatedSelection=null,this.transacting=!1,this.historyTrackingInterval=null,this.newTransactions=[],this.undoStack=[],this.undoIndex=0,this.insertionAnnotations=new c.AnnotationSet(this.documentModel.store),this.selectedAnnotations=new c.AnnotationSet(this.documentModel.store),this.queueingContextChanges=!1,this.contextChangeQueued=!1,this.onDocumentTransact=this.onDocumentTransact.bind(this),this.onDocumentPrecommit=this.onDocumentPrecommit.bind(this),this.onDocumentPresynchronize=this.onDocumentPresynchronize.bind(this),this.documentModel.on("transact",this.onDocumentTransact),this.documentModel.on("precommit",this.onDocumentPrecommit),this.documentModel.on("presynchronize",this.onDocumentPresynchronize)}return Object(i.default)(e,[{key:"initialize",value:function(){this.startHistoryTracking(),this.emit("contextChange")}},{key:"destroy",value:function(){this.stopHistoryTracking()}},{key:"disable",value:function(){this.stopHistoryTracking(),this.enabled=!1,this.emit("history")}},{key:"enable",value:function(){this.enabled=!1,this.startHistoryTracking(),this.emit("history")}},{key:"onDocumentTransact",value:function(e){this.setSelection(this.getSelection().translatedByTransactions([e])),this.emit("documentUpdate",e)}},{key:"onDocumentPrecommit",value:function(){this.translatedSelection=this.selection.clone()}},{key:"onDocumentPresynchronize",value:function(e){this.translatedSelection&&(this.translatedSelection=this.translatedSelection.translatedByTransactions([e]))}},{key:"getTranslatedSelection",value:function(){return this.translatedSelection||this.selection}},{key:"isSelectionValid",value:function(e){if(e instanceof p.LinearSelectionModel){var t=e.getRange();return this.documentModel.getNearestCursorOffset(t.start,-1)===t.start&&this.documentModel.getNearestCursorOffset(t.end,-1)===t.end}return!0}},{key:"getSelection",value:function(){return this.selection}},{key:"setSelection",value:function(e){if(this.translatedSelection=null,this.transacting)this.selection=e;else{var t=this.selection,n=!1;t.equals(e)||(n=!0,this.selection=e);var s,i,r,a,o,l,c=!1;e instanceof p.LinearSelectionModel?(l=e.getRange(),s=this.documentModel.getBranchNodeFromOffset(l.start),i=l.isCollapsed()?s:this.documentModel.getBranchNodeFromOffset(l.end),r=this.getSelectedNodeFromSelection(e),(o=this.documentModel.data.getInsertionAnnotationsFromRange(l)).equalsInOrder(this.insertionAnnotations)||this.setInsertionAnnotations(o),(a=l.isCollapsed()?this.documentModel.data.getAnnotationsAtOffset(l.start):this.documentModel.data.getAnnotationsFromRange(l,!0)).compareTo(this.selectedAnnotations)||(this.selectedAnnotations=a,c=!0)):e instanceof f.TableSelectionModel?(r=e.getMatrixCells()[0].node,c=!0):e instanceof h.NullSelectionModel&&(c=!0),l&&l.isCollapsed()!==this.isCollapsed&&(this.isCollapsed=l.isCollapsed(),c=!0),r===this.selectedNode&&s===this.branchNodesStart&&i===this.branchNodesEnd||(this.branchNodesStart=s,this.branchNodesEnd=i,this.selectedNode=r,c=!0),n&&(this.emit("select",this.selection.clone()),t instanceof h.NullSelectionModel&&this.emit("focus"),e instanceof h.NullSelectionModel&&this.emit("blur")),c&&this.emitContextChange()}}},{key:"getSelectedNodeFromSelection",value:function(e){if(!((e=e||this.selection)instanceof p.LinearSelectionModel))return null;var t=e.getRange();if(!t.isCollapsed()){var n=this.documentModel.documentNode.getNodeFromOffset(t.start+1);if(n&&n.getOuterRange().equalsSelection(t))return n}return null}},{key:"setNullSelection",value:function(){this.setSelection(new h.NullSelectionModel(this.documentModel))}},{key:"setLinearSelection",value:function(e){this.setSelection(new p.LinearSelectionModel(this.documentModel,e))}},{key:"selectFirstContentOffset",value:function(){var e=this.documentModel.data.getNearestContentOffset(0,1);-1===e?this.setNullSelection():this.setLinearSelection(new o.Range(e))}},{key:"selectLastContentOffset",value:function(){var e=this.documentModel.data.getNearestContentOffset(this.documentModel.data.getLength(),-1);-1===e?this.setNullSelection():this.setLinearSelection(new o.Range(e))}},{key:"getFragment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new d.SurfaceModelFragment(this,e||this.selection,t,n)}},{key:"getLinearFragment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.getFragment(new p.LinearSelectionModel(this.documentModel,e),t,n)}},{key:"change",value:function(e,t){this.changeInternal(e,t)}},{key:"changeInternal",value:function(e,t){var n=this,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.queueContextChanges((function(){var i=n.selection.clone(),r=!1;if(e){n.transacting=!0;try{var a=!0,o=!1,l=void 0;try{for(var c,u=e[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;d.isNoOp()||(s||(n.truncateUndoStack(),n.newTransactions.length||(n.selectionBefore=i),n.newTransactions.push(d)),n.documentModel.commit(d),d.hasElementAttributeOperations()&&(r=!0))}}catch(p){o=!0,l=p}finally{try{a||null==u.return||u.return()}finally{if(o)throw l}}}finally{n.transacting=!1}n.emit("history")}var h=n.selection;t?n.setSelection(t):e&&n.setSelection(n.selection),!i.equals(h)&&h.equals(n.selection)&&n.emit("select",n.selection.clone()),r&&n.emitContextChange()}))}},{key:"startHistoryTracking",value:function(){var e=this;null===this.historyTrackingInterval&&(this.historyTrackingInterval=setInterval((function(){return e.breakpoint()}),3e3))}},{key:"stopHistoryTracking",value:function(){null!==this.historyTrackingInterval&&(clearInterval(this.historyTrackingInterval),this.historyTrackingInterval=null)}},{key:"breakpoint",value:function(){return this.stopHistoryTracking(),this.startHistoryTracking(),this.newTransactions.length?(this.undoStack.push({transactions:this.newTransactions,selectionBefore:this.selectionBefore.clone(),selection:this.selection.clone()}),this.newTransactions=[],!0):(this.selectionBefore instanceof h.NullSelectionModel&&!(this.selection instanceof h.NullSelectionModel)&&(this.selectionBefore=this.selection.clone()),!1)}},{key:"hasBeenModified",value:function(){return this.undoIndex<this.undoStack.length||this.newTransactions.length>0}},{key:"truncateUndoStack",value:function(){this.undoIndex>0&&(this.undoStack=this.undoStack.slice(0,this.undoStack.length-this.undoIndex),this.undoIndex=0)}},{key:"canUndo",value:function(){return this.hasBeenModified()}},{key:"canRedo",value:function(){return this.undoIndex>0}},{key:"undo",value:function(){if(this.canUndo()){this.breakpoint(),this.undoIndex++;var e=this.undoStack[this.undoStack.length-this.undoIndex],t=e.transactions.map((function(e){return e.reversed()})).reverse();this.changeInternal(t,e.selectionBefore,!0)}}},{key:"redo",value:function(){if(this.canRedo()){this.breakpoint();var e=this.undoStack[this.undoStack.length-this.undoIndex];this.undoIndex--;var t=e.transactions.map((function(e){return e.clone()}));this.changeInternal(t,e.selection,!0)}}},{key:"getInsertionAnnotations",value:function(){return this.insertionAnnotations.clone()}},{key:"setInsertionAnnotations",value:function(e){this.insertionAnnotations=e?e.clone():new c.AnnotationSet(this.documentModel.store),this.emit("insertionAnnotationsChange",this.insertionAnnotations),this.emit("contextChange")}},{key:"addInsertionAnnotations",value:function(e){e instanceof u.AnnotationModel?this.insertionAnnotations.push(e):this.insertionAnnotations.addSet(e),this.emit("insertionAnnotationsChange",this.insertionAnnotations),this.emit("contextChange")}},{key:"removeInsertionAnnotations",value:function(e){e instanceof u.AnnotationModel?this.insertionAnnotations.remove(e):this.insertionAnnotations.removeSet(e),this.emit("insertionAnnotationsChange",this.insertionAnnotations),this.emit("contextChange")}},{key:"queueContextChanges",value:function(e){if(this.queueingContextChanges)e();else{var t;try{this.queueingContextChanges=!0,this.contextChangeQueued=!1,e()}finally{t=this.contextChangeQueued,this.queueingContextChanges=!1,this.contextChangeQueued=!1}t&&this.emit("contextChange")}}},{key:"emitContextChange",value:function(){this.queueingContextChanges?this.contextChangeQueued=!0:this.emit("contextChange")}}]),e}();v=m([a.mixin(l.EventEmitter)],v)},"./src/model/SurfaceModelFragment.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"SurfaceModelFragment",(function(){return m})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.concat"),n("core-js/modules/es.array.filter"),n("core-js/modules/es.array.index-of"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.map"),n("core-js/modules/es.array.slice"),n("core-js/modules/es.array.splice"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/es.string.trim"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./src/model/selections/NullSelectionModel.ts"),o=n("./src/model/selections/LinearSelectionModel.ts"),l=n("./src/model/DocumentModel.ts"),c=n("./src/model/Transaction.ts"),u=n("./src/model/LinearData.ts"),d=n("./src/model/AnnotationSet.ts"),h=n("./src/model/AnnotationModelFactory.ts"),p=n("./src/model/ModelNodeFactory.ts"),f=n("./src/Range.ts"),m=function(){function e(t,n){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(i.default)(this,e),this.surface=t,this.document=t.documentModel,this.selection=n||t.getSelection(),this.noAutoSelect=s,this.excludeInsertions=r,this.leafNodes=null,this.historyPointer=this.document.getCompleteHistoryLength()}return Object(r.default)(e,[{key:"isNull",value:function(){return this.selection instanceof a.NullSelectionModel}},{key:"getSelection",value:function(){return this.update(),this.selection}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getSelection().getCoveringRange();return t?this.document.data.slice(t,e):[]}},{key:"clone",value:function(t){return new e(this.surface,t||this.getSelection(),this.noAutoSelect,this.excludeInsertions)}},{key:"collapsedToStart",value:function(){return this.clone(this.getSelection().collapsedToStart())}},{key:"collapsedToEnd",value:function(){return this.clone(this.getSelection().collapsedToEnd())}},{key:"setExcludeInsertions",value:function(e){return this.excludeInsertions!==e&&(this.update(),this.excludeInsertions=e),this}},{key:"trimmed",value:function(){var e=this.getSelection();if(!(e instanceof o.LinearSelectionModel))return this.clone();var t=e.getRange(),n=t;return n=this.getText().trim().length?this.document.data.trimOuterSpaceFromRange(t):new f.Range(t.start),this.clone(new o.LinearSelectionModel(this.document,n))}},{key:"getText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getSelection().getCoveringRange();return t?this.document.data.getText(e,t):""}},{key:"getAnnotations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getSelection();if(t.isCollapsed())return this.surface.getInsertionAnnotations();for(var n=new d.AnnotationSet(this.document.store),s=t.getRanges(),i=0;i<s.length;i++){var r=this.document.data.getAnnotationsFromRange(s[i],e);if(0===i)n=r;else if(e)n.addSet(r);else{var a=r.getComparableAnnotationsFromSet(n);if(a.isEmpty()){n=a;break}(n=n.getComparableAnnotationsFromSet(r)).addSet(a)}}return n}},{key:"expandedLinearSelection",value:function(e,t){var n=this.getSelection();if(!(n instanceof o.LinearSelectionModel))return this.clone();var s,i=n.getRange();switch(e){case"word":s=i.isCollapsed()?this.document.data.getWordRange(i.start):f.Range.newCoveringRange([this.document.data.getWordRange(i.start),this.document.data.getWordRange(i.end)]).fixDirection();break;case"annotation":s=this.document.data.getAnnotatedRangeFromSelection(i,t),i.start>s.start||i.end<s.end?i.isBackwards()&&(s=s.flipped()):s=i;break;case"root":s=new f.Range(0,this.document.data.getLength());break;case"siblings":var r=this.document.selectNodes(i,"siblings");s=1===r.length?r[0].node.getOuterRange():new f.Range(r[0].nodeOuterRange.start,r[r.length-1].nodeOuterRange.end);break;case"closest":var l=this.document.selectNodes(i,"siblings");if(l[0].nodeRange.equalsSelection(i)&&l[0].node instanceof t){s=l[0].nodeOuterRange;break}for(var c=l[0].node.parent;c&&!(c instanceof t);)c=c.parent;c&&(s=c.getOuterRange());break;case"parent":var u=this.document.selectNodes(i,"siblings")[0].node.parent;u&&(s=u.getOuterRange())}return this.clone(s?new o.LinearSelectionModel(this.document,s):new a.NullSelectionModel(this.document))}},{key:"update",value:function(e){if(e&&!e.equals(this.selection))this.selection=e,this.leafNodes=null,this.historyPointer=this.document.getCompleteHistoryLength();else if(this.historyPointer<this.document.getCompleteHistoryLength()){var t=this.document.getCompleteHistorySince(this.historyPointer);this.selection=this.selection.translatedByTransactions(t,this.excludeInsertions),this.leafNodes=null,this.historyPointer+=t.length}return this}},{key:"change",value:function(e,t){if(!t&&this.isNull())throw new Error("Cannot change null fragment without selection");this.surface.change(e,!this.noAutoSelect&&(t||this.getSelection().translatedByTransactions(e,this.excludeInsertions))),t&&this.update(t)}},{key:"select",value:function(){return this.surface.setSelection(this.getSelection()),this}},{key:"delete",value:function(e){var t=this.getSelection().getCoveringRange();if(t.isCollapsed())return this;var n=c.Transaction.fromRemoval(this.document,t);this.change([n]);var s,i=n.translateRange(t);if(!i.isCollapsed()&&(s=this.document.getBranchNodeFromOffset(i.end))&&s.getRange().start>=i.end){var r=this.document.getBranchNodeFromOffset(i.start);if(r.getRange().isCollapsed())for(;n=c.Transaction.fromRemoval(this.document,r.getOuterRange()),r=r.parent,this.change([n]),r&&0===r.children.length&&r.hasSlugAtOffset(r.getRange().start)&&r.canHaveChildrenNotContent();)i=n.translateRange(i);else{var a=this.document.data.slice(s.getRange()),l=s;l.traverseUp((function(e){var t=e.parent;return 1===t.children.length&&(l=t,!0)})),l.hasSignificantWhitespace()&&!r.hasSignificantWhitespace()?(a.length&&"\n"===u.LinearData.getCharacter(a[a.length-1])&&a.pop(),a=u.LinearData.convertDataFromSignificantWhitespace(a)):!l.hasSignificantWhitespace()&&r.hasSignificantWhitespace()&&(a=u.LinearData.convertDataToSignificantWhitespace(a)),(n=c.Transaction.fromRemoval(this.document,l.getOuterRange())).isNoOp()||this.change([n,c.Transaction.fromInsertion(this.document,i.start,a)])}}var d=this.document.data.getNearestContentOffset(i.start,e||-1);return i=d>-1?new f.Range(d):new f.Range(i.start),this.change([],new o.LinearSelectionModel(this.document,i)),this}},{key:"removeContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getSelection().getCoveringRange();return t&&!t.isCollapsed()&&this.change([c.Transaction.fromRemoval(this.document,t,e)]),this}},{key:"insertContent",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.getSelection().getCoveringRange();if(!i)return this;i.isCollapsed()||(n&&(t=this.getAnnotations()),this.removeContent(s));var r=i.start;if(e.length){n&&!t&&(t=this.document.data.getAnnotationsAtOffset(0===r?0:r-1)),t&&t.getLength()>0&&l.DocumentModel.addAnnotationsToData(e,t);var u=c.Transaction.fromInsertion(this.document,r,e),d=u.getModifiedRange();this.change([u],d?new o.LinearSelectionModel(this.document,d):new a.NullSelectionModel(this.document))}return this}},{key:"insertDocument",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.getSelection().getCoveringRange();if(!i)return this;i.isCollapsed()||this.removeContent(n);var r=e.data.getData(),l=this.document.getBranchNodeFromOffset(i.start);if(l&&l.canContainContent()){var d=l.getOuterRange();if(0===l.getLength()&&l.replaceableWhenEmpty()){var h=this.document.store.merge(e.store);e.data.remapStoreIndexes(h);var m=c.Transaction.fromReplacement(this.document,d,r);if(!m.isNoOp()){var v=m.getModifiedRange();this.change([m],v?new o.LinearSelectionModel(this.document,v):new a.NullSelectionModel(this.document))}return this}var b=this.document.data.slice(d,!0),g=r[0],y=!0;if(g&&u.LinearData.isElementData(g)&&u.LinearData.isOpenElementData(g)&&p.modelNodeFactory.canNodeContainContent(g.type)){r.shift();for(var w=!1,_=0,k=0;_<r.length&&k>=0;_++){var C=r[_];if(u.LinearData.isElementData(C))if(u.LinearData.isOpenElementData(C))k++;else{if(u.LinearData.getType(C)===g.type){w=!0,C.type="/"+l.type;break}k--}}w||(y=!1)}if(y){var x=r[r.length-1];if(x&&u.LinearData.isElementData(x)&&u.LinearData.isCloseElementData(x)&&p.modelNodeFactory.canNodeContainContent(u.LinearData.getType(x))){r.pop(),b[b.length-1].type=x.type;var j=this.document.store.merge(e.store);e.data.remapStoreIndexes(j),b.splice.apply(b,[i.start-d.start,0].concat(Object(s.default)(r)));var O=c.Transaction.fromReplacement(this.document,d,b);return this.change([O],new o.LinearSelectionModel(this.document,new f.Range(i.start+r.length))),this}}}var S=c.Transaction.fromDocumentInsertion(this.document,i.start,e,t);if(!S.isNoOp()){var E=S.getModifiedRange();this.change([S],E?new o.LinearSelectionModel(this.document,E):new a.NullSelectionModel(this.document))}return this}},{key:"annotateContent",value:function(e,t){var n=new d.AnnotationSet(this.document.store),s=this.getSelection().getRanges(),i=[];if("string"==typeof t)if("set"===e)n.push(h.annotationModelFactory.create(t));else{var r=!0,a=!1,o=void 0;try{for(var l,u=s[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var p=l.value;n.addSet(this.document.data.getAnnotationsFromRange(p,!0).getAnnotationsById(t))}}catch(O){a=!0,o=O}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}}else n.push(t);var f=!0,m=!1,v=void 0;try{for(var b,g=s[Symbol.iterator]();!(f=(b=g.next()).done);f=!0){var y=b.value;if(y.isCollapsed())"set"===e?this.surface.addInsertionAnnotations(n):this.surface.removeInsertionAnnotations(n);else{var w=!0,_=!1,k=void 0;try{for(var C,x=n.annotations()[Symbol.iterator]();!(w=(C=x.next()).done);w=!0){var j=C.value;i.push(c.Transaction.fromAnnotation(this.document,y,e,j))}}catch(O){_=!0,k=O}finally{try{w||null==x.return||x.return()}finally{if(_)throw k}}}}}catch(O){m=!0,v=O}finally{try{f||null==g.return||g.return()}finally{if(m)throw v}}return this.change(i),this}},{key:"changeAttributes",value:function(e,t){var n=this.getCoveredNodes(),s=[],i=!0,r=!1,a=void 0;try{for(var o,l=n[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var u=o.value;!u.node.isWrapped()||t&&u.node.getType()!==t||u.range&&u.range.isCollapsed()||s.push(c.Transaction.fromAttributeChanges(this.document,u.nodeOuterRange.start,e))}}catch(d){r=!0,a=d}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}return s.length&&this.change(s),this}},{key:"isolateAndUnwrap",value:function(e){var t=this;if(!(this.getSelection()instanceof o.LinearSelectionModel))return this;for(var n=p.modelNodeFactory.getSuggestedParentNodeTypes(e),s=this.getSiblingNodes(),i=0,r=s[0].node,a=r.getOuterRange().start,l=!1,u=[];n&&-1===n.indexOf(r.parent.type);)r.parent.children.indexOf(r)>0&&(l=!0),r=r.parent,l?u.unshift(r):a=r.getOuterRange().start,i++;for(var d=s[s.length-1].node,h=d.getOuterRange().end,f=!1,m=[];n&&-1!==n.indexOf(d.parent.type);)d.parent.children.indexOf(d)<d.parent.children.length-1&&(f=!0),d=d.parent,f?m.unshift(d):h=d.getOuterRange().end;var v=this.excludeInsertions;this.setExcludeInsertions(!0);var b=function(e,n){var s=[],i=!0,r=!1,o=void 0;try{for(var l,u=e[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var d=l.value;s.unshift({type:"/".concat(d.type)}),s.push(d.getClonedElement())}}catch(f){r=!0,o=f}finally{try{i||null==u.return||u.return()}finally{if(r)throw o}}var p=c.Transaction.fromInsertion(t.document,n?a:h,s);t.change([p]),n&&(a+=2*e.length,h+=2*e.length)};return l&&b(u,!0),f&&b(m,!1),this.setExcludeInsertions(v),this.unwrapNodes(i,0),this}},{key:"wrapNodes",value:function(e){var t=this.getSelection().getCoveringRange();if(!t)return this;var n=c.Transaction.fromWrap(this.document,t,[],[],[],e);return this.change([n]),this}},{key:"wrapAllNodes",value:function(e,t){var n=this.getSelection().getCoveringRange();if(!n)return this;var s=c.Transaction.fromWrap(this.document,n,[],e,[],t);return this.change([s]),this}},{key:"unwrapNodes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.getSelection().getCoveringRange();if(!n)return this;if(n.getLength()<2*t)throw new Error("Cannot unwrap by greater depth than maximum theoretical depth of selection");for(var s=this.surface.documentModel.data,i=[],r=0;r<t;r++){if(!s.isElementData(n.start+r))throw new Error("Inner depth covers non-element data item");i.push(s.getDataAt(n.start+r))}for(var a=[],o=e;o>0;o--){if(!s.isElementData(n.start-o))throw new Error("Outer depth covers non-element data item");a.push(s.getDataAt(n.start-o))}var l=c.Transaction.fromWrap(this.document,n,a,[],i,[]);return this.change([l]),this}},{key:"convertNodes",value:function(e,t){var n=this.getSelection().getCoveringRange();if(!n)return this;var s=c.Transaction.fromContentBranchConversion(this.document,n,e,t);return this.change([s]),this}},{key:"getCoveredNodes",value:function(){var e=this.getSelection().getCoveringRange();return e?this.document.selectNodes(e,"covered"):[]}},{key:"getSiblingNodes",value:function(){var e=this.getSelection().getCoveringRange();return e?this.document.selectNodes(e,"siblings"):[]}},{key:"getBranchNodes",value:function(){var e=this.getSelection().getCoveringRange();return e?this.document.selectNodes(e,"branches"):[]}},{key:"getLeafNodes",value:function(){var e=this.getSelection().getCoveringRange();return e?(this.update(),this.leafNodes||(this.leafNodes=this.document.selectNodes(e,"leaves")),this.leafNodes):[]}},{key:"getSelectedLeafNodes",value:function(){var e=this.getLeafNodes();return e.filter((function(t){return 1===e.length||!t.range||t.range.getLength()})).map((function(e){return e.node}))}},{key:"adjustedLinearSelection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!(this.getSelection()instanceof o.LinearSelectionModel))return this.clone();var n=this.getSelection().getRange(),s=n&&new f.Range(n.start+e,n.end+t);return this.clone(new o.LinearSelectionModel(this.document,s))}},{key:"getSelectedNode",value:function(){return this.update(),this.selection.equals(this.surface.getSelection())?this.surface.selectedNode:this.surface.getSelectedNodeFromSelection(this.selection)}},{key:"getSelectedModels",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isNull())return[];var t=this.getAnnotations(e),n=[];if(e){var i=this.getCoveredNodes(),r=!0,a=!1,o=void 0;try{for(var l,c=i[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;u.range&&u.range.isCollapsed()||n.push(u.node)}}catch(h){a=!0,o=h}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}}else{var d=this.getSelectedNode();d&&n.push(d)}return[].concat(n,Object(s.default)(t.getAnnotations()))}}]),e}()},"./src/model/TableMatrix.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TableMatrix",(function(){return r})),n.d(t,"TableMatrixCell",(function(){return a})),n("core-js/modules/es.array.concat"),n("core-js/modules/es.array.find"),n("core-js/modules/es.array.index-of"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.map"),n("core-js/modules/es.array.slice"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.set"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=function(){function e(t){Object(s.default)(this,e),this.tableNode=t,this.matrix=null,this.rowNodes=null}return Object(i.default)(e,[{key:"invalidate",value:function(){this.matrix=null,this.rowNodes=null}},{key:"update",value:function(){if(!this.matrix&&!this.rowNodes){var e,t=[],n=[],s=this.tableNode.getIterator(),i=-1,r=-1;for(s.on("newRow",(function(e){i++,r=-1,t[i]=t[i]||[],n.push(e)}));e=s.next();){for(r++;t[i][r];)r++;var o=new a(e,i,r);t[i][r]=o;for(var l=e.getRowspan(),c=e.getColspan(),u=0;u<l;u++)for(var d=0;d<c;d++)if(0!==u||0!==d){var h=i+u,p=r+d;t[h]=t[h]||[],t[h][p]=new a(e,h,p,o)}}this.matrix=t,this.rowNodes=n}}},{key:"getCell",value:function(e,t){return this.update(),this.matrix[t]&&this.matrix[t][e]}},{key:"getCells",value:function(e,t,n,s){for(var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=[],a=new Set,o=t;o<=s;o++)for(var l=e;l<=n;l++){var c=this.getCell(l,o);c&&(!i&&c.isPlaceholder()&&(c=c.owner),a.has(c.key)||(r.push(c),a.add(c.key)))}return r}},{key:"getRowCount",value:function(){return this.update(),this.matrix.length}},{key:"getColCount",value:function(e){return this.update(),this.matrix[e]?this.matrix[e].length:0}},{key:"getMaxColCount",value:function(){return this.update(),this.matrix.reduce((function(e,t){return Math.max(e,t.length)}),0)}},{key:"getCol",value:function(e){return this.update(),this.matrix.map((function(t){return t[e]}))}},{key:"getRow",value:function(e){return this.update(),this.matrix[e].slice()}},{key:"getRowNodes",value:function(){return this.update(),this.rowNodes.slice()}},{key:"getRowNode",value:function(e){return this.update(),this.rowNodes[e]}},{key:"lookupCell",value:function(e){this.update();var t=this.rowNodes.indexOf(e.parent);return-1===t?null:this.matrix[t].find((function(t){return t.node===e}))}},{key:"findClosestCell",value:function(e){this.update();for(var t=this.matrix[e.row],n=e.col;n>=0;n--)if(!t[n].isPlaceholder())return t[n];for(var s=e.col+1;s<t.length;s++)if(!t[s].isPlaceholder())return t[s];return null}}]),e}(),a=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(s.default)(this,e),this.node=t,this.row=n,this.col=i,this.key="".concat(n,"-").concat(i),this.owner=r||this}return Object(i.default)(e,[{key:"isPlaceholder",value:function(){return this.owner!==this}},{key:"equals",value:function(e){return this.owner.key===e.owner.key}}],[{key:"sortDescending",value:function(e,t){return e.row!==t.row?t.row-e.row:t.col-e.col}}]),e}()},"./src/model/TableNodeCellIterator.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TableNodeCellIterator",(function(){return p}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/get.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./src/EventEmitter.ts"),u=n("./src/model/nodes/TableSectionModelNode.ts"),d=n("./src/model/nodes/TableRowModelNode.ts"),h=n("./src/model/nodes/TableCellModelNode.ts"),p=function(e){function t(e){var n;return Object(s.default)(this,t),(n=Object(r.default)(this,Object(a.default)(t).call(this))).tableNode=e,n.sectionNode=null,n.rowNode=null,n.cellNode=null,n.sectionIndex=0,n.rowIndex=0,n.cellIndex=0,n.sectionCount=n.tableNode.children.length,n.rowCount=0,n.cellCount=0,n.finished=!1,n}return Object(l.default)(t,e),Object(i.default)(t,[{key:"on",value:function(e,n){return Object(o.default)(Object(a.default)(t.prototype),"on",this).call(this,e,n)}},{key:"next",value:function(){if(this.finished)throw new Error("TableNodeCellIterator is finished");return this.nextCell(),this.cellNode}},{key:"nextSection",value:function(){if(this.sectionIndex>=this.sectionCount)return this.finished=!0,void(this.sectionNode=null);var e=this.tableNode.children[this.sectionIndex];this.sectionIndex++,this.rowIndex=0,e instanceof u.TableSectionModelNode?(this.sectionNode=e,this.rowCount=this.sectionNode.children.length,this.emit("newSection",this.sectionNode)):this.nextSection()}},{key:"nextRow",value:function(){if(this.rowIndex>=this.rowCount&&(this.nextSection(),this.finished))this.rowNode=null;else{var e=this.sectionNode.children[this.rowIndex];this.rowIndex++,this.cellIndex=0,e instanceof d.TableRowModelNode?(this.rowNode=e,this.cellCount=this.rowNode.children.length,this.emit("newRow",e)):this.nextRow()}}},{key:"nextCell",value:function(){if(this.sectionNode||this.nextSection(),this.rowNode||this.nextRow(),this.cellIndex>=this.cellCount&&(this.nextRow(),this.finished))this.cellNode=null;else{var e=this.rowNode.children[this.cellIndex];this.cellNode=e instanceof h.TableCellModelNode?e:null,this.cellIndex++}}}]),t}(c.EventEmitter)},"./src/model/Transaction.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"Transaction",(function(){return d})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.concat"),n("core-js/modules/es.array.index-of"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.map"),n("core-js/modules/es.array.slice"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.set"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./src/model/LinearData.ts"),o=n("./src/model/ModelNodeFactory.ts"),l=n("./src/Range.ts"),c=n("./src/util.ts");function u(e,t,n,s){for(var i=s?[{type:"break"},{type:"/break"}]:["\n"],r=s?["\n"]:[{type:"break"},{type:"/break"}],o=n.start;;){for(var l=o;l<n.end&&!a.LinearData.compareItems(t.data.getDataAt(l),i[0]);)l++;if(e.pushRetain(l-o),(o=l)===n.end)break;e.pushReplaceUnsafe(t,o,i.length,c.clone(r)),o+=i.length}}var d=function(){function e(t){Object(i.default)(this,e),this.document=t,this.operations=[],this.applied=!1}return Object(r.default)(e,[{key:"clone",value:function(){var t=new e(this.document);return t.operations=c.clone(this.operations),t}},{key:"reversed",value:function(){var t,n=new e(this.document);return(t=n.operations).push.apply(t,Object(s.default)(this.operations.map((function(e){var t;switch(e.type){case"insert":t={type:"remove",remove:c.clone(e.insert)};break;case"remove":t={type:"insert",insert:c.clone(e.remove)};break;case"attribute":var n=[(t=c.clone(e)).to,t.from];t.from=n[0],t.to=n[1];break;case"annotate":(t=c.clone(e)).method="set"===t.method?"clear":"set";break;default:t=c.clone(e)}return t})))),n}},{key:"hasBeenApplied",value:function(){return this.applied}},{key:"markAsApplied",value:function(){this.applied=!0}},{key:"hasOperationWithTypes",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.operations.some((function(e){return-1!==t.indexOf(e.type)}))}},{key:"hasContentDataOperations",value:function(){return this.hasOperationWithTypes("insert","remove")}},{key:"hasElementAttributeOperations",value:function(){return this.hasOperationWithTypes("attribute")}},{key:"hasAnnotationOperations",value:function(){return this.hasOperationWithTypes("annotate")}},{key:"pushFinalRetain",value:function(e,t){this.pushRetain(e.data.getLength()-t)}},{key:"pushInsert",value:function(e,t,n,s){var i=e.fixInsertion(s,n);return this.pushRetain(i.offset-t),this.pushInsertUnsafe(i.data),i.offset}},{key:"pushRemove",value:function(e,t,n){if(n.isCollapsed())return this.pushRetain(n.start-t),n.start;var s=e.selectNodes(n,"covered");if(!s.length)throw new Error("Invalid range, cannot remove from ".concat(n.start," to ").concat(n.end));var i,r,a=s[0],o=s[s.length-1];if(a.node.canBeMergedWith(o.node))return a.range||o.range?(i=(a.range||(a.node.isContent()?a.nodeOuterRange:a.nodeRange)).start,r=(o.range||(o.node.isContent()?o.nodeOuterRange:o.nodeRange)).end):(i=a.nodeOuterRange.start,r=o.nodeOuterRange.end),this.pushRetain(i-t),r=this.pushSafeRemoveOperations(e,i,r);var l=t,c=!0,u=!1,d=void 0;try{for(var h,p=s[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var f=h.value,m=void 0,v=void 0;f.range?(m=f.range.start,v=f.range.end):(m=f.nodeOuterRange.start,v=f.nodeOuterRange.end),void 0===r?(i=m,r=v):r===m?r=v:(this.pushRetain(i-l),l=this.pushSafeRemoveOperations(e,i,r),i=m,r=v)}}catch(b){u=!0,d=b}finally{try{c||null==p.return||p.return()}finally{if(u)throw d}}return void 0!==r&&(this.pushRetain(i-l),l=this.pushSafeRemoveOperations(e,i,r)),l}},{key:"pushRetain",value:function(e){if(e<0)throw new Error("Retain length cannot be negative");if(e){var t=this.operations[this.operations.length-1];t&&"retain"===t.type?t.length+=e:this.operations.push({type:"retain",length:e})}}},{key:"pushReplaceUnsafe",value:function(e,t,n,s){this.pushRemoveUnsafe(e,t,n),this.pushInsertUnsafe(s)}},{key:"pushInsertUnsafe",value:function(e){if(0!==e.length){var t,n=this.operations[this.operations.length-1],i=this.operations[this.operations.length-2];if(n&&"insert"===n.type)(t=n.insert).push.apply(t,Object(s.default)(e));else if(n&&"remove"===n.type&&i&&"insert"===i.type){var r;(r=i.insert).push.apply(r,Object(s.default)(e))}else this.operations.push({type:"insert",insert:e})}}},{key:"pushRemoveUnsafe",value:function(e,t,n){if(0!==n){var i,r=this.operations[this.operations.length-1],a=this.operations[this.operations.length-2],o=e.data.slice(t,t+n);if(r&&"remove"===r.type)(i=r.remove).push.apply(i,Object(s.default)(o));else if(r&&"insert"===r.type&&a&&"remove"===a.type){var l;(l=a.remove).push.apply(l,Object(s.default)(o))}else this.operations.push({type:"remove",remove:o})}}},{key:"pushSafeRemoveOperations",value:function(e,t,n){return this.pushRemoveUnsafe(e,t,n-t),n}},{key:"pushAttributeChanges",value:function(e,t){for(var n in e)t[n]!==e[n]&&this.pushReplaceElementAttribute(n,t[n],e[n]);return this}},{key:"pushReplaceElementAttribute",value:function(e,t,n){return this.operations.push({type:"attribute",key:e,from:t,to:n}),this}},{key:"pushStartAnnotating",value:function(e,t){return this.operations.push({type:"annotate",method:e,index:t,bias:"start"}),this}},{key:"pushStopAnnotating",value:function(e,t){return this.operations.push({type:"annotate",method:e,index:t,bias:"stop"}),this}},{key:"isNoOp",value:function(){return 0===this.operations.length||1===this.operations.length&&"retain"===this.operations[0].type}},{key:"translateOffset",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0,s=0,i=0;i<this.operations.length;i++){var r=this.operations[i];switch(r.type){case"insert":case"remove":var a=0,o=0;e:for(;i<this.operations.length;i++){var l=this.operations[i];switch(l.type){case"insert":a+=l.insert.length;break;case"remove":o+=l.remove.length;break;default:i--;break e}}var c=n;if(n+=a-o,e===s+o)return t&&a>o?e+n-a+o:e+n;if(e===s)return 0===a?s+o+n:s+c;if(e>s&&e<s+o)return s+o+n;s+=o;break;case"retain":if(e>=s&&e<s+r.length)return e+n;s+=r.length}}return e+n}},{key:"translateRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.translateOffset(e.start,!t),s=this.translateOffset(e.end,t);return e.isBackwards()?new l.Range(s,n):new l.Range(n,s)}},{key:"getModifiedRange",value:function(){var e,t,n=0,s=0,i=this.document.data.getLength(),r=!0,a=!1,o=void 0;try{e:for(var c,u=this.operations[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var d=c.value;switch(d.type){case"retain":if(n+d.length>i)break e;s+=d.length,n+=d.length;break;default:void 0===e&&(e=s),"insert"===d.type?s+=d.insert.length:"remove"===d.type&&(n+=d.remove.length),t=s}}}catch(h){a=!0,o=h}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}return void 0===e||void 0===t?null:new l.Range(e,t)}}],[{key:"fromInsertion",value:function(t,n,s){var i=new e(t),r=i.pushInsert(t,0,n,s);return i.pushFinalRetain(t,r),i}},{key:"fromRemoval",value:function(t,n){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=new e(t),r=i.pushRemove(t,0,n);return!s&&0===n.start&&n.end>=t.data.getLength()&&(r=i.pushInsert(t,r,r,[{type:"paragraph"},{type:"/paragraph"}])),i.pushFinalRetain(t,r),i}},{key:"fromReplacement",value:function(t,n,s){var i=new e(t),r=i.pushRemove(t,0,n);return r=i.pushInsert(t,r,r,s),i.pushFinalRetain(t,r),i}},{key:"fromAnnotation",value:function(t,n,s,i){for(var r=new e(t),a=t.data,l=t.store.index(i),c=n.start,u=n.start,d=0,h=!1,p=!1;c<n.end;){var f=void 0;if(a.isElementData(c)){var m=a.getTypeAtOffset(c);o.modelNodeFactory.shouldIgnoreChildren(m)&&(d+=a.isOpenElementData(c)?1:-1),f=!!o.modelNodeFactory.isNodeContent(m)&&("clear"===s||o.modelNodeFactory.canNodeTakeAnnotationType(m,i))}else f=!0;if(!(f=f&&0===d)||h&&!a.isCloseElementData(c))p&&(r.pushRetain(u),r.pushStopAnnotating(s,l),u=0,p=!1);else if(a.isElementData(c)&&a.isCloseElementData(c)||h)a.isCloseElementData(c)&&(h=!1);else{a.isElementData(c)&&(h=!0);var v=void 0;(v="set"===s?a.getAnnotationsAtOffset(c).containsComparable(i):a.getAnnotationsAtOffset(c).contains(i))&&"set"===s||!v&&"clear"===s?p&&(r.pushRetain(u),r.pushStopAnnotating(s,l),u=0,p=!1):p||(r.pushRetain(u),r.pushStartAnnotating(s,l),u=0,p=!0)}u++,c++}return r.pushRetain(u),p&&r.pushStopAnnotating(s,l),r.pushFinalRetain(t,n.end),r}},{key:"fromAttributeChanges",value:function(t,n,s){var i=new e(t);if(!t.data.isElementData(n))throw new Error("Cannot set attributes to non-element data");if(t.data.isCloseElementData(n))throw new Error("Cannot set attributes on closing element");return i.pushRetain(n),i.pushAttributeChanges(s,t.data.getDataAt(n).attributes||{}),i.pushFinalRetain(t,n),i}},{key:"fromContentBranchConversion",value:function(t,n,s,i){var r,a,d=new e(t),h=t.selectNodes(n,"leaves"),p={type:s},f={type:"/".concat(s)},m=o.modelNodeFactory.hasSignificantWhitespace(s);c.isPlainObject(i)?p.attributes=i:i={};var v=!0,b=!1,g=void 0;try{for(var y,w=h[Symbol.iterator]();!(v=(y=w.next()).done);v=!0){var _=y.value,k=_.node.isContent()?_.node.parent:_.node;if(k!==r&&k.canContainContent()&&(k.getType()!==s||!c.isSubset(i,k.element.attributes))){var C=k.getOuterRange();d.pushRetain(C.start-(r?a.end:0)),k.getType()===s?(d.pushAttributeChanges(i,k.element.attributes),d.pushRetain(k.getOuterLength())):(d.pushReplaceUnsafe(t,C.start,1,[c.clone(p)]),k.hasSignificantWhitespace()&&!m&&"\n"===t.data.getCharacterData(C.end-2)?(u(d,t,new l.Range(C.start+1,C.end-2),m),d.pushRemoveUnsafe(t,C.end-2,1)):!k.hasSignificantWhitespace()&&m?(u(d,t,new l.Range(C.start+1,C.end-1),m),d.pushInsertUnsafe(["\n"])):u(d,t,new l.Range(C.start+1,C.end-1),m),d.pushReplaceUnsafe(t,C.end-1,1,[c.clone(f)])),r=k,a=C}}}catch(x){b=!0,g=x}finally{try{v||null==w.return||w.return()}finally{if(b)throw g}}return d.pushFinalRetain(t,r?a.end:0),d}},{key:"fromMergedContentBranchConversion",value:function(t,n,s,i){var r=t.selectNodes(n,"leaves"),a=o.modelNodeFactory.hasSignificantWhitespace(s),d=[{type:s}],h=[{type:"/".concat(s)}],p=a?["\n","\n"]:[{type:"break"},{type:"/break"}];c.isPlainObject(i)?d[0].attributes=i:i={};var f=new Set(r.map((function(e){return e.node.isContent()?e.node.parent:e.node}))),m=[],v=!0,b=!1,g=void 0;try{for(var y,w=f[Symbol.iterator]();!(v=(y=w.next()).done);v=!0){var _=y.value;if(m.length){var k=m[m.length-1],C=k[k.length-1];C.type===_.type&&C.getOuterRange().end===_.getOuterRange().start?k.push(_):m.push([_])}else m.push([_])}}catch(P){b=!0,g=P}finally{try{v||null==w.return||w.return()}finally{if(b)throw g}}for(var x=new e(t),j=0,O=0,S=m;O<S.length;O++)for(var E=S[O],T=0;T<E.length;T++){var I=E[T],D=I.getOuterRange();x.pushRetain(D.start-j),0===T?x.pushReplaceUnsafe(t,D.start,1,c.clone(d)):x.pushReplaceUnsafe(t,D.start-1,2,c.clone(p)),u(x,t,new l.Range(D.start+1,D.end-1),a),T===E.length-1&&(!I.hasSignificantWhitespace()&&a&&x.pushInsertUnsafe(["\n"]),x.pushReplaceUnsafe(t,D.end-1,1,c.clone(h))),j=D.end}return x.pushFinalRetain(t,j),x}},{key:"fromWrap",value:function(t,n,s,i,r,a){var o=function(e){for(var t=[],n=0;n<e.length;n++)t.push({type:"/".concat(e[e.length-n-1].type)});return t},l=new e(t),u=o(a);if(n.start>s.length)l.pushRetain(n.start-s.length);else if(n.start<s.length)throw new Error("unwrapOuter is longer than the data processing range");if(i.length>0||s.length>0){for(var d=t.data.slice(n.start-s.length,n.start),h=0;h<d.length;h++){var p=s[h].type,f=d[h].type;if(f!==p)throw new Error("Element in unwrapOuter does not match: expected ".concat(p," but found ").concat(f))}l.pushReplaceUnsafe(t,n.start-s.length,s.length,c.clone(i))}if(a.length>0||r.length>0){for(var m,v=0,b=n.start;b<n.end;b++)if(t.data.isElementData(b))if(t.data.isOpenElementData(b)){if(0===v){for(var g=t.data.slice(b,b+r.length),y=0;y<g.length;y++){var w=r[y].type,_=g[y].type;if(_!==w)throw new Error("Element in unwrapEach does not match: expected ".concat(w," but found ").concat(_))}l.pushReplaceUnsafe(t,b,r.length,c.clone(a)),m=b+r.length}v++}else if(0==--v){var k=b+1-r.length;l.pushRetain(k-m),l.pushReplaceUnsafe(t,k,r.length,c.clone(u))}}else l.pushRetain(n.end-n.start);return l.pushReplaceUnsafe(t,n.end,s.length,o(i)),l.pushFinalRetain(t,n.end+s.length),l}},{key:"fromDocumentInsertion",value:function(t,n,s,i){var r=new a.LinearData(t.store,s.data.slice(i,!0)),o=t.store.merge(s.store);r.remapStoreIndexes(o);var l=new e(t),c=t.fixInsertion(r.getData(),n);return l.pushRetain(c.offset),l.pushReplaceUnsafe(t,c.offset,c.remove,c.data),l}}]),e}()},"./src/model/TransactionProcessor.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TransactionProcessor",(function(){return p})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.concat"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.map"),n("core-js/modules/es.array.splice"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),a=n("./src/model/DocumentModelSynchronizer.ts"),o=n("./src/model/AnnotationSet.ts"),l=n("./src/model/ModelNodeFactory.ts"),c=n("./src/Range.ts"),u=n("./src/model/LinearData.ts"),d=n("./src/util.ts");function h(e){var t="remove"===e.type?e.remove:[],n="insert"===e.type?e.insert:[],s=new u.LinearData(this.document.store,t),i=new u.LinearData(this.document.store,n),a=s.isContentData(),o=i.isContentData(),l=s.containsElementData(),d=i.containsElementData(),h=[];if(a&&o){this.queueSpliceModification(this.cursor+this.adjustment,t.length,n);var p=this.document.selectNodes(new c.Range(this.cursor,this.cursor+t.length),"leaves"),f=p[0].node;if(l||d||1!==p.length||"text"!==f.type)if(l||d||t.length||!n.length||1!==p.length||!f.canContainContent()||void 0===p[0].indexInNode&&0!==f.getLength()){var m=new c.Range(p[0].nodeOuterRange.start,p[p.length-1].nodeOuterRange.end);this.synchronizer.pushRebuild(m,new c.Range(m.start+this.adjustment,m.end+this.adjustment+n.length-t.length))}else this.synchronizer.pushInsertTextNode(f,p[0].indexInNode||0,n.length);else this.synchronizer.pushResize(f,n.length-t.length);this.advanceCursor(t.length),this.adjustment+=n.length-t.length}else{for(var v,b=e,g=0,y=0,w=0,_=0;;){if("remove"===b.type||"insert"===b.type){var k="remove"===b.type?b.remove:[],C="insert"===b.type?b.insert:[];this.queueSpliceModification(this.cursor+this.adjustment,k.length,C),h.push(new c.Range(this.cursor,this.cursor+k.length));var x=this.cursor;if(this.advanceCursor(k.length),k.length){var j=this.document.selectNodes(new c.Range(x,x+k.length),"siblings");h.push.apply(h,Object(r.default)(j.map((function(e){return e.nodeOuterRange}))))}var O=!0,S=!1,E=void 0;try{for(var T,I=k[Symbol.iterator]();!(O=(T=I.next()).done);O=!0){var D=T.value;u.LinearData.isElementData(D)&&(u.LinearData.isOpenElementData(D)?w++:w--)}}catch($){S=!0,E=$}finally{try{O||null==I.return||I.return()}finally{if(S)throw E}}var P=!0,A=!1,N=void 0;try{for(var R,M=C[Symbol.iterator]();!(P=(R=M.next()).done);P=!0){var L=R.value;if(u.LinearData.isElementData(L))if(u.LinearData.isOpenElementData(L))y++;else if(--y<_){var F=(v=v||this.document.getBranchNodeFromOffset(x)).getOffset(),B=F+v.getOuterLength();h.push(new c.Range(F,B)),v=v.parent||v,_--}}}catch($){A=!0,N=$}finally{try{P||null==M.return||M.return()}finally{if(A)throw N}}this.adjustment+=C.length-k.length,g+=C.length-k.length}else this.executeOperation(b);if(0===w&&0===y)break;if(!(b=this.nextOperation()))throw new Error("Unbalanced set of replace operations found")}var q=c.Range.newCoveringRange(h);this.synchronizer.pushRebuild(q,new c.Range(q.start+this.adjustment-g,q.end+this.adjustment))}}var p=function(){function e(t,n){Object(s.default)(this,e),this.document=t,this.transaction=n,this.operations=n.operations,this.operationIndex=0,this.cursor=0,this.adjustment=0,this.modificationQueue=[],this.rollbackQueue=[],this.synchronizer=new a.DocumentModelSynchronizer(t,n),this.setAnnotations=new o.AnnotationSet(t.store),this.clearAnnotations=new o.AnnotationSet(t.store)}return Object(i.default)(e,[{key:"nextOperation",value:function(){return this.operations[this.operationIndex++]}},{key:"executeOperation",value:function(t){if("function"!=typeof e.processors[t.type])throw new Error("Operation type ".concat(t.type," not supported"));e.processors[t.type].call(this,t)}},{key:"process",value:function(e){for(var t;t=this.nextOperation();)this.executeOperation(t);try{this.applyModifications()}catch(n){throw this.rollbackModifications(),n}this.transaction.markAsApplied();try{e&&e(),this.synchronizer.synchronize()}catch(n){throw this.rollbackModifications(),this.document.buildNodeTree(),n}}},{key:"queueSpliceModification",value:function(e,t,n){this.modificationQueue.push({type:"splice",offset:e,remove:t,insert:n})}},{key:"queueAnnotateDataModification",value:function(e,t){this.modificationQueue.push({type:"annotateData",offset:e,annotations:t})}},{key:"queueSetAttributeModification",value:function(e,t,n){this.modificationQueue.push({type:"setAttribute",offset:e,key:t,to:n})}},{key:"advanceCursor",value:function(e){this.cursor+=e}},{key:"applyModifications",value:function(){var t=this.modificationQueue;this.modificationQueue=[];var n=!0,s=!1,i=void 0;try{for(var r,a=t[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value,l=e.modifiers[o.type];this.rollbackQueue.unshift(l.call(this,o))}}catch(c){s=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}}},{key:"rollbackModifications",value:function(){var e=!0,t=!1,n=void 0;try{for(var s,i=this.rollbackQueue[Symbol.iterator]();!(e=(s=i.next()).done);e=!0)(0,s.value)()}catch(r){t=!0,n=r}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"applyAnnotations",value:function(e){var t=function(e,t,n,s){if(e.containsAnyOf(t))throw new Error("Invalid transaction. Annotation to be set is already set.");if(e.addSet(t,s),!e.containsAllOf(n))throw new Error("Invalid transaction. Annotation to be cleared is not set.");e.removeSet(n)};if(!this.setAnnotations.isEmpty()||!this.clearAnnotations.isEmpty()){for(var n=[],s=this.cursor;s<e;s++)n[s-this.cursor]=this.document.data.getAnnotationsAtOffset(s);for(var i=d.commonStartSequenceLength(n.map((function(e){return e.getIndices()}))),r=this.cursor;r<e;r++){if(this.document.data.isElementData(r)){if(!l.modelNodeFactory.isNodeContent(this.document.data.getTypeAtOffset(r)))throw new Error("Invalid transaction. Cannot annotate a non-content element.");if(this.document.data.isCloseElementData(r))continue}var a=this.document.data.getAnnotationsAtOffset(r);t(a,this.setAnnotations,this.clearAnnotations,i),this.queueAnnotateDataModification(r+this.adjustment,a)}this.cursor<e&&this.synchronizer.pushAnnotation(new c.Range(this.cursor+this.adjustment,e+this.adjustment))}}}]),e}();p.processors={insert:h,remove:h,retain:function(e){this.applyAnnotations(this.cursor+e.length),this.advanceCursor(e.length)},annotate:function(e){var t;t="set"===e.method?this.setAnnotations:this.clearAnnotations;var n=this.document.store.value(e.index);"start"===e.bias?t.push(n):t.remove(n)},attribute:function(e){if(!this.document.data.isElementData(this.cursor))throw new Error("Cannot set attributes on non-element data");this.queueSetAttributeModification(this.cursor+this.adjustment,e.key,e.to),this.synchronizer.pushAttributeChange(this.document.documentNode.getNodeFromOffset(this.cursor+1),e.key,e.from,e.to)}},p.modifiers={splice:function(e){var t,n=this,s=(t=this.document.data).splice.apply(t,[e.offset,e.remove].concat(Object(r.default)(e.insert)));return function(){var t;return(t=n.document.data).splice.apply(t,[e.offset,e.insert.length].concat(Object(r.default)(s)))}},annotateData:function(e){var t=this,n=this.document.data.getAnnotationsAtOffset(e.offset);return this.document.data.setAnnotationsAtOffset(e.offset,e.annotations),function(){return t.document.data.setAnnotationsAtOffset(e.offset,n)}},setAttribute:function(e){var t=this,n=this.document.data.getDataAt(e.offset),s=n.attributes&&n.attributes[e.key];return this.document.data.setAttributeAtOffset(e.offset,e.key,e.to),function(){return t.document.data.setAttributeAtOffset(e.offset,e.key,s)}}}},"./src/model/annotations/AnnotationModel.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"AnnotationModel",(function(){return u}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./src/model/Model.ts"),c=n("./src/util.ts"),u=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(o.default)(t,e),Object(i.default)(t,[{key:"getComparableObject",value:function(){var e=this.getHashObject();return delete e.originalDomNodes,e}},{key:"getComparableObjectForSerialization",value:function(){return this.getComparableObject()}},{key:"compareTo",value:function(e){return c.compare(this.getComparableObject(),e.getComparableObject())}},{key:"compareToForSerialization",value:function(e){return c.compare(this.getComparableObjectForSerialization(),e.getComparableObjectForSerialization())}}]),t}(l.Model);u.applyToAppendedContent=!0,u.inferFromView=!1,u.sequencesDisabled=!1,u.removes=[]},"./src/model/annotations/BoldAnnotationModel.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"BoldAnnotationModel",(function(){return d})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=n("./src/model/annotations/TextStyleAnnotationModel.ts"),c=n("./src/model/ModelRegistry.ts"),u=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(r.default)(t).apply(this,arguments))}return Object(a.default)(t,e),t}(l.TextStyleAnnotationModel);d.id="textStyle/bold",d.matchTagNames=["bold"],d=u([c.modelRegistry.register],d)},"./src/model/annotations/CodeAnnotationModel.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"CodeAnnotationModel",(function(){return d})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=n("./src/model/annotations/TextStyleAnnotationModel.ts"),c=n("./src/model/ModelRegistry.ts"),u=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(r.default)(t).apply(this,arguments))}return Object(a.default)(t,e),t}(l.TextStyleAnnotationModel);d.id="textStyle/code",d.matchTagNames=["code"],d.sequencesDisabled=!0,d=u([c.modelRegistry.register],d)},"./src/model/annotations/ItalicAnnotationModel.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ItalicAnnotationModel",(function(){return d})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=n("./src/model/annotations/TextStyleAnnotationModel.ts"),c=n("./src/model/ModelRegistry.ts"),u=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(r.default)(t).apply(this,arguments))}return Object(a.default)(t,e),t}(l.TextStyleAnnotationModel);d.id="textStyle/italic",d.matchTagNames=["italic"],d=u([c.modelRegistry.register],d)},"./src/model/annotations/LinkAnnotationModel.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"LinkAnnotationModel",(function(){return p})),n("core-js/modules/es.object.get-own-property-descriptor");var s,i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/model/annotations/AnnotationModel.ts"),d=n("./src/model/ModelRegistry.ts"),h=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},p=s=function(e){function t(){return Object(i.default)(this,t),Object(a.default)(this,Object(o.default)(t).apply(this,arguments))}return Object(l.default)(t,e),Object(r.default)(t,[{key:"getComparableObject",value:function(){return{type:s.id,href:this.element.attributes.href}}}],[{key:"toDataElements",value:function(e,t){var n=e[0];return[{type:this.id,attributes:{href:n.getAttribute("href")}}]}},{key:"toDomElements",value:function(e,t,n){var s=e[0],i=t.createElement("link");return i.setAttribute("href",s.attributes.href),[i]}}]),t}(u.AnnotationModel);p.id="link",p.matchTagNames=["link"],p=s=h([d.modelRegistry.register],p)},"./src/model/annotations/SpanAnnotationModel.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"SpanAnnotationModel",(function(){return p})),n("core-js/modules/es.object.get-own-property-descriptor");var s,i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/model/annotations/AnnotationModel.ts"),d=n("./src/model/ModelRegistry.ts"),h=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},p=s=function(e){function t(){return Object(i.default)(this,t),Object(a.default)(this,Object(o.default)(t).apply(this,arguments))}return Object(l.default)(t,e),Object(r.default)(t,[{key:"getComparableObject",value:function(){return{type:s.id,id:this.element.attributes.id}}}],[{key:"toDataElements",value:function(e,t){var n=e[0];return[{type:this.id,attributes:{id:n.getAttribute("id")}}]}},{key:"toDomElements",value:function(e,t,n){var s=e[0],i=t.createElement("span");return i.setAttribute("id",s.attributes.id),[i]}}]),t}(u.AnnotationModel);p.id="span",p.matchTagNames=["span"],p=s=h([d.modelRegistry.register],p)},"./src/model/annotations/StrikethroughAnnotationModel.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"StrikethroughAnnotationModel",(function(){return d})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=n("./src/model/annotations/TextStyleAnnotationModel.ts"),c=n("./src/model/ModelRegistry.ts"),u=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(r.default)(t).apply(this,arguments))}return Object(a.default)(t,e),t}(l.TextStyleAnnotationModel);d.id="textStyle/strikethrough",d.matchTagNames=["strike"],d=u([c.modelRegistry.register],d)},"./src/model/annotations/SubscriptAnnotationModel.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"SubscriptAnnotationModel",(function(){return d})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=n("./src/model/annotations/TextStyleAnnotationModel.ts"),c=n("./src/model/ModelRegistry.ts"),u=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(r.default)(t).apply(this,arguments))}return Object(a.default)(t,e),t}(l.TextStyleAnnotationModel);d.id="textStyle/subscript",d.matchTagNames=["sub"],d.removes=["textStyle/superscript"],d=u([c.modelRegistry.register],d)},"./src/model/annotations/SuperscriptAnnotationModel.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"SuperscriptAnnotationModel",(function(){return d})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=n("./src/model/annotations/TextStyleAnnotationModel.ts"),c=n("./src/model/ModelRegistry.ts"),u=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(r.default)(t).apply(this,arguments))}return Object(a.default)(t,e),t}(l.TextStyleAnnotationModel);d.id="textStyle/superscript",d.matchTagNames=["sup"],d.removes=["textStyle/subscript"],d=u([c.modelRegistry.register],d)},"./src/model/annotations/TextStyleAnnotationModel.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TextStyleAnnotationModel",(function(){return l}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(o.default)(t,e),Object(i.default)(t,[{key:"getComparableObject",value:function(){return{type:this.getType()}}}],[{key:"toDataElements",value:function(e,t){return[{type:this.id,attributes:{nodeName:e[0].nodeName.toLowerCase()}}]}},{key:"toDomElements",value:function(e,t,n){var s=e[0],i=s.attributes&&s.attributes.nodeName;return[t.createElement(i||this.matchTagNames[0])]}}]),t}(n("./src/model/annotations/AnnotationModel.ts").AnnotationModel);l.id="textStyle",l.matchTagNames=[]},"./src/model/annotations/UnderlineAnnotationModel.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"UnderlineAnnotationModel",(function(){return d})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=n("./src/model/annotations/TextStyleAnnotationModel.ts"),c=n("./src/model/ModelRegistry.ts"),u=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(r.default)(t).apply(this,arguments))}return Object(a.default)(t,e),t}(l.TextStyleAnnotationModel);d.id="textStyle/underline",d.matchTagNames=["underline"],d=u([c.modelRegistry.register],d)},"./src/model/documentFormats/HtmlDocumentFormat.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"HtmlDocumentFormat",(function(){return c})),n("core-js/modules/es.array.includes"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.set"),n("core-js/modules/es.string.includes"),n("core-js/modules/es.string.iterator"),n("core-js/modules/es.string.match"),n("core-js/modules/es.string.replace"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./src/model/DocumentBuilder.ts"),a=new Set(["TABLE","THEAD","TBODY","TFOOT","TR","TD","TH","COL","META","TEMPLATE","HEAD","TITLE","SCRIPT"]),o={acceptNode:function(e){return e.nodeType!==Node.ELEMENT_NODE||!e.tagName.includes(":")&&!a.has(e.tagName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}};function l(e){return document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,o)}var c=function(){function e(){Object(s.default)(this,e)}return Object(i.default)(e,[{key:"convert",value:function(e){var t=new DOMParser;this.htmlDoc=t.parseFromString(e,"text/html"),this.walker=l(this.htmlDoc.body),this.builder=new r.DocumentBuilder,this.significantWhitespace=!1,this.parse(this.htmlDoc.body);var n=this.builder.document;return this.htmlDoc=null,this.walker=null,this.builder=null,n}},{key:"parse",value:function(e){var t=this.significantWhitespace;"pre"===getComputedStyle(e).whiteSpace&&(this.significantWhitespace=!0);var n=this.walker;for(this.walker=l(e);;){var s=this.walker.nextNode();if(!s)break;if(s.nodeType!==Node.TEXT_NODE){var i=s;switch(i.tagName){case"DIV":case"P":this.visitParagraph(i);break;case"OL":case"UL":this.visitList(i);break;case"LI":this.visitListItem(i);break;case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":this.visitHeading(i);break;case"BLOCKQUOTE":this.visitBlockquote(i);break;case"PRE":this.visitCode(i);break;case"BR":this.visitBreak(i);break;case"B":case"STRONG":this.visitBasicAnnotation(i,"bold");break;case"I":case"EM":this.visitBasicAnnotation(i,"italic");break;case"U":this.visitBasicAnnotation(i,"underline");break;case"CODE":this.visitBasicAnnotation(i,"code");break;case"S":case"DEL":case"STRIKE":this.visitBasicAnnotation(i,"strike");break;case"A":this.visitAnchor(i)}}else this.visitText(s)}n.currentNode=this.walker.currentNode,this.walker=n,this.significantWhitespace=t}},{key:"visitParagraph",value:function(e){this.builder.appendParagraph(),this.parse(e),this.builder.endContentBranch()}},{key:"visitCode",value:function(e){this.builder.appendCode(),this.parse(e),this.builder.endContentBranch()}},{key:"visitHeading",value:function(e){var t=+e.tagName.match(/H([1-6])/)[1];this.builder.appendHeading(t),this.parse(e),this.builder.endContentBranch()}},{key:"visitBlockquote",value:function(e){this.builder.pushBlockquote(),this.parse(e),this.builder.popBlockquote()}},{key:"visitBreak",value:function(e){this.significantWhitespace?this.builder.appendText("\n"):this.builder.appendBreak()}},{key:"visitList",value:function(e){var t="OL"===e.tagName?"ordered":"unordered";this.builder.appendList(t),this.parse(e),this.builder.endList()}},{key:"visitListItem",value:function(e){this.builder.appendListItem(),this.parse(e),this.builder.endListItem()}},{key:"visitBasicAnnotation",value:function(e,t){this.builder.pushBasicAnnotation(t),this.parse(e),this.builder.popAnnotation()}},{key:"visitAnchor",value:function(e){this.builder.pushLinkAnnotation(e.getAttribute("href")),this.parse(e),this.builder.popAnnotation()}},{key:"visitText",value:function(e){var t=e.nodeValue;if(!this.significantWhitespace){if(t.match(/^\s*$/)&&t.match(/\n/))return;t=t.replace(/\s+/g," ")}this.builder.appendText(t)}}]),e}()},"./src/model/documentFormats/MarkdownDocumentFormat.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"MarkdownDocumentFormat",(function(){return l}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/marked/src/marked.js"),a=n.n(r),o=n("./src/model/documentFormats/HtmlDocumentFormat.ts"),l=function(){function e(){Object(s.default)(this,e)}return Object(i.default)(e,[{key:"convert",value:function(e){var t=new a.a.Renderer;t.code=function(e){return"<pre>".concat(e,"</pre>")};var n=a()(e,{renderer:t});return(new o.HtmlDocumentFormat).convert(n)}}]),e}()},"./src/model/formula/Expressions.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"coerceValueToNumber",(function(){return u})),n.d(t,"coerceValueToString",(function(){return d})),n.d(t,"Expression",(function(){return p})),n.d(t,"RangeExpression",(function(){return f})),n.d(t,"LiteralExpression",(function(){return m})),n.d(t,"UnaryExpression",(function(){return v})),n.d(t,"BinaryExpression",(function(){return b})),n.d(t,"FunctionExpression",(function(){return g})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.concat"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.map"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.parse-float"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),l=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js");function u(e){switch(Array.isArray(e)&&(e=e[0][0]),Object(c.default)(e)){case"number":return e;case"string":var t=parseFloat(e||"0");if(isNaN(t))throw new Error("Cannot convert ".concat(e," to a number"));return t}throw new Error("Cannot convert ".concat(e," to a number"))}function d(e){return String(e)}var h=function(e){function t(e){var n;return Object(o.default)(this,t),(n=Object(i.default)(this,Object(r.default)(t).call(this))).context=e,n.ranges=[],n}return Object(a.default)(t,e),Object(l.default)(t,[{key:"visitRange",value:function(e){this.ranges.push(e.range)}}]),t}(function(){function e(){Object(o.default)(this,e)}return Object(l.default)(e,[{key:"visitRange",value:function(e){}},{key:"visitLiteral",value:function(e){}},{key:"visitUnary",value:function(e){}},{key:"visitBinary",value:function(e){}},{key:"visitFunction",value:function(e){}}]),e}()),p=function(){function e(t,n){Object(o.default)(this,e),this.colStart=t,this.colEnd=n}return Object(l.default)(e,[{key:"getReferencedRanges",value:function(e){var t=new h(e);return this.accept(t),t.ranges}}]),e}(),f=function(e){function t(e,n,s){var a;return Object(o.default)(this,t),(a=Object(i.default)(this,Object(r.default)(t).call(this,e,n))).range=s,a}return Object(a.default)(t,e),Object(l.default)(t,[{key:"accept",value:function(e){e.visitRange(this)}},{key:"evaluate",value:function(e){var t=this.range.getCellReferences(e).map((function(t){return t.map((function(t){return e.getCellValue(t.col,t.row)}))}));return 1===t.length&&1===t[0].length?t[0][0]:t}}]),t}(p),m=function(e){function t(e,n,s){var a;return Object(o.default)(this,t),(a=Object(i.default)(this,Object(r.default)(t).call(this,e,n))).value=s,a}return Object(a.default)(t,e),Object(l.default)(t,[{key:"accept",value:function(e){e.visitLiteral(this)}},{key:"evaluate",value:function(e){return this.value}}]),t}(p),v=function(e){function t(e,n,s,a){var l;return Object(o.default)(this,t),(l=Object(i.default)(this,Object(r.default)(t).call(this,e,n))).exp=a,l.operator=s,l}return Object(a.default)(t,e),Object(l.default)(t,[{key:"accept",value:function(e){this.exp.accept(e),e.visitUnary(this)}},{key:"evaluate",value:function(e){var t=this.exp.evaluate(e);switch(this.operator){case"-":return-u(t);case"%":return u(t)/100}}}]),t}(p),b=function(e){function t(e,n,s,a,l){var c;return Object(o.default)(this,t),(c=Object(i.default)(this,Object(r.default)(t).call(this,e,n))).operator=s,c.left=a,c.right=l,c}return Object(a.default)(t,e),Object(l.default)(t,[{key:"accept",value:function(e){this.left.accept(e),this.right.accept(e),e.visitBinary(this)}},{key:"evaluate",value:function(e){var t=this.left.evaluate(e),n=this.right.evaluate(e);switch(this.operator){case"+":return u(t)+u(n);case"-":return u(t)-u(n);case"*":return u(t)*u(n);case"/":return u(t)/u(n);case"^":return Math.pow(u(t),u(n));case"&":return d(t)+d(n)}}}]),t}(p),g=function(e){function t(e,n,s,a){var l;return Object(o.default)(this,t),(l=Object(i.default)(this,Object(r.default)(t).call(this,e,n))).identifier=s,l.args=a,l}return Object(a.default)(t,e),Object(l.default)(t,[{key:"accept",value:function(e){var t=!0,n=!1,s=void 0;try{for(var i,r=this.args[Symbol.iterator]();!(t=(i=r.next()).done);t=!0)i.value.accept(e)}catch(a){n=!0,s=a}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}e.visitFunction(this)}},{key:"evaluate",value:function(e){return e.invokeFunction.apply(e,[this.identifier].concat(Object(s.default)(this.args.map((function(t){return t.evaluate(e)})))))}}]),t}(p)},"./src/model/formula/FormulaParser.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ParserError",(function(){return d})),n.d(t,"FormulaParser",(function(){return h})),n("core-js/modules/es.array.concat");var s=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./src/ErrorBase.ts"),c=n("./src/model/formula/FormulaTokenizer.ts"),u=n("./src/model/formula/Expressions.ts"),d=function(e){function t(){return Object(i.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(o.default)(t,e),t}(l.ErrorBase),h=function(){function e(){Object(i.default)(this,e)}return Object(s.default)(e,[{key:"parse",value:function(e){this.tokens=(new c.FormulaTokenizer).tokenize(e),this.index=0;var t=this.parseExpression();if(this.peekType())throw new d("Unexpected ".concat(this.peekType()," token"));return this.tokens=null,t}},{key:"peek",value:function(){return this.tokens[this.index]}},{key:"peekType",value:function(){var e=this.peek();return e?e.type:null}},{key:"next",value:function(){return this.tokens[this.index++]}},{key:"expect",value:function(e){var t=this.peekType();if(t!==e)throw new d("Expected ".concat(e," but got ").concat(t," instead"));this.next()}},{key:"parseFunction",value:function(){var e=this.peek();if(!e||"identifier"!==e.type)return null;this.next(),this.expect("lparen");var t=[];for("rparen"!==this.peekType()&&t.push(this.parseExpression());"rparen"!==this.peekType();)this.expect("comma"),t.push(this.parseExpression());var n=this.next();return new u.FunctionExpression(e.colStart,n.colEnd,e.value,t)}},{key:"parseSingular",value:function(){var e=this.peek();if(!e)throw new d("Unexpected end of formula");switch(e.type){case"number":case"string":return this.next(),new u.LiteralExpression(e.colStart,e.colEnd,e.value);case"reference":return this.next(),new u.RangeExpression(e.colStart,e.colEnd,e.range);case"identifier":return this.parseFunction();case"lparen":this.next();var t=this.parseExpression();return this.expect("rparen"),t}throw new d("Unexpected ".concat(e.type," token"))}},{key:"parseNegation",value:function(){if("minus"===this.peekType()){var e=this.next(),t=this.parseSingular();return new u.UnaryExpression(e.colStart,t.colEnd,"-",t)}return this.parseSingular()}},{key:"parsePercent",value:function(){var e=this.parseNegation();if("percent"===this.peekType()){var t=this.next();return new u.UnaryExpression(e.colStart,t.colEnd,"%",e)}return e}},{key:"parseExponentiation",value:function(){for(var e=this.parsePercent();"exponent"===this.peekType();){this.next();var t=this.parsePercent();e=new u.BinaryExpression(e.colStart,t.colEnd,"^",e,t)}return e}},{key:"parseFactor",value:function(){for(var e=this.parseExponentiation();;){var t=void 0;switch(this.peekType()){case"multiply":t="*";break;case"divide":t="/"}if(!t)break;this.next();var n=this.parseExponentiation();e=new u.BinaryExpression(e.colStart,n.colEnd,t,e,n)}return e}},{key:"parseTerm",value:function(){for(var e=this.parseFactor();;){var t=void 0;switch(this.peekType()){case"plus":t="+";break;case"minus":t="-"}if(!t)break;this.next();var n=this.parseFactor();e=new u.BinaryExpression(e.colStart,n.colEnd,t,e,n)}return e}},{key:"parseConcatenation",value:function(){for(var e=this.parseTerm();"concat"===this.peekType();){this.next();var t=this.parseTerm();e=new u.BinaryExpression(e.colStart,t.colEnd,"&",e,t)}return e}},{key:"parseExpression",value:function(){return this.parseConcatenation()}}]),e}()},"./src/model/formula/FormulaTokenizer.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TokenizerError",(function(){return d})),n.d(t,"FormulaTokenizer",(function(){return h})),n("core-js/modules/es.parse-float");var s=n("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),a=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./src/ErrorBase.ts"),u=n("./src/model/formula/Types.ts"),d=function(e){function t(){return Object(r.default)(this,t),Object(a.default)(this,Object(o.default)(t).apply(this,arguments))}return Object(l.default)(t,e),t}(c.ErrorBase),h=function(){function e(){Object(r.default)(this,e)}return Object(i.default)(e,[{key:"tokenize",value:function(e){for(this.formula=e,this.index=0,this.tokens=[],this.skipWhitespace();this.peek();)this.tokenizeNext(),this.skipWhitespace();var t=this.tokens;return this.formula=null,this.tokens=null,t}},{key:"peek",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.formula[this.index+e]||""}},{key:"next",value:function(){return this.formula[this.index++]||""}},{key:"skipWhitespace",value:function(){for(;/\s/.test(this.peek());)this.next()}},{key:"tokenizeSymbol",value:function(){var e;switch(this.peek()){case"=":e="equals";break;case"+":e="plus";break;case"-":e="minus";break;case"*":e="multiply";break;case"^":e="exponent";break;case"%":e="percent";break;case"&":e="concat";break;case"/":e="divide";break;case"(":e="lparen";break;case")":e="rparen";break;case",":e="comma"}return e?(this.next(),{type:e,colStart:this.index-1,colEnd:this.index}):null}},{key:"tokenizeNumber",value:function(){var e=/(([0-9]*)\.?([0-9]*))/g;e.lastIndex=this.index;var t=e.exec(this.formula);if(!t||t.index!==this.index)return null;var n=Object(s.default)(t,4),i=n[0],r=n[1],a=n[2],o=n[3];if(!a&&!o)return null;var l=parseFloat(r);return this.index+=i.length,{type:"number",value:l,colStart:this.index-i.length,colEnd:this.index}}},{key:"tokenizeString",value:function(){var e=/"([^"]*)"/g;e.lastIndex=this.index;var t=e.exec(this.formula);return t&&t.index===this.index?(this.index+=t[0].length,{type:"string",value:t[1],colStart:this.index-t[0].length,colEnd:this.index}):null}},{key:"tokenizeIdentifier",value:function(){var e=/[a-z][a-z0-9_]*/gi;e.lastIndex=this.index;var t=e.exec(this.formula);return t&&t.index===this.index?(this.index+=t[0].length,{type:"identifier",value:t[0],colStart:this.index-t[0].length,colEnd:this.index}):null}},{key:"tokenizeReference",value:function(){var e,t,n=/[a-z]+[1-9][0-9]*/gi,s=/([a-z]+[1-9][0-9]*):([a-z]+[1-9][0-9]*)/gi,i=/([a-z]*):([a-z]*)/gi,r=/([1-9][0-9]*)?:([1-9][0-9]*)?/g;if(n.lastIndex=s.lastIndex=i.lastIndex=r.lastIndex=this.index,(t=s.exec(this.formula))&&t.index===this.index||(t=i.exec(this.formula))&&t.index===this.index&&(t[1]||t[2])||(t=r.exec(this.formula))&&t.index===this.index&&(t[1]||t[2]))e=new u.RangeReference(new u.CellReference(t[1]),new u.CellReference(t[2]));else{if(!(t=n.exec(this.formula))||t.index!==this.index)return null;var a=new u.CellReference(t[0]);e=new u.RangeReference(a,a)}return this.index+=t[0].length,{type:"reference",range:e,colStart:this.index-t[0].length,colEnd:this.index}}},{key:"tokenizeNext",value:function(){var e=this.tokenizeReference()||this.tokenizeIdentifier()||this.tokenizeNumber()||this.tokenizeString()||this.tokenizeSymbol();if(!e)throw new d("Unexpected character ".concat(this.peek()));this.tokens.push(e)}}]),e}()},"./src/model/formula/FunctionRegistry.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"functionRegistry",(function(){return s}));var s=new(n("./src/Registry.ts").Registry)},"./src/model/formula/Functions.ts":function(e,t,n){"use strict";n.r(t),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(s),r=(n("regenerator-runtime/runtime"),n("./src/model/formula/FunctionRegistry.ts")),a=n("./src/model/formula/Expressions.ts"),o=i.a.mark(c),l=i.a.mark(u);function c(e){var t,n,s,r,a,l,u,d,h,p,f,m;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:t=!0,n=!1,s=void 0,i.prev=3,r=e[Symbol.iterator]();case 5:if(t=(a=r.next()).done){i.next=41;break}if(l=a.value,!Array.isArray(l)){i.next=36;break}u=!0,d=!1,h=void 0,i.prev=11,p=c(l)[Symbol.iterator]();case 13:if(u=(f=p.next()).done){i.next=20;break}return m=f.value,i.next=17,m;case 17:u=!0,i.next=13;break;case 20:i.next=26;break;case 22:i.prev=22,i.t0=i.catch(11),d=!0,h=i.t0;case 26:i.prev=26,i.prev=27,u||null==p.return||p.return();case 29:if(i.prev=29,!d){i.next=32;break}throw h;case 32:return i.finish(29);case 33:return i.finish(26);case 34:i.next=38;break;case 36:return i.next=38,l;case 38:t=!0,i.next=5;break;case 41:i.next=47;break;case 43:i.prev=43,i.t1=i.catch(3),n=!0,s=i.t1;case 47:i.prev=47,i.prev=48,t||null==r.return||r.return();case 50:if(i.prev=50,!n){i.next=53;break}throw s;case 53:return i.finish(50);case 54:return i.finish(47);case 55:case"end":return i.stop()}}),o,null,[[3,43,47,55],[11,22,26,34],[27,,29,33],[48,,50,54]])}function u(e){var t,n,s,r,a,o;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:t=!0,n=!1,s=void 0,i.prev=3,r=c(e)[Symbol.iterator]();case 5:if(t=(a=r.next()).done){i.next=13;break}if("number"!=typeof(o=a.value)){i.next=10;break}return i.next=10,o;case 10:t=!0,i.next=5;break;case 13:i.next=19;break;case 15:i.prev=15,i.t0=i.catch(3),n=!0,s=i.t0;case 19:i.prev=19,i.prev=20,t||null==r.return||r.return();case 22:if(i.prev=22,!n){i.next=25;break}throw s;case 25:return i.finish(22);case 26:return i.finish(19);case 27:case"end":return i.stop()}}),l,null,[[3,15,19,27],[20,,22,26]])}for(var d=0,h=[function(){for(var e=0,t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var i=!0,r=!1,a=void 0;try{for(var o,l=u(n)[Symbol.iterator]();!(i=(o=l.next()).done);i=!0)o.value,e++}catch(c){r=!0,a=c}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}return e},function(){for(var e=0,t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var i=!0,r=!1,a=void 0;try{for(var o,l=u(n)[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value;e+=c}}catch(d){r=!0,a=d}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}return e},function(){for(var e,t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var i=!0,r=!1,a=void 0;try{for(var o,l=u(n)[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value;if(void 0===e?e=c:e*=c,0===e)break}}catch(d){r=!0,a=d}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}return void 0===e?0:e},function(){for(var e=0,t=0,n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];var r=!0,a=!1,o=void 0;try{for(var l,c=u(s)[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var d=l.value;e++,t+=d}}catch(h){a=!0,o=h}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return t/e},function(){return Math.PI},function(e){return Object(a.coerceValueToNumber)(e)*(Math.PI/180)},function(e){return Object(a.coerceValueToNumber)(e)*(180/Math.PI)},function(e){return Math.sin(Object(a.coerceValueToNumber)(e))},function(e){return Math.cos(Object(a.coerceValueToNumber)(e))},function(e){return Math.tan(Object(a.coerceValueToNumber)(e))},function(){return Math.random()},function(e){return Math.sqrt(Object(a.coerceValueToNumber)(e))},function(e,t){return Math.pow(Object(a.coerceValueToNumber)(e),Object(a.coerceValueToNumber)(t))},function(e){return Object(a.coerceValueToString)(e).toLowerCase()},function(e){return Object(a.coerceValueToString)(e).toUpperCase()},function(e){return Object(a.coerceValueToString)(e).length}];d<h.length;d++){var p=h[d];r.functionRegistry.register(p.name.toLowerCase(),p)}},"./src/model/formula/Types.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"CellReference",(function(){return r})),n.d(t,"RangeReference",(function(){return a})),n("core-js/modules/es.array.concat"),n("core-js/modules/es.array.map"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.regexp.to-string"),n("core-js/modules/es.string.match");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=function(){function e(t,n){if(Object(s.default)(this,e),"number"==typeof t)this.col=t,this.row=n;else{var i=t&&t.match(/^([a-z]*)([0-9]*)$/i);this.col=i&&i[1]?e.columnLabelToIndex(i[1]):null,this.row=i&&i[2]?e.rowLabelToIndex(i[2]):null}this.isColRelative=!1,this.isRowRelative=!1}return Object(i.default)(e,[{key:"toString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=null==this.col?"":e.columnIndexToLabel(this.col+t),i=null==this.row?"":e.rowIndexToLabel(this.row+n);return s+i}}],[{key:"columnLabelToIndex",value:function(e){for(var t=0,n=(e=e.toUpperCase()).length-1,s=1;n>=0;n--,s*=26)t+=s*(e.charCodeAt(n)-64);return t-1}},{key:"columnIndexToLabel",value:function(e){var t="";do{var n=e%26;t=String.fromCharCode(65+n)+t,e=e/26-1}while(e>=0);return t}},{key:"rowLabelToIndex",value:function(e){return+e-1}},{key:"rowIndexToLabel",value:function(e){return(e+1).toString()}}]),e}(),a=function(){function e(t,n,i,a){if(Object(s.default)(this,e),"number"==typeof t&&"number"==typeof n&&"number"==typeof i&&"number"==typeof a)this.start=new r(t,n),this.end=new r(i,a);else{if(!(t instanceof r&&n instanceof r))throw new Error("Invalid arguments");this.start=t,this.end=n}}return Object(i.default)(e,[{key:"getActualBounds",value:function(e){var t=e.getMatrix();return{startCol:null==this.start.col?0:this.start.col,startRow:null==this.start.row?0:this.start.row,endCol:null==this.end.col?t.getMaxColCount()-1:this.end.col,endRow:null==this.end.row?t.getRowCount()-1:this.end.row}}},{key:"getCellReferences",value:function(e){for(var t=e.getMatrix(),n=this.getActualBounds(e),s=[],i=n.startRow;i<=n.endRow;i++)s.push(t.getCells(n.startCol,i,n.endCol,i,!0).map((function(e){return new r(e.col,e.row)})));return s}},{key:"toString",value:function(){return"".concat(this.start.toString(),"|").concat(this.end.toString())}}]),e}()},"./src/model/nodes/BlockquoteModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"BlockquoteModelNode",(function(){return d})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=n("./src/model/nodes/ContentBranchModelNode.ts"),c=n("./src/model/ModelRegistry.ts"),u=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(r.default)(t).apply(this,arguments))}return Object(a.default)(t,e),t}(l.ContentBranchModelNode);d.id="blockquote",d.matchTagNames=["blockquote"],d.replaceableWhenEmpty=!1,d=u([c.modelRegistry.register],d)},"./src/model/nodes/BranchModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"BranchModelNode",(function(){return f})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.concat"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.map"),n("core-js/modules/es.array.splice"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.set"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/oo.ts"),d=n("./src/model/nodes/ModelNode.ts"),h=n("./src/BranchNode.ts"),p=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},f=function(e){function t(e){var n;return Object(s.default)(this,t),n=Object(r.default)(this,Object(a.default)(t).call(this,e)),h.BranchNode.construct(Object(o.default)(n)),n.slugPositions=new Set,n}return Object(l.default)(t,e),Object(i.default)(t,[{key:"toFormatPlaintext",value:function(){return this.children.map((function(e){return e.toFormatPlaintext()})).join("")}},{key:"hasChildren",value:function(){}},{key:"push",value:function(e){return this.splice(this.children.length,0,e),this.children.length}},{key:"pop",value:function(){if(this.children.length){var e=this.children[this.children.length-1];return this.splice(this.children.length-1,1),e}}},{key:"unshift",value:function(e){return this.splice(0,0,e),this.children.length}},{key:"shift",value:function(){if(this.children.length){var e=this.children[0];return this.splice(0,1),e}}},{key:"splice",value:function(e,t){for(var n,s=arguments.length,i=new Array(s>2?s-2:0),r=2;r<s;r++)i[r-2]=arguments[r];var a=(n=this.children).splice.apply(n,[e,t].concat(i)),o=0,l=!0,c=!1,u=void 0;try{for(var d,h=a[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var p=d.value;p.detatch(),o-=p.getOuterLength()}}catch(b){c=!0,u=b}finally{try{l||null==h.return||h.return()}finally{if(c)throw u}}for(var f=0,m=i;f<m.length;f++){var v=m[f];v.attach(this),o+=v.getOuterLength()}return this.setLength(this.getLength()+o),this.setupBlockSlugs(),this.emit("splice",e,t,i),a}},{key:"setupBlockSlugs",value:function(){if(this.slugPositions.clear(),!this.canHaveChildrenNotContent()||this.canHaveChildType("paragraph"))if(0===this.getLength())this.slugPositions.add(0);else for(var e=0;e<this.children.length;e++){var t=this.children[e];0===e&&t.canHaveSlugBefore()&&this.slugPositions.add(e),t.canHaveSlugAfter()&&(e===this.children.length-1||this.children[e+1].canHaveSlugBefore())&&this.slugPositions.add(e+1)}}},{key:"hasSlugAtOffset",value:function(e){var t=this.getOffset()+ +this.isWrapped();if(e===t)return this.slugPositions.has(0);for(var n=0;n<this.children.length&&t<=e;n++)if(e===(t+=this.children[n].getOuterLength()))return this.slugPositions.has(n+1);return!1}}]),t}(d.ModelNode);f=p([u.mixin(h.BranchNode)],f)},"./src/model/nodes/BreakModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"BreakModelNode",(function(){return h})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),c=n("./src/model/nodes/LeafModelNode.ts"),u=n("./src/model/ModelRegistry.ts"),d=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},h=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(o.default)(t,e),Object(i.default)(t,[{key:"toFormatPlaintext",value:function(){return"\n"}}]),t}(c.LeafModelNode);h.id="break",h.matchTagNames=["break"],h.isContent=!0,h=d([u.modelRegistry.register],h)},"./src/model/nodes/CalloutModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"CalloutModelNode",(function(){return h})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),c=n("./src/model/nodes/ContentBranchModelNode.ts"),u=n("./src/model/ModelRegistry.ts"),d=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},h=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(o.default)(t,e),Object(i.default)(t,null,[{key:"toDataElements",value:function(e,t){var n=e[0].getAttribute("type")||"info";return[{type:this.id,attributes:{type:n}}]}},{key:"toDomElements",value:function(e,t,n){var s=e[0],i=s.attributes&&s.attributes.type||"info",r=t.createElement("callout");return r.setAttribute("type",i),[r]}}]),t}(c.ContentBranchModelNode);h.id="callout",h.matchTagNames=["callout"],h.replaceableWhenEmpty=!1,h=d([u.modelRegistry.register],h)},"./src/model/nodes/CodeModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"CodeModelNode",(function(){return d})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=n("./src/model/nodes/ContentBranchModelNode.ts"),c=n("./src/model/ModelRegistry.ts"),u=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(r.default)(t).apply(this,arguments))}return Object(a.default)(t,e),t}(l.ContentBranchModelNode);d.id="code",d.matchTagNames=["pre"],d.hasSignificantWhitespace=!0,d.replaceableWhenEmpty=!1,d.sequencesDisabled=!0,d=u([c.modelRegistry.register],d)},"./src/model/nodes/ContentBranchModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ContentBranchModelNode",(function(){return l}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(o.default)(t,e),Object(i.default)(t,[{key:"toFormatPlaintext",value:function(){return this.document.data.getText(!1,this.getRange())}}]),t}(n("./src/model/nodes/BranchModelNode.ts").BranchModelNode);l.canContainContent=!0},"./src/model/nodes/DocumentModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"DocumentModelNode",(function(){return p})),n("core-js/modules/es.array.map"),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/model/nodes/BranchModelNode.ts"),d=n("./src/model/ModelRegistry.ts"),h=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(){var e;return Object(s.default)(this,t),(e=Object(r.default)(this,Object(a.default)(t).call(this,null))).root=Object(o.default)(e),e}return Object(l.default)(t,e),Object(i.default)(t,[{key:"toFormatPlaintext",value:function(){return this.children.map((function(e){return e.toFormatPlaintext()})).join("\n\n")}}]),t}(u.BranchModelNode);p.id="document",p.isWrapped=!1,p=h([d.modelRegistry.register],p)},"./src/model/nodes/FileModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"FileModelNode",(function(){return m})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/oo.ts"),d=n("./src/model/nodes/LeafModelNode.ts"),h=n("./src/model/nodes/FocusableModelNode.ts"),p=n("./src/model/ModelRegistry.ts"),f=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},m=function(e){function t(e){var n;return Object(s.default)(this,t),n=Object(r.default)(this,Object(a.default)(t).call(this,e)),h.FocusableModelNode.construct(Object(o.default)(n)),n}return Object(l.default)(t,e),Object(i.default)(t,null,[{key:"toDataElements",value:function(e,t){var n=e[0],s={url:n.getAttribute("url"),filename:n.getAttribute("filename")};return[{type:this.id,attributes:s}]}},{key:"toDomElements",value:function(e,t,n){var s=e[0].attributes,i=s.url,r=s.filename,a=t.createElement("file");return a.setAttribute("url",i),a.setAttribute("filename",r),[a]}}]),t}(d.LeafModelNode);m.id="file",m.matchTagNames=["file"],m.handlesOwnChildren=!0,m.ignoreChildren=!0,m.childNodeTypes=[],m.isTranscluded=!0,m=f([u.mixin(h.FocusableModelNode),p.modelRegistry.register],m)},"./src/model/nodes/FocusableModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"FocusableModelNode",(function(){return r}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=function(){function e(){Object(s.default)(this,e)}return Object(i.default)(e,null,[{key:"construct",value:function(e){}}]),e}();r.isFocusable=!0},"./src/model/nodes/HeadingModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"HeadingModelNode",(function(){return h})),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.regexp.to-string");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),c=n("./src/model/nodes/ContentBranchModelNode.ts"),u=n("./src/model/ModelRegistry.ts"),d=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},h=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(o.default)(t,e),Object(i.default)(t,null,[{key:"toDataElements",value:function(e,t){var n=e[0],s=Math.min(6,Math.max(1,+n.getAttribute("level")||1));return[{type:this.id,attributes:{level:s}}]}},{key:"toDomElements",value:function(e,t,n){var s=e[0],i=s.attributes&&s.attributes.level||1,r=t.createElement("heading");return r.setAttribute("level",i.toString()),[r]}}]),t}(c.ContentBranchModelNode);h.id="heading",h.matchTagNames=["heading"],h=d([u.modelRegistry.register],h)},"./src/model/nodes/HorizontalRuleModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"HorizontalRuleModelNode",(function(){return f})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),c=n("./src/oo.ts"),u=n("./src/model/nodes/LeafModelNode.ts"),d=n("./src/model/nodes/FocusableModelNode.ts"),h=n("./src/model/ModelRegistry.ts"),p=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},f=function(e){function t(e){var n;return Object(s.default)(this,t),n=Object(i.default)(this,Object(r.default)(t).call(this,e)),d.FocusableModelNode.construct(Object(a.default)(n)),n}return Object(o.default)(t,e),t}(u.LeafModelNode);f.id="horizontalRule",f.matchTagNames=["rule"],f=p([c.mixin(d.FocusableModelNode),h.modelRegistry.register],f)},"./src/model/nodes/ImageModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ImageModelNode",(function(){return b})),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.regexp.to-string");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/oo.ts"),d=n("./src/model/nodes/LeafModelNode.ts"),h=n("./src/model/nodes/FocusableModelNode.ts"),p=n("./src/model/nodes/ResizableModelNode.ts"),f=n("./src/model/Scalable.ts"),m=n("./src/model/ModelRegistry.ts"),v=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},b=function(e){function t(e){var n;return Object(s.default)(this,t),n=Object(r.default)(this,Object(a.default)(t).call(this,e)),h.FocusableModelNode.construct(Object(o.default)(n)),p.ResizableModelNode.construct(Object(o.default)(n)),n}return Object(l.default)(t,e),Object(i.default)(t,[{key:"createScalable",value:function(){return new f.Scalable({currentDimensions:{width:this.element.attributes.width,height:this.element.attributes.height},minDimensions:{width:50,height:50}})}}],[{key:"toDataElements",value:function(e,t){var n=e[0].querySelector("image"),s=n&&n.getAttribute("src"),i={src:s,width:s&&+n.getAttribute("width")||null,height:s&&+n.getAttribute("height")||null,alt:n&&n.getAttribute("alt")};return[{type:this.id,attributes:i},{type:"/"+this.id}]}},{key:"toDomElements",value:function(e,t,n){var s=e[0].attributes,i=s.src,r=s.width,a=s.height,o=s.alt,l=t.createElement("figure"),c=t.createElement("image");return l.appendChild(c),i&&c.setAttribute("src",i),r&&c.setAttribute("width",r.toString()),a&&c.setAttribute("height",a.toString()),o&&c.setAttribute("alt",o),[l]}}]),t}(d.LeafModelNode);b.id="image",b.matchTagNames=["figure"],b.handlesOwnChildren=!0,b.ignoreChildren=!0,b.childNodeTypes=[],b=v([u.mixin(h.FocusableModelNode,p.ResizableModelNode),m.modelRegistry.register],b)},"./src/model/nodes/LabelModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"LabelModelNode",(function(){return m})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/oo.ts"),d=n("./src/model/nodes/LeafModelNode.ts"),h=n("./src/model/nodes/FocusableModelNode.ts"),p=n("./src/model/ModelRegistry.ts"),f=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},m=function(e){function t(e){var n;return Object(s.default)(this,t),n=Object(r.default)(this,Object(a.default)(t).call(this,e)),h.FocusableModelNode.construct(Object(o.default)(n)),n}return Object(l.default)(t,e),Object(i.default)(t,null,[{key:"toDataElements",value:function(e,t){var n=e[0];return[{type:this.id,attributes:{label:n.getAttribute("label")}},{type:"/"+this.id}]}},{key:"toDomElements",value:function(e,t,n){var s=e[0].attributes.label,i=t.createElement("label");return i.setAttribute("label",s),[i]}}]),t}(d.LeafModelNode);m.id="label",m.matchTagNames=["label"],m.isContent=!0,m=f([u.mixin(h.FocusableModelNode),p.modelRegistry.register],m)},"./src/model/nodes/LeafModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"LeafModelNode",(function(){return p})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/oo.ts"),d=n("./src/LeafNode.ts"),h=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(e){var n;return Object(s.default)(this,t),n=Object(r.default)(this,Object(a.default)(t).call(this,e)),d.LeafNode.construct(Object(o.default)(n)),n}return Object(l.default)(t,e),Object(i.default)(t,[{key:"hasChildren",value:function(){}},{key:"getAnnotations",value:function(){return this.element.annotations||[]}}]),t}(n("./src/model/nodes/ModelNode.ts").ModelNode);p.childNodeTypes=[],p=h([u.mixin(d.LeafNode)],p)},"./src/model/nodes/ListItemModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ListItemModelNode",(function(){return h})),n("core-js/modules/es.array.map"),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),c=n("./src/model/nodes/BranchModelNode.ts"),u=n("./src/model/ModelRegistry.ts"),d=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},h=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(o.default)(t,e),Object(i.default)(t,[{key:"toFormatPlaintext",value:function(){return this.children.map((function(e){return e.toFormatPlaintext()})).join("\n\n")}}]),t}(c.BranchModelNode);h.id="listItem",h.matchTagNames=["list-item"],h.parentNodeTypes=["list"],h=d([u.modelRegistry.register],h)},"./src/model/nodes/ListModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ListModelNode",(function(){return h})),n("core-js/modules/es.array.map"),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),c=n("./src/model/nodes/BranchModelNode.ts"),u=n("./src/model/ModelRegistry.ts"),d=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},h=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(o.default)(t,e),Object(i.default)(t,[{key:"toFormatPlaintext",value:function(){return this.children.map((function(e){return e.toFormatPlaintext()})).join("\n\n")}}],[{key:"toDataElements",value:function(e,t){var n=e[0].getAttribute("style")||"bullet";return[{type:this.id,attributes:{style:n}}]}},{key:"toDomElements",value:function(e,t,n){var s=e[0],i=t.createElement("list");return i.setAttribute("style",s.attributes.style),[i]}}]),t}(c.BranchModelNode);h.id="list",h.matchTagNames=["list"],h.childNodeTypes=["listItem"],h.defaultAttributes={style:"bullet"},h=d([u.modelRegistry.register],h)},"./src/model/nodes/MentionModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"MentionModelNode",(function(){return m})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/oo.ts"),d=n("./src/model/nodes/LeafModelNode.ts"),h=n("./src/model/nodes/FocusableModelNode.ts"),p=n("./src/model/ModelRegistry.ts"),f=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},m=function(e){function t(e){var n;return Object(s.default)(this,t),n=Object(r.default)(this,Object(a.default)(t).call(this,e)),h.FocusableModelNode.construct(Object(o.default)(n)),n}return Object(l.default)(t,e),Object(i.default)(t,null,[{key:"toDataElements",value:function(e,t){var n=e[0];return[{type:this.id,attributes:{id:n.getAttribute("id"),text:n.textContent}},{type:"/"+this.id}]}},{key:"toDomElements",value:function(e,t,n){var s=e[0].attributes,i=s.id,r=s.text,a=t.createElement("mention");return a.setAttribute("id",i),a.textContent=r,[a]}}]),t}(d.LeafModelNode);m.id="mention",m.matchTagNames=["mention"],m.isContent=!0,m=f([u.mixin(h.FocusableModelNode),p.modelRegistry.register],m)},"./src/model/nodes/ModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ModelNode",(function(){return m})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/oo.ts"),d=n("./src/util.ts"),h=n("./src/model/Model.ts"),p=n("./src/Node.ts"),f=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},m=function(e){function t(e){var n;return Object(s.default)(this,t),n=Object(r.default)(this,Object(a.default)(t).call(this,e)),p.Node.construct(Object(o.default)(n)),n.length=0,n}return Object(l.default)(t,e),Object(i.default)(t,[{key:"getLength",value:function(){return this.length}},{key:"getOffset",value:function(){if(!this.parent)return 0;var e=this.parent.children,t=this.parent.getOffset()+(this.parent===this.root?0:1),n=!1,s=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(s=(a=o.next()).done);s=!0){var l=a.value;if(l===this){n=!0;break}t+=l.getOuterLength()}}catch(c){i=!0,r=c}finally{try{s||null==o.return||o.return()}finally{if(i)throw r}}if(!n)throw new Error("Node not found in parent's children");return t}},{key:"isFocusable",value:function(){return this.constructor.isFocusable}},{key:"isAlignable",value:function(){return this.constructor.isAlignable}},{key:"isTranscluded",value:function(){return this.constructor.isTranscluded}},{key:"isWrapped",value:function(){return this.constructor.isWrapped}},{key:"isContent",value:function(){return this.constructor.isContent}},{key:"canContainContent",value:function(){return this.constructor.canContainContent}},{key:"replaceableWhenEmpty",value:function(){return this.constructor.replaceableWhenEmpty}},{key:"sequencesDisabled",value:function(){return this.constructor.sequencesDisabled}},{key:"getChildNodeTypes",value:function(){return this.constructor.childNodeTypes}},{key:"getParentNodeTypes",value:function(){return this.constructor.parentNodeTypes}},{key:"getSuggestedParentNodeTypes",value:function(){return this.constructor.suggestedParentNodeTypes}},{key:"shouldIgnoreChildren",value:function(){return this.constructor.ignoreChildren}},{key:"handlesOwnChildren",value:function(){return this.constructor.handlesOwnChildren}},{key:"hasSignificantWhitespace",value:function(){return this.constructor.hasSignificantWhitespace}},{key:"setLength",value:function(e){if(e<0)throw new Error("Length cannot be negative");var t=e-this.length;this.length=e,this.parent&&this.parent.setLength(this.parent.getLength()+t),this.emit("update")}},{key:"canHaveSlugBefore",value:function(){return!this.canContainContent()&&null===this.getParentNodeTypes()}},{key:"canHaveSlugAfter",value:function(){return!this.canContainContent()&&null===this.getParentNodeTypes()}},{key:"canBeMergedWith",value:function(e){var t=this,n=e;for(t.canContainContent()&&n.isContent()?n=n.parent:n.canContainContent()&&t.isContent()&&(t=t.parent);t!==n;){if(!t||!n||t.type!==n.type)return!1;t=t.parent,n=n.parent}return!0}},{key:"matches",value:function(e,t){if(this.getType()!==e)return!1;if(t)for(var n in t)if(this.element.attributes[n]!==t[n])return!1;return!0}},{key:"hasMatchingAncestor",value:function(e,t){for(var n=this;n&&!n.matches(e,t);)n=n.parent;return!!n}}],[{key:"cloneElement",value:function(e){return d.clone(e)}}]),t}(h.Model);m.isWrapped=!0,m.isContent=!1,m.canContainContent=!1,m.replaceableWhenEmpty=!0,m.sequencesDisabled=!1,m.childNodeTypes=null,m.parentNodeTypes=null,m.suggestedParentNodeTypes=null,m.ignoreChildren=!1,m.handlesOwnChildren=!1,m.hasSignificantWhitespace=!1,m.isFocusable=!1,m.isAlignable=!1,m.isTranscluded=!1,m.defaultAttributes={},m=f([u.mixin(p.Node)],m)},"./src/model/nodes/ParagraphModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ParagraphModelNode",(function(){return d})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=n("./src/model/nodes/ContentBranchModelNode.ts"),c=n("./src/model/ModelRegistry.ts"),u=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(r.default)(t).apply(this,arguments))}return Object(a.default)(t,e),t}(l.ContentBranchModelNode);d.id="paragraph",d.matchTagNames=["paragraph"],d=u([c.modelRegistry.register],d)},"./src/model/nodes/ResizableModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ResizableModelNode",(function(){return r}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=function(){function e(){Object(s.default)(this,e)}return Object(i.default)(e,[{key:"getScalable",value:function(){return this.scalable||(this.scalable=this.createScalable()),this.scalable}},{key:"onResizableAttributeChange",value:function(e){"width"!==e&&"height"!==e||this.getScalable().setCurrentDimensions(this.getCurrentDimensions())}},{key:"getCurrentDimensions",value:function(){return{width:this.element.attributes.width,height:this.element.attributes.height}}}],[{key:"construct",value:function(e){e.scalable=null,e.on("attributeChange",e.onResizableAttributeChange)}}]),e}()},"./src/model/nodes/SpanRefModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"SpanRefModelNode",(function(){return m})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/oo.ts"),d=n("./src/model/nodes/LeafModelNode.ts"),h=n("./src/model/nodes/FocusableModelNode.ts"),p=n("./src/model/ModelRegistry.ts"),f=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},m=function(e){function t(e){var n;return Object(s.default)(this,t),n=Object(r.default)(this,Object(a.default)(t).call(this,e)),h.FocusableModelNode.construct(Object(o.default)(n)),n}return Object(l.default)(t,e),Object(i.default)(t,null,[{key:"toDataElements",value:function(e,t){var n=e[0];return[{type:this.id,attributes:{spanId:n.getAttribute("span-id")}},{type:"/"+this.id}]}},{key:"toDomElements",value:function(e,t,n){var s=e[0].attributes.spanId,i=t.createElement("span-ref");return i.setAttribute("span-id",s),[i]}}]),t}(d.LeafModelNode);m.id="spanRef",m.matchTagNames=["span-ref"],m.isContent=!0,m=f([u.mixin(h.FocusableModelNode),p.modelRegistry.register],m)},"./src/model/nodes/StackItemModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"StackItemModelNode",(function(){return d})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=n("./src/model/nodes/BranchModelNode.ts"),c=n("./src/model/ModelRegistry.ts"),u=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(r.default)(t).apply(this,arguments))}return Object(a.default)(t,e),t}(l.BranchModelNode);d.id="stackItem",d.matchTagNames=["stack-item"],d.parentNodeTypes=["stack"],d=u([c.modelRegistry.register],d)},"./src/model/nodes/StackModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"StackModelNode",(function(){return d})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=n("./src/model/nodes/BranchModelNode.ts"),c=n("./src/model/ModelRegistry.ts"),u=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(r.default)(t).apply(this,arguments))}return Object(a.default)(t,e),t}(l.BranchModelNode);d.id="stack",d.matchTagNames=["stack"],d.childNodeTypes=["stackItem"],d=u([c.modelRegistry.register],d)},"./src/model/nodes/TableCellModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TableCellModelNode",(function(){return _})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.index-of"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.splice"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.parse-float"),n("core-js/modules/es.set"),n("core-js/modules/es.string.iterator"),n("core-js/modules/es.string.starts-with"),n("core-js/modules/es.string.trim"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(s),r=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js")),a=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),l=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),d=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),h=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),p=n("./src/oo.ts"),f=n("./src/domUtil.ts"),m=n("./src/model/nodes/TableCellableModelNode.ts"),v=n("./src/model/nodes/ContentBranchModelNode.ts"),b=n("./src/model/ModelRegistry.ts"),g=n("./src/model/formula/FormulaTokenizer.ts"),y=n("./src/model/formula/FormulaParser.ts"),w=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},_=function(e){function t(e){var n;return Object(a.default)(this,t),n=Object(l.default)(this,Object(c.default)(t).call(this,e)),m.TableCellableModelNode.construct(Object(u.default)(n)),n.expression=null,n.errorMessage=null,n.value=null,n.dirty=!0,n.calculatingValue=!1,n.dependencies=[],n.dependedBy=[],n}return Object(d.default)(t,e),Object(o.default)(t,[{key:"parseFormula",value:function(){this.dirty=!0,this.expression=null,this.errorMessage=null;var e=!0,t=!1,n=void 0;try{for(var s,i=this.eachDependency()[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){var a=s.value;a.dependedBy.splice(a.dependedBy.indexOf(this))}}catch(m){t=!0,n=m}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.dependencies.length=0;var o=this.document.data.getText(!1,this.getRange()).trim();if(o.length>1&&o.startsWith("=")){o=o.substr(1);try{this.expression=(new y.FormulaParser).parse(o)}catch(v){if(!(v instanceof y.ParserError||v instanceof g.TokenizerError))throw v;this.errorMessage=v.message}if(this.expression){var l,c=this.parent.parent.parent;(l=this.dependencies).push.apply(l,Object(r.default)(this.expression.getReferencedRanges(c)));var u=!0,d=!1,h=void 0;try{for(var p,f=this.eachDependency()[Symbol.iterator]();!(u=(p=f.next()).done);u=!0)p.value.dependedBy.push(this)}catch(m){d=!0,h=m}finally{try{u||null==f.return||f.return()}finally{if(d)throw h}}}}}},{key:"getExpression",value:function(){return this.expression}},{key:"getErrorMessage",value:function(){return this.errorMessage}},{key:"getValue",value:function(){return this.value}},{key:"isDirty",value:function(){return this.dirty}},{key:"eachDependency",value:i.a.mark((function e(){var t,n,s,r,a,o,l,c,u,d,h,p,f,m,v,b,g,y,w,_,k;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.parent.parent.parent,n=new Set,s=!0,r=!1,a=void 0,e.prev=5,o=this.dependencies[Symbol.iterator]();case 7:if(s=(l=o.next()).done){e.next=65;break}c=l.value,u=!0,d=!1,h=void 0,e.prev=12,p=c.getCellReferences(t)[Symbol.iterator]();case 14:if(u=(f=p.next()).done){e.next=48;break}m=f.value,v=!0,b=!1,g=void 0,e.prev=19,y=m[Symbol.iterator]();case 21:if(v=(w=y.next()).done){e.next=31;break}if(_=w.value,k=t.matrix.getCell(_.col,_.row),n.has(k.key)||k.isPlaceholder()){e.next=28;break}return n.add(k.key),e.next=28,k.node;case 28:v=!0,e.next=21;break;case 31:e.next=37;break;case 33:e.prev=33,e.t0=e.catch(19),b=!0,g=e.t0;case 37:e.prev=37,e.prev=38,v||null==y.return||y.return();case 40:if(e.prev=40,!b){e.next=43;break}throw g;case 43:return e.finish(40);case 44:return e.finish(37);case 45:u=!0,e.next=14;break;case 48:e.next=54;break;case 50:e.prev=50,e.t1=e.catch(12),d=!0,h=e.t1;case 54:e.prev=54,e.prev=55,u||null==p.return||p.return();case 57:if(e.prev=57,!d){e.next=60;break}throw h;case 60:return e.finish(57);case 61:return e.finish(54);case 62:s=!0,e.next=7;break;case 65:e.next=71;break;case 67:e.prev=67,e.t2=e.catch(5),r=!0,a=e.t2;case 71:e.prev=71,e.prev=72,s||null==o.return||o.return();case 74:if(e.prev=74,!r){e.next=77;break}throw a;case 77:return e.finish(74);case 78:return e.finish(71);case 79:case"end":return e.stop()}}),e,this,[[5,67,71,79],[12,50,54,62],[19,33,37,45],[38,,40,44],[55,,57,61],[72,,74,78]])}))},{key:"invalidate",value:function(){if(!this.dirty){this.dirty=!0;var e=!0,t=!1,n=void 0;try{for(var s,i=this.dependedBy[Symbol.iterator]();!(e=(s=i.next()).done);e=!0)s.value.invalidate()}catch(r){t=!0,n=r}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}}},{key:"calculateValue",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.dirty){if(this.calculatingValue)throw new Error("Cycle detected");this.calculatingValue=!0;try{var t;if(this.expression){var n=!0,s=!1,i=void 0;try{for(var r,a=this.eachDependency()[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value;o.calculateValue(!1)}}catch(_){s=!0,i=_}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}t=this.expression.evaluate(this.parent.parent.parent)}else{var l=this.document.data.getText(!1,this.getRange());t=parseFloat(l),isNaN(t)&&(t=l)}if(t!==this.value){this.value=t,this.dirty=!1,this.emit("valueChange",this.value);var c=!0,u=!1,d=void 0;try{for(var h,p=this.dependedBy[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var f=h.value;f.invalidate()}}catch(_){u=!0,d=_}finally{try{c||null==p.return||p.return()}finally{if(u)throw d}}}if(e){var m=!0,v=!1,b=void 0;try{for(var g,y=this.dependedBy[Symbol.iterator]();!(m=(g=y.next()).done);m=!0){var w=g.value;w.calculateValue()}}catch(_){v=!0,b=_}finally{try{m||null==y.return||y.return()}finally{if(v)throw b}}}}finally{this.calculatingValue=!1}}return this.value}}],[{key:"toDataElements",value:function(e,t){var n={};return m.TableCellableModelNode.setAttributes(n,e[0]),[{type:this.id,attributes:n}]}},{key:"toDomElements",value:function(e,t,n){var s=e[0].attributes,i=s&&"header"===s.style?"th":"td",r=t.createElement(i),a={};return s.colspan>1&&(a.colspan=s.colspan),s.rowspan>1&&(a.rowspan=s.rowspan),f.setAttributes(r,a),[r]}},{key:"createData",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=void 0===e.cellCount?1:e.cellCount,n=[],s=0;s<t;s++)n.push({type:"tableCell",attributes:{style:e.style||"data",rowspan:e.rowspan||1,colspan:e.colspan||1}},{type:"/tableCell"});return n}}]),t}(v.ContentBranchModelNode);_.id="tableCell",_.matchTagNames=["td","th"],_.parentNodeTypes=["tableRow"],_=w([p.mixin(m.TableCellableModelNode),b.modelRegistry.register],_)},"./src/model/nodes/TableCellableModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TableCellableModelNode",(function(){return r}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=function(){function e(){Object(s.default)(this,e)}return Object(i.default)(e,[{key:"getRowspan",value:function(){return this.element.attributes.rowspan||1}},{key:"getColspan",value:function(){return this.element.attributes.colspan||1}},{key:"getSpans",value:function(){return{col:this.getColspan(),row:this.getRowspan()}}},{key:"getStyle",value:function(){return this.element.attributes.style||"data"}}],[{key:"construct",value:function(e){}},{key:"setAttributes",value:function(e,t){var n="th"===t.nodeName.toLowerCase()?"header":"data",s=t.getAttribute("colspan"),i=t.getAttribute("rowspan");e.style=n,null===s||""===s||isNaN(+s)||(e.colspan=+s),null===i||""===i||isNaN(+i)||(e.rowspan=+i)}}]),e}();r.isFocusable=!0,r.isCellable=!0},"./src/model/nodes/TableModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TableModelNode",(function(){return w})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(s),r=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),a=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),u=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),d=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),h=n("./src/oo.ts"),p=n("./src/model/nodes/BranchModelNode.ts"),f=n("./src/model/nodes/FocusableModelNode.ts"),m=n("./src/model/ModelRegistry.ts"),v=n("./src/model/TableMatrix.ts"),b=n("./src/model/TableNodeCellIterator.ts"),g=n("./src/model/formula/FunctionRegistry.ts"),y=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},w=function(e){function t(e){var n;return Object(r.default)(this,t),n=Object(o.default)(this,Object(l.default)(t).call(this,e)),f.FocusableModelNode.construct(Object(c.default)(n)),n.matrix=new v.TableMatrix(Object(c.default)(n)),n.on("splice",n.onSplice.bind(Object(c.default)(n))),n}return Object(u.default)(t,e),Object(a.default)(t,[{key:"getIterator",value:function(){return new b.TableNodeCellIterator(this)}},{key:"eachCell",value:i.a.mark((function e(){var t,n,s,r,a,o,l,c,u,d,h,p,f,m,v,b,g,y;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,n=!1,s=void 0,e.prev=3,r=this.children[Symbol.iterator]();case 5:if(t=(a=r.next()).done){e.next=60;break}o=a.value,l=!0,c=!1,u=void 0,e.prev=10,d=o.children[Symbol.iterator]();case 12:if(l=(h=d.next()).done){e.next=43;break}p=h.value,f=!0,m=!1,v=void 0,e.prev=17,b=p.children[Symbol.iterator]();case 19:if(f=(g=b.next()).done){e.next=26;break}return y=g.value,e.next=23,y;case 23:f=!0,e.next=19;break;case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(17),m=!0,v=e.t0;case 32:e.prev=32,e.prev=33,f||null==b.return||b.return();case 35:if(e.prev=35,!m){e.next=38;break}throw v;case 38:return e.finish(35);case 39:return e.finish(32);case 40:l=!0,e.next=12;break;case 43:e.next=49;break;case 45:e.prev=45,e.t1=e.catch(10),c=!0,u=e.t1;case 49:e.prev=49,e.prev=50,l||null==d.return||d.return();case 52:if(e.prev=52,!c){e.next=55;break}throw u;case 55:return e.finish(52);case 56:return e.finish(49);case 57:t=!0,e.next=5;break;case 60:e.next=66;break;case 62:e.prev=62,e.t2=e.catch(3),n=!0,s=e.t2;case 66:e.prev=66,e.prev=67,t||null==r.return||r.return();case 69:if(e.prev=69,!n){e.next=72;break}throw s;case 72:return e.finish(69);case 73:return e.finish(66);case 74:case"end":return e.stop()}}),e,this,[[3,62,66,74],[10,45,49,57],[17,28,32,40],[33,,35,39],[50,,52,56],[67,,69,73]])}))},{key:"getDependencyGraphRoots",value:function(){var e=[],t=!0,n=!1,s=void 0;try{for(var i,r=this.eachCell()[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;a.getExpression()&&!a.dependedBy.length&&e.push(a)}}catch(o){n=!0,s=o}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}return e}},{key:"recalculateCells",value:function(){var e=!0,t=!1,n=void 0;try{for(var s,i=this.eachCell()[Symbol.iterator]();!(e=(s=i.next()).done);e=!0)s.value.calculateValue()}catch(r){t=!0,n=r}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"getMatrix",value:function(){return this.matrix}},{key:"getCellValue",value:function(e,t){var n=this.matrix.getCell(e,t);return n.isPlaceholder()?"":n.node.getValue()}},{key:"invokeFunction",value:function(e){var t=g.functionRegistry.lookup(e.toLowerCase());if(!t)throw new Error("No such function '".concat(e,"'"));for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return t.apply(void 0,s)}},{key:"onSplice",value:function(e,t,n){this.matrix.invalidate();var s=!0,i=!1,r=void 0;try{for(var a,o=n[Symbol.iterator]();!(s=(a=o.next()).done);s=!0){var l=a.value,c=!0,u=!1,d=void 0;try{for(var h,p=l.eachCell()[Symbol.iterator]();!(c=(h=p.next()).done);c=!0)h.value.calculateValue()}catch(f){u=!0,d=f}finally{try{c||null==p.return||p.return()}finally{if(u)throw d}}}}catch(f){i=!0,r=f}finally{try{s||null==o.return||o.return()}finally{if(i)throw r}}}}]),t}(p.BranchModelNode);w.id="table",w.matchTagNames=["table"],w.childNodeTypes=["tableSection"],w=y([h.mixin(f.FocusableModelNode),m.modelRegistry.register],w)},"./src/model/nodes/TableRowModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TableRowModelNode",(function(){return b})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.concat"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),i=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(i),a=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),o=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),l=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),d=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),h=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),p=n("./src/model/nodes/BranchModelNode.ts"),f=n("./src/model/nodes/TableCellModelNode.ts"),m=n("./src/model/ModelRegistry.ts"),v=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},b=function(e){function t(e){var n;return Object(a.default)(this,t),(n=Object(l.default)(this,Object(c.default)(t).call(this,e))).on("splice",n.onSplice.bind(Object(u.default)(n))),n}return Object(d.default)(t,e),Object(o.default)(t,[{key:"eachCell",value:r.a.mark((function e(){var t,n,s,i,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,n=!1,s=void 0,e.prev=3,i=this.children[Symbol.iterator]();case 5:if(t=(a=i.next()).done){e.next=12;break}return o=a.value,e.next=9,o;case 9:t=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),n=!0,s=e.t0;case 18:e.prev=18,e.prev=19,t||null==i.return||i.return();case 21:if(e.prev=21,!n){e.next=24;break}throw s;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}}),e,this,[[3,14,18,26],[19,,21,25]])}))},{key:"onSplice",value:function(e,t,n){if(this.root){this.parent.parent.matrix.invalidate();var s=!0,i=!1,r=void 0;try{for(var a,o=n[Symbol.iterator]();!(s=(a=o.next()).done);s=!0)a.value.calculateValue()}catch(l){i=!0,r=l}finally{try{s||null==o.return||o.return()}finally{if(i)throw r}}}}}],[{key:"createData",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=void 0===e.rowCount?1:e.rowCount,n=[],i=0;i<t;i++)n.push.apply(n,[{type:"tableRow"}].concat(Object(s.default)(f.TableCellModelNode.createData(e)),[{type:"/tableRow"}]));return n}}]),t}(p.BranchModelNode);b.id="tableRow",b.matchTagNames=["tr"],b.childNodeTypes=["tableCell"],b.parentNodeTypes=["tableSection"],b=v([m.modelRegistry.register],b)},"./src/model/nodes/TableSectionModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TableSectionModelNode",(function(){return m})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(s),r=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),a=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),u=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),d=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),h=n("./src/model/nodes/BranchModelNode.ts"),p=n("./src/model/ModelRegistry.ts"),f=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},m=function(e){function t(e){var n;return Object(r.default)(this,t),(n=Object(o.default)(this,Object(l.default)(t).call(this,e))).on("splice",n.onSplice.bind(Object(c.default)(n))),n}return Object(u.default)(t,e),Object(a.default)(t,[{key:"eachCell",value:i.a.mark((function e(){var t,n,s,r,a,o,l,c,u,d,h,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,n=!1,s=void 0,e.prev=3,r=this.children[Symbol.iterator]();case 5:if(t=(a=r.next()).done){e.next=36;break}o=a.value,l=!0,c=!1,u=void 0,e.prev=10,d=o.eachCell()[Symbol.iterator]();case 12:if(l=(h=d.next()).done){e.next=19;break}return p=h.value,e.next=16,p;case 16:l=!0,e.next=12;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(10),c=!0,u=e.t0;case 25:e.prev=25,e.prev=26,l||null==d.return||d.return();case 28:if(e.prev=28,!c){e.next=31;break}throw u;case 31:return e.finish(28);case 32:return e.finish(25);case 33:t=!0,e.next=5;break;case 36:e.next=42;break;case 38:e.prev=38,e.t1=e.catch(3),n=!0,s=e.t1;case 42:e.prev=42,e.prev=43,t||null==r.return||r.return();case 45:if(e.prev=45,!n){e.next=48;break}throw s;case 48:return e.finish(45);case 49:return e.finish(42);case 50:case"end":return e.stop()}}),e,this,[[3,38,42,50],[10,21,25,33],[26,,28,32],[43,,45,49]])}))},{key:"onSplice",value:function(e,t,n){if(this.root){this.parent.matrix.invalidate();var s=!0,i=!1,r=void 0;try{for(var a,o=n[Symbol.iterator]();!(s=(a=o.next()).done);s=!0){var l=a.value,c=!0,u=!1,d=void 0;try{for(var h,p=l.eachCell()[Symbol.iterator]();!(c=(h=p.next()).done);c=!0)h.value.calculateValue()}catch(f){u=!0,d=f}finally{try{c||null==p.return||p.return()}finally{if(u)throw d}}}}catch(f){i=!0,r=f}finally{try{s||null==o.return||o.return()}finally{if(i)throw r}}}}},{key:"getStyle",value:function(){return this.element.attributes.style}}],[{key:"toDataElements",value:function(e,t){return[{type:this.id,attributes:{style:{thead:"header",tbody:"body",tfoot:"footer"}[e[0].nodeName.toLowerCase()]||"body"}}]}},{key:"toDomElements",value:function(e,t,n){var s=e[0],i={header:"thead",body:"tbody",footer:"tfoot"}[s.attributes&&s.attributes.style||"body"];return[t.createElement(i)]}}]),t}(h.BranchModelNode);m.id="tableSection",m.matchTagNames=["thead","tbody","tfoot"],m.childNodeTypes=["tableRow"],m.parentNodeTypes=["table"],m.defaultAttributes={style:"body"},m=f([p.modelRegistry.register],m)},"./src/model/nodes/TextModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TextModelNode",(function(){return h})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),c=n("./src/model/nodes/LeafModelNode.ts"),u=n("./src/model/ModelRegistry.ts"),d=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},h=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).call(this,null))}return Object(o.default)(t,e),Object(i.default)(t,[{key:"canHaveSlugBefore",value:function(){return!1}},{key:"canHaveSlugAfter",value:function(){return!1}}]),t}(c.LeafModelNode);h.id="text",h.isWrapped=!1,h.isContent=!0,h.matchTagNames=[],h=d([u.modelRegistry.register],h)},"./src/model/nodes/VideoModelNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"VideoModelNode",(function(){return b})),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.regexp.to-string");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/oo.ts"),d=n("./src/model/nodes/LeafModelNode.ts"),h=n("./src/model/nodes/FocusableModelNode.ts"),p=n("./src/model/nodes/ResizableModelNode.ts"),f=n("./src/model/Scalable.ts"),m=n("./src/model/ModelRegistry.ts"),v=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},b=function(e){function t(e){var n;return Object(s.default)(this,t),n=Object(r.default)(this,Object(a.default)(t).call(this,e)),h.FocusableModelNode.construct(Object(o.default)(n)),p.ResizableModelNode.construct(Object(o.default)(n)),n}return Object(l.default)(t,e),Object(i.default)(t,[{key:"createScalable",value:function(){var e=this.element.attributes.width,t=this.element.attributes.height;return void 0!==e&&void 0!==t||(e=480,t=270),new f.Scalable({currentDimensions:{width:e,height:t},minDimensions:{width:240,height:135}})}}],[{key:"toDataElements",value:function(e,t){var n=e[0],s={src:n&&n.getAttribute("src"),width:n&&+n.getAttribute("width")||null,height:n&&+n.getAttribute("height")||null};return[{type:this.id,attributes:s},{type:"/"+this.id}]}},{key:"toDomElements",value:function(e,t,n){var s=e[0].attributes,i=s.src,r=s.width,a=s.height,o=t.createElement("video");return i&&o.setAttribute("src",i),r&&o.setAttribute("width",r.toString()),a&&o.setAttribute("height",a.toString()),[o]}}]),t}(d.LeafModelNode);b.id="video",b.matchTagNames=["video"],b.handlesOwnChildren=!0,b.ignoreChildren=!0,b=v([u.mixin(h.FocusableModelNode,p.ResizableModelNode),m.modelRegistry.register],b)},"./src/model/selections/LinearSelectionModel.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"LinearSelectionModel",(function(){return p})),n("core-js/modules/es.array.concat"),n("core-js/modules/es.object.get-own-property-descriptor");var s,i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/model/selections/SelectionModel.ts"),d=n("./src/Range.ts"),h=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},p=s=function(e){function t(e,n){var s;return Object(i.default)(this,t),(s=Object(a.default)(this,Object(o.default)(t).call(this,e))).range=n,s}return Object(l.default)(t,e),Object(r.default)(t,[{key:"getDescription",value:function(){return"Linear: ".concat(this.range.from," - ").concat(this.range.to)}},{key:"clone",value:function(){return new s(this.documentModel,this.range.clone())}},{key:"equals",value:function(e){return e instanceof s&&e.documentModel===this.documentModel&&e.range.equals(this.range)}},{key:"collapsedToStart",value:function(){return new s(this.documentModel,new d.Range(this.range.start))}},{key:"collapsedToEnd",value:function(){return new s(this.documentModel,new d.Range(this.range.end))}},{key:"collapsedToFrom",value:function(){return new s(this.documentModel,new d.Range(this.range.from))}},{key:"collapsedToTo",value:function(){return new s(this.documentModel,new d.Range(this.range.to))}},{key:"isCollapsed",value:function(){return this.range.isCollapsed()}},{key:"getRanges",value:function(){return[this.range]}},{key:"getCoveringRange",value:function(){return this.range}},{key:"getRange",value:function(){return this.range}},{key:"translatedByTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new s(this.documentModel,e.translateRange(this.range,t))}}],[{key:"fromHash",value:function(e,t){return new s(e,d.Range.fromHash(t.range))}}]),t}(u.SelectionModel);p.id="linear",p=s=h([u.selectionModelFactory.register],p)},"./src/model/selections/NullSelectionModel.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"NullSelectionModel",(function(){return h})),n("core-js/modules/es.object.get-own-property-descriptor");var s,i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/model/selections/SelectionModel.ts"),d=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},h=s=function(e){function t(){return Object(i.default)(this,t),Object(a.default)(this,Object(o.default)(t).apply(this,arguments))}return Object(l.default)(t,e),Object(r.default)(t,[{key:"getDescription",value:function(){return"Null"}},{key:"clone",value:function(){return new s(this.documentModel)}},{key:"equals",value:function(e){return e instanceof s&&e.documentModel===this.documentModel}},{key:"collapsedToStart",value:function(){return this.clone()}},{key:"collapsedToEnd",value:function(){return this.clone()}},{key:"collapsedToFrom",value:function(){return this.clone()}},{key:"collapsedToTo",value:function(){return this.clone()}},{key:"isCollapsed",value:function(){return!0}},{key:"getRanges",value:function(){return[]}},{key:"getCoveringRange",value:function(){return null}},{key:"translatedByTransaction",value:function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1],this.clone()}}],[{key:"fromHash",value:function(e,t){return new s(e)}}]),t}(u.SelectionModel);h.id="null",h=s=d([u.selectionModelFactory.register],h)},"./src/model/selections/SelectionModel.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"SelectionModel",(function(){return a})),n.d(t,"selectionModelFactory",(function(){return o}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./src/CtorFactory.ts"),a=function(){function e(t){Object(s.default)(this,e),this.documentModel=t}return Object(i.default)(e,[{key:"getId",value:function(){return this.constructor.id}},{key:"getRange",value:function(){return this.getRanges()[0]}},{key:"translatedByTransactions",value:function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1],e.reduce((function(e,t){return e.translatedByTransaction(t)}),this)}}],[{key:"fromJson",value:function(e,t){var n="string"==typeof t?JSON.parse(t):t;return this.fromHash(e,n)}},{key:"fromHash",value:function(e,t){var n=o.lookup(t.type);if(!n)throw new Error("Unknown selection type: ".concat(t.type));return n.fromHash(e,t)}}]),e}();a.id=null;var o=new r.CtorFactory},"./src/model/selections/TableSelectionModel.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TableSelectionModel",(function(){return v})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.concat"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.map"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s,i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/model/selections/SelectionModel.ts"),d=n("./src/model/selections/NullSelectionModel.ts"),h=n("./src/Range.ts"),p=n("./src/model/nodes/TableModelNode.ts"),f=n("./src/model/nodes/TableSectionModelNode.ts"),m=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},v=s=function(e){function t(e,n,s,r){var l,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:s,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:r;return Object(i.default)(this,t),(l=Object(a.default)(this,Object(o.default)(t).call(this,e))).tableNode=null,l.tableRange=n,l.fromCol=s,l.fromRow=r,l.toCol=c,l.toRow=u,l.startCol=s<c?s:c,l.startRow=r<u?r:u,l.endCol=s>c?s:c,l.endRow=r>u?r:u,l.intendedFromCol=s,l.intendedFromRow=r,l.intendedToCol=c,l.intendedToRow=u,l}return Object(l.default)(t,e),Object(r.default)(t,[{key:"getDescription",value:function(){return"Table ".concat(this.tableRange.from," - ").concat(this.tableRange.to,", c").concat(this.fromCol," r").concat(this.fromRow," - c").concat(this.toCol," r").concat(this.toRow)}},{key:"clone",value:function(){return new s(this.documentModel,this.tableRange,this.fromCol,this.fromRow,this.toCol,this.toRow)}},{key:"equals",value:function(e){return e instanceof s&&e.documentModel===this.documentModel&&e.tableRange.equals(this.tableRange)&&e.fromCol===this.fromCol&&e.fromRow===this.fromRow&&e.toCol===this.toCol&&e.toRow===this.toRow}},{key:"collapsedToStart",value:function(){return new s(this.documentModel,this.tableRange,this.startCol,this.startRow,this.startCol,this.startRow)}},{key:"collapsedToEnd",value:function(){return new s(this.documentModel,this.tableRange,this.endCol,this.endRow,this.endCol,this.endRow)}},{key:"collapsedToFrom",value:function(){return new s(this.documentModel,this.tableRange,this.fromCol,this.fromRow,this.fromCol,this.fromRow)}},{key:"collapsedToTo",value:function(){return new s(this.documentModel,this.tableRange,this.toCol,this.toRow,this.toCol,this.toRow)}},{key:"isCollapsed",value:function(){return!1}},{key:"getRanges",value:function(){return this.getMatrixCells().map((function(e){return e.node.getRange()}))}},{key:"getCoveringRange",value:function(){return this.tableRange}},{key:"translatedByTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.translateRange(this.tableRange,t);return n.isCollapsed()?new d.NullSelectionModel(this.documentModel):new s(this.documentModel,n,this.fromCol,this.fromRow,this.toCol,this.toRow)}},{key:"getTableNode",value:function(){if(!this.tableNode){var e=this.documentModel.getBranchNodeFromOffset(this.tableRange.start+1);e instanceof p.TableModelNode&&(this.tableNode=e)}return this.tableNode}},{key:"expand",value:function(){for(var e=this.getMatrixCells(),t=0,n=1/0,s=1/0,i=-1/0,r=-1/0,a=this.fromCol>this.toCol,o=this.fromRow>this.toRow;e.length>t;){var l=!0,c=!1,u=void 0;try{for(var d,h=e[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var p=d.value;n=Math.min(n,p.col),s=Math.min(s,p.row),i=Math.max(i,p.col+p.node.getColspan()-1),r=Math.max(r,p.row+p.node.getRowspan()-1)}}catch(f){c=!0,u=f}finally{try{l||null==h.return||h.return()}finally{if(c)throw u}}this.startCol=n,this.startRow=s,this.endCol=i,this.endRow=r,this.fromCol=a?i:n,this.fromRow=o?r:s,this.toCol=a?n:i,this.toRow=o?s:r,t=e.length,e=this.getMatrixCells()}return this}},{key:"getMatrixCells",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getTableNode().matrix.getCells(this.startCol,this.startRow,this.endCol,this.endRow,e)}},{key:"isSingleCell",value:function(){return this.fromRow===this.toRow&&this.fromCol===this.toCol||1===this.getMatrixCells().length}},{key:"containsCell",value:function(e,t){return e>=this.startCol&&e<=this.endCol&&t>=this.startRow&&t<=this.endRow}},{key:"isMergeable",value:function(){if(this.getMatrixCells(!0).length<=1)return!1;for(var e,t=this.getTableNode().matrix,n=this.endRow;n>=this.startRow;n--){var s=t.getRowNode(n).traverseUp((function(e){return!(e instanceof f.TableSectionModelNode)}));if(e&&s!==e)return!1;e=s}return!0}},{key:"getRowCount",value:function(){return this.endRow-this.startRow+1}},{key:"getColCount",value:function(){return this.endCol-this.startCol+1}},{key:"isFullRow",value:function(){var e=this.getTableNode().matrix;return this.getColCount()===e.getMaxColCount()}},{key:"isFullCol",value:function(){var e=this.getTableNode().matrix;return this.getRowCount()===e.getRowCount()}},{key:"adjusted",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,r=this.getTableNode().matrix,a=function(e,t,n){for(var s=t,i=s.col,a=s.row,o=n>0?1:-1;n;){if("col"===e){if((i+=o)>=r.getColCount(a)||i<0)break}else if((a+=o)>=r.getRowCount()||a<0)break;var l=r.getCell(i,a);l&&!l.equals(t)&&(n-=o,t=l)}return t},o=r.getCell(this.intendedFromCol,this.intendedFromRow);e&&(o=a("col",o,e)),t&&(o=a("row",o,t));var l=r.getCell(this.intendedToCol,this.intendedToRow);return n&&(l=a("col",l,n)),i&&(l=a("row",l,i)),new s(this.documentModel,this.tableRange,o.col,o.row,l.col,l.row).expand()}}],[{key:"fromHash",value:function(e,t){return new s(e,h.Range.fromHash(t.tableRange),t.fromCol,t.fromRow,t.toCol,t.toRow)}}]),t}(u.SelectionModel);v.id="table",v=s=m([u.selectionModelFactory.register],v)},"./src/oo.ts":function(e,t,n){"use strict";function s(e){Object.defineProperty(e,"mixins",{enumerable:!1,value:new Set});for(var t=new Set(Object.getOwnPropertyNames((function(){}))),n=new Set(Object.getOwnPropertyNames(e)),s=arguments.length,i=new Array(s>1?s-1:0),r=1;r<s;r++)i[r-1]=arguments[r];for(var a=0,o=i;a<o.length;a++){var l=o[a];e.mixins.add(l);var c=!0,u=!1,d=void 0;try{for(var h,p=Object.getOwnPropertyNames(l.prototype)[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var f=h.value,m=e.prototype[f],v=l.prototype[f];"constructor"===f||m&&!0===m.overridesMixin||(e.prototype[f]=v)}}catch(C){u=!0,d=C}finally{try{c||null==p.return||p.return()}finally{if(u)throw d}}var b=!0,g=!1,y=void 0;try{for(var w,_=Object.getOwnPropertyNames(l)[Symbol.iterator]();!(b=(w=_.next()).done);b=!0){var k=w.value;t.has(k)||n.has(k)||(e[k]=l[k])}}catch(C){g=!0,y=C}finally{try{b||null==_.return||_.return()}finally{if(g)throw y}}}}function i(e,t){return e.constructor.mixins&&e.constructor.mixins.has(t)}function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){s.apply(void 0,[e].concat(t))}}function a(e,t,n){n.value.overridesMixin=!0}n.r(t),n.d(t,"hasMixin",(function(){return i})),n.d(t,"mixin",(function(){return r})),n.d(t,"overridesMixin",(function(){return a})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.concat"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.get-own-property-names"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.set"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator")},"./src/platform.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"platform",(function(){return i})),n("core-js/modules/es.string.match");var s=navigator.userAgent,i=(s.match(/Windows/)?"windows":s.match(/Macintosh/)&&"mac")||s.match(/Linux/)&&"linux"},"./src/style/styles.scss":function(e,t,n){},"./src/ui/ActionSet.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ActionSet",(function(){return u})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.set"),n("core-js/modules/es.string.iterator"),n("core-js/modules/es.weak-map"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),o=n("./src/oo.ts"),l=n("./src/EventEmitter.ts"),c=function(e,t,n,s){var i,r=arguments.length,o=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(a.default)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(o=(r<3?i(o):r>3?i(t,n,o):i(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},u=function(){function e(){Object(i.default)(this,e),l.EventEmitter.construct(this),this.items=new Set,this.disposables=new WeakMap,this.onActionClick=this.onActionClick.bind(this),this.onActionToggle=this.onActionToggle.bind(this)}return Object(r.default)(e,[{key:"get",value:function(e){if(e)throw new Error("Not implemented");return Object(s.default)(this.items)}},{key:"add",value:function(e){var t=!0,n=!1,s=void 0;try{for(var i,r=e[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;this.items.has(a)||(this.disposables.set(a,new l.CompositeDisposable(a.on("click",this.onActionClick),a.on("toggle",this.onActionToggle))),this.items.add(a))}}catch(o){n=!0,s=o}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}return this.emit("add",e),this.emit("change"),this}},{key:"remove",value:function(e){var t=!0,n=!1,s=void 0;try{for(var i,r=e[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;this.items.has(a)&&(this.disposables.get(a).dispose(),this.items.delete(a))}}catch(o){n=!0,s=o}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}return this.emit("remove",e),this.emit("change"),this}},{key:"clear",value:function(){return this.remove(Object(s.default)(this.items))}},{key:"setMode",value:function(e){var t=!0,n=!1,s=void 0;try{for(var i,r=this.items[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;a.toggle(a.modes.has(e))}}catch(o){n=!0,s=o}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}return this.emit("change"),this}},{key:"onActionClick",value:function(){}},{key:"onActionToggle",value:function(){}}]),e}();u=c([o.mixin(l.EventEmitter)],u)},"./src/ui/ActionWidgetUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ActionWidgetUi",(function(){return o})),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.set"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(s.default)(this,t),(e=Object(i.default)(this,Object(r.default)(t).call(this,n))).action=n.action||"",e.modes=new Set(n.modes||[]),e.element.classList.add("am-ui-actionWidget"),e}return Object(a.default)(t,e),t}(n("./src/ui/ButtonWidgetUi.ts").ButtonWidgetUi)},"./src/ui/AlignWidgetUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"AlignWidgetUi",(function(){return c}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./src/ui/ButtonSelectWidgetUi.ts"),l=n("./src/ui/ButtonOptionWidgetUi.ts"),c=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.default)(this,t),e=Object(i.default)(this,Object(r.default)(t).call(this,n));var a=[new l.ButtonOptionWidgetUi({icon:"alignLeft",label:"Left",data:"left"}),new l.ButtonOptionWidgetUi({icon:"alignCenter",label:"Center",data:"center"}),new l.ButtonOptionWidgetUi({icon:"alignRight",label:"Right",data:"right"})];return e.addItems(a),e}return Object(a.default)(t,e),t}(o.ButtonSelectWidgetUi)},"./src/ui/ButtonElementUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ButtonElementUi",(function(){return a})),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.regexp.to-string");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./src/domUtil.ts"),a=function(){function e(){Object(s.default)(this,e)}return Object(i.default)(e,[{key:"setActive",value:function(e){return this.active=e,this.element.classList.toggle("am-ui-buttonWidget-active",e),this}},{key:"getActive",value:function(){return this.active}},{key:"setButtonElement",value:function(e){return this.buttonElement&&(this.buttonElement.classList.remove("am-ui-buttonWidget-button"),this.buttonElement.removeAttribute("role"),this.buttonElement.removeEventListener("mousedown",this.onMouseDown),this.buttonElement.removeEventListener("click",this.onClick),this.buttonElement.removeEventListener("keydown",this.onKeyDown),this.buttonElement.removeEventListener("keypress",this.onKeyPress)),this.buttonElement=e,this.buttonElement&&(this.buttonElement.classList.add("am-ui-buttonWidget-button"),this.buttonElement.setAttribute("role","button"),this.buttonElement.addEventListener("mousedown",this.onMouseDown),this.buttonElement.addEventListener("click",this.onClick),this.buttonElement.addEventListener("keydown",this.onKeyDown),this.buttonElement.addEventListener("keypress",this.onKeyPress)),this}},{key:"onMouseDown",value:function(e){this.isDisabled()||e.button!==r.MouseButton.left||(this.tabIndexedElement.removeAttribute("tabindex"),this.element.classList.add("am-ui-buttonWidget-pressed"),document.addEventListener("mouseup",this.onMouseUp,!0))}},{key:"onMouseUp",value:function(e){this.isDisabled()||e.button!==r.MouseButton.left||(this.tabIndexedElement.setAttribute("tabindex",this.tabIndex.toString()),this.element.classList.remove("am-ui-buttonWidget-pressed"),document.removeEventListener("mouseup",this.onMouseUp,!0))}},{key:"onClick",value:function(e){this.isDisabled()||e.button!==r.MouseButton.left||this.emit("click")}},{key:"onKeyDown",value:function(e){this.isDisabled()||e.which!==r.Key.space&&e.which!==r.Key.enter||(this.element.classList.add("am-ui-buttonWidget-pressed"),document.addEventListener("keyup",this.onKeyUp,!0))}},{key:"onKeyUp",value:function(e){this.isDisabled()||e.which!==r.Key.space&&e.which!==r.Key.enter||(this.element.classList.remove("am-ui-buttonWidget-pressed"),document.removeEventListener("keyup",this.onKeyUp,!0))}},{key:"onKeyPress",value:function(e){this.isDisabled()||e.which!==r.Key.space&&e.which!==r.Key.enter||this.emit("click")}}],[{key:"construct",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.buttonElement=null,e.active=!1,e.onMouseDown=e.onMouseDown.bind(e),e.onMouseUp=e.onMouseUp.bind(e),e.onClick=e.onClick.bind(e),e.onKeyDown=e.onKeyDown.bind(e),e.onKeyUp=e.onKeyUp.bind(e),e.onKeyPress=e.onMouseDown.bind(e),e.element.classList.add("am-ui-buttonWidget"),e.setButtonElement(t.buttonElement||document.createElement("div"))}}]),e}()},"./src/ui/ButtonGroupWidgetUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ButtonGroupWidgetUi",(function(){return p})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),c=n("./src/oo.ts"),u=n("./src/ui/WidgetUi.ts"),d=n("./src/ui/GroupElementUi.ts"),h=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(s.default)(this,t),e=Object(i.default)(this,Object(r.default)(t).call(this,n)),n.groupElement=n.groupElement||e.element,d.GroupElementUi.construct(Object(a.default)(e),n),e.element.classList.add("am-ui-buttonGroupWidget"),n.items&&e.addItems(n.items),e}return Object(o.default)(t,e),t}(u.WidgetUi);p=h([c.mixin(d.GroupElementUi)],p)},"./src/ui/ButtonOptionWidgetUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ButtonOptionWidgetUi",(function(){return y})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/get.js"),c=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),u=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),d=n("./src/oo.ts"),h=n("./src/ui/OptionWidgetUi.ts"),p=n("./src/ui/ButtonElementUi.ts"),f=n("./src/ui/IconElementUi.ts"),m=n("./src/ui/IndicatorElementUi.ts"),v=n("./src/ui/TabIndexedWidgetUi.ts"),b=n("./src/ui/TitledElementUi.ts"),g=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(u.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},y=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(s.default)(this,t),e=Object(r.default)(this,Object(o.default)(t).call(this,n)),p.ButtonElementUi.construct(Object(a.default)(e),n),f.IconElementUi.construct(Object(a.default)(e),n),m.IndicatorElementUi.construct(Object(a.default)(e),n),n.tabIndexedElement=n.tabIndexedElement||e.buttonElement,n.tabIndex=void 0!==n.tabIndex?n.tabIndex:-1,v.TabIndexedWidgetUi.construct(Object(a.default)(e),n),n.titledElement=n.titledElement||e.buttonElement,b.TitledElementUi.construct(Object(a.default)(e),n),e.element.classList.add("am-ui-buttonOptionWidget"),e.buttonElement.appendChild(e.iconElement),e.buttonElement.appendChild(e.labelElement),e.buttonElement.appendChild(e.indicatorElement),e.element.appendChild(e.buttonElement),e}return Object(c.default)(t,e),Object(i.default)(t,[{key:"setSelected",value:function(e){return Object(l.default)(Object(o.default)(t.prototype),"setSelected",this).call(this,e),this.constructor.selectable&&this.setActive(e),this}}]),t}(h.OptionWidgetUi);y.highlightable=!1,y=g([d.mixin(p.ButtonElementUi,f.IconElementUi,m.IndicatorElementUi,v.TabIndexedWidgetUi,b.TitledElementUi)],y)},"./src/ui/ButtonSelectWidgetUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ButtonSelectWidgetUi",(function(){return p})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),c=n("./src/oo.ts"),u=n("./src/ui/SelectWidgetUi.ts"),d=n("./src/ui/TabIndexedWidgetUi.ts"),h=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(s.default)(this,t),e=Object(i.default)(this,Object(r.default)(t).call(this,n)),d.TabIndexedWidgetUi.construct(Object(a.default)(e),n),e.bindKeyDownListener=e.bindKeyDownListener.bind(Object(a.default)(e)),e.unbindKeyDownListener=e.unbindKeyDownListener.bind(Object(a.default)(e)),e.element.addEventListener("focus",e.bindKeyDownListener),e.element.addEventListener("blur",e.unbindKeyDownListener),e.element.classList.add("am-ui-buttonSelectWidget"),e}return Object(o.default)(t,e),t}(u.SelectWidgetUi);p=h([c.mixin(d.TabIndexedWidgetUi)],p)},"./src/ui/ButtonWidgetUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ButtonWidgetUi",(function(){return y})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),c=n("./src/oo.ts"),u=n("./src/ui/WidgetUi.ts"),d=n("./src/ui/ButtonElementUi.ts"),h=n("./src/ui/IconElementUi.ts"),p=n("./src/ui/IndicatorElementUi.ts"),f=n("./src/ui/LabelElementUi.ts"),m=n("./src/ui/TitledElementUi.ts"),v=n("./src/ui/TabIndexedWidgetUi.ts"),b=n("./src/ui/FlaggedElementUi.ts"),g=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},y=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(s.default)(this,t),e=Object(i.default)(this,Object(r.default)(t).call(this,n)),d.ButtonElementUi.construct(Object(a.default)(e),n),h.IconElementUi.construct(Object(a.default)(e),n),p.IndicatorElementUi.construct(Object(a.default)(e),n),f.LabelElementUi.construct(Object(a.default)(e),n),n.titledElement=n.titledElement||e.buttonElement,m.TitledElementUi.construct(Object(a.default)(e),n),n.tabIndexedElement=n.tabIndexedElement||e.buttonElement,v.TabIndexedWidgetUi.construct(Object(a.default)(e),n),b.FlaggedElementUi.construct(Object(a.default)(e),n),e.buttonElement.appendChild(e.iconElement),e.buttonElement.appendChild(e.labelElement),e.buttonElement.appendChild(e.indicatorElement),e.element.classList.add("am-ui-buttonWidget"),e.element.appendChild(e.buttonElement),e}return Object(o.default)(t,e),t}(u.WidgetUi);y=g([c.mixin(d.ButtonElementUi,h.IconElementUi,p.IndicatorElementUi,f.LabelElementUi,m.TitledElementUi,v.TabIndexedWidgetUi,b.FlaggedElementUi)],y)},"./src/ui/ClippableElementUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ClippableElementUi",(function(){return a}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./src/domUtil.ts"),a=function(){function e(){Object(s.default)(this,e)}return Object(i.default)(e,[{key:"setClippableElement",value:function(e){return this.clippableElement&&(this.clippableElement.classList.remove("am-ui-clippableElement-clippable"),this.clippableElement.style.width="",this.clippableElement.style.height="",this.clippableElement.style.overflowX="",this.clippableElement.style.overflowY=""),this.clippableElement=e,this.clippableElement.classList.add("am-ui-clippableElement-clippable"),this.clip(),this}},{key:"setClippableContainerElement",value:function(e){return this.clippableContainerElement=e,this.clip(),this}},{key:"toggleClipping",value:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.clipping,this}},{key:"isClipped",value:function(){return this.clippedHorizontally||this.clippedVertically}},{key:"clip",value:function(){if(!this.clipping)return this;var e,t,n,s,i,a=this.clippableContainerElement||this.clippableElement,o=a.offsetWidth-this.clippableElement.offsetWidth,l=a.offsetHeight-this.clippableElement.offsetHeight,c=r.getOffset(a);this.clippableScrollerElement instanceof Window?(e={x:0,y:0},t=this.clippableScrollerElement.innerWidth,n=this.clippableScrollerElement.innerHeight,s=this.clippableScrollerElement.pageYOffset,i=this.clippableScrollerElement.pageXOffset):(e=r.getOffset(this.clippableScrollerElement),t=this.clippableScrollerElement.offsetWidth,n=this.clippableScrollerElement.offsetHeight,s=0,i=0),t-=10,n-=10;var u=a.offsetWidth+10,d=c.x<0?u+c.x:e.x+i+t-c.x,h=e.y+s+n-c.y;d=Math.min(d,document.documentElement.clientWidth),h=Math.min(h,document.documentElement.clientHeight);var p=Math.ceil(d-o),f=Math.ceil(h-l),m=p<this.clippableElement.scrollWidth,v=f<this.clippableElement.scrollHeight,b=this.clippableElement.style;return m?(b.overflowX="scroll",b.width=Math.max(0,p)+"px",b.maxWidth=""):(b.overflowX="",b.width="",b.maxWidth=Math.max(0,p)+"px"),v?(b.overflowY="scroll",b.height=Math.max(0,f)+"px",b.maxHeight=""):(b.overflowY="",b.height="",b.maxHeight=Math.max(0,f)+"px"),this.clippedHorizontally=m,this.clippedVertically=v,this}},{key:"onClippableScrollHandler",value:function(e){}},{key:"onClippableWindowResizeHandler",value:function(e){}}],[{key:"construct",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.clippableElement=null,e.clippableContainerElement=null,e.clippableScrollableContainerElement=null,e.clippableScrollerElement=null,e.clipping=!1,e.clippedHorizontally=!1,e.clippedVertically=!1,e.onClippableScrollHandler=e.onClippableScrollHandler.bind(e),e.onClippableWindowResizeHandler=e.onClippableWindowResizeHandler.bind(e),t.clippableContainerElement&&e.setClippableContainerElement(t.clippableContainerElement),e.setClippableElement(t.clippableElement||e.element)}}]),e}()},"./src/ui/Command.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"Command",(function(){return r})),n("core-js/modules/es.array.index-of");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=function(){function e(t,n){Object(s.default)(this,e),this.id=t,this.supportedSelections=n}return Object(i.default)(e,[{key:"canExecute",value:function(e){return(!this.supportedSelections||-1!==this.supportedSelections.indexOf(e.model.getFragment().getSelection().getId()))&&this.canExecuteOverride(e)}},{key:"canExecuteOverride",value:function(e){return!0}},{key:"execute",value:function(e){return!!this.canExecute(e)&&this.executeOverride(e)}},{key:"executeOverride",value:function(e){return!1}}]),e}()},"./src/ui/CommandRegistry.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"CommandRegistry",(function(){return c})),n.d(t,"commandRegistry",(function(){return u}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/get.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(l.default)(t,e),Object(i.default)(t,[{key:"register",value:function(e,n){"string"==typeof e?Object(o.default)(Object(a.default)(t.prototype),"register",this).call(this,e,n):Object(o.default)(Object(a.default)(t.prototype),"register",this).call(this,e.id,e)}}]),t}(n("./src/Registry.ts").Registry),u=new c},"./src/ui/ContextItemUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ContextItemUi",(function(){return b})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/oo.ts"),d=n("./src/model/nodes/ModelNode.ts"),h=n("./src/ui/WidgetUi.ts"),p=n("./src/ui/IconElementUi.ts"),f=n("./src/ui/LabelElementUi.ts"),m=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};function v(e){e.preventDefault(),e.stopPropagation()}var b=function(e){function t(e,n){var i,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(s.default)(this,t),i=Object(r.default)(this,Object(a.default)(t).call(this,l)),p.IconElementUi.construct(Object(o.default)(i),l),f.LabelElementUi.construct(Object(o.default)(i),l),i.context=e,i.model=n,i.fragment=null,i.element.addEventListener("mousedown",v),i.element.classList.add("am-ui-contextItem"),i}return Object(l.default)(t,e),Object(i.default)(t,[{key:"isNode",value:function(){return this.model&&this.model instanceof d.ModelNode}},{key:"getCommand",value:function(){return this.context.surface.commandRegistry.lookup(this.constructor.commandId)}},{key:"getFragment",value:function(){if(!this.fragment){var e=this.context.surface.model;this.fragment=this.isNode()?e.getLinearFragment(this.model.getOuterRange()):e.getFragment()}return this.fragment}},{key:"setup",value:function(){return this}},{key:"teardown",value:function(){return this}}],[{key:"isCompatibleWith",value:function(e){return this.modelClasses.some((function(t){return e instanceof t}))}}]),t}(h.WidgetUi);b.id=null,b.exclusive=!0,b.commandId=null,b.modelClasses=[],b=m([u.mixin(p.IconElementUi,f.LabelElementUi)],b)},"./src/ui/ContextItemUiFactory.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ContextItemUiFactory",(function(){return f})),n.d(t,"contextItemUiFactory",(function(){return m})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/oo.ts"),d=n("./src/CtorFactory.ts"),h=n("./src/ui/ModeledCtorFactory.ts"),p=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},f=function(e){function t(){var e;return Object(s.default)(this,t),e=Object(r.default)(this,Object(a.default)(t).call(this)),h.ModeledCtorFactory.construct(Object(o.default)(e)),e}return Object(l.default)(t,e),Object(i.default)(t,[{key:"ensureExists",value:function(e){if(!this.contains(e))throw new Error("Unknown context item ID: ".concat(e))}},{key:"isExclusive",value:function(e){return this.ensureExists(e),this.lookup(e).exclusive}}]),t}(d.CtorFactory),m=new(f=p([u.mixin(h.ModeledCtorFactory)],f))},"./src/ui/ContextUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ContextUi",(function(){return m})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.map"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/oo.ts"),d=n("./src/ui/ElementUi.ts"),h=n("./src/ui/GroupElementUi.ts"),p=n("./src/ui/ContextItemUiFactory.ts"),f=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},m=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.default)(this,t),(n=Object(r.default)(this,Object(a.default)(t).call(this,i))).createElement(i),h.GroupElementUi.construct(Object(o.default)(n)),n.surface=e,n.visible=!1,n.choosing=!1,n.groupElement.classList.add("am-ui-context-menu"),n.element.classList.add("am-ui-context","am-ui-element-hidden"),n.element.appendChild(n.groupElement),n}return Object(l.default)(t,e),Object(i.default)(t,[{key:"isMobile",value:function(){return this.constructor.isMobile}},{key:"updateDimensions",value:function(){return this.emit("resize"),this}},{key:"toggleMenu",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.choosing;return e!==this.choosing&&(this.choosing=e,this.element.classList.toggle("am-ui-context-choosing",e),e?this.setupMenuItems():this.teardownMenuItems()),this}},{key:"setupMenuItems",value:function(){var e=this,t=this.getRelatedSources().map((function(t){switch(t.type){case"item":return p.contextItemUiFactory.create(t.id,e,t.model);case"tool":throw new Error("Not implemented")}}));this.addItems(t);var n=!0,s=!1,i=void 0;try{for(var r,a=t[Symbol.iterator]();!(n=(r=a.next()).done);n=!0)r.value.setup()}catch(o){s=!0,i=o}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}return this}},{key:"teardownMenuItems",value:function(){var e=!0,t=!1,n=void 0;try{for(var s,i=this.items[Symbol.iterator]();!(e=(s=i.next()).done);e=!0)s.value.teardown()}catch(r){t=!0,n=r}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}return this.clearItems(),this}},{key:"destroy",value:function(){return this.element.remove(),this}}]),t}(d.ElementUi);m.isMobile=!1,m=f([u.mixin(h.GroupElementUi)],m)},"./src/ui/DataTransferHandlerUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"DataTransferHandlerUi",(function(){return l})),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.promise");var s=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(s),r=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),a=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(t){r(t)}}function o(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},l=function(){function e(t,n){Object(r.default)(this,e),this.surface=t,this.item=n}return Object(a.default)(e,[{key:"onDidInsert",value:function(e){return o(this,void 0,void 0,i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})))}}]),e}();l.id=null,l.kinds=null,l.types=null},"./src/ui/DataTransferHandlerUiFactory.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"DataTransferHandlerUiFactory",(function(){return u})),n.d(t,"dataTransferHandlerFactory",(function(){return d})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.index-of"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(s),r=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),a=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),u=function(e){function t(){return Object(r.default)(this,t),Object(o.default)(this,Object(l.default)(t).apply(this,arguments))}return Object(c.default)(t,e),Object(a.default)(t,[{key:"handlersBy",value:i.a.mark((function e(t,n){var s,r,a,o,l,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=!0,r=!1,a=void 0,e.prev=3,o=this.items.values()[Symbol.iterator]();case 5:if(s=(l=o.next()).done){e.next=13;break}if(c=l.value,void 0!==t&&c.kinds&&-1===c.kinds.indexOf(t)||void 0!==n&&c.types&&-1===c.types.indexOf(n)){e.next=10;break}return e.next=10,c;case 10:s=!0,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),r=!0,a=e.t0;case 19:e.prev=19,e.prev=20,s||null==o.return||o.return();case 22:if(e.prev=22,!r){e.next=25;break}throw a;case 25:return e.finish(22);case 26:return e.finish(19);case 27:case"end":return e.stop()}}),e,this,[[3,15,19,27],[20,,22,26]])}))},{key:"getHandlerIdForItem",value:function(e){var t=!0,n=!1,s=void 0;try{for(var i,r=this.handlersBy(e.kind,e.type)[Symbol.iterator]();!(t=(i=r.next()).done);t=!0)return i.value.id}catch(a){n=!0,s=a}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}return null}}]),t}(n("./src/CtorFactory.ts").CtorFactory),d=new u},"./src/ui/DataTransferItemUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"DataTransferItemUi",(function(){return r}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=function(){function e(t,n,i,r){Object(s.default)(this,e),this.kind=t,this.type=n,this.data=i,this.name=r}return Object(i.default)(e,null,[{key:"newFromFileItem",value:function(t){return new e("file",t.type,{item:t})}}]),e}()},"./src/ui/DebugBarUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"DebugBarUi",(function(){return d})),n("core-js/modules/es.array.map");var s=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),c=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),u=n("./src/util.ts"),d=function(e){function t(e){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.default)(this,t),(n=Object(a.default)(this,Object(o.default)(t).call(this,s))).surface=e,n.onDocumentUpdate=n.onDocumentUpdate.bind(Object(l.default)(n)),n.onSurfaceSelect=n.onSurfaceSelect.bind(Object(l.default)(n)),n.updateDump=u.debounce(n.updateDump.bind(Object(l.default)(n)),250),n.surface.model.on("documentUpdate",n.onDocumentUpdate),n.surface.model.on("select",n.onSurfaceSelect),n.selectionEl=document.createElement("div"),n.selectionEl.className="am-ui-debugBar-selection",n.htmlEl=document.createElement("div"),n.htmlEl.className="am-ui-debugBar-html",n.linearDataEl=document.createElement("div"),n.linearDataEl.className="am-ui-debugBar-dump",n.filibusterEl=document.createElement("div"),n.filibusterEl.className="am-ui-debugBar-filibuster",n.filibusterToggleEl=document.createElement("input"),n.filibusterToggleEl.type="checkbox",n.filibusterToggleEl.addEventListener("click",n.onFilibusterToggleClick.bind(Object(l.default)(n))),n.createElement(s),n.element.classList.add("am-ui-debugBar"),n.element.appendChild(n.selectionEl),n.element.appendChild(n.filibusterToggleEl),n.element.appendChild(n.htmlEl),n.element.appendChild(n.linearDataEl),n.element.appendChild(n.filibusterEl),n.onSurfaceSelect(n.surface.model.getSelection()),n.updateDump(),n}return Object(c.default)(t,e),Object(r.default)(t,[{key:"onDocumentUpdate",value:function(){this.updateDump()}},{key:"onSurfaceSelect",value:function(e){this.selectionEl.textContent=e.getDescription()}},{key:"onFilibusterToggleClick",value:function(){this.filibusterToggleEl.checked?(this.filibusterEl.innerHTML="",this.surface.startFilibuster()):(this.surface.stopFilibuster(),this.filibusterEl.innerHTML=this.surface.filibuster.getObservationsHtml())}},{key:"updateDump",value:function(){this.htmlEl.textContent=this.surface.getXml(),this.linearDataEl.innerHTML=this.generateListFromLinearData(this.surface.model.documentModel.data)}},{key:"generateListFromLinearData",value:function(e){for(var t=this,n='<ol start="0">',i=0;i<e.getLength();i++){var r=e.getDataAt(i);n+="<li>",e.isStructuralOffset(i)&&(n+='<span class="am-ui-debugBar-dump-structure">S</span>'),e.isContentOffset(i)&&(n+='<span class="am-ui-debugBar-dump-content">C</span>');var a=void 0;if("string"==typeof r?a=r:Array.isArray(r)&&(a=r[0]),a){switch(a){case" ":a="&nbsp;";break;case"\n":a="\\n";break;case"\r":a="\\r";break;case"\t":a="\\t"}n+='<span class="am-ui-debugBar-dump-char">'.concat(a,"</span>")}if("object"===Object(s.default)(r))if(Array.isArray(r)){var o=r[1].map((function(e){return t.surface.model.documentModel.store.value(e).getComparableObject()}));n+=' <span class="am-ui-debugBar-dump-attributes">'.concat(JSON.stringify(o),"</span>")}else n+='<span class="am-ui-debugBar-dump-element">'.concat(r.type,"</span>"),r.attributes&&(n+=' <span class="am-ui-debugBar-dump-attributes">'.concat(JSON.stringify(r.attributes),"</span>"));n+="</li>"}return n+="</ol>"}}]),t}(n("./src/ui/ElementUi.ts").ElementUi)},"./src/ui/DesktopSurfaceUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"DesktopSurfaceUi",(function(){return u}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./src/ui/SurfaceUi.ts"),c=n("./src/ui/contexts/DesktopContextUi.ts"),u=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(o.default)(t,e),Object(i.default)(t,[{key:"createContext",value:function(){return new c.DesktopContextUi(this)}}]),t}(l.SurfaceUi)},"./src/ui/DesktopTargetUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"DesktopTargetUi",(function(){return u}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./src/ui/TargetUi.ts"),c=n("./src/ui/DesktopSurfaceUi.ts"),u=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(s.default)(this,t),(e=Object(r.default)(this,Object(a.default)(t).call(this,n))).element.classList.add("am-ui-desktopTarget"),e}return Object(o.default)(t,e),Object(i.default)(t,[{key:"createSurface",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.surface=new c.DesktopSurfaceUi(e,t,n),this.element.appendChild(this.surface.element),this.surface.initialize()}}]),t}(l.TargetUi)},"./src/ui/ElementUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ElementUi",(function(){return u})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),a=n("./src/oo.ts"),o=n("./src/domUtil.ts"),l=n("./src/EventEmitter.ts"),c=function(e,t,n,s){var i,a=arguments.length,o=a<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(r.default)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.default)(this,e),l.EventEmitter.construct(this),this.element=null,this.elementGroup=null,this.visible=!0,this.data=t.data,this.visible=!!t.visible}return Object(i.default)(e,[{key:"createElement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.element=null===e.element?null:e.element||document.createElement(this.getTagName()),this.visible=void 0===e.visible||!!e.visible,this.visible||this.element.classList.add("am-ui-element-hidden"),e.id&&(this.element.id=e.id),e.classes&&(this.element.className=e.classes.join(" ")),e.text&&(this.element.textContent=e.text)}},{key:"getTagName",value:function(){return this.constructor.tagName}},{key:"isElementAttached",value:function(){return o.contains(document,this.element)}},{key:"toggle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.visible;return e!==this.visible&&(this.visible=e,this.element.classList.toggle("am-ui-element-hidden",!e),this.emit("toggle",e)),this}},{key:"getElementGroup",value:function(){return this.elementGroup}},{key:"setElementGroup",value:function(e){return this.elementGroup=e,this}}]),e}();u.tagName="div",u=c([a.mixin(l.EventEmitter)],u)},"./src/ui/FlaggedElementUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"FlaggedElementUi",(function(){return a})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.map"),n("core-js/modules/es.map"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.regexp.flags"),n("core-js/modules/es.set"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=function(){function e(){Object(i.default)(this,e)}return Object(r.default)(e,[{key:"setFlaggedElement",value:function(e){var t,n,i=Object(s.default)(this.flags).map((function(e){return"am-ui-flaggedElement-".concat(e)}));return this.flaggedElement&&(n=this.flaggedElement.classList).remove.apply(n,Object(s.default)(i)),this.flaggedElement=e,(t=this.flaggedElement.classList).add.apply(t,Object(s.default)(i)),this}},{key:"clearFlags",value:function(){var e,t=new Map(Object(s.default)(this.flags).map((function(e){return[e,!1]}))),n=Object(s.default)(this.flags).map((function(e){return"am-ui-flaggedElement-".concat(e)}));return this.flags.clear(),this.flaggedElement&&(e=this.flaggedElement.classList).remove.apply(e,Object(s.default)(n)),this.emit("flag",t),this}},{key:"setFlags",value:function(e){var t,n,i=this,r=new Map,a=[],o=[],l=function(e){i.flags.has(e)||(i.flags.add(e),r.set(e,!0),a.push(e))},c=function(e){i.flags.has(e)&&(i.flags.delete(e),r.set(e,!1),o.push(e))};if("string"==typeof e)l(e);else if(Array.isArray(e)){var u=!0,d=!1,h=void 0;try{for(var p,f=e[Symbol.iterator]();!(u=(p=f.next()).done);u=!0)l(p.value)}catch(v){d=!0,h=v}finally{try{u||null==f.return||f.return()}finally{if(d)throw h}}}else for(var m in e)e[m]?l(m):c(m);return this.flaggedElement&&((t=this.flaggedElement.classList).add.apply(t,Object(s.default)(a.map((function(e){return"am-ui-flaggedElement-".concat(e)})))),(n=this.flaggedElement.classList).remove.apply(n,Object(s.default)(o.map((function(e){return"am-ui-flaggedElement-".concat(e)}))))),this.emit("flag",r),this}}],[{key:"construct",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.flags=new Set,e.flaggedElement=null,e.setFlags(t.flags),e.setFlaggedElement(t.flaggedElement||e.element)}}]),e}()},"./src/ui/GroupElementUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"GroupElementUi",(function(){return o})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.concat"),n("core-js/modules/es.array.filter"),n("core-js/modules/es.array.find"),n("core-js/modules/es.array.index-of"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.reverse"),n("core-js/modules/es.array.slice"),n("core-js/modules/es.array.splice"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./src/util.ts"),o=function(){function e(){Object(i.default)(this,e)}return Object(r.default)(e,[{key:"setGroupElement",value:function(e){this.groupElement=e;var t=!0,n=!1,s=void 0;try{for(var i,r=this.items[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;this.groupElement.appendChild(a.element)}}catch(o){n=!0,s=o}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}return this}},{key:"addItems",value:function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,l=e[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value,u=this.items.indexOf(c);-1!==u&&(this.removeItems([c]),u<t&&t--),c.setElementGroup(this),n.push(c.element)}}catch(P){r=!0,a=P}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}if(void 0===t||t<0||t>=this.items.length){var d,h=!0,p=!1,f=void 0;try{for(var m,v=n[Symbol.iterator]();!(h=(m=v.next()).done);h=!0){var b=m.value;this.groupElement.appendChild(b)}}catch(P){p=!0,f=P}finally{try{h||null==v.return||v.return()}finally{if(p)throw f}}(d=this.items).push.apply(d,Object(s.default)(e))}else if(0===t){var g,y=!0,w=!1,_=void 0;try{for(var k,C=n.reverse()[Symbol.iterator]();!(y=(k=C.next()).done);y=!0){var x=k.value;this.groupElement.insertBefore(x,this.groupElement.firstChild)}}catch(P){w=!0,_=P}finally{try{y||null==C.return||C.return()}finally{if(w)throw _}}(g=this.items).unshift.apply(g,Object(s.default)(e))}else{var j,O=!0,S=!1,E=void 0;try{for(var T,I=n[Symbol.iterator]();!(O=(T=I.next()).done);O=!0){var D=T.value;this.groupElement.insertBefore(D,this.groupElement.childNodes[t])}}catch(P){S=!0,E=P}finally{try{O||null==I.return||I.return()}finally{if(S)throw E}}(j=this.items).splice.apply(j,[t,0].concat(Object(s.default)(e)))}return this.emit("change",this.items.slice()),this}},{key:"removeItems",value:function(e){var t=!0,n=!1,s=void 0;try{for(var i,r=e[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value,o=this.items.indexOf(a);-1!==o&&(a.setElementGroup(null),this.items.splice(o,1),a.element.remove())}}catch(l){n=!0,s=l}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}return this.emit("change",this.items.slice()),this}},{key:"clearItems",value:function(){return this.removeItems(this.items.slice()),this.emit("change",[]),this}},{key:"getItemFromData",value:function(e){var t=a.hashObject(e);return this.items.find((function(e){return t===a.hashObject(e.data)}))}},{key:"getItemsFromData",value:function(e){var t=a.hashObject(e);return this.items.filter((function(e){return t===a.hashObject(e.data)}))}}],[{key:"construct",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.groupElement=null,e.items=[],e.setGroupElement(t.groupElement||document.createElement("div"))}}]),e}()},"./src/ui/GroupWidgetUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"GroupWidgetUi",(function(){return u})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),a=n("./src/oo.ts"),o=n("./src/ui/WidgetUi.ts"),l=n("./src/ui/GroupElementUi.ts"),c=function(e,t,n,s){var i,a=arguments.length,o=a<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(r.default)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},u=function(){function e(){Object(s.default)(this,e)}return Object(i.default)(e,[{key:"setDisabled",value:function(e){if(o.WidgetUi.prototype.setDisabled.call(this,e),this.items){var t=!0,n=!1,s=void 0;try{for(var i,r=this.items[Symbol.iterator]();!(t=(i=r.next()).done);t=!0)i.value.updateDisabled()}catch(a){n=!0,s=a}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}}return this}}],[{key:"construct",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l.GroupElementUi.construct(e,t)}}]),e}();u=c([a.mixin(l.GroupElementUi)],u)},"./src/ui/IconElementUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"IconElementUi",(function(){return r}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=function(){function e(){Object(s.default)(this,e)}return Object(i.default)(e,[{key:"setIcon",value:function(e){return this.icon!==e&&(this.iconElement&&(null!==this.icon&&this.iconElement.classList.remove("am-ui-icon-".concat(this.icon)),null!==e&&this.iconElement.classList.add("am-ui-icon-".concat(e))),this.icon=e,this.element.classList.toggle("am-ui-iconElement",!!this.icon)),this}},{key:"setIconTitle",value:function(e){return this.iconTitle!==e&&(this.iconTitle=e,this.iconElement&&(this.iconElement.title=e||"")),this}},{key:"setIconElement",value:function(e){return this.iconElement&&(this.iconElement.classList.remove("am-ui-iconElement-icon","am-ui-icon-".concat(this.icon)),this.iconElement.title=""),this.iconElement=e,this.iconElement.classList.add("am-ui-iconElement-icon"),this.icon&&this.iconElement.classList.add("am-ui-icon-".concat(this.icon)),this}}],[{key:"construct",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.icon=null,e.iconTitle=null,e.iconElement=null,e.setIcon(t.icon||e.constructor.icon),e.setIconTitle(t.iconTitle||e.constructor.iconTitle),e.setIconElement(t.iconElement||document.createElement("span"))}}]),e}();r.icon=null,r.iconTitle=null},"./src/ui/IndicatorElementUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"IndicatorElementUi",(function(){return r})),n("core-js/modules/es.string.trim");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=function(){function e(){Object(s.default)(this,e)}return Object(i.default)(e,[{key:"setIndicator",value:function(e){return e=e&&e.trim()?e.trim():null,this.indicator!==e&&(this.indicatorElement&&(this.indicator&&this.indicatorElement.classList.remove("am-ui-indicator-".concat(this.indicator)),e&&this.indicatorElement.classList.add("am-ui-indicator-".concat(e))),this.indicator=e),this.element.classList.toggle("am-ui-indicatorElement",!!this.indicator),this}},{key:"setIndicatorTitle",value:function(e){return this.indicatorTitle!==e&&(this.indicatorTitle=e,this.indicatorElement&&(this.indicatorTitle?this.indicatorElement.title=e:this.indicatorElement.removeAttribute("title"))),this}},{key:"setIndicatorElement",value:function(e){return this.indicatorElement&&(this.indicatorElement.classList.remove("am-ui-indicatorElement-indicator","am-ui-indicator-".concat(this.indicator)),this.indicatorElement.removeAttribute("title")),this.indicatorElement=e,this.indicatorElement.classList.add("am-ui-indicatorElement-indicator"),this.indicatorElement.classList.toggle("am-ui-indicator-".concat(this.indicator),!!this.indicator),null!=this.indicatorTitle&&(this.indicatorElement.title=this.indicatorTitle),this}}],[{key:"construct",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.indicatorElement=null,e.indicator=null,e.indicatorTitle=null,e.setIndicator(t.indicator||this.constructor.indicator),e.setIndicatorTitle(t.indicatorTitle||this.constructor.indicatorTitle),e.setIndicatorElement(t.indicatorElement||document.createElement("span"))}}]),e}();r.indicator=null,r.indicatorTitle=null},"./src/ui/IntellisenseWidgetUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"IntellisenseWidgetUi",(function(){return p})),n("core-js/modules/es.array.index-of");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("vue"),u=n.n(c),d=n("./src/ui/WidgetUi.ts"),h=n("./src/ui/components/IntellisenseComponent.vue"),p=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(s.default)(this,t),(n=Object(r.default)(this,Object(a.default)(t).call(this,i))).surface=e,n.vmData={loading:!1,items:[],selectedIndex:0,query:""};var l=Object(o.default)(n);return n.vm=new u.a({el:document.createElement("div"),data:n.vmData,render:function(e){return e(h.default,{ref:"comp",props:{loading:this.loading,items:this.items,selectedIndex:this.selectedIndex,query:this.query},on:{itemClick:function(e){l.vmData.selectedIndex=l.vmData.items.indexOf(e),l.emit("execute")}}})}}),n.element.classList.add("am-ui-intellisense"),n.element.appendChild(n.vm.$el),n}return Object(l.default)(t,e),Object(i.default)(t,[{key:"setQuery",value:function(e){this.vmData.query=e}},{key:"setItems",value:function(e){this.vmData.items=e,this.vmData.selectedIndex=0}},{key:"moveSelection",value:function(e){this.vmData.selectedIndex=(this.vmData.selectedIndex+e+this.vmData.items.length)%this.vmData.items.length}},{key:"executeCommand",value:function(e){return e||(e=this.vmData.items[this.vmData.selectedIndex]),!!e&&(this.surface.model.getFragment().insertContent([{type:"mention",attributes:{id:e.id,text:e.label}},{type:"/mention"}]).collapsedToEnd().select(),!0)}}]),t}(d.WidgetUi)},"./src/ui/ItemWidgetUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ItemWidgetUi",(function(){return o}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./src/ui/WidgetUi.ts"),a=n("./src/ui/ElementUi.ts"),o=function(){function e(){Object(s.default)(this,e)}return Object(i.default)(e,[{key:"setElementGroup",value:function(e){return a.ElementUi.prototype.setElementGroup.call(this,e),this.setDisabled(this.disabled),this}},{key:"isDisabled",value:function(){return this.disabled||this.getElementGroup()instanceof r.WidgetUi&&this.getElementGroup().isDisabled()}}],[{key:"construct",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}}]),e}()},"./src/ui/LabelElementUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"LabelElementUi",(function(){return o}));var s=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./src/domUtil.ts"),o=function(){function e(){Object(i.default)(this,e)}return Object(r.default)(e,[{key:"setLabel",value:function(e){return this.label!==e&&(this.labelElement&&this.setLabelContent(e),this.label=e,this.emit("labelChange")),this.element.classList.toggle("am-ui-labelElement",!!this.label),this}},{key:"setLabelElement",value:function(e){return this.labelElement&&(this.labelElement.classList.remove("am-ui-labelElement-label"),a.removeAllChildren(this.labelElement)),this.labelElement=e,this.labelElement.classList.add("am-ui-labelElement-label"),this.setLabelContent(this.label),this}},{key:"setLabelContent",value:function(e){if("string"==typeof e)this.labelElement.textContent=e;else if(e instanceof Node)for(var t=0,n=Object(s.default)(e.childNodes);t<n.length;t++){var i=n[t];this.labelElement.appendChild(i)}else a.removeAllChildren(this.labelElement);return this}}],[{key:"construct",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.labelElement=null,e.label=null,e.setLabel(t.label||e.constructor.label),e.setLabelElement(t.labelElement||document.createElement("span"))}}]),e}();o.label=null},"./src/ui/LabelWidgetUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"LabelWidgetUi",(function(){return f})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),c=n("./src/oo.ts"),u=n("./src/ui/WidgetUi.ts"),d=n("./src/ui/LabelElementUi.ts"),h=n("./src/ui/TitledElementUi.ts"),p=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},f=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(s.default)(this,t),e=Object(i.default)(this,Object(r.default)(t).call(this,n)),n.labelElement=e.element,d.LabelElementUi.construct(Object(a.default)(e),n),h.TitledElementUi.construct(Object(a.default)(e),n),e}return Object(o.default)(t,e),t}(u.WidgetUi);f=p([c.mixin(d.LabelElementUi,h.TitledElementUi)],f)},"./src/ui/ModeledCtorFactory.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ModeledCtorFactory",(function(){return r})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.set"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=function(){function e(){Object(s.default)(this,e)}return Object(i.default)(e,[{key:"getRelatedItems",value:function(e){var t=this,n=function(e){var n=[],s=!0,i=!1,r=void 0;try{for(var a,o=t.factory.items.values()[Symbol.iterator]();!(s=(a=o.next()).done);s=!0){var l=a.value;if(l.isCompatibleWith(e)){for(var c=!0,u=0;u<n.length;u++){if(l.prototype instanceof n[u]){n[u]=l,c=!1;break}if(n[u].prototype instanceof l){c=!1;break}}c&&n.push(l)}}}catch(d){i=!0,r=d}finally{try{s||null==o.return||o.return()}finally{if(i)throw r}}return n},s=new Set,i=[],r=!0,a=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value,d=n(u),h=!0,p=!1,f=void 0;try{for(var m,v=d[Symbol.iterator]();!(h=(m=v.next()).done);h=!0){var b=m.value.id;s.has(b)||i.push({id:b,model:u}),s.add(b)}}catch(g){p=!0,f=g}finally{try{h||null==v.return||v.return()}finally{if(p)throw f}}}}catch(g){a=!0,o=g}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return i}}],[{key:"construct",value:function(e){}}]),e}()},"./src/ui/OptionWidgetUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"OptionWidgetUi",(function(){return b})),n("core-js/modules/es.object.get-own-property-descriptor");var s,i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),c=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),u=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),d=n("./src/oo.ts"),h=n("./src/util.ts"),p=n("./src/ui/WidgetUi.ts"),f=n("./src/ui/ItemWidgetUi.ts"),m=n("./src/ui/LabelElementUi.ts"),v=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(u.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},b=s=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.default)(this,t),e=Object(a.default)(this,Object(o.default)(t).call(this,n)),f.ItemWidgetUi.construct(Object(l.default)(e),n),m.LabelElementUi.construct(Object(l.default)(e),n),e.selected=!1,e.highlighted=!1,e.pressed=!1,s.setOptionWidgetUi(e.element,Object(l.default)(e)),e.element.classList.add("am-ui-optionWidget"),e.element.setAttribute("role","option"),e.element.appendChild(e.labelElement),e}return Object(c.default)(t,e),Object(r.default)(t,[{key:"isSelectable",value:function(){return this.constructor.selectable&&!this.isDisabled()&&this.visible}},{key:"isHighlightable",value:function(){return this.constructor.highlightable&&!this.isDisabled()&&this.visible}},{key:"isPressable",value:function(){return this.constructor.pressable&&!this.isDisabled()&&this.visible}},{key:"isSelected",value:function(){return this.selected}},{key:"isHighlighted",value:function(){return this.highlighted}},{key:"isPressed",value:function(){return this.pressed}},{key:"setSelected",value:function(e){return this.constructor.selectable&&(this.selected=e,this.element.classList.toggle("am-ui-optionWidget-selected",e)),this}},{key:"setHighlighted",value:function(e){return this.constructor.highlightable&&(this.highlighted=e,this.element.classList.toggle("am-ui-optionWidget-highlighted",e)),this}},{key:"setPressed",value:function(e){return this.constructor.pressable&&(this.pressed=e,this.element.classList.toggle("am-ui-optionWidget-pressed",e)),this}}],[{key:"setOptionWidgetUi",value:function(e,t){h.setData(e,"OptionWidgetUi",t)}},{key:"getOptionWidgetUi",value:function(e){return h.getData(e,"OptionWidgetUi")}}]),t}(p.WidgetUi);b.selectable=!0,b.highlightable=!0,b.pressable=!0,b=s=v([d.mixin(f.ItemWidgetUi,m.LabelElementUi)],b)},"./src/ui/OverlayUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"OverlayUi",(function(){return o}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(s.default)(this,t),(e=Object(i.default)(this,Object(r.default)(t).call(this,n))).createElement(n),e.element.classList.add("am-ui-overlay"),e}return Object(a.default)(t,e),t}(n("./src/ui/ElementUi.ts").ElementUi)},"./src/ui/PopupWidgetUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"PopupWidgetUi",(function(){return b})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/get.js"),c=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),u=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),d=n("./src/oo.ts"),h=n("./src/domUtil.ts"),p=n("./src/ui/WidgetUi.ts"),f=n("./src/ui/LabelElementUi.ts"),m=n("./src/ui/ClippableElementUi.ts"),v=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(u.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},b=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(s.default)(this,t),(e=Object(r.default)(this,Object(o.default)(t).call(this,n))).bodyElement=document.createElement("div"),e.popupElement=document.createElement("div"),e.anchorElement=document.createElement("div"),e.containerElement=n.containerElement,e.autoClose=!!n.autoClose,e.width=void 0!==n.width?n.width:320,e.height=void 0!==n.height?n.height:null,e.align=null,e.anchored=!1,f.LabelElementUi.construct(Object(a.default)(e),n),m.ClippableElementUi.construct(Object(a.default)(e),{clippableElement:e.bodyElement,clippableContainerElement:e.popupElement}),e.bodyElement.classList.add("am-ui-popupWidget-body"),e.anchorElement.classList.add("am-ui-popupWidget-anchor"),e.popupElement.classList.add("am-ui-popupWidget-popup"),e.popupElement.appendChild(e.bodyElement),e.element.classList.add("am-ui-popupWidget"),e.element.appendChild(e.popupElement),e.element.appendChild(e.anchorElement),e.visible=!1,e.element.classList.add("am-ui-element-hidden"),e}return Object(c.default)(t,e),Object(i.default)(t,[{key:"toggle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.visible,n=e!==this.visible;return Object(l.default)(Object(o.default)(t.prototype),"toggle",this).call(this,e),n&&(e?(this.updateDimensions(),this.toggleClipping(!0)):this.toggleClipping(!1)),this}},{key:"setSize",value:function(e,t){return this.width=e,this.height=isNaN(t)?null:t,this.visible&&this.updateDimensions(),this}},{key:"updateDimensions",value:function(){this.containerElement||(this.containerElement=h.getClosestScrollableContainer(this.element));var e=this.element.offsetWidth,t=e;switch(this.align){case"left":t*=-1;break;case"center":t*=-.5;break;case"right":t=0}var n=h.getOffset(this.element).x,s=h.getOffset(this.containerElement).x,i=n+(t-10)-s,r=s+this.containerElement.clientWidth-(n+(t+10+e+10));r<0?t+=r:i<0&&(t-=i);var a=2*this.anchorElement.scrollWidth;return t+e<a?t=a-e:-t<a&&(t=-a),this.popupElement.style.transform="translateX(".concat(t,"px)"),this.popupElement.style.webkitTransform="translateX(".concat(t,"px)"),this.clip(),this}},{key:"toggleAnchor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.anchored;return this.anchored!==e&&(this.element.classList.toggle("am-ui-popupWidget-anchored",e),this.anchored=e),this}}]),t}(p.WidgetUi);b=v([d.mixin(f.LabelElementUi,m.ClippableElementUi)],b)},"./src/ui/SelectWidgetUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"SelectWidgetUi",(function(){return v})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.filter"),n("core-js/modules/es.array.find"),n("core-js/modules/es.array.index-of"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.slice"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.regexp.constructor"),n("core-js/modules/es.regexp.to-string"),n("core-js/modules/es.string.from-code-point"),n("core-js/modules/es.string.iterator"),n("core-js/modules/es.string.replace"),n("core-js/modules/es.string.trim"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/oo.ts"),d=n("./src/domUtil.ts"),h=n("./src/ui/WidgetUi.ts"),p=n("./src/ui/GroupWidgetUi.ts"),f=n("./src/ui/OptionWidgetUi.ts"),m=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},v=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(s.default)(this,t),e=Object(r.default)(this,Object(a.default)(t).call(this,n)),n.groupElement=n.groupElement||e.element,p.GroupWidgetUi.construct(Object(o.default)(e),n),e.pressed=!1,e.selecting=null,e.keyPressBuffer="",e.keyPressBufferTimer=null,e.onMouseDown=e.onMouseDown.bind(Object(o.default)(e)),e.onMouseUp=e.onMouseUp.bind(Object(o.default)(e)),e.onMouseMove=e.onMouseMove.bind(Object(o.default)(e)),e.onMouseOver=e.onMouseOver.bind(Object(o.default)(e)),e.onMouseLeave=e.onMouseLeave.bind(Object(o.default)(e)),e.onKeyDown=e.onKeyDown.bind(Object(o.default)(e)),e.onKeyPress=e.onKeyPress.bind(Object(o.default)(e)),e.onFocus=e.onFocus.bind(Object(o.default)(e)),e.onToggle=e.onToggle.bind(Object(o.default)(e)),e.element.addEventListener("focus",e.onFocus),e.element.addEventListener("mousedown",e.onMouseDown),e.element.addEventListener("mouseover",e.onMouseOver),e.element.addEventListener("mouseleave",e.onMouseLeave),e.on("toggle",e.onToggle),e.element.classList.add("am-ui-selectWidget","am-ui-selectWidget-depressed"),e.element.setAttribute("role","listbox"),n.items&&e.addItems(n.items),e}return Object(l.default)(t,e),Object(i.default)(t,[{key:"addItems",value:function(e,t){return p.GroupWidgetUi.prototype.addItems.call(this,e,t),this.emit("add",e,void 0===t?this.items.length-e.length-1:t),this}},{key:"removeItems",value:function(e){var t=!0,n=!1,s=void 0;try{for(var i,r=this.items[Symbol.iterator]();!(t=(i=r.next()).done);t=!0)i.value.isSelectable()&&this.selectItem(null)}catch(a){n=!0,s=a}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}return p.GroupWidgetUi.prototype.removeItems.call(this,e),this.emit("remove",e),this}},{key:"clearItems",value:function(){var e=this.items.slice();return p.GroupWidgetUi.prototype.clearItems.call(this),this.selectItem(null),this.emit("remove",e),this}},{key:"onMouseDown",value:function(e){if(!this.isDisabled()&&e.button===d.MouseButton.left){this.togglePressed(!0);var t=this.getTargetItem(e);t&&t.isSelectable()&&(this.pressItem(t),this.selecting=t,document.addEventListener("mouseup",this.onMouseUp,!0),document.addEventListener("mousemove",this.onMouseMove,!0))}e.preventDefault(),e.stopPropagation()}},{key:"onMouseUp",value:function(e){if(this.togglePressed(!1),!this.selecting){var t=this.getTargetItem(e);t&&t.isSelectable()&&(this.selecting=t)}!this.isDisabled()&&e.button===d.MouseButton.left&&this.selecting&&(this.pressItem(null),this.chooseItem(this.selecting),this.selecting=null),document.removeEventListener("mouseup",this.onMouseUp,!0),document.removeEventListener("mousemove",this.onMouseMove,!0),e.preventDefault(),e.stopPropagation()}},{key:"onMouseMove",value:function(e){if(!this.isDisabled()&&this.pressed){var t=this.getTargetItem(e);t&&t!==this.selecting&&t.isSelectable()&&(this.pressItem(t),this.selecting=t)}}},{key:"onMouseOver",value:function(e){if(!this.isDisabled()){var t=this.getTargetItem(e);this.highlightItem(t&&t.isHighlightable()?t:null)}e.preventDefault(),e.stopPropagation()}},{key:"onMouseLeave",value:function(e){this.isDisabled()||this.highlightItem(null),e.preventDefault(),e.stopPropagation()}},{key:"onKeyDown",value:function(e){if(!this.isDisabled()&&this.visible){var t,n=this.getHighlightedItem()||this.getSelectedItem(),s=!1;switch(e.keyCode){case d.Key.enter:n&&n.constructor.highlightable&&(this.chooseItem(n),s=!0);break;case d.Key.up:case d.Key.left:this.clearKeyPressBuffer(),t=this.getRelativeSelectableItem(n,-1),s=!0;break;case d.Key.down:case d.Key.right:this.clearKeyPressBuffer(),t=this.getRelativeSelectableItem(n,1),s=!0;break;case d.Key.escape:case d.Key.tab:n&&n.constructor.highlightable&&n.setHighlighted(!1),this.unbindKeyDownListener(),this.unbindKeyPressListener()}t&&(t.constructor.highlightable?this.highlightItem(t):this.chooseItem(t)),s&&(e.preventDefault(),e.stopPropagation())}}},{key:"onKeyPress",value:function(e){var t=this;if(e.charCode){var n=String.fromCodePoint?String.fromCodePoint(e.charCode):String.fromCharCode(e.charCode);null!==this.keyPressBufferTimer&&clearTimeout(this.keyPressBufferTimer),this.keyPressBufferTimer=setTimeout((function(){return t.clearKeyPressBuffer()}),1500);var s=this.getHighlightedItem()||this.getSelectedItem();this.keyPressBuffer===n?s&&(s=this.getRelativeSelectableItem(s,1)):this.keyPressBuffer+=n;var i=this.getItemMatcher(this.keyPressBuffer,!1);s&&i(s)||(s=this.getRelativeSelectableItem(s,1,i)),s&&(s.constructor.highlightable?this.highlightItem(s):this.chooseItem(s)),e.preventDefault(),e.stopPropagation()}else e.keyCode===d.Key.backspace&&""!==this.keyPressBuffer&&(this.keyPressBuffer=this.keyPressBuffer.substr(0,this.keyPressBuffer.length-1),e.preventDefault(),e.stopPropagation())}},{key:"onFocus",value:function(){this.getSelectedItem()||this.selectItem(this.getFirstSelectableItem())}},{key:"onToggle",value:function(e){e||this.clearKeyPressBuffer()}},{key:"bindKeyPressListener",value:function(){window.addEventListener("keypress",this.onKeyPress,!0)}},{key:"unbindKeyPressListener",value:function(){window.removeEventListener("keypress",this.onKeyPress,!0)}},{key:"bindKeyDownListener",value:function(){window.addEventListener("keydown",this.onKeyDown,!0)}},{key:"unbindKeyDownListener",value:function(){window.removeEventListener("keydown",this.onKeyDown,!0)}},{key:"clearKeyPressBuffer",value:function(){null!==this.keyPressBufferTimer&&(clearTimeout(this.keyPressBufferTimer),this.keyPressBufferTimer=null),this.keyPressBuffer=""}},{key:"getItemMatcher",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.normalize&&(e=e.normalize());var n="^\\s*"+(e=t?e.trim():e.replace(/^\s+/,"")).replace(/([\\{}()|.?*+\-\^$\[\]])/g,"\\$1").replace(/\s+/g,"\\s+");t&&(n+="\\s*$");var s=new RegExp(n,"i");return function(e){var t=e.label;return"string"!=typeof t&&(t=e.labelElement.textContent),t.normalize&&(t=t.normalize()),s.test(t)}}},{key:"getTargetItem",value:function(e){return f.OptionWidgetUi.getOptionWidgetUi(d.closest(e.target,".am-ui-optionWidget"))}},{key:"getSelectedItem",value:function(){return this.items.find((function(e){return e.isSelected()}))}},{key:"getHighlightedItem",value:function(){return this.items.find((function(e){return e.isHighlighted()}))}},{key:"togglePressed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.pressed;e!==this.pressed&&(this.element.classList.toggle("am-ui-selectWidget-pressed",e),this.element.classList.toggle("am-ui-selectWidget-depressed",!e),this.pressed=e)}},{key:"getItemFromLabel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getItemMatcher(e,!0),s=this.items.find((function(e){return e.isSelectable()&&n(e)}));if(s)return s;if(t){n=this.getItemMatcher(e,!1);var i=this.items.filter((function(e){return e.isSelectable()&&n(e)}));if(1===i.length)return i[0]}return null}},{key:"selectItemByLabel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getItemFromLabel(e,t);return this.selectItem(void 0!==e&&n?n:void 0)}},{key:"selectItemByData",value:function(e){var t=this.getItemFromData(e);return this.selectItem(void 0!==e&&t?t:void 0)}},{key:"highlightItem",value:function(e){var t=!1,n=!0,s=!1,i=void 0;try{for(var r,a=this.items[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value,l=o===e;o.isHighlighted()!==l&&(o.setHighlighted(l),t=!0)}}catch(c){s=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}return t&&this.emit("highlight",e),this}},{key:"selectItem",value:function(e){var t=!1,n=!0,s=!1,i=void 0;try{for(var r,a=this.items[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value,l=o===e;o.isSelected()!==l&&(o.setSelected(l),t=!0)}}catch(c){s=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}return t&&this.emit("select",e),this}},{key:"pressItem",value:function(e){var t=!1,n=!0,s=!1,i=void 0;try{for(var r,a=this.items[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value,l=o===e;o.isPressed()!==l&&(o.setPressed(l),t=!0)}}catch(c){s=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}return t&&this.emit("press",e),this}},{key:"chooseItem",value:function(e){return e&&(this.selectItem(e),this.emit("choose",e)),this}},{key:"getRelativeSelectableItem",value:function(e,t,n){n||(n=function(){return!0});var s,i=this.items.length;s=e?(this.items.indexOf(e)+t+i)%i:1===t?0:i-1;for(var r=0;r<i;r++){var a=this.items[s];if(a.isSelectable()&&n(a))return a;s=(s+t+i)%i}return null}},{key:"getFirstSelectableItem",value:function(){return this.items.find((function(e){return e.isSelectable()}))}}]),t}(h.WidgetUi);m([u.overridesMixin],v.prototype,"addItems",null),m([u.overridesMixin],v.prototype,"removeItems",null),m([u.overridesMixin],v.prototype,"clearItems",null),v=m([u.mixin(p.GroupWidgetUi)],v)},"./src/ui/Sequence.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"Sequence",(function(){return o})),n("core-js/modules/es.regexp.constructor"),n("core-js/modules/es.regexp.to-string"),n("core-js/modules/es.string.search");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./src/util.ts"),a=n("./src/Range.ts"),o=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(s.default)(this,e),this.id=t,this.commandId=n,this.data=i,this.strip=r,this.setSelection=a}return Object(i.default)(e,[{key:"match",value:function(e,t,n){if("function"==typeof this.data){var s=this.data(n);return-1===s?null:new a.Range(t-n.length+s,t)}if(this.data instanceof RegExp){var i=n.search(this.data);return-1===i?null:new a.Range(t-n.length+i,t)}for(var o=this.data.length-1,l=t-1;o>=0;o--,l--)if("string"==typeof this.data[o]){if(this.data[o]!==e.getCharacterData(l))return null}else if(this.data[o]instanceof RegExp){if(!this.data[o].test(e.getCharacterData(l)))return null}else if(!r.isSubset(this.data[o],e.getDataAt(l)))return null;return new a.Range(t-this.data.length,t)}},{key:"execute",value:function(e,t){var n,s,i=e.commandRegistry.lookup(this.commandId);if(!i)return!1;if(this.strip){var r=e.model.getSelection().getRange();n=e.model.getLinearFragment(new a.Range(r.end,r.end-this.strip),!0,!0)}e.model.breakpoint(),this.setSelection&&(s=e.model.getSelection(),e.model.setLinearSelection(t));var o=i.execute(e);return o&&n&&n.removeContent(),!o&&s&&e.model.setSelection(s),o}}]),e}()},"./src/ui/SequenceRegistry.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"SequenceRegistry",(function(){return h})),n.d(t,"sequenceRegistry",(function(){return p})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.includes"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.includes"),n("core-js/modules/es.string.iterator"),n("core-js/modules/es.string.match"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/get.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./src/Range.ts"),u=n("./src/Registry.ts"),d=n("./src/ui/Sequence.ts"),h=function(e){function t(e){var n;return Object(s.default)(this,t),(n=Object(r.default)(this,Object(a.default)(t).call(this))).acceptMatch=e,n}return Object(l.default)(t,e),Object(i.default)(t,[{key:"register",value:function(e,n){"string"==typeof e?Object(o.default)(Object(a.default)(t.prototype),"register",this).call(this,e,n):Object(o.default)(Object(a.default)(t.prototype),"register",this).call(this,e.id,e)}},{key:"findMatching",value:function(e,t){for(var n,s=e.model.documentModel.getBranchNodeFromOffset(t),i=e.model.documentModel.data,r=i.getText(!0,new c.Range(s.getRange().start,t)),a=/(^|[^\\])\$/g,o=0,l=!0;null!==(n=a.exec(r));)l?(l=!1,o=r.length):(l=!0,o=n.index+n.length);r=r.substring(o);var u=[],d=!0,h=!1,p=void 0;try{for(var f,m=this.items.values()[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){var v=f.value,b=v.match(i,t,r);if(b&&!e.model.documentModel.selectNodes(b,"leaves").some((function(e){return e.node.traverseUp((function(e){return!e.sequencesDisabled()}))}))&&!e.model.documentModel.data.getAnnotationsFromRange(b,!0).any((function(e){return e.constructor.sequencesDisabled}))){var g={sequence:v,range:b};this.acceptMatch&&!this.acceptMatch(g,i,t,r)||u.push({sequence:v,range:b})}}}catch(y){h=!0,p=y}finally{try{d||null==m.return||m.return()}finally{if(h)throw p}}return u}}]),t}(u.Registry),p=new h((function(e,t,n,s){return"codeblock"===e.sequence.id||"code"===e.sequence.id||!s.includes("`")}));p.register(new d.Sequence("listBullet","bulletSequence",[{type:"paragraph"},/[-*]/," "],2)),p.register(new d.Sequence("heading1","heading1",[{type:"paragraph"},"#"," "],2)),p.register(new d.Sequence("heading2","heading2",[{type:"paragraph"},"#","#"," "],3)),p.register(new d.Sequence("blockquote","blockquote",[{type:"paragraph"},">"," "],2)),p.register(new d.Sequence("codeblock","codeblock",[{type:"paragraph"},"`","`","`"],3))},"./src/ui/SurfaceToolUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"SurfaceToolUi",(function(){return l}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.default)(this,t),(n=Object(r.default)(this,Object(a.default)(t).call(this,e,i))).setDisabled(!0),n}return Object(o.default)(t,e),Object(i.default)(t,[{key:"onSelect",value:function(){var e=this.getCommand();e&&e.execute(this.toolGroup.toolbar.surface)}},{key:"onUpdateState",value:function(){var e=this.getCommand();e&&this.setDisabled(!e.canExecute(this.toolGroup.toolbar.surface))}},{key:"getCommand",value:function(){return this.constructor.getCommand(this.toolGroup.toolbar.surface)}}],[{key:"isCompatibleWith",value:function(e){return!1}},{key:"getCommand",value:function(e){return this.commandId&&e.commandRegistry.lookup(this.commandId)}}]),t}(n("./src/ui/ToolUi.ts").ToolUi);l.commandId=null,l.intellisense=!1},"./src/ui/SurfaceToolbarUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"SurfaceToolbarUi",(function(){return u})),n("core-js/modules/es.object.assign");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/get.js"),c=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),u=function(e){function t(e,n,i){var l,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Object(s.default)(this,t),c=Object.assign({autohide:!1},c),(l=Object(r.default)(this,Object(o.default)(t).call(this,e,n,c))).onContextChange=l.onContextChange.bind(Object(a.default)(l)),l.onFocus=l.onFocus.bind(Object(a.default)(l)),l.onBlur=l.onBlur.bind(Object(a.default)(l)),l.surface=i,l.autohide=c.autohide,l.element.classList.add("am-ui-surfaceToolbar"),l.autohide&&l.element.classList.add("am-ui-surfaceToolbar-autohide","am-ui-surfaceToolbar-hidden"),l}return Object(c.default)(t,e),Object(i.default)(t,[{key:"setup",value:function(e){Object(l.default)(Object(o.default)(t.prototype),"setup",this).call(this,e),this.surface.model.on("contextChange",this.onContextChange),this.autohide&&(this.surface.on("focus",this.onFocus),this.surface.on("blur",this.onBlur)),this.onContextChange()}},{key:"onContextChange",value:function(){this.updateToolState()}},{key:"onFocus",value:function(){this.element.classList.remove("am-ui-surfaceToolbar-hidden")}},{key:"onBlur",value:function(){this.element.classList.add("am-ui-surfaceToolbar-hidden")}},{key:"updateToolState",value:function(){this.emit("updateState")}}]),t}(n("./src/ui/ToolbarUi.ts").ToolbarUi)},"./src/ui/SurfaceUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"SurfaceUi",(function(){return x})),n("core-js/modules/es.object.keys"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.regexp.to-string");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/get.js"),c=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),u=n("./src/domUtil.ts"),d=n("./src/debug.ts"),h=n("./src/ui/WidgetUi.ts"),p=n("./src/ui/OverlayUi.ts"),f=n("./src/Filibuster.ts"),m=n("./src/ui/WindowManagerUi.ts"),v=n("./src/ui/TriggerRegistry.ts"),b=n("./src/ui/SequenceRegistry.ts"),g=n("./src/ui/DataTransferHandlerUiFactory.ts"),y=n("./src/model/DocumentModel.ts"),w=n("./src/model/SurfaceModel.ts"),_=n("./src/view/SurfaceView.ts"),k=n("./src/model/Converter.ts"),C=n("./src/index.ts"),x=(n("./src/ui/dataTransferHandlers/index.ts"),n("./src/ui/commands/index.ts"),function(e){function t(e,n){var i,l,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(s.default)(this,t),i=Object(r.default)(this,Object(o.default)(t).call(this,c)),(l=e instanceof y.DocumentModel?e:k.converter.getModelFromDom(e)).buildNodeTree(),i.controlsElement=document.createElement("div"),i.blockersElement=document.createElement("div"),i.selectionsElement=document.createElement("div"),i.menusElement=document.createElement("div"),i.model=new w.SurfaceModel(l,n),i.view=new _.SurfaceView(i.model,Object(a.default)(i)),i.localOverlay=new p.OverlayUi({classes:["am-ui-overlay-local"]}),i.globalOverlay=new p.OverlayUi({classes:["am-ui-overlay-global"]}),i.dialogs=new m.WindowManagerUi,i.context=i.createContext(),i.filibuster=null,i.triggerRegistry=c.triggerRegistry||v.triggerRegistry,i.commandRegistry=c.commandRegistry||v.triggerRegistry.commandRegistry,i.sequenceRegistry=c.sequenceRegistry||b.sequenceRegistry,i.dataTransferHandlerFactory=c.dataTransferHandlerFactory||g.dataTransferHandlerFactory,i.focused=!1,i.onDocumentMouseDown=i.onDocumentMouseDown.bind(Object(a.default)(i)),document.addEventListener("mousedown",i.onDocumentMouseDown),i.menusElement.appendChild(i.context.element),i.element.classList.add("am-ui-surface"),i.element.appendChild(i.view.element),i.localOverlay.element.appendChild(i.selectionsElement),i.localOverlay.element.appendChild(i.blockersElement),i.localOverlay.element.appendChild(i.controlsElement),i.globalOverlay.element.appendChild(i.dialogs.element),i.globalOverlay.element.appendChild(i.menusElement),i.controlsElement.className="am-ui-overlay-controls",i.blockersElement.className="am-ui-overlay-blockers",i.menusElement.className="am-ui-overlay-menus",i.element.insertBefore(i.localOverlay.element,i.view.element.nextSibling),document.body.appendChild(i.globalOverlay.element),i}return Object(c.default)(t,e),Object(i.default)(t,[{key:"setDisabled",value:function(e){return this.disabled!==e&&null!=this.disabled&&(e?(this.view.disable(),this.model.disable()):(this.view.enable(),this.model.enable())),Object(l.default)(Object(o.default)(t.prototype),"setDisabled",this).call(this,e)}},{key:"destroy",value:function(){return document.removeEventListener("mousedown",this.onDocumentMouseDown),this.model.destroy(),this.context.destroy(),this.dialogs.destroy(),this.view.destroy(),this.element.remove(),this.globalOverlay.element.remove(),this.emit("destroy"),this}},{key:"initialize",value:function(){this.model.initialize(),this.view.initialize()}},{key:"executeTrigger",value:function(e){if(this.isDisabled())return!1;var t=this.triggerRegistry.lookup(e.toString());return!!t&&t.execute(this)}},{key:"getViewportDimensions",value:function(){var e=this.element.getBoundingClientRect();return e||null}},{key:"getDom",value:function(){return k.converter.getDomSubtreeFromModel(this.model.documentModel,document.implementation.createDocument(null,"",null))}},{key:"getXml",value:function(){return u.documentFragmentToXml(this.getDom())}},{key:"onDocumentMouseDown",value:function(e){if(!e.defaultPrevented){var t=[this.element,this.globalOverlay.element,this.localOverlay.element].some((function(t){return u.contains(t,e.target)}));t&&!this.focused?(this.focused=!0,this.emit("focus")):!t&&this.focused&&(this.focused=!1,this.view.blur(),this.emit("blur"))}}},{key:"initFilibuster",value:function(){var e=this;this.filibuster=new f.Filibuster;for(var n=0,s=Object.keys(C);n<s.length;n++){var i=s[n],r=C[i];r.prototype&&r!==f.Filibuster&&this.filibuster.wrapClass(r,C.LinearData.prototype.getData,C.SurfaceModel.prototype.getSelection,C.LinearSelectionModel.prototype.getDescription,C.TableSelectionModel.prototype.getDescription,C.NullSelectionModel.prototype.getDescription,t.prototype.startFilibuster,t.prototype.stopFilibuster)}this.filibuster.setObserver("model doc",(function(){return JSON.stringify(f.Filibuster.clonePlain(e.model.documentModel.data.getData()))})).setObserver("model selection",(function(){var t=e.model.getSelection();return t?t.getDescription():"null"})).setObserver("DOM doc",(function(){return d.serializeNode(e.view.element)})).setObserver("DOM selection",(function(){var t=e.view.nativeSelection;if(0===t.rangeCount)return"null";var n=t.getRangeAt(0);return JSON.stringify({startContainer:d.serializeNode(n.startContainer),startOffset:n.startOffset,endContainer:n.startContainer===n.endContainer?"(=startContainer)":d.serializeNode(n.endContainer),endOffset:n.endOffset})}))}},{key:"startFilibuster",value:function(){this.filibuster?this.filibuster.clearLogs():this.initFilibuster(),this.filibuster.start()}},{key:"stopFilibuster",value:function(){this.filibuster.stop()}}]),t}(h.WidgetUi))},"./src/ui/TabIndexedWidgetUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TabIndexedWidgetUi",(function(){return r})),n("core-js/modules/es.object.assign");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=function(){function e(){Object(s.default)(this,e)}return Object(i.default)(e,[{key:"onTabIndexedElementDisable",value:function(){this.updateTabIndex()}},{key:"setTabIndex",value:function(e){return this.tabIndex!==e&&(this.tabIndex=e,this.updateTabIndex()),this}},{key:"setTabIndexedElement",value:function(e){var t=this.tabIndex;return this.setTabIndex(null),this.tabIndexedElement=e,this.tabIndex=t,this.updateTabIndex(),this}},{key:"updateTabIndex",value:function(){return this.tabIndexedElement?(null===this.tabIndex?this.tabIndexedElement.removeAttribute("tabindex"):this.tabIndexedElement.tabIndex=this.isDisabled()?-1:this.tabIndex,this):this}}],[{key:"construct",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object.assign({tabIndex:0},t),e.tabIndexedElement=null,e.tabIndex=null,e.onTabIndexedElementDisable=e.onTabIndexedElementDisable.bind(e),e.on("disable",e.onTabIndexedElementDisable),e.setTabIndex(t.tabIndex),e.setTabIndexedElement(t.tabIndexedElement||e.element)}}]),e}()},"./src/ui/TargetToolbarUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TargetToolbarUi",(function(){return o}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=function(e){function t(e,n,a){var o,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Object(s.default)(this,t),(o=Object(i.default)(this,Object(r.default)(t).call(this,n,a,e.surface,l))).target=e,o.element.classList.add("am-ui-targetToolbar"),o}return Object(a.default)(t,e),t}(n("./src/ui/SurfaceToolbarUi.ts").SurfaceToolbarUi)},"./src/ui/TargetUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TargetUi",(function(){return u}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./src/ui/ElementUi.ts"),c=n("./src/ui/TargetToolbarUi.ts"),u=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(s.default)(this,t),(e=Object(r.default)(this,Object(a.default)(t).call(this,n))).createElement(),e.element.classList.add("am-ui-target"),e.surface=null,e.toolbar=null,e}return Object(o.default)(t,e),Object(i.default)(t,[{key:"destroy",value:function(){return this.surface.destroy(),this.surface=null,this.toolbar&&(this.toolbar.destroy(),this.toolbar=null),this.element.remove(),this}},{key:"createToolbar",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.toolbar=new c.TargetToolbarUi(this,e,t,n),this.toolbar.setup(this.constructor.toolbarGroups),this.element.insertBefore(this.toolbar.element,this.surface.element)}}]),t}(l.ElementUi);u.toolbarGroups=[{type:"menu",indicator:"down",include:[{group:"format"}],promote:["paragraph"],demote:["blockquote"]},{include:[{group:"textStyle"}],exclude:["subscript","superscript","strikethrough"]},{include:["bullet","number"]},{include:[{group:"insert"}]},{include:[{group:"misc"}]}]},"./src/ui/TitledElementUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TitledElementUi",(function(){return r}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=function(){function e(){Object(s.default)(this,e)}return Object(i.default)(e,[{key:"setTitledElement",value:function(e){return this.titledElement&&this.titledElement.removeAttribute("title"),this.titledElement=e,this.title&&(this.titledElement.title=this.title),this}},{key:"setTitle",value:function(e){return this.title!==e&&(this.titledElement&&(e?this.titledElement.title=e:this.titledElement.removeAttribute("title")),this.title=e),this}}],[{key:"construct",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.title=null,e.titledElement=null,e.setTitle(void 0!==t.title?t.title:e.constructor.title),e.setTitledElement(t.titledElement||e.element)}}]),e}();r.title=null},"./src/ui/ToolGroupUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ToolGroupUi",(function(){return y})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.map"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.set"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),i=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),r=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),a=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),u=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),d=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),h=n("./src/oo.ts"),p=n("./src/domUtil.ts"),f=n("./src/ui/WidgetUi.ts"),m=n("./src/ui/ToolUi.ts"),v=n("./src/ui/ToolsUi.ts"),b=n("./src/ui/GroupElementUi.ts"),g=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},y=function(e){function t(e){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.default)(this,t),n=Object(o.default)(this,Object(l.default)(t).call(this,s)),b.GroupElementUi.construct(Object(c.default)(n)),n.toolbar=e,n.tools=new Map,n.include=s.include||[],n.exclude=s.exclude||[],n.promote=s.promote||[],n.demote=s.demote||[],n.pressed=null,n.onMouseKeyDown=n.onMouseKeyDown.bind(Object(c.default)(n)),n.onMouseKeyUp=n.onMouseKeyUp.bind(Object(c.default)(n)),n.onCapturedMouseKeyUp=n.onCapturedMouseKeyUp.bind(Object(c.default)(n)),n.element.addEventListener("mousedown",n.onMouseKeyDown),n.element.addEventListener("mouseup",n.onMouseKeyUp),n.element.addEventListener("keydown",n.onMouseKeyDown),n.element.addEventListener("keyup",n.onMouseKeyUp),n.groupElement.classList.add("am-ui-toolGroup-tools"),n.element.classList.add("am-ui-toolGroup"),n.element.appendChild(n.groupElement),n.populate(),n}return Object(u.default)(t,e),Object(a.default)(t,[{key:"onMouseKeyDown",value:function(e){!this.isDisabled()&&(e instanceof MouseEvent&&e.button===p.MouseButton.left||e instanceof KeyboardEvent&&(e.which===p.Key.space||e.which===p.Key.enter))&&(this.pressed=this.getTargetTool(e.target),this.pressed&&(document.addEventListener("mouseup",this.onCapturedMouseKeyUp,!0),document.addEventListener("keyup",this.onCapturedMouseKeyUp,!0)),e.preventDefault(),e.stopPropagation())}},{key:"onMouseKeyUp",value:function(e){var t=this.getTargetTool(e.target);!this.isDisabled()&&this.pressed&&this.pressed===t&&(e instanceof MouseEvent&&e.button===p.MouseButton.left||e instanceof KeyboardEvent&&(e.which===p.Key.space||e.which===p.Key.enter))&&(this.pressed.onSelect(e),e.preventDefault(),e.stopPropagation()),this.pressed=null}},{key:"onCapturedMouseKeyUp",value:function(e){document.removeEventListener("mouseup",this.onCapturedMouseKeyUp,!0),document.removeEventListener("keyup",this.onCapturedMouseKeyUp,!0),this.onMouseKeyUp(e)}},{key:"populate",value:function(){var e=this.toolbar.toolFactory,t=e.getTools(this.include,this.exclude,this.promote,this.demote),n=[],r=[],a=new Set,o=!0,l=!1,c=void 0;try{for(var u,d=t[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var h=u.value;if(e.contains(h)&&(this.toolbar.isToolAvailable(h)||this.tools.has(h))){var p=this.tools.get(h);p||(p=e.create(h,this),this.tools.set(h,p),p.updateTitle()),this.toolbar.reserveTool(p),n.push(p),a.add(h)}}}catch(A){l=!0,c=A}finally{try{o||null==d.return||d.return()}finally{if(l)throw c}}for(var f=0,m=Object(i.default)(this.tools);f<m.length;f++){var b=Object(s.default)(m[f],2),g=b[0],y=b[1];a.has(g)||(y.destroy(),this.toolbar.releaseTool(y),r.push(y),this.tools.delete(g))}r.length&&this.removeItems(r),this.element.classList.toggle("am-ui-toolGroup-empty",!n.length);for(var w=new Map,_=0,k=n;_<k.length;_++){var C=k[_],x=C.constructor.subgroup;if(null!==x){var j=w.get(x)||[];j.push(C),w.set(x,j)}}for(var O=[],S=0,E=n;S<E.length;S++){var T=E[S],I=T.constructor.subgroup;if(null===I)O.push(T);else{var D=w.get(I);if(D){w.delete(I);var P=new v.ToolsUi(this);P.populate(D),O.push(P)}}}this.addItems(O)}},{key:"destroy",value:function(){this.clearItems();var e=!0,t=!1,n=void 0;try{for(var s,i=this.tools.values()[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){var r=s.value;this.toolbar.releaseTool(r),r.destroy()}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}return this.tools.clear(),this.element.remove(),this}},{key:"getTargetTool",value:function(e){var t,n=p.closest(e,".am-ui-tool");return n&&(t=m.ToolUi.getTool(n)),t&&!t.isDisabled()?t:null}}]),t}(f.WidgetUi);y.id=null,y=g([h.mixin(b.GroupElementUi)],y)},"./src/ui/ToolGroupUiFactory.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ToolGroupUiFactory",(function(){return u})),n.d(t,"toolGroupUiFactory",(function(){return d})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./src/CtorFactory.ts"),l=n("./src/ui/toolGroups/BarToolGroupUi.ts"),c=n("./src/ui/toolGroups/MenuToolGroupUi.ts"),u=function(e){function t(){var e;Object(s.default)(this,t),e=Object(i.default)(this,Object(r.default)(t).call(this));var n=!0,a=!1,o=void 0;try{for(var l,c=e.constructor.defaultClasses[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var u=l.value;e.register(u)}}catch(d){a=!0,o=d}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return e}return Object(a.default)(t,e),t}(o.CtorFactory);u.defaultClasses=[l.BarToolGroupUi,c.MenuToolGroupUi];var d=new u},"./src/ui/ToolUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ToolUi",(function(){return v})),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.string.replace");var s,i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),c=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),u=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),d=n("./src/oo.ts"),h=n("./src/util.ts"),p=n("./src/ui/WidgetUi.ts"),f=n("./src/ui/IconElementUi.ts"),m=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(u.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},v=s=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(i.default)(this,t),(n=Object(a.default)(this,Object(o.default)(t).call(this,r))).toolGroup=e,n.active=!1,n.titleElement=document.createElement("span"),f.IconElementUi.construct(Object(l.default)(n)),n.onUpdateState=n.onUpdateState.bind(Object(l.default)(n)),n.toolGroup.toolbar.on("updateState",n.onUpdateState),n.titleElement.classList.add("am-ui-tool-title");var c=n.constructor.id.replace(/^([^\/]+)\/([^\/]+).*$/,"$1-$2");return n.element.classList.add("am-ui-tool","am-ui-tool-id-".concat(c)),n.element.appendChild(n.iconElement),n.element.appendChild(n.titleElement),s.setTool(n.element,Object(l.default)(n)),n.setTitle(n.constructor.title),n}return Object(c.default)(t,e),Object(r.default)(t,[{key:"setActive",value:function(e){this.active=e,this.active?this.element.classList.add("am-ui-tool-active"):this.element.classList.remove("am-ui-tool-active")}},{key:"setTitle",value:function(e){return this.title=e,this.updateTitle(),this}},{key:"updateTitle",value:function(){this.titleElement.textContent=this.title,this.setIconTitle(this.title)}},{key:"destroy",value:function(){return this.toolGroup.toolbar.off("updateState",this.onUpdateState),this.element.remove(),this}},{key:"getId",value:function(){return this.constructor.id}}],[{key:"setTool",value:function(e,t){h.setData(e,"tool",t)}},{key:"getTool",value:function(e){return h.getData(e,"tool")}}]),t}(p.WidgetUi);v.icon=null,v.iconTitle=null,v.id=null,v.group=null,v.subgroup=null,v.title=null,v.autoAddToCatchall=!0,v=s=m([d.mixin(f.IconElementUi)],v)},"./src/ui/ToolUiFactory.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ToolUiFactoryBase",(function(){return v})),n.d(t,"SurfaceToolUiFactory",(function(){return b})),n.d(t,"surfaceToolUiFactory",(function(){return g})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.concat"),n("core-js/modules/es.array.filter"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.set"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),i=n("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),r=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),a=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),l=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),d=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),h=n("./src/oo.ts"),p=n("./src/CtorFactory.ts"),f=n("./src/ui/ModeledCtorFactory.ts"),m=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},v=function(e){function t(){return Object(a.default)(this,t),Object(l.default)(this,Object(c.default)(t).apply(this,arguments))}return Object(u.default)(t,e),Object(o.default)(t,[{key:"getTools",value:function(e,t,n,s){var i=new Set(this.extract(t)),a=this.extract(e).filter((function(e){return!i.has(e)})),o=new Set,l=this.extract(n,o),c=this.extract(s,o),u=a.filter((function(e){return!o.has(e)}));return[].concat(Object(r.default)(l),Object(r.default)(u),Object(r.default)(c))}},{key:"extract",value:function(e,t){var n=new Set,s=!0,a=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var u=l.value;if("*"===u){var d=!0,h=!1,p=void 0;try{for(var f,m=this.items[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){var v=Object(i.default)(f.value,2),b=v[0];!v[1].autoAddToCatchall||t&&t.has(b)||(n.add(b),t&&t.add(b))}}catch(O){h=!0,p=O}finally{try{d||null==m.return||m.return()}finally{if(h)throw p}}}else if("string"==typeof u&&(u={id:u}),u.group){var g=!0,y=!1,w=void 0;try{for(var _,k=this.items[Symbol.iterator]();!(g=(_=k.next()).done);g=!0){var C=Object(i.default)(_.value,2),x=C[0],j=C[1];j.group!==u.group||!j.autoAddToCatchall||t&&t.has(x)||(n.add(x),t&&t.add(x))}}catch(O){y=!0,w=O}finally{try{g||null==k.return||k.return()}finally{if(y)throw w}}}else!u.id||t&&t.has(u.id)||(n.add(u.id),t&&t.add(u.id))}}catch(O){a=!0,o=O}finally{try{s||null==c.return||c.return()}finally{if(a)throw o}}return Object(r.default)(n)}}]),t}(p.CtorFactory),b=function(e){function t(){var e;return Object(a.default)(this,t),e=Object(l.default)(this,Object(c.default)(t).call(this)),f.ModeledCtorFactory.construct(Object(s.default)(e)),e}return Object(u.default)(t,e),t}(v),g=new(b=m([h.mixin(f.ModeledCtorFactory)],b))},"./src/ui/ToolbarUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ToolbarUi",(function(){return f})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.map"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/oo.ts"),d=n("./src/ui/ElementUi.ts"),h=n("./src/ui/GroupElementUi.ts"),p=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},f=function(e){function t(e,n){var i,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(s.default)(this,t),i=Object(r.default)(this,Object(a.default)(t).call(this,l)),h.GroupElementUi.construct(Object(o.default)(i)),i.toolFactory=e,i.toolGroupFactory=n,i.tools=new Map,i.barElement=document.createElement("div"),i.createElement(l),i.groupElement.classList.add("am-ui-toolbar-tools"),i.barElement.classList.add("am-ui-toolbar-bar"),i.barElement.appendChild(i.groupElement),i.element.classList.add("am-ui-toolbar"),i.element.appendChild(i.barElement),i}return Object(l.default)(t,e),Object(i.default)(t,[{key:"isToolAvailable",value:function(e){return!this.tools.has(e)}},{key:"reserveTool",value:function(e){this.tools.set(e.getId(),e)}},{key:"releaseTool",value:function(e){this.tools.delete(e.getId())}},{key:"setup",value:function(e){this.reset();var t=[],n=!0,s=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value;"*"===o.include&&(o.type=o.type||"list",o.label=o.label||"More");var l=this.toolGroupFactory.lookup(o.type)?o.type:"bar";t.push(this.toolGroupFactory.create(l,this,o))}}catch(c){s=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}this.addItems(t)}},{key:"reset",value:function(){this.tools.clear();var e=!0,t=!1,n=void 0;try{for(var s,i=this.items[Symbol.iterator]();!(e=(s=i.next()).done);e=!0)s.value.destroy()}catch(r){t=!0,n=r}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.clearItems()}},{key:"destroy",value:function(){return this.reset(),this.element.remove(),this}}]),t}(d.ElementUi);f=p([u.mixin(h.GroupElementUi)],f)},"./src/ui/ToolsUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ToolsUi",(function(){return m})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/oo.ts"),d=n("./src/ui/WidgetUi.ts"),h=n("./src/ui/IconElementUi.ts"),p=n("./src/ui/IndicatorElementUi.ts"),f=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},m=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.default)(this,t),(n=Object(r.default)(this,Object(a.default)(t).call(this,i))).toolGroup=e,n.active=!1,n.titleElement=document.createElement("span"),h.IconElementUi.construct(Object(o.default)(n)),p.IndicatorElementUi.construct(Object(o.default)(n)),n.onUpdateState=n.onUpdateState.bind(Object(o.default)(n)),n.toolGroup.toolbar.on("updateState",n.onUpdateState),n.submenuElement=document.createElement("div"),n.submenuElement.classList.add("am-ui-tools-submenu"),n.titleElement.classList.add("am-ui-tools-title"),n.element.classList.add("am-ui-tools"),n.element.appendChild(n.iconElement),n.element.appendChild(n.titleElement),n.element.appendChild(n.indicatorElement),n.element.appendChild(n.submenuElement),n.setTitle("Callout"),n.setIndicator("menuArrow"),n}return Object(l.default)(t,e),Object(i.default)(t,[{key:"setActive",value:function(e){this.active=e,this.active?this.element.classList.add("am-ui-tools-active"):this.element.classList.remove("am-ui-tools-active")}},{key:"setTitle",value:function(e){return this.title=e,this.updateTitle(),this}},{key:"updateTitle",value:function(){this.titleElement.textContent=this.title}},{key:"destroy",value:function(){return this.toolGroup.toolbar.off("updateState",this.onUpdateState),this.element.remove(),this}},{key:"onUpdateState",value:function(){}},{key:"populate",value:function(e){for(;this.submenuElement.lastChild;)this.submenuElement.lastChild.remove();var t=!0,n=!1,s=void 0;try{for(var i,r=e[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;this.submenuElement.appendChild(a.element)}}catch(o){n=!0,s=o}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}}}]),t}(d.WidgetUi);m=f([u.mixin(h.IconElementUi,p.IndicatorElementUi)],m)},"./src/ui/Trigger.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"Trigger",(function(){return r})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.map"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.set"),n("core-js/modules/es.string.iterator"),n("core-js/modules/es.string.replace"),n("core-js/modules/es.string.split"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=function(){function e(t){if(Object(s.default)(this,e),"string"==typeof t){this.meta=!1,this.ctrl=!1,this.alt=!1,this.shift=!1;var n=!0,i=!1,r=void 0;try{for(var a,o=t.replace(/\s*/g,"").toLowerCase().split("+")[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var l=a.value;switch(e.keyAliases.has(l)&&(l=e.keyAliases.get(l)),l){case"meta":this.meta=!0;break;case"ctrl":this.ctrl=!0;break;case"alt":this.alt=!0;break;case"shift":this.shift=!0;break;default:this.primary=this.primary||e.primaryKey.has(l)&&l}}}catch(c){i=!0,r=c}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}else this.primary=e.primaryKeyMap.get(t.keyCode),this.meta=t.metaKey,this.ctrl=t.ctrlKey,this.alt=t.altKey,this.shift=t.shiftKey}return Object(i.default)(e,[{key:"toString",value:function(){var e=[];return this.meta&&e.push("meta"),this.ctrl&&e.push("ctrl"),this.alt&&e.push("alt"),this.shift&&e.push("shift"),this.primary&&e.push(this.primary),e.join("+")}}]),e}();r.primaryKeyMap=new Map([[8,"backspace"],[9,"tab"],[12,"clear"],[13,"enter"],[27,"escape"],[32,"space"],[33,"page-up"],[34,"page-down"],[35,"end"],[36,"home"],[37,"left"],[38,"up"],[39,"right"],[40,"down"],[46,"delete"],[48,"0"],[49,"1"],[50,"2"],[51,"3"],[52,"4"],[53,"5"],[54,"6"],[55,"7"],[56,"8"],[57,"9"],[65,"a"],[66,"b"],[67,"c"],[68,"d"],[69,"e"],[70,"f"],[71,"g"],[72,"h"],[73,"i"],[74,"j"],[75,"k"],[76,"l"],[77,"m"],[78,"n"],[79,"o"],[80,"p"],[81,"q"],[82,"r"],[83,"s"],[84,"t"],[85,"u"],[86,"v"],[87,"w"],[88,"x"],[89,"y"],[90,"z"],[96,"0"],[97,"1"],[98,"2"],[99,"3"],[100,"4"],[101,"5"],[102,"6"],[103,"7"],[104,"8"],[105,"9"],[106,"multiply"],[107,"add"],[109,"subtract"],[110,"decimal"],[111,"divide"],[112,"f1"],[113,"f2"],[114,"f3"],[115,"f4"],[116,"f5"],[117,"f6"],[118,"f7"],[119,"f8"],[120,"f9"],[121,"f10"],[122,"f11"],[123,"f12"],[186,";"],[187,"="],[188,","],[189,"-"],[190,"."],[191,"/"],[192,"`"],[219,"["],[220,"\\"],[221,"]"],[222,"'"]]),r.primaryKey=new Set(r.primaryKeyMap.values()),r.keyAliases=new Map([["command","meta"],["apple","meta"],["windows","meta"],["option","alt"],["return","enter"],["esc","escape"],["cmd","meta"],["del","delete"],["control","ctrl"],["alternate","alt"]])},"./src/ui/TriggerRegistry.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TriggerRegistry",(function(){return p})),n.d(t,"triggerRegistry",(function(){return f})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.map"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.regexp.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/get.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./src/Registry.ts"),u=n("./src/ui/CommandRegistry.ts"),d=n("./src/ui/Trigger.ts"),h=n("./src/platform.ts"),p=(n("./src/ui/commands/HistoryCommand.ts"),n("./src/ui/commands/AnnotationCommand.ts"),n("./src/ui/commands/FormatCommand.ts"),n("./src/ui/commands/IndentationCommand.ts"),n("./src/ui/commands/ListCommand.ts"),n("./src/ui/commands/InsertImageCommand.ts"),n("./src/ui/commands/InsertVideoCommand.ts"),n("./src/ui/commands/InsertFileCommand.ts"),n("./src/ui/commands/InsertHorizontalRuleCommand.ts"),n("./src/ui/commands/LinkCommand.ts"),n("./src/ui/commands/ImageEditCommand.ts"),n("./src/ui/commands/VideoEditCommand.ts"),n("./src/ui/commands/LabelCommand.ts"),n("./src/ui/commands/SpanCommand.ts"),n("./src/ui/commands/SpanRefCommand.ts"),n("./src/ui/commands/MiscCommands.ts"),function(e){function t(e){var n;return Object(s.default)(this,t),(n=Object(r.default)(this,Object(a.default)(t).call(this))).commandRegistry=e,n}return Object(l.default)(t,e),Object(i.default)(t,[{key:"register",value:function(e,n){var s,i;if("string"==typeof n){if(!(s=this.commandRegistry.lookup(n)))throw new Error("No such command ".concat(n))}else s=n;if(Array.isArray(e))i=e;else if("string"==typeof e)i=[e];else{var r="mac"===h.platform?e.mac:e.pc;i=Array.isArray(r)?r:[r]}i=i.map((function(e){return new d.Trigger(e).toString()}));var l=!0,c=!1,u=void 0;try{for(var p,f=i[Symbol.iterator]();!(l=(p=f.next()).done);l=!0){var m=p.value;if(this.contains(m))throw new Error("Trigger ".concat(m," already registered"))}}catch(k){c=!0,u=k}finally{try{l||null==f.return||f.return()}finally{if(c)throw u}}var v=!0,b=!1,g=void 0;try{for(var y,w=i[Symbol.iterator]();!(v=(y=w.next()).done);v=!0){var _=y.value;Object(o.default)(Object(a.default)(t.prototype),"register",this).call(this,_,s)}}catch(k){b=!0,g=k}finally{try{v||null==w.return||w.return()}finally{if(b)throw g}}}}]),t}(c.Registry)),f=new p(u.commandRegistry);f.register({pc:"ctrl+z",mac:"cmd+z"},"undo"),f.register({pc:["ctrl+y","ctrl+shift+z"],mac:["cmd+y","cmd+shift+z"]},"redo"),f.register({pc:"ctrl+b",mac:"cmd+b"},"bold"),f.register({pc:"ctrl+i",mac:"cmd+i"},"italic"),f.register({pc:"ctrl+u",mac:"cmd+u"},"underline"),f.register({pc:"ctrl+shift+x",mac:"cmd+shift+x"},"strikethrough"),f.register({pc:"ctrl+.",mac:"cmd+."},"superscript"),f.register({pc:"ctrl+,",mac:"cmd+,"},"subscript"),f.register({pc:["tab","ctrl+]"],mac:["tab","cmd+]"]},"indent"),f.register({pc:["shift+tab","ctrl+["],mac:["shift+tab","cmd+["]},"unindent"),f.register({pc:"ctrl+a",mac:"cmd+a"},"selectAll"),f.register({pc:"ctrl+d",mac:"cmd+d"},"duplicate"),f.register({pc:"ctrl+k",mac:"cmd+k"},"link")},"./src/ui/WidgetUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"WidgetUi",(function(){return l}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(s.default)(this,t),(e=Object(r.default)(this,Object(a.default)(t).call(this,n))).createElement(n),e.element.classList.add("am-ui-widget"),e.setDisabled(!!n.disabled),e}return Object(o.default)(t,e),Object(i.default)(t,[{key:"isDisabled",value:function(){return this.disabled}},{key:"setDisabled",value:function(e){if(e!==this.disabled)return this.disabled=e,this.element.classList.toggle("am-ui-widget-disabled",e),this.element.classList.toggle("am-ui-widget-enabled",!e),this.emit("disable",e),this}},{key:"updateDisabled",value:function(){return this.setDisabled(this.disabled),this}}]),t}(n("./src/ui/ElementUi.ts").ElementUi)},"./src/ui/WindowManagerUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"WindowManagerUi",(function(){return f})),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.promise");var s=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(s),r=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),a=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),c=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),u=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),d=n("./node_modules/@babel/runtime/helpers/esm/get.js"),h=n("./src/ui/ElementUi.ts"),p=function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(t){r(t)}}function o(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},f=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.default)(this,t),e=Object(o.default)(this,Object(u.default)(t).call(this,n)),Object(d.default)(Object(u.default)(t.prototype),"createElement",Object(l.default)(e)).call(Object(l.default)(e),n),e.currentWindow=null,e.element.classList.add("am-ui-windowManager"),e}return Object(c.default)(t,e),Object(a.default)(t,[{key:"openWindow",value:function(e,t){return p(this,void 0,void 0,i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.currentWindow){n.next=2;break}throw new Error("Cannot open window because another window is already open");case 2:return e.setManager(this),this.element.appendChild(e.element),this.emit("opening",e,t),n.next=7,e.setup(t);case 7:this.currentWindow=e,e.ready(t);case 9:case"end":return n.stop()}}),n,this)})))}},{key:"closeWindow",value:function(e,t){if(e!==this.currentWindow)throw new Error("Window to close is not the current window");this.emit("closing",e,t),this.currentWindow=null,e.element.remove(),e.teardown(t)}},{key:"isOpened",value:function(e){return e===this.currentWindow}},{key:"destroy",value:function(){return this.element.remove(),this}}]),t}(h.ElementUi)},"./src/ui/WindowUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"WindowUi",(function(){return u})),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.promise");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=n("./node_modules/@babel/runtime/helpers/esm/get.js"),u=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(s.default)(this,t),n.visible=!1,e=Object(r.default)(this,Object(l.default)(t).call(this,n)),Object(c.default)(Object(l.default)(t.prototype),"createElement",Object(a.default)(e)).call(Object(a.default)(e),n),e.manager=null,e.frameElement=document.createElement("div"),e.contentElement=document.createElement("div"),e.headElement=document.createElement("div"),e.bodyElement=document.createElement("div"),e.footElement=document.createElement("div"),e.headElement.classList.add("am-ui-window-head"),e.bodyElement.classList.add("am-ui-window-body"),e.footElement.classList.add("am-ui-window-foot"),e.contentElement.classList.add("am-ui-window-content"),e.contentElement.appendChild(e.headElement),e.contentElement.appendChild(e.bodyElement),e.contentElement.appendChild(e.footElement),e.frameElement.classList.add("am-ui-window-frame"),e.frameElement.appendChild(e.contentElement),e.element.classList.add("am-ui-window"),e.element.appendChild(e.frameElement),e}return Object(o.default)(t,e),Object(i.default)(t,[{key:"setManager",value:function(e){this.manager=e}},{key:"setup",value:function(e){return this.toggle(!0),Promise.resolve()}},{key:"ready",value:function(e){return Promise.resolve()}},{key:"teardown",value:function(e){return Promise.resolve()}},{key:"open",value:function(e){this.manager.openWindow(this,e)}},{key:"close",value:function(e){this.manager.closeWindow(this,e)}},{key:"isOpened",value:function(){return this.manager.isOpened(this)}}]),t}(n("./src/ui/ElementUi.ts").ElementUi)},"./src/ui/commands/AnnotationCommand.ts":function(e,t,n){"use strict";n.r(t),n("core-js/modules/es.array.filter"),n("core-js/modules/es.array.index-of"),n("core-js/modules/es.string.search");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./src/Range.ts"),c=n("./src/ui/Command.ts"),u=n("./src/ui/Sequence.ts"),d=n("./src/ui/CommandRegistry.ts"),h=n("./src/ui/SequenceRegistry.ts"),p=n("./src/model/AnnotationModelFactory.ts"),f=n("./src/model/selections/NullSelectionModel.ts"),m=n("./src/model/selections/LinearSelectionModel.ts");function v(e,t){var n=p.annotationModelFactory.lookup(t);if(e.getSelection()instanceof m.LinearSelectionModel){var s=e.trimmed();s.getSelection().isCollapsed()||(e=s)}for(var i=n.removes,r=i.length-1;r>=0;r--)e.annotateContent("clear",i[r]);return e.annotateContent("set",t),!0}var b=function(e){function t(e,n){var i;return Object(s.default)(this,t),(i=Object(r.default)(this,Object(a.default)(t).call(this,e,null))).annotationId=n,i}return Object(o.default)(t,e),Object(i.default)(t,[{key:"canExecuteOverride",value:function(e){var t=e.model.getSelection();if(t instanceof f.NullSelectionModel)return!0;for(var n=t.getCoveringRange(),s=e.model.documentModel.data,i=n.start;i<=n.end;i++)if(s.isContentOffset(i))return!0;return!1}}]),t}(c.Command),g=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(o.default)(t,e),Object(i.default)(t,[{key:"executeOverride",value:function(e){return function(e,t){var n=p.annotationModelFactory.create(t),s=n.constructor.removes;if(e.isNull()){var i=e.surface.documentModel.documentNode,r=i.children[i.children.length-1];r.canContainContent()?e.update(new m.LinearSelectionModel(e.surface.documentModel,r.getRange().collapsedToEnd())).select():e=e.update(new m.LinearSelectionModel(e.surface.documentModel,i.getRange().collapsedToEnd())).insertContent([{type:"paragraph"},{type:"/paragraph"}]).adjustedLinearSelection(1,-1).select()}var a=e.getSelection();if(a.isCollapsed()){var o=e.expandedLinearSelection("word"),l=e.getSelection();l.getCoveringRange().end!==a.getCoveringRange().end&&(e=o,a=l)}if(!a.isCollapsed())return e.getAnnotations(!0).containsComparable(n)?function(e,t){return e.annotateContent("clear",t),!0}(e,t):v(e,t);var c=e.surface.getInsertionAnnotations(),u=c.getAnnotationsById(t);if(u.isEmpty()){var d=c.filter((function(e){return-1!==s.indexOf(e.constructor.id)}));e.surface.removeInsertionAnnotations(d),e.surface.addInsertionAnnotations(n)}else e.surface.removeInsertionAnnotations(u);return!0}(e.model.getFragment(void 0,!0),this.annotationId)}}]),t}(b),y=function(e){function t(e,n,i,o){var l;return Object(s.default)(this,t),(l=Object(r.default)(this,Object(a.default)(t).call(this,e,n))).regexp=i,l.strip=o,l}return Object(o.default)(t,e),Object(i.default)(t,[{key:"executeOverride",value:function(e){var t=e.model.getSelection().getRange(),n=t.end,s=e.model.documentModel.data.getText(!0,t);if(!this.regexp.test(s))return!1;if(e.model.documentModel.data.getAnnotationsFromRange(t).containsAnnotationWithId(this.annotationId))return!1;t=t.truncated(s.length),e.model.setLinearSelection(new l.Range(n)),e.model.getLinearFragment(new l.Range(t.end-this.strip,t.end),!0).removeContent(),e.model.getLinearFragment(new l.Range(t.start,t.start+this.strip),!0).removeContent(),t=new l.Range(t.start,t.end-2*this.strip);var i=v(e.model.getLinearFragment(t,!0),this.annotationId);return i&&e.model.removeInsertionAnnotations(p.annotationModelFactory.create(this.annotationId)),i}}]),t}(b),w=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(o.default)(t,e),Object(i.default)(t,[{key:"executeOverride",value:function(e){var t=e.model.getFragment(void 0,!0),n=t.getSelection().getRange(),s=e.model.documentModel.selectNodes(n,"leaves").filter((function(e){return"text"===e.node.type})),i=s.some((function(e){return"code"===e.node.parent.type})),r=t.getAnnotations(!0).containsAnnotationWithId("textStyle/code");return 1!==s.length||n.equalsSelection(s[0].nodeRange)||i&&!r?i?d.commandRegistry.lookup("paragraph").execute(e):d.commandRegistry.lookup("codeblock").execute(e):d.commandRegistry.lookup("code").execute(e)}}]),t}(b);d.commandRegistry.register(new g("bold","textStyle/bold")),d.commandRegistry.register(new g("italic","textStyle/italic")),d.commandRegistry.register(new g("underline","textStyle/underline")),d.commandRegistry.register(new g("code","textStyle/code")),d.commandRegistry.register(new g("strikethrough","textStyle/strikethrough")),d.commandRegistry.register(new g("subscript","textStyle/subscript")),d.commandRegistry.register(new g("superscript","textStyle/superscript")),d.commandRegistry.register(new w("smartcode","textStyle/code"));var _=/\*\*[^*]+\*\*$/,k=/\*[^*]+\*$/,C=/_[^_]+_$/,x=/~[^~]+~$/,j=/`[^`]+`$/;d.commandRegistry.register(new y("autobold","textStyle/bold",_,2)),d.commandRegistry.register(new y("autoitalic","textStyle/italic",k,1)),d.commandRegistry.register(new y("autounderline","textStyle/underline",C,1)),d.commandRegistry.register(new y("autostrikethrough","textStyle/strikethrough",x,1)),d.commandRegistry.register(new y("autocode","textStyle/code",j,1)),h.sequenceRegistry.register(new u.Sequence("bold","autobold",_,0,!0)),h.sequenceRegistry.register(new u.Sequence("italic","autoitalic",(function(e){var t=e.search(k);return"*"===e[t-1]?-1:t}),0,!0)),h.sequenceRegistry.register(new u.Sequence("underline","autounderline",C,0,!0)),h.sequenceRegistry.register(new u.Sequence("strikethrough","autostrikethrough",x,0,!0)),h.sequenceRegistry.register(new u.Sequence("code","autocode",j,0,!0))},"./src/ui/commands/FormatCommand.ts":function(e,t,n){"use strict";n.r(t),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.map"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./src/Range.ts"),c=n("./src/ui/Command.ts"),u=n("./src/ui/CommandRegistry.ts"),d=n("./src/model/Transaction.ts"),h=function(e){function t(e,n,i){var o;return Object(s.default)(this,t),(o=Object(r.default)(this,Object(a.default)(t).call(this,e,["linear"]))).formatType=n,o.formatAttributes=i,o}return Object(o.default)(t,e),Object(i.default)(t,[{key:"executeOverride",value:function(e){var t=e.model.getSelection(),n=e.model.getFragment(t,!0),s=e.model.documentModel.selectNodes(t.getRange(),"leaves").map((function(t){var n=t.node.isContent()?t.node.parent:t.node;return e.model.getLinearFragment(n.getOuterRange(),!0)})),i=!0,r=!1,a=void 0;try{for(var o,c=s[Symbol.iterator]();!(i=(o=c.next()).done);i=!0)o.value.isolateAndUnwrap(this.formatType)}catch(y){r=!0,a=y}finally{try{i||null==c.return||c.return()}finally{if(r)throw a}}t=n.getSelection();var u="code"===this.formatType?d.Transaction.fromMergedContentBranchConversion(e.model.documentModel,t.getRange(),this.formatType,this.formatAttributes):d.Transaction.fromContentBranchConversion(e.model.documentModel,t.getRange(),this.formatType,this.formatAttributes);if(e.model.change([u]),t=e.model.getSelection(),!e.model.isSelectionValid(t)){var h=0,p=!0,f=!1,m=void 0;try{for(var v,b=u.operations[Symbol.iterator]();!(p=(v=b.next()).done);p=!0){var g=v.value;if("retain"!==g.type)break;h+=g.length}}catch(y){f=!0,m=y}finally{try{p||null==b.return||b.return()}finally{if(f)throw m}}h=e.model.documentModel.getNearestCursorOffset(h,1),e.model.setLinearSelection(new l.Range(h,h))}return e.view.focus(),!0}}]),t}(c.Command);u.commandRegistry.register(new h("paragraph","paragraph")),u.commandRegistry.register(new h("heading1","heading",{level:1})),u.commandRegistry.register(new h("heading2","heading",{level:2})),u.commandRegistry.register(new h("codeblock","code")),u.commandRegistry.register(new h("blockquote","blockquote")),u.commandRegistry.register(new h("calloutSuccess","callout",{type:"success"})),u.commandRegistry.register(new h("calloutError","callout",{type:"error"})),u.commandRegistry.register(new h("calloutWarning","callout",{type:"warning"})),u.commandRegistry.register(new h("calloutInfo","callout",{type:"info"}))},"./src/ui/commands/HistoryCommand.ts":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/get.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./src/ui/Command.ts"),u=n("./src/ui/CommandRegistry.ts"),d=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).call(this,"undo",null))}return Object(l.default)(t,e),Object(i.default)(t,[{key:"canExecute",value:function(e){return Object(o.default)(Object(a.default)(t.prototype),"canExecute",this).call(this,e)&&e.model.canUndo()}},{key:"executeOverride",value:function(e){return e.model.undo(),!0}}]),t}(c.Command),h=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).call(this,"redo",["linear"]))}return Object(l.default)(t,e),Object(i.default)(t,[{key:"canExecute",value:function(e){return Object(o.default)(Object(a.default)(t.prototype),"canExecute",this).call(this,e)&&e.model.canRedo()}},{key:"executeOverride",value:function(e){return e.model.redo(),!0}}]),t}(c.Command);u.commandRegistry.register(new d),u.commandRegistry.register(new h)},"./src/ui/commands/ImageEditCommand.ts":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./src/ui/commands/WindowCommand.ts"),c=n("./src/ui/CommandRegistry.ts"),u=n("./src/ui/inspectors/ImageUrlInspectorUi.ts"),d=n("./src/ui/inspectors/ImageAltInspectorUi.ts"),h=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(r.default)(t).call(this,"image/edit",null))}return Object(o.default)(t,e),Object(a.default)(t,[{key:"getWindow",value:function(e){return new u.ImageUrlInspectorUi}}]),t}(l.WindowCommand),p=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(r.default)(t).call(this,"image/editAlt",null))}return Object(o.default)(t,e),Object(a.default)(t,[{key:"getWindow",value:function(e){return new d.ImageAltInspectorUi}}]),t}(l.WindowCommand);c.commandRegistry.register(new h),c.commandRegistry.register(new p)},"./src/ui/commands/IndentationCommand.ts":function(e,t,n){"use strict";n.r(t),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./src/Range.ts"),u=n("./src/ui/Command.ts"),d=n("./src/ui/CommandRegistry.ts"),h=n("./src/model/Transaction.ts"),p=function(e){function t(){return Object(i.default)(this,t),Object(r.default)(this,Object(a.default)(t).call(this,"indent",["linear"]))}return Object(l.default)(t,e),Object(o.default)(t,[{key:"executeOverride",value:function(e){var t=e.model.getFragment(),n=e.model.documentModel.getCoveredSiblingGroups(t.getSelection().getRange()),s=[],i=[],r=!1,a=!0,o=!1,l=void 0;try{for(var c,u=n[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;if(d.grandparent&&"list"===d.grandparent.getType())s.push(e.model.getLinearFragment(d.parent.getRange(),!0));else{var h=!0,p=!1,f=void 0;try{for(var m,v=d.nodes[Symbol.iterator]();!(h=(m=v.next()).done);h=!0){var b=m.value;"code"===b.getType()&&i.push(e.model.getLinearFragment(b.getRange(),!0))}}catch(x){p=!0,f=x}finally{try{h||null==v.return||v.return()}finally{if(p)throw f}}}}}catch(x){o=!0,l=x}finally{try{a||null==u.return||u.return()}finally{if(o)throw l}}for(var g=0,y=s;g<y.length;g++){var w=y[g];this.indentListItem(e.model,e.model.documentModel.getBranchNodeFromOffset(w.getSelection().getRange().start)),r=!0}for(var _=0,k=i;_<k.length;_++){var C=k[_];r=this.indentCode(e.model,e.model.documentModel.getBranchNodeFromOffset(C.getSelection().getRange().start))||r}return r}}]),Object(o.default)(t,[{key:"indentListItem",value:function(e,t){var n=e.getFragment(),s=t.parent.element.attributes&&t.parent.element.attributes.style,i=t.getOuterRange();if(e.getLinearFragment(i,!0).wrapNodes([{type:"listItem"},{type:"list",attributes:{style:s}}]),"listItem"===e.documentModel.data.getDataAt(i.start).type&&"/listItem"===e.documentModel.data.getDataAt(i.start-1).type){var r=i.start-1,a=i.start+1;"list"===e.documentModel.data.getDataAt(a).type&&"/list"===e.documentModel.data.getDataAt(r-1).type&&(r--,a++),e.getLinearFragment(new c.Range(r,a),!0).removeContent()}n.select()}},{key:"indentCode",value:function(e,t){var n=e.getSelection().getCoveringRange();if(n.isCollapsed())e.getFragment(void 0,!0).insertContent(Object(s.default)("    ")).adjustedLinearSelection(4,0).select();else{for(var i=e.documentModel.data,r=n.start;i.isContentOffset(r-1)&&"\n"!==i.getDataAt(r-1);)r--;var a=new h.Transaction(e.documentModel),o=r;a.pushInsert(e.documentModel,0,r,Object(s.default)("    "));for(var l=r;l<n.end;l++)"\n"===i.getDataAt(l)&&(a.pushInsert(e.documentModel,o,l+1,Object(s.default)("    ")),o=l+1);a.pushFinalRetain(e.documentModel,o),e.change([a])}return!0}}]),t}(u.Command),f=function(e){function t(){return Object(i.default)(this,t),Object(r.default)(this,Object(a.default)(t).call(this,"unindent",["linear"]))}return Object(l.default)(t,e),Object(o.default)(t,[{key:"executeOverride",value:function(e){var t=e.model.getFragment(),n=e.model.documentModel.getCoveredSiblingGroups(t.getSelection().getRange()),s=[],i=[],r=!0,a=!1,o=void 0;try{for(var l,c=n[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;if(u.grandparent&&"list"===u.grandparent.getType())s.push(e.model.getLinearFragment(u.parent.getRange(),!0));else if(u.parent&&"list"===u.parent.getType())s.push(e.model.getLinearFragment(u.nodes[0].getRange(),!0));else{var d=!0,h=!1,p=void 0;try{for(var f,m=u.nodes[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){var v=f.value;"code"===v.getType()&&i.push(e.model.getLinearFragment(v.getRange(),!0))}}catch(x){h=!0,p=x}finally{try{d||null==m.return||m.return()}finally{if(h)throw p}}}}}catch(x){a=!0,o=x}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}for(var b=!1,g=0,y=s;g<y.length;g++){var w=y[g];this.unindentListItem(e.model,e.model.documentModel.getBranchNodeFromOffset(w.getSelection().getRange().start)),b=!0}for(var _=0,k=i;_<k.length;_++){var C=k[_];b=this.unindentCode(e.model,e.model.documentModel.getBranchNodeFromOffset(C.getSelection().getRange().start))||b}return b}}]),Object(o.default)(t,[{key:"unindentListItem",value:function(e,t){var n=t.parent,s=n.getClonedElement(),i=n.parent.getType(),r=t.getOuterRange();if("list"!==e.documentModel.data.getDataAt(r.start-1).type){var a=h.Transaction.fromInsertion(e.documentModel,r.start,[{type:"/list"},s]);e.change([a]),r=r.translated(2)}if("/list"!==e.documentModel.data.getDataAt(r.end).type){var o=h.Transaction.fromInsertion(e.documentModel,r.end,[{type:"/list"},s]);e.change([o])}var l=new c.Range(r.start-1,r.end+1);if("listItem"!==i)e.getLinearFragment(new c.Range(r.start+1,r.end-1),!0).unwrapNodes(2);else{if("listItem"!==e.documentModel.data.getDataAt(l.start-1).type){var u=h.Transaction.fromInsertion(e.documentModel,l.start,[{type:"/listItem"},{type:"listItem"}]);e.change([u]),l=l.translated(2)}if("/listItem"!==e.documentModel.data.getDataAt(l.end).type){var d=h.Transaction.fromInsertion(e.documentModel,l.end,[{type:"/listItem"},{type:"listItem"}]);e.change([d])}e.getLinearFragment(new c.Range(l.start+1,l.end-1),!0).unwrapNodes(2)}}},{key:"unindentCode",value:function(e,t){for(var n=e.getSelection().getCoveringRange(),s=e.documentModel.data,i=n.start;s.isContentOffset(i-1)&&"\n"!==s.getDataAt(i-1);)i--;for(var r=n.end;s.isContentOffset(r)&&"\n"!==s.getDataAt(r);)r++;for(var a=new h.Transaction(e.documentModel),o=0,l=i;l<n.end;){for(var u=0;u<4&&l<n.end&&" "===s.getDataAt(l);)l++,u++;for(u>0&&(a.pushRemove(e.documentModel,o,new c.Range(l-u,l)),o=l);l<n.end&&s.isContentOffset(l)&&"\n"!==s.getDataAt(l);)l++;l++}return a.pushFinalRetain(e.documentModel,o),!a.isNoOp()&&(e.change([a]),!0)}}]),t}(u.Command);d.commandRegistry.register(new p),d.commandRegistry.register(new f)},"./src/ui/commands/InsertBranchNodeCommand.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"InsertBranchNodeCommand",(function(){return d}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./src/ui/Command.ts"),c=n("./src/model/nodes/ContentBranchModelNode.ts"),u=n("./src/Range.ts"),d=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(o.default)(t,e),Object(i.default)(t,[{key:"executeOverride",value:function(e){var t=e.model.getFragment();return this.getInsertionData(e).then((function(n){var s=t.getSelection(),i=s.getCoveringRange(),r=i?i.start:0;if(s.isCollapsed()){var a=e.model.documentModel.getBranchNodeFromOffset(r);if(a instanceof c.ContentBranchModelNode&&a.getRange().isCollapsed())return void e.model.getLinearFragment(a.getOuterRange()).insertContent(n)}var o=e.model.documentModel.data.getNearestStructuralOffset(r,1,!0);-1===o&&(o=e.model.documentModel.documentNode.getOuterRange().end),e.model.getLinearFragment(new u.Range(o),!0).insertContent(n).select()})),!0}}]),t}(l.Command)},"./src/ui/commands/InsertFileCommand.ts":function(e,t,n){"use strict";n.r(t),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.promise");var s=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(s),r=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),a=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),c=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),u=n("./src/ui/commands/InsertBranchNodeCommand.ts"),d=n("./src/ui/CommandRegistry.ts"),h=function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(t){r(t)}}function o(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},p=function(e){function t(){return Object(r.default)(this,t),Object(a.default)(this,Object(o.default)(t).call(this,"insertFile",null))}return Object(c.default)(t,e),Object(l.default)(t,[{key:"getInsertionData",value:function(e){return h(this,void 0,void 0,i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{type:"file",attributes:{url:null,filename:null}},{type:"/file"}]);case 1:case"end":return e.stop()}}),e)})))}}]),t}(u.InsertBranchNodeCommand);d.commandRegistry.register(new p)},"./src/ui/commands/InsertHorizontalRuleCommand.ts":function(e,t,n){"use strict";n.r(t),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.promise");var s=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(s),r=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),a=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),c=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),u=n("./src/ui/commands/InsertBranchNodeCommand.ts"),d=n("./src/ui/CommandRegistry.ts"),h=function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(t){r(t)}}function o(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},p=function(e){function t(){return Object(r.default)(this,t),Object(a.default)(this,Object(o.default)(t).call(this,"insertHorizontalRule",null))}return Object(c.default)(t,e),Object(l.default)(t,[{key:"getInsertionData",value:function(){return h(this,void 0,void 0,i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{type:"horizontalRule"},{type:"/horizontalRule"}]);case 1:case"end":return e.stop()}}),e)})))}}]),t}(u.InsertBranchNodeCommand);d.commandRegistry.register(new p)},"./src/ui/commands/InsertImageCommand.ts":function(e,t,n){"use strict";n.r(t),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.promise");var s=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(s),r=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),a=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),c=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),u=n("./src/ui/commands/InsertBranchNodeCommand.ts"),d=n("./src/ui/CommandRegistry.ts"),h=function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(t){r(t)}}function o(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},p=function(e){function t(){return Object(r.default)(this,t),Object(a.default)(this,Object(o.default)(t).call(this,"insertImage",null))}return Object(c.default)(t,e),Object(l.default)(t,[{key:"getInsertionData",value:function(){return h(this,void 0,void 0,i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{type:"image",attributes:{src:null,width:null,height:null}},{type:"/image"}]);case 1:case"end":return e.stop()}}),e)})))}}]),t}(u.InsertBranchNodeCommand);d.commandRegistry.register(new p)},"./src/ui/commands/InsertVideoCommand.ts":function(e,t,n){"use strict";n.r(t),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.promise");var s=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(s),r=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),a=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),c=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),u=n("./src/ui/commands/InsertBranchNodeCommand.ts"),d=n("./src/ui/CommandRegistry.ts"),h=function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(t){r(t)}}function o(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},p=function(e){function t(){return Object(r.default)(this,t),Object(a.default)(this,Object(o.default)(t).call(this,"insertVideo",null))}return Object(c.default)(t,e),Object(l.default)(t,[{key:"getInsertionData",value:function(){return h(this,void 0,void 0,i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{type:"video",attributes:{src:null}},{type:"/video"}]);case 1:case"end":return e.stop()}}),e)})))}}]),t}(u.InsertBranchNodeCommand);d.commandRegistry.register(new p)},"./src/ui/commands/LabelCommand.ts":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/get.js"),c=n("./src/Range.ts"),u=n("./src/ui/commands/WindowCommand.ts"),d=n("./src/ui/CommandRegistry.ts"),h=n("./src/ui/inspectors/LabelInspectorUi.ts"),p=n("./src/model/nodes/LabelModelNode.ts"),f=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(o.default)(t).call(this,"label",null))}return Object(a.default)(t,e),Object(r.default)(t,[{key:"canExecuteOverride",value:function(e){return null==e.model.selectedNode||e.model.selectedNode instanceof p.LabelModelNode}},{key:"executeOverride",value:function(e){if(e.model.selectedNode instanceof p.LabelModelNode)return Object(l.default)(Object(o.default)(t.prototype),"executeOverride",this).call(this,e);var n=e.model.getFragment().getSelection().getCoveringRange(),s=n?n.start:0,i=e.model.documentModel.data.getNearestContentOffset(s,1);return-1!==i&&(e.model.getLinearFragment(new c.Range(i),!0).insertContent([{type:"label",attributes:{label:"Label"}},{type:"/label"}]).select(),Object(l.default)(Object(o.default)(t.prototype),"executeOverride",this).call(this,e))}},{key:"getWindow",value:function(e){return new h.LabelInspectorUi}}]),t}(u.WindowCommand);d.commandRegistry.register(new f)},"./src/ui/commands/LinkCommand.ts":function(e,t,n){"use strict";n.r(t),n("core-js/modules/es.string.replace");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/get.js"),c=n("./src/Range.ts"),u=n("./src/ui/commands/WindowCommand.ts"),d=n("./src/ui/Command.ts"),h=n("./src/ui/Sequence.ts"),p=n("./src/ui/CommandRegistry.ts"),f=n("./src/ui/SequenceRegistry.ts"),m=n("./src/ui/inspectors/LinkAnnotationInspectorUi.ts"),v=n("./src/model/annotations/LinkAnnotationModel.ts"),b=n("./src/model/selections/LinearSelectionModel.ts"),g=n("./src/model/selections/NullSelectionModel.ts"),y=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(o.default)(t).call(this,"link",null))}return Object(a.default)(t,e),Object(r.default)(t,[{key:"canExecuteOverride",value:function(e){var t=e.model.getSelection();if(t instanceof g.NullSelectionModel)return!0;for(var n=t.getCoveringRange(),s=e.model.documentModel.data,i=n.start;i<=n.end;i++)if(s.isContentOffset(i))return!0;return!1}},{key:"executeOverride",value:function(e){return e.model.getSelection()instanceof b.LinearSelectionModel&&Object(l.default)(Object(o.default)(t.prototype),"executeOverride",this).call(this,e)}},{key:"getWindow",value:function(e){return new m.LinkAnnotationInspectorUi}}]),t}(u.WindowCommand),w=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(o.default)(t).call(this,"autolink",["linear"]))}return Object(a.default)(t,e),Object(r.default)(t,[{key:"executeOverride",value:function(e){var n=e.model.getSelection().getRange(),s=n.end,i=e.model.documentModel.data.getText(!0,n);if(i=(i=i.replace(/\s+$/,"")).replace(/[,;.:!?)\]\}"'”’»]+$/,""),!t.autolinkRegExp.test(i+" "))return!1;for(var r=(n=n.truncated(i.length)).start;r<n.end;r++)if(e.model.documentModel.data.getAnnotationsAtOffset(r).any((function(e){return"link"===e.getType()})))return!1;e.model.setLinearSelection(new c.Range(s));var a=new v.LinkAnnotationModel({type:"link",attributes:{href:i}});return e.model.getLinearFragment(n,!0).annotateContent("set",a),!0}}]),t}(d.Command);w.autolinkRegExp=/\bhttps?\:\/\/\S+(\s|\n+)$/i,p.commandRegistry.register(new y),p.commandRegistry.register(new w),f.sequenceRegistry.register(new h.Sequence("autolink","autolink",w.autolinkRegExp,0,!0))},"./src/ui/commands/ListCommand.ts":function(e,t,n){"use strict";n.r(t),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./src/Range.ts"),c=n("./src/ui/Command.ts"),u=n("./src/ui/CommandRegistry.ts"),d=n("./src/model/selections/NullSelectionModel.ts"),h=function(e){function t(e,n){var i;return Object(s.default)(this,t),(i=Object(r.default)(this,Object(a.default)(t).call(this,e,null))).style=n,i}return Object(o.default)(t,e),Object(i.default)(t,[{key:"canExecuteOverride",value:function(e){if(e.model.getSelection()instanceof d.NullSelectionModel)return!0;for(var t=e.model.getSelection().getCoveringRange(),n=e.model.documentModel.data,s=t.start;s<=t.end;s++)if(n.isContentOffset(s))return!0;return!1}},{key:"executeOverride",value:function(e){return e.model.getSelection()instanceof d.NullSelectionModel?(this.appendList(e.model),!0):this.allWrapped(e.model)?this.unwrap(e):this.wrap(e.model)}},{key:"appendList",value:function(e){var t=e.documentModel.documentNode,n=t.children[t.children.length-1];("paragraph"===n.getType()&&n.getRange().isCollapsed()?e.getLinearFragment(n.getOuterRange(),!0):e.getLinearFragment(n.getOuterRange().collapsedToEnd(),!0)).insertContent([{type:"list",attributes:{style:this.style}},{type:"listItem"},{type:"paragraph"},{type:"/paragraph"},{type:"/listItem"},{type:"/list"}],void 0,!0).adjustedLinearSelection(3,-3).select()}},{key:"allWrapped",value:function(e){var t={style:this.style},n=e.getFragment().getLeafNodes();return n.every((function(e){return 1!==n.length&&e.range&&!e.range.getLength()||e.node.hasMatchingAncestor("list",t)}))}},{key:"wrap",value:function(e){var t=e.getFragment(void 0,!0),n=t.getSelection().getRange(),s=e.documentModel;n.isCollapsed()&&!s.data.isContentOffset(n.to)&&s.hasSlugAtOffset(n.to)&&(n=(t=t.insertContent([{type:"paragraph"},{type:"/paragraph"}]).collapsedToStart().adjustedLinearSelection(1,1).select()).getSelection().getRange());var i,r=e.documentModel.getCoveredSiblingGroups(n),a=!0,o=!1,c=void 0;try{for(var u,d=r[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var h=u.value;if(h.grandparent&&"list"===h.grandparent.getType())h.grandparent!==i&&(e.getLinearFragment(h.grandparent.getOuterRange(),!0).changeAttributes({style:this.style}),i=h.grandparent);else{var p=new l.Range(h.nodes[0].getOuterRange().start,h.nodes[h.nodes.length-1].getOuterRange().end);e.getLinearFragment(p,!0).convertNodes("paragraph",{}).wrapAllNodes([{type:"list",attributes:{style:this.style}}],[{type:"listItem"}])}}}catch(f){o=!0,c=f}finally{try{a||null==d.return||d.return()}finally{if(o)throw c}}return!0}},{key:"unwrap",value:function(e){var t,n=u.commandRegistry.lookup("unindent");do{t=e.model.documentModel.getBranchNodeFromOffset(e.model.getSelection().getRange().start)}while(t.hasMatchingAncestor("list")&&n.execute(e));return!0}}]),t}(c.Command),p=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(o.default)(t,e),Object(i.default)(t,[{key:"executeOverride",value:function(e){return!this.allWrapped(e.model)&&this.wrap(e.model)}}]),t}(h);u.commandRegistry.register(new h("bullet","bullet")),u.commandRegistry.register(new h("number","number")),u.commandRegistry.register(new p("bulletSequence","bullet"))},"./src/ui/commands/MiscCommands.ts":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./src/ui/Command.ts"),c=n("./src/ui/CommandRegistry.ts"),u=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).call(this,"selectAll",["linear"]))}return Object(o.default)(t,e),Object(i.default)(t,[{key:"executeOverride",value:function(e){return e.view.selectAll(),!0}}]),t}(l.Command),d=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).call(this,"duplicate",["linear"]))}return Object(o.default)(t,e),Object(i.default)(t,[{key:"executeOverride",value:function(e){var t=e.model.getFragment(),n=t.getData(!0);return t.collapsedToEnd().insertContent(n),!0}},{key:"canExecuteOverride",value:function(e){return!e.model.getSelection().isCollapsed()}}]),t}(l.Command);c.commandRegistry.register(new u),c.commandRegistry.register(new d)},"./src/ui/commands/SpanCommand.ts":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/get.js"),c=n("./src/ui/commands/WindowCommand.ts"),u=n("./src/ui/CommandRegistry.ts"),d=n("./src/ui/inspectors/SpanAnnotationInspectorUi.ts"),h=n("./src/model/selections/LinearSelectionModel.ts"),p=n("./src/model/selections/NullSelectionModel.ts"),f=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(o.default)(t).call(this,"span",null))}return Object(a.default)(t,e),Object(r.default)(t,[{key:"canExecuteOverride",value:function(e){var t=e.model.getSelection();if(t instanceof p.NullSelectionModel)return!0;for(var n=t.getCoveringRange(),s=e.model.documentModel.data,i=n.start;i<=n.end;i++)if(s.isContentOffset(i))return!0;return!1}},{key:"executeOverride",value:function(e){return e.model.getSelection()instanceof h.LinearSelectionModel&&Object(l.default)(Object(o.default)(t.prototype),"executeOverride",this).call(this,e)}},{key:"getWindow",value:function(e){return new d.SpanAnnotationInspectorUi}}]),t}(c.WindowCommand);u.commandRegistry.register(new f)},"./src/ui/commands/SpanRefCommand.ts":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/get.js"),c=n("./src/Range.ts"),u=n("./src/ui/commands/WindowCommand.ts"),d=n("./src/ui/CommandRegistry.ts"),h=n("./src/ui/inspectors/SpanRefInspectorUi.ts"),p=n("./src/model/nodes/SpanRefModelNode.ts"),f=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(o.default)(t).call(this,"spanRef",null))}return Object(a.default)(t,e),Object(r.default)(t,[{key:"canExecuteOverride",value:function(e){return null==e.model.selectedNode||e.model.selectedNode instanceof p.SpanRefModelNode}},{key:"executeOverride",value:function(e){if(e.model.selectedNode instanceof p.SpanRefModelNode)return Object(l.default)(Object(o.default)(t.prototype),"executeOverride",this).call(this,e);var n=e.model.getFragment().getSelection().getCoveringRange(),s=n?n.start:0,i=e.model.documentModel.data.getNearestContentOffset(s,1);return-1!==i&&(e.model.getLinearFragment(new c.Range(i),!0).insertContent([{type:"spanRef",attributes:{spanId:""}},{type:"/spanRef"}]).select(),Object(l.default)(Object(o.default)(t.prototype),"executeOverride",this).call(this,e))}},{key:"getWindow",value:function(e){return new h.SpanRefInspectorUi}}]),t}(u.WindowCommand);d.commandRegistry.register(new f)},"./src/ui/commands/VideoEditCommand.ts":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./src/ui/commands/WindowCommand.ts"),c=n("./src/ui/CommandRegistry.ts"),u=n("./src/ui/inspectors/VideoUrlInspectorUi.ts"),d=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(r.default)(t).call(this,"video/edit",null))}return Object(o.default)(t,e),Object(a.default)(t,[{key:"getWindow",value:function(e){return new u.VideoUrlInspectorUi}}]),t}(l.WindowCommand);c.commandRegistry.register(new d)},"./src/ui/commands/WindowCommand.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"WindowCommand",(function(){return d}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./src/ui/Command.ts"),c=n("./src/ui/windows/DialogUi.ts"),u=n("./src/ui/inspectors/FragmentInspectorUi.ts"),d=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(o.default)(t,e),Object(i.default)(t,[{key:"executeOverride",value:function(e){var n=this.getWindow(e),s=t.getWindowType(n),i=s&&t.getWindowManager(s,e);return!!i&&(i.openWindow(n,this.getWindowOpenData(e)),e.view.deactivate(),!0)}},{key:"getWindowOpenData",value:function(e){return{surface:e,fragment:e.model.getFragment(void 0,!0)}}}],[{key:"getWindowType",value:function(e){return e instanceof u.FragmentInspectorUi?"inspector":e instanceof c.DialogUi?"dialog":null}},{key:"getWindowManager",value:function(e,t){switch(e){case"inspector":return t.context.inspectors;case"dialog":return t.dialogs;default:return null}}}]),t}(l.Command)},"./src/ui/commands/index.ts":function(e,t,n){"use strict";n.r(t);var s=n("./src/ui/commands/InsertBranchNodeCommand.ts");n.d(t,"InsertBranchNodeCommand",(function(){return s.InsertBranchNodeCommand}));var i=n("./src/ui/commands/WindowCommand.ts");n.d(t,"WindowCommand",(function(){return i.WindowCommand}))},"./src/ui/components/ContextMenuComponent.vue":function(e,t,n){"use strict";n.r(t);var s=n("./src/ui/components/ContextMenuComponent.vue?vue&type=template&id=4b71be06&"),i=n("./src/ui/components/ContextMenuComponent.vue?vue&type=script&lang=js&"),r=(n("./src/ui/components/ContextMenuComponent.vue?vue&type=style&index=0&lang=scss&"),n("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),a=Object(r.default)(i.default,s.render,s.staticRenderFns,!1,null,null,null);t.default=a.exports},"./src/ui/components/ContextMenuComponent.vue?vue&type=script&lang=js&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/ui/components/ContextMenuComponent.vue?vue&type=script&lang=js&");t.default=s.default},"./src/ui/components/ContextMenuComponent.vue?vue&type=style&index=0&lang=scss&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js!./node_modules/vue-loader/lib/index.js?!./src/ui/components/ContextMenuComponent.vue?vue&type=style&index=0&lang=scss&"),i=n.n(s);for(var r in s)"default"!==r&&function(e){n.d(t,e,(function(){return s[e]}))}(r);t.default=i.a},"./src/ui/components/ContextMenuComponent.vue?vue&type=template&id=4b71be06&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/ui/components/ContextMenuComponent.vue?vue&type=template&id=4b71be06&");n.d(t,"render",(function(){return s.render})),n.d(t,"staticRenderFns",(function(){return s.staticRenderFns}))},"./src/ui/components/IntellisenseComponent.vue":function(e,t,n){"use strict";n.r(t);var s=n("./src/ui/components/IntellisenseComponent.vue?vue&type=template&id=24d16d42&"),i=n("./src/ui/components/IntellisenseComponent.vue?vue&type=script&lang=js&"),r=(n("./src/ui/components/IntellisenseComponent.vue?vue&type=style&index=0&lang=scss&"),n("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),a=Object(r.default)(i.default,s.render,s.staticRenderFns,!1,null,null,null);t.default=a.exports},"./src/ui/components/IntellisenseComponent.vue?vue&type=script&lang=js&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/ui/components/IntellisenseComponent.vue?vue&type=script&lang=js&");t.default=s.default},"./src/ui/components/IntellisenseComponent.vue?vue&type=style&index=0&lang=scss&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js!./node_modules/vue-loader/lib/index.js?!./src/ui/components/IntellisenseComponent.vue?vue&type=style&index=0&lang=scss&"),i=n.n(s);for(var r in s)"default"!==r&&function(e){n.d(t,e,(function(){return s[e]}))}(r);t.default=i.a},"./src/ui/components/IntellisenseComponent.vue?vue&type=template&id=24d16d42&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/ui/components/IntellisenseComponent.vue?vue&type=template&id=24d16d42&");n.d(t,"render",(function(){return s.render})),n.d(t,"staticRenderFns",(function(){return s.staticRenderFns}))},"./src/ui/components/PopoverMixin.js":function(e,t,n){"use strict";n.r(t),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.set"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./src/domUtil.ts"),i=new Set;function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!0,n=!1,r=void 0;try{for(var a,o=i[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var l=a.value;!l.hide||e&&(s.contains(e,l.$el)||l.targetElement&&s.contains(e,l.targetElement)||s.contains(e,".popover-blocker"))||l.hide()}}catch(c){n=!0,r=c}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}window.addEventListener("click",(function(e){return r(e.target)}),!0),window.addEventListener("contextmenu",(function(e){return r(e.target)}),!0),window.addEventListener("blur",(function(){return r()})),t.default={data:function(){return{visible:!1}},mounted:function(){this.modal&&i.add(this)},destroyed:function(){this.modal&&i.delete(this)},methods:{show:function(){this.visible=!0},hide:function(){this.visible=!1},positionAtPoint:function(e,t){var n=this.$el.getBoundingClientRect();e=Math.max(5,Math.min(document.documentElement.clientWidth-n.width-5,e)),t=Math.max(5,Math.min(document.documentElement.clientHeight-n.height-5,t)),this.$el.style.left=e+"px",this.$el.style.top=t+"px"},positionAtRect:function(e){var t,n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bottom",i=this.$el,r=this.$refs.arrow,a=i.getBoundingClientRect(),o=r.getBoundingClientRect(),l=o.height;switch(s){case"top":t={x:.5*e.width,y:-l},n={x:.5*a.width,y:a.height};break;case"bottom":t={x:.5*e.width,y:e.height+l},n={x:.5*a.width,y:0};break;case"left":t={x:-l,y:.5*e.height},n={x:a.width,y:.5*a.height};break;case"right":t={x:e.width+l,y:.5*e.height},n={x:0,y:.5*a.height}}var c={x:.5*o.width,y:o.height},u={x:e.left+t.x-n.x,y:e.top+t.y-n.y},d={x:n.x-c.x,y:n.y-c.y},h=Math.max(5,Math.min(document.documentElement.clientWidth-a.width-5,u.x))-u.x,p=Math.max(5,Math.min(document.documentElement.clientHeight-a.height-5,u.y))-u.y;if(u.x+=h,u.y+=p,"top"===s||"bottom"===s){var f=(a.width-o.width)/2-10;d.x-=Math.max(-f,Math.min(f,h))}else{var m=(a.height-o.height)/2-10;d.y-=Math.max(-m,Math.min(m,p))}switch(i.style.left=u.x+"px",i.style.top=u.y+"px",r.style.left=d.x+"px",r.style.top=d.y+"px",s){case"left":r.style.transform="rotate(90deg)";break;case"right":r.style.transform="rotate(-90deg)";break;case"top":r.style.transform="rotate(180deg)";break;case"bottom":r.style.transform="rotate(0deg)"}},positionAtElement:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bottom";this.positionAtRect(e.getBoundingClientRect(),t)}}}},"./src/ui/components/TableContextComponent.vue":function(e,t,n){"use strict";n.r(t);var s=n("./src/ui/components/TableContextComponent.vue?vue&type=template&id=287f8b1d&"),i=n("./src/ui/components/TableContextComponent.vue?vue&type=script&lang=js&"),r=n("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),a=Object(r.default)(i.default,s.render,s.staticRenderFns,!1,null,null,null);t.default=a.exports},"./src/ui/components/TableContextComponent.vue?vue&type=script&lang=js&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/ui/components/TableContextComponent.vue?vue&type=script&lang=js&");t.default=s.default},"./src/ui/components/TableContextComponent.vue?vue&type=template&id=287f8b1d&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/ui/components/TableContextComponent.vue?vue&type=template&id=287f8b1d&");n.d(t,"render",(function(){return s.render})),n.d(t,"staticRenderFns",(function(){return s.staticRenderFns}))},"./src/ui/components/TableResizerComponent.vue":function(e,t,n){"use strict";n.r(t);var s=n("./src/ui/components/TableResizerComponent.vue?vue&type=script&lang=js&"),i=n("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),r=Object(i.default)(s.default,void 0,void 0,!1,null,null,null);t.default=r.exports},"./src/ui/components/TableResizerComponent.vue?vue&type=script&lang=js&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/ui/components/TableResizerComponent.vue?vue&type=script&lang=js&");t.default=s.default},"./src/ui/contextItems/AlignableContextItemUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"AlignableContextItemUi",(function(){return m})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/domUtil.ts"),d=n("./src/model/nodes/ModelNode.ts"),h=n("./src/ui/AlignWidgetUi.ts"),p=n("./src/ui/ContextItemUiFactory.ts"),f=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},m=function(e){function t(e,n){var i,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(s.default)(this,t),(i=Object(r.default)(this,Object(a.default)(t).call(this,e,n,l))).onAlignChoose=i.onAlignChoose.bind(Object(o.default)(i)),i.alignWidget=new h.AlignWidgetUi,i.alignWidget.selectItemByData(n.element.attributes&&n.element.attributes.align),i.alignWidget.on("choose",i.onAlignChoose),i.element.classList.add("am-ui-alignableContextItem"),i}return Object(l.default)(t,e),Object(i.default)(t,[{key:"renderBody",value:function(){return u.removeAllChildren(this.bodyElement),this.bodyElement.appendChild(this.alignWidget.element),this}},{key:"renderDescription",value:function(){return u.removeAllChildren(this.descriptionElement),this.descriptionElement.appendChild(this.alignWidget.element),this}},{key:"onAlignChoose",value:function(e){this.getFragment().changeAttributes({align:e.data})}}],[{key:"isCompatibleWith",value:function(e){return e instanceof d.ModelNode&&e.isAlignable()}}]),t}(n("./src/ui/contextItems/LinearContextItemUi.ts").LinearContextItemUi);m.icon="alignLeft",m.label="Alignment",m.id="alignable",m.exclusive=!1,m=f([p.contextItemUiFactory.register],m)},"./src/ui/contextItems/AnnotationContextItemUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"AnnotationContextItemUi",(function(){return u})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.filter"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./src/ui/ButtonWidgetUi.ts"),u=function(e){function t(e,n){var i,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(s.default)(this,t),(i=Object(r.default)(this,Object(a.default)(t).call(this,e,n,l))).clearButton=new c.ButtonWidgetUi({title:i.constructor.clearMessage,icon:i.constructor.clearIcon}),i.isClearable()&&i.actionButtons.addItems([i.clearButton],0),i.onClearButtonClick=i.onClearButtonClick.bind(Object(o.default)(i)),i.clearButton.on("click",i.onClearButtonClick),i.element.classList.add("am-ui-annotationContextItem"),i}return Object(l.default)(t,e),Object(i.default)(t,[{key:"isClearable",value:function(){return this.constructor.clearable}},{key:"onClearButtonClick",value:function(){this.applyToAnnotations((function(e,t){return e.annotateContent("clear",t)}))}},{key:"applyToAnnotations",value:function(e){var t=this.constructor.modelClasses,n=this.getFragment(),s=n.getAnnotations(!0).filter((function(e){return t.some((function(t){return e instanceof t}))})).getAnnotations();!s.length&&n.getSelection().isCollapsed()&&n.document.data.isContentOffset(n.getSelection().getRange().start)&&(s=(n=n.expandedLinearSelection("word")).getAnnotations(!0).filter((function(e){return t.some((function(t){return e instanceof t}))})).getAnnotations());var i=!0,r=!1,a=void 0;try{for(var o,l=s[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value;e(n.expandedLinearSelection("annotation",c),c)}}catch(u){r=!0,a=u}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}}}]),t}(n("./src/ui/contextItems/LinearContextItemUi.ts").LinearContextItemUi);u.clearable=!0,u.clearIcon="cancel",u.clearMessage="Clear styling"},"./src/ui/contextItems/LabelContextItemUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"LabelContextItemUi",(function(){return h})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=n("./src/model/nodes/LabelModelNode.ts"),c=n("./src/ui/contextItems/LinearContextItemUi.ts"),u=n("./src/ui/ContextItemUiFactory.ts"),d=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},h=function(e){function t(e,n){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(s.default)(this,t),(a=Object(i.default)(this,Object(r.default)(t).call(this,e,n,o))).element.classList.add("am-ui-labelContextItem"),a}return Object(a.default)(t,e),t}(c.LinearContextItemUi);h.icon="label",h.label="Label",h.id="label",h.exclusive=!1,h.modelClasses=[l.LabelModelNode],h.commandId="label",h.editable=!0,h=d([u.contextItemUiFactory.register],h)},"./src/ui/contextItems/LinearContextItemUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"LinearContextItemUi",(function(){return f}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/get.js"),c=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),u=n("./src/domUtil.ts"),d=n("./src/ui/ContextItemUi.ts"),h=n("./src/ui/ButtonWidgetUi.ts"),p=n("./src/ui/ButtonGroupWidgetUi.ts"),f=function(e){function t(e,n){var i,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(s.default)(this,t),(i=Object(r.default)(this,Object(o.default)(t).call(this,e,n,l))).headElement=document.createElement("div"),i.titleElement=document.createElement("div"),i.actionsElement=document.createElement("div"),i.bodyElement=document.createElement("div"),i.infoElement=document.createElement("div"),i.descriptionElement=document.createElement("div"),i.editButton=new h.ButtonWidgetUi({icon:"edit"}),i.deleteButton=new h.ButtonWidgetUi({icon:"delete"}),i.actionButtons=new p.ButtonGroupWidgetUi,i.isEditable()&&i.actionButtons.addItems([i.editButton]),i.isDeletable()&&i.actionButtons.addItems([i.deleteButton]),i.onDeleteButtonClick=i.onDeleteButtonClick.bind(Object(a.default)(i)),i.onEditButtonClick=i.onEditButtonClick.bind(Object(a.default)(i)),i.deleteButton.on("click",i.onDeleteButtonClick),i.editButton.on("click",i.onEditButtonClick),i.labelElement.classList.add("am-ui-linearContextItem-label"),i.iconElement.classList.add("am-ui-linearContextItem-icon"),i.descriptionElement.classList.add("am-ui-linearContextItem-description"),i.infoElement.classList.add("am-ui-linearContextItem-info"),i.infoElement.appendChild(i.descriptionElement),i.titleElement.classList.add("am-ui-linearContextItem-title"),i.titleElement.appendChild(i.iconElement),i.titleElement.appendChild(i.labelElement),i.actionsElement.classList.add("am-ui-linearContextItem-actions"),i.actionsElement.appendChild(i.actionButtons.element),i.headElement.classList.add("am-ui-linearContextItem-head"),i.headElement.appendChild(i.titleElement),i.headElement.appendChild(i.infoElement),i.headElement.appendChild(i.actionsElement),i.bodyElement.classList.add("am-ui-linearContextItem-body"),i.element.classList.add("am-ui-linearContextItem"),i.element.appendChild(i.headElement),i.element.appendChild(i.bodyElement),i}return Object(c.default)(t,e),Object(i.default)(t,[{key:"setup",value:function(){return Object(l.default)(Object(o.default)(t.prototype),"setup",this).call(this),this.context.isMobile()?this.renderDescription():this.renderBody(),this}},{key:"teardown",value:function(){return u.removeAllChildren(this.descriptionElement),u.removeAllChildren(this.bodyElement),Object(l.default)(Object(o.default)(t.prototype),"teardown",this).call(this),this}},{key:"getDescription",value:function(){return""}},{key:"renderBody",value:function(){return this.bodyElement.textContent=this.getDescription(),this}},{key:"renderDescription",value:function(){return this.descriptionElement.textContent=this.getDescription(),this}},{key:"isEditable",value:function(){return this.constructor.editable&&(!this.model||this.model.isEditable())}},{key:"isDeletable",value:function(){return this.constructor.deletable&&this.isNode()}},{key:"onEditButtonClick",value:function(){var e=this.getCommand();e&&(e.execute(this.context.surface),this.emit("command"))}},{key:"onDeleteButtonClick",value:function(){this.getFragment().removeContent()}}]),t}(d.ContextItemUi);f.editable=!1,f.deletable=!1},"./src/ui/contextItems/LinkContextItemUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"LinkContextItemUi",(function(){return p})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),c=n("./src/domUtil.ts"),u=n("./src/model/annotations/LinkAnnotationModel.ts"),d=n("./src/ui/ContextItemUiFactory.ts"),h=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(e,n){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(s.default)(this,t),(i=Object(r.default)(this,Object(a.default)(t).call(this,e,n,o))).element.classList.add("am-ui-linkContextItem"),i}return Object(o.default)(t,e),Object(i.default)(t,[{key:"getDescription",value:function(){return this.model.element.attributes&&this.model.element.attributes.href}},{key:"renderBody",value:function(){c.removeAllChildren(this.bodyElement);var e=document.createElement("a");return e.text=this.getDescription(),e.href=this.model.element.attributes&&this.model.element.attributes.href,e.target="_blank",this.bodyElement.appendChild(e),this}}]),t}(n("./src/ui/contextItems/AnnotationContextItemUi.ts").AnnotationContextItemUi);p.icon="link",p.label="Link",p.id="link",p.modelClasses=[u.LinkAnnotationModel],p.commandId="link",p.editable=!0,p=h([d.contextItemUiFactory.register],p)},"./src/ui/contextItems/SpanContextItemUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"SpanContextItemUi",(function(){return p})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),c=n("./src/domUtil.ts"),u=n("./src/model/annotations/SpanAnnotationModel.ts"),d=n("./src/ui/ContextItemUiFactory.ts"),h=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(e,n){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(s.default)(this,t),(i=Object(r.default)(this,Object(a.default)(t).call(this,e,n,o))).element.classList.add("am-ui-spanContextItem"),i}return Object(o.default)(t,e),Object(i.default)(t,[{key:"getDescription",value:function(){return"#"+this.model.element.attributes.id}},{key:"renderBody",value:function(){return c.removeAllChildren(this.bodyElement),this.bodyElement.textContent="#"+this.model.element.attributes.id,this}}]),t}(n("./src/ui/contextItems/AnnotationContextItemUi.ts").AnnotationContextItemUi);p.icon="span",p.label="Span",p.id="span",p.modelClasses=[u.SpanAnnotationModel],p.commandId="span",p.editable=!0,p=h([d.contextItemUiFactory.register],p)},"./src/ui/contextItems/SpanRefContextItemUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"SpanRefContextItemUi",(function(){return h})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=n("./src/model/nodes/SpanRefModelNode.ts"),c=n("./src/ui/contextItems/LinearContextItemUi.ts"),u=n("./src/ui/ContextItemUiFactory.ts"),d=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},h=function(e){function t(e,n){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(s.default)(this,t),(a=Object(i.default)(this,Object(r.default)(t).call(this,e,n,o))).element.classList.add("am-ui-spanRefContextItem"),a}return Object(a.default)(t,e),t}(c.LinearContextItemUi);h.icon="spanRef",h.label="Span Reference",h.id="spanRef",h.exclusive=!1,h.modelClasses=[l.SpanRefModelNode],h.commandId="spanRef",h.editable=!0,h=d([u.contextItemUiFactory.register],h)},"./src/ui/contexts/DesktopContextUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"DesktopContextUi",(function(){return p}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/get.js"),c=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),u=n("./src/util.ts"),d=n("./src/ui/windowManagers/DesktopInspectorWindowManagerUi.ts"),h=n("./src/ui/PopupWidgetUi.ts"),p=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.default)(this,t),(n=Object(r.default)(this,Object(o.default)(t).call(this,e,i))).popup=new h.PopupWidgetUi({containerElement:n.surface.element}),n.position=null,n.boundingRect=null,n.dimensions=null,n.onSuppress=n.onSuppress.bind(Object(a.default)(n)),n.onUnsuppress=n.onUnsuppress.bind(Object(a.default)(n)),n.onPosition=n.onPosition.bind(Object(a.default)(n)),n.onModelSelect=n.onModelSelect.bind(Object(a.default)(n)),n.onWindowResize=n.onWindowResize.bind(Object(a.default)(n)),n.onWindowScroll=n.onWindowScroll.bind(Object(a.default)(n)),n.onWindowScrollDebounced=u.debounce(n.onWindowScroll),n.surface.view.on("relocationStart",n.onSuppress),n.surface.view.on("relocationEnd",n.onUnsuppress),n.surface.view.on("blur",n.onSuppress),n.surface.view.on("focus",n.onUnsuppress),n.surface.view.on("position",n.onPosition),n.surface.model.on("select",n.onModelSelect),window.addEventListener("resize",n.onWindowResize),window.addEventListener("scroll",n.onWindowScrollDebounced),n.groupElement.classList.add("am-ui-desktopContext-menu"),n.popup.bodyElement.appendChild(n.groupElement),n.popup.bodyElement.appendChild(n.inspectors.element),n.popup.bodyElement.appendChild(n.intellisense.element),n.element.classList.add("am-ui-desktopContext"),n.element.appendChild(n.popup.element),n}return Object(c.default)(t,e),Object(i.default)(t,[{key:"toggle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.visible;return e===this.visible?this:(Object(l.default)(Object(o.default)(t.prototype),"toggle",this).call(this,e),this.popup.toggle(e),e?this.updateDimensions():this.inspector&&this.inspector.close(),this)}},{key:"updateDimensions",value:function(){if(Object(l.default)(Object(o.default)(t.prototype),"updateDimensions",this).call(this),!this.visible)return this;this.popup.toggleAnchor(!0),this.popup.align="center";var e=this.surface.view.getSelectionContextPosition(),n=e.boundingRect,s=e.position,i=this.surface.element.getBoundingClientRect();s.y+=window.pageYOffset+i.top-this.surface.element.scrollTop,s.x+=window.pageXOffset+i.left-this.surface.element.scrollLeft,n&&(n=u.translateRect(n,i.left+window.pageXOffset,i.top+window.pageYOffset),this.boundingRect=n),s&&(this.position=s);var r=this.inspector?this.inspector.frameElement:this.groupElement;return this.dimensions={width:r.clientWidth,height:void 0},this.setPopupSizeAndPosition(),this}},{key:"destroy",value:function(){return this.surface.view.off("relocationStart",this.onSuppress),this.surface.view.off("relocationEnd",this.onUnsuppress),this.surface.view.off("blur",this.onSuppress),this.surface.view.off("focus",this.onUnsuppress),this.surface.view.off("position",this.onPosition),this.surface.model.off("select",this.onModelSelect),window.removeEventListener("resize",this.onWindowResize),window.removeEventListener("scroll",this.onWindowScrollDebounced),Object(l.default)(Object(o.default)(t.prototype),"destroy",this).call(this)}},{key:"createInspectorWindowManager",value:function(){return new d.DesktopInspectorWindowManagerUi(this.surface)}},{key:"onSuppress",value:function(){this.visible&&(this.items.length?(this.toggleMenu(!1),this.toggle(!1)):this.inspector&&this.inspector.close())}},{key:"onUnsuppress",value:function(){this.isInspectable()&&(this.toggleMenu(!0),this.toggle(!0))}},{key:"onPosition",value:function(){this.visible&&this.updateDimensionsDebounced()}},{key:"onModelSelect",value:function(){this.visible&&(this.inspector&&this.inspector.isOpened()&&this.inspector.close(),this.updateDimensionsDebounced())}},{key:"onWindowResize",value:function(){this.onPosition()}},{key:"onWindowScroll",value:function(){this.setPopupSizeAndPosition(!0)}},{key:"setPopupSizeAndPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.visible){var t=this.surface.getViewportDimensions();t&&this.dimensions&&(this.position&&(this.element.style.left="".concat(this.position.x,"px"),this.element.style.top="".concat(this.position.y,"px")),e||this.popup.setSize(this.dimensions.width,Math.min(this.dimensions.height,t.height)))}}}]),t}(n("./src/ui/contexts/LinearContextUi.ts").LinearContextUi)},"./src/ui/contexts/LinearContextUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"LinearContextUi",(function(){return _})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.filter"),n("core-js/modules/es.array.includes"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.map"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.promise"),n("core-js/modules/es.set"),n("core-js/modules/es.string.includes"),n("core-js/modules/es.string.iterator"),n("core-js/modules/es.string.match"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),i=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(i),a=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),o=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),l=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),u=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),d=n("./node_modules/@babel/runtime/helpers/esm/get.js"),h=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),p=n("./src/util.ts"),f=n("./src/Range.ts"),m=n("./src/ui/ContextUi.ts"),v=n("./src/ui/IntellisenseWidgetUi.ts"),b=n("./src/ui/ContextItemUiFactory.ts"),g=n("./src/ui/ToolUiFactory.ts"),y=n("./src/model/selections/LinearSelectionModel.ts"),w=function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(t){r(t)}}function o(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},_=function(e){function t(e){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(a.default)(this,t),(n=Object(l.default)(this,Object(u.default)(t).call(this,e,s))).updateDimensionsDebounced=p.debounce(n.updateDimensions.bind(Object(c.default)(n))),n.afterContextChangeTimeout=null,n.relatedSources=null,n.inspectors=n.createInspectorWindowManager(),n.inspector=null,n.intellisense=new v.IntellisenseWidgetUi(n.surface),n.intellisenseQuery=null,n.intellisenseItems=null,n.filteredIntellisenseItems=[],n.lastSelectedNode=null,n.onContextChange=n.onContextChange.bind(Object(c.default)(n)),n.onInspectorOpening=n.onInspectorOpening.bind(Object(c.default)(n)),n.onInspectorClosing=n.onInspectorClosing.bind(Object(c.default)(n)),n.onIntellisenseExecute=n.onIntellisenseExecute.bind(Object(c.default)(n)),n.surface.model.on("contextChange",n.onContextChange),n.surface.model.on("documentUpdate",n.onContextChange),n.surface.model.on("select",n.onContextChange),n.inspectors.on("opening",n.onInspectorOpening),n.inspectors.on("closing",n.onInspectorClosing),n.intellisense.on("execute",n.onIntellisenseExecute),n.intellisense.toggle(!1),n}return Object(h.default)(t,e),Object(o.default)(t,[{key:"getRelatedSources",value:function(){if(!this.relatedSources){var e=this.surface.model.getSelection(),t=[];if(this.relatedSources=[],e instanceof y.LinearSelectionModel&&(t=this.surface.view.getSelectedModels()),t.length){var n=new Set,s=b.contextItemUiFactory.getRelatedItems(t),i=!0,r=!1,a=void 0;try{for(var o,l=s[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value;c.model.isInspectable()&&(b.contextItemUiFactory.isExclusive(c.id)&&n.add(c.model),this.relatedSources.push({type:"item",id:c.id,model:c.model}))}}catch(w){r=!0,a=w}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}var u=g.surfaceToolUiFactory.getRelatedItems(t),d=!0,h=!1,p=void 0;try{for(var f,m=u[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){var v=f.value;v.model.isInspectable()&&(n.has(v.model)||this.relatedSources.push({type:"tool",id:v.id,model:v.model}))}}catch(w){h=!0,p=w}finally{try{d||null==m.return||m.return()}finally{if(h)throw p}}}}return this.relatedSources}},{key:"destroy",value:function(){return this.surface.model.off("contextChange",this.onContextChange),this.surface.model.off("documentUpdate",this.onContextChange),this.surface.model.off("select",this.onContextChange),this.inspectors.off("opening",this.onInspectorOpening),this.inspectors.off("closing",this.onInspectorClosing),this.inspectors.destroy(),clearTimeout(this.afterContextChangeTimeout),Object(d.default)(Object(u.default)(t.prototype),"destroy",this).call(this)}},{key:"onContextChange",value:function(){var e=this;this.inspector?(clearTimeout(this.afterContextChangeTimeout),this.afterContextChangeTimeout=null,this.lastSelectedNode=this.surface.model.selectedNode):null===this.afterContextChangeTimeout&&(this.afterContextChangeTimeout=setTimeout((function(){return e.afterContextChange()}))),this.relatedSources=null}},{key:"afterContextChange",value:function(){return w(this,void 0,void 0,r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.updateIntellisenseQuery(),t=this.surface.model.selectedNode,this.afterContextChangeTimeout=null,!this.visible){e.next=7;break}this.items.length?this.isInspectable()?(this.teardownMenuItems(),this.setupMenuItems(),this.updateDimensionsDebounced()):(this.toggleMenu(!1),this.toggle(!1)):!this.inspector||t&&t===this.lastSelectedNode?null===this.intellisenseQuery?this.intellisense.visible&&(this.intellisense.toggle(!1),this.toggle(!1)):this.updateIntellisense():this.inspector.close(),e.next=19;break;case 7:if(!this.isInspectable()){e.next=12;break}this.toggleMenu(!0),this.toggle(!0),e.next=19;break;case 12:if(null===this.intellisenseQuery){e.next=19;break}if(this.intellisenseItems){e.next=16;break}return e.next=16,this.loadIntellisenseItems();case 16:this.toggle(!0),this.intellisense.toggle(!0),this.updateIntellisense();case 19:this.lastSelectedNode=t;case 20:case"end":return e.stop()}}),e,this)})))}},{key:"onInspectorOpening",value:function(e){this.inspector=e,this.visible||this.toggle(!0),this.items.length&&this.toggleMenu(!1),this.updateDimensionsDebounced()}},{key:"onInspectorClosing",value:function(e){this.inspector=null,this.isInspectable()?(this.toggleMenu(!0),this.updateDimensionsDebounced()):this.toggle(!1),this.surface.model.getSelection()&&this.surface.view.focus()}},{key:"onIntellisenseExecute",value:function(){this.executeIntellisenseCommand(" ")}},{key:"isInspectable",value:function(){return this.getRelatedSources().length>0}},{key:"updateIntellisenseQuery",value:function(){return this.intellisenseQuery=this.getIntellisenseQuery(),this.intellisense.setQuery(this.intellisenseQuery||""),this.intellisenseQuery}},{key:"getIntellisenseQuery",value:function(){var e=this.surface.model.getSelection().getRange();if(!e)return null;e=e.collapsedToEnd();var t=this.surface.model.documentModel.getBranchNodeFromOffset(e.start);if(!t||"code"===t.type)return null;if(this.surface.model.documentModel.data.getText(!0,new f.Range(t.getRange().start,e.start)).includes("`"))return null;for(var n=this.surface.model.documentModel.data,s=e.start-1;s>=0&&e.start-s<=50;s--){if(n.isElementData(s))return null;var i=n.getCharacterData(s),r=n.getCharacterData(s-1),a=n.getCharacterData(s+1);if("@"===i&&(!r||r.match(/\s/))&&" "!==a)return n.getText(!0,new f.Range(s+1,e.start))}return null}},{key:"loadIntellisenseItems",value:function(){return w(this,void 0,void 0,r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.surface.model.api.getMentionables();case 2:t=e.sent,this.intellisenseItems=t.map((function(e){return{id:e.id,label:e.label}}));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"updateIntellisense",value:function(){var e=this.intellisenseQuery;if(null===e)return this.intellisense.toggle(!1),void this.toggle(!1);var t=p.stripDiacritics(e.toLowerCase());this.filteredIntellisenseItems=this.intellisenseItems.filter((function(e){return p.stripDiacritics(e.label.toLowerCase()).includes(t)})),this.intellisense.setItems(this.filteredIntellisenseItems),this.visible&&this.intellisense.visible&&!this.filteredIntellisenseItems.length&&(this.intellisense.toggle(!1),this.toggle(!1))}},{key:"handleKeyboardEvent",value:function(e){if(!this.intellisense.visible)return!1;switch(e.key){case"ArrowUp":return e.preventDefault(),this.intellisense.moveSelection(-1),!0;case"ArrowDown":return e.preventDefault(),this.intellisense.moveSelection(1),!0;case"Enter":case"Tab":return!!this.executeIntellisenseCommand(" ")&&(e.preventDefault(),!0);default:return!(!e.key.match(/^[ :;,.?!{}[\]()<>@#$%^&*`]$/)||1!==this.filteredIntellisenseItems.length||!this.executeIntellisenseCommand(e.key)||(e.preventDefault(),0))}}},{key:"executeIntellisenseCommand",value:function(e){if(!this.intellisense.visible)return!1;var t=this.getIntellisenseQuery();if(null===t)return!1;var n=this.surface.model.getSelection().getRange().end;return this.surface.model.getLinearFragment(new f.Range(n-t.length-1,n)).removeContent(),!!this.intellisense.executeCommand()&&(e&&this.surface.model.getFragment().insertContent(Object(s.default)(e)).collapsedToEnd().select(),!0)}}]),t}(m.ContextUi)},"./src/ui/contexts/TableContextUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TableContextUi",(function(){return f}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./src/ui/ContextUi.ts"),u=n("./src/model/selections/TableSelectionModel.ts"),d=n("./src/model/selections/NullSelectionModel.ts"),h=n("./src/model/Transaction.ts"),p=n("./src/ui/components/TableContextComponent.vue"),f=function(e){function t(e){var n;return Object(s.default)(this,t),(n=Object(r.default)(this,Object(a.default)(t).call(this,e.surface.ui))).relatedSources=null,n.tableNode=e,n.comp=new p.default({el:document.createElement("div")}),n.element.appendChild(n.comp.$el),n.comp.$on("select",n.onCompSelect.bind(Object(o.default)(n))),n.comp.$on("insert",n.onCompInsert.bind(Object(o.default)(n))),n.comp.$on("delete",n.onCompDelete.bind(Object(o.default)(n))),n.comp.$on("clear",n.onCompClear.bind(Object(o.default)(n))),n.comp.$on("deleteTable",n.onCompDeleteTable.bind(Object(o.default)(n))),n.comp.$on("resize",n.onCompResize.bind(Object(o.default)(n))),n.toggle(!0),n}return Object(l.default)(t,e),Object(i.default)(t,[{key:"getRelatedSources",value:function(){return this.relatedSources||(this.relatedSources=[]),this.relatedSources}},{key:"destroy",value:function(){return this.comp.$el.remove(),this.comp.$destroy(),this}},{key:"updateSizes",value:function(e,t){this.comp.updateSizes(e,t)}},{key:"updateSelection",value:function(e,t,n,s){this.comp.updateSelection(e,t,n,s)}},{key:"onCompSelect",value:function(e,t,n,s){this.surface.model.setSelection(new u.TableSelectionModel(this.surface.model.documentModel,this.tableNode.model.getOuterRange(),e,t,n,s))}},{key:"onCompInsert",value:function(e,t,n){var s;"row"===e?(this.tableNode.insertEmptyRow(t),void 0!==n&&(s=this.tableNode.model.matrix.getCell(n,t))):(this.tableNode.insertEmptyColumn(t),void 0!==n&&(s=this.tableNode.model.matrix.getCell(t,n))),s&&(this.surface.model.setSelection(new u.TableSelectionModel(this.surface.model.documentModel,this.tableNode.getOuterRange(),s.col,s.row)),this.tableNode.setEditing(!0))}},{key:"onCompDelete",value:function(e,t,n){"row"===e?this.tableNode.deleteRows(t,n):this.tableNode.deleteColumns(t,n)}},{key:"onCompClear",value:function(e,t,n,s){this.tableNode.clearCells(e,t,n,s)}},{key:"onCompDeleteTable",value:function(){this.surface.model.change([h.Transaction.fromRemoval(this.tableNode.model.document,this.tableNode.getOuterRange())],new d.NullSelectionModel(this.tableNode.model.document))}},{key:"onCompResize",value:function(e,t){this.tableNode.resize(e,t)}}]),t}(c.ContextUi)},"./src/ui/dataTransferHandlers/FileTransferHandlerUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"FileTransferHandlerUi",(function(){return b})),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.promise");var s=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(s),r=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),a=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),u=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),d=n("./src/ui/DataTransferHandlerUi.ts"),h=n("./src/ui/DataTransferHandlerUiFactory.ts"),p=n("./src/model/nodes/FileModelNode.ts"),f=n("./src/view/nodes/FileViewNode.ts"),m=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(u.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},v=function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(t){r(t)}}function o(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},b=function(e){function t(){return Object(r.default)(this,t),Object(o.default)(this,Object(l.default)(t).apply(this,arguments))}return Object(c.default)(t,e),Object(a.default)(t,[{key:"getInsertableData",value:function(){return v(this,void 0,void 0,i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{type:"file",attributes:{url:null,filename:null}},{type:"/file"}]);case 1:case"end":return e.stop()}}),e)})))}},{key:"onDidInsert",value:function(e){return v(this,void 0,void 0,i.a.mark((function t(){var n,s,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=e.getSelectedNode())instanceof p.FileModelNode){t.next=3;break}return t.abrupt("return",!1);case 3:if((s=this.surface.view.documentView.documentNode.getNodeFromOffset(n.getOffset()+1))instanceof f.FileViewNode){t.next=6;break}return t.abrupt("return",!1);case 6:return r=this.item.data.item.getAsFile(),s.uploadFile(r),t.abrupt("return",!0);case 9:case"end":return t.stop()}}),t,this)})))}}]),t}(d.DataTransferHandlerUi);b.id="file",b=m([h.dataTransferHandlerFactory.register],b)},"./src/ui/dataTransferHandlers/ImageFileTransferHandlerUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ImageFileTransferHandlerUi",(function(){return v})),n("core-js/modules/es.array.find"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.promise");var s=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(s),r=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),a=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),u=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),d=n("./src/ui/DataTransferHandlerUi.ts"),h=n("./src/ui/DataTransferHandlerUiFactory.ts"),p=n("./src/view/nodes/ImageViewNode.ts"),f=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(u.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},m=function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(t){r(t)}}function o(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},v=function(e){function t(){return Object(r.default)(this,t),Object(o.default)(this,Object(l.default)(t).apply(this,arguments))}return Object(c.default)(t,e),Object(a.default)(t,[{key:"getInsertableData",value:function(){return m(this,void 0,void 0,i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{type:"image",attributes:{src:null,width:null,height:null}},{type:"/image"}]);case 1:case"end":return e.stop()}}),e)})))}},{key:"onDidInsert",value:function(e){return m(this,void 0,void 0,i.a.mark((function t(){var n,s,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.getCoveredNodes().find((function(e){return"image"===e.node.type}))){t.next=3;break}return t.abrupt("return",!1);case 3:if(this.surface.model.getLinearFragment(n.nodeOuterRange).select(),(s=this.surface.view.documentView.documentNode.getNodeFromOffset(n.nodeRange.start))instanceof p.ImageViewNode){t.next=7;break}return t.abrupt("return",!1);case 7:return r=this.item.data.item.getAsFile(),s.uploadFile(r),t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t,this)})))}}]),t}(d.DataTransferHandlerUi);v.id="imageFile",v.types=["image/jpeg","image/png","image/gif"],v=f([h.dataTransferHandlerFactory.register],v)},"./src/ui/dataTransferHandlers/index.ts":function(e,t,n){"use strict";n.r(t);var s=n("./src/ui/dataTransferHandlers/ImageFileTransferHandlerUi.ts");n.d(t,"ImageFileTransferHandlerUi",(function(){return s.ImageFileTransferHandlerUi}));var i=n("./src/ui/dataTransferHandlers/FileTransferHandlerUi.ts");n.d(t,"FileTransferHandlerUi",(function(){return i.FileTransferHandlerUi}))},"./src/ui/inspectors/AnnotationInspectorUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"AnnotationInspectorUi",(function(){return m})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.filter"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.promise"),n("core-js/modules/es.string.iterator"),n("core-js/modules/es.string.split"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(s),r=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),a=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=n("./node_modules/@babel/runtime/helpers/esm/get.js"),u=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),d=n("./src/Range.ts"),h=n("./src/ui/inspectors/FragmentInspectorUi.ts"),p=n("./src/model/selections/LinearSelectionModel.ts"),f=function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(t){r(t)}}function o(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},m=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.default)(this,t),(e=Object(o.default)(this,Object(l.default)(t).call(this,n))).initialSelection=null,e.initialAnnotation=null,e.initialAnnotationIsCovering=!1,e}return Object(u.default)(t,e),Object(a.default)(t,[{key:"setup",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=Object.create(null,{setup:{get:function(){return Object(c.default)(Object(l.default)(t.prototype),"setup",e)}}});return f(this,void 0,void 0,i.a.mark((function e(){var t,r,a,o,l,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.setup.call(this,n);case 2:t=this.fragment,r=this.getMatchingAnnotations(t,!0).get(0),this.previousSelection instanceof p.LinearSelectionModel&&!r&&(t.getSelection().isCollapsed()&&t.document.data.isContentOffset(t.getSelection().getRange().start)?(n.noExpand||(t=t.expandedLinearSelection("word")),a=t.document.data.getAnnotationsFromRange(t.getSelection().getRange()),o=this.constructor.modelClasses,(l=a.filter((function(e){return o.some((function(t){return e instanceof t}))}))).getLength()&&(r=l.get(0))):t=t.trimmed(),t.getSelection().isCollapsed()||r||(r=this.getAnnotationFromFragment(t))&&t.annotateContent("set",r)),r&&!n.noExpand&&(t=t.expandedLinearSelection("annotation",r)),t.select(),this.initialSelection=t.getSelection(),this.initialAnnotation=this.getMatchingAnnotations(t,!0).get(0),c=this.getMatchingAnnotations(t).get(0),this.initialAnnotation?c&&c.compareTo(this.initialAnnotation)&&(this.initialAnnotationIsCovering=!0):this.initialAnnotation=this.getAnnotationFromFragment(t),this.fragment=t;case 12:case"end":return e.stop()}}),e,this)})))}},{key:"teardown",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=Object.create(null,{teardown:{get:function(){return Object(c.default)(Object(l.default)(t.prototype),"teardown",e)}}});return f(this,void 0,void 0,i.a.mark((function e(){var t,r,a,o,l,c,u,h,f,m,v,b,g,y,w,_;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.surface.view.activate(),t=this.fragment.getSelection(),r="done"===n.action&&this.shouldRemoveAnnotation(),t instanceof p.LinearSelectionModel&&(!r||!t.getRange().isCollapsed())){e.next=5;break}return e.abrupt("return");case 5:if(a=!1,o=!1,l=this.getAnnotation(),u=this.fragment.surface,h=u.getFragment(this.initialSelection,!1),r){e.next=15;break}if("done"===n.action){e.next=13;break}return e.abrupt("return");case 13:this.initialSelection.isCollapsed()&&(a=!0),l&&(this.initialAnnotationIsCovering&&this.initialAnnotation&&this.initialAnnotation.compareTo(l)||(o=!0));case 15:if(a&&(c=this.getInsertionData()).length&&(h.insertContent(c,!0),h.adjustedLinearSelection(-c.length,0),this.previousSelection=new p.LinearSelectionModel(h.document,new d.Range(this.initialSelection.getRange().start+c.length))),!r&&!o){e.next=37;break}for(f=this.getMatchingAnnotations(h,!0).getAnnotations(),m=!0,v=!1,b=void 0,e.prev=21,g=f[Symbol.iterator]();!(m=(y=g.next()).done);m=!0)w=y.value,h.annotateContent("clear",w);e.next=29;break;case 25:e.prev=25,e.t0=e.catch(21),v=!0,b=e.t0;case 29:e.prev=29,e.prev=30,m||null==g.return||g.return();case 32:if(e.prev=32,!v){e.next=35;break}throw b;case 35:return e.finish(32);case 36:return e.finish(29);case 37:return _=!1,o&&(h.getSelection().isCollapsed()?_=!0:h.annotateContent("set",l)),n.action&&!a||(t=this.previousSelection),n.action&&u.setSelection(t),_&&u.addInsertionAnnotations(l),e.next=44,s.teardown.call(this,n);case 44:this.initialSelection=null,this.initialAnnotation=null,this.initialAnnotationIsCovering=!1;case 47:case"end":return e.stop()}}),e,this,[[21,25,29,37],[30,,32,36]])})))}},{key:"shouldRemoveAnnotation",value:function(){return!1}},{key:"getInsertionData",value:function(){return this.getInsertionText().split("")}},{key:"getInsertionText",value:function(){return""}},{key:"getMatchingAnnotations",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.constructor.modelClasses;return e.getAnnotations(t).filter((function(e){return n.some((function(t){return e instanceof t}))}))}}]),t}(h.FragmentInspectorUi);m.modelClasses=[]},"./src/ui/inspectors/FragmentInspectorUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"FragmentInspectorUi",(function(){return f})),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.promise");var s=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(s),r=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),a=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=n("./node_modules/@babel/runtime/helpers/esm/get.js"),u=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),d=n("./src/ui/windows/DialogUi.ts"),h=n("./src/model/SurfaceModelFragment.ts"),p=function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(t){r(t)}}function o(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},f=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.default)(this,t),(e=Object(o.default)(this,Object(l.default)(t).call(this,n))).surface=null,e.fragment=null,e.previousSelection=null,e.element.classList.add("am-ui-fragmentInspector"),e.contentElement.classList.add("am-ui-fragmentInspector-content"),e}return Object(u.default)(t,e),Object(a.default)(t,[{key:"setup",value:function(e){var n=this,s=Object.create(null,{setup:{get:function(){return Object(c.default)(Object(l.default)(t.prototype),"setup",n)}}});return p(this,void 0,void 0,i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.setup.call(this,e);case 2:if(e&&e.fragment instanceof h.SurfaceModelFragment){t.next=4;break}throw new Error("Cannot open inspector: opening data must contain a fragment");case 4:this.surface=e.surface,this.fragment=e.fragment,this.previousSelection=this.fragment.getSelection();case 7:case"end":return t.stop()}}),t,this)})))}},{key:"teardown",value:function(e){return this.surface=null,this.fragment=null,this.previousSelection=null,Object(c.default)(Object(l.default)(t.prototype),"teardown",this).call(this,e)}}]),t}(d.DialogUi)},"./src/ui/inspectors/ImageAltInspectorUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ImageAltInspectorUi",(function(){return y})),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.promise"),n("core-js/modules/es.string.trim");var s=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(s),r=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),a=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),c=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=n("./node_modules/@babel/runtime/helpers/esm/get.js"),d=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),h=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),p=n("./src/oo.ts"),f=n("./src/model/nodes/ImageModelNode.ts"),m=n("./src/ui/inspectors/FragmentInspectorUi.ts"),v=n("./src/ui/inspectors/TextInputInspectorUi.ts"),b=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},g=function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(t){r(t)}}function o(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},y=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.default)(this,t),e=Object(o.default)(this,Object(c.default)(t).call(this,n)),v.TextInputInspectorUi.construct(Object(l.default)(e)),e.imageNode=null,e.inputElement.placeholder="Alt text...",e}return Object(d.default)(t,e),Object(a.default)(t,[{key:"setup",value:function(e){var n=this,s=Object.create(null,{setup:{get:function(){return Object(u.default)(Object(c.default)(t.prototype),"setup",n)}}});return g(this,void 0,void 0,i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.setup.call(this,e);case 2:(n=this.fragment.surface.selectedNode)instanceof f.ImageModelNode&&(this.imageNode=n,this.inputElement.value=this.imageNode.element.attributes.alt||""),this.inputElement.select();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"teardown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("done"===e.action&&this.imageNode){var n=this.inputElement.value.trim()||null;n!==this.imageNode.element.attributes.alt&&this.fragment.changeAttributes({alt:n})}return this.imageNode=null,Object(u.default)(Object(c.default)(t.prototype),"teardown",this).call(this,e)}}]),t}(m.FragmentInspectorUi);y=b([p.mixin(v.TextInputInspectorUi)],y)},"./src/ui/inspectors/ImageUrlInspectorUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ImageUrlInspectorUi",(function(){return y})),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.promise"),n("core-js/modules/es.string.trim");var s=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(s),r=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),a=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),c=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=n("./node_modules/@babel/runtime/helpers/esm/get.js"),d=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),h=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),p=n("./src/oo.ts"),f=n("./src/model/nodes/ImageModelNode.ts"),m=n("./src/ui/inspectors/FragmentInspectorUi.ts"),v=n("./src/ui/inspectors/TextInputInspectorUi.ts"),b=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},g=function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(t){r(t)}}function o(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},y=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.default)(this,t),e=Object(o.default)(this,Object(c.default)(t).call(this,n)),v.TextInputInspectorUi.construct(Object(l.default)(e)),e.imageNode=null,e.inputElement.placeholder="Paste the image link...",e}return Object(d.default)(t,e),Object(a.default)(t,[{key:"setup",value:function(e){var n=this,s=Object.create(null,{setup:{get:function(){return Object(u.default)(Object(c.default)(t.prototype),"setup",n)}}});return g(this,void 0,void 0,i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.setup.call(this,e);case 2:(n=this.fragment.surface.selectedNode)instanceof f.ImageModelNode&&(this.imageNode=n,this.inputElement.value=this.imageNode.element.attributes.src||""),this.inputElement.select();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"teardown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("done"===e.action&&this.imageNode){var n=this.inputElement.value.trim()||null;if(n){var s=this.fragment;s.surface.api.uploadImageUrl(n).then((function(e){s.changeAttributes({src:e,width:null,height:null})}))}}return this.imageNode=null,Object(u.default)(Object(c.default)(t.prototype),"teardown",this).call(this,e)}}]),t}(m.FragmentInspectorUi);y=b([p.mixin(v.TextInputInspectorUi)],y)},"./src/ui/inspectors/LabelInspectorUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"LabelInspectorUi",(function(){return y})),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.promise"),n("core-js/modules/es.string.trim");var s=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(s),r=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),a=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),c=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=n("./node_modules/@babel/runtime/helpers/esm/get.js"),d=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),h=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),p=n("./src/oo.ts"),f=n("./src/model/nodes/LabelModelNode.ts"),m=n("./src/ui/inspectors/FragmentInspectorUi.ts"),v=n("./src/ui/inspectors/TextInputInspectorUi.ts"),b=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},g=function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(t){r(t)}}function o(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},y=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.default)(this,t),e=Object(o.default)(this,Object(c.default)(t).call(this,n)),v.TextInputInspectorUi.construct(Object(l.default)(e)),e.labelNode=null,e.inputElement.placeholder="Label",e}return Object(d.default)(t,e),Object(a.default)(t,[{key:"setup",value:function(e){var n=this,s=Object.create(null,{setup:{get:function(){return Object(u.default)(Object(c.default)(t.prototype),"setup",n)}}});return g(this,void 0,void 0,i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.setup.call(this,e);case 2:(n=this.fragment.surface.selectedNode)instanceof f.LabelModelNode&&(this.labelNode=n,this.inputElement.value=this.labelNode.element.attributes.label||""),this.inputElement.select();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"teardown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("done"===e.action&&this.labelNode){var n=this.inputElement.value.trim();this.fragment.changeAttributes({label:n})}return this.labelNode=null,Object(u.default)(Object(c.default)(t.prototype),"teardown",this).call(this,e)}}]),t}(m.FragmentInspectorUi);y=b([p.mixin(v.TextInputInspectorUi)],y)},"./src/ui/inspectors/LinkAnnotationInspectorUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"LinkAnnotationInspectorUi",(function(){return y})),n("core-js/modules/es.array.filter"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.promise"),n("core-js/modules/es.string.trim");var s=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(s),r=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),a=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),c=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=n("./node_modules/@babel/runtime/helpers/esm/get.js"),d=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),h=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),p=n("./src/oo.ts"),f=n("./src/ui/inspectors/AnnotationInspectorUi.ts"),m=n("./src/ui/inspectors/TextInputInspectorUi.ts"),v=n("./src/model/annotations/LinkAnnotationModel.ts"),b=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},g=function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(t){r(t)}}function o(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},y=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.default)(this,t),e=Object(o.default)(this,Object(c.default)(t).call(this,n)),m.TextInputInspectorUi.construct(Object(l.default)(e)),e.annotation=null,e.inputElement.placeholder="Paste the link...",e}return Object(d.default)(t,e),Object(a.default)(t,[{key:"setup",value:function(e){var n=this,s=Object.create(null,{setup:{get:function(){return Object(u.default)(Object(c.default)(t.prototype),"setup",n)}}});return g(this,void 0,void 0,i.a.mark((function t(){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.setup.call(this,e);case 2:n=this.fragment.document.data.getAnnotationsFromRange(this.fragment.getSelection().getRange()),r=n.filter((function(e){return e instanceof v.LinkAnnotationModel})).get(0),this.inputElement.value=r&&r.element.attributes.href||"",this.inputElement.select();case 6:case"end":return t.stop()}}),t,this)})))}},{key:"getAnnotation",value:function(){var e=this.inputElement.value.trim();return e?this.annotation&&this.annotation.element.attributes.href===e||(this.annotation=new v.LinkAnnotationModel({type:"link",attributes:{href:e}})):this.annotation=null,this.annotation}},{key:"getAnnotationFromFragment",value:function(e){return null}},{key:"getInsertionText",value:function(){return this.inputElement.value.trim()}}]),t}(f.AnnotationInspectorUi);y.modelClasses=[v.LinkAnnotationModel],y=b([p.mixin(m.TextInputInspectorUi)],y)},"./src/ui/inspectors/SpanAnnotationInspectorUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"SpanAnnotationInspectorUi",(function(){return y})),n("core-js/modules/es.array.filter"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.promise"),n("core-js/modules/es.string.trim");var s=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(s),r=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),a=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),c=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=n("./node_modules/@babel/runtime/helpers/esm/get.js"),d=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),h=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),p=n("./src/oo.ts"),f=n("./src/ui/inspectors/AnnotationInspectorUi.ts"),m=n("./src/ui/inspectors/TextInputInspectorUi.ts"),v=n("./src/model/annotations/SpanAnnotationModel.ts"),b=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},g=function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(t){r(t)}}function o(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},y=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.default)(this,t),e=Object(o.default)(this,Object(c.default)(t).call(this,n)),m.TextInputInspectorUi.construct(Object(l.default)(e)),e.annotation=null,e.inputElement.placeholder="Span identifier",e}return Object(d.default)(t,e),Object(a.default)(t,[{key:"setup",value:function(e){var n=this,s=Object.create(null,{setup:{get:function(){return Object(u.default)(Object(c.default)(t.prototype),"setup",n)}}});return g(this,void 0,void 0,i.a.mark((function t(){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.setup.call(this,e);case 2:n=this.fragment.document.data.getAnnotationsFromRange(this.fragment.getSelection().getRange()),r=n.filter((function(e){return e instanceof v.SpanAnnotationModel})).get(0),this.inputElement.value=r&&r.element.attributes.id||"",this.inputElement.select();case 6:case"end":return t.stop()}}),t,this)})))}},{key:"getAnnotation",value:function(){var e=this.inputElement.value.trim();return e?this.annotation&&this.annotation.element.attributes.id===e||(this.annotation=new v.SpanAnnotationModel({type:"span",attributes:{id:e}})):this.annotation=null,this.annotation}},{key:"getAnnotationFromFragment",value:function(e){return null}},{key:"getInsertionText",value:function(){return this.inputElement.value.trim()}}]),t}(f.AnnotationInspectorUi);y.modelClasses=[v.SpanAnnotationModel],y=b([p.mixin(m.TextInputInspectorUi)],y)},"./src/ui/inspectors/SpanRefInspectorUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"SpanRefInspectorUi",(function(){return y})),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.promise"),n("core-js/modules/es.string.trim");var s=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(s),r=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),a=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),c=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=n("./node_modules/@babel/runtime/helpers/esm/get.js"),d=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),h=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),p=n("./src/oo.ts"),f=n("./src/model/nodes/SpanRefModelNode.ts"),m=n("./src/ui/inspectors/FragmentInspectorUi.ts"),v=n("./src/ui/inspectors/TextInputInspectorUi.ts"),b=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},g=function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(t){r(t)}}function o(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},y=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.default)(this,t),e=Object(o.default)(this,Object(c.default)(t).call(this,n)),v.TextInputInspectorUi.construct(Object(l.default)(e)),e.spanRefNode=null,e.inputElement.placeholder="Span identifier",e}return Object(d.default)(t,e),Object(a.default)(t,[{key:"setup",value:function(e){var n=this,s=Object.create(null,{setup:{get:function(){return Object(u.default)(Object(c.default)(t.prototype),"setup",n)}}});return g(this,void 0,void 0,i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.setup.call(this,e);case 2:(n=this.fragment.surface.selectedNode)instanceof f.SpanRefModelNode&&(this.spanRefNode=n,this.inputElement.value=this.spanRefNode.element.attributes.spanId||""),this.inputElement.select();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"teardown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("done"===e.action&&this.spanRefNode){var n=this.inputElement.value.trim();this.fragment.changeAttributes({spanId:n})}return this.spanRefNode=null,Object(u.default)(Object(c.default)(t.prototype),"teardown",this).call(this,e)}}]),t}(m.FragmentInspectorUi);y=b([p.mixin(v.TextInputInspectorUi)],y)},"./src/ui/inspectors/TextInputInspectorUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TextInputInspectorUi",(function(){return r}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=function(){function e(){Object(s.default)(this,e)}return Object(i.default)(e,[{key:"onSubmit",value:function(e){e&&e.preventDefault(),this.close({action:"done"})}}],[{key:"construct",value:function(e){var t=document.createElement("form");e.inputElement=document.createElement("input"),e.doneButton=document.createElement("div"),e.onSubmit=e.onSubmit.bind(e),e.doneButton.addEventListener("click",e.onSubmit),t.addEventListener("submit",e.onSubmit),e.inputElement.className="am-ui-textInputInspector-input",e.doneButton.className="am-ui-textInputInspector-done",e.doneButton.textContent="Done",t.appendChild(e.inputElement),t.appendChild(e.doneButton),e.bodyElement.appendChild(t),e.element.classList.add("am-ui-textInputInspector")}}]),e}()},"./src/ui/inspectors/VideoUrlInspectorUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"VideoUrlInspectorUi",(function(){return y})),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.promise"),n("core-js/modules/es.string.trim");var s=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(s),r=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),a=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),c=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=n("./node_modules/@babel/runtime/helpers/esm/get.js"),d=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),h=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),p=n("./src/oo.ts"),f=n("./src/ui/inspectors/FragmentInspectorUi.ts"),m=n("./src/ui/inspectors/TextInputInspectorUi.ts"),v=n("./src/model/nodes/VideoModelNode.ts"),b=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},g=function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(t){r(t)}}function o(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},y=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.default)(this,t),e=Object(o.default)(this,Object(c.default)(t).call(this,n)),m.TextInputInspectorUi.construct(Object(l.default)(e)),e.videoNode=null,e.inputElement.placeholder="Paste the video link...",e}return Object(d.default)(t,e),Object(a.default)(t,[{key:"setup",value:function(e){var n=this,s=Object.create(null,{setup:{get:function(){return Object(u.default)(Object(c.default)(t.prototype),"setup",n)}}});return g(this,void 0,void 0,i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.setup.call(this,e);case 2:(n=this.fragment.surface.selectedNode)instanceof v.VideoModelNode&&(this.videoNode=n,this.inputElement.value=this.videoNode.element.attributes.src||""),this.inputElement.select();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"teardown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("done"===e.action&&this.videoNode){var n=this.inputElement.value.trim()||null;n&&this.fragment.changeAttributes({src:n,width:480,height:270})}return this.videoNode=null,Object(u.default)(Object(c.default)(t.prototype),"teardown",this).call(this,e)}}]),t}(f.FragmentInspectorUi);y=b([p.mixin(m.TextInputInspectorUi)],y)},"./src/ui/toolGroups/BarToolGroupUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"BarToolGroupUi",(function(){return o}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=function(e){function t(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.default)(this,t),(n=Object(i.default)(this,Object(r.default)(t).call(this,e,a))).element.classList.add("am-ui-barToolGroup"),n}return Object(a.default)(t,e),t}(n("./src/ui/ToolGroupUi.ts").ToolGroupUi);o.id="bar"},"./src/ui/toolGroups/MenuToolGroupUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"MenuToolGroupUi",(function(){return u})),n("core-js/modules/es.array.filter"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.map"),n("core-js/modules/es.object.to-string"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),c=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),u=function(e){function t(e){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.default)(this,t),(n=Object(a.default)(this,Object(o.default)(t).call(this,e,s))).onUpdateState=n.onUpdateState.bind(Object(l.default)(n)),n.toolbar.on("updateState",n.onUpdateState),n.element.classList.add("am-ui-menuToolGroup"),n}return Object(c.default)(t,e),Object(r.default)(t,[{key:"onUpdateState",value:function(){var e=Object(s.default)(this.tools.values()).filter((function(e){return e.active})).map((function(e){return e.title}));this.setLabel(e.join(", ")||"Paragraph")}}]),t}(n("./src/ui/toolGroups/PopupToolGroupUi.ts").PopupToolGroupUi);u.id="menu"},"./src/ui/toolGroups/PopupToolGroupUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"PopupToolGroupUi",(function(){return y})),n("core-js/modules/es.object.assign"),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/get.js"),c=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),u=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),d=n("./src/oo.ts"),h=n("./src/domUtil.ts"),p=n("./src/ui/ToolGroupUi.ts"),f=n("./src/ui/IconElementUi.ts"),m=n("./src/ui/IndicatorElementUi.ts"),v=n("./src/ui/LabelElementUi.ts"),b=n("./src/ui/TabIndexedWidgetUi.ts"),g=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(u.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},y=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.default)(this,t),(n=Object(r.default)(this,Object(o.default)(t).call(this,e,i))).active=!1,n.handleElement=document.createElement("span"),i=Object.assign({tabIndexedElement:n.handleElement},i),f.IconElementUi.construct(Object(a.default)(n),i),m.IndicatorElementUi.construct(Object(a.default)(n),i),v.LabelElementUi.construct(Object(a.default)(n),i),b.TabIndexedWidgetUi.construct(Object(a.default)(n),i),n.onHandleMouseKeyDown=n.onHandleMouseKeyDown.bind(Object(a.default)(n)),n.onHandleMouseKeyUp=n.onHandleMouseKeyUp.bind(Object(a.default)(n)),n.onBlur=n.onBlur.bind(Object(a.default)(n)),n.handleElement.addEventListener("keydown",n.onHandleMouseKeyDown),n.handleElement.addEventListener("mousedown",n.onHandleMouseKeyDown),n.handleElement.addEventListener("keyup",n.onHandleMouseKeyUp),n.handleElement.addEventListener("mouseup",n.onHandleMouseKeyUp),n.handleElement.classList.add("am-ui-popupToolGroup-handle"),n.handleElement.appendChild(n.iconElement),n.handleElement.appendChild(n.labelElement),n.handleElement.appendChild(n.indicatorElement),n.element.classList.add("am-ui-popupToolGroup"),n.element.insertBefore(n.handleElement,n.element.firstChild),n}return Object(c.default)(t,e),Object(i.default)(t,[{key:"setDisabled",value:function(e){return Object(l.default)(Object(o.default)(t.prototype),"setDisabled",this).call(this,e),this.isDisabled()&&this.isElementAttached()&&this.setActive(!1),this}},{key:"onMouseKeyUp",value:function(e){!this.isDisabled()&&this.pressed&&this.pressed===this.getTargetTool(e.target)&&(e instanceof MouseEvent&&e.button===h.MouseButton.left||e instanceof KeyboardEvent&&(e.which===h.Key.space||e.which===h.Key.enter))&&this.setActive(!1),Object(l.default)(Object(o.default)(t.prototype),"onMouseKeyUp",this).call(this,e)}},{key:"destroy",value:function(){return this.setActive(!1),Object(l.default)(Object(o.default)(t.prototype),"destroy",this).call(this)}},{key:"onHandleMouseKeyDown",value:function(e){!this.isDisabled()&&(e instanceof MouseEvent&&e.button===h.MouseButton.left||e instanceof KeyboardEvent&&(e.which===h.Key.space||e.which===h.Key.enter))&&(this.setActive(!this.active),e.preventDefault(),e.stopPropagation())}},{key:"onHandleMouseKeyUp",value:function(e){!this.isDisabled()&&(e instanceof MouseEvent&&e.button===h.MouseButton.left||e instanceof KeyboardEvent&&(e.which===h.Key.space||e.which===h.Key.enter))&&(e.preventDefault(),e.stopPropagation())}},{key:"onBlur",value:function(e){h.closest(e.target,".am-ui-popupToolGroup")!==this.element&&this.setActive(!1)}},{key:"setActive",value:function(e){this.active!==e&&(this.active=e,e?(document.addEventListener("mouseup",this.onBlur,!0),document.addEventListener("keyup",this.onBlur,!0),this.element.classList.add("am-ui-popupToolGroup-active","am-ui-popupToolGroup-left")):(document.removeEventListener("mouseup",this.onBlur,!0),document.removeEventListener("keyup",this.onBlur,!0),this.element.classList.remove("am-ui-popupToolGroup-active","am-ui-popupToolGroup-left")))}}]),t}(p.ToolGroupUi);y=g([d.mixin(f.IconElementUi,m.IndicatorElementUi,v.LabelElementUi,b.TabIndexedWidgetUi)],y)},"./src/ui/tools/AnnotationTools.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"AnnotationToolUi",(function(){return p})),n.d(t,"BoldAnnotationToolUi",(function(){return f})),n.d(t,"ItalicAnnotationToolUi",(function(){return m})),n.d(t,"UnderlineAnnotationToolUi",(function(){return v})),n.d(t,"CodeAnnotationToolUi",(function(){return b})),n.d(t,"StrikethroughAnnotationToolUi",(function(){return g})),n.d(t,"SubscriptAnnotationToolUi",(function(){return y})),n.d(t,"SuperscriptAnnotationToolUi",(function(){return w})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/get.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/ui/SurfaceToolUi.ts"),d=n("./src/ui/ToolUiFactory.ts"),h=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(l.default)(t,e),Object(i.default)(t,[{key:"onUpdateState",value:function(){Object(o.default)(Object(a.default)(t.prototype),"onUpdateState",this).call(this);var e=this.toolGroup.toolbar.surface.model.getFragment(),n=this.constructor.annotation;this.setActive(e.getAnnotations(!0).containsAnnotationWithId(n))}}]),t}(u.SurfaceToolUi);p.annotation=null;var f=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(l.default)(t,e),t}(p);f.icon="bold",f.id="bold",f.group="textStyle",f.title="Bold",f.commandId="bold",f.annotation="textStyle/bold",f=h([d.surfaceToolUiFactory.register],f);var m=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(l.default)(t,e),t}(p);m.icon="italic",m.id="italic",m.group="textStyle",m.title="Italic",m.commandId="italic",m.annotation="textStyle/italic",m=h([d.surfaceToolUiFactory.register],m);var v=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(l.default)(t,e),t}(p);v.icon="underline",v.id="underline",v.group="textStyle",v.title="Underline",v.commandId="underline",v.annotation="textStyle/underline",v=h([d.surfaceToolUiFactory.register],v);var b=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(l.default)(t,e),t}(p);b.icon="code",b.id="code",b.group="textStyle",b.title="Code",b.commandId="smartcode",b.annotation="textStyle/code",b=h([d.surfaceToolUiFactory.register],b);var g=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(l.default)(t,e),t}(p);g.icon="strikethrough",g.id="strikethrough",g.group="textStyle",g.title="Strikethrough",g.commandId="strikethrough",g.annotation="textStyle/strikethrough",g=h([d.surfaceToolUiFactory.register],g);var y=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(l.default)(t,e),t}(p);y.icon="subscript",y.id="subscript",y.group="textStyle",y.title="Subscript",y.commandId="subscript",y.annotation="textStyle/subscript",y=h([d.surfaceToolUiFactory.register],y);var w=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(l.default)(t,e),t}(p);w.icon="superscript",w.id="superscript",w.group="textStyle",w.title="Superscript",w.commandId="superscript",w.annotation="textStyle/superscript",w=h([d.surfaceToolUiFactory.register],w)},"./src/ui/tools/FormatTools.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"FormatToolUi",(function(){return f})),n.d(t,"ParagraphFormatToolUi",(function(){return m})),n.d(t,"CalloutSuccessFormatToolUi",(function(){return v})),n.d(t,"CalloutErrorFormatToolUi",(function(){return b})),n.d(t,"CalloutWarningFormatToolUi",(function(){return g})),n.d(t,"CalloutInfoFormatToolUi",(function(){return y})),n.d(t,"Heading1FormatToolUi",(function(){return w})),n.d(t,"Heading2FormatToolUi",(function(){return _})),n.d(t,"CodeFormatToolUi",(function(){return k})),n.d(t,"BlockquoteFormatToolUi",(function(){return C})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/get.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/ui/SurfaceToolUi.ts"),d=n("./src/ui/ToolUiFactory.ts"),h=n("./src/model/selections/LinearSelectionModel.ts"),p=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},f=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(l.default)(t,e),Object(i.default)(t,[{key:"onUpdateState",value:function(){if(Object(o.default)(Object(a.default)(t.prototype),"onUpdateState",this).call(this),this.isDisabled())this.setActive(!1);else{var e=this.toolGroup.toolbar.surface.model.getFragment(),n=e.getSelection(),s=this.constructor.formatType,i=this.constructor.formatAttributes,r=!1;if(n instanceof h.LinearSelectionModel){var l=e.getSelectedLeafNodes();r=l.length&&l.every((function(e){return e.hasMatchingAncestor(s,i)}))}this.setActive(r)}}}]),t}(u.SurfaceToolUi);f.intellisense=!0,f.formatType=null,f.formatAttributes=null;var m=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(l.default)(t,e),t}(f);m.id="paragraph",m.group="format",m.title="Paragraph",m.commandId="paragraph",m.formatType="paragraph",m=p([d.surfaceToolUiFactory.register],m);var v=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(l.default)(t,e),t}(f);v.id="calloutSuccess",v.group="format",v.subgroup="callout",v.title="Success",v.commandId="calloutSuccess",v.formatType="callout",v.formatAttributes={type:"success"},v=p([d.surfaceToolUiFactory.register],v);var b=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(l.default)(t,e),t}(f);b.id="calloutError",b.group="format",b.subgroup="callout",b.title="Error",b.commandId="calloutError",b.formatType="callout",b.formatAttributes={type:"error"},b=p([d.surfaceToolUiFactory.register],b);var g=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(l.default)(t,e),t}(f);g.id="calloutWarning",g.group="format",g.subgroup="callout",g.title="Warning",g.commandId="calloutWarning",g.formatType="callout",g.formatAttributes={type:"warning"},g=p([d.surfaceToolUiFactory.register],g);var y=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(l.default)(t,e),t}(f);y.id="calloutInfo",y.group="format",y.subgroup="callout",y.title="Info",y.commandId="calloutInfo",y.formatType="callout",y.formatAttributes={type:"info"},y=p([d.surfaceToolUiFactory.register],y);var w=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(l.default)(t,e),t}(f);w.id="heading1",w.group="format",w.title="Heading",w.commandId="heading1",w.formatType="heading",w.formatAttributes={level:1},w=p([d.surfaceToolUiFactory.register],w);var _=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(l.default)(t,e),t}(f);_.id="heading2",_.group="format",_.title="Subheading",_.commandId="heading2",_.formatType="heading",_.formatAttributes={level:2},_=p([d.surfaceToolUiFactory.register],_);var k=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(l.default)(t,e),t}(f);k.id="codeblock",k.group="format",k.title="Code",k.commandId="codeblock",k.formatType="code",k=p([d.surfaceToolUiFactory.register],k);var C=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(l.default)(t,e),t}(f);C.id="blockquote",C.group="format",C.title="Blockquote",C.commandId="blockquote",C.formatType="blockquote",C=p([d.surfaceToolUiFactory.register],C)},"./src/ui/tools/HistoryTools.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"HistoryToolUi",(function(){return p})),n.d(t,"UndoHistoryToolUi",(function(){return f})),n.d(t,"RedoHistoryToolUi",(function(){return m})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/ui/SurfaceToolUi.ts"),d=n("./src/ui/ToolUiFactory.ts"),h=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.default)(this,t),(n=Object(r.default)(this,Object(a.default)(t).call(this,e,i))).onHistory=n.onHistory.bind(Object(o.default)(n)),n.toolGroup.toolbar.surface.model.on("history",n.onHistory),n}return Object(l.default)(t,e),Object(i.default)(t,[{key:"onHistory",value:function(){this.onUpdateState()}}]),t}(u.SurfaceToolUi),f=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(l.default)(t,e),t}(p);f.icon="undo",f.id="undo",f.group="history",f.title="Undo",f.commandId="undo",f=h([d.surfaceToolUiFactory.register],f);var m=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(l.default)(t,e),t}(p);m.icon="redo",m.id="redo",m.group="history",m.title="Redo",m.commandId="redo",m=h([d.surfaceToolUiFactory.register],m)},"./src/ui/tools/InsertBlockTools.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"InsertImageTool",(function(){return d})),n.d(t,"InsertVideoTool",(function(){return h})),n.d(t,"InsertFileTool",(function(){return p})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=n("./src/ui/SurfaceToolUi.ts"),c=n("./src/ui/ToolUiFactory.ts"),u=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(r.default)(t).apply(this,arguments))}return Object(a.default)(t,e),t}(l.SurfaceToolUi);d.icon="image",d.id="insertImage",d.group="insert",d.title="Insert Image",d.commandId="insertImage",d.intellisense=!0,d=u([c.surfaceToolUiFactory.register],d);var h=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(r.default)(t).apply(this,arguments))}return Object(a.default)(t,e),t}(l.SurfaceToolUi);h.icon="video",h.id="insertVideo",h.group="insert",h.title="Insert Video",h.commandId="insertVideo",h.intellisense=!0,h=u([c.surfaceToolUiFactory.register],h);var p=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(r.default)(t).apply(this,arguments))}return Object(a.default)(t,e),t}(l.SurfaceToolUi);p.icon="file",p.id="insertFile",p.group="insert",p.title="Insert File",p.commandId="insertFile",p.intellisense=!0,p=u([c.surfaceToolUiFactory.register],p)},"./src/ui/tools/ListTools.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ListToolUi",(function(){return p})),n.d(t,"BulletListToolUi",(function(){return f})),n.d(t,"NumberedListToolUi",(function(){return m})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/get.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/ui/SurfaceToolUi.ts"),d=n("./src/ui/ToolUiFactory.ts"),h=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(l.default)(t,e),Object(i.default)(t,[{key:"onUpdateState",value:function(){Object(o.default)(Object(a.default)(t.prototype),"onUpdateState",this).call(this);var e=this.toolGroup.toolbar.surface.model.getFragment(),n=e?e.getSelectedLeafNodes():[],s=this.constructor.style,i=n.length&&n.every((function(e){return e.hasMatchingAncestor("list",{style:s})}));this.setActive(i)}}]),t}(u.SurfaceToolUi);p.group="structure",p.intellisense=!0,p.style=null;var f=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(l.default)(t,e),t}(p);f.id="bullet",f.icon="bullet",f.title="Bulleted List",f.commandId="bullet",f.style="bullet",f=h([d.surfaceToolUiFactory.register],f);var m=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(l.default)(t,e),t}(p);m.id="number",m.icon="number",m.title="Numbered List",m.commandId="number",m.style="number",m=h([d.surfaceToolUiFactory.register],m)},"./src/ui/tools/WindowTools.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"WindowToolUi",(function(){return d})),n.d(t,"LinkInspectorToolUi",(function(){return h})),n.d(t,"InsertLabelTool",(function(){return p})),n.d(t,"SpanInspectorToolUi",(function(){return f})),n.d(t,"InsertSpanRefTool",(function(){return m})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=n("./src/ui/SurfaceToolUi.ts"),c=n("./src/ui/ToolUiFactory.ts"),u=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(r.default)(t).apply(this,arguments))}return Object(a.default)(t,e),t}(l.SurfaceToolUi),h=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(r.default)(t).apply(this,arguments))}return Object(a.default)(t,e),t}(d);h.icon="link",h.id="link",h.group="textStyle",h.title="Link",h.commandId="link",h=u([c.surfaceToolUiFactory.register],h);var p=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(r.default)(t).apply(this,arguments))}return Object(a.default)(t,e),t}(l.SurfaceToolUi);p.icon="label",p.id="insertLabel",p.group="etc",p.title="Insert Label",p.commandId="label",p.intellisense=!0,p=u([c.surfaceToolUiFactory.register],p);var f=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(r.default)(t).apply(this,arguments))}return Object(a.default)(t,e),t}(d);f.icon="span",f.id="span",f.group="etc",f.title="Span",f.commandId="span",f=u([c.surfaceToolUiFactory.register],f);var m=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(r.default)(t).apply(this,arguments))}return Object(a.default)(t,e),t}(l.SurfaceToolUi);m.icon="spanRef",m.id="insertSpanRef",m.group="etc",m.title="Insert Span Reference",m.commandId="spanRef",m.intellisense=!0,m=u([c.surfaceToolUiFactory.register],m)},"./src/ui/windowManagers/DesktopInspectorWindowManagerUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"DesktopInspectorWindowManagerUi",(function(){return o}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(r.default)(t).apply(this,arguments))}return Object(a.default)(t,e),t}(n("./src/ui/windowManagers/SurfaceWindowManagerUi.ts").SurfaceWindowManagerUi)},"./src/ui/windowManagers/SurfaceWindowManagerUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"SurfaceWindowManagerUi",(function(){return o}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=function(e){function t(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.default)(this,t),(n=Object(i.default)(this,Object(r.default)(t).call(this,a))).surface=e,n}return Object(a.default)(t,e),t}(n("./src/ui/WindowManagerUi.ts").WindowManagerUi)},"./src/ui/windows/DialogUi.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"DialogUi",(function(){return b})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.map"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.promise"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(s),r=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),a=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),c=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=n("./node_modules/@babel/runtime/helpers/esm/get.js"),d=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),h=n("./src/ui/WindowUi.ts"),p=n("./src/ui/LabelWidgetUi.ts"),f=n("./src/ui/ActionSet.ts"),m=n("./src/ui/ActionWidgetUi.ts"),v=function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(t){r(t)}}function o(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},b=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.default)(this,t),(e=Object(o.default)(this,Object(c.default)(t).call(this,n))).title=new p.LabelWidgetUi,e.actions=new f.ActionSet,e.attachedActions=[],e.onActionClick=e.onActionClick.bind(Object(l.default)(e)),e.onActionsChange=e.onActionsChange.bind(Object(l.default)(e)),e.actions.on("click",e.onActionClick),e.actions.on("change",e.onActionsChange),e.title.element.classList.add("am-ui-dialog-title"),e.element.classList.add("am-ui-dialog"),e.element.setAttribute("role","dialog"),e}return Object(d.default)(t,e),Object(a.default)(t,[{key:"setup",value:function(e){var n=this,s=Object.create(null,{setup:{get:function(){return Object(u.default)(Object(c.default)(t.prototype),"setup",n)}}});return v(this,void 0,void 0,i.a.mark((function t(){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.setup.call(this,e);case 2:n=this.constructor.title,r=this.constructor.actions,this.title.setLabel(n).setTitle(n),this.actions.add(this.getActionWidgets(r));case 6:case"end":return t.stop()}}),t,this)})))}},{key:"onActionClick",value:function(e){this.executeAction(e)}},{key:"onActionsChange",value:function(){this.detatchActions().attachActions()}},{key:"executeAction",value:function(e){return v(this,void 0,void 0,i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e||this.close();case 1:case"end":return t.stop()}}),t,this)})))}},{key:"attachActions",value:function(){return this.attachedActions=this.actions.get(),this}},{key:"detatchActions",value:function(){var e=!0,t=!1,n=void 0;try{for(var s,i=this.attachedActions[Symbol.iterator]();!(e=(s=i.next()).done);e=!0)s.value.element.remove()}catch(r){t=!0,n=r}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}return this.attachedActions=[],this}},{key:"getActionWidgets",value:function(e){return e.map((function(e){return new m.ActionWidgetUi(e)}))}}]),t}(h.WindowUi);b.title="",b.actions=[]},"./src/util.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"mimeAmber",(function(){return r})),n.d(t,"repeatString",(function(){return a})),n.d(t,"stripDiacritics",(function(){return o})),n.d(t,"hashObject",(function(){return l})),n.d(t,"clone",(function(){return c})),n.d(t,"cloneObject",(function(){return u})),n.d(t,"isSubset",(function(){return d})),n.d(t,"compare",(function(){return h})),n.d(t,"compareArrays",(function(){return p})),n.d(t,"arrayUnion",(function(){return f})),n.d(t,"arrayDifference",(function(){return m})),n.d(t,"arrayIntersection",(function(){return v})),n.d(t,"commonStartSequenceLength",(function(){return b})),n.d(t,"countEdgeMatches",(function(){return g})),n.d(t,"resolveUrl",(function(){return y})),n.d(t,"isEmptyObject",(function(){return w})),n.d(t,"isPlainObject",(function(){return _})),n.d(t,"translateRect",(function(){return k})),n.d(t,"unionRects",(function(){return C})),n.d(t,"debounce",(function(){return x})),n.d(t,"parseUrl",(function(){return j})),n.d(t,"getStartAndEndRects",(function(){return O})),n.d(t,"getData",(function(){return E})),n.d(t,"setData",(function(){return T})),n.d(t,"deleteData",(function(){return I})),n.d(t,"copyDataReference",(function(){return D})),n.d(t,"getProp",(function(){return P})),n.d(t,"setProp",(function(){return A})),n.d(t,"now",(function(){return M})),n.d(t,"sanitizeXmlString",(function(){return L})),n.d(t,"serializeDocument",(function(){return F})),n.d(t,"parseYoutubeVideoUrl",(function(){return B})),n.d(t,"parseVimeoVideoUrl",(function(){return q})),n.d(t,"isEmail",(function(){return U})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.filter"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.map"),n("core-js/modules/es.array.slice"),n("core-js/modules/es.map"),n("core-js/modules/es.object.assign"),n("core-js/modules/es.object.get-own-property-names"),n("core-js/modules/es.object.keys"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.regexp.to-string"),n("core-js/modules/es.set"),n("core-js/modules/es.string.iterator"),n("core-js/modules/es.string.match"),n("core-js/modules/es.string.replace"),n("core-js/modules/es.string.search"),n("core-js/modules/es.string.split"),n("core-js/modules/es.weak-map"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),i=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),r="application/x-amber+xml";function a(e,t){for(var n="";t-- >0;)n+=e;return n}function o(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function l(e){return JSON.stringify(e)}function c(e){var t;if(Array.isArray(e))t=new Array(e.length);else{if(e&&"function"==typeof e.clone)return e.clone();if(e&&"function"==typeof e.cloneNode)return e.cloneNode(!0);if(null===e||"object"!==Object(i.default)(e))return e;t={}}for(var n in e)t[n]=c(e[n]);return t}function u(e){var t=Object.create(e.constructor.prototype),n=!0,s=!1,i=void 0;try{for(var r,a=Object.getOwnPropertyNames(e)[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value;t[o]=e[o]}}catch(l){s=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}return t}function d(e,t){if(e===t)return!0;for(var n in t=t||{},e=e||{}){var s=e[n],r=t[n],a=Object(i.default)(s);if(a!==Object(i.default)(r)||("string"===a||"number"===a||"boolean"===a)&&s!==r||s===Object(s)&&!h(s,r))return!1}return!0}function h(e,t){return d(e,t)&&d(t,e)}function p(e,t,n){if(e.length!==t.length)return!1;for(var s=0;s<e.length;s++)if(!n(e[s],t[s]))return!1;return!0}function f(){for(var e=new Set,t=[],n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];for(var r=0,a=s;r<a.length;r++){var o=a[r],l=!0,c=!1,u=void 0;try{for(var d,h=o[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var p=d.value;e.has(p)||(e.add(p),t.push(p))}}catch(f){c=!0,u=f}finally{try{l||null==h.return||h.return()}finally{if(c)throw u}}}return t}function m(e,t){var n=new Set(t);return e.filter((function(e){return!n.has(e)}))}function v(e,t){var n=new Set(t);return e.filter((function(e){return n.has(e)}))}function b(){for(var e=0,t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];e:for(;!(e>=n[0].length);){for(var i=n[0][e],r=1;r<n.length;r++)if(n[r].length<e||n[r][e]!==i)break e;e++}return e}function g(e,t,n){n||(n=function(e,t){return e===t});var s,i,r=Math.min(e.length,t.length);for(s=0;s<r&&n(e[s],t[s]);s++);if(s===r&&e.length===t.length)return null;for(i=0;i<r-s&&n(e[e.length-1-i],t[t.length-1-i]);i++);return{start:s,end:i}}function y(e,t){var n=t.createElement("a");return n.href=e,n.href||e}function w(e){return 0===Object.keys(e).length}function _(e){if(!e||"object"!==Object(i.default)(e))return!1;var t;for(t in e);return void 0===t||e.hasOwnProperty(t)}function k(e,t,n){return{left:e.left+t,right:e.right+t,top:e.top+n,bottom:e.bottom+n,width:e.width,height:e.height}}function C(e){for(var t={left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:0,height:0},n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];for(var r=0,a=s;r<a.length;r++){var o=a[r];t.left=Math.min(t.left,o.left),t.top=Math.min(t.top,o.top),t.right=Math.max(t.right,o.right),t.bottom=Math.max(t.bottom,o.bottom)}return t.width=t.right-t.left,t.height=t.bottom-t.top,t}function x(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=null;return function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];var l=function(){i=null,s||e.apply(t,a)},c=s&&!i;clearTimeout(i),i=setTimeout(l,n),c&&e.apply(t,a)}}function j(e){var t=document.createElement("a");return e.match(/^http(s)?:\/\//)||(e="http://"+e),t.href=e,{source:e,protocol:t.protocol.replace(":",""),host:t.hostname,port:t.port,query:t.search,params:function(){for(var e=new Map,n=t.search.replace(/^\?/,"").split("&"),s=0;s<n.length;s++)if(n[s]){var i=n[s].split("=");e.set(i[0],i[1])}return e}(),file:(t.pathname.match(/\/([^/?#]+)$/i)||[void 0,""])[1],hash:t.hash.replace("#",""),path:t.pathname.replace(/^([^/])/,"/$1"),relative:(t.href.match(/tps?:\/\/[^/]+(.+)/)||[void 0,""])[1],segments:t.pathname.replace(/^\//,"").split("/")}}function O(e){if(!e||!e.length)return null;var t,n,s=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(s=(a=o.next()).done);s=!0){var l=a.value;!t||l.top<t.top?t=Object.assign({},l):l.top===t.top&&(t.left=Math.min(t.left,l.left),t.right=Math.max(t.right,l.right),t.width=t.right-t.left),!n||l.bottom>n.bottom?n=Object.assign({},l):l.bottom===n.bottom&&(n.left=Math.min(n.left,l.left),n.right=Math.max(n.right,l.right),n.width=n.right-n.left)}}catch(c){i=!0,r=c}finally{try{s||null==o.return||o.return()}finally{if(i)throw r}}return{start:t,end:n}}var S=new WeakMap;function E(e,t){var n=S.get(e);return n?n.get(t):void 0}function T(e,t,n){var s=S.get(e);s||(s=new Map,S.set(e,s)),s.set(t,n)}function I(e,t){var n=S.get(e);return!!n&&n.delete(t)}function D(e,t){var n=S.get(e);n&&S.set(t,n)}function P(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];for(var i=0,r=n;i<r.length;i++){var a=r[i];if(!e)break;e=e[a]}return e}function A(e,t){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i];for(var r=0;r<s.length-1;r++){if(!e)return!1;e=e[s[r]]}return!!e&&(e[s[s.length-1]]=t,!0)}var N,R,M=(N=window.performance,(R=N&&N.timing&&N.timing.navigationStart)&&"function"==typeof N.now?function(){return R+N.now()}:Date.now);function L(e){return e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]/gm,"")}function F(e){return L((new XMLSerializer).serializeToString(e))}function B(e){var t,n=j(e);if(/^(www\.)?youtube\.com$/.test(n.host)&&"/watch"===n.path&&n.params.has("v"))t=n.params.get("v");else{if("youtu.be"!==n.host)return null;t=n.path.slice(1)}var i=t,r=n.params.get("t"),a=n.params.get("start"),o=n.params.get("end"),l=new Map;if(void 0!==r){var c=r.match(/^(?:(\d+)h)?(?:(\d+)m)?(\d+)s$/);if(c){var u=0;u+=c[1]?60*+c[1]*60:0,u+=c[2]?60*+c[2]:0,u+=+c[3],l.set("start",u.toString())}else/^\d+$/.test(r)&&l.set("start",r)}else null!=a&&l.set("start",a),null!=o&&l.set("end",o);var d=Object(s.default)(l.entries()).map((function(e){return e.join("=")})).join("&");return d&&(d="&"+d),{path:i,params:d}}function q(e){var t=j(e);if(!/^(www\.)?vimeo\.com$/.test(t.host))return null;var n=t.path.match(/^\/(\d+)$/);return n?{id:n[1]}:null}var $=/[a-z0-9][a-z0-9_.+-]*@[a-z0-9-]+(?:\.[a-z0-9-]+)+/i;function U(e){var t=e.match($);return null!=t&&t[0].length===e.length}},"./src/view/AnnotationViewFactory.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"annotationViewFactory",(function(){return s}));var s=new(n("./src/CtorFactory.ts").CtorFactory)},"./src/view/DocumentView.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"DocumentView",(function(){return f})),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.slice"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.set"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.for-each"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/get.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./src/Document.ts"),u=n("./src/view/nodes/ViewNode.ts"),d=n("./src/view/nodes/DocumentViewNode.ts"),h=n("./src/view/viewUtil.ts"),p=n("./src/domUtil.ts"),f=function(e){function t(e,n){var i;return Object(s.default)(this,t),(i=Object(r.default)(this,Object(a.default)(t).call(this,new d.DocumentViewNode(e.documentNode,n)))).model=e,i}return Object(l.default)(t,e),Object(i.default)(t,[{key:"getBranchNodeFromOffset",value:function(e){if(e<0||e>this.model.data.getLength())throw new Error("Offset ".concat(e," out of bounds"));return Object(o.default)(Object(a.default)(t.prototype),"getBranchNodeFromOffset",this).call(this,e)}},{key:"getNodeAndOffset",value:function(e){for(var t=this.getBranchNodeFromOffset(e),n={node:t.element,offset:0,steps:null},s=t.getOffset()+ +t.isWrapped(),i=new Set,r=function(e){return e.classList.contains("am-view-branchNode-blockSlug")||h.rejectsCursor(e)};s!==e;){var a=(n=h.adjacentDomPosition(n,1,{stop:function(){return!0},noDescend:r})).steps[0],o=a.node;if(o.nodeType!==Node.TEXT_NODE){if(o.classList.contains("am-view-branchNode")||o.classList.contains("am-view-leafNode"))if("leave"!==a.type){var l=u.ViewNode.getViewNode(o).model;if(i.has(l))n.node=o.parentNode,n.offset=p.parentIndex(o)+1;else if(i.add(l),e>=s+l.getOuterLength())n.node=o.parentNode,n.offset=p.parentIndex(o)+1,s+=l.getOuterLength();else if("cross"===a.type){if(e===s+1){n.node=o,n.offset=0;break}s+=2}else s++}else s++}else{if("leave"===a.type)continue;var c=o.length;if(e<=s+c){n.node=o,n.offset=e-s;break}s+=c,n.node=o,n.offset=c}}var d=n.node.childNodes[n.offset-1];d&&d.nodeType===Node.ELEMENT_NODE&&(d.classList.contains("am-view-branchNode")||d.classList.contains("am-view-leafNode"));var f={};return h.adjacentDomPosition(n,1,{stop:function(e){if(e.node.nodeType===Node.TEXT_NODE)return"internal"===e.type;if(e.node.classList.contains("am-view-branchNode")||e.node.classList.contains("am-view-leafNode")){var t=u.ViewNode.getViewNode(e.node).model;return!i.has(t)&&(i.add(t),!0)}return!1},noDescend:r}).steps.slice(0,-1).forEach((function(e){var t=function(t){return e.node.nodeType===Node.ELEMENT_NODE&&e.node.classList.contains(t)};f.preUnicorn=f.preUnicorn||t("am-view-pre-unicorn")&&e,f.postUnicorn=f.postUnicorn||t("am-view-post-unicorn")&&e,f.focusableNode=f.focusableNode||t("am-view-focusableNode")&&e,f.text=f.text||e.node.nodeType===Node.TEXT_NODE&&e})),f.preUnicorn?p.nextCursorOffset(f.preUnicorn.node):f.postUnicorn?p.prevCursorOffset(f.postUnicorn.node):f.text?n.node.nodeType===Node.TEXT_NODE?n:{node:f.text.node,offset:0}:n}}]),t}(c.Document)},"./src/view/KeyDownHandlerFactory.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"KeyDownHandlerFactory",(function(){return c})),n.d(t,"keyDownHandlerFactory",(function(){return u})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.index-of"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.map"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.set"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/get.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=function(e){function t(){var e;return Object(s.default)(this,t),(e=Object(r.default)(this,Object(a.default)(t).call(this))).handlerIdsByKey=new Map,e}return Object(l.default)(t,e),Object(i.default)(t,[{key:"register",value:function(e){Object(o.default)(Object(a.default)(t.prototype),"register",this).call(this,e);var n=e.keys,s=e.id,i=!0,r=!1,l=void 0;try{for(var c,u=n[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var d=c.value,h=this.handlerIdsByKey.get(d);h||(h=new Set,this.handlerIdsByKey.set(d,h)),h.add(s)}}catch(p){r=!0,l=p}finally{try{i||null==u.return||u.return()}finally{if(r)throw l}}}},{key:"lookupHandlersForKey",value:function(e,t){var n=[],s=this.handlerIdsByKey.get(e);if(s){var i=!0,r=!1,a=void 0;try{for(var o,l=s[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value,u=this.lookup(c);u.supportedSelections&&-1===u.supportedSelections.indexOf(t)||n.push(u)}}catch(d){r=!0,a=d}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}}return n}},{key:"executeHandlersForKey",value:function(e,t,n,s){var i=this.lookupHandlersForKey(e,t),r=!1,a=!0,o=!1,l=void 0;try{for(var c,u=i[Symbol.iterator]();!(a=(c=u.next()).done);a=!0)c.value.execute(n,s)&&(r=!0)}catch(d){o=!0,l=d}finally{try{a||null==u.return||u.return()}finally{if(o)throw l}}return r}}]),t}(n("./src/CtorFactory.ts").CtorFactory),u=new c},"./src/view/RangeState.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"RangeState",(function(){return u}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./src/SelectionState.ts"),a=n("./src/view/TextState.ts"),o=n("./src/view/nodes/ViewNode.ts"),l=n("./src/domUtil.ts"),c=n("./src/view/viewUtil.ts"),u=function(){function e(t,n){Object(s.default)(this,e),this.range=null,this.misleadingSelection=null,this.selectionChanged=!1,this.branchNodeChanged=!1,this.contentChanged=!1,this.focusIsAfterAnnotationBoundary=!1,this.node=null,this.text=null,this.hash=null,this.textState=null,this.saveState(t,n)}return Object(i.default)(e,[{key:"saveState",value:function(e,t){var n,s=e?e.misleadingSelection:r.SelectionState.newNullSelection(),i=document.getSelection();if((n=i.rangeCount&&i.anchorNode&&l.contains(t.element,i.anchorNode)&&!l.closest(i.anchorNode,".am-view-transcluded")?new r.SelectionState(i):r.SelectionState.newNullSelection()).equals(s)?(this.selectionChanged=!1,this.range=e&&e.range):(this.selectionChanged=!0,this.range=c.rangeFromSelection(n)),s.anchorNode!==n.anchorNode){if(n.anchorNode){var u=l.closest(n.anchorNode,".am-view-branchNode");u?(this.node=o.ViewNode.getViewNode(u),this.node&&this.node.root!==t&&(this.node=null,this.range=null)):this.node=null}}else this.node=e&&e.node;this.branchNodeChanged=(e&&e.node)!==this.node,this.node?(this.text=c.getDomText(this.node.element),this.hash=c.getDomHash(this.node.element),this.textState=new a.TextState(this.node.element)):(this.text=null,this.hash=null,this.textState=null),this.contentChanged=!(this.branchNodeChanged||!((e&&e.hash)!==this.hash||(e&&e.text)!==this.text||!this.textState&&e&&e.textState||this.textState&&!this.textState.isEqual(e&&e.textState))),!e||this.selectionChanged||this.contentChanged?this.focusIsAfterAnnotationBoundary=n.focusNode&&c.isAfterAnnotationBoundary(n.focusNode,n.focusOffset):this.focusIsAfterAnnotationBoundary=e.focusIsAfterAnnotationBoundary,this.misleadingSelection=n}}]),e}()},"./src/view/SurfaceView.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"SurfaceView",(function(){return Q})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.concat"),n("core-js/modules/es.array.find"),n("core-js/modules/es.array.index-of"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.map"),n("core-js/modules/es.array.slice"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.promise"),n("core-js/modules/es.regexp.to-string"),n("core-js/modules/es.set"),n("core-js/modules/es.string.ends-with"),n("core-js/modules/es.string.iterator"),n("core-js/modules/es.string.match"),n("core-js/modules/es.string.replace"),n("core-js/modules/es.string.starts-with"),n("core-js/modules/es.string.trim"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(s),r=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js")),a=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),l=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),d=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),h=n("./src/ui/ElementUi.ts"),p=n("./src/view/DocumentView.ts"),f=n("./src/view/SurfaceViewObserver.ts"),m=n("./src/view/KeyDownHandlerFactory.ts"),v=n("./src/SelectionState.ts"),b=n("./src/view/selections/SelectionView.ts"),g=n("./src/view/selections/LinearSelectionView.ts"),y=n("./src/view/selections/TableSelectionView.ts"),w=n("./src/model/selections/SelectionModel.ts"),_=n("./src/model/selections/NullSelectionModel.ts"),k=n("./src/model/selections/LinearSelectionModel.ts"),C=n("./src/model/selections/TableSelectionModel.ts"),x=n("./src/model/DocumentModel.ts"),j=n("./src/model/Transaction.ts"),O=n("./src/model/DataString.ts"),S=n("./src/model/LinearData.ts"),E=n("./src/model/Converter.ts"),T=n("./src/model/AnnotationModelFactory.ts"),I=n("./src/model/nodes/ParagraphModelNode.ts"),D=n("./src/view/nodes/ViewNode.ts"),P=n("./src/view/nodes/ContentBranchViewNode.ts"),A=n("./src/view/nodes/ParagraphViewNode.ts"),N=n("./src/view/nodes/TableViewNode.ts"),R=n("./src/Range.ts"),M=n("./src/EventSequencer.ts"),L=n("./src/ui/Trigger.ts"),F=n("./src/domUtil.ts"),B=n("./src/platform.ts"),q=n("./src/util.ts"),$=n("./src/view/viewUtil.ts"),U=n("./src/ui/DataTransferItemUi.ts"),z=n("./src/model/documentFormats/HtmlDocumentFormat.ts"),V=n("./src/model/documentFormats/MarkdownDocumentFormat.ts"),H=n("./src/model/DocumentFormat.ts"),W=function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(t){r(t)}}function o(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},Q=function(e){function t(e,n){var s,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(a.default)(this,t),(s=Object(l.default)(this,Object(c.default)(t).call(this,i))).model=e,s.ui=n,s.documentView=new p.DocumentView(e.documentModel,Object(u.default)(s)),s.observer=new f.SurfaceViewObserver(Object(u.default)(s)),s.eventSequencer=new M.EventSequencer,s.hasSelectionChangeEvents="onselectionchange"in document,s.nativeSelection=window.getSelection(),s.documentNodeElement=s.documentView.documentNode.element,s.deactivated=!1,s.renderLocks=0,s.newModelSelection=null,s.selection=null,s.focused=!1,s.activeNode=null,s.focusedNode=null,s.relocatingNode=null,s.keyDownSelection=null,s.keyDownEvent=null,s.dragging=!1,s.resizing=!1,s.lastDropTarget=null,s.lastDropPosition=null,s.lastDropMarkerElement=null,s.contentBranchNodeChanged=!1,s.unicorningNode=null,s.setUnicorningRecursionGuard=!1,s.clipboard=null,s.beforePasteData=null,s.allowedFile=null,s.onModelSelect=s.onModelSelect.bind(Object(u.default)(s)),s.onModelDocumentUpdate=s.onModelDocumentUpdate.bind(Object(u.default)(s)),s.onInsertionAnnotationsChange=s.onInsertionAnnotationsChange.bind(Object(u.default)(s)),s.onWindowResize=q.debounce(s.onWindowResize.bind(Object(u.default)(s)),50),s.onDocumentSelectionChange=s.onDocumentSelectionChange.bind(Object(u.default)(s)),s.onDocumentFocusInOut=s.onDocumentFocusInOut.bind(Object(u.default)(s)),s.onDocumentFocusChange=s.onDocumentFocusChange.bind(Object(u.default)(s)),s.onDocumentMouseDown=s.onDocumentMouseDown.bind(Object(u.default)(s)),s.onDocumentMouseUp=s.onDocumentMouseUp.bind(Object(u.default)(s)),s.onDocumentKeyDown=s.onDocumentKeyDown.bind(Object(u.default)(s)),s.onDocumentKeyUp=s.onDocumentKeyUp.bind(Object(u.default)(s)),s.onDocumentKeyPress=s.onDocumentKeyPress.bind(Object(u.default)(s)),s.onDocumentInput=s.onDocumentInput.bind(Object(u.default)(s)),s.afterDocumentKeyDown=s.afterDocumentKeyDown.bind(Object(u.default)(s)),s.onDocumentDragStart=s.onDocumentDragStart.bind(Object(u.default)(s)),s.onDocumentDragOver=s.onDocumentDragOver.bind(Object(u.default)(s)),s.onDocumentDragLeave=s.onDocumentDragLeave.bind(Object(u.default)(s)),s.onDocumentDrop=s.onDocumentDrop.bind(Object(u.default)(s)),s.onDocumentDragEnd=s.onDocumentDragEnd.bind(Object(u.default)(s)),s.onCut=s.onCut.bind(Object(u.default)(s)),s.onCopy=s.onCopy.bind(Object(u.default)(s)),s.onPaste=s.onPaste.bind(Object(u.default)(s)),s.onDocumentSelectionChangeDebounced=q.debounce(s.onDocumentSelectionChange),s.onDocumentFocusChangeDebounced=q.debounce(s.onDocumentFocusChange),s.model.on("select",s.onModelSelect),s.model.on("documentUpdate",s.onModelDocumentUpdate),s.model.on("insertionAnnotationsChange",s.onInsertionAnnotationsChange),s.hasSelectionChangeEvents?document.addEventListener("selectionchange",s.onDocumentSelectionChangeDebounced):(s.documentNodeElement.addEventListener("mousemove",(function(){s.dragging&&s.onDocumentSelectionChangeDebounced()})),s.eventSequencer.after("mousedown",s.onDocumentSelectionChangeDebounced)),document.addEventListener("focus",s.onDocumentFocusInOut,!0),document.addEventListener("mousedown",s.onDocumentFocusChangeDebounced),window.addEventListener("resize",s.onWindowResize),s.eventSequencer.on("keydown",s.onDocumentKeyDown).on("keyup",s.onDocumentKeyUp).on("keypress",s.onDocumentKeyPress).on("input",s.onDocumentInput).after("keydown",s.afterDocumentKeyDown),s.documentNodeElement.addEventListener("mousedown",s.onDocumentMouseDown),s.documentNodeElement.addEventListener("cut",s.onCut),s.documentNodeElement.addEventListener("copy",s.onCopy),s.documentNodeElement.addEventListener("paste",s.onPaste),s.createElement(i),s.element.classList.add("am-view-surface"),s.eventSequencer.attach(s.element),s.element.addEventListener("dragstart",s.onDocumentDragStart),s.element.addEventListener("dragover",s.onDocumentDragOver),s.element.addEventListener("dragleave",s.onDocumentDragLeave),s.element.addEventListener("drop",s.onDocumentDrop),s.element.addEventListener("dragend",s.onDocumentDragEnd),s.highlightsBlurredElement=document.createElement("div"),s.highlightsBlurredElement.className="am-view-surface-highlights-blurred",s.highlightsFocusedElement=document.createElement("div"),s.highlightsFocusedElement.className="am-view-surface-highlights-focused",s.highlightsElement=document.createElement("div"),s.highlightsElement.className="am-view-surface-highlights",s.highlightsElement.appendChild(s.highlightsBlurredElement),s.highlightsElement.appendChild(s.highlightsFocusedElement),s.pasteTargetElement=document.createElement("div"),s.pasteTargetElement.className="am-view-surface-paste",s.pasteTargetElement.tabIndex=-1,s.pasteTargetElement.contentEditable="true",s.pasteTargetElement.addEventListener("cut",s.onCut),s.pasteTargetElement.addEventListener("copy",s.onCopy),s.pasteTargetElement.addEventListener("paste",s.onPaste),s.deactivatedSelectionElement=document.createElement("div"),s.deactivatedSelectionElement.classList.add("am-view-surface-deactivatedSelection"),s.ui.blockersElement.appendChild(s.highlightsElement),s.ui.selectionsElement.appendChild(s.deactivatedSelectionElement),s.element.appendChild(s.documentNodeElement),s.element.appendChild(s.pasteTargetElement),s}return Object(d.default)(t,e),Object(o.default)(t,[{key:"initialize",value:function(){this.documentView.documentNode.setLive(!0),setTimeout((function(){try{document.execCommand("enableObjectResizing",!1,"false"),document.execCommand("enableInlineTableEditing",!1,"false")}catch(e){}}))}},{key:"destroy",value:function(){return this.focused&&this.blur(),this.observer.detach(),this.eventSequencer.detatch(),this.documentView.documentNode.setLive(!1),this.model.off("select",this.onModelSelect),this.model.off("documentUpdate",this.onModelDocumentUpdate),this.model.off("insertionAnnotationsChange",this.onInsertionAnnotationsChange),this.hasSelectionChangeEvents&&document.removeEventListener("selectionchange",this.onDocumentSelectionChangeDebounced),document.removeEventListener("focus",this.onDocumentFocusInOut,!0),document.removeEventListener("mousedown",this.onDocumentFocusChangeDebounced),window.removeEventListener("resize",this.onWindowResize),this.element.remove(),this.highlightsElement.remove(),this}},{key:"enable",value:function(){this.documentView.documentNode.enable()}},{key:"disable",value:function(){this.documentView.documentNode.disable()}},{key:"getSelection",value:function(e){return e?b.SelectionView.newFromModel(e,this):(this.selection||(this.selection=b.SelectionView.newFromModel(this.model.getSelection(),this)),this.selection)}},{key:"findBlockSlug",value:function(e){return e.isCollapsed()?this.documentView.documentNode.getSlugAtOffset(e.end):null}},{key:"findFocusedNode",value:function(e){var t=this.documentView.documentNode;if(e.isCollapsed()){var n=t.getNodeFromOffset(e.start);if(n&&n.isFocusable()&&!n.canContainContent())return n}else{var s=t.getNodeFromOffset(e.start+1);if(s&&s.isFocusable()&&s===t.getNodeFromOffset(e.end-1)&&(!s.canContainContent()||e.equalsSelection(s.getOuterRange())))return s}return null}},{key:"handleObservedChanges",value:function(e,t){var n,s=this,i=!1;if(t.contentChanged){var r=t.textState.getChangeTransaction(e.textState,this.model.documentModel,t.node.getOffset(),t.node.unicornAnnotations);r&&(this.renderLock((function(){return s.changeModel([r])})),i=r.operations.some((function(e){return"insert"===e.type&&e.insert.length>0})))}t.branchNodeChanged&&e&&e.node&&e.node.root&&e.node instanceof P.ContentBranchViewNode&&e.node.renderContents(),!t.selectionChanged||e&&e.range&&t.range&&!t.range.isCollapsed()&&e.range.equalsSelection(t.range)||(n=t.range?new k.LinearSelectionModel(this.model.documentModel,t.range):new _.NullSelectionModel(this.model.documentModel),this.renderLock((function(){return s.changeModel(null,n)})),this.cleanupUnicorns(!1)&&this.observer.pollOnce(!1)),i&&setTimeout((function(){s.checkSequences(),s.maybeBreakpoint()})),t.branchNodeChanged&&t.node&&(this.updateCursorHolders(),this.showModelSelection()),i||this.model.breakpoint()}},{key:"changeModel",value:function(e,t){if(this.newModelSelection)throw new Error("Nested change of newModelSelection");this.newModelSelection=t;try{this.model.change(e,t)}finally{this.newModelSelection=null}}},{key:"setContentBranchNodeChanged",value:function(){this.contentBranchNodeChanged=!0,this.clearKeyDownState()}},{key:"setUnicorning",value:function(e){if(this.setUnicorningRecursionGuard)throw new Error("setUnicorning recursing");if(this.unicorningNode&&this.unicorningNode!==e){this.setUnicorningRecursionGuard=!0;try{this.unicorningNode.renderContents()}finally{this.setUnicorningRecursionGuard=!1}}this.unicorningNode=e}},{key:"setNotUnicorning",value:function(e){this.unicorningNode===e&&(this.unicorningNode=null)}},{key:"setNotUnicorningAll",value:function(e){this.unicorningNode===e&&(this.unicorningNode=null),this.setUnicorning(null)}},{key:"isRenderingLocked",value:function(){return this.renderLocks>0}},{key:"renderLock",value:function(e){this.renderLocks++;try{e()}finally{this.renderLocks--}}},{key:"getFocusedNode",value:function(e){if(!e)return this.focusedNode;var t=this.model.getSelection();return t instanceof k.LinearSelectionModel&&e.equalsSelection(t.getRange())?this.focusedNode:this.findFocusedNode(e)}},{key:"getSelectionState",value:function(e){var t=this.documentView.getNodeAndOffset(this.model.documentModel.getNearestCursorOffset(e.from,e.isBackwards()?1:-1)),n=e.isCollapsed()?t:this.documentView.getNodeAndOffset(this.model.documentModel.getNearestCursorOffset(e.to,e.isBackwards()?-1:1));return new v.SelectionState({anchorNode:t.node,anchorOffset:t.offset,focusNode:n.node,focusOffset:n.offset,isBackwards:e.isBackwards()})}},{key:"showModelSelection",value:function(){var e=this;if(this.deactivated)return setTimeout((function(){return e.updateDeactivatedSelection()})),!1;var t=this.getSelection();return!(!t.isNativeCursor()||this.focusedBlockSlug||!this.showSelectionState(this.getSelectionState(t.model.getRange())))&&(this.updateCursorHolders(),!0)}},{key:"showSelectionState",value:function(e){var t=e;if(t.equals(this.nativeSelection))return!1;var n=!1;if(t.isBackwards){var s=document.createRange();s.setStart(t.anchorNode,t.anchorOffset),this.nativeSelection.removeAllRanges(),this.nativeSelection.addRange(s),this.nativeSelection.extend(t.focusNode,t.focusOffset),n=!0}n||(this.nativeSelection.removeAllRanges(),this.nativeSelection.addRange(t.getNativeRange()));var i=t.focusNode&&F.closest(t.focusNode,"[contenteditable=true]");if(i&&!F.contains(i,document.activeElement))i.focus();else{var r=t.focusNode.nodeType===Node.ELEMENT_NODE?t.focusNode:t.focusNode.parentElement;F.scrollIntoView(r,{margin:!0})}return!0}},{key:"focus",value:function(){var e=this.getSelection();if(e.model instanceof _.NullSelectionModel&&(this.model.selectFirstContentOffset(),e=this.getSelection()),e.isFocusedNode())this.pasteTargetElement.focus();else{var t=this.documentView.getNodeAndOffset(e.model.getRange().start).node;F.closest(t,"[contenteditable=true]").focus()}this.onModelSelect()}},{key:"blur",value:function(){this.deactivated&&(this.model.setNullSelection(),this.activate()),this.nativeSelection.removeAllRanges(),document.activeElement.blur(),this.onDocumentFocusChange()}},{key:"appendHighlights",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];F.removeAllChildren(this.highlightsBlurredElement);var n=t?this.highlightsFocusedElement:this.highlightsBlurredElement,s=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(s=(a=o.next()).done);s=!0){var l=a.value;n.appendChild(l)}}catch(c){i=!0,r=c}finally{try{s||null==o.return||o.return()}finally{if(i)throw r}}}},{key:"startRelocation",value:function(e,t){this.relocatingNode=e,this.emit("relocationStart",e)}},{key:"endRelocation",value:function(){this.relocatingNode&&(this.emit("relocationEnd",this.relocatingNode),this.relocatingNode=null),this.onDocumentDragLeave()}},{key:"deactivate",value:function(){this.deactivated||(this.observer.disable(),this.deactivated=!0,this.nativeSelection.removeAllRanges(),this.updateDeactivatedSelection())}},{key:"activate",value:function(){this.deactivated&&(this.deactivated=!1,this.updateDeactivatedSelection(),this.observer.enable(),F.contains(this.documentNodeElement,this.nativeSelection.anchorNode)?(this.observer.clear(),this.observer.pollOnce()):(this.focusedNode=null,this.onModelSelect()))}},{key:"getOffsetFromCoords",value:function(e,t){try{var n;if(document.caretPositionFromPoint){var s=document.caretPositionFromPoint(e,t);n=$.getDataOffset(s.offsetNode,s.offset)}else if(document.caretRangeFromPoint){var i=document.caretRangeFromPoint(e,t);n=$.getDataOffset(i.startContainer,i.startOffset)}else if(document.body.createTextRange){var r=document.body.createTextRange();r.moveToPoint(e,t),r.pasteHTML('<span id="am-view-textRange-drop-marker">&nbsp;</span>');var a=document.getElementById("am-view-textRange-drop-marker");n=$.getDataOffset(a,0),a.remove()}return n}catch(o){return-1}}},{key:"getOffsetFromEventCoords",value:function(e){return this.getOffsetFromCoords(e.pageX-window.pageXOffset,e.pageY-window.pageYOffset)}},{key:"moveModelCursor",value:function(e){var t=this.model.getSelection();t instanceof k.LinearSelectionModel&&this.model.setLinearSelection(this.model.documentModel.getRelativeRange(t.getRange(),e,"character",!1))}},{key:"getNativeRange",value:function(e){return(e?this.getSelectionState(e):new v.SelectionState(this.nativeSelection)).getNativeRange()}},{key:"updateDeactivatedSelection",value:function(){F.removeAllChildren(this.deactivatedSelectionElement);var e=this.getSelection();if(this.deactivated&&e.isNativeCursor()){var t=e.getSelectionRects(),n=!0,s=!1,i=void 0;try{for(var r,a=(t||[])[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value,l=document.createElement("div");l.classList.toggle("am-view-surface-deactivatedSelection-collapsed",e.model.isCollapsed()),l.style.top="".concat(o.top+this.ui.element.scrollTop,"px"),l.style.left="".concat(o.left+this.ui.element.scrollLeft,"px"),l.style.width="".concat(Math.max(1,o.width),"px"),l.style.height="".concat(o.height,"px"),this.deactivatedSelectionElement.appendChild(l)}}catch(c){s=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}}}},{key:"cleanupUnicorns",value:function(e){var t=this;if(!this.unicorningNode||!this.unicorningNode.unicorns)return!1;var n=this.unicorningNode.unicorns[0];if(!F.contains(this.documentNodeElement,n))return!1;if(0===this.nativeSelection.rangeCount)return!1;var s=this.nativeSelection.getRangeAt(0),i=s.endContainer;for(i.nodeType===Node.ELEMENT_NODE&&(i=s.endOffset>0?i.childNodes[s.endOffset-1]:null);i&&i.nodeType===Node.TEXT_NODE;)i=i.previousSibling;if(i===n)return!1;var r=$.rangeFromSelection(this.nativeSelection);if(!r)return!1;var a=F.compareDocumentOrder(s.endContainer,s.endOffset,n.parentNode,F.parentIndex(n))<0?-1:1;return this.renderLock((function(){t.changeModel(null,new k.LinearSelectionModel(t.model.documentModel,r)),e&&t.moveModelCursor(a)})),this.unicorningNode.renderContents(),this.showModelSelection(),!0}},{key:"isBlockedTrigger",value:function(e){return-1!=={mac:["meta+b","meta+i","meta+u","meta+z","meta+y","meta+shift+z","meta+[","meta+]"],pc:["ctrl+b","ctrl+i","ctrl+u","ctrl+z","ctrl+y","ctrl+shift+z"]}["mac"===B.platform?"mac":"pc"].indexOf(e.toString())}},{key:"storeKeyDownState",value:function(e){this.keyDownEvent=e,this.keyDownSelection=null,this.nativeSelection.rangeCount&&e&&(e.keyCode===F.Key.up||e.keyCode===F.Key.down||e.keyCode===F.Key.left||e.keyCode===F.Key.right)&&(this.keyDownSelection=new v.SelectionState(this.nativeSelection))}},{key:"clearKeyDownState",value:function(){this.keyDownEvent=null,this.keyDownSelection=null}},{key:"handleInsertion",value:function(){var e=this.getSelection();if(e instanceof y.TableSelectionView){this.model.setSelection(e.model.collapsedToFrom()),m.keyDownHandlerFactory.lookup("tableDelete").execute(this,null);var t=this.documentView.getBranchNodeFromOffset(e.model.tableRange.start+1);if(!(t instanceof N.TableViewNode))throw new Error("Expected ".concat(N.TableViewNode.name," but got ").concat(t&&t.constructor.name," instead"));t.setEditing(!0),e=this.getSelection()}else if(e.isFocusedNode())return;if(e instanceof g.LinearSelectionView){var n=e.model.getRange();n.isCollapsed()||this.documentView.rangeInsideOneLeafNode(n)||(this.model.setNullSelection(),this.model.change([j.Transaction.fromRemoval(this.documentView.model,n)],new k.LinearSelectionModel(this.model.documentModel,n.collapsedToStart())),this.observer.clear(),this.storeKeyDownState(this.keyDownEvent),this.observer.pollOnce())}}},{key:"renderSelectedContentBranchNode",value:function(){var e=this.model.getSelection();if(!(e instanceof k.LinearSelectionModel))return!1;var t=this.documentView.getBranchNodeFromOffset(e.getRange().start);return t instanceof P.ContentBranchViewNode&&t.renderContents()}},{key:"hideDropMarker",value:function(){if(this.lastDropMarkerElement){var e=this.lastDropMarkerElement;this.lastDropMarkerElement=null,e.classList.add("am-view-surface-dropMarker-hidden"),setTimeout((function(){return e.remove()}),200)}}},{key:"showDropMarker",value:function(e,t){var n=this,s=e.offsetLeft+t.rect.left,i=e.offsetTop+t.rect.top,r=t.rect.width,a=t.rect.height;if(this.lastDropMarkerElement&&this.lastDropTarget&&this.lastDropPosition){var o=this.lastDropTarget.offsetLeft+this.lastDropPosition.rect.left,l=this.lastDropTarget.offsetTop+this.lastDropPosition.rect.top,c=this.lastDropPosition.rect.width,u=this.lastDropPosition.rect.height;if(o===s&&l===i&&c===r&&u===a)return}this.hideDropMarker();var d=document.createElement("div");d.className="am-view-surface-dropMarker am-view-surface-dropMarker-hidden",d.style.left=s+"px",d.style.top=i+"px",d.style.width=r+"px",d.style.height=a+"px",this.highlightsElement.appendChild(d),this.lastDropMarkerElement=d,this.lastDropTarget=e,this.lastDropPosition=t,setTimeout((function(){d===n.lastDropMarkerElement&&d.classList.remove("am-view-surface-dropMarker-hidden")}))}},{key:"onModelSelect",value:function(){var e=this.model.getSelection();if(this.selection=null,this.contentBranchNodeChanged=!1,e instanceof _.NullSelectionModel&&this.removeCursorHolders(),e instanceof k.LinearSelectionModel){var t=this.findBlockSlug(e.getRange());t!==this.focusedBlockSlug&&(this.focusedBlockSlug&&(this.focusedBlockSlug.classList.remove("am-view-branchNode-blockSlug-focused"),this.focusedBlockSlug=null),t&&(t.classList.add("am-view-branchNode-blockSlug-focused"),this.focusedBlockSlug=t,this.preparePasteTargetForCopy()));var n=this.findFocusedNode(e.getRange());n!==this.focusedNode&&(this.focusedNode&&(this.focusedNode.setFocused(!1),this.focusedNode=null),n&&(n.setFocused(!0),this.focusedNode=n,this.dragging||(this.preparePasteTargetForCopy(),this.observer.clear())))}else e instanceof C.TableSelectionModel&&this.preparePasteTargetForCopy(),this.focusedNode&&this.focusedNode.setFocused(!1),this.focusedNode=null;this.isRenderingLocked()||e===this.newModelSelection||(this.showModelSelection(),this.cleanupUnicorns(!1)),this.observer.pollOnce(!1)}},{key:"onModelDocumentUpdate",value:function(){var e=this;this.contentBranchNodeChanged&&this.onModelSelect(),this.observer.pollOnce(!1),setTimeout((function(){return e.emit("position")}))}},{key:"onInsertionAnnotationsChange",value:function(){this.renderSelectedContentBranchNode()&&(this.showModelSelection(),this.observer.pollOnce(!1))}},{key:"onWindowResize",value:function(){this.emit("position")}},{key:"onDocumentSelectionChange",value:function(){this.observer.pollOnce()}},{key:"onDocumentFocusInOut",value:function(){this.onDocumentFocusChangeDebounced()}},{key:"onDocumentFocusChange",value:function(){var e=this,t=[this.documentNodeElement,this.pasteTargetElement,this.highlightsElement].some((function(t){return F.contains(t,e.nativeSelection.anchorNode)}))&&!F.closest(this.nativeSelection.anchorNode,".am-view-transcluded");this.deactivated?F.contains(this.documentNodeElement,this.nativeSelection.anchorNode)&&this.onDocumentFocus():t&&!this.focused?this.onDocumentFocus():!t&&this.focused&&this.onDocumentBlur()}},{key:"onDocumentMouseDown",value:function(e){var t=this;if(e.button===F.MouseButton.left&&(this.dragging=!0,document.addEventListener("mouseup",this.onDocumentMouseUp),setTimeout((function(){return t.afterDocumentMouseDown(e)})),e.target===this.documentNodeElement)){var n=null,s=this.documentView.documentNode,i=s.children[0],r=s.children[s.children.length-1];2===e.detail&&(!i||(!(i instanceof A.ParagraphViewNode)||i.getLength()>0)&&e.clientY<i.element.getBoundingClientRect().top)?n=s.getRange().start:(!(r instanceof A.ParagraphViewNode)||r.getLength()>0)&&e.clientY>r.element.getBoundingClientRect().bottom&&(n=s.getRange().end),null!==n&&(e.preventDefault(),this.model.getLinearFragment(new R.Range(n),!0,!0).insertContent([{type:"paragraph"},{type:"/paragraph"}]).adjustedLinearSelection(1,-1).select())}}},{key:"afterDocumentMouseDown",value:function(e){this.observer.pollOnce()}},{key:"onDocumentMouseUp",value:function(){document.removeEventListener("mouseup",this.onDocumentMouseUp),this.dragging=!1}},{key:"onDocumentFocus",value:function(){this.model.getSelection()instanceof _.NullSelectionModel&&this.model.selectFirstContentOffset(),this.eventSequencer.attach(this.element),this.focused=!0,this.activate(),this.element.classList.add("am-view-surface-focused"),this.emit("focus")}},{key:"onDocumentBlur",value:function(){this.eventSequencer.detatch(),this.observer.pollOnce(),this.observer.clear(),this.dragging=!1,this.focused=!1,this.focusedNode&&(this.focusedNode.setFocused(!1),this.focusedNode=null),this.model.setNullSelection(),this.element.classList.remove("am-view-surface-focused"),this.emit("blur")}},{key:"onDocumentKeyDown",value:function(e){var t=this,n=this.model.getSelection();if(!(n instanceof _.NullSelectionModel)){this.renderLock((function(){return t.observer.pollOnce()})),this.storeKeyDownState(e);var s=!1;if(this.ui.context.handleKeyboardEvent(e)||m.keyDownHandlerFactory.executeHandlersForKey(e.keyCode,n.getId(),this,e))s=!0;else{var i=new L.Trigger(e);(this.ui.executeTrigger(i)||this.isBlockedTrigger(i))&&(e.preventDefault(),s=!0)}s?this.observer.pollOnce():this.renderLock((function(){return t.observer.pollOnce()}))}}},{key:"onDocumentKeyUp",value:function(e){}},{key:"onDocumentKeyPress",value:function(e){0!==e.which&&0!==e.charCode&&(e.ctrlKey||e.altKey||e.metaKey||this.handleInsertion())}},{key:"onDocumentInput",value:function(e){var t=this;this.renderLock((function(){return t.observer.pollOnce()}))}},{key:"afterDocumentKeyDown",value:function(e){var t=this;if(e===this.keyDownEvent){var n=e.keyCode===F.Key.up||e.keyCode===F.Key.down||e.keyCode===F.Key.left||e.keyCode===F.Key.right,s=this.keyDownSelection;this.clearKeyDownState();var i=function(){return n&&F.compareDocumentOrder(t.nativeSelection.focusNode,t.nativeSelection.focusOffset,s.focusNode,s.focusOffset)||null};if((e.keyCode===F.Key.backspace||e.keyCode===F.Key.delete)&&this.nativeSelection.focusNode){var r=this.nativeSelection.focusNode.nodeType===Node.ELEMENT_NODE&&!this.nativeSelection.focusNode.classList.contains("am-view-branchNode-inlineSlug");if(r){this.renderLock((function(){return t.observer.pollOnce()}));var a=this.model.getSelection();if(a instanceof k.LinearSelectionModel){var o=a.getRange().end,l=this.documentView.getBranchNodeFromOffset(o);l&&l.model.hasSlugAtOffset(o)&&l.setupBlockSlugs()}}var c=new v.SelectionState(this.nativeSelection);if(this.nativeSelection.removeAllRanges(),this.showSelectionState(c),r)return}if(!(n&&!(this.model.getSelection()instanceof k.LinearSelectionModel)||n&&this.restoreActiveNodeSelection())){var u,d,h,p=this.nativeSelection.focusNode;if(p&&p.nodeType===Node.ELEMENT_NODE&&p.classList.contains("am-view-cursorHolder"))p.classList.contains("am-view-cursorHolder-after")?(u=-1,h=D.ViewNode.getViewNode(p.previousSibling)):(u=1,h=D.ViewNode.getViewNode(p.nextSibling)),this.removeCursorHolders();else if(n&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&s.isCollapsed&&this.nativeSelection.isCollapsed&&null!==(u=i())&&!(h=function(e,t,n){var s;if(s=e.nodeType===Node.TEXT_NODE?e:n>0&&t<e.childNodes.length?e.childNodes[t]:n<0&&t>0?e.childNodes[t-1]:e,F.isContentEditable(s))return null;var i=F.closest(s,".am-view-focusableNode");return i?D.ViewNode.getViewNode(i):null}(this.nativeSelection.focusNode,this.nativeSelection.focusOffset,u))){var f,m,b;try{f=$.getDataOffset(s.focusNode,s.focusOffset),b=(m=$.getDataOffset(this.nativeSelection.focusNode,this.nativeSelection.focusOffset))-f}catch(w){f=m=b=void 0}if(2===Math.abs(b)){var g=this.documentView.documentNode.getNodeFromOffset((f+m)/2);g.isFocusable()?(h=g,d=new R.Range(f,m)):h=void 0}}h&&(d=new R.Range(this.model.documentModel.getNearestCursorOffset(h.getOffset(),u>0?1:-1)),this.model.setLinearSelection(d)),void 0===u&&(u=i());var y=!e.shiftKey&&(e.keyCode===F.Key.left||e.keyCode===F.Key.right);this.cleanupUnicorns(y)?this.observer.pollOnce(!1):this.renderLock((function(){return t.observer.pollOnce()}))}}}},{key:"onDocumentDragStart",value:function(e){e.defaultPrevented||(F.setIframePointerEventsEnabled(!1),this.lastDropTarget=null,this.lastDropPosition=null,this.lastDropMarkerElement=null)}},{key:"onDocumentDragOver",value:function(e){if(!e.defaultPrevented){var t,n=!0;if(this.relocatingNode)n=this.relocatingNode.isContent(),t=this.relocatingNode.type;else{if(null===this.allowedFile){this.allowedFile=!1;for(var s=0,i=Object(r.default)(e.dataTransfer.items);s<i.length;s++){var a=i[s];if("file"===a.kind){var o=new U.DataTransferItemUi("file",a.type);if(this.ui.dataTransferHandlerFactory.getHandlerIdForItem(o)){this.allowedFile=!0;break}}}}this.allowedFile&&(n=!1,t="alienBlock")}if(!n){var l=function(e){for(;e.parent&&!e.parent.canHaveChildType(t);)e=e.parent;return e.parent?(e.parent.traverseUp((function(t){if(t.shouldIgnoreChildren())return e=null,!1})),e):null};e.preventDefault();var c,u,d=F.closest(e.target,".am-view-branchNode, .am-view-leafNode");if(d){var h,p=l(D.ViewNode.getViewNode(d));if(p){c=p.element;var f=p.getDropPositions();if(f){var m=F.getOffset(c),v=e.pageX-m.x,b=e.pageY-m.y;u=f.find((function(e){return v>=e.rect.left&&v<=e.rect.right&&b>=e.rect.top&&b<=e.rect.bottom}))}u||(h=e.pageY-F.getOffset(c).y>c.clientHeight/2?"autoBottom":"autoTop")}else{var g=this.getOffsetFromEventCoords(e);-1!==g&&(p=l(this.documentView.getBranchNodeFromOffset(g)))&&(c=p.element,h=e.pageY-F.getOffset(c).y>c.clientHeight/2?"autoBottom":"autoTop")}if(c){if(h){var y=0,w=0;if("autoBottom"===h){w+=c.offsetHeight;for(var _=c.nextElementSibling;_&&!_.classList.contains("am-view-branchNode")&&!_.classList.contains("am-view-leafNode");)_=_.nextElementSibling;if(_){var k=c.getBoundingClientRect();w+=(_.getBoundingClientRect().top-k.bottom)/2}}else if("autoTop"===h){for(var C=c.previousElementSibling;C&&!C.classList.contains("am-view-branchNode")&&!C.classList.contains("am-view-leafNode");)C=C.previousElementSibling;if(C){var x=c.getBoundingClientRect(),j=C.getBoundingClientRect();w-=(x.top-j.bottom)/2}}u={id:h,rect:{left:y=Math.round(y),top:(w=Math.round(w))-1,right:y+c.offsetWidth,bottom:w-1+c.offsetHeight,width:c.offsetWidth,height:2}}}}else c=this.lastDropTarget,u=this.lastDropPosition}c&&this.showDropMarker(c,u)}}}},{key:"onDocumentDragLeave",value:function(e){this.lastDropTarget&&(this.hideDropMarker(),this.lastDropPosition=null,this.lastDropTarget=null)}},{key:"onDocumentDrop",value:function(e){if(!e.defaultPrevented){e.preventDefault(),F.setIframePointerEventsEnabled(!0),this.hideDropMarker();var t=this.lastDropTarget,n=this.lastDropPosition,s=t&&D.ViewNode.getViewNode(t);if(!s||!s.handleDrop(this.relocatingNode,n)){var i,r;if(t&&n&&n.id.startsWith("auto"))i=s.getOuterRange(),r="autoTop"===n.id?i.start:i.end;else if(-1===(r=this.getOffsetFromEventCoords(e)))return;var a,o,l,c=this.model.getLinearFragment(new R.Range(r));try{a=e.dataTransfer.getData(q.mimeAmber)}catch(h){a=null}if(this.relocatingNode?o=this.relocatingNode.getOuterRange():a&&(l=w.SelectionModel.fromJson(this.model.documentModel,a))instanceof k.LinearSelectionModel&&(o=l.getRange()),o){var u=this.model.getLinearFragment(o),d=u.getData();u.removeContent(),c.insertContent(d)}else this.handleDataTransfer(e.dataTransfer,!1,c)}this.endRelocation()}}},{key:"onDocumentDragEnd",value:function(e){F.setIframePointerEventsEnabled(!0),this.hideDropMarker()}},{key:"preparePasteTargetForCopy",value:function(){this.pasteTargetElement.textContent=this.focusedNode?this.focusedNode.element.textContent.trim():$.snowman,F.selectElement(this.pasteTargetElement),this.pasteTargetElement.focus()}},{key:"onCut",value:function(e){var t=this,n=this.model.getSelection();n.isCollapsed()||(this.onCopy(e),setTimeout((function(){m.keyDownHandlerFactory.executeHandlersForKey(F.Key.backspace,n.getId(),t,new KeyboardEvent("keydown"))})))}},{key:"onCopy",value:function(e){var t=this.model.getSelection();if(!t.isCollapsed()){var n=this.model.documentModel.shallowCloneFromSelection(t);n.data.cloneElements(),this.clipboard={slice:n};var s=E.converter.getDomSubtreeFromModel(n,document.implementation.createDocument(null,"",null),!0),i=F.documentFragmentToXml(s),r=new x.DocumentModel(n.data,this.model.documentModel.domDocument);r.buildNodeTree();var a=r.toFormatPlaintext();e.preventDefault(),e.clipboardData.setData("text/plain",a),e.clipboardData.setData(q.mimeAmber,i)}}},{key:"onPaste",value:function(e){e.preventDefault();var t=this.model.getFragment(void 0,!0),n=this.model.getFragment();if(!n.isNull())if(this.handleDataTransfer(e.clipboardData,!0,t))e.preventDefault();else{var s=e.clipboardData.getData(q.mimeAmber),i=e.clipboardData.getData("text/html"),a=e.clipboardData.getData("text"),o=this.clipboard&&this.clipboard.slice;if(s){var l=E.converter.getModelFromDom(F.createXmlDocumentFromXml(s));t.insertDocument(l)}else if(i){var c=Object(H.documentToXml)((new z.HtmlDocumentFormat).convert(i)),u=E.converter.getModelFromDom(F.createXmlDocumentFromXml(c));t.insertDocument(u)}else if(a){var d=t.getSelection().getCoveringRange(),h=this.model.documentModel.getBranchNodeFromOffset(d.start),p=this.model.documentModel.getBranchNodeFromOffset(d.end);if("code"===h.getType()&&h===p)t.insertContent(Object(r.default)(a.replace(/\t/g,"    ")));else{var f=Object(H.documentToXml)((new V.MarkdownDocumentFormat).convert(a)),m=E.converter.getModelFromDom(F.createXmlDocumentFromXml(f));t.insertDocument(m)}}else if(o){o.data.cloneElements();try{var v=new S.LinearData(o.store,q.clone(o.getOriginalData()));t.insertContent(v.getData(),!0)}catch(g){var b=new S.LinearData(o.store,q.clone(o.getBalancedData()));t.insertContent(b.getData(),!0)}}n.getSelection()instanceof k.LinearSelectionModel&&t.collapsedToEnd().select()}}},{key:"handleDataTransfer",value:function(e,t,n){for(var s=[],i=0,a=Object(r.default)(e.items);i<a.length;i++){var o=a[i];"file"===o.kind&&s.push(U.DataTransferItemUi.newFromFileItem(o))}return this.handleDataTransferItems(s,t,n)}},{key:"handleDataTransferItems",value:function(e,t,n){var s=this,r=function(e){return W(s,void 0,void 0,i.a.mark((function t(){var s,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=n.collapsedToEnd(),t.next=3,e.getInsertableData();case 3:return r=t.sent,s.insertContent(r),t.next=7,e.onDidInsert(s);case 7:t.sent||s.collapsedToEnd().select();case 9:case"end":return t.stop()}}),t)})))},a=!0,o=!1,l=void 0;try{for(var c,u=e[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value,h=this.ui.dataTransferHandlerFactory.getHandlerIdForItem(d);h&&r(this.ui.dataTransferHandlerFactory.create(h,this.ui,d))}}catch(p){o=!0,l=p}finally{try{a||null==u.return||u.return()}finally{if(o)throw l}}return!1}},{key:"checkSequences",value:function(){var e=this.getSelection();if(e.isNativeCursor()){var t=!1,n=this.ui.sequenceRegistry.findMatching(this.ui,e.model.getCoveringRange().end),s=!0,i=!1,r=void 0;try{for(var a,o=n[Symbol.iterator]();!(s=(a=o.next()).done);s=!0){var l=a.value;t=l.sequence.execute(this.ui,l.range)||t}}catch(c){i=!0,r=c}finally{try{s||null==o.return||o.return()}finally{if(i)throw r}}t&&this.showModelSelection()}}},{key:"maybeBreakpoint",value:function(){var e=this.getSelection();if(e.isNativeCursor()){var t=e.model.getCoveringRange().end-1;this.model.documentModel.data.getWordRange(t).end===t&&this.model.breakpoint()}}},{key:"applyMarkdownShortcuts",value:function(){var e=this,t=this.model.getSelection();if(!(t instanceof k.LinearSelectionModel&&t.isCollapsed()))return!1;var n=t.getRange(),s=this.model.documentModel.getBranchNodeFromOffset(n.start);if(s instanceof I.ParagraphModelNode){var i=new R.Range(s.getOffset()+1,n.start);if("```"===this.model.documentModel.data.getText(!1,i).replace(/\s/," ")){for(var a,o=s,l=o.parent.children,c=l.indexOf(o),u=c-1;;){var d=l[u];if(!(d instanceof I.ParagraphModelNode))break;if("```"===this.model.documentModel.data.getText(!1,d.getRange())){a=d;break}u--}if(a){for(var h=[],p=u+1;p<c;p++){var f=this.model.documentModel.data.getText(!1,l[p].getRange());h.push.apply(h,Object(r.default)(f)),p!==c-1&&h.push("\n")}return this.model.getLinearFragment(new R.Range(a.getOuterRange().start,o.getOuterRange().end),!0).insertContent([{type:"code"}].concat(h,[{type:"/code"},{type:"paragraph"},{type:"/paragraph"}])).collapsedToEnd().adjustedLinearSelection(-1,-1).select(),!0}}}var m=new O.DataString(this.model.documentModel.data.getData()),v=function(e){return"_"===e?"*":e},b=function(e){var t=v(m.read(e));if(null===t)return null;if(!t.match(/[*`]/))return"";for(var n=t,s=0;s<2;s++){var i=v(m.read(e-1-s));if(i!==t)break;n+=i}return n},g=t.getRange().start-1,y=b(g);if(y)return!1;if(!(y=b(--g)))return!1;for(var w,_=null,C=g-y.length;(_=b(C))!==y;){if(null===_||_.endsWith(y))return!1;C--}switch(C-=y.length-1,y){case"*":w=["textStyle/italic"];break;case"**":w=["textStyle/bold"];break;case"***":w=["textStyle/italic","textStyle/bold"];break;case"`":w=["textStyle/code"]}var x=w.map((function(t){return e.model.documentModel.store.index(T.annotationModelFactory.create(t))})),S=new j.Transaction(this.model.documentModel);S.pushRetain(C),S.pushRemove(this.model.documentModel,C,new R.Range(C,C+y.length));var E=!0,D=!1,P=void 0;try{for(var A,N=x[Symbol.iterator]();!(E=(A=N.next()).done);E=!0){var M=A.value;S.pushStartAnnotating("set",M)}}catch(z){D=!0,P=z}finally{try{E||null==N.return||N.return()}finally{if(D)throw P}}S.pushRetain(g-C-2*y.length+1);var L=!0,F=!1,B=void 0;try{for(var q,$=x[Symbol.iterator]();!(L=(q=$.next()).done);L=!0){var U=q.value;S.pushStopAnnotating("set",U)}}catch(z){F=!0,B=z}finally{try{L||null==$.return||$.return()}finally{if(F)throw B}}return S.pushRemove(this.model.documentModel,g-y.length,new R.Range(g-y.length,g)),this.model.change([S]),!0}},{key:"getSelectedModels",value:function(){var e=this.model.getSelection();if(!(e instanceof k.LinearSelectionModel))return[];var t=this.model.getFragment().getSelectedModels();if(e.isCollapsed()){var n=this.model.getFragment(new k.LinearSelectionModel(this.model.documentModel,new R.Range(e.range.start,e.range.start+1)));t=Object(r.default)(new Set([].concat(Object(r.default)(t),Object(r.default)(n.getSelectedModels()))))}return t}},{key:"getSelectionContextPosition",value:function(){var e,t=this.getSelection().getSelectionBoundingRect();if(t){var n=this.getSelection().getSelectionStartAndEndRects();if(n){var s=(t.left+t.right)/2;e=n.end.right>s?{x:s,y:t.bottom}:{x:n.end.right,y:n.end.bottom}}}return{boundingRect:t,position:e}}},{key:"createSlug",value:function(e){var t=$.getSlugOffset(e),n=this.model.documentModel;this.changeModel([j.Transaction.fromInsertion(n,t,[{type:"paragraph"},{type:"/paragraph"}])],new k.LinearSelectionModel(n,new R.Range(t+1))),this.onModelSelect()}},{key:"selectAll",value:function(){var e=this.model.getSelection();if(e instanceof k.LinearSelectionModel){var t,n=this.activeNode;if(n)t=n.getRange().add(1,-1);else{var s=this.model.documentModel;t=new R.Range(s.getNearestCursorOffset(s.documentNode.getOuterRange().start,1),s.getNearestCursorOffset(s.documentNode.getOuterRange().end,-1))}this.model.setLinearSelection(t)}else if(e instanceof C.TableSelectionModel){var i=e.getTableNode().getMatrix();this.model.setSelection(new C.TableSelectionModel(e.documentModel,e.tableRange,0,0,i.getMaxColCount()-1,i.getRowCount()-1))}}},{key:"restoreActiveNodeSelection",value:function(){var e;return!(!(e=this.activeNode&&this.activeNode.getRange())||e.containsRange($.rangeFromSelection(this.nativeSelection))||(this.showModelSelection(),0))}},{key:"findAdjacentUneditableBranchNodeElement",value:function(e){var t=1===e,n=this.nativeSelection.focusNode&&F.closest(this.nativeSelection.focusNode,".am-view-branchNode, .am-view-leafNode, .am-view-surface-paste");if(!n||n.classList.contains("am-view-surface-paste"))return null;for(;;){for(;!(t?n.nextSibling:n.previousSibling);)if(!(n=n.parentNode))return null;for(n=t?n.nextSibling:n.previousSibling;;){if(D.ViewNode.getViewNode(n)instanceof P.ContentBranchViewNode||n.nodeType!==Node.ELEMENT_NODE)return null;if(n.classList.contains("am-view-focusableNode"))return n;if(!n.childNodes||0===n.childNodes.length)break;n=t?n.firstChild:n.lastChild}}}},{key:"updateCursorHolders",value:function(){var e,t,n=this.findAdjacentUneditableBranchNodeElement(-1),s=this.findAdjacentUneditableBranchNodeElement(1);this.removeCursorHolders(),n&&((e=document.importNode(this.constructor.cursorHolderTemplate,!0)).classList.add("am-view-cursorHolder-after","am-view-cursorHolder-debug"),n.parentNode.insertBefore(e,n.nextSibling)),s&&((t=document.importNode(this.constructor.cursorHolderTemplate,!0)).classList.add("am-view-cursorHolder-before","am-view-cursorHolder-debug"),s.parentNode.insertBefore(t,s)),this.cursorHolders={before:e,after:t}}},{key:"removeCursorHolders",value:function(){this.cursorHolders&&(this.cursorHolders.before&&this.cursorHolders.before.remove(),this.cursorHolders.after&&this.cursorHolders.after.remove(),this.cursorHolders=null)}}]),t}(h.ElementUi);Q.cursorHolderTemplate=function(){var e=document.createElement("img");e.className="am-view-cursorHolder-img";var t=document.createElement("div");return t.className="am-view-cursorHolder",t.contentEditable="true",t.appendChild(e),t}()},"./src/view/SurfaceViewObserver.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"SurfaceViewObserver",(function(){return a}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./src/view/RangeState.ts"),a=function(){function e(t){Object(s.default)(this,e),this.surface=t,this.rangeState=null,this.disabled=!1}return Object(i.default)(e,[{key:"detach",value:function(){this.surface=null,this.rangeState=null}},{key:"enable",value:function(){this.disabled=!1}},{key:"disable",value:function(){this.disabled=!0}},{key:"clear",value:function(){this.rangeState=null}},{key:"pollOnce",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.disabled){var t=this.rangeState,n=new r.RangeState(t,this.surface.documentView.documentNode);this.rangeState=n,e&&(n.contentChanged||n.branchNodeChanged||n.selectionChanged)&&this.surface.handleObservedChanges(t,n)}}},{key:"getRange",value:function(){return this.rangeState?this.rangeState.range:null}}]),e}()},"./src/view/TextState.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TextStateChunk",(function(){return g})),n.d(t,"TextState",(function(){return y})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.concat"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.slice"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/es.string.split"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./src/view/nodes/ViewNode.ts"),o=n("./src/model/DocumentModel.ts"),l=n("./src/model/Transaction.ts"),c=n("./src/model/AnnotationSet.ts"),u=n("./src/model/annotations/AnnotationModel.ts"),d=n("./src/view/annotations/AnnotationView.ts"),h=n("./src/model/ModelRegistry.ts"),p=n("./src/model/AnnotationModelFactory.ts"),f=n("./src/model/Converter.ts"),m=n("./src/Range.ts"),v=n("./src/util.ts"),b=n("./src/view/viewUtil.ts"),g=function(){function e(t,n,s){Object(i.default)(this,e),this.text=t,this.elements=n,this.type=s}return Object(r.default)(e,[{key:"hasEqualElements",value:function(t){if(this.elements===t.elements)return!0;if(this.elements.length!==t.elements.length)return!1;for(var n=0;n<this.elements.length;n++)if(!e.compareElements(this.elements[n],t.elements[n]))return!1;return!0}},{key:"isEqual",value:function(e){return this.text===e.text&&this.type===e.type&&this.hasEqualElements(e)}}],[{key:"compareElements",value:function(e,t){return e===t||e.nodeName===t.nodeName||e.getAttribute("class")===t.getAttribute("class")||e.getAttribute("href")===t.getAttribute("href")}}]),e}(),y=function(){function e(t){Object(i.default)(this,e),this.chunks=e.getChunks(t)}return Object(r.default)(e,[{key:"isEqual",value:function(e){if(this===e)return!0;if(!e||this.chunks.length!==e.chunks.length)return!1;for(var t=0;t<this.chunks.length;t++)if(!this.chunks[t].isEqual(e.chunks[t]))return!1;return!0}},{key:"getChangeTransaction",value:function(e,t,n,i){var r=e.chunks,a=this.chunks,b=t.data,y=function(e,t,n){for(var s=0,i=0;i<e.length;i++){var r=void 0;for(r=0;r<t.length&&!n(e[i],t[r]);r++);r===t.length&&s++}return s},w=v.countEdgeMatches(r,a,(function(e,t){return e.isEqual(t)}));if(!w)return null;var _=0,k=0;if(w.start<Math.min(r.length,a.length)){if(r[w.start].hasEqualElements(a[w.start])){var C=r[w.start],x=a[w.start],j=Math.min(C.text.length,x.text.length);for(_=0;_<j&&C.text[_]===x.text[_];_++);}if(w.end<Math.min(r.length,a.length)&&r[r.length-1-w.end].hasEqualElements(a[a.length-1-w.end])){var O=r[r.length-1-w.end],S=a[a.length-1-w.end],E=Math.min(O.text.length-(w.start+w.end===r.length-1?_:0),S.text.length-(w.start+w.end===a.length-1?_:0));for(k=0;k<E&&O.text[O.text.length-1-k]===S.text[S.text.length-1-k];k++);}}for(var T=n+1,I=0;I<w.start;I++)T+=r[I].text.length;for(var D=0,P=w.start;P<r.length-w.end;P++)D+=r[P].text.length;for(var A=new m.Range(T+_,T+D-k),N=[],R=a.length-w.end,M=w.start;M<R;M++){var L=a[M];if("unicorn"!==L.type){var F=L.text.split("");if(M===w.start&&(F=F.slice(_)),M===R-1&&(F=F.slice(0,F.length-k)),0!==F.length){var B=void 0,q=void 0,$=void 0,U=void 0;0===w.start?(q=0,U=T):U=T-r[q=w.start-1].text.length,$=0===w.end?r.length:r.length-w.end+1;for(var z=U,V=q;V<$;V++){var H=r[V];if(H.hasEqualElements(L)){if("unicorn"===H.type){if(!i)throw new Error("No unicorn annotations");B=i;break}B=b.getInsertionAnnotationsFromRange(new m.Range(z),!0);break}z+=H.text.length}if(!B){for(var W=L.elements.length,Q=void 0,K=U,Y=q;Y<$;Y++){var G=r[Y],X=y(L.elements,G.elements,g.compareElements);if(X<W&&(W=X,Q=K,0===X))break;K+=G.text.length}var J=void 0;J=void 0===Q?new c.AnnotationSet(b.getStore()):b.getInsertionAnnotationsFromRange(new m.Range(Q),!0),B=new c.AnnotationSet(b.getStore());var Z=!0,ee=!1,te=void 0;try{for(var ne,se=L.elements[Symbol.iterator]();!(Z=(ne=se.next()).done);Z=!0){var ie=ne.value,re=d.AnnotationView.getAnnotationView(ie),ae=void 0;if(re)ae=re.model;else{var oe=h.modelRegistry.lookup(h.modelRegistry.matchElement(ie));if(!((ae=p.annotationModelFactory.createFromElement(f.converter.createDataElements(oe,[ie])[0]))instanceof u.AnnotationModel))continue;var le=J.getComparable(ae);if(le)ae=le;else if(!ae.constructor.inferFromView)continue}B.add(ae)}}catch(ce){ee=!0,te=ce}finally{try{Z||null==se.return||se.return()}finally{if(ee)throw te}}}o.DocumentModel.addAnnotationsToData(F,B),N.push.apply(N,Object(s.default)(F))}}}return l.Transaction.fromReplacement(t,A,N)}}],[{key:"getChunks",value:function(e){for(var t=e,n=[[]],i=0,r=[],o=[],l=function(e,t){o.length&&o[o.length-1].elements===n[i]&&o[o.length-1].type===t?o[o.length-1].text+=e:o.push(new g(e,n[i],t))};;){if(t.nodeType===Node.TEXT_NODE)l(t.nodeValue,"text");else if(t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("am-view-branchNode-blockSlug")||t.classList.contains("am-view-cursorHolder"));else if(t.classList.contains("am-view-leafNode")){var c=a.ViewNode.getViewNode(t);c&&t===c.element&&l(v.repeatString(b.snowman,c.getOuterLength()),"text")}else if(t.classList.contains("am-view-unicorn"))l("","unicorn");else if(t.firstChild){b.isAnnotationElement(t)&&(n.push([].concat(Object(s.default)(n[i]),[t])),r.push(t),i++),t=t.firstChild;continue}for(;t!==e&&(t===r[r.length-1]&&(r.pop(),n.pop(),i--),!t.nextSibling);)t=t.parentNode;if(t===e)break;t=t.nextSibling}return o}}]),e}()},"./src/view/View.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"View",(function(){return h}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./src/ui/ElementUi.ts"),u=n("./src/EventEmitter.ts"),d=n("./src/util.ts"),h=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.default)(this,t),(n=Object(r.default)(this,Object(a.default)(t).call(this,i))).viewDisposables=new u.CompositeDisposable,n.model=e,n.live=!1,n.createElement(i),n.onSetup=n.onSetup.bind(Object(o.default)(n)),n.onTeardown=n.onTeardown.bind(Object(o.default)(n)),n.viewDisposables.add(n.on("setup",n.onSetup),n.on("teardown",n.onTeardown)),n}return Object(l.default)(t,e),Object(i.default)(t,[{key:"setLive",value:function(e){this.live=e,e?this.emit("setup"):this.emit("teardown")}},{key:"destroy",value:function(){this.viewDisposables.dispose()}},{key:"isInContentEditable",value:function(){return this.element.parentNode.isContentEditable}},{key:"onSetup",value:function(){this.element&&t.setView(this.element,this)}},{key:"onTeardown",value:function(){t.deleteView(this.element)}}],[{key:"setView",value:function(e,t){d.setData(e,"view",t)}},{key:"getView",value:function(e){return d.getData(e,"view")}},{key:"deleteView",value:function(e){return d.deleteData(e,"view")}}]),t}(c.ElementUi)},"./src/view/ViewNodeFactory.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ViewNodeFactory",(function(){return o})),n.d(t,"viewNodeFactory",(function(){return l}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=function(e){function t(){return Object(s.default)(this,t),Object(i.default)(this,Object(r.default)(t).apply(this,arguments))}return Object(a.default)(t,e),t}(n("./src/CtorFactory.ts").CtorFactory),l=new o},"./src/view/annotations/AnnotationView.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"AnnotationView",(function(){return d}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./src/util.ts"),u=n("./src/view/View.ts"),d=function(e){function t(e,n){var i,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(s.default)(this,t),(i=Object(r.default)(this,Object(a.default)(t).call(this,e,l))).parentNode=n,c.setData(i.element,"view",Object(o.default)(i)),i}return Object(l.default)(t,e),Object(i.default)(t,[{key:"attachContents",value:function(){}},{key:"appendTo",value:function(e){e.appendChild(this.element)}},{key:"getContentContainer",value:function(){return this.element}}],[{key:"getDescription",value:function(){return""}},{key:"getAnnotationView",value:function(e){return u.View.getView(e)}}]),t}(u.View);d.tagName="span"},"./src/view/annotations/BoldAnnotationView.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"BoldAnnotationView",(function(){return d})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=n("./src/view/annotations/TextStyleAnnotationView.ts"),c=n("./src/view/AnnotationViewFactory.ts"),u=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(e,n){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(s.default)(this,t),(a=Object(i.default)(this,Object(r.default)(t).call(this,e,n,o))).element.classList.add("am-view-boldAnnotation"),a}return Object(a.default)(t,e),t}(l.TextStyleAnnotationView);d.id="textStyle/bold",d.tagName="b",d=u([c.annotationViewFactory.register],d)},"./src/view/annotations/CodeAnnotationView.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"CodeAnnotationView",(function(){return d})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=n("./src/view/annotations/TextStyleAnnotationView.ts"),c=n("./src/view/AnnotationViewFactory.ts"),u=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(e,n){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(s.default)(this,t),(a=Object(i.default)(this,Object(r.default)(t).call(this,e,n,o))).element.classList.add("am-view-codeAnnotation"),a.element.spellcheck=!1,a}return Object(a.default)(t,e),t}(l.TextStyleAnnotationView);d.id="textStyle/code",d.tagName="code",d=u([c.annotationViewFactory.register],d)},"./src/view/annotations/ItalicAnnotationView.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ItalicAnnotationView",(function(){return d})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=n("./src/view/annotations/TextStyleAnnotationView.ts"),c=n("./src/view/AnnotationViewFactory.ts"),u=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(e,n){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(s.default)(this,t),(a=Object(i.default)(this,Object(r.default)(t).call(this,e,n,o))).element.classList.add("am-view-italicAnnotation"),a}return Object(a.default)(t,e),t}(l.TextStyleAnnotationView);d.id="textStyle/italic",d.tagName="i",d=u([c.annotationViewFactory.register],d)},"./src/view/annotations/LinkAnnotationView.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"LinkAnnotationView",(function(){return f})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/view/annotations/AnnotationView.ts"),d=n("./src/view/AnnotationViewFactory.ts"),h=n("./src/util.ts"),p=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},f=function(e){function t(e,n){var i,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(s.default)(this,t),(i=Object(r.default)(this,Object(a.default)(t).call(this,e,n,l))).contentFragment=document.createDocumentFragment(),i.anchorElement=document.createElement("a"),i.anchorElement.className="am-view-linkAnnotation";var c=i.model.element.attributes.href;return i.anchorElement.href=h.isEmail(c)?"mailto:"+c:h.resolveUrl(c,document),i.anchorElement.title=i.anchorElement.href,u.AnnotationView.setView(i.anchorElement,Object(o.default)(i)),i}return Object(l.default)(t,e),Object(i.default)(t,[{key:"attachContents",value:function(){this.anchorElement.appendChild(this.contentFragment)}},{key:"appendTo",value:function(e){e.appendChild(this.anchorElement)}},{key:"getContentContainer",value:function(){return this.contentFragment}}]),t}(u.AnnotationView);f.tagName="span",f.id="link",f=p([d.annotationViewFactory.register],f)},"./src/view/annotations/SpanAnnotationView.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"SpanAnnotationView",(function(){return d})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=n("./src/view/annotations/AnnotationView.ts"),c=n("./src/view/AnnotationViewFactory.ts"),u=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(e,n){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(s.default)(this,t),(a=Object(i.default)(this,Object(r.default)(t).call(this,e,n,o))).element.classList.add("am-view-spanAnnotation"),a}return Object(a.default)(t,e),t}(l.AnnotationView);d.id="span",d.tagName="span",d=u([c.annotationViewFactory.register],d)},"./src/view/annotations/StrikethroughAnnotationView.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"StrikethroughAnnotationView",(function(){return d})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=n("./src/view/annotations/TextStyleAnnotationView.ts"),c=n("./src/view/AnnotationViewFactory.ts"),u=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(e,n){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(s.default)(this,t),(a=Object(i.default)(this,Object(r.default)(t).call(this,e,n,o))).element.classList.add("am-view-strikethroughAnnotation"),a}return Object(a.default)(t,e),t}(l.TextStyleAnnotationView);d.id="textStyle/strikethrough",d.tagName="s",d=u([c.annotationViewFactory.register],d)},"./src/view/annotations/SubscriptAnnotationView.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"SubscriptAnnotationView",(function(){return d})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=n("./src/view/annotations/TextStyleAnnotationView.ts"),c=n("./src/view/AnnotationViewFactory.ts"),u=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(e,n){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(s.default)(this,t),(a=Object(i.default)(this,Object(r.default)(t).call(this,e,n,o))).element.classList.add("am-view-subscriptAnnotation"),a}return Object(a.default)(t,e),t}(l.TextStyleAnnotationView);d.id="textStyle/subscript",d.tagName="sub",d=u([c.annotationViewFactory.register],d)},"./src/view/annotations/SuperscriptAnnotationView.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"SuperscriptAnnotationView",(function(){return d})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=n("./src/view/annotations/TextStyleAnnotationView.ts"),c=n("./src/view/AnnotationViewFactory.ts"),u=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(e,n){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(s.default)(this,t),(a=Object(i.default)(this,Object(r.default)(t).call(this,e,n,o))).element.classList.add("am-view-superscriptAnnotation"),a}return Object(a.default)(t,e),t}(l.TextStyleAnnotationView);d.id="textStyle/superscript",d.tagName="sup",d=u([c.annotationViewFactory.register],d)},"./src/view/annotations/TextStyleAnnotationView.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TextStyleAnnotationView",(function(){return o}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=function(e){function t(e,n){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(s.default)(this,t),(a=Object(i.default)(this,Object(r.default)(t).call(this,e,n,o))).element.classList.add("am-view-textStyleAnnotation"),a}return Object(a.default)(t,e),t}(n("./src/view/annotations/AnnotationView.ts").AnnotationView);o.id="textStyle"},"./src/view/annotations/UnderlineAnnotationView.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"UnderlineAnnotationView",(function(){return d})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=n("./src/view/annotations/TextStyleAnnotationView.ts"),c=n("./src/view/AnnotationViewFactory.ts"),u=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(e,n){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(s.default)(this,t),(a=Object(i.default)(this,Object(r.default)(t).call(this,e,n,o))).element.classList.add("am-view-underlineAnnotation"),a}return Object(a.default)(t,e),t}(l.TextStyleAnnotationView);d.id="textStyle/underline",d.tagName="u",d=u([c.annotationViewFactory.register],d)},"./src/view/components/FileViewNodeComponent.vue":function(e,t,n){"use strict";n.r(t);var s=n("./src/view/components/FileViewNodeComponent.vue?vue&type=template&id=0f473c30&"),i=n("./src/view/components/FileViewNodeComponent.vue?vue&type=script&lang=js&"),r=(n("./src/view/components/FileViewNodeComponent.vue?vue&type=style&index=0&lang=scss&"),n("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),a=Object(r.default)(i.default,s.render,s.staticRenderFns,!1,null,null,null);t.default=a.exports},"./src/view/components/FileViewNodeComponent.vue?vue&type=script&lang=js&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/view/components/FileViewNodeComponent.vue?vue&type=script&lang=js&");t.default=s.default},"./src/view/components/FileViewNodeComponent.vue?vue&type=style&index=0&lang=scss&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js!./node_modules/vue-loader/lib/index.js?!./src/view/components/FileViewNodeComponent.vue?vue&type=style&index=0&lang=scss&"),i=n.n(s);for(var r in s)"default"!==r&&function(e){n.d(t,e,(function(){return s[e]}))}(r);t.default=i.a},"./src/view/components/FileViewNodeComponent.vue?vue&type=template&id=0f473c30&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/view/components/FileViewNodeComponent.vue?vue&type=template&id=0f473c30&");n.d(t,"render",(function(){return s.render})),n.d(t,"staticRenderFns",(function(){return s.staticRenderFns}))},"./src/view/components/GeneralVideoEmbed.vue":function(e,t,n){"use strict";n.r(t);var s=n("./src/view/components/GeneralVideoEmbed.vue?vue&type=template&id=7c70c45d&"),i=n("./src/view/components/GeneralVideoEmbed.vue?vue&type=script&lang=js&"),r=n("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),a=Object(r.default)(i.default,s.render,s.staticRenderFns,!1,null,null,null);t.default=a.exports},"./src/view/components/GeneralVideoEmbed.vue?vue&type=script&lang=js&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/view/components/GeneralVideoEmbed.vue?vue&type=script&lang=js&");t.default=s.default},"./src/view/components/GeneralVideoEmbed.vue?vue&type=template&id=7c70c45d&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/view/components/GeneralVideoEmbed.vue?vue&type=template&id=7c70c45d&");n.d(t,"render",(function(){return s.render})),n.d(t,"staticRenderFns",(function(){return s.staticRenderFns}))},"./src/view/components/ImageViewNodeComponent.vue":function(e,t,n){"use strict";n.r(t);var s=n("./src/view/components/ImageViewNodeComponent.vue?vue&type=template&id=1bc49446&"),i=n("./src/view/components/ImageViewNodeComponent.vue?vue&type=script&lang=js&"),r=(n("./src/view/components/ImageViewNodeComponent.vue?vue&type=style&index=0&lang=scss&"),n("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),a=Object(r.default)(i.default,s.render,s.staticRenderFns,!1,null,null,null);t.default=a.exports},"./src/view/components/ImageViewNodeComponent.vue?vue&type=script&lang=js&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/view/components/ImageViewNodeComponent.vue?vue&type=script&lang=js&");t.default=s.default},"./src/view/components/ImageViewNodeComponent.vue?vue&type=style&index=0&lang=scss&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js!./node_modules/vue-loader/lib/index.js?!./src/view/components/ImageViewNodeComponent.vue?vue&type=style&index=0&lang=scss&"),i=n.n(s);for(var r in s)"default"!==r&&function(e){n.d(t,e,(function(){return s[e]}))}(r);t.default=i.a},"./src/view/components/ImageViewNodeComponent.vue?vue&type=template&id=1bc49446&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/view/components/ImageViewNodeComponent.vue?vue&type=template&id=1bc49446&");n.d(t,"render",(function(){return s.render})),n.d(t,"staticRenderFns",(function(){return s.staticRenderFns}))},"./src/view/components/VideoEmbed.vue":function(e,t,n){"use strict";n.r(t);var s=n("./src/view/components/VideoEmbed.vue?vue&type=template&id=f207c97e&"),i=n("./src/view/components/VideoEmbed.vue?vue&type=script&lang=js&"),r=n("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),a=Object(r.default)(i.default,s.render,s.staticRenderFns,!1,null,null,null);t.default=a.exports},"./src/view/components/VideoEmbed.vue?vue&type=script&lang=js&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/view/components/VideoEmbed.vue?vue&type=script&lang=js&");t.default=s.default},"./src/view/components/VideoEmbed.vue?vue&type=template&id=f207c97e&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/view/components/VideoEmbed.vue?vue&type=template&id=f207c97e&");n.d(t,"render",(function(){return s.render})),n.d(t,"staticRenderFns",(function(){return s.staticRenderFns}))},"./src/view/components/VideoViewNodeComponent.vue":function(e,t,n){"use strict";n.r(t);var s=n("./src/view/components/VideoViewNodeComponent.vue?vue&type=template&id=d97f4b44&"),i=n("./src/view/components/VideoViewNodeComponent.vue?vue&type=script&lang=js&"),r=n("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),a=Object(r.default)(i.default,s.render,s.staticRenderFns,!1,null,null,null);t.default=a.exports},"./src/view/components/VideoViewNodeComponent.vue?vue&type=script&lang=js&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/view/components/VideoViewNodeComponent.vue?vue&type=script&lang=js&");t.default=s.default},"./src/view/components/VideoViewNodeComponent.vue?vue&type=template&id=d97f4b44&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/view/components/VideoViewNodeComponent.vue?vue&type=template&id=d97f4b44&");n.d(t,"render",(function(){return s.render})),n.d(t,"staticRenderFns",(function(){return s.staticRenderFns}))},"./src/view/components/VimeoVideoEmbed.vue":function(e,t,n){"use strict";n.r(t);var s=n("./src/view/components/VimeoVideoEmbed.vue?vue&type=template&id=21fc42e2&"),i=n("./src/view/components/VimeoVideoEmbed.vue?vue&type=script&lang=js&"),r=n("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),a=Object(r.default)(i.default,s.render,s.staticRenderFns,!1,null,null,null);t.default=a.exports},"./src/view/components/VimeoVideoEmbed.vue?vue&type=script&lang=js&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/view/components/VimeoVideoEmbed.vue?vue&type=script&lang=js&");t.default=s.default},"./src/view/components/VimeoVideoEmbed.vue?vue&type=template&id=21fc42e2&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/view/components/VimeoVideoEmbed.vue?vue&type=template&id=21fc42e2&");n.d(t,"render",(function(){return s.render})),n.d(t,"staticRenderFns",(function(){return s.staticRenderFns}))},"./src/view/components/YoutubeVideoEmbed.vue":function(e,t,n){"use strict";n.r(t);var s=n("./src/view/components/YoutubeVideoEmbed.vue?vue&type=template&id=a6d672b0&"),i=n("./src/view/components/YoutubeVideoEmbed.vue?vue&type=script&lang=js&"),r=n("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),a=Object(r.default)(i.default,s.render,s.staticRenderFns,!1,null,null,null);t.default=a.exports},"./src/view/components/YoutubeVideoEmbed.vue?vue&type=script&lang=js&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./src/view/components/YoutubeVideoEmbed.vue?vue&type=script&lang=js&");t.default=s.default},"./src/view/components/YoutubeVideoEmbed.vue?vue&type=template&id=a6d672b0&":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./src/view/components/YoutubeVideoEmbed.vue?vue&type=template&id=a6d672b0&");n.d(t,"render",(function(){return s.render})),n.d(t,"staticRenderFns",(function(){return s.staticRenderFns}))},"./src/view/keydownhandlers/KeyDownHandler.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"KeyDownHandler",(function(){return i}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=function e(){Object(s.default)(this,e)}},"./src/view/keydownhandlers/LinearArrowKeyDownHandler.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"LinearArrowKeyDownHandler",(function(){return m})),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),c=n("./src/view/keydownhandlers/KeyDownHandler.ts"),u=n("./src/view/KeyDownHandlerFactory.ts"),d=n("./src/view/nodes/ViewNode.ts"),h=n("./src/Range.ts"),p=n("./src/domUtil.ts"),f=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},m=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(o.default)(t,e),Object(i.default)(t,null,[{key:"execute",value:function(e,t){var n=e.model.getSelection().getRange();if(t.keyCode===p.Key.right){var s=e.model.documentModel.data,i=e.model.documentModel.getBranchNodeFromOffset(n.start),r=e.model.documentModel.documentNode.getNodeFromOffset(n.start+1);return!!(n.isCollapsed()&&s.getAnnotationsAtOffset(n.start-1).containsAnnotationWithId("textStyle/code")&&(n.start===i.getRange().end||r&&"break"===r.type||i.hasSignificantWhitespace()&&"\n"===s.getCharacterData(n.start+1)))&&(e.model.getFragment().insertContent([" "]),!0)}var a,o,l,c=t.keyCode===p.Key.up||t.keyCode==p.Key.down;if(e.observer.pollOnce(),e.focusedNode){if(a=t.keyCode===p.Key.down||t.keyCode===p.Key.right?1:-1,!e.focusedNode.isContent()){var u=1===a?e.focusedNode.getOuterRange().end:e.focusedNode.getOuterRange().start,f=e.model.documentModel.getNearestFocusableNode(u,a,a*(1/0));return f?e.model.setLinearSelection(f.getOuterRange()):u===e.model.documentModel.getNearestCursorOffset(u,a)&&e.model.getLinearFragment(new h.Range(u),!0).insertContent([{type:"paragraph"},{type:"/paragraph"}]).adjustedLinearSelection(1,-1).select(),t.preventDefault(),!0}if(t.shiftKey)+(-1===a)^+n.isBackwards()&&(n=n.flipped()),e.model.setLinearSelection(new h.Range(n.to));else if(n=new h.Range(1===a?n.end:n.start),e.model.setLinearSelection(n),!c)return t.preventDefault(),!0}if(t.shiftKey&&!e.nativeSelection.extend&&n.isBackwards?(o=e.nativeSelection.anchorNode,l=e.nativeSelection.anchorOffset):t.shiftKey&&!n.isCollapsed()&&c&&(o=e.nativeSelection.focusNode,l=e.nativeSelection.focusOffset),o){var m=document.createRange();m.setStart(o,l),m.setEnd(o,l),e.nativeSelection.removeAllRanges(),e.nativeSelection.addRange(m)}var v=e.nativeSelection.focusNode,b=e.nativeSelection.focusOffset;return e.eventSequencer.afterOnce("keydown",(function(){var s,i=e.nativeSelection.focusNode&&d.ViewNode.getViewNode(p.closest(e.nativeSelection.focusNode,".am-view-leafNode, .am-view-branchNode"));i&&(i.isFocusable()?s=(c?t.keyCode===p.Key.down?1:-1:p.compareDocumentOrder(e.nativeSelection.focusNode,e.nativeSelection.focusOffset,v,b))>0?i.getOuterRange():i.getOuterRange().flipped():(e.observer.pollOnce(!1),s=new h.Range(e.observer.getRange().to)),t.shiftKey&&(s=new h.Range(n.from,s.to),e.model.setLinearSelection(s)),e.observer.pollOnce())})),!0}}]),t}(c.KeyDownHandler);m.id="linearArrow",m.keys=[p.Key.up,p.Key.down,p.Key.right],m.supportedSelections=["linear"],m=f([u.keyDownHandlerFactory.register],m)},"./src/view/keydownhandlers/LinearDeleteKeyDownHandler.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"LinearDeleteKeyDownHandler",(function(){return b})),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),c=n("./src/view/keydownhandlers/KeyDownHandler.ts"),u=n("./src/view/KeyDownHandlerFactory.ts"),d=n("./src/ui/CommandRegistry.ts"),h=n("./src/domUtil.ts"),p=n("./src/Range.ts"),f=n("./src/platform.ts"),m=n("./src/view/viewUtil.ts"),v=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},b=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(o.default)(t,e),Object(i.default)(t,null,[{key:"execute",value:function(e,t){var n=t.keyCode===h.Key.delete?1:-1,s=t.altKey||t.ctrlKey?"word":"character",i=e.model.getSelection().getRange(),r=e.model.documentModel,a=r.data,o=document.getSelection();if(1===n&&t.shiftKey&&"mac"===f.platform)return!1;if(i.isCollapsed()&&!t.ctrlKey){if(-1===n){var l=e.model.documentModel.getBranchNodeFromOffset(i.start),c=e.ui.commandRegistry.lookup("unindent");if(l.getRange().start===i.start&&c.execute(e.ui))return t.preventDefault(),!0}var u=m.adjacentDomPosition({node:o.focusNode,offset:o.focusOffset},n);if(u.steps[u.steps.length-1].node.nodeType===Node.TEXT_NODE)return e.eventSequencer.afterOnce("keydown",(function(){return e.observer.pollOnce()})),!0;if(-1===n&&!a.isElementData(i.start-1)||1===n&&!a.isElementData(i.start))return e.eventSequencer.afterOnce("keydown",(function(){return e.observer.pollOnce()})),!0}if(i.isCollapsed()){var v=(i=r.getRelativeRange(i,n,s,!0,void 0,!1)).start,b=v,g=r.documentNode.getLength();if(b<g-1){for(;b<g-1&&a.isCloseElementData(b);)b++;if(n*(b-v)>=0){var y=r.documentNode.getNodeFromOffset(b+1);if(y.isFocusable()){var w=r.documentNode.getNodeFromOffset(i.from);return w.canContainContent()&&!w.getLength()&&e.model.getLinearFragment(w.getOuterRange(),!0).removeContent(),e.model.setLinearSelection(y.getOuterRange()),t.preventDefault(),!0}}"listItem"===r.data.getTypeAtOffset(i.start+1)&&"list"===r.data.getTypeAtOffset(i.end+1)&&(i=new p.Range(i.start+2,i.end+2))}if(i.isCollapsed()){var _=e.model.documentModel.getBranchNodeFromOffset(i.start);return"paragraph"!==_.type&&_.getRange().start===i.start?(d.commandRegistry.lookup("paragraph").execute(e.ui),t.preventDefault(),!0):(t.preventDefault(),!0)}}return e.model.getLinearFragment(i,!0).delete(n).select(),e.focus(),e.observer.clear(),t.preventDefault(),!0}}]),t}(c.KeyDownHandler);b.id="linearDelete",b.keys=[h.Key.backspace,h.Key.delete],b.supportedSelections=["linear"],b=v([u.keyDownHandlerFactory.register],b)},"./src/view/keydownhandlers/LinearEnterKeyDownHandler.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"LinearEnterKeyDownHandler",(function(){return _})),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.splice"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.ends-with"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/view/keydownhandlers/KeyDownHandler.ts"),d=n("./src/view/keydownhandlers/TableArrowKeyDownHandler.ts"),h=n("./src/view/nodes/TableViewNode.ts"),p=n("./src/view/KeyDownHandlerFactory.ts"),f=n("./src/ui/CommandRegistry.ts"),m=n("./src/model/Transaction.ts"),v=n("./src/model/selections/LinearSelectionModel.ts"),b=n("./src/model/nodes/CodeModelNode.ts"),g=n("./src/Range.ts"),y=n("./src/domUtil.ts"),w=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},_=function(e){function t(){return Object(i.default)(this,t),Object(a.default)(this,Object(o.default)(t).apply(this,arguments))}return Object(l.default)(t,e),Object(r.default)(t,null,[{key:"execute",value:function(e,t){if(t.preventDefault(),e.getFocusedNode())return!0;var n=e.activeNode&&e.activeNode.traverseUp((function(e){return!(e instanceof h.TableViewNode)}));if(n)return t.preventDefault(),t.stopPropagation(),n.setEditing(!1),d.TableArrowKeyDownHandler.moveTableSelection(e,1,0),!0;var i=e.model.documentModel,r=e.model.getSelection().getRange();if(!r.isCollapsed()){var a=m.Transaction.fromRemoval(i,r);r=a.translateRange(r),e.changeModel([a],new v.LinearSelectionModel(i,r))}var o=e.documentView.getBranchNodeFromOffset(r.from);if(!o)throw new Error("No branch node at selection");var l=o.model,c=l.getRange(),u=r.from;if("paragraph"===l.type&&"listItem"===l.parent.type&&c.isCollapsed())return f.commandRegistry.lookup(l.parent.parent.element.attributes.style).execute(e.ui),!0;var p,y,w=!0,_=[{type:"paragraph"},{type:"/paragraph"}],k=u===c.start,C=u===c.end||"code"===l.type&&u===c.end-1&&"\n"===i.data.getCharacterData(c.end-1);if("paragraph"!==l.type&&(k||C)&&("code"===l.type&&t.shiftKey||"code"!==l.type&&!t.shiftKey)){if(k){var x=l.getOuterRange().start;y=m.Transaction.fromInsertion(i,l.getOuterRange().start,_),p=x+1}else{var j=l.getOuterRange().end;y=m.Transaction.fromInsertion(i,j,_),p=j+1}w=!1}else if(l.hasSignificantWhitespace()){var O="\n";if(l instanceof b.CodeModelNode){for(var S=u;i.data.isContentOffset(S-1)&&"\n"!==i.data.getCharacterData(S-1);)S--;for(;" "===i.data.getCharacterData(S);)O+=" ",S++}u===c.end&&"\n"!==i.data.getCharacterData(u-1)&&O.endsWith("\n")&&(O+="\n"),y=m.Transaction.fromInsertion(i,u,Object(s.default)(O)),p=u+O.length}else if(t.shiftKey)y=m.Transaction.fromInsertion(i,u,[{type:"break"},{type:"/break"}]);else if(!o.splitOnEnter()){var E,T=!1;i.hasSlugAtOffset(r.from)?T=!0:-1===(E=i.data.getNearestContentOffset(u,-1))&&(T=!0),T?y=m.Transaction.fromInsertion(i,u,_):(u=E,o=e.documentView.getBranchNodeFromOffset(u),y=void 0)}if(!y){var I=[];o.traverseUp((function(e){if(!e.splitOnEnter())return!1;var n=e.model.getClonedElement();return I.splice(I.length/2,0,{type:"/"+e.type},n),!t.shiftKey})),y=m.Transaction.fromInsertion(i,r.from,I)}return e.changeModel([y]),r=y.translateRange(r),void 0===p&&(p=w?i.data.getRelativeContentOffset(r.from,1):i.data.getNearestContentOffset(r.from)),-1===p?(e.changeModel([m.Transaction.fromInsertion(i,r.from,_)]),e.model.setLinearSelection(new g.Range(r.from+1))):e.model.setLinearSelection(new g.Range(p)),e.observer.clear(),e.checkSequences(),!0}}]),t}(u.KeyDownHandler);_.id="linearEnter",_.keys=[y.Key.enter],_.supportedSelections=["linear"],_=w([p.keyDownHandlerFactory.register],_)},"./src/view/keydownhandlers/LinearEscapeKeyDownHandler.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"LinearEscapeKeyDownHandler",(function(){return f})),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),c=n("./src/view/keydownhandlers/KeyDownHandler.ts"),u=n("./src/view/KeyDownHandlerFactory.ts"),d=n("./src/view/nodes/TableViewNode.ts"),h=n("./src/domUtil.ts"),p=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},f=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(o.default)(t,e),Object(i.default)(t,null,[{key:"execute",value:function(e,t){var n=e.activeNode&&e.activeNode.traverseUp((function(e){return!(e instanceof d.TableViewNode)}));if(n)return t.preventDefault(),t.stopPropagation(),n.setEditing(!1),e.model.setSelection(e.model.getSelection().collapsedToStart()),!0;var s=e.model.getSelection().getRange(),i=e.documentView.getBranchNodeFromOffset(s.start),r=i.getOuterRange();return!(!r.containsRange(s)||!i.isFocusable()||(e.model.getLinearFragment(r,!0).select(),0))}}]),t}(c.KeyDownHandler);f.id="linearEscape",f.keys=[h.Key.escape],f.supportedSelections=["linear"],f=p([u.keyDownHandlerFactory.register],f)},"./src/view/keydownhandlers/LinearTabKeyDownHandler.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"LinearTabKeyDownHandler",(function(){return m})),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),c=n("./src/view/keydownhandlers/KeyDownHandler.ts"),u=n("./src/view/keydownhandlers/TableArrowKeyDownHandler.ts"),d=n("./src/view/KeyDownHandlerFactory.ts"),h=n("./src/view/nodes/TableViewNode.ts"),p=n("./src/domUtil.ts"),f=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},m=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(o.default)(t,e),Object(i.default)(t,null,[{key:"execute",value:function(e,t){var n=e.activeNode&&e.activeNode.traverseUp((function(e){return!(e instanceof h.TableViewNode)}));return!!n&&(t.preventDefault(),t.stopPropagation(),n.setEditing(!1),u.TableArrowKeyDownHandler.moveTableSelection(e,0,1),!0)}}]),t}(c.KeyDownHandler);m.id="linearTab",m.keys=[p.Key.tab],m.supportedSelections=["linear"],m=f([d.keyDownHandlerFactory.register],m)},"./src/view/keydownhandlers/TableArrowKeyDownHandler.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TableArrowKeyDownHandler",(function(){return p})),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),c=n("./src/view/keydownhandlers/KeyDownHandler.ts"),u=n("./src/view/KeyDownHandlerFactory.ts"),d=n("./src/domUtil.ts"),h=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(o.default)(t,e),Object(i.default)(t,null,[{key:"execute",value:function(e,t){var n=t.shiftKey,s=0,i=0;switch(t.keyCode){case d.Key.left:s=-1;break;case d.Key.right:s=1;break;case d.Key.up:i=-1;break;case d.Key.down:i=1;break;case d.Key.home:s=-1/0;break;case d.Key.end:s=1/0;break;case d.Key.pageUp:i=-1/0;break;case d.Key.pageDown:i=1/0;break;case d.Key.tab:s=t.shiftKey?-1:1,n=!1}return t.preventDefault(),this.moveTableSelection(e,i,s,n),!0}},{key:"moveTableSelection",value:function(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=e.model.getSelection();s||i.isSingleCell()||(i=i.collapsedToFrom());var r=i.adjusted(s?0:n,s?0:t,n,t);e.model.setSelection(r)}}]),t}(c.KeyDownHandler);p.id="tableArrow",p.keys=[d.Key.up,d.Key.down,d.Key.left,d.Key.right,d.Key.end,d.Key.home,d.Key.pageUp,d.Key.pageDown,d.Key.tab],p.supportedSelections=["table"],p=h([u.keyDownHandlerFactory.register],p)},"./src/view/keydownhandlers/TableDeleteKeyDownHandler.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TableDeleteKeyDownHandler",(function(){return p})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.map"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),c=n("./src/view/keydownhandlers/KeyDownHandler.ts"),u=n("./src/view/KeyDownHandlerFactory.ts"),d=n("./src/domUtil.ts"),h=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(o.default)(t,e),Object(i.default)(t,null,[{key:"execute",value:function(e,t){t&&t.preventDefault();var n=e.model.getSelection().getMatrixCells().map((function(t){return e.model.getLinearFragment(t.node.getRange(),!0)})),s=!0,i=!1,r=void 0;try{for(var a,o=n[Symbol.iterator]();!(s=(a=o.next()).done);s=!0)a.value.removeContent()}catch(l){i=!0,r=l}finally{try{s||null==o.return||o.return()}finally{if(i)throw r}}return!0}}]),t}(c.KeyDownHandler);p.id="tableDelete",p.keys=[d.Key.backspace,d.Key.delete],p.supportedSelections=["table"],p=h([u.keyDownHandlerFactory.register],p)},"./src/view/keydownhandlers/TableEnterKeyDownHandler.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TableEnterKeyDownHandler",(function(){return f})),n("core-js/modules/es.array.concat"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),c=n("./src/view/keydownhandlers/KeyDownHandler.ts"),u=n("./src/view/nodes/TableViewNode.ts"),d=n("./src/view/KeyDownHandlerFactory.ts"),h=n("./src/domUtil.ts"),p=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},f=function(e){function t(){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).apply(this,arguments))}return Object(o.default)(t,e),Object(i.default)(t,null,[{key:"execute",value:function(e,t){var n=e.model.getSelection(),s=e.documentView.getBranchNodeFromOffset(n.tableRange.start+1);if(!(s instanceof u.TableViewNode))throw new Error("Expected ".concat(u.TableViewNode.name," but got ").concat(s&&s.constructor.name," instead"));return t.preventDefault(),s.setEditing(!0),!0}}]),t}(c.KeyDownHandler);f.id="tableEnter",f.keys=[h.Key.enter],f.supportedSelections=["table"],f=p([d.keyDownHandlerFactory.register],f)},"./src/view/nodes/AlignableViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"AlignableViewNode",(function(){return a}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./src/view/nodes/ClassAttributeViewNode.ts"),a=function(){function e(){Object(s.default)(this,e)}return Object(i.default)(e,[{key:"updateAttributeClasses",value:function(){r.ClassAttributeViewNode.prototype.updateAttributeClasses.call(this);var e=this.model.element.attributes.align;e&&e!==this.align&&(this.emit("align",e),this.align=e)}}],[{key:"construct",value:function(e){e.align=null}}]),e}()},"./src/view/nodes/BlockquoteViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"BlockquoteViewNode",(function(){return d})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=n("./src/view/nodes/ContentBranchViewNode.ts"),c=n("./src/view/ViewNodeFactory.ts"),u=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.default)(this,t),(n=Object(i.default)(this,Object(r.default)(t).call(this,e,a))).element.classList.add("am-view-blockquoteNode"),n}return Object(a.default)(t,e),t}(l.ContentBranchViewNode);d.id="blockquote",d.tagName="blockquote",d=u([c.viewNodeFactory.register],d)},"./src/view/nodes/BranchViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"BranchViewNode",(function(){return y})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.concat"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.map"),n("core-js/modules/es.array.splice"),n("core-js/modules/es.map"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s,i=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),r=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),a=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),c=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=n("./node_modules/@babel/runtime/helpers/esm/get.js"),d=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),h=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),p=n("./src/oo.ts"),f=n("./src/domUtil.ts"),m=n("./src/view/nodes/ViewNode.ts"),v=n("./src/BranchNode.ts"),b=n("./src/view/ViewNodeFactory.ts"),g=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},y=s=function(e){function t(e){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.default)(this,t),n=Object(o.default)(this,Object(c.default)(t).call(this,e,s)),v.BranchNode.construct(Object(l.default)(n)),n.tagName=n.element.nodeName.toLowerCase(),n.slugNodes=new Map,n.onSplice=n.onSplice.bind(Object(l.default)(n)),n.onModelUpdate=n.onModelUpdate.bind(Object(l.default)(n)),n.model.on("splice",n.onSplice),n.element.classList.add("am-view-branchNode"),n.onSplice(0,0,e.children),n}return Object(d.default)(t,e),Object(a.default)(t,[{key:"setLive",value:function(e){Object(u.default)(Object(c.default)(t.prototype),"setLive",this).call(this,e);var n=!0,s=!1,i=void 0;try{for(var r,a=this.children[Symbol.iterator]();!(n=(r=a.next()).done);n=!0)r.value.setLive(e)}catch(o){s=!0,i=o}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}}},{key:"destroy",value:function(){var e=!0,n=!1,s=void 0;try{for(var i,r=this.children[Symbol.iterator]();!(e=(i=r.next()).done);e=!0)i.value.destroy()}catch(a){n=!0,s=a}finally{try{e||null==r.return||r.return()}finally{if(n)throw s}}Object(u.default)(Object(c.default)(t.prototype),"destroy",this).call(this)}},{key:"hasChildren",value:function(){}},{key:"onSplice",value:function(e,t,n){var s,r=this,a=n.map((function(e){var t=b.viewNodeFactory.create(e.getType(),e);return t.model.on("update",r.onModelUpdate),t})),o=(s=this.children).splice.apply(s,[e,t].concat(Object(i.default)(a))),l=!0,c=!1,u=void 0;try{for(var d,h=o[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var p=d.value;p.model.off("update",this.onModelUpdate),p.setLive(!1),p.detatch(),p.element&&p.element.remove()}}catch(g){c=!0,u=g}finally{try{l||null==h.return||h.return()}finally{if(c)throw u}}if(n.length>0){var f=null;e&&(f=this.children[e-1].element);for(var m=a.length-1;m>=0;m--){var v=a[m];v.attach(this),v.element&&(e?f.parentNode.insertBefore(v.element,f.nextSibling):this.element.insertBefore(v.element,this.element.firstChild),this.live!==v.live&&v.setLive(this.live))}}this.setupBlockSlugs()}},{key:"onModelUpdate",value:function(e){this.emit("childUpdate",e)}},{key:"updateTagName",value:function(){var e=this.getTagName();if(e!==this.tagName){this.emit("teardown");var t=document.createElement(e);for(t.className=this.element.className,t.contentEditable=this.element.contentEditable;this.element.firstChild;)t.appendChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.replaceChild(t,this.element),this.element=t,this.emit("setup"),this.tagName=e}}},{key:"setupBlockSlugs",value:function(){this.canHaveChildrenNotContent()&&this.setupSlugs(!0)}},{key:"setupInlineSlugs",value:function(){this.canHaveChildrenNotContent()||this.setupSlugs(!1)}},{key:"setupSlugs",value:function(e){this.removeSlugs();var t=e?s.blockSlugTemplate:s.inlineSlugTemplate,n=!0,i=!1,r=void 0;try{for(var a,o=this.model.slugPositions[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var l=a.value,c=t.cloneNode(!0),u=this.children[l]&&this.children[l].element;u?u.parentNode.insertBefore(c,u):this.element.appendChild(c),this.slugNodes.set(l,c)}}catch(d){i=!0,r=d}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}},{key:"removeSlugs",value:function(){var e=!0,t=!1,n=void 0;try{for(var s,i=this.slugNodes.values()[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){var r=s.value;r.parentNode&&r.remove()}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.slugNodes.clear()}},{key:"getSlugAtOffset",value:function(e){var t=this.model.getOffset()+(this.isWrapped()?1:0);if(e===t)return this.slugNodes.get(0)||null;for(var n=0;n<this.children.length;n++)if(e===(t+=this.children[n].model.getOuterLength()))return this.slugNodes.get(n+1)||null;return null}},{key:"onSlugClick",value:function(e){this.root.surface.createSlug(e)}}]),t}(m.ViewNode);y.inlineSlugTemplate=function(){var e=document.createElement("img");e.className="am-view-chimera";var t=document.createElement("span");return t.className="am-view-branchNode-slug am-view-branchNode-inlineSlug",t.appendChild(e),t}(),y.blockSlugTemplate=function(){var e=document.createElement("img");e.className="am-view-chimera",e.src=f.smallImageUri;var t=document.createElement("div");return t.className="am-view-branchNode-slug am-view-branchNode-blockSlug",t.appendChild(e),t}(),y=s=g([p.mixin(v.BranchNode)],y)},"./src/view/nodes/BreakViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"BreakViewNode",(function(){return d})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=n("./src/view/nodes/LeafViewNode.ts"),c=n("./src/view/ViewNodeFactory.ts"),u=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.default)(this,t),(n=Object(i.default)(this,Object(r.default)(t).call(this,e,a))).element.classList.add("am-view-breakNode"),n}return Object(a.default)(t,e),t}(l.LeafViewNode);d.id="break",d.tagName="br",d=u([c.viewNodeFactory.register],d)},"./src/view/nodes/CalloutViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"CalloutViewNode",(function(){return p})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/view/nodes/ContentBranchViewNode.ts"),d=n("./src/view/ViewNodeFactory.ts"),h=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.default)(this,t),(n=Object(r.default)(this,Object(a.default)(t).call(this,e,i))).onAttributeChange=n.onAttributeChange.bind(Object(o.default)(n)),n.model.on("attributeChange",n.onAttributeChange),n.element.classList.add("am-view-calloutNode"),n.applyStyle(null,n.model.element.attributes.type||"info"),n}return Object(l.default)(t,e),Object(i.default)(t,[{key:"onAttributeChange",value:function(e,t,n){"type"===e&&this.applyStyle(t,n)}},{key:"applyStyle",value:function(e,t){e&&this.element.classList.remove("am-view-calloutNode-".concat(e)),t&&this.element.classList.add("am-view-calloutNode-".concat(t))}}]),t}(u.ContentBranchViewNode);p.id="callout",p.tagName="p",p=h([d.viewNodeFactory.register],p)},"./src/view/nodes/ClassAttributeViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ClassAttributeViewNode",(function(){return a}));var s=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=function(){function e(){Object(i.default)(this,e)}return Object(r.default)(e,[{key:"updateAttributeClasses",value:function(){var e,t;this.currentAttributeClasses.length&&(e=this.classedElement.classList).remove.apply(e,Object(s.default)(this.currentAttributeClasses)),this.currentAttributeClasses=this.model.constructor.getClassAttributesFromAttributes(this.model.element.attributes),this.currentAttributeClasses.length&&(t=this.classedElement.classList).add.apply(t,Object(s.default)(this.currentAttributeClasses))}}],[{key:"construct",value:function(e,t){e.classedElement=t||e.element,e.currentAttributeClasses=[];var n,i=e.model.element.attributes.originalClasses;i&&(n=e.classedElement.classList).remove.apply(n,Object(s.default)(i));var r,a=e.model.element.attributes.unrecognizedClasses;a&&(r=e.classedElement.classList).add.apply(r,Object(s.default)(a)),e.on("setup",e.updateAttributeClasses.bind(e)),e.model.on("attributeChange",e.updateAttributeClasses.bind(e))}}]),e}()},"./src/view/nodes/CodeViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"CodeViewNode",(function(){return d})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=n("./src/view/nodes/ContentBranchViewNode.ts"),c=n("./src/view/ViewNodeFactory.ts"),u=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.default)(this,t),(n=Object(i.default)(this,Object(r.default)(t).call(this,e,a))).element.classList.add("am-view-codeNode"),n.element.spellcheck=!1,n}return Object(a.default)(t,e),t}(l.ContentBranchViewNode);d.id="code",d.tagName="pre",d=u([c.viewNodeFactory.register],d)},"./src/view/nodes/ContentBranchViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ContentBranchViewNode",(function(){return y})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.concat"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.map"),n("core-js/modules/es.array.splice"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=n("./node_modules/@babel/runtime/helpers/esm/get.js"),u=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),d=n("./src/util.ts"),h=n("./src/domUtil.ts"),p=n("./src/view/nodes/BranchViewNode.ts"),f=n("./src/model/AnnotationSet.ts"),m=n("./src/view/nodes/DocumentViewNode.ts"),v=n("./src/model/Converter.ts"),b=n("./src/model/selections/LinearSelectionModel.ts"),g=n("./src/view/AnnotationViewFactory.ts"),y=function(e){function t(e){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.default)(this,t),(n=Object(a.default)(this,Object(l.default)(t).call(this,e,s))).lastTransaction=null,n.unicornAnnotations=null,n.unicorns=null,n.onChildUpdate=n.onChildUpdate.bind(Object(o.default)(n)),n.on("childUpdate",n.onChildUpdate),n.element.classList.add("am-view-contentBranchNode"),n}return Object(u.default)(t,e),Object(r.default)(t,[{key:"onSplice",value:function(e,n,s){Object(c.default)(Object(l.default)(t.prototype),"onSplice",this).call(this,e,n,s),this.renderContents()}},{key:"onTeardown",value:function(){Object(c.default)(Object(l.default)(t.prototype),"onTeardown",this).call(this),this.root.surface.setNotUnicorning(this)}},{key:"onChildUpdate",value:function(e){null!==e&&e!==this.lastTransaction?this.renderContents():this.lastTransaction=e}},{key:"getRenderedContents",value:function(){var e,t=this,n=this.model.document.store,i=new f.AnnotationSet(n),r=[],a=!1,o=document.createDocumentFragment(),l=o,c=[],u="",p={hasCursor:!1,annotations:null,unicorns:null},m=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];u&&(e&&l.nodeType===Node.TEXT_NODE?l.textContent+=u:l.appendChild(document.createTextNode(u)),u="")},y=function(e){a=!0,m(!0);var n=g.annotationViewFactory.create(e.getType(),e,t);n.appendTo(l),r.push(n),c.push(l),l=n.getContentContainer()},w=function(){a=!0,m(!0),r.pop().attachContents(),l=c.pop()},_=[],k=!0,C=!1,x=void 0;try{for(var j,O=this.children[Symbol.iterator]();!(k=(j=O.next()).done);k=!0){var S=j.value;_.push.apply(_,Object(s.default)(S.getAnnotatedHtml()))}}catch($){C=!0,x=$}finally{try{k||null==O.return||O.return()}finally{if(C)throw x}}var E=-1;if(this.root){var T=this.root.surface.model.getTranslatedSelection();T instanceof b.LinearSelectionModel&&T.isCollapsed()&&(E=T.getRange().start-this.getOffset()-1)}if(E<0||E>this.getLength())p.hasCursor=!1;else{p.hasCursor=!0;var I,D=0,P=_.length;for(I=0;I<P;I++){var A="string"==typeof _[I][0]?1:2;if(D<=E&&E<D+A){e=[{},this.root.surface.model.getInsertionAnnotations().getIndices()],_.splice(I,0,e);break}D+=A}I===P&&D===E&&(e=[{},this.root.surface.model.getInsertionAnnotations().getIndices()],_.push(e))}for(var N=0;N<_.length;N++){var R=_[N],M=void 0,L=void 0;if(Array.isArray(R)?(M=R[0],L=new f.AnnotationSet(n,R[1])):(M=R,L=new f.AnnotationSet(n)),a=!1,v.Converter.openAndCloseAnnotations(i,L,y,w),"string"==typeof M)u+=M;else if(e&&M===e[0])if(a){m();var F=document.createElement("img"),B=document.createElement("img");F.className="am-view-unicorn am-view-pre-unicorn",B.className="am-view-unicorn am-view-post-unicorn",d.setData(F,"modelOffset",this.getOffset()+1+N),d.setData(B,"modelOffset",this.getOffset()+1+N),F.setAttribute("src",h.smallImageUri),B.setAttribute("src",h.smallImageUri),l.appendChild(F),l.appendChild(B),p.annotations=this.root.surface.model.getInsertionAnnotations(),p.unicorns=[F,B]}else p.annotations=null,p.unicorns=null;else{m();var q=M.cloneNode(!0);d.setData(q,"originalNode",M),l.appendChild(q)}}for(m();r.length;)w();return{fragment:o,unicornInfo:p}}},{key:"renderContents",value:function(){if(this.root instanceof m.DocumentViewNode){if(this.root.surface.isRenderingLocked())return!1;this.root.surface.setContentBranchNodeChanged()}var e=this.getRenderedContents(),t=e.fragment,n=e.unicornInfo;if(this.rendered){var i=this.element.cloneNode(!0),r=Object(s.default)(i.querySelectorAll(".am-view-branchNode-inlineSlug")).map((function(e){return Object(s.default)(e.childNodes)})).reduce((function(e,t){return e.concat(t)}),[]);h.unwrap(r);var a=!0,o=!1,l=void 0;try{for(var c,u=r[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var p=c.value;p.nodeType===Node.ELEMENT_NODE&&p.classList.contains("am-view-chimera")&&p.parentNode.removeChild(p)}}catch(v){o=!0,l=v}finally{try{a||null==u.return||u.return()}finally{if(o)throw l}}for(var f=this.element.cloneNode(!1);t.firstChild;)f.appendChild(t.firstChild);if(i.normalize(),f.normalize(),f.isEqualNode(i))return!1;t=f}for(this.rendered=!0,this.unicornAnnotations=n.annotations,this.unicorns=n.unicorns,h.removeAllChildren(this.element),function e(t){for(var n=0,i=Object(s.default)(t.childNodes);n<i.length;n++){var r=i[n],a=d.getData(r,"originalNode");a?t.replaceChild(a,r):e(r)}}(t);t.firstChild;)this.element.appendChild(t.firstChild);return this.root&&(n.hasCursor?this.unicorns?this.root.surface.setUnicorning(this):this.root.surface.setNotUnicorningAll(this):this.root.surface.setNotUnicorning(this)),this.setupInlineSlugs(),!0}}]),t}(p.BranchViewNode);y.splitOnEnter=!0},"./src/view/nodes/DocumentViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"DocumentViewNode",(function(){return p})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/view/nodes/BranchViewNode.ts"),d=n("./src/view/ViewNodeFactory.ts"),h=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(e,n){var i,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(s.default)(this,t),(i=Object(r.default)(this,Object(a.default)(t).call(this,e,l))).surface=n,i.setRoot(Object(o.default)(i)),i.element.classList.add("am-view-documentNode"),i.element.contentEditable="true",i.element.spellcheck=!0,i}return Object(l.default)(t,e),Object(i.default)(t,[{key:"disable",value:function(){this.element.contentEditable="false"}},{key:"enable",value:function(){this.element.contentEditable="true"}}]),t}(u.BranchViewNode);p.id="document",p=h([d.viewNodeFactory.register],p)},"./src/view/nodes/FileViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"FileViewNode",(function(){return k})),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.promise");var s=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(s),r=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),a=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),c=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=n("./node_modules/@babel/runtime/helpers/esm/get.js"),d=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),h=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),p=n("vue"),f=n.n(p),m=n("./src/oo.ts"),v=n("./src/view/nodes/LeafViewNode.ts"),b=n("./src/view/nodes/FocusableViewNode.ts"),g=n("./src/view/ViewNodeFactory.ts"),y=n("./src/view/components/FileViewNodeComponent.vue"),w=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},_=function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(t){r(t)}}function o(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},k=function(e){function t(e){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.default)(this,t);var i=(n=Object(o.default)(this,Object(c.default)(t).call(this,e,s))).model.element.attributes,a=i.filename,u=i.url;n.vmData={loading:!1,filename:a,url:u};var d=Object(l.default)(n);return n.vm=new f.a({data:n.vmData,render:function(e){return e(y.default,{props:{loading:this.loading,filename:this.filename,url:this.url},on:{upload:function(e){return d.uploadFile(e)}}})}}),n.vm.$mount(),b.FocusableViewNode.construct(Object(l.default)(n),{focusableElement:n.vm.$el}),n.element.classList.add("am-view-fileNode"),n.element.contentEditable="false",n.element.spellcheck=!1,n.element.appendChild(n.vm.$el),n.model.on("attributeChange",n.onAttributeChange.bind(Object(l.default)(n))),n}return Object(d.default)(t,e),Object(a.default)(t,[{key:"onTeardown",value:function(){this.vm&&(this.vm.$el.remove(),this.vm.$destroy()),Object(u.default)(Object(c.default)(t.prototype),"onTeardown",this).call(this)}},{key:"onAttributeChange",value:function(e,t,n){switch(e){case"filename":this.vmData.filename=n;break;case"url":this.vmData.url=n}}},{key:"getFragment",value:function(){return this.focusableSurface.model.getLinearFragment(this.getOuterRange())}},{key:"uploadFile",value:function(e){return _(this,void 0,void 0,i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.vmData.loading=!0,t.prev=1,t.next=4,this.focusableSurface.model.api.uploadFile(e);case 4:n=t.sent;case 5:return t.prev=5,this.vmData.loading=!1,t.finish(5);case 8:this.getFragment().changeAttributes({url:n,filename:e.name});case 9:case"end":return t.stop()}}),t,this,[[1,,5,8]])})))}}]),t}(v.LeafViewNode);k.id="file",k=w([m.mixin(b.FocusableViewNode),g.viewNodeFactory.register],k)},"./src/view/nodes/FocusableViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"FocusableViewNode",(function(){return d})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.filter"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.splice"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./src/oo.ts"),a=n("./src/util.ts"),o=n("./src/domUtil.ts"),l=n("./src/Range.ts"),c=n("./src/view/nodes/ResizableViewNode.ts"),u=n("./src/model/selections/LinearSelectionModel.ts"),d=function(){function e(){Object(s.default)(this,e)}return Object(i.default)(e,[{key:"setFocused",value:function(e){this.focused!==e&&(this.focused=e,e?(this.emit("focus"),this.createHighlights(),this.focusableSurface.appendHighlights([this.highlightsElement],this.focused)):(this.emit("blur"),this.clearHighlights()),this.element.classList.toggle("am-view-focusableNode-focused",e))}},{key:"onFocusableSetup",value:function(){!this.focusableSurface&&this.root&&this.root.surface&&(this.focusableSurface=this.root.surface,this.focusOnMouseDown&&this.element.addEventListener("mousedown",this.onFocusableMouseDown),this.focusableElement.addEventListener("touchend",this.onFocusableMouseDown))}},{key:"onFocusableTeardown",value:function(){this.focusableSurface&&(this.element.removeEventListener("mousedown",this.onFocusableMouseDown),this.focusableElement.removeEventListener("touchend",this.onFocusableMouseDown),this.clearHighlights(),this.element.classList.remove("am-view-focusableNode"),this.element.contentEditable="inherit",this.focusableSurface=null)}},{key:"onFocusableMouseDown",value:function(e){var t=this;e.stopPropagation();var n=e.target;if(!o.contains(this.focusableElement,n))return this.setFocused(!1),this.focusableSurface.model.setNullSelection(),void e.preventDefault();if(!this.focused&&o.closest(n,".am-view-focusableNode-grip")&&this.isInContentEditable()){var s=this.focusableSurface.model.getSelection(),i=this.model.getOuterRange();setTimeout((function(){var n,r=s instanceof u.LinearSelectionModel&&s.getRange();e.shiftKey&&r?(n=l.Range.newCoveringRange([r,i]),r.from>i.from&&(n=n.flipped())):n=i,t.focusableSurface.model.getLinearFragment(n).select()}))}}},{key:"onFocusableDragStart",value:function(e){this.focusableSurface&&this.focusableSurface.startRelocation(this,e),e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move",e.dataTransfer.setData("text/plain",""),this.highlightsElement.classList.add("am-view-focusableNode-highlights-relocating"),this.emit("dragStart")}},{key:"onFocusableDragEnd",value:function(){this.focusableSurface&&this.focusableSurface.endRelocation(),this.highlightsElement.classList.remove("am-view-focusableNode-highlights-relocating"),this.emit("dragEnd")}},{key:"onFocusableResizeStart",value:function(){this.clearHighlights()}},{key:"onFocusableResizeEnd",value:function(){this.clearHighlights(),this.createHighlights()}},{key:"createHighlights",value:function(){this.highlighted||(this.highlighted=!0,this.positionHighlights(),this.focusableSurface.appendHighlights([this.highlightsElement],this.focused),this.focusableSurface.on("position",this.positionHighlights))}},{key:"clearHighlights",value:function(){this.highlighted&&(this.highlightsElement.remove(),this.focusableSurface.off("position",this.positionHighlights),this.highlighted=!1,this.boundingRect=null)}},{key:"createHighlight",value:function(){var e=document.createElement("div");return e.className="am-view-focusableNode-highlight",e}},{key:"positionHighlights",value:function(){if(this.highlighted){this.calculateHighlights(),o.removeAllChildren(this.highlightsElement);var e=!0,t=!1,n=void 0;try{for(var s,i=this.highlightRects[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){var r=s.value,a=this.createHighlight();a.style.top="".concat(r.top,"px"),a.style.left="".concat(r.left,"px"),a.style.width="".concat(r.width,"px"),a.style.height="".concat(r.height,"px"),this.highlightsElement.appendChild(a)}}catch(l){t=!0,n=l}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}}},{key:"calculateHighlights",value:function(){var e=function(e,t){return t.left>=e.left&&t.top>=e.top&&t.right<=e.right&&t.bottom<=e.bottom},t=this.focusableSurface.ui.element,n=t.getBoundingClientRect(),s=[];!function t(n){if(!n.classList.contains("am-view-focusableNode-noHighlight"))for(var i=n.getClientRects(),r=0;r<i.length;r++){for(var a=!1,o=0;o<s.length;o++){if(e(s[o],i[r])){a=!0;break}e(i[r],s[o])&&(s.splice(o,1),o--)}a||s.push(i[r])}if("visible"===getComputedStyle(n).overflow){var l=!0,c=!1,u=void 0;try{for(var d,h=n.childNodes[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var p=d.value;p.nodeType===Node.ELEMENT_NODE&&t(p)}}catch(f){c=!0,u=f}finally{try{l||null==h.return||h.return()}finally{if(c)throw u}}}}(this.focusableElement);var i=s.filter((function(e){return e.width>1&&e.height>1}));i.length>0&&(s=i),this.boundingRect=null;for(var r=0;r<s.length;r++){s[r]=a.translateRect(s[r],-n.left+t.scrollLeft,-n.top+t.scrollTop);var o=this.createHighlight();o.style.top="".concat(s[r].top,"px"),o.style.left="".concat(s[r].left,"px"),o.style.width="".concat(s[r].width,"px"),o.style.height="".concat(s[r].height,"px"),this.highlightsElement.appendChild(o),this.boundingRect?(this.boundingRect.top=Math.min(this.boundingRect.top,s[r].top),this.boundingRect.left=Math.min(this.boundingRect.left,s[r].left),this.boundingRect.bottom=Math.max(this.boundingRect.bottom,s[r].bottom),this.boundingRect.right=Math.max(this.boundingRect.right,s[r].right)):this.boundingRect=a.clone(s[r])}this.boundingRect&&(this.boundingRect.width=this.boundingRect.right-this.boundingRect.left,this.boundingRect.height=this.boundingRect.bottom-this.boundingRect.top),this.highlightRects=s}},{key:"getBoundingRect",value:function(){return this.highlighted||this.calculateHighlights(),this.boundingRect}},{key:"getHighlightRects",value:function(){return this.highlighted||this.calculateHighlights(),this.highlightRects}}],[{key:"construct",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.focused=!1,e.highlighted=!1,e.focusableElement=t.focusableElement||e.element,e.focusableSurface=null,e.boundingRect=null,e.highlightRects=null,e.focusOnMouseDown=void 0===t.focusOnMouseDown||t.focusOnMouseDown,e.highlightsElement=document.createElement("div"),e.highlightsElement.className="am-view-focusableNode-highlights",e.onFocusableMouseDown=e.onFocusableMouseDown.bind(e),e.onFocusableDragStart=e.onFocusableDragStart.bind(e),e.onFocusableDragEnd=e.onFocusableDragEnd.bind(e),e.onFocusableResizeStart=e.onFocusableResizeStart.bind(e),e.onFocusableResizeEnd=e.onFocusableResizeEnd.bind(e),e.positionHighlights=e.positionHighlights.bind(e),e.element.addEventListener("dragstart",e.onFocusableDragStart),e.element.addEventListener("dragend",e.onFocusableDragEnd),e.on("setup",e.onFocusableSetup.bind(e)),e.on("teardown",e.onFocusableTeardown.bind(e)),r.hasMixin(e,c.ResizableViewNode)&&(e.on("resizeStart",e.onFocusableResizeStart),e.on("resizeEnd",e.onFocusableResizeEnd)),e.element.classList.add("am-view-focusableNode"),e.element.classList.toggle("am-view-focusableNode-focusOnMouseDown",e.focusOnMouseDown)}}]),e}()},"./src/view/nodes/HeadingViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"HeadingViewNode",(function(){return p})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/view/nodes/ContentBranchViewNode.ts"),d=n("./src/view/ViewNodeFactory.ts"),h=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.default)(this,t),(n=Object(r.default)(this,Object(a.default)(t).call(this,e,i))).onUpdate=n.onUpdate.bind(Object(o.default)(n)),n.model.on("update",n.onUpdate),n.element.classList.add("am-view-headingNode"),n}return Object(l.default)(t,e),Object(i.default)(t,[{key:"getTagName",value:function(){var e=this.model.element&&this.model.element.attributes&&this.model.element.attributes.level;if("number"!=typeof e||e<1||e>6)throw new Error("Invalid heading level");return"h".concat(e)}},{key:"onUpdate",value:function(){this.updateTagName()}}]),t}(u.ContentBranchViewNode);p.id="heading",p=h([d.viewNodeFactory.register],p)},"./src/view/nodes/HorizontalRuleViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"HorizontalRuleViewNode",(function(){return v})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/get.js"),c=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),u=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),d=n("./src/oo.ts"),h=n("./src/view/nodes/LeafViewNode.ts"),p=n("./src/view/nodes/FocusableViewNode.ts"),f=n("./src/view/ViewNodeFactory.ts"),m=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(u.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},v=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.default)(this,t),n=Object(r.default)(this,Object(o.default)(t).call(this,e,i)),p.FocusableViewNode.construct(Object(a.default)(n)),n.element.classList.add("am-view-horizontalRuleNode","am-view-focusableNode-grip"),n.element.draggable=!0,n.element.contentEditable="false",n}return Object(c.default)(t,e),Object(i.default)(t,[{key:"createElement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(l.default)(Object(o.default)(t.prototype),"createElement",this).call(this,e);var n=this.element;this.element=document.createElement("div"),this.element.appendChild(n)}}]),t}(h.LeafViewNode);v.id="horizontalRule",v.tagName="hr",v=m([d.mixin(p.FocusableViewNode),f.viewNodeFactory.register],v)},"./src/view/nodes/ImageViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ImageViewNode",(function(){return C})),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.promise");var s=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(s),r=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),a=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),c=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=n("./node_modules/@babel/runtime/helpers/esm/get.js"),d=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),h=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),p=n("vue"),f=n.n(p),m=n("./src/oo.ts"),v=n("./src/view/nodes/LeafViewNode.ts"),b=n("./src/view/nodes/FocusableViewNode.ts"),g=n("./src/view/nodes/ResizableViewNode.ts"),y=n("./src/view/ViewNodeFactory.ts"),w=n("./src/view/components/ImageViewNodeComponent.vue"),_=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},k=function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(t){r(t)}}function o(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))},C=function(e){function t(e){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.default)(this,t);var i=(n=Object(o.default)(this,Object(c.default)(t).call(this,e,s))).model.element.attributes,a=i.src,u=i.width,d=i.height;n.vmData={src:a,width:u,height:d,uploading:!1,downloading:!1};var h=Object(l.default)(n);return n.vm=new f.a({data:n.vmData,render:function(e){return e(w.default,{props:{src:this.src,width:this.width,height:this.height,loading:this.uploading||this.downloading},on:{upload:function(e){return h.uploadFile(e)},setUrl:function(){return h.showInspector()},edit:function(){return h.handleEdit()}}})}}),n.vm.$mount(),b.FocusableViewNode.construct(Object(l.default)(n),{focusableElement:n.vm.$el}),g.ResizableViewNode.construct(Object(l.default)(n),n.vm.$el),n.model.on("attributeChange",n.onAttributeChange.bind(Object(l.default)(n))),n.element.contentEditable="false",n.element.classList.add("am-view-imageNode"),n.element.appendChild(n.vm.$el),n.setOriginalDimensions({width:u,height:d}),n.setResizeEnabled(!!a),n}return Object(d.default)(t,e),Object(a.default)(t,[{key:"onTeardown",value:function(){this.vm&&(this.vm.$el.remove(),this.vm.$destroy()),Object(u.default)(Object(c.default)(t.prototype),"onTeardown",this).call(this)}},{key:"onAttributeChange",value:function(e,t,n){switch(e){case"src":this.setImage(n);break;case"width":this.vmData.width=n;break;case"height":this.vmData.height=n}}},{key:"showInspector",value:function(){var e=this.root.surface.ui;e.model.setLinearSelection(this.getOuterRange()),setTimeout((function(){return e.commandRegistry.lookup("image/edit").execute(e)}))}},{key:"getFragment",value:function(){return this.resizableSurface.model.getLinearFragment(this.getOuterRange())}},{key:"setImage",value:function(e){var t=this;if(!e)return this.vmData.src=null,this.vmData.width=null,this.vmData.height=null,void this.setResizeEnabled(!1);this.vmData.downloading=!0;var n=new Image;n.src=e,n.onload=function(){t.vmData.downloading=!1,t.vmData.src=e,t.setResizeEnabled(!0);var s=t.model.element.attributes,i=s.width,r=s.height;if(!i||!r){var a=Math.min(1,(t.element.clientWidth-20)/n.naturalWidth);t.setOriginalDimensions({width:n.naturalWidth,height:n.naturalHeight}),t.getFragment().changeAttributes({width:n.naturalWidth*a,height:n.naturalHeight*a}),t.root.surface.emit("position")}},n.onerror=function(){t.vmData.downloading=!1}}},{key:"uploadFile",value:function(e){return k(this,void 0,void 0,i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.vmData.uploading=!0,t.prev=1,t.next=4,this.focusableSurface.model.api.uploadImageFile(e);case 4:n=t.sent;case 5:return t.prev=5,this.vmData.uploading=!1,t.finish(5);case 8:this.getFragment().changeAttributes({src:n,width:null,height:null});case 9:case"end":return t.stop()}}),t,this,[[1,,5,8]])})))}},{key:"handleEdit",value:function(){var e=this.focusableSurface.ui,t=e.commandRegistry.lookup("image/editAlt");t&&t.execute(e)}}]),t}(v.LeafViewNode);C.id="image",C=_([m.mixin(b.FocusableViewNode,g.ResizableViewNode),y.viewNodeFactory.register],C)},"./src/view/nodes/LabelViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"LabelViewNode",(function(){return m})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/oo.ts"),d=n("./src/view/nodes/LeafViewNode.ts"),h=n("./src/view/nodes/FocusableViewNode.ts"),p=n("./src/view/ViewNodeFactory.ts"),f=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},m=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.default)(this,t),n=Object(r.default)(this,Object(a.default)(t).call(this,e,i)),h.FocusableViewNode.construct(Object(o.default)(n)),n.onAttributeChange=n.onAttributeChange.bind(Object(o.default)(n)),n.model.on("attributeChange",n.onAttributeChange),n.element.classList.add("am-view-labelNode","am-view-focusableNode-grip"),n.element.draggable=!0,n.element.contentEditable="false",n.element.textContent=n.model.element.attributes.label,n}return Object(l.default)(t,e),Object(i.default)(t,[{key:"onAttributeChange",value:function(e,t,n){switch(e){case"label":this.element.textContent=n}}}]),t}(d.LeafViewNode);m.id="label",m.tagName="span",m=f([u.mixin(h.FocusableViewNode),p.viewNodeFactory.register],m)},"./src/view/nodes/LeafViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"LeafViewNode",(function(){return m})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/get.js"),c=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),u=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),d=n("./src/oo.ts"),h=n("./src/view/nodes/ViewNode.ts"),p=n("./src/LeafNode.ts"),f=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(u.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},m=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.default)(this,t),n=Object(r.default)(this,Object(o.default)(t).call(this,e,i)),p.LeafNode.construct(Object(a.default)(n)),n.isWrapped()&&n.element.classList.add("am-view-leafNode"),n}return Object(c.default)(t,e),Object(i.default)(t,[{key:"onSetup",value:function(){Object(l.default)(Object(o.default)(t.prototype),"onSetup",this).call(this),this.isWrapped()&&this.element.classList.add("am-view-leafNode")}},{key:"hasChildren",value:function(){}},{key:"getAnnotatedHtml",value:function(){return[[this.element,this.model.getAnnotations()]]}}]),t}(h.ViewNode);m=f([d.mixin(p.LeafNode)],m)},"./src/view/nodes/ListItemViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ListItemViewNode",(function(){return p})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/get.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/view/nodes/BranchViewNode.ts"),d=n("./src/view/ViewNodeFactory.ts"),h=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.default)(this,t),(n=Object(r.default)(this,Object(a.default)(t).call(this,e,i))).element.classList.add("am-view-listItemNode"),n}return Object(l.default)(t,e),Object(i.default)(t,[{key:"onSplice",value:function(e,n,s){Object(o.default)(Object(a.default)(t.prototype),"onSplice",this).call(this,e,n,s);var i=this.children.every((function(e){return"list"===e.type}));this.element.classList.toggle("am-view-listItemNode-noMarker",i)}}]),t}(u.BranchViewNode);p.id="listItem",p.splitOnEnter=!0,p.tagName="li",p=h([d.viewNodeFactory.register],p)},"./src/view/nodes/ListViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ListViewNode",(function(){return p})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/view/nodes/BranchViewNode.ts"),d=n("./src/view/ViewNodeFactory.ts"),h=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.default)(this,t),(n=Object(r.default)(this,Object(a.default)(t).call(this,e,i))).onUpdate=n.onUpdate.bind(Object(o.default)(n)),n.model.on("update",n.onUpdate),n.element.classList.add("am-view-listNode"),n.updateClass(),n}return Object(l.default)(t,e),Object(i.default)(t,[{key:"getTagName",value:function(){var e=this.model.element.attributes;return e&&"number"===e.style?"ol":"ul"}},{key:"onUpdate",value:function(){this.updateTagName(),this.updateClass()}},{key:"updateClass",value:function(){this.element.classList.remove("am-view-listNode-bullet","am-view-listNode-number"),this.element.classList.add("am-view-listNode-".concat(this.model.element.attributes.style))}}]),t}(u.BranchViewNode);p.id="list",p=h([d.viewNodeFactory.register],p)},"./src/view/nodes/MentionViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"MentionViewNode",(function(){return w})),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.promise"),n("core-js/modules/es.string.match");var s=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(s),r=(n("regenerator-runtime/runtime"),n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js")),a=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),c=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=n("./node_modules/@babel/runtime/helpers/esm/get.js"),d=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),h=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),p=n("./src/oo.ts"),f=n("./src/view/nodes/LeafViewNode.ts"),m=n("./src/view/nodes/FocusableViewNode.ts"),v=n("./src/view/ViewNodeFactory.ts"),b=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},g=function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(t){r(t)}}function o(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))};function y(e){return e.match(/^\s*(\S*)/)[1]}var w=function(e){function t(e){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.default)(this,t),n=Object(o.default)(this,Object(c.default)(t).call(this,e,s)),m.FocusableViewNode.construct(Object(l.default)(n)),n.onAttributeChange=n.onAttributeChange.bind(Object(l.default)(n)),n.model.on("attributeChange",n.onAttributeChange),n.element.classList.add("am-view-mentionNode","am-view-focusableNode-grip"),n.element.draggable=!0,n.element.contentEditable="false",n}return Object(d.default)(t,e),Object(a.default)(t,[{key:"onSetup",value:function(){Object(u.default)(Object(c.default)(t.prototype),"onSetup",this).call(this),this.updateLabel()}},{key:"onAttributeChange",value:function(e,t,n){"id"!==e&&"text"!==e||this.updateLabel()}},{key:"updateLabel",value:function(){return g(this,void 0,void 0,i.a.mark((function e(){var t,n,s,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.model.element.attributes,n=t.id,s=t.text,this.element.textContent="@"+(s?y(s):n||""),e.prev=2,e.next=5,this.root.surface.model.api.getMentionable(n);case 5:(r=e.sent)&&(this.element.textContent="@"+y(r.label)),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:case"end":return e.stop()}}),e,this,[[2,9]])})))}}]),t}(f.LeafViewNode);w.id="mention",w.tagName="span",w=b([p.mixin(m.FocusableViewNode),v.viewNodeFactory.register],w)},"./src/view/nodes/ParagraphViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ParagraphViewNode",(function(){return p})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/view/nodes/ContentBranchViewNode.ts"),d=n("./src/view/ViewNodeFactory.ts"),h=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.default)(this,t),(n=Object(r.default)(this,Object(a.default)(t).call(this,e,i))).onAttributeChange=n.onAttributeChange.bind(Object(o.default)(n)),n.model.on("attributeChange",n.onAttributeChange),n.element.classList.add("am-view-paragraphNode"),n.applyIndentStyle(n.model.element.attributes&&n.model.element.attributes.indent),n}return Object(l.default)(t,e),Object(i.default)(t,[{key:"onAttributeChange",value:function(e,t,n){"indent"===e&&this.applyIndentStyle(n)}},{key:"applyIndentStyle",value:function(e){this.element.style.marginLeft=e?"".concat(30*e,"px"):""}}]),t}(u.ContentBranchViewNode);p.id="paragraph",p.tagName="p",p=h([d.viewNodeFactory.register],p)},"./src/view/nodes/ResizableViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ResizableViewNode",(function(){return c})),n("core-js/modules/es.object.assign");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./src/oo.ts"),a=n("./src/util.ts"),o=n("./src/domUtil.ts"),l=n("./src/view/nodes/AlignableViewNode.ts"),c=function(){function e(){Object(s.default)(this,e)}return Object(i.default)(e,[{key:"onResizableFocus",value:function(){this.resizeEnabled&&(this.resizableSurface.ui.controlsElement.appendChild(this.resizeHandlesElement),this.model.getScalable(),this.setResizableHandlesSizeAndPosition(),this.resizableSurface.off("position",this.setResizableHandlesSizeAndPosition),this.resizableSurface.on("position",this.setResizableHandlesSizeAndPosition))}},{key:"onResizableBlur",value:function(){this.isResizableSetup&&this.root&&(this.resizeHandlesElement.remove(),this.resizableSurface.off("position",this.setResizableHandlesSizeAndPosition))}},{key:"onResizableDragStart",value:function(){this.resizeHandlesElement.classList.add("am-ui-element-hidden")}},{key:"onResizableDragEnd",value:function(){this.resizeHandlesElement.classList.remove("am-ui-element-hidden")}},{key:"onResizableSetup",value:function(){!this.isResizableSetup&&this.root&&(this.resizableSurface=this.root.surface,this.isResizableSetup=!0)}},{key:"onResizableTeardown",value:function(){this.isResizableSetup&&this.root&&(this.onResizableBlur(),this.resizableSurface=null,this.isResizableSetup=!1)}},{key:"onResizableResizing",value:function(e){if(this.resizableOffset=null,this.model.getScalable().setCurrentDimensions(e),!this.outline){var t=this.model.getScalable().currentDimensions;this.resizableElement.style.width="".concat(t.width,"px"),this.resizableElement.style.height="".concat(t.height,"px"),this.setResizableHandlesPosition()}}},{key:"onResizableAttributeChange",value:function(){var e=this.model.getScalable().currentDimensions;this.resizableElement.style.width="".concat(e.width,"px"),this.resizableElement.style.height="".concat(e.height,"px")}},{key:"onResizeHandlesCornerMouseDown",value:function(e){e.preventDefault(),e.stopPropagation(),this.root.surface.ui.context.toggle(!1),this.resizeHandlesElement.classList.add("am-view-resizableNode-handles-resizing"),this.resizeHandlesElement.style.width="".concat(this.resizableElement.clientWidth,"px"),this.resizeHandlesElement.style.height="".concat(this.resizableElement.clientHeight,"px"),this.resizeNwHandleElement.style.margin="0",this.resizeNeHandleElement.style.margin="0",this.resizeSwHandleElement.style.margin="0",this.resizeSeHandleElement.style.margin="0",o.showCursorOverlay(window.getComputedStyle(e.target).cursor),this.resizeInfo={mouseX:e.screenX,mouseY:e.screenY,top:this.resizeHandlesElement.offsetTop,left:this.resizeHandlesElement.offsetLeft,width:this.resizeHandlesElement.clientWidth,height:this.resizeHandlesElement.clientHeight,handle:a.getData(e.target,"handle")},this.resizing=!0,this.root.surface.resizing=!0,this.model.getScalable().setCurrentDimensions({width:this.resizeInfo.width,height:this.resizeInfo.height}),document.addEventListener("mousemove",this.onDocumentMouseMove),document.addEventListener("mouseup",this.onDocumentMouseUp),this.emit("resizeStart")}},{key:"onDocumentMouseMove",value:function(e){if(this.resizing){var t,n;switch(this.resizeInfo.handle){case"se":t=e.screenX-this.resizeInfo.mouseX,n=e.screenY-this.resizeInfo.mouseY;break;case"nw":t=this.resizeInfo.mouseX-e.screenX,n=this.resizeInfo.mouseY-e.screenY;break;case"ne":t=e.screenX-this.resizeInfo.mouseX,n=this.resizeInfo.mouseY-e.screenY;break;case"sw":t=this.resizeInfo.mouseX-e.screenX,n=e.screenY-this.resizeInfo.mouseY}r.hasMixin(this,l.AlignableViewNode)&&"center"===this.align&&(t*=2,n*=2);var s=this.model.getScalable().getBoundedDimensions({width:this.resizeInfo.width+t,height:this.resizeInfo.height+n},e.shiftKey&&this.snapToGrid);this.resizeHandlesElement.style.width="".concat(s.width,"px"),this.resizeHandlesElement.style.height="".concat(s.height,"px"),this.emit("resizing",{width:s.width,height:s.height})}}},{key:"onDocumentMouseUp",value:function(){document.removeEventListener("mousemove",this.onDocumentMouseMove),document.removeEventListener("mouseup",this.onDocumentMouseUp),this.resizeHandlesElement.classList.remove("am-view-resizableNode-handles-resizing"),this.resizing=!1,this.root.surface.resizing=!1,o.hideCursorOverlay();var e=this.resizeHandlesElement.clientWidth,t=this.resizeHandlesElement.clientHeight,n=this.getAttributeChanges(e,t);a.isEmptyObject(n)||this.resizableSurface.model.getFragment().changeAttributes(n),this.emit("resizeEnd")}},{key:"setResizeEnabled",value:function(e){this.resizeEnabled!==e&&(this.resizeEnabled=e,this.focused&&(e?this.onResizableFocus():this.onResizableBlur()))}},{key:"getAttributeChanges",value:function(e,t){var n=this.model.getCurrentDimensions(),s={};return n.width!==e&&(s.width=e),n.height!==t&&(s.height=t),s}},{key:"getResizableOffset",value:function(){return this.resizableOffset||(this.resizableOffset=o.getRelativePosition(this.resizableElement,this.resizableSurface.element)),this.resizableOffset}},{key:"setResizableHandlesSizeAndPosition",value:function(){var e=this.resizableElement.clientWidth,t=this.resizableElement.clientHeight;this.resizableOffset=null,this.setResizableHandlesPosition(),this.resizeHandlesElement.style.width="0",this.resizeHandlesElement.style.height="0",this.resizeNeHandleElement.style.marginRight="-".concat(e,"px"),this.resizeSwHandleElement.style.marginBottom="-".concat(t,"px"),this.resizeSeHandleElement.style.marginRight="-".concat(e,"px"),this.resizeSeHandleElement.style.marginBottom="-".concat(t,"px")}},{key:"setResizableHandlesPosition",value:function(){var e=this.getResizableOffset();this.resizeHandlesElement.style.left="".concat(e.x,"px"),this.resizeHandlesElement.style.top="".concat(e.y,"px")}},{key:"setOriginalDimensions",value:function(e){var t=this.model.getScalable();t.setOriginalDimensions(e),this.canShowScaleLabel=this.showScaleLabel&&t.originalDimensions.width>0&&t.originalDimensions.height>0}}],[{key:"construct",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=Object.assign({snapToGrid:10,outline:!1},n),e.resizableElement=t,e.resizing=!1,e.resizableOffset=null,e.snapToGrid=n.snapToGrid,e.outline=n.outline,e.canShowScaleLabel=!1,e.isResizableSetup=!1,e.resizableSurface=null,e.resizeInfo=null,e.resizeEnabled=!0,e.setResizableHandlesSizeAndPosition=e.setResizableHandlesSizeAndPosition.bind(e),e.onResizeHandlesCornerMouseDown=e.onResizeHandlesCornerMouseDown.bind(e),e.onDocumentMouseMove=e.onDocumentMouseMove.bind(e),e.onDocumentMouseUp=e.onDocumentMouseUp.bind(e),e.on("focus",e.onResizableFocus.bind(e)),e.on("blur",e.onResizableBlur.bind(e)),e.on("setup",e.onResizableSetup.bind(e)),e.on("teardown",e.onResizableTeardown.bind(e)),e.on("resizing",e.onResizableResizing.bind(e)),e.on("resizeEnd",e.onResizableFocus.bind(e)),e.on("dragStart",e.onResizableDragStart.bind(e)),e.on("dragEnd",e.onResizableDragEnd.bind(e)),e.model.on("attributeChange",e.onResizableAttributeChange.bind(e)),e.resizeHandlesElement=document.createElement("div"),e.resizeHandlesElement.className="am-view-resizableNode-handles",e.resizeNwHandleElement=document.createElement("div"),e.resizeNwHandleElement.className="am-view-resizableNode-nwHandle",a.setData(e.resizeNwHandleElement,"handle","nw"),e.resizeHandlesElement.appendChild(e.resizeNwHandleElement),e.resizeNwHandleElement.addEventListener("mousedown",e.onResizeHandlesCornerMouseDown),e.resizeNeHandleElement=document.createElement("div"),e.resizeNeHandleElement.className="am-view-resizableNode-neHandle",a.setData(e.resizeNeHandleElement,"handle","ne"),e.resizeHandlesElement.appendChild(e.resizeNeHandleElement),e.resizeNeHandleElement.addEventListener("mousedown",e.onResizeHandlesCornerMouseDown),e.resizeSwHandleElement=document.createElement("div"),e.resizeSwHandleElement.className="am-view-resizableNode-swHandle",a.setData(e.resizeSwHandleElement,"handle","sw"),e.resizeHandlesElement.appendChild(e.resizeSwHandleElement),e.resizeSwHandleElement.addEventListener("mousedown",e.onResizeHandlesCornerMouseDown),e.resizeSeHandleElement=document.createElement("div"),e.resizeSeHandleElement.className="am-view-resizableNode-seHandle",a.setData(e.resizeSeHandleElement,"handle","se"),e.resizeHandlesElement.appendChild(e.resizeSeHandleElement),e.resizeSeHandleElement.addEventListener("mousedown",e.onResizeHandlesCornerMouseDown)}}]),e}()},"./src/view/nodes/SpanRefViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"SpanRefViewNode",(function(){return m})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/oo.ts"),d=n("./src/view/nodes/LeafViewNode.ts"),h=n("./src/view/nodes/FocusableViewNode.ts"),p=n("./src/view/ViewNodeFactory.ts"),f=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},m=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.default)(this,t),n=Object(r.default)(this,Object(a.default)(t).call(this,e,i)),h.FocusableViewNode.construct(Object(o.default)(n)),n.onAttributeChange=n.onAttributeChange.bind(Object(o.default)(n)),n.model.on("attributeChange",n.onAttributeChange),n.element.classList.add("am-view-spanRefNode","am-view-focusableNode-grip"),n.element.draggable=!0,n.element.contentEditable="false",n.updateTextContent(n.model.element.attributes.spanId),n}return Object(l.default)(t,e),Object(i.default)(t,[{key:"updateTextContent",value:function(e){this.element.textContent="[SPAN REF #".concat(e||"???","]")}},{key:"onAttributeChange",value:function(e,t,n){switch(e){case"spanId":this.updateTextContent(n)}}}]),t}(d.LeafViewNode);m.id="spanRef",m.tagName="span",m=f([u.mixin(h.FocusableViewNode),p.viewNodeFactory.register],m)},"./src/view/nodes/StackItemViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"StackItemViewNode",(function(){return f})),n("core-js/modules/es.array.concat"),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/Range.ts"),d=n("./src/view/nodes/BranchViewNode.ts"),h=n("./src/view/ViewNodeFactory.ts"),p=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},f=function(e){function t(e){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.default)(this,t),(n=Object(a.default)(this,Object(o.default)(t).call(this,e,s))).element.classList.add("am-view-stackItemNode"),n}return Object(l.default)(t,e),Object(r.default)(t,[{key:"getDropPositions",value:function(){var e=this.element.clientWidth,t=this.element.clientHeight,n=Math.min(.5*e,Math.max(.25*e,50));return[{id:"left",rect:{left:0,top:0,right:n,bottom:t,width:n,height:t}},{id:"right",rect:{left:e-n,top:0,right:e,bottom:t,width:n,height:t}}]}},{key:"handleDrop",value:function(e,t){if("left"!==t.id&&"right"!==t.id)return!1;var n=this.root.surface.model,i=this.getOuterRange(),r=n.getLinearFragment(i,!0);r.wrapAllNodes([{type:"stack"},{type:"stackItem"}],[]);var a=(r=n.getLinearFragment(e.getOuterRange())).getData();r.removeContent();var o=[{type:"stackItem"}].concat(Object(s.default)(a),[{type:"/stackItem"}]);return(r=n.getLinearFragment(new u.Range("left"===t.id?i.start+1:i.end+3))).insertContent(o),!0}}]),t}(d.BranchViewNode);f.id="stackItem",f=p([h.viewNodeFactory.register],f)},"./src/view/nodes/StackViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"StackViewNode",(function(){return d})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=n("./src/view/nodes/BranchViewNode.ts"),c=n("./src/view/ViewNodeFactory.ts"),u=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.default)(this,t),(n=Object(i.default)(this,Object(r.default)(t).call(this,e,a))).element.classList.add("am-view-stackNode"),n}return Object(a.default)(t,e),t}(l.BranchViewNode);d.id="stack",d=u([c.viewNodeFactory.register],d)},"./src/view/nodes/TableCellViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TableCellViewNode",(function(){return v})),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.regexp.to-string"),n("core-js/modules/es.string.match");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/get.js"),c=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),u=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),d=n("./src/oo.ts"),h=n("./src/view/nodes/TableCellableViewNode.ts"),p=n("./src/view/nodes/ContentBranchViewNode.ts"),f=n("./src/view/ViewNodeFactory.ts"),m=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(u.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},v=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(s.default)(this,t),n=Object(r.default)(this,Object(o.default)(t).call(this,e,i)),h.TableCellableViewNode.construct(Object(a.default)(n)),n.isEditing=!1;var l=n.model.getRowspan(),c=n.model.getColspan(),u=n.model.getStyle();return n.element.classList.add("am-view-tableCellNode","am-view-tableCellNode-".concat(u)),l>1&&n.element.setAttribute("rowspan",l.toString()),c>1&&n.element.setAttribute("colspan",c.toString()),n.model.on("update",n.onUpdate.bind(Object(a.default)(n))),n.model.on("attributeChange",n.onAttributeChange.bind(Object(a.default)(n))),n.model.on("valueChange",n.onValueChange.bind(Object(a.default)(n))),n}return Object(c.default)(t,e),Object(i.default)(t,[{key:"getTagName",value:function(){var e=this.model.getStyle(),t={data:"td",header:"th"};if(!t[e])throw new Error("Invalid style");return t[e]}},{key:"getRenderedContents",value:function(){var e=Object(l.default)(Object(o.default)(t.prototype),"getRenderedContents",this).call(this);if(!this.isEditing){var n,s=this.model.getValue();if(this.model.getErrorMessage())n="#ERROR!";else if(this.model.getExpression())if("number"==typeof s){var i=(n=s.toPrecision(10)).match(/0+$/);i&&(n=n.substring(0,i.index))}else n=String(s);n&&(e.fragment=document.createDocumentFragment(),e.fragment.appendChild(document.createTextNode(n)))}return e}},{key:"renderContents",value:function(){return this.element.classList.toggle("error",!!this.model.getErrorMessage()),Object(l.default)(Object(o.default)(t.prototype),"renderContents",this).call(this)}},{key:"setEditing",value:function(e){e!==this.isEditing&&(this.isEditing=e,this.element.classList.toggle("am-view-tableCellNode-editing",e),this.element.contentEditable=e.toString(),this.root.surface.activeNode=e?this:null,e||(this.model.parseFormula(),this.model.calculateValue()),this.renderContents())}},{key:"onSplice",value:function(e,n,s){Object(l.default)(Object(o.default)(t.prototype),"onSplice",this).call(this,e,n,s),this.model.parseFormula(),this.model.calculateValue(),this.renderContents()}},{key:"onUpdate",value:function(){this.updateTagName()}},{key:"onAttributeChange",value:function(e,t,n){switch(e){case"colspan":case"rowspan":n>1?this.element.setAttribute(e,n.toString()):this.element.removeAttribute(e);break;case"style":this.element.classList.remove("am-view-tableCellNode-".concat(t)),this.element.classList.add("am-view-tableCellNode-".concat(n)),this.updateTagName()}}},{key:"onValueChange",value:function(){var e=this;this.renderContents(),this.element.classList.add("updated"),setTimeout((function(){return e.element.classList.remove("updated")}))}}]),t}(p.ContentBranchViewNode);v.id="tableCell",v=m([d.mixin(h.TableCellableViewNode),f.viewNodeFactory.register],v)},"./src/view/nodes/TableCellableViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TableCellableViewNode",(function(){return r}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=function(){function e(){Object(s.default)(this,e)}return Object(i.default)(e,null,[{key:"construct",value:function(e){}}]),e}()},"./src/view/nodes/TableRowViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TableRowViewNode",(function(){return d})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),r=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),l=n("./src/view/nodes/BranchViewNode.ts"),c=n("./src/view/ViewNodeFactory.ts"),u=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(o.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.default)(this,t),Object(i.default)(this,Object(r.default)(t).call(this,e,n))}return Object(a.default)(t,e),t}(l.BranchViewNode);d.id="tableRow",d.tagName="tr",d=u([c.viewNodeFactory.register],d)},"./src/view/nodes/TableSectionViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TableSectionViewNode",(function(){return h})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),c=n("./src/view/nodes/BranchViewNode.ts"),u=n("./src/view/ViewNodeFactory.ts"),d=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},h=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).call(this,e,n))}return Object(o.default)(t,e),Object(i.default)(t,[{key:"getTagName",value:function(){var e=this.model.getStyle(),t={header:"thead",body:"tbody",footer:"tfoot"};if(!t[e])throw new Error("Invalid style");return t[e]}}]),t}(c.BranchViewNode);h.id="tableSection",h=d([u.viewNodeFactory.register],h)},"./src/view/nodes/TableViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TableViewNode",(function(){return P})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.concat"),n("core-js/modules/es.array.filter"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.map"),n("core-js/modules/es.array.reverse"),n("core-js/modules/es.array.slice"),n("core-js/modules/es.array.sort"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.set"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s,i=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),r=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),a=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),c=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=n("./node_modules/@babel/runtime/helpers/esm/get.js"),d=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),h=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),p=n("./src/oo.ts"),f=n("./src/util.ts"),m=n("./src/domUtil.ts"),v=n("./src/Range.ts"),b=n("./src/view/nodes/BranchViewNode.ts"),g=n("./src/view/nodes/FocusableViewNode.ts"),y=n("./src/view/nodes/TableCellViewNode.ts"),w=n("./src/view/ViewNodeFactory.ts"),_=n("./src/view/selections/TableSelectionView.ts"),k=n("./src/model/selections/TableSelectionModel.ts"),C=n("./src/model/selections/LinearSelectionModel.ts"),x=n("./src/model/selections/NullSelectionModel.ts"),j=n("./src/model/nodes/TableRowModelNode.ts"),O=n("./src/model/nodes/TableCellModelNode.ts"),S=n("./src/model/TableMatrix.ts"),E=n("./src/model/Transaction.ts"),T=n("./src/ui/contexts/TableContextUi.ts"),I=n("./src/ui/components/ContextMenuComponent.vue"),D=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},P=s=function(e){function t(e){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.default)(this,t),n=Object(o.default)(this,Object(c.default)(t).call(this,e,s)),g.FocusableViewNode.construct(Object(l.default)(n),{focusOnMouseDown:!1}),n.surface=null,n.active=!1,n.editingFragment=null,n.startCell=null,n.fillToCell=null,n.fillMode=null,n.element.classList.add("am-view-tableNode"),n.element.contentEditable="false",n}return Object(d.default)(t,e),Object(a.default)(t,[{key:"onSetup",value:function(){var e=this;if(Object(u.default)(Object(c.default)(t.prototype),"onSetup",this).call(this),this.root){this.surface=this.root.surface,this.menuItems={deleteRows:{text:null,hidden:!1,click:function(){var t=e.surface.model.getSelection();t instanceof k.TableSelectionModel&&e.deleteRows(t.startRow,t.endRow)}},deleteColumns:{text:null,hidden:!1,click:function(){var t=e.surface.model.getSelection();t instanceof k.TableSelectionModel&&e.deleteColumns(t.startCol,t.endCol)}},clearCells:{text:null,click:function(){var t=e.surface.model.getSelection();t instanceof k.TableSelectionModel&&e.clearCells(t.startCol,t.startRow,t.endCol,t.endRow)}},mergeCells:{text:null,hidden:!0,click:function(){var t=e.surface.model.getSelection();t instanceof k.TableSelectionModel&&(t.isSingleCell()?e.unmergeCell(t.startCol,t.startRow):e.mergeCells(t.startCol,t.startRow,t.endCol,t.endRow))}}},this.menu=new I.default({el:document.createElement("div"),data:{items:[this.menuItems.clearCells,null,this.menuItems.deleteColumns,this.menuItems.deleteRows,null,this.menuItems.mergeCells]}}),document.body.appendChild(this.menu.$el),this.selectionBoxEl=document.createElement("div"),this.selectionBoxEl.className="am-view-tableNodeOverlay-selection-box",this.selectionBoxAnchorEl=document.createElement("div"),this.selectionBoxAnchorEl.className="am-view-tableNodeOverlay-selection-box-anchor",this.selectionDepencenciesEl=document.createElement("div"),this.selectionDepencenciesEl.className="am-view-tableNodeOverlay-selection-dependencies",this.fillHandleEl=document.createElement("div"),this.fillHandleEl.className="am-view-tableNodeOverlay-fillHandle",this.fillBoxEl=document.createElement("div"),this.fillBoxEl.className="am-view-tableNodeOverlay-fillBox am-ui-element-hidden",this.context=new T.TableContextUi(this),this.overlayEl=document.createElement("div"),this.overlayEl.className="am-view-tableNodeOverlay am-ui-element-hidden",this.overlayEl.appendChild(this.context.element),this.overlayEl.appendChild(this.selectionBoxEl),this.overlayEl.appendChild(this.selectionDepencenciesEl),this.overlayEl.appendChild(this.selectionBoxAnchorEl),this.overlayEl.appendChild(this.fillBoxEl),this.selectionBoxEl.appendChild(this.fillHandleEl),this.surface.ui.blockersElement.appendChild(this.overlayEl),this.onTableMouseDown=this.onTableMouseDown.bind(this),this.onTableMouseUp=this.onTableMouseUp.bind(this),this.onTableMouseMove=this.onTableMouseMove.bind(this),this.onTableDblClick=this.onTableDblClick.bind(this),this.onTableContextMenu=this.onTableContextMenu.bind(this),this.onHandleMouseDown=this.onHandleMouseDown.bind(this),this.onHandleMouseUp=this.onHandleMouseUp.bind(this),this.onHandleMouseMove=this.onHandleMouseMove.bind(this),this.onSurfaceModelSelect=this.onSurfaceModelSelect.bind(this),this.updateOverlayDebounced=f.debounce(this.updateOverlay.bind(this)),this.element.addEventListener("mousedown",this.onTableMouseDown),this.element.addEventListener("dblclick",this.onTableDblClick),this.element.addEventListener("contextmenu",this.onTableContextMenu),this.fillHandleEl.addEventListener("mousedown",this.onHandleMouseDown),this.surface.model.on("select",this.onSurfaceModelSelect),this.surface.on("position",this.updateOverlayDebounced);var n=!0,s=!1,i=void 0;try{for(var r,a=this.model.eachCell()[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value;o.parseFormula(),o.calculateValue()}}catch(l){s=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}}}},{key:"onTeardown",value:function(){Object(u.default)(Object(c.default)(t.prototype),"onTeardown",this).call(this),this.menu.$destroy(),this.overlayEl.remove(),this.context.destroy(),this.element.removeEventListener("mousedown",this.onTableMouseDown),this.element.removeEventListener("dblclick",this.onTableDblClick),this.surface.model.off("select",this.onSurfaceModelSelect),this.surface.off("position",this.updateOverlayDebounced)}},{key:"onTableMouseDown",value:function(e){var t=this.getCellNodeFromEvent(e);if(t){var n=this.model.matrix.lookupCell(t.model);if(n){var s=this.surface.model.getSelection(),i=e.shiftKey&&this.active&&s instanceof k.TableSelectionModel?{col:s.fromCol,row:s.fromRow}:n;if(e.button===m.MouseButton.right&&s instanceof k.TableSelectionModel&&s.containsCell(i.col,i.row))e.preventDefault();else{var r=new k.TableSelectionModel(this.model.document,this.model.getOuterRange(),i.col,i.row,n.col,n.row).expand();if(this.editingFragment){if(r.equals(this.editingFragment.getSelection()))return;this.setEditing(!1,!0)}this.surface.model.setSelection(r),this.startCell=i,document.addEventListener("mouseup",this.onTableMouseUp),document.addEventListener("mousemove",this.onTableMouseMove),e.preventDefault()}}else e.preventDefault()}}},{key:"onTableMouseUp",value:function(){this.startCell=null,document.removeEventListener("mouseup",this.onTableMouseUp),document.removeEventListener("mousemove",this.onTableMouseMove)}},{key:"onTableMouseMove",value:function(e){var t=this.getCellNodeFromEvent(e);if(t){var n=this.model.matrix.lookupCell(t.model);if(n){var s=new k.TableSelectionModel(this.model.document,this.model.getOuterRange(),this.startCell.col,this.startCell.row,n.col,n.row).expand();this.surface.model.setSelection(s)}}}},{key:"onTableDblClick",value:function(e){if(e.button===m.MouseButton.left&&this.getCellNodeFromEvent(e)&&this.surface.model.getSelection()instanceof k.TableSelectionModel){this.setEditing(!0,!0);var t=this.surface.getOffsetFromEventCoords(e);-1===t?this.setEditing(!0):this.surface.model.setLinearSelection(new v.Range(t))}}},{key:"onTableContextMenu",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.surface.model.getSelection();if(t instanceof k.TableSelectionModel){var n=t.endCol-t.startCol+1,s=t.endRow-t.startRow+1,i=t.getMatrixCells().length;this.menuItems.deleteColumns.text=1===n?"Delete Column":"Delete ".concat(n," Columns"),this.menuItems.deleteRows.text=1===s?"Delete Row":"Delete ".concat(s," Rows"),this.menuItems.clearCells.text=1===i?"Clear Cell":"Clear Cells",this.menuItems.deleteColumns.hidden=n===this.model.matrix.getMaxColCount(),this.menuItems.deleteRows.hidden=s===this.model.matrix.getRowCount(),t.isMergeable()?(this.menuItems.mergeCells.hidden=!1,this.menuItems.mergeCells.text=1===i?"Unmerge Cells":"Merge Cells"):this.menuItems.mergeCells.hidden=!0,this.menu.show()}}},{key:"onHandleMouseDown",value:function(e){this.fillHandleEl.classList.add("filling"),this.fillBoxEl.classList.remove("am-ui-element-hidden");var t=this.getCellNodeFromPoint(e.clientX,e.clientY);t&&(this.fillToCell=t,this.updateFillOverlay()),document.addEventListener("mouseup",this.onHandleMouseUp),document.addEventListener("mousemove",this.onHandleMouseMove),e.preventDefault()}},{key:"onHandleMouseUp",value:function(){var e=this.surface.model.getSelection();if(e instanceof k.TableSelectionModel){var t=this.model.matrix.lookupCell(this.fillToCell.model);this.fillCells(e,"col"===this.fillMode?t.col:t.row,this.fillMode)}this.fillHandleEl.classList.remove("filling"),this.fillBoxEl.classList.add("am-ui-element-hidden"),this.fillToCell=null,document.removeEventListener("mouseup",this.onHandleMouseUp),document.removeEventListener("mousemove",this.onHandleMouseMove)}},{key:"onHandleMouseMove",value:function(e){var t=this.surface.getSelection();if(t instanceof _.TableSelectionView){var n,s=this.surface.ui.element.getBoundingClientRect(),i=f.translateRect(t.getSelectionBoundingRect(),s.left,s.top);Math.min(Math.abs(e.clientY-i.top),Math.abs(e.clientY-i.bottom))>Math.min(Math.abs(e.clientX-i.left),Math.abs(e.clientX-i.right))?(n=this.getCellNodeFromPoint(i.left+1,e.clientY),this.fillMode="row"):(n=this.getCellNodeFromPoint(e.clientX,i.top+1),this.fillMode="col"),n&&n!==this.fillToCell&&(this.fillToCell=n,this.updateFillOverlay())}}},{key:"onSurfaceModelSelect",value:function(e){var t=this.editingFragment&&e instanceof C.LinearSelectionModel&&this.editingFragment.getSelection().getRanges()[0].containsRange(e.getRange())||e instanceof k.TableSelectionModel&&e.tableRange.equalsSelection(this.model.getOuterRange());t?(this.active||this.overlayEl.classList.remove("am-ui-element-hidden"),e instanceof k.TableSelectionModel&&this.updateOverlayDebounced(!0)):!t&&this.active&&(this.overlayEl.classList.add("am-ui-element-hidden"),this.selectionBoxEl.style.top="",this.selectionBoxEl.style.left="",this.selectionBoxEl.style.width="",this.selectionBoxEl.style.height="",this.selectionBoxAnchorEl.style.left="",this.selectionBoxAnchorEl.style.top="",this.selectionBoxAnchorEl.style.width="",this.selectionBoxAnchorEl.style.height="",this.editingFragment&&this.setEditing(!1,!0),this.getActiveCellNode()&&(this.surface.activeNode=null)),this.element.classList.toggle("am-view-tableNode-active",t),this.active=t}},{key:"updateOverlay",value:function(e){if(this.active&&this.root){var t=this.editingFragment?this.editingFragment.getSelection():this.surface.model.getSelection();if(t instanceof k.TableSelectionModel){var n=this.element.getBoundingClientRect(),s=this.surface.ui.element.getBoundingClientRect(),i=this.surface.getSelection(t).getSelectionBoundingRect();if(i){var r=this.getCellNodesFromSelection(t.collapsedToFrom())[0],a=f.translateRect(r.element.getBoundingClientRect(),-n.left,-n.top),o=f.translateRect(i,s.left-n.left,s.top-n.top);this.selectionBoxEl.style.top=o.top+"px",this.selectionBoxEl.style.left=o.left+"px",this.selectionBoxEl.style.width=o.width+1+"px",this.selectionBoxEl.style.height=o.height+1+"px",this.selectionBoxAnchorEl.style.top=a.top+"px",this.selectionBoxAnchorEl.style.left=a.left+"px",this.selectionBoxAnchorEl.style.width=a.width+1+"px",this.selectionBoxAnchorEl.style.height=a.height+1+"px",this.overlayEl.style.top=n.top-s.top+"px",this.overlayEl.style.left=n.left-s.left+"px",this.overlayEl.style.width=n.width+"px";var l=this.model.matrix,c=[];e:for(var u=0,d=l.getMaxColCount();u<d;u++){for(var h=0;h<l.getRowCount();h++){var p=l.getCell(u,h);if(1===p.node.getColspan()){c.push(this.document.getBranchNodeFromOffset(p.node.getOffset()+1).element.getBoundingClientRect().width-1);continue e}}c.push(0)}var v=[],b=!0,g=!1,y=void 0;try{for(var w,_=this.children[Symbol.iterator]();!(b=(w=_.next()).done);b=!0){var C=w.value,x=!0,j=!1,O=void 0;try{for(var S,E=C.children[Symbol.iterator]();!(x=(S=E.next()).done);x=!0){var T=S.value;v.push(T.element.getBoundingClientRect().height-1)}}catch(B){j=!0,O=B}finally{try{x||null==E.return||E.return()}finally{if(j)throw O}}}}catch(B){g=!0,y=B}finally{try{b||null==_.return||_.return()}finally{if(g)throw y}}this.context.updateSizes(c,v),this.context.updateSelection(t.startCol,t.startRow,t.endCol,t.endRow),m.removeAllChildren(this.selectionDepencenciesEl);var I=!0,D=!1,P=void 0;try{for(var A,N=r.model.dependencies[Symbol.iterator]();!(I=(A=N.next()).done);I=!0){var R=A.value.getActualBounds(this.model),M=new k.TableSelectionModel(this.model.document,this.getOuterRange(),R.startCol,R.startRow,R.endCol,R.endRow),L=this.surface.getSelection(M).getSelectionBoundingRect();L=f.translateRect(L,s.left-n.left,s.top-n.top);var F=document.createElement("div");F.className="am-view-tableNodeOverlay-selection-dependency",F.style.left=L.left+"px",F.style.top=L.top+"px",F.style.width=L.width+1+"px",F.style.height=L.height+1+"px",this.selectionDepencenciesEl.appendChild(F)}}catch(B){D=!0,P=B}finally{try{I||null==N.return||N.return()}finally{if(D)throw P}}this.selectionBoxEl.classList.toggle("am-view-tableNodeOverlay-selection-box-fullRow",t.isFullRow()),this.selectionBoxEl.classList.toggle("am-view-tableNodeOverlay-selection-box-fullCol",t.isFullCol())}}}}},{key:"updateFillOverlay",value:function(){var e=this.surface.model.getSelection();if(e instanceof k.TableSelectionModel){var t=this.model.matrix.lookupCell(this.fillToCell.model),n=this.surface.getSelection(new k.TableSelectionModel(this.model.document,this.getOuterRange(),Math.min(e.fromCol,t.col),Math.min(e.fromRow,t.row),Math.max(e.toCol,t.col),Math.max(e.toRow,t.row))),s=this.element.getBoundingClientRect(),i=this.surface.ui.element.getBoundingClientRect(),r=f.translateRect(n.getSelectionBoundingRect(),i.left-s.left,i.top-s.top);this.fillBoxEl.style.left=r.left+"px",this.fillBoxEl.style.top=r.top+"px",this.fillBoxEl.style.width=r.width+1+"px",this.fillBoxEl.style.height=r.height+1+"px"}}},{key:"setEditing",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){if(!(this.surface.model.getSelection()instanceof k.TableSelectionModel))throw new Error("Model selection is not TableSelectionModel");var s=this.surface.model.getSelection();s.isSingleCell()||(s=s.collapsedToFrom(),this.surface.model.setSelection(s));var i=this.getCellNodesFromSelection(s)[0];if(this.editingFragment=this.surface.model.getFragment(s),i.setEditing(!0),!n){var r=i.model.getRange(),a=this.surface.model.documentModel.data.getNearestContentOffset(r.end,-1);a>=r.start&&this.surface.model.setLinearSelection(new v.Range(a))}}else(t=this.getActiveCellNode())&&(t.setEditing(!1),n||this.surface.model.setSelection(this.editingFragment.getSelection()),this.editingFragment=null);this.element.classList.toggle("am-view-tableNode-editing",e),this.overlayEl.classList.toggle("am-view-tableNodeOverlay-editing",e),this.updateOverlay(!1)}},{key:"getActiveCellNode",value:function(){var e=this.surface.activeNode;return(e instanceof y.TableCellViewNode&&e.traverseUp((function(e){return!(e instanceof s)})))===this?e:null}},{key:"getNearestCellNode",value:function(e){return m.closest(e,"table")!==this.element?null:s.getViewNode(m.closest(e,"td, th"))}},{key:"getCellNodeFromPoint",value:function(e,t){return this.getNearestCellNode(document.elementFromPoint(e,t))}},{key:"getCellNodeFromEvent",value:function(e){return this.getNearestCellNode(e.target)}},{key:"getCellNodesFromSelection",value:function(e){var t=this;return e.getMatrixCells().map((function(e){var n=e.node,s=t.getNodeFromOffset(n.getOffset()-t.model.getOffset());if(!(s instanceof y.TableCellViewNode))throw new Error("Expected ".concat(y.TableCellViewNode.name," but got ").concat(s&&s.constructor.name," instead"));return s}))}},{key:"insertEmptyColumn",value:function(e){var t,n=this,s=this.model.matrix;if(e>=s.getMaxColCount())t=s.getRowNodes().map((function(e){var t=O.TableCellModelNode.createData(),s=e.getOuterRange().end-1;return E.Transaction.fromInsertion(n.model.document,s,t)}));else{var i=s.getCol(e),r=new Set;t=[];var a=!0,o=!1,l=void 0;try{for(var c,u=i[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;if(r.has(d.key)||d.col===d.owner.col){var h=s.findClosestCell(d),p=h.node.getOuterRange(),f=h.col<d.col?p.end:p.start,m=O.TableCellModelNode.createData();t.push(E.Transaction.fromInsertion(this.model.document,f,m))}else t.push(this.incrementSpan(d,"col")),r.add(d.key)}}catch(v){o=!0,l=v}finally{try{a||null==u.return||u.return()}finally{if(o)throw l}}}t.reverse(),this.surface.model.change(t)}},{key:"insertEmptyRow",value:function(e){var t=[],n=this.model.matrix;if(e>=n.getRowCount()){var s=j.TableRowModelNode.createData({cellCount:n.getMaxColCount()}),i=this.children[this.children.length-1].getOuterRange().end-1;t.push(E.Transaction.fromInsertion(this.model.document,i,s))}else{var r=n.getRow(e),a=new Set,o=0,l=!0,c=!1,u=void 0;try{for(var d,h=r[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var p=d.value;a.has(p.key)||p.row===p.owner.row?o++:(t.push(this.incrementSpan(p,"row")),a.add(p.key))}}catch(v){c=!0,u=v}finally{try{l||null==h.return||h.return()}finally{if(c)throw u}}var f=j.TableRowModelNode.createData({cellCount:o}),m=n.getRowNode(e).getOffset();t.push(E.Transaction.fromInsertion(this.model.document,m,f))}this.surface.model.change(t)}},{key:"resize",value:function(e,t){var n=this.model.matrix,s=n.getMaxColCount(),i=n.getRowCount(),r=[];if(t>i){var a=n.getRowNode(i-1).getOuterRange().end,o=j.TableRowModelNode.createData({cellCount:e,rowCount:t-i});r.push(E.Transaction.fromInsertion(this.model.document,a,o))}else if(t<i)for(var l=i-1;l>=t;l--)r.push(E.Transaction.fromRemoval(this.model.document,n.getRowNode(l).getOuterRange()));if(e!==s)for(var c=Math.min(i,t)-1;c>=0;c--)if(e>s){var u=n.getRowNode(c).getOuterRange().end-1,d=O.TableCellModelNode.createData({cellCount:e-s});r.push(E.Transaction.fromInsertion(this.model.document,u,d))}else{var h=n.getCell(e,c).node.getOffset(),p=n.getRowNode(c).getOuterRange().end-1;r.push(E.Transaction.fromRemoval(this.model.document,new v.Range(h,p)))}this.surface.model.change(r,new x.NullSelectionModel(this.model.document))}},{key:"deleteColumns",value:function(e,t){for(var n=this.model.matrix,s=[],r=e;r<=t;r++)s.push.apply(s,Object(i.default)(n.getCol(r)));for(var a=[],o=new Set,l=[],c=0,u=s;c<u.length;c++){var d=u[c];if(d.isPlaceholder())o.has(d.key)||(a.push(this.decrementSpan(d.owner,"col",e,t)),o.add(d.key));else if(l.push({action:"delete",cell:d}),d.col+d.node.getColspan()-1>t){var h=t+1,p=d.row,f=d.col+d.node.getColspan()-1,m=d.row+d.node.getRowspan()-1;l.push({action:"insert",cell:n.getCell(h,p),colspan:f-h+1,rowspan:m-p+1,style:d.node.getStyle()})}}l.sort((function(e,t){return S.TableMatrixCell.sortDescending(e.cell,t.cell)}));for(var v=0,b=l;v<b.length;v++){var g=b[v];"insert"===g.action?a.push(this.replacePlaceholder(n,g.cell,g)):a.push(E.Transaction.fromRemoval(this.model.document,g.cell.node.getOuterRange()))}this.surface.model.change(a,new x.NullSelectionModel(this.model.document))}},{key:"deleteRows",value:function(e,t){for(var n=this.model.matrix,s=[],r=e;r<=t;r++)s.push.apply(s,Object(i.default)(n.getRow(r)));for(var a=[],o=new Set,l=[],c=0,u=s;c<u.length;c++){var d=u[c];if(d.isPlaceholder())o.has(d.key)||(a.push(this.decrementSpan(d.owner,"row",e,t)),o.add(d.key));else if(d.row+d.node.getRowspan()-1>t){var h=d.col,p=t+1,f=d.col+d.node.getColspan()-1,m=d.row+d.node.getRowspan()-1;l.push({action:"insert",cell:n.getCell(h,p),colspan:f-h+1,rowspan:m-p+1,style:d.node.getStyle()})}}l.sort((function(e,t){return S.TableMatrixCell.sortDescending(e.cell,t.cell)}));for(var v=0,b=l;v<b.length;v++){var g=b[v];a.push(this.replacePlaceholder(n,g.cell,g))}for(var y=t;y>=e;y--)a.push(E.Transaction.fromRemoval(this.model.document,n.getRowNode(y).getOuterRange()));this.surface.model.change(a,new x.NullSelectionModel(this.model.document))}},{key:"clearCells",value:function(e,t,n,s){for(var i=this.model.matrix,r=[],a=s;a>=t;a--)for(var o=n;o>=e;o--){var l=i.getCell(o,a);l.isPlaceholder()||r.push(E.Transaction.fromRemoval(this.model.document,l.node.getRange()))}this.surface.model.change(r)}},{key:"mergeCells",value:function(e,t,n,s){var i=this.model.matrix.getCells(e,t,n,s),r=[];r.push(E.Transaction.fromAttributeChanges(this.model.document,i[0].node.getOffset(),{colspan:n-e+1,rowspan:s-t+1}));var a=i.filter((function(e){return e.node.getLength()>0}));a.length>1&&alert("Multiple cells contain content.");for(var o=a[0]&&a[0]!==i[0]?this.model.document.data.slice(a[0].node.getRange()):null,l=i.length-1;l>=1;l--)r.push(E.Transaction.fromRemoval(this.model.document,i[l].node.getOuterRange()));o&&r.push(E.Transaction.fromInsertion(this.model.document,i[0].node.getOffset()+1,o)),this.surface.model.change(r),this.cleanup(e,t,n,s)}},{key:"unmergeCell",value:function(e,t){var n=this.model.matrix,s=n.getCell(e,t).owner,i=s.node.getSpans(),r=i.col,a=i.row,o=[];o.push(E.Transaction.fromAttributeChanges(this.model.document,s.node.getOffset(),{colspan:null,rowspan:null}));for(var l=s.row+a-1;l>s.row;l--){var c=n.findClosestCell(n.getCell(s.col,l)),u=c.node.getOuterRange(),d=c.col<s.col?u.end:u.start,h=O.TableCellModelNode.createData({cellCount:r});o.push(E.Transaction.fromInsertion(this.model.document,d,h))}if(r>1){var p=s.node.getOuterRange().end,f=O.TableCellModelNode.createData({cellCount:r-1});o.push(E.Transaction.fromInsertion(this.model.document,p,f))}this.surface.model.change(o)}},{key:"fillCells",value:function(e,t,n){var s,r=this.model.matrix,a=[];if("row"===n){s=e.endRow-e.startRow+1;for(var o=0,l=e.startRow;l<=e.endRow;l++)o++,(l===e.endRow||r.getCells(e.startCol,l,e.endCol,l).every((function(e){return 1===e.node.getRowspan()})))&&(a.push(o),o=0)}else{s=e.endCol-e.startCol+1;for(var c=0,u=e.startCol;u<=e.endCol;u++)c++,(u===e.endCol||r.getCells(u,e.startRow,u,e.endRow).every((function(e){return 1===e.node.getColspan()})))&&(a.push(c),c=0)}var d,h,p,m,b=function(e,n){var i=e%s;n&&a.reverse();for(var r=0;a.length;r++){if(!(i>=a[r]))return n?i?t-i+a[r]:t:t-i;i-=a[r]}return t};"col"===n?(h=e.startRow,m=e.endRow,t>e.endCol?(d=e.endCol+1,p=b(t-d+1,!1)):d=b((p=e.startCol-1)-t+1,!0)):(d=e.startCol,p=e.endCol,t>e.endRow?(h=e.endRow+1,m=b(t-h+1,!1)):h=b((m=e.startRow-1)-t+1,!0));var g=new Set(r.getCells(d,h,p,m,!0).map((function(e){return e.owner.node})).filter((function(e){return e.getColspan()>1||e.getRowspan()>1}))),y=!0,w=!1,_=void 0;try{for(var k,C=g[Symbol.iterator]();!(y=(k=C.next()).done);y=!0){var x=k.value,j=r.lookupCell(x);this.unmergeCell(j.col,j.row)}}catch(ie){w=!0,_=ie}finally{try{y||null==C.return||C.return()}finally{if(w)throw _}}for(var O=[],S=e.startRow;S<=e.endRow;S++){var T=[];if(O.push(T),"col"===n){var I=e.startCol,D=!0,P=!1,A=void 0;try{for(var N,R=a[Symbol.iterator]();!(D=(N=R.next()).done);D=!0){var M=N.value;if(r.getCells(I,S,I+M-1,S).every((function(e){return e.isPlaceholder()})))T.push([]);else{for(var L=r.getCell(I,S);L.isPlaceholder();)L=r.getCell(L.col+1,S);for(var F=r.getCell(I+M-1,S);F.isPlaceholder();)F=r.getCell(F.col-1,S);var B=this.model.document.data.slice(new v.Range(L.node.getOuterRange().start,F.node.getOuterRange().end),!0);T.push(B)}I+=M}}catch(ie){P=!0,A=ie}finally{try{D||null==R.return||R.return()}finally{if(P)throw A}}}else if(r.getCells(e.startCol,S,e.endCol,S).every((function(e){return e.isPlaceholder()})))T.push([]);else{for(var q=r.getCell(e.startCol,S);q.isPlaceholder();)q=r.getCell(q.col+1,S);for(var $=r.getCell(e.endCol,S);$.isPlaceholder();)$=r.getCell($.col-1,S);var U=this.model.document.data.slice(new v.Range(q.node.getOuterRange().start,$.node.getOuterRange().end),!0);T.push(U)}}var z=[];if("col"===n)for(var V=p-d+1,H=m;H>=h;H--){for(var W=r.getCell(d,H),Q=r.getCell(p,H),K=new v.Range(W.node.getOuterRange().start,Q.node.getOuterRange().end),Y=[],G=O[(H-h)%O.length],X=0,J=d>e.endCol?0:G.length-(p-d)%G.length-1;X<V;J++)Y.push.apply(Y,Object(i.default)(G[J%G.length])),X+=a[J%a.length];z.push(E.Transaction.fromReplacement(this.model.document,K,f.clone(Y)))}else for(var Z=m;Z>=h;Z--){var ee=r.getCell(d,Z),te=r.getCell(p,Z),ne=new v.Range(ee.node.getOuterRange().start,te.node.getOuterRange().end),se=O[t>e.endRow?(Z-h)%O.length:O.length-(m-Z)%O.length-1][0];z.push(E.Transaction.fromReplacement(this.model.document,ne,f.clone(se)))}this.surface.model.change(z)}},{key:"cleanup",value:function(e,t,n,s){var i=this.model.matrix;void 0===e&&(e=0,t=0,n=i.getMaxColCount()-1,s=i.getRowCount()-1);for(var r=!1,a=s;a>=t;a--)i.getRow(a).every((function(e){return e.isPlaceholder()}))&&(this.deleteRows(a,a),r=!0);for(var o=n;o>=e;o--)i.getCol(o).every((function(e){return e.isPlaceholder()}))&&(this.deleteColumns(o,o),r=!0);for(var l=this.children.length-1;l>=0;l--){var c=this.children[l];if(0===c.getLength()){var u=E.Transaction.fromRemoval(this.model.document,c.getOuterRange());this.surface.model.change([u]),r=!0}}return r}},{key:"incrementSpan",value:function(e,t){var n;return n="row"===t?{rowspan:e.node.getRowspan()+1}:{colspan:e.node.getColspan()+1},E.Transaction.fromAttributeChanges(this.surface.model.documentModel,e.node.getOffset(),n)}},{key:"decrementSpan",value:function(e,t,n,s){var i,r;"row"===t?(i=e.row,r=e.node.getRowspan()):(i=e.col,r=e.node.getColspan());var a,o=Math.max(0,Math.min(i+r-n,n+s-i));return a="row"===t?{rowspan:o}:{colspan:o},E.Transaction.fromAttributeChanges(this.model.document,e.node.getOffset(),a)}},{key:"replacePlaceholder",value:function(e,t,n){var s=e.findClosestCell(t),i=s.node.getOuterRange(),r=t.col<s.col?i.start:i.end,a=O.TableCellModelNode.createData(n);return E.Transaction.fromInsertion(this.model.document,r,a)}}]),t}(b.BranchViewNode);P.id="table",P.tagName="table",P=s=D([p.mixin(g.FocusableViewNode),w.viewNodeFactory.register],P)},"./src/view/nodes/TextViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TextViewNode",(function(){return h})),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.array.slice"),n("core-js/modules/es.map"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),c=n("./src/view/nodes/LeafViewNode.ts"),u=n("./src/view/ViewNodeFactory.ts"),d=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},h=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.default)(this,t),n.element=null,Object(r.default)(this,Object(a.default)(t).call(this,e,n))}return Object(o.default)(t,e),Object(i.default)(t,[{key:"getAnnotatedHtml",value:function(){var e=this.model.document.getDataFromNode(this.model);if(e.some((function(e){return e.type})))return[];var t,n=function(t,n){var s=e[t];if(Array.isArray(s)){var i=s.slice();i[0]=n,e[t]=i}else e[t]=n};if(!this.model.parent.hasSignificantWhitespace())for(var s=this.constructor.whitespaceHtmlCharacters,i=0;i<e.length;i++){var r=(t=void 0,t=e[i],Array.isArray(t)?t[0]:t);s.has(r)&&n(i,s.get(r))}return e}}]),t}(c.LeafViewNode);h.id="text",h.splitOnEnter=!0,h.whitespaceHtmlCharacters=new Map([["\n","↵"],["\t","➞"]]),h=d([u.viewNodeFactory.register],h)},"./src/view/nodes/VideoViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"VideoViewNode",(function(){return g})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/get.js"),c=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),u=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),d=n("./src/oo.ts"),h=n("./src/view/nodes/LeafViewNode.ts"),p=n("./src/view/nodes/FocusableViewNode.ts"),f=n("./src/view/nodes/ResizableViewNode.ts"),m=n("./src/view/ViewNodeFactory.ts"),v=n("./src/view/components/VideoViewNodeComponent.vue"),b=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(u.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},g=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(s.default)(this,t),(n=Object(r.default)(this,Object(o.default)(t).call(this,e,i))).vm=new v.default({el:document.createElement("div")});var l=n.vm.$el;p.FocusableViewNode.construct(Object(a.default)(n),{focusableElement:l}),f.ResizableViewNode.construct(Object(a.default)(n),l),n.onAttributeChange=n.onAttributeChange.bind(Object(a.default)(n)),n.model.on("attributeChange",n.onAttributeChange),n.vm.init(Object(a.default)(n)),n.element.contentEditable="false",n.element.classList.add("am-view-videoNode"),n.element.appendChild(l);var c=n.model.element.attributes.width;null!=c&&(l.style.width="".concat(c,"px"));var u=n.model.element.attributes.height;return null!=u&&(l.style.height="".concat(u,"px")),null!=c&&null!=u&&n.setOriginalDimensions({width:c,height:u}),n}return Object(c.default)(t,e),Object(i.default)(t,[{key:"onTeardown",value:function(){this.vm.$el.remove(),this.vm.$destroy(),Object(l.default)(Object(o.default)(t.prototype),"onTeardown",this).call(this)}},{key:"onAttributeChange",value:function(e,t,n){var s=this.vm.$el;switch(e){case"width":s.style.width=null==n?"":"".concat(n,"px");break;case"height":s.style.height=null==n?"":"".concat(n,"px")}this.vm.onAttributeChange(e,t,n)}},{key:"showInspector",value:function(){var e=this.root.surface.ui;e.model.setLinearSelection(this.getOuterRange()),setTimeout((function(){return e.commandRegistry.lookup("video/edit").execute(e)}))}}]),t}(h.LeafViewNode);g.id="video",g.tagName="div",g=b([d.mixin(p.FocusableViewNode,f.ResizableViewNode),m.viewNodeFactory.register],g)},"./src/view/nodes/ViewNode.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ViewNode",(function(){return f})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./src/oo.ts"),d=n("./src/Node.ts"),h=n("./src/view/View.ts"),p=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},f=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.default)(this,t),n=Object(r.default)(this,Object(a.default)(t).call(this,e,i)),d.Node.construct(Object(o.default)(n)),n.element&&n.element.classList.toggle("am-view-transcluded",n.isTranscluded()),n}return Object(l.default)(t,e),Object(i.default)(t,[{key:"isFocusable",value:function(){return this.model.isFocusable()}},{key:"isAlignable",value:function(){return this.model.isAlignable()}},{key:"isTranscluded",value:function(){return this.model.isTranscluded()}},{key:"isWrapped",value:function(){return this.model.isWrapped()}},{key:"isContent",value:function(){return this.model.isContent()}},{key:"canContainContent",value:function(){return this.model.canContainContent()}},{key:"replaceableWhenEmpty",value:function(){return this.model.replaceableWhenEmpty()}},{key:"sequencesDisabled",value:function(){return this.model.sequencesDisabled()}},{key:"getChildNodeTypes",value:function(){return this.model.getChildNodeTypes()}},{key:"getParentNodeTypes",value:function(){return this.model.getParentNodeTypes()}},{key:"getSuggestedParentNodeTypes",value:function(){return this.model.getSuggestedParentNodeTypes()}},{key:"shouldIgnoreChildren",value:function(){return this.model.shouldIgnoreChildren()}},{key:"handlesOwnChildren",value:function(){return this.model.handlesOwnChildren()}},{key:"hasSignificantWhitespace",value:function(){return this.model.hasSignificantWhitespace()}},{key:"getLength",value:function(){return this.model.getLength()}},{key:"getOffset",value:function(){return this.model.getOffset()}},{key:"splitOnEnter",value:function(){return this.constructor.splitOnEnter}},{key:"getDropPositions",value:function(){return null}},{key:"handleDrop",value:function(e,t){return!1}}],[{key:"getDescription",value:function(){return""}},{key:"getViewNode",value:function(e){return h.View.getView(e)}}]),t}(h.View);f.splitOnEnter=!1,f=p([u.mixin(d.Node)],f)},"./src/view/selections/LinearSelectionView.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"LinearSelectionView",(function(){return f})),n("core-js/modules/es.array.map"),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),o=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),u=n("./node_modules/rangefix/rangefix.js"),d=n("./src/util.ts"),h=n("./src/view/selections/SelectionView.ts"),p=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},f=function(e){function t(e,n){var s;return Object(i.default)(this,t),(s=Object(a.default)(this,Object(o.default)(t).call(this,e,n))).focusedNode=n.getFocusedNode(e.getRange()),s}return Object(l.default)(t,e),Object(r.default)(t,[{key:"isNativeCursor",value:function(){return!this.focusedNode}},{key:"isFocusedNode",value:function(){return!!this.focusedNode}},{key:"getSelectionBoundingRect",value:function(){var e=this.model.getRange(),t=this.surface.getFocusedNode(e);if(t)return t.getBoundingRect();var n,s=this.surface.getNativeRange(e);if(!s)return null;try{if(!(n=u.getBoundingClientRect(s)))throw new Error}catch(a){n=this.getNodeClientRectFromRange(s)}var i=this.surface.ui.element,r=i.getBoundingClientRect();return n&&r?d.translateRect(n,-r.left+i.scrollLeft,-r.top+i.scrollTop):null}},{key:"getNodeClientRectFromRange",value:function(e){var t=e.endContainer,n=e.endOffset;for(t.nodeType!==Node.TEXT_NODE||0!==n&&n!==t.length?t.nodeType!==Node.ELEMENT_NODE||0!==n&&n!==t.childNodes.length||(t=n?t.lastChild:t.firstChild):t=n?t.previousSibling:t.nextSibling;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.parentNode;if(!t)return null;var s=t.getClientRects()[0];if(!s)return null;var i,r=e.endContainer.childNodes[e.endOffset];if(e.collapsed&&r&&r.nodeType===Node.ELEMENT_NODE&&r.classList.contains("am-view-unicorn")){var a=r.getClientRects()[0];if(!a)return null;i=a.left}else i=s.left;return{top:s.top,bottom:s.bottom,left:i,right:i,width:0,height:s.height}}},{key:"getSelectionRects",value:function(){var e=this.model.getRange(),t=this.surface.getFocusedNode(e);if(t)return t.getHighlightRects();var n=this.surface.getNativeRange(e);if(!n)return null;var i=[];try{if(!(i=Object(s.default)(u.getClientRects(n))).length)throw new Error}catch(o){var r=this.getNodeClientRectFromRange(n);r&&(i=[r])}var a=this.surface.ui.element.getBoundingClientRect();return i&&a?i.map((function(e){return d.translateRect(e,-a.left,-a.top)})):null}}]),t}(h.SelectionView);f.id="linear",f=p([h.selectionViewFactory.register],f)},"./src/view/selections/NullSelectionView.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"NullSelectionView",(function(){return d})),n("core-js/modules/es.object.get-own-property-descriptor");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),c=n("./src/view/selections/SelectionView.ts"),u=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(e,n){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).call(this,e,n))}return Object(o.default)(t,e),Object(i.default)(t,[{key:"isNativeCursor",value:function(){return!1}},{key:"isFocusedNode",value:function(){return!1}},{key:"getSelectionBoundingRect",value:function(){return null}},{key:"getSelectionRects",value:function(){return null}}]),t}(c.SelectionView);d.id="null",d=u([c.selectionViewFactory.register],d)},"./src/view/selections/SelectionView.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"SelectionView",(function(){return o})),n.d(t,"selectionViewFactory",(function(){return l}));var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./src/util.ts"),a=n("./src/CtorFactory.ts"),o=function(){function e(t,n){Object(s.default)(this,e),this.model=t,this.surface=n}return Object(i.default)(e,[{key:"equals",value:function(e){return this.surface===e.surface&&this.model.equals(e.model)}},{key:"getSelectionStartAndEndRects",value:function(){return r.getStartAndEndRects(this.getSelectionRects())}}],[{key:"newFromModel",value:function(e,t){return l.create(e.constructor.id,e,t)}}]),e}();o.id=null;var l=new a.CtorFactory},"./src/view/selections/TableSelectionView.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TableSelectionView",(function(){return p})),n("core-js/modules/es.symbol"),n("core-js/modules/es.symbol.description"),n("core-js/modules/es.symbol.iterator"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.get-own-property-descriptor"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.string.iterator"),n("core-js/modules/web.dom-collections.iterator");var s=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("./node_modules/@babel/runtime/helpers/esm/typeof.js"),c=n("./src/util.ts"),u=n("./src/view/selections/SelectionView.ts"),d=n("./src/view/nodes/TableViewNode.ts"),h=function(e,t,n,s){var i,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(e,n){return Object(s.default)(this,t),Object(r.default)(this,Object(a.default)(t).call(this,e,n))}return Object(o.default)(t,e),Object(i.default)(t,[{key:"isNativeCursor",value:function(){return!1}},{key:"isFocusedNode",value:function(){return!0}},{key:"getSelectionBoundingRect",value:function(){var e=this.surface.ui.element.getBoundingClientRect();if(!e)return null;var t=1/0,n=-1/0,s=1/0,i=-1/0,r=this.surface.documentView.getBranchNodeFromOffset(this.model.tableRange.start+1);if(!(r instanceof d.TableViewNode))throw new Error("Invalid table selection");var a=r.getCellNodesFromSelection(this.model),o=!0,l=!1,u=void 0;try{for(var h,p=a[Symbol.iterator]();!(o=(h=p.next()).done);o=!0){var f=h.value.element.getBoundingClientRect();t=Math.min(t,f.top),n=Math.max(n,f.bottom),s=Math.min(s,f.left),i=Math.max(i,f.right)}}catch(v){l=!0,u=v}finally{try{o||null==p.return||p.return()}finally{if(l)throw u}}var m={top:t,bottom:n,left:s,right:i,width:i-s,height:n-t};return c.translateRect(m,-e.left,-e.top)}},{key:"getSelectionRects",value:function(){return[this.getSelectionBoundingRect()]}},{key:"getTableBoundingRect",value:function(){var e=this.surface.ui.element.getBoundingClientRect();if(!e)return null;var t=this.surface.documentView.getBranchNodeFromOffset(this.model.tableRange.start+1);if(!(t instanceof d.TableViewNode))return null;var n=t.element.getBoundingClientRect();return c.translateRect(n,-e.left,-e.top)}}]),t}(u.SelectionView);p.id="table",p=h([u.selectionViewFactory.register],p)},"./src/view/viewUtil.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"sun",(function(){return c})),n.d(t,"cloud",(function(){return u})),n.d(t,"umbrella",(function(){return d})),n.d(t,"snowman",(function(){return h})),n.d(t,"isBlockElement",(function(){return f})),n.d(t,"isVoidElement",(function(){return m})),n.d(t,"isAnnotationElement",(function(){return v})),n.d(t,"getDataOffset",(function(){return b})),n.d(t,"getSlugOffset",(function(){return g})),n.d(t,"rangeFromSelection",(function(){return y})),n.d(t,"getDomText",(function(){return w})),n.d(t,"getDomHash",(function(){return _})),n.d(t,"isAfterAnnotationBoundary",(function(){return k})),n.d(t,"rejectsCursor",(function(){return C})),n.d(t,"isHardCursorStep",(function(){return x})),n.d(t,"adjacentDomPosition",(function(){return j})),n.d(t,"filePicker",(function(){return S})),n("core-js/modules/es.array.from"),n("core-js/modules/es.array.iterator"),n("core-js/modules/es.object.to-string"),n("core-js/modules/es.set"),n("core-js/modules/es.string.iterator"),n("core-js/modules/es.string.replace"),n("core-js/modules/web.dom-collections.iterator");var s=n("./src/util.ts"),i=n("./src/domUtil.ts"),r=n("./src/view/View.ts"),a=n("./src/view/nodes/ViewNode.ts"),o=n("./src/model/ModelRegistry.ts"),l=n("./src/Range.ts"),c="☀",u="☁",d="☂",h="☃",p={block:new Set(["div","p","table","tbody","thead","tfoot","caption","th","tr","td","ul","ol","li","dl","dt","dd","h1","h2","h3","h4","h5","h6","hgroup","article","aside","body","nav","section","footer","header","figure","figcaption","fieldset","details","blockquote","hr","button","canvas","center","col","colgroup","embed","map","object","pre","progress","video"]),void:new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"])};function f(e){var t="string"==typeof e?e:e.nodeName;return p.block.has(t.toLowerCase())}function m(e){var t="string"==typeof e?e:e.nodeName;return p.void.has(t.toLowerCase())}function v(e){return!(f(e)||m(e)||e.nodeType===Node.ELEMENT_NODE&&e.classList.contains("am-view-branchNode-slug"))}function b(e,t){if(e.nodeType===Node.ELEMENT_NODE&&e.classList.contains("am-view-unicorn")){if(0!==t)throw new Error("Non-zero offset in unicorn");return s.getData(e,"modelOffset")}var n,o,l,c,u=function(e){for(;!e.previousSibling;){if(!(e=e.parentNode))throw new Error("Node has no ancestor with a view association");if(r.View.getView(e)instanceof a.ViewNode)return e}if(e=e.previousSibling,r.View.getView(e)instanceof a.ViewNode)return e;for(;e.lastChild;)if(e=e.lastChild,r.View.getView(e)instanceof a.ViewNode)return e;return e};if(e.nodeType===Node.ELEMENT_NODE?n=e.childNodes.length:e.nodeType===Node.TEXT_NODE&&(n=e.data.length),t<0||void 0!==n&&t>n)throw new Error("domOffset is out of bounds");var d,h=0;if(e.nodeType===Node.ELEMENT_NODE)if(0===e.childNodes.length){if(c=e,(l=a.ViewNode.getViewNode(c))instanceof a.ViewNode)return l.getOffset()+(l.isWrapped()?1:0);o=c}else if(t===e.childNodes.length){if(c=e.lastChild,(l=a.ViewNode.getViewNode(c))instanceof a.ViewNode)return l.getOffset()+l.getOuterLength();for(;c.lastChild;)if(c=c.lastChild,(l=a.ViewNode.getViewNode(c))instanceof a.ViewNode)return l.getOffset()+l.getOuterLength();o=c}else o=u(c=e.childNodes[t]);else e.parentNode.classList.contains("am-view-branchNode-blockSlug")||e.parentNode.classList.contains("am-view-cursorHolder")||(h+=t),o=u(c=e);for(;!((l=a.ViewNode.getViewNode(o))instanceof a.ViewNode);)o.nodeType!==Node.TEXT_NODE||o.parentNode.classList.contains("am-view-branchNode-blockSlug")||o.parentNode.classList.contains("am-view-cursorHolder")||(h+=o.data.length),o=u(o);if(d=l.getOffset(),i.contains(o,c))l.model.isContent()||(d+=l.model.isWrapped()?1:0),l.model.canContainContent()&&(d+=h);else{if(!l.parent)throw new Error("Node is not in document");d+=l.getOuterLength(),l.model.isContent()&&(d+=h)}return d}function g(e){if(0===i.parentIndex(e)){var t=a.ViewNode.getViewNode(e.parentNode).model;return t.getOffset()+ +t.isWrapped()}if(e.previousSibling){var n=a.ViewNode.getViewNode(e.previousSibling).model;return n.getOffset()+n.getOuterLength()}throw new Error("Incorrect slug location")}function y(e){try{return new l.Range(b(e.anchorNode,e.anchorOffset),b(e.focusNode,e.focusOffset))}catch(t){return null}}function w(e){var t="";switch(e.nodeType){case Node.ELEMENT_NODE:case Node.DOCUMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:if(e.classList.contains("am-view-branchNode-blockSlug"))return"";if(e.classList.contains("am-view-cursorHolder"))return"";if(e.classList.contains("am-view-leafNode")){var n=a.ViewNode.getViewNode(e);if(n&&e===n.element){t=s.repeatString(h,n.getOuterLength()+1);break}}else for(e=e.firstChild;e;e=e.nextSibling)t+=w(e);break;case Node.TEXT_NODE:t=e.textContent}return t}function _(e){var t="";switch(e.nodeType){case Node.TEXT_NODE:case Node.CDATA_SECTION_NODE:t="#";break;case Node.ELEMENT_NODE:case Node.DOCUMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:if(!e.classList.contains("am-view-branchNode-blockSlug")&&!e.classList.contains("am-view-cursorHolder")){var n=e.nodeName;for(t+="<".concat(n,">"),e=e.firstChild;e;e=e.nextSibling)t+=_(e);t=(t+="</".concat(n,">")).replace(/##+/g,"#")}}return t}function k(e,t){if(e.nodeType===Node.TEXT_NODE){if(t>0)return!1;t=i.parentIndex(e),e=e.parentNode}if(0===t)return o.modelRegistry.isAnnotation(e);var n=e.childNodes[t-1];return o.modelRegistry.isAnnotation(n)}function C(e){return e.nodeType!==Node.TEXT_NODE&&(!!m(e)||"false"===e.contentEditable)}function x(e){return e.node.nodeType===Node.TEXT_NODE?"internal"===e.type:f(e.node)||C(e.node)}function j(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=e.node,r=e.offset,a=[],o=n.noDescend||C,l=n.stop||x,c=1===t;;)if(r!==(c?s.length||s.childNodes.length:0))if(s.nodeType!==Node.TEXT_NODE){var u=s.childNodes[c?r:r-1];if(u.nodeType!==Node.ELEMENT_NODE||!m(u)&&!o(u)){s=u,r=c?0:s.length||s.childNodes.length;var d={node:s,type:"enter"};if(a.push(d),l(d))return{node:s,offset:r,steps:a}}else{var h={node:u,type:"cross"};if(a.push(h),r+=+t,l(h))return{node:s,offset:r,steps:a}}}else{var p={node:s,type:"internal",offset:r-+c};if(a.push(p),r+=t,l(p))return{node:s,offset:r,steps:a}}else{var f={node:s,type:"leave"};if(a.push(f),!s.parentNode)return{node:null,offset:null,steps:a};if(r=i.parentIndex(s)+ +c,s=s.parentNode,l(f))return{node:s,offset:r,steps:a}}}var O=document.createElement("input");function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};O.multiple=t.multiple||!1,O.accept=t.accept||"",O.onchange=function(){e(Array.from(O.files)),O.onchange=null,O.value=""},O.click()}O.type="file"},0:function(e,t,n){n("./src/style/styles.scss"),e.exports=n("./src/index.ts")},"core-js/modules/es.array.concat":function(t,n){t.exports=e},"core-js/modules/es.array.filter":function(e,n){e.exports=t},"core-js/modules/es.array.find":function(e,t){e.exports=n},"core-js/modules/es.array.from":function(e,t){e.exports=s},"core-js/modules/es.array.includes":function(e,t){e.exports=i},"core-js/modules/es.array.index-of":function(e,t){e.exports=r},"core-js/modules/es.array.iterator":function(e,t){e.exports=a},"core-js/modules/es.array.map":function(e,t){e.exports=o},"core-js/modules/es.array.reverse":function(e,t){e.exports=l},"core-js/modules/es.array.slice":function(e,t){e.exports=c},"core-js/modules/es.array.sort":function(e,t){e.exports=u},"core-js/modules/es.array.splice":function(e,t){e.exports=d},"core-js/modules/es.map":function(e,t){e.exports=h},"core-js/modules/es.number.constructor":function(e,t){e.exports=p},"core-js/modules/es.number.to-fixed":function(e,t){e.exports=f},"core-js/modules/es.object.assign":function(e,t){e.exports=m},"core-js/modules/es.object.get-own-property-descriptor":function(e,t){e.exports=v},"core-js/modules/es.object.get-own-property-names":function(e,t){e.exports=b},"core-js/modules/es.object.keys":function(e,t){e.exports=g},"core-js/modules/es.object.to-string":function(e,t){e.exports=y},"core-js/modules/es.parse-float":function(e,t){e.exports=w},"core-js/modules/es.promise":function(e,t){e.exports=_},"core-js/modules/es.regexp.constructor":function(e,t){e.exports=k},"core-js/modules/es.regexp.flags":function(e,t){e.exports=C},"core-js/modules/es.regexp.to-string":function(e,t){e.exports=x},"core-js/modules/es.set":function(e,t){e.exports=j},"core-js/modules/es.string.ends-with":function(e,t){e.exports=O},"core-js/modules/es.string.from-code-point":function(e,t){e.exports=S},"core-js/modules/es.string.includes":function(e,t){e.exports=E},"core-js/modules/es.string.iterator":function(e,t){e.exports=T},"core-js/modules/es.string.match":function(e,t){e.exports=I},"core-js/modules/es.string.replace":function(e,t){e.exports=D},"core-js/modules/es.string.search":function(e,t){e.exports=P},"core-js/modules/es.string.split":function(e,t){e.exports=A},"core-js/modules/es.string.starts-with":function(e,t){e.exports=N},"core-js/modules/es.string.trim":function(e,t){e.exports=R},"core-js/modules/es.symbol":function(e,t){e.exports=M},"core-js/modules/es.symbol.description":function(e,t){e.exports=L},"core-js/modules/es.symbol.iterator":function(e,t){e.exports=F},"core-js/modules/es.weak-map":function(e,t){e.exports=B},"core-js/modules/web.dom-collections.for-each":function(e,t){e.exports=q},"core-js/modules/web.dom-collections.iterator":function(e,t){e.exports=$},"regenerator-runtime":function(e,t){e.exports=U},"regenerator-runtime/runtime":function(e,t){e.exports=z},vue:function(e,t){e.exports=V}})},e.exports=s(n("ma9I"),n("TeQF"),n("fbCW"),n("pjDv"),n("yq1k"),n("yXV3"),n("4mDm"),n("2B1R"),n("Junv"),n("+2oP"),n("ToJy"),n("pDQq"),n("Tskq"),n("qePV"),n("toAj"),n("zKZe"),n("5DmW"),n("cDke"),n("tkto"),n("07d7"),n("rNhl"),n("5s+n"),n("TWNs"),n("U3f4"),n("JfAA"),n("YGK4"),n("inlA"),n("9tb/"),n("JTJg"),n("PKPk"),n("Rm1S"),n("UxlC"),n("hByQ"),n("EnZy"),n("LKBx"),n("SYor"),n("pNMO"),n("4Brf"),n("0oug"),n("ENF9"),n("FZtP"),n("3bBZ"),n("ls82"),n("ls82"),n("Kw5r"))},dXV4:function(e,t,n){},dYAX:function(e,t,n){"use strict";var s=n("VX/z");n.n(s).a},dYCX:function(e,t,n){"use strict";var s=n("46R7");n.n(s).a},da2A:function(e,t,n){},dafr:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("ma9I"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("UxlC"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("KQm4"),o=n("rePB"),l=n("L2JU"),c=n("mx2J"),u=n("LnxB"),d=n("/Yj0"),h=n("5/Cn");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var f,m={name:"Admin",inject:["courseApi"],components:{SettingsPage:c.a,Message:u.a},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(l.e)(["isSmall","course"]),{appbar:function(){var e=this,t={visible:!0,titleLarge:"%PREV% – Admin",title:"Admin"};return this.rootPageVisible||(t.hamburger=!1,t.secondaryActions=[{icon:"chevron-left",handler:function(){return e.$router.push({name:"admin"})}}]),t},sections:function(){return[[{title:"General",route:"admin-general"},{title:"Discussion",route:"admin-discussion"}].concat(Object(a.a)(this.course.features.exams?[{title:"Exams",route:"admin-exams"}]:[]),[{title:"Advanced",route:"admin-advanced"}])]},compact:function(){return this.isSmall},rootPageVisible:function(){return"admin"===this.$route.name}}),created:function(){var e=this;this.$watch((function(){return!e.compact&&"admin"===e.$route.name}),(function(t){t&&e.$router.replace({name:e.sections[0][0].route})}),{immediate:!0})},beforeRouteUpdate:function(e,t,n){this.$refs.page&&this.$refs.page.scrollDetail(0),n()},methods:{activate:(f=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.b({icon:"question",title:"Activate course?",text:"Activating the course will make it accessible to students who are enrolled in it.",primaryAction:"Activate"});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,this.courseApi.update(this.course.id,{status:"active"});case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(4),d.b({type:"error",text:"Unable to activate course."}),e.abrupt("return");case 13:this.course.status="active",d.b({type:"success",text:"Activated course."});case 15:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(){return f.apply(this,arguments)})}},v=(n("Q8YJ"),n("KHd+")),b=Object(v.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("SettingsPage",{ref:"page",staticClass:"admin",attrs:{compact:e.compact,sections:e.sections,"root-page-visible":e.rootPageVisible,"detail-max-width":850}},[n("div",{staticClass:"adm-content"},["inactive"===e.course.status?n("Message",{staticClass:"adm-message",attrs:{type:"warning"}},[e._v("\n\t\t\tThis course has not been activated yet. It will be inaccessible to students\n\t\t\tuntil it is activated. "),n("a",{on:{click:e.activate}},[e._v("Activate")])]):e._e(),e._v(" "),n("RouterView")],1)])}),[],!1,null,null,null);t.default=b.exports},dazs:function(e,t,n){"use strict";var s=n("t9Yz");n.n(s).a},"db+F":function(e,t,n){"use strict";var s=n("SBq4"),i=n("bBMf"),r=n("PBi1"),a=n("kUIt"),o={directives:{Autofocus:s.a},components:{Alert:i.a,AlertButton:r.a,KeyboardShortcut:a.a},props:{action:{type:String,required:!0}},computed:{shortcut:function(){switch(this.action){case"cut":return{default:"Control+x",mac:"Meta+x"};case"copy":return{default:"Control+c",mac:"Meta+c"};case"paste":return{default:"Control+v",mac:"Meta+v"}}}}},l=n("KHd+"),c=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Alert",{attrs:{icon:"info"},scopedSlots:e._u([{key:"primaryActions",fn:function(){return[n("AlertButton",{directives:[{name:"autofocus",rawName:"v-autofocus"}],on:{click:function(t){return e.$emit("action",!0)}}},[e._v("OK")])]},proxy:!0}])},[e._v("\n\tUse "),n("KeyboardShortcut",{attrs:{value:e.shortcut}}),e._v(" keyboard shortcut to "+e._s(e.action)+".\n\n\t")],1)}),[],!1,null,null,null);t.a=c.exports},dbWh:function(e,t,n){},dd2Y:function(e,t,n){"use strict";var s=n("5DV3"),i=n("Edju"),r=n("TdcQ"),a=n("xtk+"),o={components:{QuizQuestionElement:s.a,FormLayout:i.a,FormLayoutRow:r.a,EdInput:a.a},props:{value:{type:Object,required:!0},editable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},number:{type:String,default:null},showButtons:{type:Boolean,default:!1}}},l=(n("zO1N"),n("KHd+")),c=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("QuizQuestionElement",{attrs:{value:e.value.quizQuestion,editable:e.editable,disabled:e.disabled,compact:e.compact,number:e.number,"show-buttons":e.showButtons,assessible:""},on:{edit:function(t){return e.$emit("edit",t)},save:function(t){return e.$emit("save",t)},cancel:function(t){return e.$emit("cancel",t)}},scopedSlots:e._u([{key:"actions",fn:function(){return[e._t("actions")]},proxy:!0}],null,!0)},[e.editable?n("div",{staticClass:"bqqei-question-meta-edit"},[n("FormLayout",{staticClass:"bqqei-question-meta-layout"},[n("FormLayoutRow",{attrs:{label:"Level"}},[n("EdInput",{staticClass:"bqqei-input",attrs:{disabled:e.disabled},model:{value:e.value.level,callback:function(t){e.$set(e.value,"level",t)},expression:"value.level"}})],1),e._v(" "),n("FormLayoutRow",{attrs:{label:"Topic"}},[n("EdInput",{staticClass:"bqqei-input",attrs:{disabled:e.disabled},model:{value:e.value.topic,callback:function(t){e.$set(e.value,"topic",t)},expression:"value.topic"}})],1),e._v(" "),n("FormLayoutRow",{attrs:{label:"Category"}},[n("EdInput",{staticClass:"bqqei-input",attrs:{disabled:e.disabled},model:{value:e.value.category,callback:function(t){e.$set(e.value,"category",t)},expression:"value.category"}})],1),e._v(" "),n("FormLayoutRow",{attrs:{label:"Subcategory"}},[n("EdInput",{staticClass:"bqqei-input",attrs:{disabled:e.disabled},model:{value:e.value.subcategory,callback:function(t){e.$set(e.value,"subcategory",t)},expression:"value.subcategory"}})],1),e._v(" "),n("FormLayoutRow",{attrs:{label:"Difficulty"}},[n("EdInput",{staticClass:"bqqei-input",attrs:{disabled:e.disabled},model:{value:e.value.difficulty,callback:function(t){e.$set(e.value,"difficulty",t)},expression:"value.difficulty"}})],1)],1)],1):n("div",{staticClass:"bqqei-question-meta-cells"},[n("div",{staticClass:"bqqei-question-meta-cell"},[n("div",{staticClass:"bqqei-question-meta-heading"},[e._v("Level:")]),e._v(" "),n("div",{staticClass:"bqqei-question-meta-text"},[e._v(e._s(e.value.level))])]),e._v(" "),n("div",{staticClass:"bqqei-question-meta-cell"},[n("div",{staticClass:"bqqei-question-meta-heading"},[e._v("Topic:")]),e._v(" "),n("div",{staticClass:"bqqei-question-meta-text"},[e._v(e._s(e.value.topic))])]),e._v(" "),n("div",{staticClass:"bqqei-question-meta-cell"},[n("div",{staticClass:"bqqei-question-meta-heading"},[e._v("Category:")]),e._v(" "),n("div",{staticClass:"bqqei-question-meta-text"},[e._v(e._s(e.value.category))])]),e._v(" "),n("div",{staticClass:"bqqei-question-meta-cell"},[n("div",{staticClass:"bqqei-question-meta-heading"},[e._v("Subcategory:")]),e._v(" "),n("div",{staticClass:"bqqei-question-meta-text"},[e._v(e._s(e.value.subcategory))])]),e._v(" "),n("div",{staticClass:"bqqei-question-meta-cell"},[n("div",{staticClass:"bqqei-question-meta-heading"},[e._v("Difficulty:")]),e._v(" "),n("div",{staticClass:"bqqei-question-meta-text"},[e._v(e._s(e.value.difficulty))])]),e._v(" "),n("div",{staticClass:"bqqei-question-meta-cell"},[n("div",{staticClass:"bqqei-question-meta-heading"},[e._v("Author:")]),e._v(" "),n("div",{staticClass:"bqqei-question-meta-text"},[e._v(e._s(e.value.userName||"-"))])])])])}),[],!1,null,null,null);t.a=c.exports},deQZ:function(e,t,n){"use strict";var s=n("CJeV");n.n(s).a},dgX9:function(e,t,n){"use strict";n.r(t);var s,i=n("o0o1"),r=n.n(i),a=(n("ls82"),n("HaE+")),o=(n("4D86"),n("CXe4")),l=n("NC1X"),c=n("IbLZ"),u=n("/Yj0"),d={name:"StartActivateAccount",components:{Terms:o.a,Spinner:l.a,EdField:c.a},inject:["userApi","sessionService"],data:function(){return{password1:"",password2:"",loading:!1,errorMessage:null,appbar:{title:"Activate Account"}}},created:function(){this.sessionService.logOut()},methods:{activate:(s=Object(a.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loading){e.next=2;break}return e.abrupt("return");case 2:if(this.password1===this.password2){e.next=5;break}return this.errorMessage="Passwords do not match.",e.abrupt("return");case 5:return this.loading=!0,e.prev=6,e.next=9,this.userApi.activate(this.$route.params.token,this.password1);case 9:t=e.sent,e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(6),400===e.t0.status&&"token_invalid"===e.t0.data.code&&(u.b({type:"error",text:"Token is invalid. Reset your password instead."}),n={},this.$route.query.email&&(n.email=this.$route.query.email),this.$router.push({name:"forgot-password",query:n})),e.abrupt("return");case 16:return e.prev=16,this.loading=!1,e.finish(16);case 19:return e.prev=19,e.next=22,this.sessionService.logInWithToken(t);case 22:e.next=29;break;case 24:return e.prev=24,e.t1=e.catch(19),u.b({type:"success",text:"Activation successful."}),this.$router.push({name:"login"}),e.abrupt("return");case 29:u.b({type:"success",text:"Activation successful. Welcome!"}),this.$router.push({name:"dashboard"});case 31:case"end":return e.stop()}}),e,this,[[6,12,16,19],[19,24]])}))),function(){return s.apply(this,arguments)})}},h=n("KHd+"),p=Object(h.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"start-container"},[n("form",{staticClass:"start-form",attrs:{method:"POST",novalidate:""},on:{submit:function(t){return t.preventDefault(),e.activate(t)}}},[n("div",{staticClass:"start-title"},[n("RouterLink",{attrs:{to:"/"}},[e._v("Ed")])],1),e._v(" "),e.errorMessage?n("div",{staticClass:"start-message"},[e._v(e._s(e.errorMessage))]):e._e(),e._v(" "),e.$route.query.email?n("EdField",{staticClass:"start-field",scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Email")]},proxy:!0}],null,!1,1485928759)},[e._v(" "),n("input",{staticClass:"start-input",attrs:{type:"text",name:"email",disabled:e.loading,readonly:""},domProps:{value:e.$route.query.email}})]):e._e(),e._v(" "),n("EdField",{staticClass:"start-field",scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Password")]},proxy:!0}])},[e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password1,expression:"password1"}],staticClass:"start-input",attrs:{type:"password",autocomplete:"new-password",name:"password",disabled:e.loading,autofocus:""},domProps:{value:e.password1},on:{input:function(t){t.target.composing||(e.password1=t.target.value)}}})]),e._v(" "),n("EdField",{staticClass:"start-field",scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Retype password")]},proxy:!0}])},[e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password2,expression:"password2"}],staticClass:"start-input",attrs:{type:"password",autocomplete:"new-password",disabled:e.loading},domProps:{value:e.password2},on:{input:function(t){t.target.composing||(e.password2=t.target.value)}}})]),e._v(" "),n("button",{staticClass:"start-btn",attrs:{type:"submit",disabled:e.loading}},[e._v("\n\t\t\tActivate account\n\t\t\t"),e.loading?n("Spinner",{staticClass:"start-spinner"}):e._e()],1),e._v(" "),n("Terms"),e._v(" "),n("div",{staticClass:"start-footer"},[n("p",[n("RouterLink",{attrs:{to:{name:"login"}}},[e._v("Back to login")])],1)])],1)])}),[],!1,null,null,null);t.default=p.exports},dlxV:function(e,t,n){"use strict";var s=n("5b8u");n.n(s).a},dmZ5:function(e,t,n){},dnyL:function(e,t,n){"use strict";var s=n("75/S");n.n(s).a},dv2s:function(e,t,n){"use strict";var s=n("uexA");n.n(s).a},"e/ba":function(e,t,n){},e5Oz:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));n("yq1k"),n("2B1R"),n("JTJg"),n("Rm1S"),n("UxlC");var s=n("1OyB"),i=n("vuIU"),r=function(){function e(){Object(s.a)(this,e),this.index=null,this.string=null}return Object(i.a)(e,[{key:"eof",value:function(){return this.index>=this.string.length}},{key:"eol",value:function(){return this.peek().match(/[\n\r]/)}},{key:"next",value:function(){return this.string[this.index++]}},{key:"peek",value:function(){return this.string[this.index]}},{key:"parse",value:function(e){this.index=0,this.string=e;for(var t=[];!this.eof();)t.push(this.parseRecord());return this.index=null,this.string=null,t}},{key:"parseRecord",value:function(){for(var e=[];!this.eof()&&!this.eol();)e.push(this.parseField());return"\r"===this.peek()&&this.next(),"\n"===this.peek()&&this.next(),e}},{key:"parseField",value:function(){var e="",t=!1;for('"'===this.peek()&&(this.next(),t=!0);!this.eof()&&(!this.eol()||t);){var n=this.next();if(","===n&&!t)break;if('"'===n&&t){if('"'!==this.peek()){t=!1;continue}this.next()}e+=n}return e}}]),e}();function a(e){return(new r).parse(e)}function o(e){return e.map((function(e){return e.map((function(e){return e.includes(",")?'"'+e.replace(/"/g,'""')+'"':e})).join(",")})).join("\n")}},e7Lu:function(e,t,n){"use strict";var s=n("UOoF");n.n(s).a},eEzz:function(e,t,n){"use strict";var s=n("jyOL");n.n(s).a},eIwD:function(e,t,n){"use strict";var s=n("sTk7");n.n(s).a},eUu8:function(e,t,n){"use strict";var s=n("TptF");n.n(s).a},ebOn:function(e,t,n){},ee8O:function(e,t,n){},ejQJ:function(e,t,n){"use strict";var s=n("HJLP");n.n(s).a},ekqB:function(e,t,n){"use strict";var s=n("YXQG");n.n(s).a},eltp:function(e,t,n){},euHd:function(e,t,n){},euJo:function(e,t,n){},evZ0:function(e,t,n){},"f+aO":function(e,t,n){},f1nc:function(e,t,n){},f8eo:function(e,t,n){"use strict";var s=n("fWrQ");n.n(s).a},f92e:function(e,t,n){"use strict";var s=n("Eg6a");n.n(s).a},fJT6:function(e,t,n){"use strict";var s=n("4KyP");n.n(s).a},fLbO:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("4Brf"),n("0oug"),n("TeQF"),n("fbCW"),n("yXV3"),n("4mDm"),n("pDQq"),n("qePV"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("YGK4"),n("PKPk"),n("FZtP"),n("3bBZ");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("L2JU"),l=n("VlpE"),c=n("Kaxq"),u=n("Yswc"),d=n("gD3A"),h=n("G7T9"),p={functional:!0,render:function(e,t){var n=t.parent.$store,s=n.getters.isTutor,i=n.state.course.settings.discussion,r=Object(h.i)(t.data,{props:{savedReplies:s&&i.saved_replies_enabled&&!!i.saved_replies&&i.saved_replies.length>0}});return e(d.a,r,t.children)}},f=n("KHd+"),m=Object(f.a)(p,void 0,void 0,!1,null,null,null).exports,v=n("4K9I"),b=n("WmPt"),g={functional:!0,props:{value:{type:Boolean,default:void 0}},render:function(e,t){var n=t.parent.$t.bind(t.parent),s=t.props.value,i=t.listeners.input;return[e(c.a,{key:"notWatching",attrs:{text:n("discussion.watchMenu.notWatching.text"),subtext:n("discussion.watchMenu.notWatching.subtext"),checked:null===s},on:{click:function(){return i(null)}}}),e(c.a,{key:"watching",attrs:{text:n("discussion.watchMenu.watching.text"),subtext:n("discussion.watchMenu.watching.subtext"),checked:!0===s},on:{click:function(){return i(!0)}}}),e(c.a,{key:"ignoring",attrs:{text:n("discussion.watchMenu.ignoring.text"),subtext:n("discussion.watchMenu.ignoring.subtext"),checked:!1===s},on:{click:function(){return i(!1)}}})]}},y=Object(f.a)(g,void 0,void 0,!1,null,null,null).exports;function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var _={functional:!0,render:function(e,t){return e("button",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.data,{class:["discuss-banner-button",t.data.class]}),t.children)}},k=(n("HLMg"),Object(f.a)(_,void 0,void 0,!1,null,null,null).exports),C=n("t9aX"),x=n("0EHH"),j=n("oDEV"),O={components:{TypingIndicator:C.a,NameList:x.a,FadeTransition:j.a},props:{names:{type:Array,default:function(){return[]}}}},S=(n("yvbN"),Object(f.a)(O,(function(){var e=this.$createElement,t=this._self._c||e;return t("FadeTransition",{attrs:{duration:.1}},[this.names.length?t("div",{staticClass:"discuss-typing-indicator"},[t("TypingIndicator",{staticClass:"dti-indicator"}),this._v(" "),t("span",{staticClass:"dti-names"},[t("NameList",{attrs:{names:this.names}}),this._v("\n\t\t\t"+this._s(this.names.length>1?"are":"is")+" typing\n\t\t")],1)],1):this._e()])}),[],!1,null,null,null).exports),E=n("wd/R"),T=n.n(E),I=n("F3Tp"),D=n("ltWs"),P=n("CkVh"),A=n("83PK"),N=n("JBdv"),R=n("HYmm"),M=n("IbLZ"),L=n("6XG0");function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var B={components:{EdField:M.a,EdCheck:L.a,EdButton:v.a,Amber:m},props:{value:{type:String,default:void 0},disabled:{type:Boolean,default:!1}},data:function(){return{commentEnabled:!!this.value,anonymous:!0}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.c)("discuss",["canMention"])),methods:{onRejectClick:function(){this.$emit("reject",{comment:this.commentEnabled,anonymous:this.anonymous})}}},q=(n("M21B"),Object(f.a)(B,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"discuss-approve-widget"},[n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v(e._s(e.$t("discussion.approveWidget.heading")))]},proxy:!0}])},[e._v(" "),n("div",[n("p",{staticClass:"daw-inline"},[n("EdCheck",{attrs:{label:e.$t("discussion.approveWidget.commentCheckbox.label"),description:e.$t("discussion.approveWidget.commentCheckbox.description"),disabled:e.disabled},model:{value:e.commentEnabled,callback:function(t){e.commentEnabled=t},expression:"commentEnabled"}})],1),e._v(" "),e.commentEnabled?[n("p",{staticClass:"daw-inline"},[n("EdCheck",{attrs:{label:e.$t("discussion.approveWidget.anonymousCheckbox.label"),description:e.$t("discussion.approveWidget.anonymousCheckbox.description"),disabled:e.disabled},model:{value:e.anonymous,callback:function(t){e.anonymous=t},expression:"anonymous"}})],1),e._v(" "),n("Amber",{staticClass:"daw-amber",attrs:{value:e.value,disabled:e.disabled,autofocus:"","can-mention":e.canMention},on:{input:function(t){return e.$emit("input",t)}}})]:e._e()],2),e._v(" "),n("div",{staticClass:"daw-actions"},[n("EdButton",{attrs:{disabled:e.disabled},on:{click:function(t){return e.$emit("cancel")}}},[e._v("\n\t\t\t\t"+e._s(e.$t("cancelButton"))+"\n\t\t\t")]),e._v(" "),n("EdButton",{staticClass:"primary",attrs:{disabled:e.disabled},on:{click:e.onRejectClick}},[e._v("\n\t\t\t\t"+e._s(e.$t("discussion.rejectButton"))+"\n\t\t\t")])],1)])],1)}),[],!1,null,null,null).exports),$=n("Pa8A");function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var z={inject:["keyboardShortcutManager"],props:{value:{type:String,default:void 0},originalValue:{type:String,default:void 0},isPrivate:{type:Boolean,default:!1},isPrivateDisabled:{type:Boolean,default:!1},isAnonymous:{type:Boolean,default:!1},isAnonymousVisible:{type:Boolean,default:!1},update:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.e)(["course"]),{},Object(o.c)(["isStaff"]),{},Object(o.c)("discuss",["canMention"]),{isPrivateHidden:function(){return!this.course.settings.discussion.private_comments||!this.isStaff}}),mounted:function(){var e=this;this.disposable=this.keyboardShortcutManager.registerMany([{description:"Save comment",shortcut:{default:"Control+s",mac:"Meta+s"},handler:function(){return e.$emit("post")}},{description:"Cancel comment",shortcut:"Escape",handler:function(){return e.$emit("cancel")}}],this.$el)},destroyed:function(){this.disposable&&this.disposable.dispose()}},V=n("NC1X"),H={directives:{Tooltip:$.a},components:{Amber:m,Spinner:V.a,EdButton:v.a,EdCheck:L.a,FadeTransition:j.a},extends:z},W=(n("Ga/P"),Object(f.a)(H,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"discuss-reply-compact"},[n("div",{staticClass:"drc-inner"},[n("Amber",{staticClass:"drc-amber",attrs:{value:e.value,"original-value":e.originalValue,autofocus:""},on:{input:function(t){return e.$emit("input",t)}}}),e._v(" "),n("div",{staticClass:"drc-actions"},[e.isPrivateHidden?e._e():n("EdCheck",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("discussion.commentEdit.privateDescription"),expression:"$t('discussion.commentEdit.privateDescription')"}],staticClass:"drc-private",attrs:{disabled:e.loading||e.isPrivateDisabled,value:e.isPrivate,label:e.$t("discussion.commentEdit.privateInput"),"can-mention":e.canMention},on:{input:function(t){return e.$emit("update:isPrivate",t)}}}),e._v(" "),n("EdButton",{staticClass:"drc-action",on:{click:function(t){return e.$emit("cancel")}}},[e._v("\n\t\t\t\t"+e._s(e.$t("cancelButton"))+"\n\t\t\t")]),e._v(" "),n("EdButton",{staticClass:"drc-action primary",on:{click:function(t){return e.$emit("post")}}},[e._v("\n\t\t\t\t"+e._s(e.$t((e.update?"save":"post")+"Button"))+"\n\t\t\t")])],1),e._v(" "),n("FadeTransition",[e.loading?n("div",{staticClass:"drc-overlay"},[n("Spinner",{staticClass:"drc-spinner"})],1):e._e()])],1)])}),[],!1,null,null,null).exports),Q=n("tjHA"),K=n("kvrn"),Y=n.n(K),G={components:{ShowMore:n("EML8").a,EdButtonLink:Q.a,ItemChildren:{functional:!0,render:function(e,t){var n=t.props.item,s=t.parent,i=s.keySelector,r=s.childrenSelector,a=s.depth,o=s.maxDepth,l=s.maxLevelLength,c=s.$scopedSlots,u=r(n);return u&&u.length>0&&e(G,Y()([{attrs:{items:u,parent:n,keySelector:i,childrenSelector:r,depth:a+1,maxDepth:o,maxLevelLength:l}},{scopedSlots:c}]))}}},props:{parent:{type:Object,default:void 0},items:{type:Array,default:function(){return[]}},keySelector:{type:Function,default:function(e,t){return t}},childrenSelector:{type:Function,default:function(){return null}},depth:{type:Number,default:0},maxDepth:{type:Number,default:1/0},maxLevelLength:{type:Number,default:3}},data:function(){return{semiCollapsed:!0,fullyCollapsed:!1}},computed:{isExpanderVisible:function(){return this.depth>0&&this.depth<=this.maxDepth},collapsedCount:function(){return this.fullyCollapsed?0:this.maxLevelLength}},methods:{toggleFullyCollapsed:function(){this.fullyCollapsed=!this.fullyCollapsed}}},X=G,J=(n("ekqB"),{components:{NestedLayoutItems:Object(f.a)(X,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"neslay-items"},[e.isExpanderVisible?e._t("expander",null,{toggle:e.toggleFullyCollapsed}):e._e(),e._v(" "),n("div",{staticClass:"neslay-children"},[n("ShowMore",{attrs:{items:e.items,"collapsed-count":e.collapsedCount,expanded:!e.semiCollapsed&&!e.fullyCollapsed},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.item,i=t.index;return[e._t("default",null,{item:s,index:i,parent:e.parent,depth:e.depth,maxDepth:e.maxDepth}),e._v(" "),n("ItemChildren",{attrs:{item:s}})]}},{key:"footer",fn:function(t){var n=t.totalCount,s=t.collapsedCount,i=t.hiddenCount;return[e._t("footer",null,{totalCount:n,collapsedCount:s,hiddenCount:i,semiCollapsed:e.semiCollapsed,setSemiCollapsed:function(t){return e.semiCollapsed=t},fullyCollapsed:e.fullyCollapsed,setFullyCollapsed:function(t){return e.fullyCollapsed=t}})]}}],null,!0)})],1)],2)}),[],!1,null,null,null).exports},props:{items:{type:Array,default:function(){return[]}},keySelector:{type:Function,default:function(e,t){return t}},childrenSelector:{type:Function,default:function(){return null}},depth:{type:Number,default:0},maxDepth:{type:Number,default:1/0},maxLevelLength:{type:Number,default:3}}}),Z=Object(f.a)(J,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("NestedLayoutItems",{attrs:{items:e.items,"key-selector":e.keySelector,"children-selector":e.childrenSelector,depth:e.depth,"max-depth":e.maxDepth,"max-level-length":e.maxLevelLength},scopedSlots:e._u([{key:"default",fn:function(t){return[e._t("default",null,null,t)]}},{key:"footer",fn:function(t){return[e._t("childrenFooter",null,null,t)]}},{key:"expander",fn:function(t){return[e._t("expander",null,null,t)]}}],null,!0)})}),[],!1,null,null,null).exports,ee={components:{EdButtonLink:Q.a,NestedLayout:Z},props:{comments:{type:Array,required:!0}}},te=(n("8m/x"),Object(f.a)(ee,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"discuss-comments"},[n("NestedLayout",{attrs:{items:e.comments,"key-selector":function(e){return e.id},"children-selector":function(e){return e.comments},"max-depth":1,"max-level-length":1/0},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.item,s=t.parent,i=t.depth,r=t.maxDepth;return[e._t("default",null,{comment:n,parent:s,replyToVisible:i>r})]}},{key:"childrenFooter",fn:function(t){var s=t.hiddenCount,i=(t.semiCollapsed,t.setSemiCollapsed),r=t.fullyCollapsed,a=t.setFullyCollapsed;return[r||s?n("div",{staticClass:"dcs-footer"},[r?n("EdButtonLink",{on:{click:function(e){return a(!1)}}},[e._v(e._s(e.$t("discussion.showReplies")))]):n("EdButtonLink",{on:{click:function(e){return i(!1)}}},[e._v(e._s(e.$tc("showCountMore",s)))])],1):e._e()]}},{key:"expander",fn:function(t){return[e._t("expander",null,null,t)]}}],null,!0)})],1)}),[],!1,null,null,null).exports);function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ie={functional:!0,render:function(e,t){return e("span",se({},t.data,{class:["discuss-private-badge",t.data.class],attrs:se({tooltip:t.parent.$t("discussion.privateBadgeTooltip")},t.data.attrs||{})}),[e(b.a,{staticClass:"dpb-icon",attrs:{icon:"hidden"}})," ",t.parent.$t("discussion.privateBadgeText")])}},re=(n("veFJ"),Object(f.a)(ie,void 0,void 0,!1,null,null,null).exports),ae=(n("zKZe"),n("clw3")),oe=n("5/Cn"),le=n("/Yj0"),ce=n("hSdx"),ue=n("9Arg"),de=n("/jHr"),he=n("8PNo"),pe=n("FfD9");function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ve,be,ge,ye,we,_e,ke={name:"comment",inject:["discussApi","eventBus"],props:{thread:{type:Object,required:!0},comment:{type:Object,required:!0},course:{type:Object,required:!0},parent:{type:Object,default:null},lastSeenAt:{type:null,default:null},replyToVisible:{type:Boolean,default:!1}},data:function(){return{replying:!1,replyLoading:!1,replyContent:null,replyPrivate:!1,replyAnonymous:!1,editing:!1,editLoading:!1,editContent:null,editPrivate:!1,editAnonymous:!1,commentsFullyExpanded:!0}},computed:me({},Object(o.e)(["user"]),{},Object(o.c)(["isStaff"]),{},Object(o.c)("discuss",["isCommentAuthorABot","isUserRoleLabelVisible","getThreadUserDisplayName"]),{isThreadDeleted:function(){return!!this.thread.deleted_at},isThreadLocked:function(){return this.thread.is_locked},isPrivate:function(){return this.comment.is_private||this.parent&&this.parent.is_private},canReply:function(){return"active"===this.course.status&&!this.isThreadDeleted&&!this.isThreadLocked},canLike:function(){return"active"===this.course.status&&!this.isThreadDeleted&&!this.isThreadLocked},canEdit:function(){var e,t;return"active"===this.course.status&&!this.isThreadDeleted&&!this.isThreadLocked&&(this.isStaff||(null==(e=this.comment)?void 0:null==(t=e.user)?void 0:t.id)===this.user.id)},isHighlighted:function(){return+(this.$route.query.comment||this.$route.query.answer)===this.comment.id},isNew:function(){return null!=this.lastSeenAt&&this.comment.created_at>this.lastSeenAt},isAnonymousVisible:function(){return this.thread.is_anonymous&&this.thread.user_id===this.user.id},initialReplyAnonymous:function(){return this.thread.is_anonymous&&this.thread.user_id===this.user.id},initialReplyPrivate:function(){return!!this.comment&&this.comment.is_private},replyPrivateDisabled:function(){return!!this.comment&&this.comment.is_private},replyDirty:function(){return this.replying&&this.replyContent&&!de.c(this.replyContent)},editDirty:function(){return this.editing&&this.editContent!==this.comment.content},route:function(){return pe.a(this.comment)}}),watch:{isHighlighted:"scrollToIfHighlighted","comment.id":{immediate:!0,handler:function(){this.cancelReply(!1),this.cancelEdit(!1)}}},created:function(){this.replyPrivate=this.initialReplyPrivate,this.replyAnonymous=this.initialReplyAnonymous,this.disposables=new ae.a(this.eventBus.on("stream:comment.update",this.onStreamCommentUpdate),this.eventBus.on("stream:comment.delete",this.onStreamCommentDelete),this.eventBus.on("stream:comment.new",this.onStreamCommentNew))},mounted:function(){this.scrollToIfHighlighted()},destroyed:function(){this.disposables.dispose()},methods:{toggleCommentsFullyExpanded:function(){this.commentsFullyExpanded=!this.commentsFullyExpanded},like:function(){pe.p(this.discussApi,this.$i18n,this.comment,1)},copyLink:function(){var e=pe.b(this.$router,this.comment);he.a(e,{successMessage:this.$t("discussion.linkCopied")})},scrollToIfHighlighted:function(){this.isHighlighted&&ue.H(this.$el)},convertToAnswer:(_e=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.b({icon:"question",title:this.$t("discussion.convertToAnswer.confirmTitle"),text:this.$t("discussion.convertToAnswer.confirmText"),primaryAction:this.$t("discussion.convertToAnswer.confirmAffirmButton")});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,this.discussApi.changeCommentType(this.comment.id,"answer");case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(4),le.b({type:"error",text:this.$t("discussion.convertToAnswer.error")}),e.abrupt("return");case 13:window.location.reload();case 14:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(){return _e.apply(this,arguments)}),beginReply:function(){this.replying=!0,this.replyAnonymous=this.initialReplyAnonymous},cancelReply:(we=Object(r.a)(i.a.mark((function e(){var t,n=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(n.length>0&&void 0!==n[0])||n[0],e.t0=this.replying,!e.t0){e.next=9;break}if(e.t1=!this.replyContent||de.c(this.replyContent)||!t,e.t1){e.next=8;break}return e.next=7,oe.b({icon:"warning",title:this.$t("discussion.discardNewComment.title"),text:this.$t("discussion.discardNewComment.text"),primaryAction:this.$t("discardButton")});case 7:e.t1=e.sent;case 8:e.t0=e.t1;case 9:if(!e.t0){e.next=14;break}this.replying=!1,this.replyContent=null,this.replyPrivate=this.initialReplyPrivate,this.replyAnonymous=this.initialReplyAnonymous;case 14:case"end":return e.stop()}}),e,this)}))),function(){return we.apply(this,arguments)}),reply:(ye=Object(r.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.replyLoading=!0,t=this.comment,e.prev=2,e.next=5,this.discussApi.postComment(t.id,"comment",this.replyContent,{private:this.replyPrivate,anonymous:this.replyAnonymous});case 5:n=e.sent,t.comments.find((function(e){return e.id===n.id}))||t.comments.unshift(n),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(2),this.comment===t&&le.b({type:"error",text:this.$t("discussion.postCommentError")}),e.abrupt("return");case 13:return e.prev=13,this.comment===t&&(this.replyLoading=!1),e.finish(13);case 16:this.comment===t&&(this.replying=!1,this.replyContent=null,this.replyPrivate=this.initialReplyPrivate,this.replyAnonymous=this.initialReplyAnonymous);case 17:case"end":return e.stop()}}),e,this,[[2,9,13,16]])}))),function(){return ye.apply(this,arguments)}),beginEdit:function(){this.editing=!0,this.editContent=this.comment.content,this.editPrivate=this.comment.is_private||this.isPrivate,this.editAnonymous=this.comment.is_anonymous},cancelEdit:(ge=Object(r.a)(i.a.mark((function e(){var t,n=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(n.length>0&&void 0!==n[0])||n[0],e.t0=this.editing,!e.t0){e.next=9;break}if(e.t1=this.editContent===this.comment.content||!t,e.t1){e.next=8;break}return e.next=7,oe.b({icon:"warning",title:this.$t("discussion.discardEditComment.title"),text:this.$t("discussion.discardEditComment.text"),primaryAction:this.$t("discardButton")});case 7:e.t1=e.sent;case 8:e.t0=e.t1;case 9:if(!e.t0){e.next=14;break}this.editing=!1,this.editContent=null,this.editPrivate=!1,this.editAnonymous=!1;case 14:case"end":return e.stop()}}),e,this)}))),function(){return ge.apply(this,arguments)}),edit:(be=Object(r.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.editLoading=!0,t=this.comment,e.prev=2,e.next=5,this.discussApi.updateComment(t.id,this.editContent,{private:this.editPrivate,anonymous:this.editAnonymous});case 5:n=e.sent,t.content=n.content,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(2),this.comment===t&&le.b({type:"error",text:this.$t("discussion.saveCommentError")}),e.abrupt("return");case 13:return e.prev=13,this.comment===t&&(this.editLoading=!1),e.finish(13);case 16:this.comment===t&&(this.editing=!1,this.editContent=null,this.editPrivate=!1,this.editAnonymous=!1);case 17:case"end":return e.stop()}}),e,this,[[2,9,13,16]])}))),function(){return be.apply(this,arguments)}),destroy:(ve=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.comment,e.next=3,oe.b({icon:"warning",title:this.$t("discussion.deleteComment.confirmTitle"),text:this.$t("discussion.deleteComment.confirmText"),primaryAction:this.$t("deleteButton")});case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:if(this.comment===t){e.next=7;break}return e.abrupt("return");case 7:return e.prev=7,e.next=10,this.discussApi.destroy(t.id,"comment");case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(7),this.comment===t&&le.b({type:"error",text:this.$t("discussion.deleteComment.error")}),e.abrupt("return");case 16:t.deleted_at=T()(),t.user=null,this.comment===t&&le.b({type:"success",text:this.$t("discussion.deleteComment.success")});case 19:case"end":return e.stop()}}),e,this,[[7,12]])}))),function(){return ve.apply(this,arguments)}),onStreamCommentUpdate:function(e){var t=e.data;t.comment.id===this.comment.id&&Object.assign(this.comment,t.comment)},onStreamCommentDelete:function(e){e.data.commentId===this.comment.id&&(this.comment.deleted_at=T()(),this.comment.user=null)},onStreamCommentNew:function(e){var t=this,n=me({},e.data.comment,{comments:[]});"comment"!==n.type||n.parent_id!==this.comment.id||this.comment.comments.find((function(e){return e.id===n.id}))||(this.comment.comments.unshift(n),n.user_id!==this.user.id&&le.b({title:this.$t("discussion.streamNewComment",{author:this.getThreadUserDisplayName(n)}),text:ce.ellipsis(n.document,200)}).action.then((function(e){0===e&&t.$router.push({name:"discuss-show",params:{courseId:n.course_id,threadId:n.thread_id},query:{comment:n.id}})})))}}},Ce={components:{AmberDisplay:D.a,Icon:b.a,ContextMenuTrigger:P.a,ContextMenuItem:c.a,ContextMenuSeparator:u.a,UserRoleLabel:A.a,DateDisplay:N.a,PrivateBadge:re,AuthorName:R.a,ReplyCompact:W},mixins:[ke],data:function(){return{menuVisible:!1}}},xe=(n("ODnl"),Object(f.a)(Ce,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"discuss-comment-compact"},[n("div",{class:{"dcc-highlighted":e.isHighlighted,"dcc-new":e.isNew}},[e.comment.deleted_at?n("div",{staticClass:"dcc-deleted"},[e._v(e._s(e.$t("discussion.commentDeleted")))]):[n("div",{staticClass:"dcc-user"},[n("AuthorName",{staticClass:"dcc-user-name",attrs:{object:e.comment,popup:""}}),e._v(" "),e.isUserRoleLabelVisible(e.comment)?n("UserRoleLabel",{staticClass:"dcc-user-role",attrs:{user:e.comment.user,course:e.course,"show-tutorials":""}}):e._e(),e._v(" "),n("RouterLink",{staticClass:"dcc-date",attrs:{to:e.route}},[n("DateDisplay",{attrs:{date:e.comment.created_at,format:"fromNowShort"}})],1),e._v(" "),e.isPrivate?n("PrivateBadge",{staticClass:"dcc-private"}):e._e()],1),e._v(" "),e.parent&&e.replyToVisible?n("div",{staticClass:"dcc-replyto"},[n("Icon",{staticClass:"dcc-replyto-icon",attrs:{icon:"reply"}}),e._v("\n\t\t\t\tReplying to\n\t\t\t\t"),n("RouterLink",{attrs:{to:{query:{comment:e.parent.id}}}},[n("AuthorName",{attrs:{object:e.parent}})],1)],1):e._e(),e._v(" "),e.editing?n("ReplyCompact",{attrs:{"original-value":e.comment.content,loading:e.editLoading,"is-private":e.editPrivate,update:""},on:{"update:isPrivate":function(t){e.editPrivate=t},"update:is-private":function(t){e.editPrivate=t},post:e.edit,cancel:e.cancelEdit},model:{value:e.editContent,callback:function(t){e.editContent=t},expression:"editContent"}}):n("AmberDisplay",{staticClass:"dcc-content",attrs:{value:e.comment.content}}),e._v(" "),n("div",{staticClass:"dcc-actions"},[n("ContextMenuTrigger",{attrs:{active:e.menuVisible},on:{"update:active":function(t){e.menuVisible=t}},scopedSlots:e._u([{key:"trigger",fn:function(t){var s=t.trigger,i=t.attrs;return[n("button",e._b({staticClass:"dcc-action more",on:{click:s}},"button",i,!1),[n("Icon",{attrs:{icon:"more-horiz"}})],1)]}},{key:"items",fn:function(){return[n("ContextMenuItem",{key:"copyLink",attrs:{text:e.$t("copyLinkButton")},on:{click:e.copyLink}}),e._v(" "),e.canEdit?n("ContextMenuItem",{key:"edit",attrs:{text:e.$t("editButton")},on:{click:e.beginEdit}}):e._e(),e._v(" "),e.canEdit?n("ContextMenuItem",{key:"delete",attrs:{text:e.$t("deleteButton")},on:{click:e.destroy}}):e._e(),e._v(" "),n("ContextMenuSeparator"),e._v(" "),e.canEdit&&"question"===e.thread.type?n("ContextMenuItem",{key:"convertToAnswer",attrs:{text:e.$t("discussion.commentMenu.convertToAnswer")},on:{click:e.convertToAnswer}}):e._e()]},proxy:!0}])}),e._v(" "),e.canReply?n("button",{staticClass:"dcc-action replies",on:{click:e.beginReply}},[n("Icon",{attrs:{icon:"reply"}})],1):e._e(),e._v(" "),e.canLike||e.comment.vote?n("button",{staticClass:"dcc-action likes",class:{active:1===e.comment.vote},attrs:{disabled:!e.canLike},on:{click:e.like}},[n("Icon",{attrs:{icon:"heart"}}),e._v("\n\t\t\t\t\t"+e._s(e.comment.vote_count?e.comment.vote_count:"")+"\n\t\t\t\t")],1):e._e()],1),e._v(" "),e.replying?n("ReplyCompact",{attrs:{"is-private":e.replyPrivate,"is-private-disabled":e.replyPrivateDisabled,loading:e.replyLoading},on:{"update:isPrivate":function(t){e.replyPrivate=t},"update:is-private":function(t){e.replyPrivate=t},post:e.reply,cancel:e.cancelReply},model:{value:e.replyContent,callback:function(t){e.replyContent=t},expression:"replyContent"}}):e._e()]],2)])}),[],!1,null,null,null).exports),je={props:{comments:{type:Array,required:!0},thread:{type:Object,required:!0},course:{type:Object,reqruied:!0},lastSeenAt:{type:null,default:null}}},Oe={components:{Comments:te,Comment:xe},mixins:[je]},Se=(n("LNLw"),Object(f.a)(Oe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Comments",{attrs:{comments:e.comments},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.comment,i=t.parent,r=t.replyToVisible;return[n("Comment",{key:s.id,staticClass:"dcsc-comment",attrs:{thread:e.thread,parent:i,comment:s,course:e.course,"last-seen-at":e.lastSeenAt,"reply-to-visible":r}})]}},{key:"expander",fn:function(e){var t=e.toggle;return[n("div",{staticClass:"dcsc-expander",on:{click:t}},[n("div",{staticClass:"dcsc-expander-line"})])]}}])})}),[],!1,null,null,null).exports);function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ie,De,Pe,Ae,Ne={name:"thread",inject:["discussApi","eventBus"],props:{parent:{type:Object,default:null},thread:{type:Object,required:!0},course:{type:Object,required:!0},canAccept:{type:Boolean,default:!1},lastSeenAt:{type:null,default:null}},data:function(){return{replying:!1,replyContent:null,replyPrivate:!1,replyAnonymous:!1,replyLoading:!1,editing:!1,editContent:null,editAnonymous:!1,editLoading:!1,rejecting:!1,rejectionContent:null,rejectionLoading:!1}},computed:Te({},Object(o.e)(["user"]),{},Object(o.c)(["isStaff","isTutor"]),{},Object(o.c)("discuss",["getThreadUserDisplayName","isUserRoleLabelVisible","categories","categoryFallbackColor"]),{threadTypeText:function(){return this.$t("discussion.".concat(this.thread.type)).toLowerCase()},isAccepted:function(){return this.parent&&this.parent.accepted_id===this.thread.id},isDeleted:function(){return this.thread.deleted_at||this.parent&&this.parent.deleted_at},isLocked:function(){return this.thread.is_locked||this.parent&&this.parent.is_locked},canReply:function(){return"active"===this.course.status&&!this.isDeleted&&!this.isLocked},canLike:function(){return"active"===this.course.status&&!this.isDeleted&&!this.isLocked},canEdit:function(){var e,t;return"active"===this.course.status&&!this.isDeleted&&!this.isLocked&&(this.isStaff||(null==(e=this.thread)?void 0:null==(t=e.user)?void 0:t.id)===this.user.id)},canEndorse:function(){return"active"===this.course.status&&!this.isDeleted&&!this.isLocked&&this.isStaff&&"announcement"!==this.thread.type},canPin:function(){return"active"===this.course.status&&!this.isDeleted&&!this.isLocked&&"answer"!==this.thread.type&&this.isStaff},canStar:function(){return"active"===this.course.status&&!this.isDeleted&&"answer"!==this.thread.type},canLock:function(){return"active"===this.course.status&&!this.isDeleted&&this.isStaff&&"answer"!==this.thread.type&&"approved"===this.thread.approved_status&&!this.thread.is_locked},canUnlock:function(){return"active"===this.course.status&&!this.isDeleted&&this.isStaff&&"answer"!==this.thread.type&&"approved"===this.thread.approved_status&&this.thread.is_locked},canMakePrivate:function(){return"active"===this.course.status&&!this.isDeleted&&this.isStaff&&"answer"!==this.thread.type&&!this.thread.is_private},canMakePublic:function(){return"active"===this.course.status&&!this.isDeleted&&this.isStaff&&"answer"!==this.thread.type&&this.thread.is_private},canApprove:function(){return"active"===this.course.status&&!this.isDeleted&&this.isStaff&&"answer"!==this.thread.type},commentCount:function(){return function e(t){return t.comments.reduce((function(t,n){return t+1+e(n)}),0)}(this.thread)},categoryStyle:function(){var e=this,t=this.categories.find((function(t){return t.name===e.thread.category}));return{color:t?t.color:this.categoryFallbackColor}},categoryText:function(){return[this.thread.category,this.thread.subcategory].filter(Boolean).join(" – ")},isHighlighted:function(){var e=+(this.$route.query.answer||this.$route.query.comment);return"answer"===this.thread.type&&e===this.thread.id},isNew:function(){return null!=this.lastSeenAt&&this.thread.created_at>this.lastSeenAt},actualThread:function(){return this.parent||this.thread},isAnonymousVisible:function(){return this.actualThread.is_anonymous&&this.actualThread.user_id===this.user.id},initialReplyAnonymous:function(){return this.actualThread.is_anonymous&&this.actualThread.user_id===this.user.id},replyPlaceholderEnabled:function(){return"question"!==this.thread.type||!this.course.settings.discussion.question_reply_placeholder_hidden},replyDirty:function(){return this.replying&&this.replyContent&&!de.c(this.replyContent)},route:function(){return pe.c(this.thread)}}),watch:{isHighlighted:"scrollToIfHighlighted",thread:{immediate:!0,handler:function(){this.cancelReply(!1),this.cancelEdit(!1),this.cancelRejection()}}},created:function(){this.disposables=new ae.a(this.eventBus.on("stream:thread.update",this.onStreamThreadUpdate),this.eventBus.on("stream:comment.update",this.onStreamCommentUpdate),this.eventBus.on("stream:comment.new",this.onStreamCommentNew),this.eventBus.on("stream:comment.delete",this.onStreamCommentDelete),ue.f(document,"keydown",this.onDocumentKeyDown))},mounted:function(){this.scrollToIfHighlighted()},destroyed:function(){this.disposables.dispose()},methods:{onDocumentKeyDown:function(e){e.target===document.body&&"o"===e.key&&this.isStaff&&"answer"!==this.thread.type&&"pending"===this.thread.approved_status&&(e.preventDefault(),this.approve())},copyLink:function(){var e=pe.d(this.$router,this.thread);he.a(e,{successMessage:this.$t("discussion.linkCopied")})},lock:function(){pe.k(this.discussApi,this.$i18n,this.thread)},unlock:function(){pe.k(this.discussApi,this.$i18n,this.thread)},makePrivate:function(){pe.m(this.discussApi,this.$i18n,this.thread)},makePublic:function(){pe.m(this.discussApi,this.$i18n,this.thread)},toggleLike:function(){pe.p(this.discussApi,this.$i18n,this.thread,1)},toggleStar:function(){pe.o(this.discussApi,this.$i18n,this.thread)},togglePin:function(){pe.l(this.discussApi,this.$i18n,this.thread)},toggleEndorse:function(){pe.j(this.discussApi,this.$i18n,this.thread)},toggleAccept:function(){this.canAccept&&this.$emit("accept")},setWatch:function(e){pe.h(this.discussApi,this.$i18n,this.thread,e)},scrollToIfHighlighted:function(){this.isHighlighted&&ue.H(this.$el)},convertToComment:(Ae=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.b({icon:"question",title:this.$t("discussion.convertToComment.confirmTitle"),text:this.$t("discussion.convertToComment.confirmText"),primaryAction:this.$t("discussion.convertToComment.confirmAffirmButton")});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,this.discussApi.changeCommentType(this.thread.id,"comment");case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(4),le.b({type:"error",text:this.$t("discussion.convertToComment.error")}),e.abrupt("return");case 13:window.location.reload();case 14:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(){return Ae.apply(this,arguments)}),destroy:function(){var e=Object(r.a)(i.a.mark((function e(){var t,n,s,r,a,o,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.thread,n="discussion.delete".concat("answer"===this.thread.type?"Answer":"Thread"),s=this.$t("".concat(n,".confirmTitle")),r=this.$t("".concat(n,".confirmText")),a=this.$t("deleteButton"),o=this.$t("".concat(n,".error")),l=this.$t("".concat(n,".success")),e.next=9,oe.b({icon:"warning",title:s,text:r,primaryAction:a});case 9:if(e.sent){e.next=11;break}return e.abrupt("return");case 11:if(this.thread===t){e.next=13;break}return e.abrupt("return");case 13:return e.prev=13,e.next=16,this.discussApi.destroy(t.id,t.type);case 16:e.next=24;break;case 18:if(e.prev=18,e.t0=e.catch(13),this.thread===t){e.next=22;break}return e.abrupt("return");case 22:return le.b({type:"error",title:o}),e.abrupt("return");case 24:if(this.thread===t){e.next=26;break}return e.abrupt("return");case 26:le.b({type:"success",text:l}),"answer"!==t.type&&this.$router.push({name:"discuss-index"}),this.$emit("deleted");case 29:case"end":return e.stop()}}),e,this,[[13,18]])})));return function(){return e.apply(this,arguments)}}(),undelete:(Pe=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.thread,e.next=3,oe.b({icon:"question",title:this.$t("discussion.undeleteThread.confirmTitle"),text:this.$t("discussion.undeleteThread.confirmText"),primaryAction:this.$t("undeleteButton")});case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:if(this.thread===t){e.next=7;break}return e.abrupt("return");case 7:return e.prev=7,e.next=10,this.discussApi.restore(t.id,t.type);case 10:e.next=18;break;case 12:if(e.prev=12,e.t0=e.catch(7),this.thread===t){e.next=16;break}return e.abrupt("return");case 16:return le.b({type:"error",title:this.$t("discussion.undeleteThread.error")}),e.abrupt("return");case 18:if(t.deleted_at=null,this.thread===t){e.next=21;break}return e.abrupt("return");case 21:le.b({type:"success",text:this.$t("discussion.undeleteThread.success")});case 22:case"end":return e.stop()}}),e,this,[[7,12]])}))),function(){return Pe.apply(this,arguments)}),beginReply:function(){this.replying=!0,this.replyAnonymous=this.initialReplyAnonymous},cancelReply:function(){var e=Object(r.a)(i.a.mark((function e(){var t,n=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(n.length>0&&void 0!==n[0])||n[0],e.t0=this.replying,!e.t0){e.next=9;break}if(e.t1=!this.replyContent||de.c(this.replyContent)||!t,e.t1){e.next=8;break}return e.next=7,oe.b({icon:"warning",title:this.$t("discussion.discardNewComment.title"),text:this.$t("discussion.discardNewComment.text"),primaryAction:this.$t("discardButton")});case 7:e.t1=e.sent;case 8:e.t0=e.t1;case 9:if(!e.t0){e.next=14;break}this.replying=!1,this.replyContent=null,this.replyPrivate=!1,this.replyAnonymous=this.initialReplyAnonymous;case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),reply:function(){var e=Object(r.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.replyLoading=!0,t=this.thread,e.prev=2,e.next=5,this.discussApi.postComment(t.id,"answer"===t.type?"comment":"thread",this.replyContent,{private:this.replyPrivate,anonymous:this.replyAnonymous});case 5:n=e.sent,t.comments.find((function(e){return e.id===n.id}))||t.comments.unshift(n),e.next=15;break;case 9:if(e.prev=9,e.t0=e.catch(2),this.thread===t){e.next=13;break}return e.abrupt("return");case 13:return le.b({type:"error",text:this.$t("discussion.postCommentError")}),e.abrupt("return");case 15:return e.prev=15,this.thread===t&&(this.replyLoading=!1),e.finish(15);case 18:this.thread===t&&(this.replying=!1,this.replyContent=null,this.replyPrivate=!1,this.replyAnonymous=this.initialReplyAnonymous);case 19:case"end":return e.stop()}}),e,this,[[2,9,15,18]])})));return function(){return e.apply(this,arguments)}}(),beginEdit:function(){"answer"===this.thread.type?(this.editing=!0,this.editContent=this.thread.content,this.editAnonymous=this.thread.is_anonymous):this.$router.push({name:"discuss-edit",params:{threadId:this.thread.id}})},cancelEdit:function(){var e=Object(r.a)(i.a.mark((function e(){var t,n=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(n.length>0&&void 0!==n[0])||n[0],e.t0=this.editing,!e.t0){e.next=9;break}if(e.t1=this.editContent===this.thread.content||!t,e.t1){e.next=8;break}return e.next=7,oe.b({icon:"warning",title:this.$t("discussion.discardEditAnswer.title"),text:this.$t("discussion.discardEditAnswer.text"),primaryAction:this.$t("discardButton")});case 7:e.t1=e.sent;case 8:e.t0=e.t1;case 9:if(!e.t0){e.next=13;break}this.editing=!1,this.editContent=null,this.editAnonymous=!1;case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),edit:function(){var e=Object(r.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.editLoading=!0,t=this.thread,e.prev=2,e.next=5,this.discussApi.updateComment(t.id,this.editContent,{anonymous:this.editAnonymous});case 5:n=e.sent,t.content=n.content,e.next=15;break;case 9:if(e.prev=9,e.t0=e.catch(2),this.thread===t){e.next=13;break}return e.abrupt("return");case 13:return le.b({type:"error",text:this.$t("discussion.saveAnswerError")}),e.abrupt("return");case 15:return e.prev=15,this.thread===t&&(this.editLoading=!1),e.finish(15);case 18:this.thread===t&&(this.editing=!1,this.editContent=null,this.editAnonymous=!1);case 19:case"end":return e.stop()}}),e,this,[[2,9,15,18]])})));return function(){return e.apply(this,arguments)}}(),beginRejection:function(){var e=this;this.rejecting=!0,this.rejectionContent=this.course.settings.discussion.rejection_comment_template,this.$nextTick((function(){e.$refs.approve&&ue.d(e.$refs.approve.$el)}))},cancelRejection:function(){this.rejecting=!1,this.rejectionContent=null},reject:(De=Object(r.a)(i.a.mark((function e(t,n){var s,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=this.thread,r=null,!t){e.next=7;break}if((r=this.rejectionContent)&&!de.c(r)){e.next=7;break}return oe.a({icon:"warning",title:this.$t("discussion.rejectionCommentEmpty.title"),text:this.$t("discussion.rejectionCommentEmpty.text")}),e.abrupt("return");case 7:if(this.rejectionLoading=!0,e.prev=8,!r){e.next=14;break}return e.next=12,this.discussApi.postComment(s.id,"thread",r,{kind:"thread_rejection",anonymous:n});case 12:a=e.sent,s.comments.find((function(e){return e.id===a.id}))||s.comments.unshift(a);case 14:return e.next=16,this.discussApi.reject(s.id);case 16:e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(8),le.b({type:"error",text:this.$t("discussion.rejectThreadError")}),e.abrupt("return");case 22:return e.prev=22,this.rejectionLoading=!1,e.finish(22);case 25:s.approved_status="rejected",s.is_locked=!0,this.cancelRejection();case 28:case"end":return e.stop()}}),e,this,[[8,18,22,25]])}))),function(e,t){return De.apply(this,arguments)}),approve:(Ie=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.thread,e.prev=1,this.discussApi.approve(t.id),e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(1),le.b({type:"error",text:this.$t("discussion.approveThreadError")}),e.abrupt("return");case 9:t.approved_status="approved",t.is_locked=!1,this.cancelRejection();case 12:case"end":return e.stop()}}),e,this,[[1,5]])}))),function(){return Ie.apply(this,arguments)}),onStreamThreadUpdate:function(e){var t=e.data;"answer"!==this.thread.type&&this.thread.id===t.thread.id&&Object.assign(this.thread,t.thread)},onStreamCommentUpdate:function(e){var t=e.data;"answer"===this.thread.type&&this.thread.id===t.comment.id&&Object.assign(this.thread,t.comment)},onStreamCommentNew:function(e){var t=this,n=Te({},e.data.comment,{comments:[]});if("comment"===n.type){var s=void 0,i=void 0;if("answer"===this.thread.type?i=this.thread.id:(s=this.thread.id,i=null),(void 0===s||s===n.thread_id)&&i===n.parent_id&&!this.thread.comments.find((function(e){return e.id===n.id})))if(this.thread.comments.unshift(n),n.user_id!==this.user.id)le.b({title:this.$t("discussion.streamNewComment",{author:this.getThreadUserDisplayName(n)}),text:ce.ellipsis(n.document,200)}).action.then((function(e){0===e&&t.$router.push({name:"discuss-show",params:{courseId:n.course_id,threadId:n.thread_id},query:{comment:n.id}})}))}},onStreamCommentDelete:function(e){var t=e.data;"answer"===this.thread.type&&t.commentId===this.thread.id&&this.$emit("deleted")}}},Re={components:{Avatar:I.a,AmberDisplay:D.a,Icon:b.a,ContextMenuTrigger:P.a,ContextMenuItem:c.a,ContextMenuSeparator:u.a,UserRoleLabel:A.a,DateDisplay:N.a,AuthorName:R.a,BannerButton:k,ApproveWidget:q,ReplyCompact:W,Comments:Se},mixins:[Ne],data:function(){return{menuVisible:!1}},methods:{formatDate:function(e,t){return T()(e).format(t)}}},Me=(n("7NJ3"),Object(f.a)(Re,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"discuss-thread-compact",class:{highlighted:e.isHighlighted,new:e.isNew}},["answer"!==e.thread.type?[e.thread.deleted_at?n("div",{staticClass:"dtc-banner"},[e._v("\n\t\t\t"+e._s(e.$t("discussion.threadDeletedOnBanner",{date:e.formatDate(e.thread.deleted_at,"D/M/YY h:mm a")}))+"\n\t\t\t"),e.isStaff?n("BannerButton",{on:{click:e.undelete}},[e._v(e._s(e.$t("undeleteButton")))]):e._e()],1):"active"!==e.course.status?n("div",{staticClass:"dtc-banner"},[e._v("\n\t\t\t"+e._s(e.$t("discussion.threadReadonlyBanner"))+"\n\t\t")]):e._e(),e._v(" "),"rejected"===e.thread.approved_status?n("div",{staticClass:"dtc-banner dtc-banner-info"},[n("span",{staticClass:"dtc-banner-text"},[e._v(e._s(e.$t("discussion.threadRejectedBanner."+(e.thread.user_id===e.user.id?"poster":"staff"),{threadType:e.threadTypeText})))])]):e.thread.is_locked?n("div",{staticClass:"dtc-banner"},[e._v("\n\t\t\t"+e._s(e.$t("discussion.threadLockedBanner"))+"\n\t\t\t"),e.canUnlock?n("BannerButton",{on:{click:e.unlock}},[e._v(e._s(e.$t("unlockButton")))]):e._e()],1):e._e(),e._v(" "),e.rejecting||"pending"!==e.thread.approved_status?e._e():n("div",{staticClass:"dtc-banner dtc-banner-info"},[n("span",{staticClass:"dtc-banner-text"},[e._v(e._s(e.$t("discussion.threadPendingBanner."+(e.thread.user_id===e.user.id?"poster":"staff"),{threadType:e.threadTypeText})))]),e._v(" "),e.canApprove&&"active"===e.course.status?n("div",{staticClass:"dtc-banner-actions"},[n("BannerButton",{on:{click:e.approve}},[e._v(e._s(e.$t("discussion.approveButton")))]),e._v(" "),n("BannerButton",{on:{click:e.beginRejection}},[e._v(e._s(e.$t("discussion.rejectButton")))])],1):e._e()]),e._v(" "),e.rejecting?n("ApproveWidget",{ref:"approve",staticClass:"dtc-approve-widget",attrs:{disabled:e.rejectionLoading},on:{cancel:e.cancelRejection,reject:function(t){return e.reject(t.comment,t.anonymous)}},model:{value:e.rejectionContent,callback:function(t){e.rejectionContent=t},expression:"rejectionContent"}}):e._e()]:e._e(),e._v(" "),n("div",{staticClass:"dtc-head"},[n("Avatar",{staticClass:"dtc-head-avatar",attrs:{user:e.thread.is_anonymous?null:e.thread.user}}),e._v(" "),n("div",{staticClass:"dtc-head-body"},[n("div",{staticClass:"dtc-head-user"},[n("AuthorName",{staticClass:"dtc-head-user-name",attrs:{object:e.thread,popup:""}}),e._v(" "),e.isUserRoleLabelVisible(e.thread)?n("UserRoleLabel",{staticClass:"dtc-head-user-role",attrs:{user:e.thread.user,course:e.course,"show-tutorials":""}}):e._e(),e._v(" "),n("RouterLink",{staticClass:"dtc-head-created-at",attrs:{to:e.route}},[n("DateDisplay",{attrs:{date:e.thread.created_at,format:"fromNowShort"}})],1),e._v(" "),e.thread.is_private?n("Icon",{staticClass:"dtc-head-badge private",attrs:{icon:"eye-strike",title:e.$t("discussion.privateDescription")}}):e._e(),e._v(" "),e.thread.is_endorsed?n("Icon",{staticClass:"dtc-head-badge endorsed",attrs:{icon:"badge",title:e.$t("discussion.endorsed")}}):e._e(),e._v(" "),e.thread.is_pinned?n("Icon",{staticClass:"dtc-head-badge pinned",attrs:{icon:"pin",title:e.$t("discussion.pinned")}}):e._e(),e._v(" "),e.thread.accepted_id?n("Icon",{staticClass:"dtc-head-badge answered",attrs:{icon:"tick",title:e.$t("discussion.answered")}}):e._e(),e._v(" "),e.thread.is_starred?n("Icon",{staticClass:"dtc-head-badge starred",attrs:{icon:"star",title:e.$t("discussion.starred")}}):e._e()],1),e._v(" "),"answer"!==e.thread.type?n("div",{staticClass:"dtc-head-course"},[n("span",[e._v(e._s(e.course.code))]),e._v(" "),n("span",{staticClass:"dtc-head-category",style:e.categoryStyle},[e._v(e._s(e.categoryText))])]):e._e()]),e._v(" "),"answer"===e.thread.type&&e.isAccepted?n("Icon",{staticClass:"dtc-head-accepted",attrs:{icon:"tick"}}):e._e()],1),e._v(" "),n("div",{staticClass:"dtc-title"},[e._v(e._s(e.thread.title))]),e._v(" "),e.editing?n("ReplyCompact",{attrs:{"original-value":e.thread.content,loading:e.editLoading,update:""},on:{cancel:e.cancelEdit,post:e.edit},model:{value:e.editContent,callback:function(t){e.editContent=t},expression:"editContent"}}):n("AmberDisplay",{staticClass:"dtc-content",attrs:{value:e.thread.content}}),e._v(" "),n("div",{staticClass:"dtc-actions"},["answer"===e.thread.type?n("ContextMenuTrigger",{attrs:{active:e.menuVisible},on:{"update:active":function(t){e.menuVisible=t}},scopedSlots:e._u([{key:"trigger",fn:function(t){var s=t.trigger,i=t.attrs;return[n("button",e._b({staticClass:"dtc-action menu",on:{click:s}},"button",i,!1),[n("div",{staticClass:"dtc-action-inner"},[n("Icon",{staticClass:"dtc-action-icon",attrs:{icon:"more-horiz"}})],1)])]}},{key:"items",fn:function(){return[n("ContextMenuItem",{key:"copyLink",attrs:{text:e.$t("copyLinkButton")},on:{click:e.copyLink}}),e._v(" "),e.canEdit?n("ContextMenuItem",{key:"edit",attrs:{text:e.$t("editButton")},on:{click:e.beginEdit}}):e._e(),e._v(" "),e.canEdit?n("ContextMenuItem",{key:"delete",attrs:{text:e.$t("deleteButton")},on:{click:e.destroy}}):e._e(),e._v(" "),n("ContextMenuSeparator"),e._v(" "),e.canAccept?n("ContextMenuItem",{key:"accept",attrs:{text:e.$t("discussion.threadMenu.accept"),checked:e.isAccepted},on:{click:e.toggleAccept}}):e._e(),e._v(" "),e.canEndorse?n("ContextMenuItem",{key:"endorse",attrs:{text:e.$t("discussion.threadMenu.endorse"),checked:e.thread.is_endorsed},on:{click:e.toggleEndorse}}):e._e(),e._v(" "),n("ContextMenuSeparator"),e._v(" "),e.canEdit&&"answer"===e.thread.type?n("ContextMenuItem",{key:"convertToComment",attrs:{text:e.$t("discussion.threadMenu.convertToComment")},on:{click:e.convertToComment}}):e._e()]},proxy:!0}],null,!1,3064963710)}):e._e(),e._v(" "),e.canReply||e.thread.reply_count?n("button",{staticClass:"dtc-action replies",attrs:{disabled:!e.canReply},on:{click:function(t){e.replying=!0}}},[n("div",{staticClass:"dtc-action-inner"},[n("Icon",{staticClass:"dtc-action-icon",attrs:{icon:"speech"}}),e._v(" "),n("span",{staticClass:"dtc-action-text"},[e._v(e._s(e.$t("replyButton")))])],1)]):e._e(),e._v(" "),e.canLike||e.thread.vote_count?n("button",{staticClass:"dtc-action likes",class:{active:1===e.thread.vote},attrs:{disabled:!e.canLike},on:{click:e.toggleLike}},[n("div",{staticClass:"dtc-action-inner"},[n("Icon",{staticClass:"dtc-action-icon",attrs:{icon:"heart"}}),e._v(" "),n("span",{staticClass:"dtc-action-text"},[e._v(e._s(e.thread.vote_count||e.$t("likeButton")))])],1)]):e._e()],1),e._v(" "),e.commentCount?n("div",{staticClass:"dtc-comments-header media-sm-device"},[e._v(e._s(e.$tc("discussion.commentsHeading",e.commentCount)))]):e._e(),e._v(" "),e.replying?n("ReplyCompact",{attrs:{"is-private":e.replyPrivate,loading:e.replyLoading},on:{"update:isPrivate":function(t){e.replyPrivate=t},"update:is-private":function(t){e.replyPrivate=t},cancel:e.cancelReply,post:e.reply},model:{value:e.replyContent,callback:function(t){e.replyContent=t},expression:"replyContent"}}):e._e(),e._v(" "),e.thread.comments.length?n("Comments",{key:e.thread.id,staticClass:"dtc-comments",attrs:{comments:e.thread.comments,thread:e.parent||e.thread,course:e.course,"last-seen-at":e.lastSeenAt}}):e._e()],2)}),[],!1,null,null,null).exports);n("x0AG"),n("2B1R");function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var Fe,Be,qe={inject:["discussApi","streamService","eventBus","keyboardShortcutManager"],props:{thread:{type:Object,required:!0},viewerCount:{type:Number,required:!0},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1},canPin:{type:Boolean,default:!1},canStar:{type:Boolean,default:!1},canShow:{type:Boolean,default:!1},canEndorse:{type:Boolean,default:!1},canLock:{type:Boolean,default:!1},canUnlock:{type:Boolean,default:!1},canMakePrivate:{type:Boolean,default:!1},canMakePublic:{type:Boolean,default:!1},canApprove:{type:Boolean,default:!1}},data:function(){return{answering:!0,answerContent:null,answerAnonymous:!1,answerLoading:!1,usersTyping:[]}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.e)(["course","user"]),{},Object(o.c)(["isStaff"]),{},Object(o.c)("discuss",["isTypingIndicatorEnabled","canMention"]),{canAnswer:function(){return"active"===this.course.status&&!this.thread.is_locked&&!this.thread.deleted_at&&"approved"===this.thread.approved_status},canAccept:function(){var e,t;return"active"===this.course.status&&!this.thread.is_locked&&!this.thread.deleted_at&&(this.isStaff||(null==(e=this.thread)?void 0:null==(t=e.user)?void 0:t.id)===this.user.id)},glancedAt:function(){return this.thread.glanced_at||new Date},postAndAcceptEnabled:function(){return null==this.thread.accepted_id},userIsThreadAuthor:function(){return!!this.thread&&this.thread.user_id===this.user.id},userHasAnswered:function(){var e=this;return!!this.thread&&this.thread.answers.some((function(t){return t.user_id===e.user.id}))},userNamesTyping:function(){return this.usersTyping.map((function(e){return e.userName}))},initialAnswering:function(){return!this.userIsThreadAuthor&&!this.userHasAnswered},initialAnswerAnonymous:function(){return this.thread.is_anonymous&&this.userIsThreadAuthor}}),watch:{thread:{immediate:!0,handler:function(){this.answering=this.initialAnswering,this.answerContent=null,this.answerAnonymous=this.initialAnswerAnonymous,this.usersTyping=[]}},initialAnswering:{immediate:!0,handler:function(e){this.answering=e}}},mounted:function(){this.disposables=new ae.a(this.eventBus.on("stream:thread.startTyping",this.onStartTyping),this.eventBus.on("stream:thread.stopTyping",this.onStopTyping),this.keyboardShortcutManager.register({default:"Control+s",mac:"Meta+s"},this.handleAnswerKeyboardSave,{description:"Save answer",element:this.$el}))},destroyed:function(){this.disposables&&this.disposables.dispose()},methods:{shouldConfirmRouteUpdate:function(e,t){return t.params.courseId!==e.params.courseId||t.params.threadId!==e.params.threadId},routeUpdateMessage:function(){var e=this;if(e.answerContent&&!de.c(e.answerContent)||function e(t){if("comment"===t.$options.name)return t.replyDirty||t.editDirty;if("thread"===t.$options.name&&t.replyDirty)return!0;var n=!0,s=!1,i=void 0;try{for(var r,a=t.$children[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){if(e(r.value))return!0}}catch(o){s=!0,i=o}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}return!1}(this))return{message:this.$t("discussion.unsavedChanges"),action:this.$t("discardButton")}},toggleAccept:function(e){pe.i(this.discussApi,this.$i18n,this.thread,e)},beginAnswer:function(){var e=this;this.answering=!0,this.$nextTick((function(){var t=e.$refs,n=t.answerAmber,s=t.answerActions;n&&n.focus(),s&&ue.d(s)}))},answerAndAccept:(Be=Object(r.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.thread,e.next=3,this.answer();case 3:n=e.sent,this.thread===t&&this.toggleAccept(n.id);case 5:case"end":return e.stop()}}),e,this)}))),function(){return Be.apply(this,arguments)}),answer:(Fe=Object(r.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.thread,this.answerLoading=!0,e.prev=2,e.next=5,this.discussApi.postAnswer(t.id,this.answerContent,{anonymous:this.answerAnonymous});case 5:n=e.sent,t.answers.find((function(e){return e.id===n.id}))||t.answers.push(n),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(2),this.thread===t&&le.b({type:"error",text:this.$t("discussion.postAnswerError")}),e.abrupt("return");case 13:return e.prev=13,this.thread===t&&(this.answerLoading=!1),e.finish(13);case 16:return this.thread===t&&(this.answerContent=null,this.answerAnonymous=this.initialAnswerAnonymous,this.answering=!1),e.abrupt("return",n);case 18:case"end":return e.stop()}}),e,this,[[2,9,13,16]])}))),function(){return Fe.apply(this,arguments)}),onAnswerDeleted:function(e){this.$emit("answer-deleted",e)},onPrint:function(){ue.A(this.$refs.printRegion)},handleAnswerKeyboardSave:function(){if(!this.answering)return!1;this.canAccept&&this.postAndAcceptEnabled?this.answerAndAccept():this.answer()},onAnswerInput:function(){this.isTypingIndicatorEnabled&&this.streamService.threadTypingStart()},onAnswerFocusout:function(){this.isTypingIndicatorEnabled&&this.streamService.threadTypingStop()},onStartTyping:function(e){var t=e.data,n=this.usersTyping.findIndex((function(e){return e.userId===t.userId}));-1===n?this.usersTyping.push(t):this.usersTyping.splice(n,1,t)},onStopTyping:function(e){var t=e.data,n=this.usersTyping.findIndex((function(e){return e.userId===t.userId}));-1!==n&&this.usersTyping.splice(n,1)}}},$e={name:"ThreadShowCompact",components:{ContextMenu:l.a,ContextMenuItem:c.a,ContextMenuSeparator:u.a,Amber:m,EdButton:v.a,Icon:b.a,BannerButton:k,WatchMenuItems:y,TypingIndicator:S,ThreadCompact:Me},mixins:[qe],data:function(){return{menuVisible:!1}},computed:{appbar:function(){var e=this;return{titleSmall:this.viewerCount?this.$t("discussion.readingNow",{count:this.viewerCount}):null,style:"small",hamburger:!1,primaryActions:[{icon:"more-horiz",handler:function(){return e.menuVisible=!0}}],secondaryActions:[{icon:"chevron-left",handler:function(){return e.$router.push({name:"discuss-index"})}}]}}},methods:{setWatch:function(e){pe.h(this.discussApi,this.$i18n,this.thread,e)}}},Ue=(n("3mXL"),Object(f.a)($e,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"discuss-show-compact"},[n("ThreadCompact",{ref:"thread",staticClass:"dsc-thread",attrs:{thread:e.thread,course:e.course,"last-seen-at":e.glancedAt}}),e._v(" "),"question"===e.thread.type?[e.thread.answers.length?[n("div",{staticClass:"dsc-answers-heading"},[e._v(e._s(e.$tc("discussion.answersHeading",e.thread.answers.length)))]),e._v(" "),e._l(e.thread.answers,(function(t){return n("ThreadCompact",{key:t.id,staticClass:"dsc-answer",attrs:{thread:t,course:e.course,parent:e.thread,"can-accept":e.canAccept,"last-seen-at":e.glancedAt},on:{accept:function(n){return e.toggleAccept(t.id)},deleted:function(n){return e.onAnswerDeleted(t)}}})}))]:e._e(),e._v(" "),e.canAnswer?[e.answering?[n("div",{staticClass:"dsc-answers-heading"},[e._v(e._s(e.$t("discussion.yourAnswerHeading")))]),e._v(" "),n("Amber",{ref:"answerAmber",staticClass:"dsc-amber",attrs:{"can-mention":e.canMention},nativeOn:{input:function(t){return e.onAnswerInput(t)},focusout:function(t){return e.onAnswerFocusout(t)}},model:{value:e.answerContent,callback:function(t){e.answerContent=t},expression:"answerContent"}}),e._v(" "),n("div",{ref:"answerActions",staticClass:"dsc-answer-actions"},[n("TypingIndicator",{staticClass:"dsc-typing",attrs:{names:e.userNamesTyping}}),e._v(" "),e.canAccept&&e.postAndAcceptEnabled?[n("EdButton",{key:"secondary",attrs:{disabled:e.answerLoading},on:{click:e.answer}},[e._v("\n\t\t\t\t\t\t\t"+e._s(e.$t("discussion.postButton"))+"\n\t\t\t\t\t\t")]),e._v(" "),n("EdButton",{key:"primary",staticClass:"primary",attrs:{disabled:e.answerLoading,title:e.$t("discussion.postAnswerAndAcceptButtonTooltip")},on:{click:e.answerAndAccept}},[n("I18n",{attrs:{path:"discussion.postAndAcceptButton"},scopedSlots:e._u([{key:"acceptIcon",fn:function(){return[n("Icon",{attrs:{icon:"tick"}})]},proxy:!0}],null,!1,3409750426)})],1)]:[n("EdButton",{key:"primary",staticClass:"primary",attrs:{disabled:e.answerLoading},on:{click:e.answer}},[e._v("\n\t\t\t\t\t\t\t"+e._s(e.$t("discussion.postButton"))+"\n\t\t\t\t\t\t")])]],2)]:n("div",{staticClass:"dsc-answer-message-layout"},[n("div",{staticClass:"dsc-answer-message"},[n("p",[e._v(e._s(e.$t(e.userHasAnswered?"discussion.writeAnotherAnswerMessage":"discussion.answerOwnQuestionMessage")))]),e._v(" "),n("p",[n("BannerButton",{on:{click:e.beginAnswer}},[e._v(e._s(e.$t(e.userHasAnswered?"discussion.writeAnotherAnswerButton":"discussion.answerOwnQuestionButton")))])],1)])])]:e._e()]:e._e(),e._v(" "),e.menuVisible?n("ContextMenu",{on:{close:function(t){e.menuVisible=!1}}},[n("ContextMenuItem",{key:"copyLink",attrs:{text:e.$t("copyLinkButton")},on:{click:function(t){return e.$emit("copy-link")}}}),e._v(" "),e.canEdit?n("ContextMenuItem",{key:"edit",attrs:{text:e.$t("editButton")},on:{click:function(t){return e.$router.push({name:"discuss-edit"})}}}):e._e(),e._v(" "),e.canDelete?n("ContextMenuItem",{key:"delete",attrs:{text:e.$t("deleteButton")},on:{click:function(t){return e.$emit("delete")}}}):e._e(),e._v(" "),n("ContextMenuSeparator"),e._v(" "),e.canStar?n("ContextMenuItem",{key:"star",attrs:{text:e.$t("discussion.threadMenu.star"),checked:e.thread.is_starred},on:{click:function(t){return e.$emit("toggle-star")}}}):e._e(),e._v(" "),e.canEndorse?n("ContextMenuItem",{key:"endorse",attrs:{text:e.$t("discussion.threadMenu.endorse"),checked:e.thread.is_endorsed},on:{click:function(t){return e.$emit("toggle-endorse")}}}):e._e(),e._v(" "),e.canPin?n("ContextMenuItem",{key:"pin",attrs:{text:e.$t("discussion.threadMenu.pin"),checked:e.thread.is_pinned},on:{click:function(t){return e.$emit("toggle-pin")}}}):e._e(),e._v(" "),"active"!==e.course.status||e.thread.deleted_at?e._e():n("ContextMenuItem",{key:"watch",attrs:{text:e.$t("discussion.threadMenu.watch"),checked:null!=e.thread.is_watched}},[n("ContextMenu",[n("WatchMenuItems",{attrs:{value:e.thread.is_watched},on:{input:e.setWatch}})],1)],1),e._v(" "),n("ContextMenuSeparator"),e._v(" "),e.canApprove&&"rejected"===e.thread.approved_status?n("ContextMenuItem",{key:"approve",attrs:{text:e.$t("discussion.approveButton")},on:{click:function(t){return e.$refs.thread.approve()}}}):e._e(),e._v(" "),e.canApprove&&"approved"===e.thread.approved_status?n("ContextMenuItem",{key:"reject",attrs:{text:e.$t("discussion.rejectButton")},on:{click:function(t){return e.$refs.thread.beginRejection()}}}):e._e(),e._v(" "),e.canMakePrivate?n("ContextMenuItem",{key:"makePrivate",attrs:{text:e.$t("discussion.makePrivateButton")},on:{click:function(t){return e.$emit("make-private")}}}):e._e(),e._v(" "),e.canMakePublic?n("ContextMenuItem",{key:"makePublic",attrs:{text:e.$t("discussion.makePublicButton")},on:{click:function(t){return e.$emit("make-public")}}}):e._e(),e._v(" "),e.canLock?n("ContextMenuItem",{key:"lock",attrs:{text:e.$t("lockButton")},on:{click:function(t){return e.$emit("lock")}}}):e._e(),e._v(" "),e.canUnlock?n("ContextMenuItem",{key:"unlock",attrs:{text:e.$t("unlockButton")},on:{click:function(t){return e.$emit("unlock")}}}):e._e()],1):e._e()],2)}),[],!1,null,null,null).exports),ze=n("W2hi"),Ve=n("b/yj"),He={components:{Icon:b.a},props:{placeholder:{type:String,default:void 0}},computed:{computedPlaceholder:function(){return null==this.placeholder?this.$t("discussion.addComment"):this.placeholder}}},We=(n("0hzj"),Object(f.a)(He,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"discuss-reply-placeholder",attrs:{tabindex:"0"},on:{click:function(t){return t.preventDefault(),e.$emit("click",t)},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:(t.preventDefault(),e.$emit("click",t))}}},[n("Icon",{attrs:{icon:"speech"}}),e._v("\n\t"+e._s(e.computedPlaceholder)+"\n")],1)}),[],!1,null,null,null).exports),Qe=n("nVGi"),Ke=n("UNns"),Ye={components:{Trigger:Qe.a,Popup:Ke.a,Ticker:ze.a},props:{thread:{type:Object,required:!0},disabled:{type:Boolean,default:!1}},data:function(){return{popupVisible:!1}}},Ge=(n("NSUc"),Object(f.a)(Ye,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Trigger",{attrs:{action:"toggle",active:e.popupVisible,"delay-on":500,disabled:e.disabled},on:{"update:active":function(t){e.popupVisible=t}},scopedSlots:e._u([{key:"trigger",fn:function(t){return[e._t("trigger",null,null,t)]}},{key:"target",fn:function(t){var s=t.targetLeft,i=t.targetTop,r=t.targetWidth,a=t.targetHeight;return[n("Popup",{attrs:{"target-left":s,"target-top":i,"target-width":r,"target-height":a,"target-anchor-y":0,"anchor-y":1,"clip-mode":"flip"},on:{close:function(t){e.popupVisible=!1}}},[n("div",{staticClass:"tvcp-layout"},[n("div",{staticClass:"tvcp-col"},[n("div",{staticClass:"tvcp-heading"},[e._v("Unique")]),e._v(" "),n("Ticker",{staticClass:"tvcp-count",attrs:{value:e.thread.unique_view_count}})],1),e._v(" "),n("div",{staticClass:"tvcp-col"},[n("div",{staticClass:"tvcp-heading"},[e._v("Total")]),e._v(" "),n("Ticker",{staticClass:"tvcp-count",attrs:{value:e.thread.view_count}})],1)])])]}}],null,!0)})}),[],!1,null,null,null).exports),Xe={directives:{Tooltip:$.a},components:{Amber:m,EdButton:v.a,EdCheck:L.a},extends:z},Je=(n("aXZW"),Object(f.a)(Xe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"discuss-reply-full"},[n("Amber",{staticClass:"drf-amber",attrs:{autofocus:"","can-mention":e.canMention,value:e.value,"original-value":e.originalValue,"min-height":200,"max-height":400},on:{input:function(t){return e.$emit("input",t)}}}),e._v(" "),n("div",{staticClass:"drf-actions"},[n("div",{staticClass:"drf-actions-group"},[e.isAnonymousVisible?n("EdCheck",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("discussion.commentEdit.anonymousDescription"),expression:"$t('discussion.commentEdit.anonymousDescription')"}],attrs:{disabled:e.loading,value:e.isAnonymous,label:e.$t("discussion.commentEdit.anonymousInput")},on:{input:function(t){return e.$emit("update:isAnonymous",t)}}}):e._e(),e._v(" "),e.isPrivateHidden?e._e():n("EdCheck",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("discussion.commentEdit.privateDescription"),expression:"$t('discussion.commentEdit.privateDescription')"}],attrs:{disabled:e.loading||e.isPrivateDisabled,value:e.isPrivate,label:e.$t("discussion.commentEdit.privateInput")},on:{input:function(t){return e.$emit("update:isPrivate",t)}}})],1),e._v(" "),n("div",{staticClass:"drf-actions-group"},[n("EdButton",{attrs:{disabled:e.loading},on:{click:function(t){return e.$emit("cancel")}}},[e._v("\n\t\t\t\t"+e._s(e.$t("cancelButton"))+"\n\t\t\t")]),e._v(" "),n("EdButton",{staticClass:"primary",attrs:{disabled:e.loading},on:{click:function(t){return e.$emit("post")}}},[e._v("\n\t\t\t\t"+e._s(e.$t((e.update?"save":"post")+"Button"))+"\n\t\t\t")])],1)])],1)}),[],!1,null,null,null).exports),Ze={components:{Avatar:I.a,AmberDisplay:D.a,Icon:b.a,UserRoleLabel:A.a,DateDisplay:N.a,ContextMenuTrigger:P.a,ContextMenuItem:c.a,ContextMenuSeparator:u.a,PrivateBadge:re,AuthorName:R.a,ReplyFull:Je},mixins:[ke],data:function(){return{menuVisible:!1}},methods:{print:function(){ue.A(this.$el)}}},et=(n("LpQ4"),{components:{Comments:te,Comment:Object(f.a)(Ze,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"discuss-comment-full"},[n("div",{class:{"dcf-highlighted":e.isHighlighted,"dcf-new":e.isNew}},[e.comment.deleted_at?n("div",{staticClass:"dcf-deleted"},[e._v("\n\t\t\t"+e._s(e.$t("discussion.commentDeleted"))+"\n\t\t")]):n("div",{staticClass:"dcf-layout"},[n("Avatar",{staticClass:"dcf-avatar",attrs:{user:e.comment.is_anonymous?null:e.comment.user,bot:e.isCommentAuthorABot(e.comment)}}),e._v(" "),n("div",{staticClass:"dcf-body"},[n("div",{staticClass:"dcf-user"},[n("AuthorName",{staticClass:"dcf-user-name",attrs:{object:e.comment,popup:""}}),e._v(" "),e.isUserRoleLabelVisible(e.comment)?n("UserRoleLabel",{staticClass:"dcf-user-role",attrs:{user:e.comment.user,course:e.course,"show-tutorials":""}}):e._e(),e._v(" "),n("RouterLink",{staticClass:"dcf-date",attrs:{to:e.route}},[n("DateDisplay",{attrs:{date:e.comment.created_at,format:"fromNow"}})],1),e._v(" "),e.isPrivate?n("PrivateBadge",{staticClass:"dcf-private"}):e._e()],1),e._v(" "),e.parent&&e.replyToVisible?n("div",{staticClass:"dcf-replyto"},[n("Icon",{staticClass:"dcf-replyto-icon",attrs:{icon:"reply"}}),e._v(" "),n("RouterLink",{attrs:{to:{query:{comment:e.parent.id}}}},[e._v("\n\t\t\t\t\t\tReplying to\n\t\t\t\t\t\t"),n("AuthorName",{attrs:{object:e.parent}})],1)],1):e._e(),e._v(" "),e.editing?n("ReplyFull",{attrs:{"original-value":e.comment.content,"is-private":e.editPrivate,"is-anonymous":e.editAnonymous,"is-anonymous-visible":e.isAnonymousVisible,loading:e.editLoading,update:""},on:{"update:isPrivate":function(t){e.editPrivate=t},"update:is-private":function(t){e.editPrivate=t},"update:isAnonymous":function(t){e.editAnonymous=t},"update:is-anonymous":function(t){e.editAnonymous=t},post:e.edit,cancel:e.cancelEdit},model:{value:e.editContent,callback:function(t){e.editContent=t},expression:"editContent"}}):n("AmberDisplay",{staticClass:"dcf-content",attrs:{value:e.comment.content}}),e._v(" "),n("div",{staticClass:"dcf-actions"},[e.canLike||e.comment.vote?n("button",{staticClass:"dcf-action dcf-action-with-icon likes",class:{active:1===e.comment.vote},attrs:{disabled:!e.canLike},on:{click:e.like}},[n("Icon",{attrs:{icon:"heart"}}),e._v(" "),e.comment.vote_count?n("span",[e._v(e._s(e.comment.vote_count))]):e._e()],1):e._e(),e._v(" "),e.canReply?n("button",{staticClass:"dcf-action",on:{click:e.beginReply}},[e._v("\n\t\t\t\t\t\t"+e._s(e.$t("replyButton"))+"\n\t\t\t\t\t")]):e._e(),e._v(" "),e.canEdit?n("button",{staticClass:"dcf-action",on:{click:e.beginEdit}},[e._v("\n\t\t\t\t\t\t"+e._s(e.$t("editButton"))+"\n\t\t\t\t\t")]):e._e(),e._v(" "),e.canEdit?n("button",{staticClass:"dcf-action",on:{click:e.destroy}},[e._v("\n\t\t\t\t\t\t"+e._s(e.$t("deleteButton"))+"\n\t\t\t\t\t")]):e._e(),e._v(" "),n("ContextMenuTrigger",{attrs:{active:e.menuVisible},on:{"update:active":function(t){e.menuVisible=t}},scopedSlots:e._u([{key:"trigger",fn:function(t){var s=t.trigger,i=t.attrs;return[n("button",e._b({staticClass:"dcf-action dcf-action-with-icon",on:{click:s}},"button",i,!1),[n("Icon",{attrs:{icon:"more-horiz"}})],1)]}},{key:"items",fn:function(){return[n("ContextMenuItem",{key:"copyLink",attrs:{text:e.$t("copyLinkButton")},on:{click:e.copyLink}}),e._v(" "),n("ContextMenuItem",{key:"print",attrs:{text:e.$t("printButton")},on:{click:e.print}}),e._v(" "),n("ContextMenuSeparator"),e._v(" "),e.canEdit&&"question"===e.thread.type?n("ContextMenuItem",{key:"convertToAnswer",attrs:{text:e.$t("discussion.commentMenu.convertToAnswer")},on:{click:e.convertToAnswer}}):e._e()]},proxy:!0}])})],1)],1)],1)]),e._v(" "),e.replying?n("ReplyFull",{staticClass:"dcf-reply",attrs:{"is-private":e.replyPrivate,"is-private-disabled":e.replyPrivateDisabled,"is-anonymous":e.replyAnonymous,"is-anonymous-visible":e.isAnonymousVisible,loading:e.replyLoading},on:{"update:isPrivate":function(t){e.replyPrivate=t},"update:is-private":function(t){e.replyPrivate=t},"update:isAnonymous":function(t){e.replyAnonymous=t},"update:is-anonymous":function(t){e.replyAnonymous=t},post:e.reply,cancel:e.cancelReply},model:{value:e.replyContent,callback:function(t){e.replyContent=t},expression:"replyContent"}}):e._e()],1)}),[],!1,null,null,null).exports},mixins:[je]}),tt=(n("Qs+9"),Object(f.a)(et,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Comments",{attrs:{comments:e.comments},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.comment,i=t.parent,r=t.replyToVisible;return[n("Comment",{key:s.id,staticClass:"dcsf-comment",attrs:{thread:e.thread,parent:i,comment:s,course:e.course,"last-seen-at":e.lastSeenAt,"reply-to-visible":r}})]}},{key:"expander",fn:function(e){var t=e.toggle;return[n("div",{staticClass:"dcsf-expander",on:{click:t}},[n("div",{staticClass:"dcsf-expander-line"})])]}}])})}),[],!1,null,null,null).exports),nt={components:{FadeTransition:j.a,Avatar:I.a,Icon:b.a,UserRoleLabel:A.a,AmberDisplay:D.a,Ticker:ze.a,MathRender:Ve.a,DateDisplay:N.a,ContextMenuTrigger:P.a,ContextMenuItem:c.a,ContextMenuSeparator:u.a,WatchMenuItems:y,BannerButton:k,ReplyPlaceholder:We,AuthorName:R.a,ApproveWidget:q,ThreadViewCountPopup:Ge,ReplyFull:Je,Comments:tt},mixins:[Ne],data:function(){return{menuVisible:!1,menuWatchVisible:!1}},created:function(){this.menu=null,this.watchMenuItems=null,this.watchMenu=null},destroyed:function(){this.menu&&this.menu.$destroy(),this.watchMenu&&this.watchMenu.$destroy()},methods:{formatDate:function(e,t){return T()(e).format(t)},print:function(){"answer"===this.thread.type?ue.A(this.$el):this.$emit("print")}}},st=(n("dnyL"),Object(f.a)(nt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"discuss-thread-full",class:{highlighted:e.isHighlighted,new:e.isNew}},["answer"!==e.thread.type?n("h1",{staticClass:"dtf-title"},[n("MathRender",{attrs:{latex:e.thread.title}})],1):e._e(),e._v(" "),"answer"!==e.thread.type?[e.thread.deleted_at?n("div",{staticClass:"dtf-banner"},[e._v("\n\t\t\t"+e._s(e.$t("discussion.threadDeletedOnBanner",{date:e.formatDate(e.thread.deleted_at,"D/M/YY h:mm a")}))+"\n\t\t\t"),e.isStaff?n("BannerButton",{on:{click:e.undelete}},[e._v(e._s(e.$t("undeleteButton")))]):e._e()],1):"active"!==e.course.status?n("div",{staticClass:"dtf-banner"},[e._v("\n\t\t\t"+e._s(e.$t("discussion.threadReadonlyBanner"))+"\n\t\t")]):e._e(),e._v(" "),"rejected"===e.thread.approved_status?n("div",{staticClass:"dtf-banner dtf-banner-info"},[n("span",{staticClass:"dtf-banner-text"},[e._v(e._s(e.$t("discussion.threadRejectedBanner."+(e.thread.user_id===e.user.id?"poster":"staff"),{threadType:e.threadTypeText})))])]):e.thread.is_locked?n("div",{staticClass:"dtf-banner"},[e._v("\n\t\t\t"+e._s(e.$t("discussion.threadLockedBanner"))+"\n\t\t\t"),e.canUnlock?n("BannerButton",{on:{click:e.unlock}},[e._v(e._s(e.$t("unlockButton")))]):e._e()],1):e._e(),e._v(" "),e.rejecting||"pending"!==e.thread.approved_status?e._e():n("div",{staticClass:"dtf-banner dtf-banner-info"},[n("span",{staticClass:"dtf-banner-text"},[e._v(e._s(e.$t("discussion.threadPendingBanner."+(e.thread.user_id===e.user.id?"poster":"staff"),{threadType:e.threadTypeText})))]),e._v(" "),e.canApprove&&"active"===e.course.status?n("div",{staticClass:"dtf-banner-actions"},[n("BannerButton",{on:{click:e.approve}},[e._v(e._s(e.$t("discussion.approveButton")))]),e._v(" "),n("BannerButton",{on:{click:e.beginRejection}},[e._v(e._s(e.$t("discussion.rejectButton")))])],1):e._e()]),e._v(" "),e.rejecting?n("ApproveWidget",{ref:"approve",attrs:{disabled:e.rejectionLoading},on:{cancel:e.cancelRejection,reject:function(t){return e.reject(t.comment,t.anonymous)}},model:{value:e.rejectionContent,callback:function(t){e.rejectionContent=t},expression:"rejectionContent"}}):e._e()]:e._e(),e._v(" "),n("div",{staticClass:"dtf-head-layout"},[n("Avatar",{staticClass:"dtf-avatar",attrs:{user:e.thread.is_anonymous?null:e.thread.user}}),e._v(" "),n("div",{staticClass:"dtf-head-body"},[n("div",{staticClass:"dtf-user"},[n("AuthorName",{staticClass:"dtf-user-name",attrs:{object:e.thread,popup:""}}),e._v(" "),e.isUserRoleLabelVisible(e.thread)?n("UserRoleLabel",{staticClass:"dtf-role",attrs:{user:e.thread.user,course:e.course,"show-tutorials":""}}):e._e()],1),e._v(" "),n("div",{staticClass:"dtf-date"},[n("RouterLink",{attrs:{to:e.route}},[n("DateDisplay",{attrs:{date:e.thread.created_at,format:"fromNow"}})],1),e._v(" "),"answer"!==e.thread.type?[e._v("\n\t\t\t\t\tin "),n("span",{staticClass:"dtf-category",style:e.categoryStyle},[e._v(e._s(e.categoryText))])]:e._e()],2)]),e._v(" "),n("FadeTransition",[e.thread.is_private?n("div",{staticClass:"dtf-badge private",attrs:{title:e.$t("discussion.privateDescription")}},[e._v("\n\t\t\t\t"+e._s(e.$t("discussion.private"))+"\n\t\t\t")]):e._e()]),e._v(" "),n("Transition",[e.thread.is_endorsed?n("div",{staticClass:"dtf-badge endorsed"},[n("Icon",{attrs:{icon:"badge"}}),e._v(" "+e._s(e.$t("discussion.endorsed"))+"\n\t\t\t")],1):e._e()]),e._v(" "),"answer"!==e.thread.type?["active"!==e.course.status||e.thread.deleted_at?e._e():n("button",{staticClass:"dtf-head-action stars",class:{active:e.thread.is_starred},on:{click:e.toggleStar}},[n("Icon",{staticClass:"dtf-head-action-icon",attrs:{icon:"star"}}),e._v(" "),n("div",{staticClass:"dtf-head-action-label"},[e._v(e._s(e.$t("discussion.threadTitleItem."+(e.thread.is_starred?"unstar":"star"))))])],1),e._v(" "),"active"!==e.course.status||e.thread.deleted_at?e._e():n("ContextMenuTrigger",{attrs:{active:e.menuWatchVisible},on:{"update:active":function(t){e.menuWatchVisible=t}},scopedSlots:e._u([{key:"trigger",fn:function(t){var s=t.trigger,i=t.attrs;return[n("button",e._b({staticClass:"dtf-head-action watch",class:{active:null!=e.thread.is_watched},on:{click:function(t){null===e.thread.is_watched?e.setWatch(!0):s(t)}}},"button",i,!1),[n("Icon",{staticClass:"dtf-head-action-icon",attrs:{icon:!1===e.thread.is_watched?"eye-strike":"eye"}}),e._v(" "),n("div",{staticClass:"dtf-head-action-label"},[e._v(e._s(e.$t("discussion.threadTitleItem.watch")))])],1)]}},{key:"items",fn:function(){return[n("WatchMenuItems",{attrs:{value:e.thread.is_watched},on:{input:e.setWatch}})]},proxy:!0}],null,!1,48861914)}),e._v(" "),n("ThreadViewCountPopup",{attrs:{thread:e.thread,disabled:!e.isTutor},scopedSlots:e._u([{key:"trigger",fn:function(t){var s=t.trigger,i=t.attrs;return[n("button",e._b({staticClass:"dtf-head-action",on:{mouseenter:function(e){return s(e,!0)},mouseleave:function(e){return s(e,!1)}}},"button",i,!1),[n("Ticker",{key:e.thread.id,staticClass:"dtf-head-action-text",attrs:{value:e.thread.view_count}}),e._v(" "),n("div",{staticClass:"dtf-head-action-label"},[e._v(e._s(e.$tc("discussion.threadTitleItem.views",e.thread.view_count)))])],1)]}}],null,!1,2103528996)})]:e._e()],2),e._v(" "),n("div",{staticClass:"dtf-body-layout"},[n("div",{staticClass:"dtf-body-gutter"},[e.canLike||e.thread.vote?n("div",{staticClass:"dtf-gutter-btn-layout likes",class:{active:1===e.thread.vote}},[n("button",{staticClass:"dtf-gutter-btn",attrs:{disabled:!e.canLike},on:{click:e.toggleLike}},[n("Icon",{attrs:{icon:"heart"}})],1),e._v(" "),e.thread.vote_count?n("div",{staticClass:"dtf-gutter-count"},[e._v("\n\t\t\t\t\t"+e._s(e.thread.vote_count)+"\n\t\t\t\t")]):e._e()]):e._e(),e._v(" "),"answer"===e.thread.type&&(e.isAccepted||e.canAccept)?n("div",{staticClass:"dtf-gutter-btn-layout accepted",class:{active:e.isAccepted},on:{click:e.toggleAccept}},[n("button",{staticClass:"dtf-gutter-btn",attrs:{disabled:!e.canAccept}},[n("Icon",{attrs:{icon:"tick"}})],1)]):e._e()]),e._v(" "),n("div",{staticClass:"dtf-body"},[e.editing?n("ReplyFull",{attrs:{"original-value":e.thread.content,"is-anonymous":e.editAnonymous,"is-anonymous-visible":e.isAnonymousVisible,loading:e.editLoading,update:""},on:{"update:isAnonymous":function(t){e.editAnonymous=t},"update:is-anonymous":function(t){e.editAnonymous=t},cancel:e.cancelEdit,post:e.edit},model:{value:e.editContent,callback:function(t){e.editContent=t},expression:"editContent"}}):n("AmberDisplay",{staticClass:"dtf-amber-display",attrs:{value:e.thread.content}}),e._v(" "),n("div",{staticClass:"dtf-actions"},[e.canReply?n("button",{staticClass:"dtf-action",on:{click:e.beginReply}},[e._v("\n\t\t\t\t\t"+e._s(e.$t("replyButton"))+"\n\t\t\t\t")]):e._e(),e._v(" "),e.canEdit?n("button",{staticClass:"dtf-action",on:{click:e.beginEdit}},[e._v("\n\t\t\t\t\t"+e._s(e.$t("editButton"))+"\n\t\t\t\t")]):e._e(),e._v(" "),e.canEdit?n("button",{staticClass:"dtf-action",on:{click:e.destroy}},[e._v("\n\t\t\t\t\t"+e._s(e.$t("deleteButton"))+"\n\t\t\t\t")]):e._e(),e._v(" "),e.canEndorse?n("button",{staticClass:"dtf-action",on:{click:e.toggleEndorse}},[e._v("\n\t\t\t\t\t"+e._s(e.$t("discussion."+(e.thread.is_endorsed?"unendorse":"endorse")+"Button"))+"\n\t\t\t\t")]):e._e(),e._v(" "),e.canPin?n("button",{staticClass:"dtf-action",on:{click:e.togglePin}},[e._v("\n\t\t\t\t\t"+e._s(e.$t("discussion."+(e.thread.is_pinned?"unpin":"pin")+"Button"))+"\n\t\t\t\t")]):e._e(),e._v(" "),n("ContextMenuTrigger",{attrs:{active:e.menuVisible},on:{"update:active":function(t){e.menuVisible=t}},scopedSlots:e._u([{key:"trigger",fn:function(t){var s=t.trigger,i=t.attrs;return[n("button",e._b({staticClass:"dtf-action dtf-action-with-icon",on:{click:s}},"button",i,!1),[n("Icon",{attrs:{icon:"more-horiz"}})],1)]}},{key:"items",fn:function(){return[n("ContextMenuItem",{key:"copyLink",attrs:{text:e.$t("copyLinkButton")},on:{click:e.copyLink}}),e._v(" "),n("ContextMenuItem",{key:"print",attrs:{text:e.$t("printButton")},on:{click:e.print}}),e._v(" "),n("ContextMenuSeparator"),e._v(" "),e.canApprove&&"rejected"===e.thread.approved_status?n("ContextMenuItem",{key:"approve",attrs:{text:e.$t("discussion.approveButton")},on:{click:e.approve}}):e._e(),e._v(" "),e.canApprove&&"approved"===e.thread.approved_status?n("ContextMenuItem",{key:"reject",attrs:{text:e.$t("discussion.rejectButton")},on:{click:e.beginRejection}}):e._e(),e._v(" "),e.canMakePrivate?n("ContextMenuItem",{key:"makePrivate",attrs:{text:e.$t("discussion.makePrivateButton")},on:{click:e.makePrivate}}):e._e(),e._v(" "),e.canMakePublic?n("ContextMenuItem",{key:"makePublic",attrs:{text:e.$t("discussion.makePublicButton")},on:{click:e.makePublic}}):e._e(),e._v(" "),e.canLock?n("ContextMenuItem",{key:"lock",attrs:{text:e.$t("lockButton")},on:{click:e.lock}}):e._e(),e._v(" "),e.canUnlock?n("ContextMenuItem",{key:"unlock",attrs:{text:e.$t("unlockButton")},on:{click:e.unlock}}):e._e(),e._v(" "),n("ContextMenuSeparator"),e._v(" "),e.canEdit&&"answer"===e.thread.type?n("ContextMenuItem",{key:"convertToComment",attrs:{text:e.$t("discussion.threadMenu.convertToComment")},on:{click:e.convertToComment}}):e._e()]},proxy:!0}])})],1),e._v(" "),e.canReply&&e.replyPlaceholderEnabled&&!e.replying?n("ReplyPlaceholder",{staticClass:"dtf-reply-placeholder",on:{click:e.beginReply}}):e._e(),e._v(" "),e.replying?n("ReplyFull",{attrs:{"is-private":e.replyPrivate,"is-anonymous":e.replyAnonymous,"is-anonymous-visible":e.isAnonymousVisible,loading:e.replyLoading},on:{"update:isPrivate":function(t){e.replyPrivate=t},"update:is-private":function(t){e.replyPrivate=t},"update:isAnonymous":function(t){e.replyAnonymous=t},"update:is-anonymous":function(t){e.replyAnonymous=t},cancel:e.cancelReply,post:e.reply},model:{value:e.replyContent,callback:function(t){e.replyContent=t},expression:"replyContent"}}):e._e(),e._v(" "),e.thread.comments.length?n("Comments",{key:e.thread.id,staticClass:"dtf-comments",attrs:{comments:e.thread.comments,thread:e.parent||e.thread,course:e.course,"last-seen-at":e.lastSeenAt}}):e._e()],1)])],2)}),[],!1,null,null,null).exports),it={name:"ThreadShowFull",components:{Amber:m,EdButton:v.a,EdCheck:L.a,Icon:b.a,TypingIndicator:S,BannerButton:k,ThreadFull:st},mixins:[qe]},rt=(n("7q6n"),Object(f.a)(it,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"discuss-show-full"},[n("div",{ref:"printRegion"},[n("ThreadFull",{staticClass:"dsf-thread",attrs:{thread:e.thread,course:e.course,"last-seen-at":e.glancedAt},on:{print:e.onPrint}}),e._v(" "),"question"===e.thread.type?[e.thread.answers.length?n("div",{staticClass:"dsf-answers-heading"},[e._v("\n\t\t\t\t"+e._s(e.$tc("discussion.answersHeading",e.thread.answers.length))+"\n\t\t\t")]):e._e(),e._v(" "),e._l(e.thread.answers,(function(t){return n("ThreadFull",{key:t.id,staticClass:"dsf-answer",attrs:{thread:t,course:e.course,parent:e.thread,"can-accept":e.canAccept,"last-seen-at":e.glancedAt},on:{accept:function(n){return e.toggleAccept(t.id)},deleted:function(n){return e.onAnswerDeleted(t)}}})}))]:e._e()],2),e._v(" "),"question"===e.thread.type&&e.canAnswer?[e.answering?[n("div",{staticClass:"dsf-answers-heading"},[e._v(e._s(e.$t("discussion.yourAnswerHeading")))]),e._v(" "),n("Amber",{ref:"answerAmber",staticClass:"dsf-amber",attrs:{"can-mention":e.canMention,"min-height":200,"max-height":400},nativeOn:{input:function(t){return e.onAnswerInput(t)},focusout:function(t){return e.onAnswerFocusout(t)}},model:{value:e.answerContent,callback:function(t){e.answerContent=t},expression:"answerContent"}}),e._v(" "),n("div",{ref:"answerActions",staticClass:"dsf-actions"},[n("TypingIndicator",{staticClass:"dsf-typing",attrs:{names:e.userNamesTyping}}),e._v(" "),e.userIsThreadAuthor?n("EdCheck",{staticClass:"dsf-anonymous",attrs:{label:"Anonymous"},model:{value:e.answerAnonymous,callback:function(t){e.answerAnonymous=t},expression:"answerAnonymous"}}):e._e(),e._v(" "),e.canAccept&&e.postAndAcceptEnabled?[n("EdButton",{key:"secondary",attrs:{disabled:e.answerLoading},on:{click:e.answer}},[e._v("\n\t\t\t\t\t\t"+e._s(e.$t("discussion.postAnswerButton"))+"\n\t\t\t\t\t")]),e._v(" "),n("EdButton",{key:"primary",staticClass:"primary",attrs:{disabled:e.answerLoading,title:e.$t("discussion.postAnswerAndAcceptButtonTooltip")},on:{click:e.answerAndAccept}},[n("I18n",{attrs:{path:"discussion.postAnswerAndAcceptButton"},scopedSlots:e._u([{key:"acceptIcon",fn:function(){return[n("Icon",{attrs:{icon:"tick"}})]},proxy:!0}],null,!1,3409750426)})],1)]:[n("EdButton",{key:"primary",staticClass:"primary",attrs:{disabled:e.answerLoading},on:{click:e.answer}},[e._v("\n\t\t\t\t\t\t"+e._s(e.$t("discussion.postAnswerButton"))+"\n\t\t\t\t\t")])]],2)]:n("div",{staticClass:"dsf-answer-message-layout"},[n("div",{staticClass:"dsf-answer-message"},[n("p",[e._v(e._s(e.$t(e.userHasAnswered?"discussion.writeAnotherAnswerMessage":"discussion.answerOwnQuestionMessage")))]),e._v(" "),n("p",[n("BannerButton",{on:{click:e.beginAnswer}},[e._v(e._s(e.$t(e.userHasAnswered?"discussion.writeAnotherAnswerButton":"discussion.answerOwnQuestionButton")))])],1)])])]:e._e()],2)}),[],!1,null,null,null).exports),at={components:{Amber:m,EdButton:v.a},extends:z},ot=(n("Dc+w"),Object(f.a)(at,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"discuss-reply-accessible"},[n("Amber",{staticClass:"dra-amber",attrs:{type:"basic",autofocus:"",value:e.value,"original-value":e.originalValue,"can-mention":e.canMention},on:{input:function(t){return e.$emit("input",t)}}}),e._v(" "),n("div",{staticClass:"dra-actions"},[n("EdButton",{staticClass:"dra-action",attrs:{disabled:e.loading},on:{click:function(t){return e.$emit("cancel")}}},[e._v("\n\t\t\tCancel\n\t\t")]),e._v(" "),n("EdButton",{staticClass:"primary dra-action",attrs:{disabled:e.loading},on:{click:function(t){return e.$emit("post")}}},[e._v("\n\t\t\t"+e._s(e.update?"Save":"Post")+"\n\t\t")])],1)],1)}),[],!1,null,null,null).exports),lt={components:{AmberDisplay:D.a,UserRoleLabel:A.a,ReplyCompact:ot,AuthorName:R.a,DateDisplay:N.a},mixins:[ke]},ct=(n("IYXS"),{components:{Comments:te,Comment:Object(f.a)(lt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"discuss-comment-accessible"},[e.comment.deleted_at?n("div",{staticClass:"dca-deleted"},[e._v("This comment was deleted")]):[n("div",{staticClass:"dca-user"},[n("AuthorName",{staticClass:"dca-user-name",attrs:{object:e.comment,popup:""}}),e._v(" "),e.isUserRoleLabelVisible(e.comment)?n("UserRoleLabel",{staticClass:"dca-user-role",attrs:{user:e.comment.user,course:e.course,"show-tutorials":""}}):e._e(),e._v(" "),n("DateDisplay",{staticClass:"dca-date",attrs:{date:e.comment.created_at,format:"fromNow"}})],1),e._v(" "),e.editing?n("ReplyCompact",{attrs:{"original-value":e.comment.content,loading:e.editLoading,update:""},on:{post:e.edit,cancel:e.cancelEdit},model:{value:e.editContent,callback:function(t){e.editContent=t},expression:"editContent"}}):n("AmberDisplay",{staticClass:"dca-content",attrs:{value:e.comment.content,"render-math":!1}}),e._v(" "),n("div",{staticClass:"dca-actions"},[n("a",{staticClass:"dca-action",on:{click:e.beginReply}},[e._v("Reply")])]),e._v(" "),e.replying?n("ReplyCompact",{attrs:{"is-private":e.replyPrivate,"is-private-disabled":e.replyPrivateDisabled,loading:e.replyLoading},on:{"update:isPrivate":function(t){e.replyPrivate=t},"update:is-private":function(t){e.replyPrivate=t},post:e.reply,cancel:e.cancelReply},model:{value:e.replyContent,callback:function(t){e.replyContent=t},expression:"replyContent"}}):e._e()]],2)}),[],!1,null,null,null).exports},mixins:[je]}),ut=(n("TGly"),Object(f.a)(ct,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Comments",{attrs:{comments:e.comments},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.comment,i=t.parent,r=t.replyToVisible;return[n("Comment",{key:s.id,staticClass:"dcsa-comment",attrs:{thread:e.thread,parent:i,comment:s,course:e.course,"last-seen-at":e.lastSeenAt,"reply-to-visible":r}})]}},{key:"expander",fn:function(){return[n("div",{staticClass:"dcsa-expander"})]},proxy:!0}])})}),[],!1,null,null,null).exports),dt={name:"DiscussThreadAccessible",components:{AmberDisplay:D.a,MathRender:Ve.a,Comments:ut},mixins:[Ne]},ht=(n("FM0R"),Object(f.a)(dt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"discuss-thread-accessible"},["answer"!==e.thread.type?n("h1",[n("MathRender",{staticClass:"dta-title",attrs:{latex:e.thread.title}})],1):e._e(),e._v(" "),"answer"===e.thread.type?n("h3",[e._v("Answer by "+e._s(e.thread.user.name))]):e._e(),e._v(" "),n("AmberDisplay",{attrs:{value:e.thread.content,"render-math":!1}}),e._v(" "),e.thread.comments.length?n("Comments",{key:e.thread.id,attrs:{comments:e.thread.comments,thread:e.parent||e.thread,course:e.course,"last-seen-at":e.lastSeenAt}}):e._e()],1)}),[],!1,null,null,null).exports),pt={name:"DiscussShowAccessible",components:{Amber:m,EdButton:v.a,Thread:ht},mixins:[qe],methods:{pluralize:ce.pluralize}},ft=(n("6L3E"),Object(f.a)(pt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"discuss-show-accessible"},[n("Thread",{attrs:{thread:e.thread,course:e.course}}),e._v(" "),"question"===e.thread.type?[e.thread.answers.length?n("div",{staticClass:"dsa-answers-heading"},[e._v("\n\t\t\t"+e._s(e.thread.answers.length)+" "+e._s(e.pluralize(e.thread.answers.length,"Answer"))+"\n\t\t")]):e._e(),e._v(" "),e._l(e.thread.answers,(function(t){return n("Thread",{key:t.id,staticClass:"dsf-answer",attrs:{thread:t,course:e.course,parent:e.thread,"can-accept":e.canAccept,"last-seen-at":e.glancedAt},on:{accept:function(n){return e.toggleAccept(t.id)},deleted:function(n){return e.onAnswerDeleted(t)}}})})),e._v(" "),n("div",{staticClass:"dsa-answers-heading"},[e._v("Post an answer")]),e._v(" "),n("p",[e._v("To comment, click the reply button on the question or comment you want to reply to instead.")]),e._v(" "),n("Amber",{ref:"answerAmber",staticClass:"dsf-amber",attrs:{type:"basic","can-mention":e.canMention},nativeOn:{input:function(t){return e.onAnswerInput(t)},focusout:function(t){return e.onAnswerFocusout(t)}},model:{value:e.answerContent,callback:function(t){e.answerContent=t},expression:"answerContent"}}),e._v(" "),n("div",{staticClass:"dsf-actions"},[n("EdButton",{staticClass:"primary",attrs:{disabled:e.answerLoading},on:{click:e.answer}},[e._v("\n\t\t\t\tPost\n\t\t\t")])],1)]:e._e()],2)}),[],!1,null,null,null).exports),mt={name:"DiscussShowError",props:{message:{type:String,required:!0}},data:function(){var e=this;return{appbar:{hamburger:!1,secondaryActions:[{icon:"chevron-left",handler:function(){return e.$router.push({name:"discuss-index"})}}]}}}},vt=(n("p5fx"),Object(f.a)(mt,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"discuss-show-error"},[this._v("\n\t"+this._s(this.message)+"\n")])}),[],!1,null,null,null).exports),bt=(n("isJU"),Object(f.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{staticClass:"loading-anim",attrs:{viewBox:"0 0 100 69.954"}},[t("path",{staticClass:"loading-anim-e",attrs:{d:"m 47.087861,46.251708 c 0,0.591872 0,1.184749 0,1.775616 0,0.593883 -0.02914,1.154603 -0.08843,1.688193 H 14.950906 c 0.11757,1.241023 0.487365,2.367489 1.109384,3.372365 0.622019,1.004877 1.420895,1.878114 2.39663,2.616699 0.97674,0.741598 2.072055,1.318398 3.285947,1.733412 1.21188,0.414009 2.469986,0.624028 3.772306,0.624028 2.308201,0 4.261681,-0.432097 5.860439,-1.289256 1.596749,-0.858165 2.899069,-1.968554 3.905956,-3.328152 l 10.121115,6.39001 c -2.072055,3.01865 -4.809339,5.340919 -8.21185,6.970828 -3.404522,1.626896 -7.354691,2.442855 -11.851514,2.442855 -3.315087,0 -6.451307,-0.521531 -9.409663,-1.554543 C 12.968285,66.659744 10.380728,65.15042 8.1609556,63.165789 5.9421883,61.183168 4.1947081,58.742322 2.9235393,55.843254 1.6503608,52.942175 1.0152788,49.627088 1.0152788,45.898996 c 0,-3.610521 0.6220186,-6.88039 1.8640459,-9.810609 1.2430322,-2.931225 2.9302199,-5.416284 5.0605581,-7.456184 2.1313432,-2.042914 4.6465492,-3.625595 7.5466222,-4.750051 2.899069,-1.123452 6.036293,-1.687187 9.409663,-1.687187 3.254796,0 6.245309,0.547657 8.966514,1.641968 2.72221,1.096319 5.061563,2.679 7.014038,4.750051 1.952475,2.072055 3.475867,4.58726 4.571183,7.546622 1.092301,2.957352 1.639958,6.330722 1.639958,10.118102 z M 33.681804,40.658565 c 0,-2.308201 -0.725521,-4.291828 -2.175557,-5.947864 -1.450038,-1.657041 -3.625595,-2.486064 -6.525668,-2.486064 -1.419891,0 -2.721206,0.222077 -3.904951,0.666233 -1.184749,0.444155 -2.219772,1.0511 -3.107077,1.820835 -0.889317,0.769737 -1.59876,1.67312 -2.132349,2.709148 -0.53158,1.034018 -0.829023,2.115265 -0.886301,3.240727 h 18.731903 z"}}),this._v(" "),t("path",{staticClass:"loading-anim-d",attrs:{d:"m 85.581665,67.824396 v -5.770001 h -0.177863 c -1.420895,2.250924 -3.449741,3.982325 -6.082517,5.195212 -2.633782,1.210876 -5.428343,1.819831 -8.388709,1.819831 -3.316092,0 -6.274449,-0.65116 -8.878084,-1.950465 -2.605645,-1.303325 -4.809339,-3.034727 -6.615102,-5.195212 -1.805764,-2.158474 -3.181439,-4.660617 -4.127028,-7.501402 -0.947599,-2.841792 -1.419891,-5.799143 -1.419891,-8.87909 0,-3.076931 0.487366,-6.02122 1.465111,-8.831859 0.97674,-2.811644 2.365479,-5.282636 4.171242,-7.412974 1.804758,-2.131343 3.995389,-3.817526 6.568878,-5.060558 2.574493,-1.243032 5.461503,-1.864046 8.656006,-1.864046 3.25379,0 6.007151,0.622019 8.25707,1.864046 2.248914,1.242027 3.996394,2.60464 5.238422,4.083818 h 0.178867 V 0.70869487 H 98.987721 V 67.824396 Z M 85.048076,45.630694 c 0,-1.418886 -0.250214,-2.810639 -0.753657,-4.170237 -0.502439,-1.362613 -1.212886,-2.574495 -2.130338,-3.641673 -0.918458,-1.065169 -2.029851,-1.922329 -3.328152,-2.574494 -1.303324,-0.650154 -2.784513,-0.97674 -4.439544,-0.97674 -1.717334,0 -3.224649,0.326586 -4.527973,0.97674 -1.301315,0.652165 -2.396631,1.494252 -3.283937,2.53028 -0.889315,1.036027 -1.554544,2.23585 -1.997694,3.595447 -0.444156,1.360603 -0.665228,2.751353 -0.665228,4.170238 0,1.4219 0.221072,2.827722 0.665228,4.217466 0.44315,1.39276 1.109383,2.617703 1.997694,3.684883 0.887306,1.065169 1.982622,1.923333 3.283937,2.574493 1.303324,0.650155 2.810639,0.977745 4.527973,0.977745 1.655031,0 3.13622,-0.32558 4.439544,-0.977745 1.301315,-0.64915 2.409694,-1.509324 3.328152,-2.574493 0.917452,-1.06718 1.627899,-2.278055 2.130338,-3.640668 0.503443,-1.361607 0.753657,-2.750347 0.753657,-4.171242 z"}})])}),[],!1,null,null,null).exports),gt=n("1hVX");function yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _t,kt,Ct,xt={name:"DiscussShow",components:{ShowCompact:Ue,ShowFull:rt,ShowAccessible:ft,ShowError:vt,LoadingAnim:bt},inject:["discussApi","streamService","eventBus"],props:{threadId:{type:Number,required:!0},threadList:{type:Object,default:void 0}},data:function(){return{thread:null,errorMessage:null,loading:!1,viewerCount:0}},computed:wt({},Object(o.e)(["user","course","isSmallDevice"]),{},Object(o.c)(["isStaff"]),{},Object(o.c)("discuss",["getThreadUserDisplayName"]),{component:function(){return this.user.settings.accessible?"ShowAccessible":this.isSmallDevice?"ShowCompact":"ShowFull"},isDeleted:function(){return null!=this.thread.deleted_at},isLocked:function(){return this.thread.is_locked},canEdit:function(){var e,t;return"active"===this.course.status&&!this.isDeleted&&!this.isLocked&&(this.isStaff||(null==(e=this.thread)?void 0:null==(t=e.user)?void 0:t.id)===this.user.id)},canDelete:function(){return"active"===this.course.status&&!this.isDeleted&&!this.isLocked&&this.canEdit},canPin:function(){return"active"===this.course.status&&!this.isDeleted&&!this.isLocked&&this.isStaff},canStar:function(){return"active"===this.course.status&&!this.isDeleted&&!this.isLocked},canEndorse:function(){return"active"===this.course.status&&!this.isDeleted&&!this.isLocked&&this.isStaff},canLock:function(){return"active"===this.course.status&&!this.isDeleted&&this.isStaff&&"approved"===this.thread.approved_status&&!this.thread.is_locked},canUnlock:function(){return"active"===this.course.status&&!this.isDeleted&&this.isStaff&&"approved"===this.thread.approved_status&&this.thread.is_locked},canMakePrivate:function(){return"active"===this.course.status&&!this.isDeleted&&this.isStaff&&!this.thread.is_private},canMakePublic:function(){return"active"===this.course.status&&!this.isDeleted&&this.isStaff&&this.thread.is_private},canApprove:function(){return"active"===this.course.status&&!this.isDeleted&&this.isStaff}}),watch:{threadId:function(){this.update()},thread:function(e,t){var n=e?e.id:0,s=t?t.id:0;if(n!==s&&(s&&(t.glanced_at=this.discussApi.glance(s),t.new_reply_count=0),n)){this.discussApi.view(n),this.discussApi.glance(n);var i=new Set;i.add("thread:"+e.id),function e(t){if(t){var n=!0,s=!1,r=void 0;try{for(var a,o=t.comments[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var l=a.value;i.add("comment:"+l.id),e(l)}}catch(m){s=!0,r=m}finally{try{n||null==o.return||o.return()}finally{if(s)throw r}}if(t.answers){var c=!0,u=!1,d=void 0;try{for(var h,p=t.answers[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var f=h.value;i.add("comment:"+f.id),e(f)}}catch(m){u=!0,d=m}finally{try{c||null==p.return||p.return()}finally{if(u)throw d}}}}}(e),this.eventBus.emit("notifications:implicit-read",i),this.glanceTimer.restart()}}},created:function(){var e=this;this.disposables=new ae.a(this.eventBus.on("stream:connected",this.onStreamConnected),this.eventBus.on("stream:comment.new",this.onStreamCommentNew),this.eventBus.on("stream:thread.count",this.onStreamThreadCount)),this.glanceTimer=new gt.a(3e5,(function(){e.thread&&e.discussApi.glance(e.thread.id),e.glanceTimer.start()})),this.glanceTimer.start(),this.streamDisposable=null,this.update()},destroyed:function(){this.streamDisposable&&(this.streamDisposable.dispose(),this.streamDisposable=null),this.thread&&(this.thread.glanced_at=this.discussApi.glance(this.thread.id),this.thread.new_reply_count=0,this.cleanupThread()),this.glanceTimer.stop(),this.disposables.dispose()},shouldConfirmRouteUpdate:function(e,t){var n=this.$refs.show;return n&&n.shouldConfirmRouteUpdate(e,t)},routeUpdateMessage:function(){var e=this.$refs.show;return e&&e.routeUpdateMessage()},methods:{cleanupThread:function(){this.thread&&(this.thread.comments=[],this.thread.answers=[])},resetScroll:function(){var e=ue.o(this.$el);e&&(e.scrollTop=0)},update:(Ct=Object(r.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.thread||this.thread.id!==this.threadId){e.next=2;break}return e.abrupt("return");case 2:return this.loading=!0,t=this.threadId,e.prev=4,e.next=7,this.discussApi.getThread(t);case 7:if(!(n=e.sent).deleted_at||this.course.settings.discussion.deleted){e.next=10;break}throw{status:410};case 10:if(this.threadList&&(n=this.threadList.putThread(n)),this.threadId===t){e.next=13;break}return e.abrupt("return");case 13:n.view_count++,n.is_seen||pe.g(this.discussApi,this.eventBus,this.$i18n,n,this.course,!0),this.streamDisposable=this.streamService.subscribe("thread",n.id),this.cleanupThread(),this.thread=n,this.errorMessage=null,this.resetScroll(),e.next=38;break;case 22:if(e.prev=22,e.t0=e.catch(4),this.threadId===t){e.next=26;break}return e.abrupt("return");case 26:this.thread&&(this.viewerCount=0,this.streamDisposable.dispose(),this.streamDisposable=null),this.thread=null,e.t1=e.t0.status,e.next=403===e.t1?31:404===e.t1?33:410===e.t1?35:37;break;case 31:return this.errorMessage=this.$t("discussion.threadForbidden"),e.abrupt("break",38);case 33:return this.errorMessage=this.$t("discussion.threadNotFound"),e.abrupt("break",38);case 35:return this.errorMessage=this.$t("discussion.threadGone"),e.abrupt("break",38);case 37:this.errorMessage=this.$t("networkError");case 38:return e.prev=38,this.threadId===t&&(this.loading=!1),e.finish(38);case 41:case"end":return e.stop()}}),e,this,[[4,22,38,41]])}))),function(){return Ct.apply(this,arguments)}),reload:(kt=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.discussApi.getThread(this.threadId);case 2:t=e.sent,this.threadList&&(t=this.threadList.putThread(t)),this.thread=t;case 5:case"end":return e.stop()}}),e,this)}))),function(){return kt.apply(this,arguments)}),onDelete:(_t=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.d({title:this.$t("discussion.deleteThread.confirmTitle"),text:this.$t("discussion.deleteThread.confirmText"),icon:"warning",primaryAction:this.$t("deleteButton"),secondaryAction:this.$t("cancelButton")});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return t=this.thread,e.prev=5,e.next=8,this.discussApi.destroy(t.id,t.type);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(5),this.thread===t&&le.b({type:"error",text:this.$t("discussion.deleteThread.error")}),e.abrupt("return");case 14:this.thread===t&&(le.b({type:"success",text:this.$t("discussion.deleteThread.success")}),this.$router.push({name:"discuss-index"}));case 15:case"end":return e.stop()}}),e,this,[[5,10]])}))),function(){return _t.apply(this,arguments)}),onToggleStar:function(){pe.o(this.discussApi,this.$i18n,this.thread)},onTogglePin:function(){pe.l(this.discussApi,this.$i18n,this.thread)},onToggleEndorse:function(){pe.j(this.discussApi,this.$i18n,this.thread)},onMakePrivate:function(){pe.m(this.discussApi,this.$i18n,this.thread)},onMakePublic:function(){pe.m(this.discussApi,this.$i18n,this.thread)},onLock:function(){pe.k(this.discussApi,this.$i18n,this.thread)},onUnlock:function(){pe.k(this.discussApi,this.$i18n,this.thread)},onCopyLink:function(){var e=pe.d(this.$router,this.thread);he.a(e,{successMessage:this.$t("discussion.linkCopied")})},onAnswerDeleted:function(e){var t=this.thread.answers.indexOf(e);-1!==t&&this.thread.answers.splice(t,1)},onStreamConnected:function(){this.reload()},onStreamCommentNew:function(e){var t=this,n=wt({},e.data.comment,{comments:[]});if(n.thread_id===this.thread.id){var s=new Set;s.add("comment:"+n.id),this.eventBus.emit("notifications:implicit-read",s)}"answer"!==n.type||n.thread_id!==this.thread.id||this.thread.answers.find((function(e){return e.id===n.id}))||(this.thread.answers.push(n),n.user_id!==this.user.id&&le.b({title:this.$t("discussion.streamNewAnswer",{author:this.getThreadUserDisplayName(n)}),text:ce.ellipsis(n.document,200)}).action.then((function(e){0===e&&t.$router.push({name:"discuss-show",params:{courseId:n.course_id,threadId:n.thread_id},query:{answer:n.id}})})))},onStreamThreadCount:function(e){var t=e.data;this.viewerCount=t.count}}},jt=(n("oSlJ"),Object(f.a)(xt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"discuss-show"},[e.thread||e.errorMessage||!e.loading?e._e():n("LoadingAnim",{staticClass:"ds-loading-anim"}),e._v(" "),e.errorMessage?n("ShowError",{staticClass:"ds-error",attrs:{message:e.errorMessage}}):e._e(),e._v(" "),e.thread?n(e.component,{ref:"show",tag:"component",attrs:{thread:e.thread,"viewer-count":e.viewerCount,"can-edit":e.canEdit,"can-delete":e.canDelete,"can-pin":e.canPin,"can-star":e.canStar,"can-endorse":e.canEndorse,"can-lock":e.canLock,"can-unlock":e.canUnlock,"can-make-private":e.canMakePrivate,"can-make-public":e.canMakePublic,"can-approve":e.canApprove},on:{delete:e.onDelete,"toggle-star":e.onToggleStar,"toggle-pin":e.onTogglePin,"toggle-endorse":e.onToggleEndorse,"make-private":e.onMakePrivate,"make-public":e.onMakePublic,lock:e.onLock,unlock:e.onUnlock,"copy-link":e.onCopyLink,"answer-deleted":e.onAnswerDeleted}}):e._e()],1)}),[],!1,null,null,null));t.default=jt.exports},fQCj:function(e,t,n){},fQK8:function(e,t,n){},fSrK:function(e,t,n){"use strict";var s=n("9w/H");n.n(s).a},fWrQ:function(e,t,n){},fXXr:function(e,t,n){"use strict";var s=n("p2fF");n.n(s).a},fa1T:function(e,t,n){"use strict";var s=n("kCJ2");n.n(s).a},fara:function(e,t,n){},ffO3:function(e,t,n){},flB1:function(e,t,n){},fp7K:function(e,t,n){},gA4q:function(e,t,n){"use strict";n("pNMO"),n("TeQF"),n("qePV"),n("5DmW"),n("27RR"),n("tkto"),n("OM9Z"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("sEfC"),l=n.n(o),c=n("L2JU"),u=n("BCsR"),d=n("5/Cn"),h=n("Pa8A"),p=n("o+Su"),f=n("2XLt"),m=n("VYah"),v=n("YxxY"),b=n("62+2"),g=n("sS5e"),y=n("NC1X"),w=n("nVGi"),_=n("B7nN"),k=n("7zca"),C=n("oDEV"),x=n("2RTD"),j={props:{result:{type:Object,required:!0},titleVisible:{type:Boolean,default:!0}}},O=(n("K+w4"),n("KHd+")),S=Object(O.a)(j,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"db-run-result"},[e.result?[e.result.ok?[n("h2",{directives:[{name:"show",rawName:"v-show",value:e.titleVisible,expression:"titleVisible"}],staticClass:"drr"},[e._v("Your query returned")]),e._v(" "),!e.result.selections||1===e.result.selections.length&&0===e.result.selections[0].columns.length?n("p",[e._v("No results")]):e._e(),e._v(" "),e._l(e.result.selections,(function(t,s){return n("table",{key:s,staticClass:"drr-table"},[n("thead",[n("tr",e._l(t.columns,(function(t,s){return n("th",{key:s},[e._v(e._s(t))])})),0)]),e._v(" "),n("tbody",e._l(t.rows,(function(t,s){return n("tr",{key:s},e._l(t,(function(t,s){return n("td",{key:s},[e._v(e._s(t))])})),0)})),0)])}))]:[n("h2",{directives:[{name:"show",rawName:"v-show",value:e.titleVisible,expression:"titleVisible"}],staticClass:"drr"},[e._v("Error running your SQL")]),e._v(" "),n("div",{staticClass:"drr-error"},[e._v(e._s(e.result.output))])]]:e._e()],2)}),[],!1,null,null,null).exports,E={props:{collapsed:{type:Boolean,default:!1}}},T=(n("SQJw"),Object(O.a)(E,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"challenge-expand-button",class:{collapsed:e.collapsed},on:{click:function(t){return e.$emit("click",t)}}},[n("svg",{staticClass:"ceb-icon",attrs:{viewBox:"0 0 50 15"}},[n("polyline",{attrs:{points:"1,1 25,14 49,1"}})])])}),[],!1,null,null,null).exports),I=n("/lWA"),D=n("WmPt"),P={components:{Icon:D.a},mixins:[I.a],props:{icon:{type:String,default:void 0},disabled:{type:Boolean,default:!1},active:{type:Boolean,default:void 0}},computed:{cssClass:function(){return[!0===this.active&&"active",!1===this.active&&"inactive","ctbb-".concat(this.computedTheme)]}}},A=(n("6g/b"),Object(O.a)(P,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"challenge-toolbar-button",class:e.cssClass,attrs:{disabled:e.disabled},on:{click:function(t){return e.$emit("click",t)}}},[n("div",{staticClass:"ctbb-layout"},[e.icon?n("Icon",{staticClass:"ctbb-icon",attrs:{icon:e.icon}}):e._e(),e._v(" "),e._t("default")],2)])}),[],!1,null,null,null).exports),N=n("UNns"),R=n("xtk+"),M=n("4K9I"),L=n("LnxB"),F=n("8PNo"),B={directives:{Tooltip:h.a},components:{Popup:N.a,Icon:D.a,EdInput:R.a,EdButton:M.a,Message:L.a},props:{x:{type:Number,default:0},y:{type:Number,default:0},url:{type:String,required:!0},noSshKeys:{type:Boolean,default:!1}},methods:{handleUrlMouseDown:function(e){document.activeElement!==e.target&&(e.preventDefault(),e.target.select())},copyToClipboard:function(){F.a(this.url)}}},q=(n("FzWN"),Object(O.a)(B,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Popup",{attrs:{"target-left":e.x,"target-top":e.y,"light-dismissable":"",background:"rgb(241, 240, 232)"},on:{close:function(t){return e.$emit("close")}}},[n("div",{staticClass:"workspace-popup-clone"},[n("div",{staticClass:"wspclo-info"},[e._v("\n\t\t\tClone this workspace to your computer with "),n("strong",[e._v("Git")]),e._v(" from the following URL.\n\t\t")]),e._v(" "),n("div",{staticClass:"wspclo-body"},[n("div",{staticClass:"wspclo-layout"},[n("EdInput",{staticClass:"wspclo-url",attrs:{value:e.url,readonly:""},on:{mousedown:e.handleUrlMouseDown}}),e._v(" "),n("EdButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Copy to Clipboard",expression:"'Copy to Clipboard'"}],staticClass:"wspclo-copy",on:{click:e.copyToClipboard}},[n("Icon",{attrs:{icon:"copy"}})],1)],1),e._v(" "),e.noSshKeys?n("Message",{staticClass:"wspclo-message",attrs:{type:"warning"}},[e._v("\n\t\t\t\tYou have not added an SSH key to Ed. We will use your SSH key for\n\t\t\t\tauthentication with Git.\n\t\t\t\t"),n("RouterLink",{attrs:{to:{name:"settings/ssh"}}},[e._v("Add SSH key")])],1):e._e()],1)])])}),[],!1,null,null,null).exports);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var U,z,V,H={directives:{Tooltip:h.a},components:{Workspace:p.default,WebPreview:f.a,Split:m.a,SplitPanel:v.a,Vnodes:b.a,Runner:g.a,Spinner:y.a,Trigger:w.a,ToolbarGroup:_.a,ToolbarButton:k.a,FadeTransition:C.a,WorkspaceToolbarMiniButton:x.a,DbRunResult:S,ExpandButton:T,ChallengeToolbarButton:A,PopupClone:q},inject:["workspaceSettings","challengeApi","userApi","keyboardShortcutManager"],props:{challenge:{type:Object,required:!0},connectType:{type:String,required:!0},connectParam:{type:null,required:!0},userId:{type:Number,default:null},password:{type:String,default:null},ipHash:{type:String,default:null},persistId:{type:String,default:null},runBeforeMark:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},gitSubmissionEnabled:{type:Boolean,default:!1},shortcutKeysDisabled:{type:Boolean,default:!1}},data:function(){return{splitPanelEditorFrac:1,splitPanelTabsFrac:1,readonly:!1,temporary:!1,wid:null,masqueradedUser:null,runReady:!1,running:!1,marking:!1,markDisabledTimeout:null,activeTab:null,runArgs:null,loadingRun:!1,dbResult:null,popupCloneVisible:!1,noSshKeys:null,webPreviewAutoreload:!0,webPreviewUrl:"",webPreviewActivated:!1,markDirty:!0}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(c.e)(["workspaceTheme","user"]),{workspaceType:function(){switch(this.challenge.type){case"postgres":return"database";case"web":return"web";default:return this.challenge.type}},runEnabled:function(){if("postgres"===this.challenge.type)return this.challenge.features.run;if(!this.challenge.settings.run_command)return!1;switch(this.connectType){case"challenge":case"submission":return this.challenge.features.run;case"solution-view":return!0;default:return!1}},markEnabled:function(){return"challenge"===this.connectType&&this.challenge.features.mark&&!this.readonly&&!this.temporary},webPreviewEnabled:function(){return"web"===this.workspaceType},markDisabled:function(){return!this.markEnabled||this.marking||null!=this.markDisabledTimeout||this.runBeforeMark&&this.markDirty&&"assessment"!==this.challenge.kind&&this.runEnabled},markTooltip:function(){if(this.runBeforeMark&&this.markDirty&&"assessment"!==this.challenge.kind&&this.runEnabled)return"Run your code first"},willMarkOnSubmit:function(){return!this.challenge||"none"!==this.challenge.type},markButtonLabel:function(){return this.willMarkOnSubmit?"Mark":"Submit"},runTabEnabled:function(){return this.runEnabled},terminalTabEnabled:function(){return(!this.challenge.features.git_submission||!this.challenge.settings.only_git_submission)&&(this.challenge.features.terminal&&!this.challenge.features.full)},webPreviewTabEnabled:function(){return this.webPreviewEnabled},tabContainerHasContent:function(){return this.runTabEnabled||this.terminalTabEnabled||this.webPreviewTabEnabled},tabContainerVisible:function(){return this.tabContainerHasContent||this.markEnabled},tabs:function(){return[this.runTabEnabled&&{key:"run",label:"database"===this.workspaceType?"Result":"Console"},this.terminalTabEnabled&&{key:"terminal",label:"Terminal"},this.webPreviewTabEnabled&&{key:"webPreview",label:"Web Preview"}].filter(Boolean)},cloneUrl:function(){return this.challengeApi.generateCloneUrl(this.challenge.id,this.challenge.title,this.userId)},editorVisible:function(){return"challenge"!==this.connectType||this.challenge.features.editor}}),watch:{marking:function(e){var t=this;e&&(null!=this.markDisabledTimeout&&clearTimeout(this.markDisabledTimeout),this.markDisabledTimeout=setTimeout((function(){t.markDisabledTimeout=null}),2e3))},running:function(e){e||(this.markDirty=!1)},popupCloneVisible:function(e){e&&null==this.noSshKeys&&this.updateNoSshKeys()}},created:function(){this.reloadWebPreview=l()(this.reloadWebPreview,500),this.webPreviewTabEnabled?this.selectTab("webPreview"):this.runTabEnabled?this.selectTab("run"):this.terminalTabEnabled&&this.selectTab("terminal"),0===this.tabs.length&&(this.splitPanelEditorFrac=1,this.splitPanelTabsFrac=0),this.disposable=this.keyboardShortcutManager.registerMany([{description:"Run challenge",shortcut:{default:"Control+Enter",mac:"Meta+Enter"},handler:this.handleKeyboardShortcutRun},{description:"Mark challenge",shortcut:{default:"Control+Shift+Enter",mac:"Meta+Shift+Enter"},handler:this.handleKeyboardShortcutMark}])},destroyed:function(){this.disposable.dispose()},methods:{updateNoSshKeys:(V=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.userApi.getSshKeys(this.user.id);case 2:t=e.sent,this.noSshKeys=0===t.length;case 4:case"end":return e.stop()}}),e,this)}))),function(){return V.apply(this,arguments)}),downloadWorkspaceLog:function(){return this.$refs.workspace.downloadWorkspaceLog()},handleKeyboardShortcutRun:function(e){if(this.shortcutKeysDisabled||e.repeat)return!1;this.running?this.stop():this.run()},handleKeyboardShortcutMark:function(e){if(this.shortcutKeysDisabled||e.repeat)return!1;this.mark()},expandSplitPanel:function(){this.splitPanelTabsFrac<.3&&(this.splitPanelEditorFrac=1,this.splitPanelTabsFrac=1)},toggleSplitPanel:function(){0===this.splitPanelTabsFrac?(this.splitPanelEditorFrac=1,this.splitPanelTabsFrac=1):(this.splitPanelEditorFrac=1,this.splitPanelTabsFrac=0)},onTemporary:function(e){this.temporary=e,this.$emit("temporary",e)},onReadonly:function(e){this.readonly=e,this.$emit("readonly",e)},onWid:function(e){this.wid=e,this.$emit("wid",e)},onMasqueradedUser:function(e){this.masqueradedUser=e,this.$emit("masqueraded-user",e)},onWebPreviewUrl:function(e){this.webPreviewUrl=e},onFileOt:function(){this.webPreviewAutoreload&&this.reloadWebPreview()},isTabActive:function(e){return this.activeTab===e},selectTab:function(e){this.activeTab=e},reloadWebPreview:function(){this.$refs.webPreview&&this.$refs.webPreview.reload()},run:(z=Object(r.a)(i.a.mark((function e(){var t,n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.runEnabled&&!this.running){e.next=2;break}return e.abrupt("return");case 2:if(this.selectTab("run"),this.runReady=!0,"code"!==this.workspaceType||u.touchOnly||this.$refs.runner.focus(),!this.readonly){e.next=9;break}e.t0=null,e.next=12;break;case 9:return e.next=11,this.$refs.workspace.commit();case 11:e.t0=e.sent;case 12:if(t=e.t0,"solution-view"===(n=this.connectType)&&(n="solution"),"database"!==this.workspaceType){e.next=39;break}if(this.loadingRun=!0,e.prev=17,"submission"!==n){e.next=24;break}return e.next=21,this.challengeApi.runPostgresSubmission(this.connectParam,{password:this.password,ipHash:this.ipHash});case 21:s=e.sent,e.next=33;break;case 24:if("solution"!==n){e.next=30;break}return e.next=27,this.challengeApi.runPostgresSolution(this.connectParam,{password:this.password,ipHash:this.ipHash});case 27:s=e.sent,e.next=33;break;case 30:return e.next=32,this.challengeApi.runPostgresChallenge(this.challenge.id,t,{password:this.password,ipHash:this.ipHash});case 32:s=e.sent;case 33:this.dbResult=s.result;case 34:return e.prev=34,this.loadingRun=!1,e.finish(34);case 37:e.next=40;break;case 39:this.$refs.runner.runCode({type:n,param:this.connectParam,wid:this.wid,commitHash:t,userId:this.userId,password:this.password,ipHash:this.ipHash,runCommand:[this.challenge.settings.run_command,this.runArgs].filter(Boolean).join(" ")});case 40:case"end":return e.stop()}}),e,this,[[17,,34,37]])}))),function(){return z.apply(this,arguments)}),stop:function(){this.$refs.runner.stop()},mark:(U=Object(r.a)(i.a.mark((function e(){var t,n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.markDisabled){e.next=2;break}return e.abrupt("return");case 2:if(t=!1,null==this.userId||this.userId===this.user.id){e.next=9;break}return t=!0,e.next=7,d.b({title:"Submit on behalf of ".concat(this.masqueradedUser.name,"?"),text:"This will count as a submission for ".concat(this.masqueradedUser.name,". Proceed?"),icon:"warning",primaryAction:"Submit",secondaryAction:"Cancel"});case 7:if(e.sent){e.next=9;break}return e.abrupt("return");case 9:if(!(this.challenge.due_at&&new Date(this.challenge.due_at)<new Date)){e.next=15;break}return t=!0,e.next=13,d.b({title:"Submit late?",text:"You are attempting to submit past the due date. If you continue, your submission will be marked as late. Continue?",icon:"warning",primaryAction:"Submit",secondaryAction:"Cancel"});case 13:if(e.sent){e.next=15;break}return e.abrupt("return");case 15:if(t||!this.challenge.features.confirm_submit){e.next=20;break}return e.next=18,d.b({title:"Are you sure you want to submit?",text:this.willMarkOnSubmit?"Your submission will be marked automatically.":"",icon:"question",primaryAction:this.willMarkOnSubmit?"Submit & Mark":"Submit",secondaryAction:"Cancel"});case 18:if(e.sent){e.next=20;break}return e.abrupt("return");case 20:return this.marking=!0,this.markDirty=!0,this.$emit("will-mark"),e.next=25,this.$refs.workspace.commit();case 25:return n=e.sent,e.next=28,this.challengeApi.markChallenge(this.connectParam,n,{userId:this.userId,password:this.password,ipHash:this.ipHash});case 28:s=e.sent,this.marking=!1,this.$emit("did-mark",{submission:s});case 31:case"end":return e.stop()}}),e,this)}))),function(){return U.apply(this,arguments)}),killAllTerminals:function(){return this.$refs.workspace.killAllTerminals()}}},W=(n("ar59"),Object(O.a)(H,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Workspace",{ref:"workspace",attrs:{theme:e.workspaceTheme,chrome:e.challenge.settings.chrome,simple:!e.challenge.features.full,"open-terminal-command":e.challenge.settings.terminal_command,"open-terminal-disabled":!e.challenge.features.terminal,"connect-type":e.connectType,"connect-param":e.connectParam,"connect-user-id":e.userId,"connect-password":e.password,"connect-ip-hash":e.ipHash,"show-user-email":e.challenge.features.anonymous_submissions,autofocus:e.autofocus},on:{temporary:e.onTemporary,readonly:e.onReadonly,wid:e.onWid,"masqueraded-user":e.onMasqueradedUser,"web-preview-url":e.onWebPreviewUrl,"file-ot":e.onFileOt},scopedSlots:e._u([{key:"layout",fn:function(t){return[n("Split",{staticClass:"chws-split",attrs:{orientation:"vertical","persist-id":e.persistId,disabled:!e.tabContainerHasContent}},[e.editorVisible?n("SplitPanel",{key:"editor",attrs:{frac:e.splitPanelEditorFrac,collapsable:"","collapsed-text":"Editor"},on:{"update:frac":function(t){e.splitPanelEditorFrac=t}}},[n("Vnodes",{attrs:{vnodes:t.children}})],1):e._e(),e._v(" "),e.tabContainerVisible?n("SplitPanel",{key:"tabs",attrs:{frac:e.splitPanelTabsFrac,collapsable:"","collapsed-size":40},on:{"update:frac":function(t){e.splitPanelTabsFrac=t}},scopedSlots:e._u([{key:"default",fn:function(s){var i=s.collapsed;return[n("div",{staticClass:"chws-tab-container"},[n("div",{staticClass:"chws-toolbar"},[e._l(e.tabs,(function(t){return n("ChallengeToolbarButton",{key:t.key,attrs:{active:e.isTabActive(t.key)},on:{click:function(n){e.selectTab(t.key),e.expandSplitPanel()}}},[e._v("\n\t\t\t\t\t\t\t"+e._s(t.label)+"\n\t\t\t\t\t\t")])})),e._v(" "),e.editorVisible&&e.tabContainerHasContent?n("ExpandButton",{attrs:{collapsed:i},on:{click:e.toggleSplitPanel}}):e._e(),e._v(" "),n("div",{staticClass:"chws-toolbar-buttons-right"},[e.runEnabled?n("ChallengeToolbarButton",{directives:[{name:"show",rawName:"v-show",value:!e.running,expression:"!running"}],staticClass:"chws-toolbar-button-run",attrs:{disabled:e.loadingRun,icon:"play"},on:{click:function(t){e.run(),e.expandSplitPanel()}}},[e._v("\n\t\t\t\t\t\t\t\tRun\n\t\t\t\t\t\t\t")]):e._e(),e._v(" "),e.runEnabled?n("ChallengeToolbarButton",{directives:[{name:"show",rawName:"v-show",value:e.running,expression:"running"}],staticClass:"chws-toolbar-button-stop",attrs:{icon:"stop"},on:{click:e.stop}},[e._v("\n\t\t\t\t\t\t\t\tStop\n\t\t\t\t\t\t\t")]):e._e(),e._v(" "),e.markEnabled?n("ChallengeToolbarButton",{staticClass:"chws-toolbar-button-mark",attrs:{disabled:e.markDisabled,icon:"tick"},on:{click:e.mark}},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(e.markButtonLabel)+"\n\t\t\t\t\t\t\t")]):e._e()],1)],2),e._v(" "),e.runTabEnabled?n("div",{directives:[{name:"show",rawName:"v-show",value:e.isTabActive("run"),expression:"isTabActive('run')"}],staticClass:"chws-pane"},[n("div",{staticClass:"chws-run-container"},["database"!==e.workspaceType?n("Runner",{ref:"runner",staticClass:"chws-runner",attrs:{sounds:e.workspaceSettings.get("terminalSounds")},on:{"will-run":function(t){e.running=!0},"did-run":function(t){e.running=!1}}}):e._e(),e._v(" "),"database"===e.workspaceType&&e.dbResult?n("DbRunResult",{staticClass:"chws-db-run-result",attrs:{result:e.dbResult}}):e._e(),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.runReady||e.loadingRun,expression:"!runReady || loadingRun"}],staticClass:"chws-placeholder"},[e.loadingRun?[n("Spinner"),e._v(" Running your query...\n\t\t\t\t\t\t\t\t")]:[e._v(e._s("database"===e.workspaceType?"Result":"Console")+" will be displayed here after running your "+e._s("database"===e.workspaceType?"query":"code"))]],2)],1),e._v(" "),"code"===e.workspaceType&&e.challenge.features.arguments?n("div",{staticClass:"chws-run-args-container",on:{click:function(t){return e.$refs.runnerArgs.focus()}}},[n("div",{staticClass:"chws-run-args-prompt"},[n("span",{staticClass:"prompt"},[e._v("$")]),e._v(" "+e._s(e.challenge.settings.run_command)+"\n\t\t\t\t\t\t\t")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.runArgs,expression:"runArgs"}],ref:"runnerArgs",staticClass:"chws-run-args-input",attrs:{type:"text",autocomplete:"off",spellcheck:"false",placeholder:"..."},domProps:{value:e.runArgs},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.run(t)},input:function(t){t.target.composing||(e.runArgs=t.target.value)}}})]):e._e()]):e._e(),e._v(" "),e.webPreviewTabEnabled?n("div",{directives:[{name:"show",rawName:"v-show",value:e.isTabActive("webPreview"),expression:"isTabActive('webPreview')"}],staticClass:"chws-pane"},[e.webPreviewActivated?n("WebPreview",{ref:"webPreview",staticClass:"chws-web-preview",attrs:{autoreload:e.webPreviewAutoreload,url:e.webPreviewUrl},on:{"update:autoreload":function(t){e.webPreviewAutoreload=t},"update:url":function(t){e.webPreviewUrl=t}}}):n("div",{staticClass:"chws-placeholder",on:{click:function(t){e.webPreviewActivated=!0}}},[e._v("\n\t\t\t\t\t\t\tClick to enable Web Preview\n\t\t\t\t\t\t")])],1):e._e(),e._v(" "),e.terminalTabEnabled?n("div",{directives:[{name:"show",rawName:"v-show",value:e.isTabActive("terminal"),expression:"isTabActive('terminal')"}],staticClass:"chws-pane"},[n("Vnodes",{attrs:{vnodes:t.fixedTerminal}}),e._v(" "),t.fixedTerminalOpen?n("button",{staticClass:"chws-fixed-terminal-reset-btn",on:{click:function(t){return e.$refs.workspace.resetFixedTerminal()}}},[e._v("\n\t\t\t\t\t\t\tReset\n\t\t\t\t\t\t")]):e._e(),e._v(" "),n("FadeTransition",[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.fixedTerminalOpen,expression:"!scope.fixedTerminalOpen"}],staticClass:"chws-fixed-terminal-overlay",on:{click:function(t){return e.$refs.workspace.openFixedTerminal()}}},[t.fixedTerminalLoading?n("p",[e._v("Opening terminal...")]):e._e(),e._v(" "),t.fixedTerminalLoading||t.fixedTerminalOpen||!t.fixedTerminalMessage?e._e():n("p",[e._v(e._s(t.fixedTerminalMessage))]),e._v(" "),t.fixedTerminalLoading||t.fixedTerminalOpen?e._e():n("p",[e._v("Click here to activate the terminal")])])])],1):e._e()])]}}],null,!0)}):e._e()],1)]}},{key:"toolbarRight",fn:function(){return[e.gitSubmissionEnabled?n("ToolbarGroup",[n("Trigger",{attrs:{active:e.popupCloneVisible,action:"toggle"},on:{"update:active":function(t){e.popupCloneVisible=t}},scopedSlots:e._u([{key:"trigger",fn:function(t){var s=t.trigger,i=t.attrs;return[n("ToolbarButton",e._b({directives:[{name:"tooltip",rawName:"v-tooltip",value:"Clone with Git",expression:"'Clone with Git'"}],attrs:{icon:"git"},on:{click:s}},"ToolbarButton",i,!1))]}},{key:"target",fn:function(t){var s=t.x,i=t.y;return[n("PopupClone",{attrs:{x:s,y:i,url:e.cloneUrl,"no-ssh-keys":!0===e.noSshKeys},on:{close:function(t){e.popupCloneVisible=!1}}})]}}],null,!1,3422165065)})],1):e._e()]},proxy:!0},{key:"toolbarSimple",fn:function(){return[e.gitSubmissionEnabled?n("Trigger",{attrs:{active:e.popupCloneVisible,action:"toggle"},on:{"update:active":function(t){e.popupCloneVisible=t}},scopedSlots:e._u([{key:"trigger",fn:function(t){var s=t.trigger,i=t.attrs;return[n("WorkspaceToolbarMiniButton",e._b({directives:[{name:"tooltip",rawName:"v-tooltip",value:"Clone with Git",expression:"'Clone with Git'"}],attrs:{icon:"git"},on:{click:s}},"WorkspaceToolbarMiniButton",i,!1))]}},{key:"target",fn:function(t){var s=t.x,i=t.y;return[n("PopupClone",{attrs:{x:s,y:i,url:e.cloneUrl,"no-ssh-keys":!0===e.noSshKeys},on:{close:function(t){e.popupCloneVisible=!1}}})]}}],null,!1,3573281961)}):e._e()]},proxy:!0}])})}),[],!1,null,null,null));t.a=W.exports},gAQY:function(e,t,n){},gD3A:function(e,t,n){"use strict";n("pNMO"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s,i,r=n("rePB"),a=n("ABIe"),o=n("SBq4"),l=n("5G72"),c=(n("ma9I"),n("07d7"),n("5s+n"),n("o0o1")),u=n.n(c),d=(n("ls82"),n("HaE+")),h=n("20nU"),p=n("hSdx"),f=n("9Arg"),m=n("/Yj0"),v=n("5/Cn"),b=n("NC1X"),g=n("ELTR"),y={components:{Spinner:b.a,ImageAnnotator:g.a},inject:["fileApi"],props:{value:{type:Array,required:!0}},data:function(){return{loading:!1,annotating:!1}},computed:{initial:function(){return 0===this.value.length&&!this.loading}},methods:{itemClass:function(e){if(this.selectedImage===e)return"selected"},updateValueAddImage:function(e){this.$emit("input",this.value.concat(e))},updateValueRemoveImage:function(e){this.$emit("input",this.value.filter((function(t){return t!==e})))},addImageUrl:(i=Object(d.a)(u.a.mark((function e(t){var n=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,s){var i=new Image;i.onload=function(){n.updateValueAddImage({url:i.src,width:i.width,height:i.height}),e()},i.onerror=s,i.src=t})));case 1:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)}),addImage:function(){var e=this;f.m(function(){var t=Object(d.a)(u.a.mark((function t(n){var s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.size>e.fileApi.maxFileSize)){t.next=3;break}return v.a({icon:"warning",title:"File is too large",text:"Cannot upload this image because it is too large. The size of the file cannot exceed ".concat(p.humanizeFileSize(e.fileApi.maxFileSize),".")}),t.abrupt("return");case 3:return e.loading=!0,t.prev=4,t.next=7,e.fileApi.uploadFile(n);case 7:return s=t.sent,t.next=10,e.addImageUrl("".concat(h.e,"/files/").concat(s.id));case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(4),m.b({type:"error",text:"Failed to upload image."});case 15:return t.prev=15,e.loading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[4,12,15,18]])})));return function(e){return t.apply(this,arguments)}}(),{accept:["jpg","png","gif","svg"]})},showAnnotator:function(){this.annotating=!0},onAnnotatorCancel:function(){this.annotating=!1},onAnnotatorDone:(s=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.annotating=!1,this.loading=!0,e.prev=2,e.next=5,this.addImageUrl("".concat(h.e,"/files/").concat(t.id));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),m.b({type:"error",text:"Failed to load image."});case 10:return e.prev=10,this.loading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[2,7,10,13]])}))),function(e){return s.apply(this,arguments)})}},w=(n("Qkj8"),n("KHd+")),_=Object(w.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"image-well"},[e.initial?e._e():n("div",{staticClass:"iwell-container"},[e._l(e.value,(function(t,s){return n("div",{key:s,staticClass:"iwell-item",class:e.itemClass(t),attrs:{tabindex:"-1"}},[n("img",{staticClass:"iwell-img",attrs:{src:t.url,draggable:"false"}}),e._v(" "),n("div",{staticClass:"iwell-delete",on:{click:function(n){return e.updateValueRemoveImage(t)}}},[n("svg",{attrs:{viewBox:"0 0 20 20"}},[n("path",{attrs:{d:"M2,2 L18,18 M2,18 L18,2"}})])])])})),e._v(" "),e.loading?n("Spinner",{staticClass:"iwell-spinner"}):[n("div",{staticClass:"iwell-add",on:{click:e.addImage}},[e._v("Add"),n("br"),e._v("Image")]),e._v(" "),n("div",{staticClass:"iwell-add media-not-sm",on:{click:e.showAnnotator}},[e._v("Add"),n("br"),e._v("Annotation")])]],2),e._v(" "),e.initial?n("div",{staticClass:"iwell-add-initial"},[n("span",{on:{click:e.addImage}},[e._v("Add Image")]),e._v(" "),n("span",{staticClass:"media-not-sm",on:{click:e.showAnnotator}},[e._v("Add Annotation")])]):e._e(),e._v(" "),e.annotating?n("ImageAnnotator",{on:{cancel:e.onAnnotatorCancel,done:e.onAnnotatorDone}}):e._e()],1)}),[],!1,null,null,null).exports,k=n("/jHr"),C={directives:{Autofocus:o.a},components:{EdTextarea:l.a,ImageWell:_},props:{value:{type:String,default:void 0},originalValue:{type:String,default:void 0},autofocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},computed:{computedValue:function(){return this.value||k.a},plaintext:function(){return k.f(this.computedValue)},images:function(){return k.e(this.computedValue)},basicInfoVisible:function(){if(!this.originalValue)return!1;var e=k.f(this.originalValue),t=k.e(this.originalValue);return k.b(e,t)!==this.originalValue}},methods:{onPlaintextInput:function(e){var t=k.b(e,this.images);this.$emit("input",t)},onImageInput:function(e){var t=k.b(this.plaintext,e);this.$emit("input",t)},focus:function(){this.$refs.textarea.focus()},input:function(e){this.$refs.textarea.input(e)}}},x=(n("lS62"),Object(w.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"amber-basic"},[n("EdTextarea",{directives:[{name:"autofocus",rawName:"v-autofocus",value:e.autofocus,expression:"autofocus"}],ref:"textarea",staticClass:"amber-basic-textarea",attrs:{value:e.plaintext,disabled:e.disabled},on:{input:e.onPlaintextInput}}),e._v(" "),n("ImageWell",{staticClass:"amber-basic-images",attrs:{value:e.images},on:{input:e.onImageInput}}),e._v(" "),e.basicInfoVisible?n("div",{staticClass:"amber-basic-info"},[e._v("\n\t\tThis is a simplified editor for mobile devices. All text formatting and\n\t\tblocks will be removed from the original post. Edit on a computer instead\n\t\tif you want to preserve this information.\n\t")]):e._e()],1)}),[],!1,null,null,null).exports),j=n("BCsR");function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var S={functional:!0,render:function(e,t){return e(j.touchOnly?x:a.a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.data,{class:["amber-responsive",t.data.class]}))}},E=Object(w.a)(S,void 0,void 0,!1,null,null,null);t.a=E.exports},gQHg:function(e,t,n){"use strict";var s=n("+K8I");n.n(s).a},"gR/7":function(e,t,n){"use strict";var s=n("rvAr");n.n(s).a},gSBo:function(e,t,n){},gbAs:function(e,t,n){"use strict";var s=n("nnuT");n.n(s).a},gfEb:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("fbCW"),n("qePV"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s,i,r,a=n("o0o1"),o=n.n(a),l=(n("ls82"),n("HaE+")),c=n("rePB"),u=n("L2JU"),d=n("Q2AE"),h=n("t19P"),p=n("TphV"),f=n("2PkB"),m=n("JBdv"),v=n("W2hi"),b=n("whzu"),g=(n("x0AG"),n("WmPt")),y=n("8f0z"),w=n("/Yj0"),_=n("5/Cn"),k={components:{Icon:g.a,QuestionResult:y.a},inject:["swayApi"],props:{activity:{type:Object,required:!0}},computed:{result:function(){return this.activity.result},itemIndex:function(){var e=this;return this.result.items.findIndex((function(t){return t.id===e.activity.currentItemId}))},hasPrevItem:function(){return this.itemIndex>0},hasNextItem:function(){return this.itemIndex<this.result.items.length-1},item:function(){return this.result.items[this.itemIndex]}},methods:{prevItem:function(){this.changeItem(-1)},nextItem:function(){this.changeItem(1)},changeItem:(r=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.result.items[this.itemIndex+t].id,e.prev=1,e.next=4,this.swayApi.updateActivity(this.activity.quizId,{current_item_id:n});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),w.b({type:"error",text:"Unable to change question."});case 9:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(e){return r.apply(this,arguments)}),complete:(i=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.item,e.prev=1,e.next=4,this.swayApi.updateActivityItem(t.id,{active:!1});case 4:e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(1),w.b({type:"error",text:"Unable to show answer."}),e.abrupt("return");case 10:t.active=!1;case 11:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(){return i.apply(this,arguments)}),restart:(s=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.b({icon:"warning",title:"Restart this question?",text:"All responses made to this question so far will be deleted and everyone will be able to reattempt it.",primaryAction:"Restart"});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return t=this.item,e.prev=5,e.next=8,this.swayApi.destroyActivityItemResponses(t.id);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(5),w.b({type:"error",text:"Unable to restart the item."}),e.abrupt("return");case 14:w.b({type:"success",text:"Question restarted."});case 15:case"end":return e.stop()}}),e,this,[[5,10]])}))),function(){return s.apply(this,arguments)})}},C=(n("1FpQ"),n("KHd+")),x=Object(C.a)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sway-paced-result"},[n("div",{staticClass:"sqzpr-question-actions"},[n("button",{staticClass:"sqzpr-question-action",attrs:{disabled:!e.hasPrevItem},on:{click:e.prevItem}},[n("Icon",{attrs:{icon:"chevron-left"}}),e._v(" "),n("span",[e._v("Previous Question")])],1),e._v(" "),n("div",{staticClass:"sqzpr-question-action-group"},[n("button",{staticClass:"sqzpr-question-action",on:{click:e.restart}},[n("Icon",{attrs:{icon:"reload"}}),e._v(" "),n("span",[e._v("Restart")])],1),e._v(" "),n("button",{staticClass:"sqzpr-question-action sqzpr-question-action-complete",attrs:{disabled:!e.item.active},on:{click:e.complete}},[n("Icon",{attrs:{icon:"tick"}}),e._v(" "),n("span",[e._v("Complete")])],1)]),e._v(" "),n("button",{staticClass:"sqzpr-question-action",attrs:{disabled:!e.hasNextItem},on:{click:e.nextItem}},[n("span",[e._v("Next Question")]),e._v(" "),n("Icon",{attrs:{icon:"chevron-right"}})],1)]),e._v(" "),e._l(e.item.questions,(function(t,s){return n("QuestionResult",{key:t.id,attrs:{result:e.result,"item-index":e.itemIndex,"question-index":s,"responses-hidden":e.item.active,"answers-hidden":e.item.active,"names-hidden":""}})}))],2)}),[],!1,null,null,null).exports,j=n("hSdx");function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E,T={name:"SwayHost",components:{HeaderContainer:h.a,Navbar:p.a,NavbarButton:f.a,DateDisplay:m.a,Ticker:v.a,QuizResult:b.a,PacedResult:x},inject:["swayApi"],props:{quizId:{type:Number,required:!0}},computed:S({},Object(u.e)("sway",["activities"]),{activity:function(){var e=+this.quizId;return this.activities.find((function(t){return t.quizId===e}))},result:function(){return this.activity&&this.activity.result},quiz:function(){return this.activity&&this.activity.quiz},completeAttemptsCount:function(){var e=this;return this.result.attempts.filter((function(t){return t.responses.length===e.quiz.items.reduce((function(e,t){return e+t.questions.length}),0)})).length},totalAttemptsCount:function(){return this.result.attempts.length},responsesCount:function(){return this.result.attempts.reduce((function(e,t){return e+t.responses.length}),0)},totalResponsesCount:function(){return this.quiz.items.reduce((function(e,t){return e+t.questions.length}),0)*this.totalAttemptsCount}}),mounted:function(){this.setNavbarVisible(!0)},destroyed:function(){this.setNavbarVisible(!1)},methods:S({},Object(u.d)({setNavbarVisible:d.c.SET_NAVBAR_VISIBLE}),{formatPercent:j.formatPercent,endActivity:(E=Object(l.a)(o.a.mark((function e(){var t,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.result,n=this.totalAttemptsCount-this.completeAttemptsCount,s=function(){switch(n){case 0:return"";case 1:return"\n\nThere is still one student who has not yet completed the activity.";default:return"\n\nThere are still ".concat(n," students who have not yet completed the activity.")}}(),e.next=5,_.b({icon:"warning",title:"End activity?",text:"No more students will be able to participate and the scores will be finalised.".concat(s),primaryAction:"End Activity",secondaryAction:"Cancel"});case 5:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.prev=7,e.next=10,this.swayApi.endActivity(this.activity.quizId);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(7),_.c("Unable to end the activity"),e.abrupt("return");case 16:w.b({type:"success",title:"Activity ended",text:"Students will no longer be able to participate in this activity but you can view the results here and in Reports."}),t.active=!1;case 18:case"end":return e.stop()}}),e,this,[[7,12]])}))),function(){return E.apply(this,arguments)}),downloadResult:function(){this.swayApi.downloadResult(this.quiz.id)}})},I=(n("uGxL"),Object(C.a)(T,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("HeaderContainer",{staticClass:"sway-activities-host",scopedSlots:e._u([{key:"header",fn:function(){return[n("Navbar",{attrs:{title:e.quiz&&e.quiz.name,secondary:""},scopedSlots:e._u([{key:"left",fn:function(){return[n("NavbarButton",{attrs:{text:"Lobby",icon:"chevron-left",to:{name:"sway-lobby"}}})]},proxy:!0},{key:"right",fn:function(){return[e.activity&&e.activity.active?n("NavbarButton",{attrs:{text:"Attempt",icon:"sway",to:{name:"sway-activities-run",params:{quizId:e.activity.quizId}}}}):e._e(),e._v(" "),e.activity&&e.activity.active?n("NavbarButton",{attrs:{text:"End",icon:"clear",type:"danger"},on:{action:e.endActivity}}):e._e(),e._v(" "),e.activity&&!e.activity.active?n("NavbarButton",{attrs:{text:"Download Report",icon:"download"},on:{action:e.downloadResult}}):e._e()]},proxy:!0}])})]},proxy:!0}])},[e._v(" "),e.result?n("div",{staticClass:"sah-container"},[n("div",{staticClass:"sah-summary"},[n("div",{staticClass:"sah-summary-item"},[n("div",{staticClass:"sah-summary-heading"},[e._v("Status")]),e._v(" "),n("div",{staticClass:"sah-summary-text sah-summary-status",class:"sah-summary-"+(e.activity.active?"running":"ended")},[e._v(e._s(e.activity.active?"Running":"Ended"))])]),e._v(" "),n("div",{staticClass:"sah-summary-item"},[n("div",{staticClass:"sah-summary-heading"},[e._v("Started")]),e._v(" "),n("div",{staticClass:"sah-summary-text"},[n("DateDisplay",{attrs:{date:e.activity.createdAt,format:"fromNow"}})],1)]),e._v(" "),n("div",{staticClass:"sah-summary-item"},[n("div",{staticClass:"sah-summary-heading"},[e._v("Participants")]),e._v(" "),n("div",{staticClass:"sah-summary-text"},[n("Ticker",{attrs:{value:e.totalAttemptsCount}})],1)]),e._v(" "),n("div",{staticClass:"sah-summary-item"},[n("div",{staticClass:"sah-summary-heading"},[e._v("Completed Attempts")]),e._v(" "),n("div",{staticClass:"sah-summary-text"},[n("Ticker",{attrs:{value:e.completeAttemptsCount}}),e._v("\n\t\t\t\t\t("+e._s(e.formatPercent(e.completeAttemptsCount/e.totalAttemptsCount||0))+")\n\t\t\t\t")],1)])])]):e._e(),e._v(" "),n("div",{staticClass:"sah-container"},[e.result?["paced"===e.activity.mode&&e.activity.active?n("PacedResult",{staticClass:"sah-paced-result",attrs:{activity:e.activity}}):n("QuizResult",{staticClass:"sah-result",attrs:{result:e.result,"answers-hidden":e.activity.active,"table-hidden":e.activity.active,"correctness-hidden":"quiz"!==e.quiz.type,"names-hidden":""}})]:n("div",{staticClass:"sah-empty"},[e._v("\n\t\t\tThere is no Sway activity here.\n\t\t\tCheck the "),n("RouterLink",{attrs:{to:{name:"sway-lobby"}}},[e._v("lobby")]),e._v("\n\t\t\tto see which activities are running right now.\n\t\t")],1)],2)])}),[],!1,null,null,null));t.default=I.exports},gfqH:function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("ma9I"),n("TeQF"),n("fbCW"),n("x0AG"),n("2B1R"),n("+2oP"),n("pDQq"),n("qePV"),n("5DmW"),n("27RR"),n("tkto"),n("SYor"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("L2JU"),l=n("Pa8A"),c=(n("ToJy"),n("OBDa")),u=n("IbLZ"),d=n("xtk+"),h=n("4K9I"),p=n("6XG0"),f=n("4cYw"),m=n("NC1X"),v=n("0XH5"),b=n("/Yj0"),g=n("hSdx");function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var w,_,k={components:{DialogLayout:c.a,EdField:u.a,EdInput:d.a,EdButton:h.a,EdCheck:p.a,EdSelect:f.a,Spinner:m.a,SearchInput:v.a},props:{challengeId:{type:Number,required:!0}},inject:["challengeApi","courseApi"],data:function(){return{type:"optimised",limit:250,allUsers:!0,userId:null,users:null,selectedUser:null,searchQuery:"",loadingUsers:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.e)(["course"]),{valid:function(){return this.allUsers||this.selectedUser},filteredUsers:function(){var e=this;return this.users.filter((function(t){return g.validateSubstrDeep(t,e.searchQuery,"name","email")}))}}),watch:{allUsers:function(e){e||this.users||this.loadUsers()}},methods:{loadUsers:(_=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loadingUsers){e.next=2;break}return e.abrupt("return");case 2:return this.loadingUsers=!0,e.prev=3,e.next=6,this.courseApi.getCourseUsers(this.course.id,{emails:!0});case 6:e.t0=function(e){return"staff"!==e.role&&"admin"!==e.role},e.t1=function(e,t){var n=g.naturalComparator(e.email||"",t.email||"");return 0!==n?n:g.naturalComparator(e.name,t.name)},this.users=e.sent.filter(e.t0).sort(e.t1),e.next=14;break;case 11:e.prev=11,e.t2=e.catch(3),b.b({type:"error",text:"Unable to load users."});case 14:return e.prev=14,this.loadingUsers=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[3,11,14,17]])}))),function(){return _.apply(this,arguments)}),submit:(w=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.challengeApi.downloadSimilarityReport(this.challengeId,{userId:this.allUsers?null:this.selectedUser.id,limit:this.limit,type:this.type}),this.$emit("done");case 2:case"end":return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)}),cancel:function(){this.$emit("done")}}},C=(n("rEhS"),n("KHd+")),x=Object(C.a)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogLayout",{staticClass:"challenge-sheet-download-similarity",attrs:{title:"Download Similarity Report"},on:{submit:e.submit},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancel(t)}},scopedSlots:e._u([{key:"primaryActions",fn:function(){return[n("EdButton",{staticClass:"primary",attrs:{type:"submit",disabled:!e.valid}},[e._v("Download Report")])]},proxy:!0}])},[n("div",{staticClass:"csds-body"},[n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Results")]},proxy:!0}])},[e._v(" "),n("div",[n("EdCheck",{staticClass:"csds-check",attrs:{label:"Everyone",description:"Include all students in this course in the report"},model:{value:e.allUsers,callback:function(t){e.allUsers=t},expression:"allUsers"}})],1)]),e._v(" "),e.allUsers?e._e():[n("p",{staticClass:"csds-text"},[e._v("Select the student to include in the report")]),e._v(" "),n("SearchInput",{attrs:{placeholder:"Filter students"},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),e._v(" "),e.users?n("div",{staticClass:"csds-users-scroll"},[n("table",{staticClass:"csds-users"},[n("thead",[n("tr",[n("th",{staticClass:"csds-user-col-name"},[e._v("Name")]),e._v(" "),n("th",{staticClass:"csds-user-col-name"},[e._v("Email")])])]),e._v(" "),n("tbody",e._l(e.filteredUsers,(function(t){return n("tr",{key:t.id,staticClass:"csds-user",class:{selected:e.selectedUser===t},on:{click:function(n){e.selectedUser=t}}},[n("td",{staticClass:"csds-user-col-name"},[e._v(e._s(t.name))]),e._v(" "),n("td",{staticClass:"csds-user-col-name"},[e._v(e._s(t.email))])])})),0)])]):e._e()],e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Selection")]},proxy:!0}])},[e._v(" "),n("div",[n("EdSelect",{staticClass:"csds-control",model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[n("option",{attrs:{value:"optimised"}},[e._v("Optimised")]),e._v(" "),n("option",{attrs:{value:"latest"}},[e._v("Latest")]),e._v(" "),n("option",{attrs:{value:"first-successful"}},[e._v("First successful")])]),e._v(" "),"optimised"===e.type?[n("p",[e._v("The last submission made before the due date is selected. If there is no due date, then the last submission is selected.")]),e._v(" "),n("p",[e._v("If the student has made no submissions before the due date, then their latest submission is selected.")])]:e._e()],2)]),e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Limit")]},proxy:!0}])},[e._v(" "),n("div",[n("EdInput",{staticClass:"csds-control",attrs:{description:"limit"},model:{value:e.limit,callback:function(t){e.limit=e._n(t)},expression:"limit"}})],1)]),e._v(" "),e.loadingUsers?n("Spinner",{staticClass:"csds-spinner"}):e._e()],2)])}),[],!1,null,null,null).exports,j=n("oLoy"),O={components:{DialogLayout:c.a,EdField:u.a,EdButton:h.a,EdCheck:p.a,EdRadio:j.a,EdSelect:f.a},props:{challengeId:{type:Number,required:!0}},inject:["challengeApi"],data:function(){return{students:!0,type:"latest",numbers:!1,scores:!1,scoreType:"passfail"}},methods:{cancel:function(){this.$emit("done")},submit:function(){this.challengeApi.downloadChallengeResults(this.challengeId,{students:this.students,type:this.type,numbers:this.numbers,scores:this.scores,scoreType:this.scoreType}),this.$emit("done")}}},S=(n("W86N"),Object(C.a)(O,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogLayout",{staticClass:"challenge-sheet-download-results",attrs:{title:"Download Results"},on:{submit:e.submit},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancel(t)}},scopedSlots:e._u([{key:"primaryActions",fn:function(){return[n("EdButton",{staticClass:"primary",attrs:{type:"submit"}},[e._v("Download")])]},proxy:!0}])},[n("div",{staticClass:"csdr-layout"},[n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Results")]},proxy:!0}])},[e._v(" "),n("div",[n("EdCheck",{staticClass:"csdr-control",attrs:{label:"Include students only",description:"Only student results will be included in the report."},model:{value:e.students,callback:function(t){e.students=t},expression:"students"}})],1)]),e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Selection")]},proxy:!0}])},[e._v(" "),n("div",[n("EdSelect",{staticClass:"csdr-control",model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[n("option",{attrs:{value:"latest"}},[e._v("Latest")]),e._v(" "),n("option",{attrs:{value:"optimised"}},[e._v("Optimised")]),e._v(" "),n("option",{attrs:{value:"all"}},[e._v("All")])]),e._v(" "),"optimised"===e.type?[n("p",[e._v("The last submission made before the due date is selected. If there is no due date, then the last submission is selected.")]),e._v(" "),n("p",[e._v("If the student has made no submissions before the due date, then their latest submission is selected.")])]:e._e()],2)]),e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Headers")]},proxy:!0}])},[e._v(" "),n("div",[n("EdCheck",{staticClass:"csdr-control",attrs:{label:"Testcase numbers",description:"Include a header row with the number of each testcase (unit testing not applicable)."},model:{value:e.numbers,callback:function(t){e.numbers=t},expression:"numbers"}}),e._v(" "),n("EdCheck",{staticClass:"csdr-control",attrs:{label:"Testcase scores",description:"Include a header row with the score for each testcase (unit testing not applicable)."},model:{value:e.scores,callback:function(t){e.scores=t},expression:"scores"}})],1)]),e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Scoring")]},proxy:!0}])},[e._v(" "),n("div",[n("EdRadio",{staticClass:"csdr-control",attrs:{label:"Pass/fail",description:"Scoring for each testcase will be 1 for pass and 0 for fail.",value:"passfail"===e.scoreType},on:{input:function(t){e.scoreType="passfail"}}}),e._v(" "),n("EdRadio",{staticClass:"csdr-control",attrs:{label:"Per-testcase score",description:"Use the per-testcase scores.",value:"pertestcase"===e.scoreType},on:{input:function(t){e.scoreType="pertestcase"}}})],1)])],1)])}),[],!1,null,null,null).exports),E={components:{DialogLayout:c.a,EdField:u.a,EdButton:h.a,EdCheck:p.a,EdSelect:f.a},props:{challengeId:{type:Number,required:!0}},inject:["challengeApi"],data:function(){return{students:!0,type:"latest",numbers:!1,scores:!1,scoreType:"passfail"}},methods:{cancel:function(){this.$emit("done")},submit:function(){this.challengeApi.downloadChallengeSubmissions(this.challengeId,{students:this.students,type:this.type}),this.$emit("done")}}},T=(n("iKpI"),Object(C.a)(E,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogLayout",{staticClass:"challenge-sheet-download-submissions",attrs:{title:"Download Submissions"},on:{submit:e.submit},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancel(t)}},scopedSlots:e._u([{key:"primaryActions",fn:function(){return[n("EdButton",{staticClass:"primary",attrs:{type:"submit"}},[e._v("Download")])]},proxy:!0}])},[n("div",{staticClass:"csdss-layout"},[n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Results")]},proxy:!0}])},[e._v(" "),n("div",[n("EdCheck",{staticClass:"csdss-control",attrs:{label:"Include students only",description:"Only student submissions will be included."},model:{value:e.students,callback:function(t){e.students=t},expression:"students"}})],1)]),e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Selection")]},proxy:!0}])},[e._v(" "),n("div",[n("EdSelect",{staticClass:"csdss-control",model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[n("option",{attrs:{value:"latest"}},[e._v("Latest")]),e._v(" "),n("option",{attrs:{value:"optimised"}},[e._v("Optimised")]),e._v(" "),n("option",{attrs:{value:"first-successful"}},[e._v("First successful")]),e._v(" "),n("option",{attrs:{value:"all"}},[e._v("All")])]),e._v(" "),"optimised"===e.type?[n("p",[e._v("The last submission made before the due date is selected. If there is no due date, then the last submission is selected.")]),e._v(" "),n("p",[e._v("If the student has made no submissions before the due date, then their latest submission is selected.")])]:e._e()],2)])],1)])}),[],!1,null,null,null).exports),I=(n("Rm1S"),n("LKBx"),n("Edju")),D=n("TdcQ"),P=n("5/Cn"),A={components:{DialogLayout:c.a,EdButton:h.a,EdSelect:f.a,FormLayout:I.a,FormLayoutRow:D.a},props:{challengeId:{type:Number,required:!0},challengeTypeLabel:{type:String,required:!0}},inject:["challengeApi"],data:function(){return{type:"latest"}},methods:{cancel:function(){this.$emit("done")},submit:function(){var e=Object(r.a)(i.a.mark((function e(){var t,n,s,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.type.startsWith("latest")?(t="latest",r=+this.type.match(/\d*$/)[0]||1,n="Remark latest submissions?",s="This will remark the latest ".concat(1!==r?r+" submissions":"submissions"," of all users for this ").concat(this.challengeTypeLabel.toLowerCase(),".")):"best"===this.type&&(t="best",n="Remark best submissions?",s="This will remark the latest submission of all users for this ".concat(this.challengeTypeLabel.toLowerCase()," which has passed the most testcases.")),s+=" It may take a while to complete depending on the number of submissions to remark.",e.next=4,P.b({title:n,text:s,primaryAction:"Remark",icon:"warning"});case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,e.next=9,this.challengeApi.remarkChallenge(this.challengeId,t,{steps:r});case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(6),b.b({type:"error",text:"Unable to remark ".concat(this.challengeTypeLabel.toLowerCase(),".")}),e.abrupt("return");case 15:b.b({type:"success",text:"Submissions for this ".concat(this.challengeTypeLabel.toLowerCase()," are being remarked.")}),this.$emit("done");case 17:case"end":return e.stop()}}),e,this,[[6,11]])})));return function(){return e.apply(this,arguments)}}()}},N=(n("JNyK"),Object(C.a)(A,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogLayout",{staticClass:"challenge-sheet-remark-submissions",attrs:{title:"Remark Submissions"},on:{submit:e.submit},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancel(t)}},scopedSlots:e._u([{key:"primaryActions",fn:function(){return[n("EdButton",{staticClass:"primary",attrs:{type:"submit"}},[e._v("Remark")])]},proxy:!0}])},[n("FormLayout",{staticClass:"csrs-layout"},[n("FormLayoutRow",{attrs:{label:"Submissions to remark:"}},[n("EdSelect",{model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[n("option",{attrs:{value:"latest"}},[e._v("Latest")]),e._v(" "),n("option",{attrs:{value:"latest5"}},[e._v("Latest 5")]),e._v(" "),n("option",{attrs:{value:"latest10"}},[e._v("Latest 10")]),e._v(" "),n("option",{attrs:{value:"best"}},[e._v("Best")])])],1)],1)],1)}),[],!1,null,null,null).exports),R=n("gA4q"),M=n("+/tv"),L=n("GJ+R"),F={props:{tabs:{type:Array,required:!0},selectedIndex:{type:Number,default:-1}},computed:{selectedTab:function(){return this.tabs[this.selectedIndex]},cssClass:function(){return this.selectedTab&&"subtab-status-".concat(this.selectedTab.status)},computedTabs:function(){var e=this;return this.tabs.map((function(t,n){return{number:t.number,status:t.status,icon:L.c(t.status),cssClass:[n===e.selectedIndex&&"selected","subtab-status-".concat(t.status)]}}))}}},B=(n("t5yQ"),Object(C.a)(F,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"submission-tabs",class:e.cssClass},e._l(e.computedTabs,(function(t,s){return n("div",{key:t.number,staticClass:"subtab-tab",class:t.cssClass,on:{click:function(t){return e.$emit("update:selectedIndex",s)}}},[n("span",[e._v(e._s(t.number))])])})),0)}),[],!1,null,null,null).exports),q=n("VYah"),$=n("YxxY"),U=n("ltWs"),z=n("2zmm"),V=n("WmPt"),H=n("7516"),W=n("A0eD"),Q=n("Oshs"),K=n("3Pih"),Y=(n("0oug"),n("4mDm"),n("07d7"),n("PKPk"),n("3bBZ"),n("kvrn")),G=n.n(Y),X=n("G7T9"),J=n("iiMZ"),Z=Object(C.a)({},(function(){var e=this.$createElement;return(this._self._c||e)("div")}),[],!1,null,null,null).exports,ee={directives:{Resize:J.a},props:{top:{type:Number,default:void 0},bottom:{type:Number,default:void 0}},computed:{headerStyle:function(){return null!=this.top?{position:"absolute",width:"100%",zIndex:"1",top:this.top+"px"}:null!=this.bottom?{position:"absolute",width:"100%",zIndex:"1",bottom:this.bottom+"px"}:null},headerClass:function(){return null!=this.top?"top":null!=this.bottom?"bottom":""}},mounted:function(){this.$emit("mounted")},destroyed:function(){this.$emit("destroyed")},methods:{onHeaderResize:function(e){this.$emit("headerResize",e.target.offsetHeight)},onContentResize:function(e){this.$emit("contentResize",e.target.offsetHeight)},onHeaderClick:function(){this.$emit("headerClick")}}},te=(n("zR+/"),Object(C.a)(ee,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"accordion-panel"},[n("div",{directives:[{name:"resize",rawName:"v-resize",value:e.onHeaderResize,expression:"onHeaderResize"}],staticClass:"accpan-header",on:{click:e.onHeaderClick}},[e._t("header")],2),e._v(" "),n("div",{directives:[{name:"resize",rawName:"v-resize",value:e.onContentResize,expression:"onContentResize"}],staticClass:"accpan-content"},[e._t("default")],2),e._v(" "),e.headerStyle?n("div",{staticClass:"accpan-header",class:e.headerClass,style:e.headerStyle,on:{click:e.onHeaderClick}},[e._t("header")],2):e._e()])}),[],!1,null,null,null).exports),ne={directives:{Resize:J.a},data:function(){return{scrollTop:0,clientHeight:0,panels:{}}},methods:{scrollToPanel:function(e){var t=this.getPanelScrollOffset(e);-1!==t&&(this.$refs.scroll.scrollTop=t)},scrollToPanelIfNeeded:function(e){var t=this.getPanelScrollOffset(e);-1!==t&&Math.abs(this.$refs.scroll.scrollTop-t)>300&&(this.$refs.scroll.scrollTop=t)},getPanelScrollOffset:function(e){var t=0,n=!1,s=!0,i=!1,r=void 0;try{for(var a,o=this.getPanelVnodes()[Symbol.iterator]();!(s=(a=o.next()).done);s=!0){var l=a.value;if(l.key===e){n=!0;break}var c=this.panels[l.key];c&&(t+=c.content)}}catch(u){i=!0,r=u}finally{try{s||null==o.return||o.return()}finally{if(i)throw r}}return n?t:-1},getPanelVnodes:function(){return this.$scopedSlots.default().filter((function(e){return X.j(e,Z)}))},renderPanels:function(){for(var e=this.$createElement,t=this.panels,n=this.scrollTop,s=this.clientHeight,i=this.onPanelMounted,r=this.onPanelDestroyed,a=this.onHeaderResize,o=this.onContentResize,l=this.onHeaderClick,c=this.getPanelVnodes().map((function(e){var n=t[e.key];return{vnode:e,header:n?n.header:0,content:n?n.content:0,top:null,bottom:null}})),u=0,d=0,h=0;h<c.length;h++){var p=c[h];if(!(d<=n+u))break;p.top=u,u+=p.header,d+=p.header+p.content}for(var f=0,m=c.reduce((function(e,t){return e+t.header+t.content}),0),v=c.length-1;v>=0;v--){var b=c[v];if(!((m-=b.header+b.content)+b.header>=n+s-f))break;b.bottom=f,f+=b.header}var g=0;return c.map((function(t){var n={props:{top:t.top,bottom:t.bottom},scopedSlots:t.vnode.data.scopedSlots},s=t.vnode.key;return t===c[c.length-1]&&(n.style={minHeight:"calc(100% - ".concat(g,"px)")}),g+=t.header,e(te,G()([{on:{mounted:function(){return i(s)},destroyed:function(){return r(s)},headerResize:function(e){return a(s,e)},contentResize:function(e){return o(s,e)},headerClick:function(){return l(s)}}},n]))}))},onResize:function(e){this.clientHeight=e.contentRect.height},onScroll:function(e){this.scrollTop=e.target.scrollTop},onPanelMounted:function(e){this.$set(this.panels,e,{header:0,content:0})},onPanelDestroyed:function(e){this.$delete(this.panels,e)},onHeaderResize:function(e,t){this.panels[e].header=t},onContentResize:function(e,t){this.panels[e].content=t},onHeaderClick:function(e){this.scrollToPanel(e)}},render:function(){var e=arguments[0],t={directives:[{name:"resize",value:this.onResize}]};return e("div",G()([{staticClass:"accordion-panels"},t]),[e("div",{staticClass:"accpans-scroll",on:{scroll:this.onScroll},ref:"scroll"},[this.renderPanels()])])}},se=(n("nvE8"),Object(C.a)(ne,void 0,void 0,!1,null,null,null).exports),ie=n("oDEV"),re=n("9Arg"),ae=n("/jHr"),oe=n("loy4"),le=n("clw3"),ce=n("4PS8");function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var de,he,pe,fe,me,ve,be,ge={name:"Challenge",directives:{Tooltip:l.a},components:{ChallengeWorkspace:R.a,Submission:M.a,SubmissionTabs:B,Split:q.a,SplitPanel:$.a,AmberDisplay:U.a,PasswordPrompt:z.a,Icon:V.a,Segmented:H.a,SegmentedItem:W.a,SheetContainer:Q.a,Timer:K.a,AccordionPanels:se,AccordionPanel:Z,FadeTransition:ie.a},inject:["challengeApi","streamService","eventBus"],props:{challengeId:{type:Number,required:!0},userId:{type:Number,default:null},persistId:{type:String,default:null},shortcutKeysDisabled:{type:Boolean,default:!1}},data:function(){return{challenge:null,passwordPrompt:!1,password:oe.get("challenge.password"),passwordInvalid:!1,ip:null,loading:!1,workspacePaneVisibleSmall:!1,temporary:null,submissions:[],workspaceKey:0,selectedSubmissionId:0,splitPanelDescriptionFrac:2,splitPanelWorkspaceFrac:3,submissionsCount:0}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.e)(["course","user","isSmall","date"]),{},Object(o.c)(["isStaff","isLockdownActive","isLabActive","nextLabTime"]),{ipHash:function(){return this.ip&&Object(ce.e)(this.ip,this.user.id)},challengeTypeLabel:function(){switch(this.challenge.kind){case"assessment":return"Assessment";default:return"Challenge"}},hasDescription:function(){return!(!this.challenge||!this.challenge.content||ae.c(this.challenge.content))},hasSubmissions:function(){return this.submissionTabs.length>0},hasDescriptionOrSubmissions:function(){return this.hasDescription||this.hasSubmissions},descriptionVisible:function(){try{return!!(this.hasDescriptionOrSubmissions&&(!this.isSmall||!this.workspacePaneVisibleSmall)||this.challenge.is_exam&&this.course.lab)}catch(e){return!1}},workspaceVisible:function(){return!this.hasDescriptionOrSubmissions||!this.isSmall||this.workspacePaneVisibleSmall},selectedSubmissionIndex:{get:function(){var e=this;return this.submissions.findIndex((function(t){return t.id===e.selectedSubmissionId}))},set:function(e){this.selectedSubmissionId=this.submissions[e].id}},selectedSubmission:function(){return this.submissions[this.selectedSubmissionIndex]},submissionTabs:function(){var e=this;return this.submissions.map((function(t,n){return{number:e.submissionsCount-e.submissions.length+n+1,status:t.status}}))}}),watch:{loading:function(e){this.$emit("loading",e)},challenge:function(e){this.$emit("challenge",e)},password:function(e){e?oe.set("challenge.password",e):oe.remove("challenge.password")}},created:function(){var e=this;this.disposables=new le.a(this.eventBus.on("stream:challenge.submission",this.onStreamSubmission),this.eventBus.on("stream:challenge.submission-status",this.onStreamSubmissionStatus)),this.update(),this.$watch((function(){return!e.isStaff&&!0===e.temporary&&e.isLabActive&&e.challenge&&e.challenge.is_exam}),function(){var t=Object(r.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=9;break}return t.next=3,e.verifyAccess(e.challenge);case 3:if(!t.sent){t.next=7;break}e.workspaceKey++,t.next=9;break;case 7:b.b({type:"error",text:"Permission denied."}),e.$emit("error");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},destroyed:function(){this.streamDisposable&&this.streamDisposable.dispose()},methods:{update:(be=Object(r.a)(i.a.mark((function e(){var t,n,s=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loading){e.next=2;break}return e.abrupt("return");case 2:if(!this.isLabActive){e.next=6;break}return e.next=5,re.r();case 5:this.ip=e.sent;case 6:return this.loading=!0,e.prev=7,e.next=10,this.challengeApi.getChallenge(this.challengeId,{password:this.password,ipHash:this.ipHash});case 10:t=e.sent,e.next=19;break;case 13:return e.prev=13,e.t0=e.catch(7),this.challenge=null,"Incorrect password"===(n=e.t0.data&&e.t0.data.message&&e.t0.data.message.trim())?(this.passwordPrompt?this.passwordInvalid=!0:this.passwordPrompt=!0,this.$nextTick((function(){return s.$refs.password.select()}))):"Requires link"===n?(P.a({icon:"warning",title:"Cannot open from within Ed",text:"Your instructor has connected this activity with an external tool. Open this activity from the external tool instead.",subtext:"Contact your instructor for more information."}),this.$emit("error")):403===e.t0.status?(b.b({type:"error",text:"Permission denied."}),this.$emit("error")):b.b({type:"error",text:"Unable to fetch challenge."}),e.abrupt("return");case 19:return e.prev=19,this.loading=!1,e.finish(19);case 22:return e.next=24,this.verifyAccess(t);case 24:if(e.sent){e.next=28;break}return b.b({type:"error",text:"Permission denied."}),this.$emit("error"),e.abrupt("return");case 28:this.challenge=t,this.streamDisposable&&this.streamDisposable.dispose(),this.streamDisposable=this.streamService.subscribe("challenge",this.challengeId,{ip:this.ip}),this.challengeApi.viewChallenge(this.challengeId,{password:this.password,ipHash:this.ipHash});case 32:case"end":return e.stop()}}),e,this,[[7,13,19,22]])}))),function(){return be.apply(this,arguments)}),verifyAccess:(ve=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isLabActive){e.next=4;break}return e.next=3,re.r();case 3:this.ip=e.sent;case 4:return e.abrupt("return",L.a(t,this.course.lab,this.isStaff,this.isLockdownActive,this.isLabActive,this.ip).read);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return ve.apply(this,arguments)}),resetAttempt:(me=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.b({title:"Reset ".concat(this.challengeTypeLabel.toLowerCase()," attempt?"),text:"This will delete all of your files and restore the original set of files for this ".concat(this.challengeTypeLabel.toLowerCase(),". The ").concat(this.challengeTypeLabel.toLowerCase()," will be reloaded."),primaryAction:"Reset",icon:"warning"});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,this.challengeApi.resetChallenge(this.challenge.id,this.userId||this.user.id,{password:this.password,ipHash:this.ipHash});case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(4),b.b({type:"error",text:"Unable to reset ".concat(this.challengeTypeLabel.toLowerCase()," attempt.")}),e.abrupt("return");case 13:b.b({type:"success",text:"".concat(this.challengeTypeLabel," attempt has been reset.")}),this.$refs.workspace.killAllTerminals(),this.workspaceKey++;case 16:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(){return me.apply(this,arguments)}),resetGitRepository:(fe=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.b({title:"Reset Git Repository?",text:"This will delete the git repository stored on Ed and reset it to the scaffold. Make you have a backup of your work!",primaryAction:"Reset",icon:"warning"});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,P.b({title:"Have you backed up your work?",text:"You will not be able to recover anything from the Git repository once it has been reset",primaryAction:"Cancel",secondaryAction:"Reset my Git repository",icon:"warning"});case 6:if(!e.sent){e.next=9;break}return e.abrupt("return");case 9:return e.prev=9,e.next=12,this.challengeApi.resetChallengeGit(this.challenge.id,this.userId||this.user.id,{password:this.password,ipHash:this.ipHash});case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(9),b.b({type:"error",text:"Unable to reset your Git repository"}),e.abrupt("return");case 18:b.b({type:"success",text:"Git repository has been reset"});case 19:case"end":return e.stop()}}),e,this,[[9,14]])}))),function(){return fe.apply(this,arguments)}),print:function(){re.A(this.$refs.description)},submitAll:(pe=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.b({title:"Submit for each user?",text:"This will make a submission for every user that has a workspace for this ".concat(this.challengeTypeLabel.toLowerCase(),". Each submission will be marked in the background if applicable. This may take a long time if there are a lot of students."),primaryAction:"Submit All",icon:"warning"});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,this.challengeApi.submitAll(this.challenge.id);case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(4),b.b({type:"error",text:"Unable to submit all."}),e.abrupt("return");case 13:b.b({type:"success",text:"Submissions have been made for each user."});case 14:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(){return pe.apply(this,arguments)}),showDownloadSubmissionsSheet:function(){var e=this,t=(this.$createElement,this.challenge.id),n={render:function(){var e=this,n=arguments[0];return n(T,{attrs:{challengeId:t},on:{done:function(t){return e.$emit("done",t)}}})}};this.$refs.sheetContainer.showSheet(n,(function(){e.$refs.sheetContainer.closeSheet()}))},showDownloadSimilaritySheet:function(){var e=this,t=(this.$createElement,this.challenge.id),n={render:function(){var e=this,n=arguments[0];return n(x,{attrs:{challengeId:t},on:{done:function(t){return e.$emit("done",t)}}})}};this.$refs.sheetContainer.showSheet(n,(function(){e.$refs.sheetContainer.closeSheet()}))},showSheetDownloadResults:function(){var e=this,t=(this.$createElement,this.challenge.id),n={render:function(){var e=this,n=arguments[0];return n(S,{attrs:{challengeId:t},on:{done:function(t){return e.$emit("done",t)}}})}};this.$refs.sheetContainer.showSheet(n,(function(){e.$refs.sheetContainer.closeSheet()}))},showSheetRemarkSubmissions:function(){var e=this,t=(this.$createElement,this.challenge.id),n=this.challengeTypeLabel,s={render:function(){var e=this,s=arguments[0];return s(N,{attrs:{challengeId:t,challengeTypeLabel:n},on:{done:function(t){return e.$emit("done",t)}}})}};this.$refs.sheetContainer.showSheet(s,(function(){e.$refs.sheetContainer.closeSheet()}))},downloadWorkspaceLog:function(){this.$refs.workspace.downloadWorkspaceLog()},pushGrades:(he=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.challengeApi.pushGrades(this.challenge.id);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),b.b({type:"error",title:"Failed to push grades",text:400===e.t0.status&&e.t0.data&&"Unsupported challenge type"===e.t0.data.message?"The challenge type is unsupported or is not configured correctly. Contact support for assistance.":"Try again later."}),e.abrupt("return");case 9:b.b({type:"success",text:"Pushed grades to tool consumer successfully."});case 10:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(){return he.apply(this,arguments)}),onWillMark:function(e){this.marking=!0,this.$emit("will-mark",e)},onDidMark:(de=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.marking=!1,this.addSubmission(t.submission),this.isStaff||"passed"!==t.submission.status||!this.challenge.unavailable_after_completion){e.next=5;break}return e.next=5,P.a({icon:"info",title:"".concat(this.challengeTypeLabel," completed"),text:"You will not be able to run, submit or access this ".concat(this.challengeTypeLabel," in the future.")});case 5:this.$emit("did-mark",t);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return de.apply(this,arguments)}),onTemporary:function(e){this.temporary=e,this.$emit("temporary",e)},onStreamSubmission:function(e){var t=e.data;this.addSubmission(t.submission)},onStreamSubmissionStatus:function(e){var t=e.data,n=this.submissions.find((function(e){return e.id===t.submissionId}));n&&(n.status=t.status,this.ensureFeedbackPanelIsVisible())},addSubmission:function(e){var t=this.submissions.findIndex((function(t){return t.id===e.id}));-1===t?(this.submissions=this.submissions.concat(e).slice(-10),this.submissionsCount++,this.selectedSubmissionId=e.id):this.submissions.splice(t,1,e),this.ensureFeedbackPanelIsVisible()},ensureFeedbackPanelIsVisible:function(){var e=this;this.workspacePaneVisibleSmall=!1,0===this.splitPanelDescriptionFrac&&(this.splitPanelDescriptionFrac=2,this.splitPanelWorkspaceFrac=3),setTimeout((function(){e.$refs.accordion&&e.$refs.accordion.scrollToPanelIfNeeded("feedback")}),100)}}},ye=(n("8KRA"),Object(C.a)(ge,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"challenge"},[e.challenge?[n("div",{directives:[{name:"show",rawName:"v-show",value:e.hasDescriptionOrSubmissions,expression:"hasDescriptionOrSubmissions"}],staticClass:"chal-segmented-layout media-sm"},[n("Segmented",{staticClass:"chal-segmented"},[n("SegmentedItem",{attrs:{active:!e.workspacePaneVisibleSmall},on:{click:function(t){e.workspacePaneVisibleSmall=!1}}},[e._v("Description")]),e._v(" "),n("SegmentedItem",{attrs:{active:e.workspacePaneVisibleSmall},on:{click:function(t){e.workspacePaneVisibleSmall=!0}}},[e._v("Workspace")])],1)],1),e._v(" "),n("Split",{staticClass:"chal-split",attrs:{orientation:"horizontal","persist-id":"challenge"}},[e.descriptionVisible?n("SplitPanel",{key:"description",attrs:{frac:e.splitPanelDescriptionFrac,collapsable:"","collapsed-text":"Description"},on:{"update:frac":function(t){e.splitPanelDescriptionFrac=t}}},[n("div",{staticClass:"chal-content-layout"},[e.challenge.is_exam&&e.isLabActive?n("div",{staticClass:"chal-exam-header"},[n("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Lab",expression:"'Lab'"}],staticClass:"chal-exam-header-lab"},[e._v(e._s(e.course.lab&&e.course.lab.name))]),e._v(" "),e.date>=e.nextLabTime.endExact?[e._v("Time's Up")]:e.date>=e.nextLabTime.startExact?n("Timer",{attrs:{date:e.nextLabTime.endExact}}):e._e()],2):e._e(),e._v(" "),n("AccordionPanels",{ref:"accordion",staticClass:"chal-accordion"},[e.hasDescription?n("AccordionPanel",{key:"description",scopedSlots:e._u([{key:"header",fn:function(){return[n("div",{staticClass:"chal-accordion-header"},[n("Icon",{attrs:{icon:"chal-accord-description"}}),e._v(" Description\n\t\t\t\t\t\t\t\t")],1)]},proxy:!0},{key:"default",fn:function(){return[n("div",{ref:"description",staticClass:"chal-description"},[n("h1",{staticClass:"chal-title"},[e._v(e._s(e.challenge.title))]),e._v(" "),n("AmberDisplay",{attrs:{value:e.challenge.content}})],1)]},proxy:!0}],null,!1,247869119)}):e._e(),e._v(" "),e.hasSubmissions?n("AccordionPanel",{key:"feedback",scopedSlots:e._u([{key:"header",fn:function(){return[n("div",{staticClass:"chal-accordion-header"},[n("Icon",{attrs:{icon:"chal-accord-feedback"}}),e._v(" Feedback\n\t\t\t\t\t\t\t\t")],1)]},proxy:!0},{key:"default",fn:function(){return[n("SubmissionTabs",{staticClass:"chal-submission-tabs",attrs:{tabs:e.submissionTabs,"selected-index":e.selectedSubmissionIndex},on:{"update:selectedIndex":function(t){e.selectedSubmissionIndex=t},"update:selected-index":function(t){e.selectedSubmissionIndex=t}}}),e._v(" "),e.selectedSubmission?n("Submission",{staticClass:"chal-submission",attrs:{submission:e.selectedSubmission,"per-testcase-scores":e.challenge.settings.per_testcase_scores,"auto-open":""}}):e._e()]},proxy:!0}],null,!1,3476692851)}):e._e()],1)],1)]):e._e(),e._v(" "),e.workspaceVisible?n("SplitPanel",{key:"workspace",attrs:{frac:e.splitPanelWorkspaceFrac,collapsable:"","collapsed-text":"Workspace"},on:{"update:frac":function(t){e.splitPanelWorkspaceFrac=t}}},[e.challenge?n("ChallengeWorkspace",{key:e.workspaceKey,ref:"workspace",staticClass:"chal-workspace",attrs:{"connect-type":"challenge","connect-param":e.challenge.id,challenge:e.challenge,"user-id":e.userId,password:e.password,"ip-hash":e.ipHash,"persist-id":e.persistId,"git-submission-enabled":e.challenge.features.git_submission,"shortcut-keys-disabled":e.shortcutKeysDisabled,autofocus:""},on:{"will-mark":e.onWillMark,"did-mark":e.onDidMark,temporary:e.onTemporary}}):e._e()],1):e._e()],1),e._v(" "),e._t("default",null,{challenge:e.challenge,password:e.password,ipHash:e.ipHash})]:e._e(),e._v(" "),n("FadeTransition",{attrs:{duration:.2}},[e.passwordPrompt&&!e.challenge?n("PasswordPrompt",{ref:"password",staticClass:"chal-password",attrs:{disabled:e.loading,incorrect:e.passwordInvalid},on:{submit:e.update},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}):e._e()],1),e._v(" "),n("SheetContainer",{ref:"sheetContainer"})],2)}),[],!1,null,null,null));t.a=ye.exports},gkPM:function(e,t,n){},gklb:function(e,t,n){"use strict";var s=n("K8KG");n.n(s).a},gnd6:function(e,t,n){"use strict";var s={components:{AmberDisplay:n("ltWs").a},props:{value:{type:String,required:!0},spans:{type:Array,default:void 0},lineNumbers:{type:Boolean,default:!1},spansVisible:{type:Boolean,default:!1},passageStyle:{type:String,default:"plain"}}},i=(n("+sZi"),n("KHd+")),r=Object(i.a)(s,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("AmberDisplay",{staticClass:"reading-passage-display",class:"rpd-"+e.passageStyle,attrs:{value:e.value,spans:e.spans,"line-numbers":e.lineNumbers,"spans-visible":e.spansVisible},on:{spans:function(t){return e.$emit("spans",t)}}})}),[],!1,null,null,null);t.a=r.exports},gqwk:function(e,t,n){"use strict";var s=n("dPHi");n.n(s).a},gvpz:function(e,t,n){"use strict";var s=n("TMrU");n.n(s).a},gxmw:function(e,t,n){},gy6L:function(e,t,n){},h0d2:function(e,t,n){},h4QX:function(e,t,n){"use strict";var s=n("Ma2O");n.n(s).a},hFFH:function(e,t,n){"use strict";var s=n("NtlG"),i=n("WmPt"),r={props:{text:{type:String,default:void 0},subtext:{type:String,default:void 0},type:{type:String,default:void 0},checked:{type:Boolean,default:!1}},render:function(){var e=this,t=arguments[0],n=this.type,r=this.checked,a=this.text,o=this.subtext,l=this.$scopedSlots.default,c={scopedSlots:{left:function(){return r?t(i.a,{class:"asheeti-check",attrs:{icon:"context-menu-tick"}}):null},default:function(){return t("div",{class:"asheeti-body"},[l?l():null,a?t("div",{class:"asheeti-text"},[a]):null,o?t("div",{class:"asheeti-subtext"},[o]):null])}}};return t("button",{staticClass:"action-sheet-item",class:n&&"asheeti-".concat(n),on:{click:function(){return e.$emit("click")}}},[t(s.a,c)])}},a=(n("rDWb"),n("KHd+")),o=Object(a.a)(r,void 0,void 0,!1,null,null,null);t.a=o.exports},hH85:function(e,t,n){"use strict";var s=n("hSdx"),i=(n("ma9I"),{props:{url:{type:String,default:void 0}},computed:{src:function(){var e=this.url&&s.parseYoutubeVideoUrl(this.url);return e&&"https://www.youtube.com/embed/".concat(e.path,"?showinfo=0&rel=0&disablekb=1&theme=light").concat(e.params)}}}),r=n("KHd+"),a=Object(r.a)(i,(function(){var e=this.$createElement,t=this._self._c||e;return this.src?t("iframe",{attrs:{src:this.src,frameborder:"0",webkitallowfullscreen:"",mozallowfullscreen:"",allowfullscreen:""}}):this._e()}),[],!1,null,null,null).exports,o={props:{url:{type:String,default:void 0}},computed:{src:function(){var e=this.url&&s.parseVimeoVideoUrl(this.url);return e&&"https://player.vimeo.com/video/".concat(e.id,"?color=a086ee&title=0&byline=0&portrait=0")}}},l=Object(r.a)(o,(function(){var e=this.$createElement,t=this._self._c||e;return this.src?t("iframe",{attrs:{src:this.src,frameborder:"0",webkitallowfullscreen:"",mozallowfullscreen:"",allowfullscreen:""}}):this._e()}),[],!1,null,null,null).exports,c={props:{url:{type:String,default:void 0}}},u=Object(r.a)(c,(function(){var e=this.$createElement,t=this._self._c||e;return t("video",{attrs:{controls:""}},[this.url?t("source",{attrs:{src:this.url}}):this._e()])}),[],!1,null,null,null).exports,d={props:{url:{type:String,default:void 0}},computed:{component:function(){return this.url?s.parseYoutubeVideoUrl(this.url)?a:s.parseVimeoVideoUrl(this.url)?l:u:null}}},h=(n("ryzy"),Object(r.a)(d,(function(){var e=this.$createElement;return(this._self._c||e)(this.component,{tag:"component",staticClass:"lessli-video-embed",attrs:{url:this.url}})}),[],!1,null,null,null));t.a=h.exports},hIB3:function(e,t,n){},hIx7:function(e,t,n){"use strict";var s=n("i+YH");n.n(s).a},hNCp:function(e,t,n){},"hNx+":function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("0oug"),n("TeQF"),n("4mDm"),n("2B1R"),n("Tskq"),n("qePV"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("PKPk"),n("EnZy"),n("FZtP"),n("3bBZ");var s=n("ODXe"),i=n("rePB"),r=n("G7T9"),a=n("VYah"),o=n("YxxY"),l=(n("yXV3"),n("YGK4"),n("kvrn")),c=n.n(l),u=n("9Arg"),d={components:{PopupLayer:n("OH48").a},props:{left:{type:Number,default:0},top:{type:Number,default:0},width:{type:Number,default:0},height:{type:Number,default:0},visible:{type:Boolean,default:!1}},computed:{style:function(){return{left:this.left+"px",top:this.top+"px",width:this.width+"px",height:this.height+"px",opacity:this.visible?1:0}}}},h=(n("MxTH"),n("KHd+")),p=Object(h.a)(d,(function(){var e=this.$createElement,t=this._self._c||e;return t("PopupLayer",[t("div",{staticClass:"pane-drag-highlight",style:this.style})])}),[],!1,null,null,null).exports,f=n("KQm4"),m=n("/lWA"),v=n("WmPt"),b=n("NC1X");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var y={mixins:[m.a],props:{tabs:{type:Array,default:function(){return[]}},selectedIndex:{type:Number,default:null},allowDrop:{type:Function,default:function(){return!0}},active:{type:Boolean,default:!1}},data:function(){return{tabDragIndex:null,tabDropIndex:null,menuTab:null,menuX:0,menuY:0}},computed:{computedClass:function(){return["tab-bar-".concat(this.computedTheme),this.active&&"tab-bar-active"]},computedTabs:function(){var e=this;return this.tabs.map((function(t,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{original:t,classes:{active:n===e.selectedIndex,dragging:n===e.tabDragIndex,nudge:null!==e.tabDropIndex&&e.tabDropIndex<=n,modified:t.modified,soft:t.soft}})}))},draggable:function(){return!!this.$listeners.dragStart}},created:function(){this.tabsDragEnterSet=new Set},methods:{onDragStart:function(e,t){e.stopPropagation(),e.dataTransfer.effectAllowed="move",this.tabDragIndex=t,this.$emit("dragStart",{dataTransfer:e.dataTransfer,index:t})},onDragEnd:function(){this.tabDragIndex=null,this.tabDropIndex=null,this.tabsDragEnterSet.clear()},onDragOver:function(e){if(this.allowDrop(e.dataTransfer)){e.preventDefault(),e.dataTransfer.dropEffect="move";var t,n=Object(f.a)(this.$el.querySelectorAll(".tbb-tab"));for(t=0;t<n.length;t++){var s=n[t].getBoundingClientRect();if(e.clientX<s.left+s.width/2)break}this.tabDropIndex=t}},onDragEnter:function(e){e.preventDefault(),this.tabsDragEnterSet.add(e.target)},onDragLeave:function(e){this.tabsDragEnterSet.delete(e.target),0===this.tabsDragEnterSet.size&&(this.tabDropIndex=null)},onDrop:function(e){var t=this.tabDropIndex;null!==t&&(e.preventDefault(),e.stopPropagation(),this.$emit("drop",{dataTransfer:e.dataTransfer,index:t}),this.onDragEnd())},onContextmenu:function(e,t){e.preventDefault(),this.menuTab=this.computedTabs[t],this.menuX=e.clientX+window.pageXOffset,this.menuY=e.clientY+window.pageYOffset},onContextmenuClose:function(){this.menuTab=null},renderTab:function(e,t){var n=this,s=this.$createElement;return s("div",{staticClass:"tbb-tab",class:e.classes,attrs:{title:e.tooltip,draggable:this.draggable},key:e.key,on:{click:function(t){return n.$emit("tabClick",{tab:e.original,event:t})},mouseup:function(t){return 1===t.button&&n.$emit("tabClick",{tab:e.original,event:t})},contextmenu:function(e){return n.onContextmenu(e,t)},dragstart:function(e){return n.onDragStart(e,t)},dragend:this.onDragEnd}},[s("svg",{staticClass:"tbb-tab-side",attrs:{viewBox:"0,0,10,10",preserveAspectRatio:"none"}},[s("polygon",{staticClass:"fill",attrs:{points:"0,10 10,0 10,10"}}),s("polygon",{staticClass:"stroke",attrs:{points:"0,10 10,0"}})]),s("div",{staticClass:"tbb-tab-content"},[e.loading&&s(b.a,{staticClass:"tbb-tab-title-spinner"}),!e.loading&&e.icon&&s(v.a,{staticClass:"tbb-tab-title-icon colored",attrs:{icon:e.icon}}),s("div",{staticClass:"tbb-tab-title"},[e.title]),!e.unclosable&&s("div",{staticClass:"tbb-tab-close",on:{click:function(t){t.stopPropagation(),n.$emit("tabClose",{tab:e.original,event:t})}}},[s(v.a,{staticClass:"tbb-tab-close-icon",attrs:{icon:"clear"}})])]),s("svg",{staticClass:"tbb-tab-side",attrs:{viewBox:"0,0,10,10",preserveAspectRatio:"none"}},[s("polygon",{staticClass:"fill",attrs:{points:"10,10 0,0 0,10"}}),s("polygon",{staticClass:"stroke",attrs:{points:"10,10 0,0"}})])])}},render:function(){var e=this,t=arguments[0],n=this.$scopedSlots,s=this.menuTab&&n.contextmenu&&n.contextmenu({x:this.menuX,y:this.menuY,tab:this.menuTab.original,onClose:this.onContextmenuClose}),i=t("div",{staticClass:"tbb-tabs",on:{dragover:this.onDragOver,dragenter:this.onDragEnter,dragleave:this.onDragLeave,drop:this.onDrop}},[this.computedTabs.map((function(t,n){return e.renderTab(t,n)}))]);return t("div",{staticClass:"tab-bar",class:this.computedClass},[t("div",{staticClass:"tbb-tabs-container"},[n.left&&n.left(),i,n.right&&n.right()]),t("div",{staticClass:"tab-bar-content"},[n.default&&n.default()]),s])}},w=(n("8N1h"),Object(h.a)(y,void 0,void 0,!1,null,null,null).exports),_=n("BI+k"),k=n("Foru"),C=n("Kaxq");function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function j(e){try{return JSON.parse(e)}catch(t){return null}}var O=new Map,S=1,E=null,T={props:{selectedIndex:{type:Number,default:0},splittable:{type:Boolean,default:!1},active:{type:Boolean,default:!1}},data:function(){return{highlightLeft:0,highlightTop:0,highlightWidth:0,highlightHeight:0,highlightVisible:!1}},created:function(){this.id=S++,this.panesDragEnterSet=new Set,O.set(this.id,this)},destroyed:function(){O.delete(this)},methods:{handleActivation:function(){this.$emit("update:active",!0)},handleTabClick:function(e){var t=e.tab,n=e.event,s=this.tabs.indexOf(t);0===n.button?(this.$emit("update:selectedIndex",s),2===n.detail&&this.$emit("itemDblClick",s)):1===n.button&&this.$emit("itemsClose",[s])},closeTabs:function(e){var t=this,n=e.filter((function(e){return!e.unclosable})).map((function(e){return t.tabs.indexOf(e)}));this.$emit("itemsClose",n)},closeOtherTabs:function(e){this.closeTabs(this.tabs.filter((function(t){return t!==e})))},closeAllTabs:function(){this.closeTabs(this.tabs)},handleTabDragStart:function(e){var t,n=e.dataTransfer,s=e.index;n.setData("ed/x-pane",(t={paneId:this.id,itemIndex:s},JSON.stringify(t))),u.E(!1),E=this},handleDragEnd:function(){E=null,u.E(!0),this.panesDragEnterSet.clear(),this.dropDirection=null,this.updatePanesDragHighlight()},allowTabDrop:function(e){var t=new Set(e.types);return t.has("ed/x-pane")||t.has("ed/x-pane-item-open-request")},handleTabDrop:function(e){var t=e.dataTransfer,n=e.index;this.handleDragEnd();var s=new Set(t.types);if(s.has("ed/x-pane")){var r=j(t.getData("ed/x-pane"));if(!r)return;var a={srcPane:O.get(r.paneId),srcItemIndex:r.itemIndex,srcItem:O.get(r.paneId).itemVnodes[r.itemIndex].componentInstance,destPane:this,destItemIndex:n};a.destPane.$emit("relocateTo",a),a.srcPane.$emit("relocateFrom",a)}else s.has("ed/x-pane-item-open-request")&&this.$emit("requestItemOpen",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},j(t.getData("ed/x-pane-item-open-request")),{index:n}))},handlePanesDragOver:function(e){if(this.splittable){var t=new Set(e.dataTransfer.types);if(t.has("ed/x-pane")||t.has("ed/x-pane-item-open-request")){if(t.has("ed/x-pane")&&this===E&&1===this.itemVnodes.length)return;e.preventDefault(),e.dataTransfer.dropEffect="move",this.dropDirection=this.calculateDropDirection(e.clientX,e.clientY),this.updatePanesDragHighlight()}}},handlePanesDragEnter:function(e){e.preventDefault(),this.panesDragEnterSet.add(e.target)},handlePanesDragLeave:function(e){this.panesDragEnterSet.delete(e.target),0===this.panesDragEnterSet.size&&(this.dropDirection=null,this.updatePanesDragHighlight())},handlePanesDrop:function(e){e.preventDefault(),e.stopPropagation();var t={direction:this.dropDirection};this.handleDragEnd();var n=new Set(e.dataTransfer.types);if(n.has("ed/x-pane")){var s=j(e.dataTransfer.getData("ed/x-pane"));if(!s)return;t.pane=O.get(s.paneId),t.item=t.pane.itemVnodes[s.itemIndex].componentInstance,t.itemIndex=s.itemIndex}else{if(!n.has("ed/x-pane-item-open-request"))return;t.data=j(e.dataTransfer.getData("ed/x-pane-item-open-request"))}this.$emit("split",t)},calculateDropDirection:function(e,t){var n=this.$el.getBoundingClientRect(),s=e-(n.left+n.width/2),i=t-(n.top+n.height/2),r=n.height/n.width;return Math.abs(s)<.125*n.width&&Math.abs(i)<.125*n.height?"center":i<=-Math.abs(s*r)?"up":i>=Math.abs(s*r)?"down":s<=-Math.abs(i/r)?"left":"right"},updatePanesDragHighlight:function(){if(this.dropDirection){var e=this.$el.getBoundingClientRect();switch(this.highlightLeft=e.left,this.highlightTop=e.top,this.highlightWidth=e.width,this.highlightHeight=e.height,this.highlightVisible=!0,this.dropDirection){case"up":this.highlightHeight/=2;break;case"down":this.highlightHeight/=2,this.highlightTop+=this.highlightHeight;break;case"left":this.highlightWidth/=2;break;case"right":this.highlightWidth/=2,this.highlightLeft+=this.highlightWidth}}else this.highlightVisible=!1}},render:function(){var e=this,t=arguments[0];this.itemVnodes=(this.$scopedSlots.default&&this.$scopedSlots.default()||[]).filter((function(e){return r.j(e,_.a)})),this.tabs=this.itemVnodes.map((function(e){var t=e.componentOptions.propsData;return{key:e.key,title:t.title,tooltip:t.title,soft:t.soft,modified:t.modified,icon:t.icon,loading:t.loading,unclosable:t.unclosable}}));var n=this.itemVnodes.map((function(n,s){return t("div",{key:n.key,staticClass:"pane-container-item",directives:[{name:"show",value:s===e.selectedIndex}]},[n])})),s=this.$scopedSlots.layout&&this.$scopedSlots.layout({items:n,placeholder:this.$scopedSlots.placeholder}),i=!s||s.every(r.g)?[n,!n.length&&this.$scopedSlots.placeholder&&this.$scopedSlots.placeholder()]:s,a={scopedSlots:{contextmenu:function(n){var s=n.x,i=n.y,r=n.tab,a=n.onClose;return t(k.a,{attrs:{targetLeft:s,targetTop:i},on:{close:a}},[t(C.a,{key:"close",attrs:{text:"Close",disabled:r.unclosable},on:{click:function(){return e.closeTabs([r])}}}),t(C.a,{key:"closeOther",attrs:{text:"Close Other Tabs"},on:{click:function(){return e.closeOtherTabs(r)}}}),t(C.a,{key:"closeAll",attrs:{text:"Close All Tabs"},on:{click:function(){return e.closeAllTabs()}}})])},left:this.$scopedSlots.tabsLeft,right:this.$scopedSlots.tabsRight}},o={on:{"!focus":this.handleActivation}};return t("div",c()([{staticClass:"pane",on:{click:this.handleActivation}},o]),[t(w,c()([{staticClass:"pane-tabs",attrs:{tabs:this.tabs,selectedIndex:this.selectedIndex,active:this.active,allowDrop:this.allowTabDrop},on:{tabClick:this.handleTabClick,tabClose:function(t){var n=t.tab;return e.closeTabs([n])},dragStart:this.handleTabDragStart,drop:this.handleTabDrop}},a]),[t("div",{staticClass:"pane-container",on:{dragover:this.handlePanesDragOver,dragenter:this.handlePanesDragEnter,dragleave:this.handlePanesDragLeave,drop:this.handlePanesDrop}},[i])]),t(p,{attrs:{left:this.highlightLeft,top:this.highlightTop,width:this.highlightWidth,height:this.highlightHeight,visible:this.highlightVisible}})])}},I=(n("dv2s"),Object(h.a)(T,void 0,void 0,!1,null,null,null).exports),D={props:{orientation:{type:String,default:"horizontal"},dividerSize:{type:Number,default:1}},render:function(){var e=this,t=arguments[0],n=(this.$scopedSlots.default&&this.$scopedSlots.default()||[]).filter((function(e){return r.j(e,I)||r.j(e,P)})).map((function(n){var s,i,a=r.b(n);a.attrs&&(s=a.attrs.frac,delete a.attrs.frac),a.on&&(i=a.on["update:frac"],delete a.on["update:frac"]),a=r.i(a,{class:"pane-axis-child"});var l=n.context.$createElement(n.componentOptions.Ctor,a,n.componentOptions.children);r.c(n,l);var c={props:{},on:{}};return void 0!==s&&(c.props.frac=s),void 0!==i&&(c.on["update:frac"]=i),"vertical"===e.orientation&&(c.props.collapsable=!0),t(o.a,c,[l])}));return t(a.a,{staticClass:"pane-axis",attrs:{orientation:this.orientation,dividerSize:this.dividerSize,invisibleDividers:!0}},[n])}},P=(n("+kKW"),Object(h.a)(D,void 0,void 0,!1,null,null,null).exports),A=(n("rvcz"),Object(h.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pane-layout-placeholder"},[n("button",{staticClass:"plp-button",on:{click:function(t){return e.$emit("close")}}},[e._v("Close")])])}),[],!1,null,null,null).exports),N=n("+KDJ");function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L={props:{layout:{type:N.a,required:!0},splittable:{type:Boolean,default:!1},activePane:{type:N.c,default:null},dividerSize:{type:Number,default:5},highlightActivePane:{type:Boolean,default:!1}},created:function(){this.vnodeCache=new Map},destroyed:function(){var e=!0,t=!1,n=void 0;try{for(var s,i=this.vnodeCache.values()[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){s.value.componentInstance.$destroy()}}catch(r){t=!0,n=r}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},methods:{handleRelocateFrom:function(e){N.a.relocateItem(e.srcPane.$vnode.__model,e.srcItemIndex,e.destPane.$vnode.__model,e.destItemIndex)},handleSplit:function(e,t){if("center"!==t.direction&&(e=e.split(t.direction)),t.data)this.$emit("requestItemOpen",M({},t.data,{pane:e}));else{var n=t.pane.$vnode.__model,s=t.itemIndex,i=n.items[s];i.remove(),e.appendItem(i)}},handleRequestItemOpen:function(e,t){this.$emit("requestItemOpen",M({},t,{pane:e}))},handleClose:function(e){e.remove()},renderPane:function(e,t,n){var s=this,i=this.$createElement,r={staticClass:"pane-layout-pane",attrs:{frac:e.frac},props:{selectedIndex:e.selectedIndex,splittable:this.splittable,active:this.highlightActivePane&&this.activePane===e},on:{"update:frac":function(t){return e.frac=t},"update:selectedIndex":function(t){return e.selectedIndex=t},"update:active":function(t){return t&&s.$emit("update:activePane",e)},relocateFrom:this.handleRelocateFrom,itemsClose:function(t){return s.$emit("itemsClose",t.map((function(t){return e.items[t]})))},itemDblClick:function(t){return s.$emit("itemDblClick",e.items[t])},split:function(t){return s.handleSplit(e,t)},requestItemOpen:function(t){return s.handleRequestItemOpen(e,t)}},scopedSlots:{layout:this.$scopedSlots.layout}},a=e.items.map((function(e){var i=e.render(s.$createElement);i.data.keepAlive=!0,n.set(e,i);var r=t.get(e);return r&&(i.componentInstance=r.componentInstance),i})),o=i(I,r,[i(A,{slot:"placeholder",on:{close:function(){return s.handleClose(e)}}}),a,i("template",{slot:"tabsLeft"},[this.$scopedSlots.tabsLeft&&this.$scopedSlots.tabsLeft()]),i("template",{slot:"tabsRight"},[this.$scopedSlots.tabsRight&&this.$scopedSlots.tabsRight()])]);return o.__model=e,o},renderAxis:function(e,t,n){var s=this,i=this.$createElement,r={key:e.key,attrs:{frac:e.frac},props:{orientation:e.orientation,dividerSize:this.dividerSize},on:{"update:frac":function(t){return e.frac=t}}};return i(P,r,[e.children.map((function(e){return s.renderModel(e,t,n)}))])},renderModel:function(e,t,n){switch(e.type){case"pane":return this.renderPane(e,t,n);case"axis":return this.renderAxis(e,t,n)}}},render:function(){var e=this,t=arguments[0];this.activePane&&!this.layout.findPane((function(t){return t===e.activePane}))&&this.$emit("update:activePane",null);var n=this.vnodeCache,i=new Map,r=t("div",{staticClass:"pane-layout"},[this.layout.root&&this.renderModel(this.layout.root,n,i),!this.layout.root&&this.$scopedSlots.placeholder&&this.$scopedSlots.placeholder()]),a=!0,o=!1,l=void 0;try{for(var c,u=n[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=Object(s.a)(c.value,2),h=d[0],p=d[1];i.has(h)||p.componentInstance.$destroy()}}catch(f){o=!0,l=f}finally{try{a||null==u.return||u.return()}finally{if(o)throw l}}return this.vnodeCache=i,r}},F=(n("qfmj"),Object(h.a)(L,void 0,void 0,!1,null,null,null));t.a=F.exports},hO0I:function(e,t,n){},hPYL:function(e,t,n){"use strict";var s=n("ebOn");n.n(s).a},hVI8:function(e,t,n){},"hVQ+":function(e,t,n){},hc6M:function(e,t,n){},hd5i:function(e,t,n){"use strict";var s=n("YrDL");n.n(s).a},hjyn:function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("0oug"),n("4mDm"),n("+2oP"),n("ToJy"),n("07d7"),n("PKPk"),n("3bBZ");var s=n("ODXe"),i={functional:!0,props:{text:{type:String,default:""},highlights:{type:Array,default:function(){return[]}}},render:function(e,t){var n=t.props,i=n.text,r=n.highlights,a=t.scopedSlots,o=a.default,l=void 0===o?function(e){return e}:o,c=a.highlight,u=void 0===c?function(t){return e("span",[t])}:c,d=r.slice().sort((function(e,t){return e[0]-t[0]})).reduce((function(e,t){if(t[1]>t[0]){var n=e[e.length-1];n&&n[1]>=t[0]?n[1]=t[1]:e.push(t)}return e}),[]),h=[],p=0,f=!0,m=!1,v=void 0;try{for(var b,g=d[Symbol.iterator]();!(f=(b=g.next()).done);f=!0){var y=Object(s.a)(b.value,2),w=y[0],_=y[1];w>p&&h.push(l(i.substring(p,w))),h.push(u(i.substring(w,_))),p=_}}catch(k){m=!0,v=k}finally{try{f||null==g.return||g.return()}finally{if(m)throw v}}return p<i.length&&h.push(l(i.substring(p))),h}},r=n("KHd+"),a=Object(r.a)(i,void 0,void 0,!1,null,null,null);t.a=a.exports},hkPe:function(e,t,n){},hsQ6:function(e,t,n){"use strict";var s=n("BUrC");n.n(s).a},hukh:function(e,t,n){"use strict";var s=n("HXYi"),i=n("Pa8A"),r=n("WmPt"),a=n("b/yj"),o={directives:{Tooltip:i.a},components:{Icon:r.a,MathRender:a.a},props:{value:{type:Array,default:null},deletable:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},mounted:function(){var e=this;this.sortable=new s.Sortable(this.$refs.list,{draggable:".quiz-reorder-item",handle:".quiz-reorder-item-inner",plugins:[s.Plugins.SwapAnimation]}),this.sortable.on("mirror:created",(function(e){var t=e.originalSource.getBoundingClientRect();e.mirror.style.width=t.width+"px",e.mirror.style.height=t.height+"px"})),this.sortable.on("sortable:start",(function(t){e.readonly&&t.cancel()})),this.sortable.on("sortable:stop",(function(t){e.$emit("sort",{oldIndex:t.oldIndex,newIndex:t.newIndex})}))},destroyed:function(){this.sortable&&this.sortable.destroy()},methods:{deleteItem:function(e){this.$emit("delete",e)}}},l=(n("MxFh"),n("KHd+")),c=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quiz-reorder",class:{readonly:e.readonly}},[n("div",{ref:"list",staticClass:"quiz-reorder-list"},e._l(e.value,(function(t){return n("div",{key:t,staticClass:"quiz-reorder-item"},[n("MathRender",{staticClass:"quiz-reorder-item-inner",attrs:{latex:t,display:!1}}),e._v(" "),!e.readonly&&e.deletable?n("Icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Delete",expression:"'Delete'"}],staticClass:"quiz-reorder-delete",attrs:{icon:"cross"},on:{click:function(n){return e.deleteItem(t)}}}):e._e()],1)})),0)])}),[],!1,null,null,null);t.a=c.exports},hv6D:function(e,t,n){},"i+YH":function(e,t,n){},i0Y5:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("qePV"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("L2JU"),l=n("Q2AE"),c=n("t19P"),u=n("TphV"),d=n("2PkB"),h=n("whzu"),p=n("/Yj0");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var m,v={components:{HeaderContainer:c.a,Navbar:u.a,NavbarButton:d.a,QuizResult:h.a},inject:["swayApi"],props:{quizId:{type:Number,required:!0}},data:function(){return{loading:!1,result:null}},created:function(){this.update()},mounted:function(){this.setNavbarVisible(!0)},destroyed:function(){this.setNavbarVisible(!1)},methods:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.d)({setNavbarVisible:l.c.SET_NAVBAR_VISIBLE}),{update:(m=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.swayApi.getQuizResult(this.quizId);case 4:this.result=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),p.b({type:"error",text:"Unable to fetch quiz result."});case 10:return e.prev=10,this.loading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[1,7,10,13]])}))),function(){return m.apply(this,arguments)}),downloadResult:function(){this.swayApi.downloadResult(this.quizId)}})},b=(n("bz5N"),n("KHd+")),g=Object(b.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("HeaderContainer",{staticClass:"sway-reports-show",scopedSlots:e._u([{key:"header",fn:function(){return[n("Navbar",{attrs:{title:e.result?e.result.quiz.name+" Report":"Report",loading:e.loading,secondary:""},scopedSlots:e._u([{key:"left",fn:function(){return[n("NavbarButton",{attrs:{text:"Reports",icon:"chevron-left",to:{name:"sway-reports-index"}}})]},proxy:!0},{key:"right",fn:function(){return[n("NavbarButton",{attrs:{text:"Download CSV",icon:"download"},on:{action:e.downloadResult}})]},proxy:!0}])})]},proxy:!0}])},[e._v(" "),e.result?n("section",{staticClass:"srps-section"},[n("div",{staticClass:"srps-container"},[n("QuizResult",{staticClass:"srps-quiz-result",attrs:{result:e.result}})],1)]):e._e()])}),[],!1,null,null,null);t.default=g.exports},i3ld:function(e,t,n){"use strict";var s=n("IiKz");n.n(s).a},i4Fa:function(e,t,n){},iKpI:function(e,t,n){"use strict";var s=n("EEU1");n.n(s).a},iPqt:function(e,t,n){},iZb5:function(e,t,n){},iahB:function(e,t,n){"use strict";var s=n("K8TH");n.n(s).a},iiMZ:function(e,t,n){"use strict";n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ");var s=n("bdgK"),i=new WeakMap;t.a={bind:function(e,t){var n=new s.a((function(e){return t.value(e[0])}));n.observe(e),i.set(e,n)},unbind:function(e){var t=i.get(e);t&&(t.disconnect(),i.delete(e))}}},ikmq:function(e,t,n){"use strict";var s=n("j7kU");n.n(s).a},imey:function(e,t,n){},ims9:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("rePB"),i=n("L2JU"),r=n("o0o1"),a=n.n(r),o=(n("ls82"),n("HaE+")),l=n("BkRI"),c=n.n(l),u=(n("qePV"),{props:{step:{type:Number,default:0}},render:function(e){return e("transition",{props:{name:"wizard",mode:"out-in",appear:!0}},[(this.$scopedSlots.default&&this.$scopedSlots.default()||[]).filter((function(e){return e.tag}))[this.step]])}}),d=(n("RLTt"),n("KHd+")),h=Object(d.a)(u,void 0,void 0,!1,null,null,null).exports,p=n("5/Cn");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var m,v={computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(i.e)(["course"]),{resuming:function(){return"new"!==this.course.settings.setup_status}}),methods:{skip:(m=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.b({icon:"warning",title:"Are you sure you want to skip setup?",text:"If you skip setup for this course, you will have to manually configure it in the admin panel.",primaryAction:"Skip Setup"});case 2:if(!e.sent){e.next=4;break}this.$emit("skip");case 4:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)}),next:function(){this.$emit("next")}}},b=Object(d.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{staticClass:"setup"},[e._v("Welcome "+e._s(e.resuming?"Back":""))]),e._v(" "),n("p",{staticClass:"setup"},[e.resuming?[e._v("\n\t\t\tSetup isn't complete for this course. Resume from where you left off.\n\t\t")]:[e._v("\n\t\t\tBefore you can start using this course, we need to do a few things.\n\t\t")],e._v(" "),n("br"),e._v("It won't take long.\n\t")],2),e._v(" "),n("button",{staticClass:"setup-primary",on:{click:e.next}},[e._v(e._s(e.resuming?"Resume Setup":"Continue"))]),e._v(" "),n("div",{staticClass:"setup-secondary-btns"},[n("button",{staticClass:"setup-secondary",on:{click:e.skip}},[e._v("Skip Setup")])])])}),[],!1,null,null,null).exports;function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var y,w={components:{EdCheck:n("6XG0").a},inject:["courseApi"],data:function(){return{loading:!1,features:null}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(i.e)(["course"])),created:function(){this.features=c()(this.course.features)},methods:{save:(y=Object(o.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,t={features:this.features,settings:c()(this.course.settings)},e.prev=2,e.next=5,this.courseApi.update(this.course.id,t);case 5:n=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),this.loading=!1,e.abrupt("return");case 12:this.course.features=n.features,this.$emit("next");case 14:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(){return y.apply(this,arguments)}),skip:function(){this.$emit("next")}}},_=Object(d.a)(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{staticClass:"setup"},[e._v("Features")]),e._v(" "),n("p",{staticClass:"setup"},[e._v("\n\t\tSelect the features you want to enable for this course.\n\t")]),e._v(" "),n("EdCheck",{staticClass:"setup-check",attrs:{disabled:e.loading,label:"Resources",description:"Upload course resources for students to download."},model:{value:e.features.resources,callback:function(t){e.$set(e.features,"resources",t)},expression:"features.resources"}}),e._v(" "),n("EdCheck",{staticClass:"setup-check",attrs:{disabled:e.loading,label:"Discussion",description:"The discussion board enables students and staff to ask questions and share information."},model:{value:e.features.discussion,callback:function(t){e.$set(e.features,"discussion",t)},expression:"features.discussion"}}),e._v(" "),n("EdCheck",{staticClass:"setup-check",attrs:{disabled:e.loading,label:"Sway",description:"Create and host live quizzes."},model:{value:e.features.sway,callback:function(t){e.$set(e.features,"sway",t)},expression:"features.sway"}}),e._v(" "),n("button",{staticClass:"setup-primary",attrs:{disabled:e.loading},on:{click:e.save}},[e._v("Continue")]),e._v(" "),n("div",{staticClass:"setup-secondary-btns"},[n("button",{staticClass:"setup-secondary",attrs:{disabled:e.loading},on:{click:e.skip}},[e._v("Skip This Step")])])],1)}),[],!1,null,null,null).exports;function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var C={components:{CategoriesInput:n("C7dE").a},inject:["courseApi"],data:function(){return{categories:null,loading:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(i.e)(["course"])),created:function(){this.categories=c()(this.course.settings.discussion.categories)},methods:{save:function(){var e=Object(o.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t={features:c()(this.course.features),settings:c()(this.course.settings)}).settings.discussion.categories=c()(this.categories),this.loading=!0,e.prev=3,e.next=6,this.courseApi.update(this.course.id,t);case 6:n=e.sent,e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(3),p.a({icon:"error",title:"Unable to set categories",text:"Check your internet connection and try again."}),this.loading=!1,e.abrupt("return");case 14:this.course.settings.discussion.categories=n.settings.discussion.categories,this.$emit("next");case 16:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(){return e.apply(this,arguments)}}(),skip:function(){this.$emit("next")}}},x=(n("/pxM"),Object(d.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"course-setup-categories"},[n("h1",{staticClass:"setup"},[e._v("Discussion Categories")]),e._v(" "),n("p",{staticClass:"setup"},[e._v("\n\t\tEnter the categories you want to use for the discussion board.\n\t")]),e._v(" "),n("p",{staticClass:"setup-secondary"},[e._v("\n\t\tEnter each category on a separate line. The General category is required.\n\t\tLines beginning with a tab indicate subcategories.\n\t")]),e._v(" "),n("CategoriesInput",{staticClass:"csetc-categories",attrs:{disabled:e.loading},model:{value:e.categories,callback:function(t){e.categories=t},expression:"categories"}}),e._v(" "),n("button",{staticClass:"setup-primary",attrs:{disabled:e.loading},on:{click:e.save}},[e._v("Continue")]),e._v(" "),n("div",{staticClass:"setup-secondary-btns"},[n("button",{staticClass:"setup-secondary",attrs:{disabled:e.loading},on:{click:e.skip}},[e._v("Skip This Step")])])],1)}),[],!1,null,null,null).exports);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var O={components:{EdRadio:n("oLoy").a},inject:["courseApi"],data:function(){return{loading:!1,page:null}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(i.e)(["course"]),{pages:function(){var e=[];return this.course.features.resources&&e.push({value:"resources",label:"Resources"}),this.course.features.discussion&&e.push({value:"discussion",label:"Discussion"}),this.course.features.challenges&&e.push({value:"challenges",label:"Challenges"}),this.course.features.workspaces&&e.push({value:"workspaces",label:"Workspaces"}),this.course.features.assessments&&e.push({value:"assessments",label:"Assessments"}),this.course.features.sway&&e.push({value:"sway",label:"Sway"}),e}}),created:function(){this.features=c()(this.course.features)},methods:{save:function(){var e=Object(o.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,(t={features:c()(this.course.features),settings:c()(this.course.settings)}).settings.default_page=this.page,e.prev=3,e.next=6,this.courseApi.update(this.course.id,t);case 6:n=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),this.loading=!1,e.abrupt("return");case 13:this.course.settings=n.settings,this.$emit("next");case 15:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(){return e.apply(this,arguments)}}(),skip:function(){this.$emit("next")}}},S=Object(d.a)(O,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{staticClass:"setup"},[e._v("Start Page")]),e._v(" "),n("p",{staticClass:"setup"},[e._v("\n\t\tChoose the page you want to show after clicking on the course from the dashboard.\n\t")]),e._v(" "),n("div",{staticClass:"setup-options"},[n("div",[n("EdRadio",{staticClass:"setup-radio",attrs:{disabled:e.loading,label:"(Let Ed decide)",value:!e.page},on:{input:function(t){e.page=""}}}),e._v(" "),e._l(e.pages,(function(t){return n("EdRadio",{key:t.value,staticClass:"setup-radio",attrs:{disabled:e.loading,label:t.label,value:e.page===t.value},on:{input:function(n){e.page=t.value}}})}))],2)]),e._v(" "),n("button",{staticClass:"setup-primary",attrs:{disabled:e.loading},on:{click:e.save}},[e._v("Continue")]),e._v(" "),n("div",{staticClass:"setup-secondary-btns"},[n("button",{staticClass:"setup-secondary",attrs:{disabled:e.loading},on:{click:e.skip}},[e._v("Skip This Step")])])])}),[],!1,null,null,null).exports,E=(n("ma9I"),n("22jn")),T=n("hSdx");function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var D,P={components:{InvitationsInput:E.a},inject:["courseApi"],props:{role:{type:String,required:!0},label:{type:String,required:!0}},data:function(){return{invitations:"",failedInvites:[],done:!1,loading:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(i.e)(["course"])),methods:{titleCase:T.titleCase,invite:(D=Object(o.a)(a.a.mark((function e(){var t,n,s,i,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$refs.invites.getRecords();case 3:t=e.sent,e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),p.a({icon:"error",title:"Input is invalid",text:"Your user information is not in the correct format. Each user should be on a separate line consisting of their full name and email address separated by a comma."}),e.abrupt("return");case 10:if(t){e.next=12;break}return e.abrupt("return");case 12:if(0!==t.length){e.next=15;break}return p.a({icon:"error",title:"Nobody to invite",text:"You haven't specified anybody to invite. Fill in the form according to the instructions and try again.",subtext:"If you want to skip this step, click the Skip This Step button."}),e.abrupt("return");case 15:return n=1===t.length?"":"s",e.next=18,p.b({title:"Invite user".concat(n,"?"),text:"You are about to invite ".concat(t.length," user").concat(n," to the ").concat(this.course.code.toUpperCase()," - ").concat(this.course.name," course with role ").concat(this.role,". Proceed?"),icon:"warning",primaryAction:"Invite"});case 18:if(e.sent){e.next=20;break}return e.abrupt("return");case 20:return this.loading=!0,e.prev=21,e.next=24,this.courseApi.inviteUsers(this.course.id,t,this.role);case 24:s=e.sent,e.next=31;break;case 27:return e.prev=27,e.t1=e.catch(21),p.a({icon:"error",title:"Unable to invite ".concat(this.label),text:400===e.t1.status&&"string"==typeof e.t1.data?e.t1.data:"Check your internet connection and try again."}),e.abrupt("return");case 31:return e.prev=31,this.loading=!1,e.finish(31);case 34:for(this.done=!0,i=0,r=Object.keys(s);i<r.length;i++)o=r[i],s[o]&&this.failedInvites.push(o);case 36:case"end":return e.stop()}}),e,this,[[0,6],[21,27,31,34]])}))),function(){return D.apply(this,arguments)}),skip:function(){this.next()},next:function(){this.$emit("next")}}},A=(n("D/zS"),Object(d.a)(P,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"course-setup-invite"},[n("h1",{staticClass:"setup"},[e._v("Invite "+e._s(e.titleCase(e.label)))]),e._v(" "),n("p",{staticClass:"setup"},[e._v("\n\t\tEnter the names and email addresses of the "+e._s(e.label)+" that you want to\n\t\tinvite to this course.\n\t")]),e._v(" "),n("p",{staticClass:"setup-secondary"},[e._v("\n\t\tYou can also paste a selection from Excel if you have this data in a spreadsheet.\n\t")]),e._v(" "),n("InvitationsInput",{ref:"invites",staticClass:"cseti-invitations-input",attrs:{disabled:e.loading||e.done,placeholder:"Example: John Appleseed, john1234@uni.edu.au"},model:{value:e.invitations,callback:function(t){e.invitations=t},expression:"invitations"}}),e._v(" "),e.failedInvites.length?n("div",{staticClass:"cseti-failed"},[e._v("\n\t\tFailed to send email invitations to the following recipients:\n\t\t"),n("ul",e._l(e.failedInvites,(function(t){return n("li",{key:t},[e._v(e._s(t))])})),0)]):e._e(),e._v(" "),e.done?n("div",{staticClass:"setup-success"},[e._v("Invited "+e._s(e.label)+" successfully")]):e._e(),e._v(" "),e.done?n("button",{staticClass:"setup-primary",on:{click:e.next}},[e._v("Continue")]):[n("button",{staticClass:"setup-primary",attrs:{disabled:e.loading},on:{click:e.invite}},[e._v("Invite "+e._s(e.titleCase(e.label)))]),e._v(" "),n("div",{staticClass:"setup-secondary-btns"},[n("button",{staticClass:"setup-secondary",attrs:{disabled:e.loading},on:{click:e.skip}},[e._v("Skip This Step")])])]],2)}),[],!1,null,null,null).exports),N=(n("UxlC"),n("EnZy"),n("ABIe")),R=n("/jHr");function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var L,F={components:{Amber:N.a},inject:["discussApi"],props:{threadList:{type:Object,required:!0}},data:function(){return{content:null,loading:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(i.e)(["user","course"])),created:function(){var e,t;this.content=(e=this.user,t=e.name.split(/\s+/)[0],'\n<document version="2.0">\n\t<paragraph>Hi everyone,</paragraph>\n\t<paragraph>We\'re using Ed Discussion for Q&amp;A this semester.</paragraph>\n\t<paragraph>This is the best place to ask questions about the course, whether curricular or administrative. You will get faster answers here from staff and peers than through email.</paragraph>\n\t<paragraph>Here are some tips:</paragraph>\n\t<list style="bullet">\n\t\t<list-item><paragraph>Search before you post</paragraph></list-item>\n\t\t<list-item><paragraph>Heart questions and answers you find useful</paragraph></list-item>\n\t\t<list-item><paragraph>Answer questions you feel confident answering</paragraph></list-item>\n\t\t<list-item><paragraph>Share interesting course related content with staff and peers</paragraph></list-item>\n\t</list>\n\t<paragraph>For more information on Ed Discussion, you can refer to the <link href="'.concat("https://edstem.org/help",'">Quick Start Guide</link>.</paragraph>\n\t<paragraph>All the best this semester!</paragraph>\n\t<paragraph>').concat(t,"</paragraph>\n</document>").replace(/\n\s*/g,""))},methods:{post:(L=Object(o.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!R.c(this.content)){e.next=3;break}return p.a({icon:"error",title:"Announcement cannot be empty",text:"Type the content for the announcement and try again."}),e.abrupt("return");case 3:return e.next=5,p.b({icon:"question",title:"Post announcement?",text:"A notification email will be sent to everyone in the course informing them of this announcement.",primaryAction:"Post"});case 5:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return t={type:"announcement",title:"Welcome",content:this.content,category:"General",send_emails:!0},this.loading=!0,e.prev=9,e.next=12,this.discussApi.createThread(this.course.id,t);case 12:n=e.sent,e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(9),p.a({icon:"error",title:"Unable to post announcement",text:"The welcome announcement failed to post. Check your internet connection and try again."}),this.loading=!1,e.abrupt("return");case 20:n.user=this.user,this.threadList.prependThread(n),this.next();case 23:case"end":return e.stop()}}),e,this,[[9,15]])}))),function(){return L.apply(this,arguments)}),skip:function(){this.next()},next:function(){this.$emit("next")}}},B=(n("ikmq"),Object(d.a)(F,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"course-setup-announce"},[n("h1",{staticClass:"setup"},[e._v("Welcome Announcement")]),e._v(" "),n("p",{staticClass:"setup"},[e._v("Post a welcome announcement to introduce students to the discussion board.")]),e._v(" "),n("Amber",{staticClass:"cseta-amber",model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}),e._v(" "),n("button",{staticClass:"setup-primary",attrs:{disabled:e.loading},on:{click:e.post}},[e._v("Post Announcement")]),e._v(" "),n("div",{staticClass:"setup-secondary-btns"},[n("button",{staticClass:"setup-secondary",attrs:{disabled:e.loading},on:{click:e.skip}},[e._v("Skip This Step")])])],1)}),[],!1,null,null,null).exports),q={components:{Spinner:n("NC1X").a},created:function(){var e=this;setTimeout((function(){return e.$emit("next")}),2e3)}},$=Object(d.a)(q,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",{staticClass:"setup"},[this._v("Almost There")]),this._v(" "),t("p",{staticClass:"setup"},[this._v("\n\t\tAdding finishing touches...\n\t")]),this._v(" "),t("Spinner",{staticClass:"setup-spinner"})],1)}),[],!1,null,null,null).exports,U={methods:{next:function(){this.$emit("finish")}}},z=(n("x9Oe"),Object(d.a)(U,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"course-setup-done"},[n("h1",{staticClass:"setup"},[e._v("All Set")]),e._v(" "),n("p",{staticClass:"setup"},[e._v("Your course is ready to go!")]),e._v(" "),n("p",{staticClass:"setup-secondary"},[e._v("\n\t\tIf you want to modify any of the course settings in the future,\n\t\tyou can do so in the Admin page for this course.\n\t")]),e._v(" "),n("button",{staticClass:"setup-primary",on:{click:e.next}},[e._v("Finish")])])}),[],!1,null,null,null).exports);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var H,W=0,Q=1,K=2,Y=5,G=6,X=["new","categories","start_page","invite_staff","invite_students","welcome_announcement","done"],J={name:"CourseSetup",components:{Wizard:h,Welcome:b,Features:_,Categories:x,Startpage:S,Invite:A,Announce:B,Final:$,Done:z},inject:["courseApi"],props:{threadList:{type:Object,required:!0}},data:function(){return{step:0}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(i.e)(["course","postponedSetups"])),watch:{step:"updateStep"},methods:{skip:function(){this.step=G+1},next:function(){0===this.step?this.step=Y+1:this.step++},updateStep:(H=Object(o.a)(a.a.mark((function e(){var t,n,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.step!==W+1&&this.step!==K+1){e.next=3;break}return this.step++,e.abrupt("return");case 3:if(this.course.features.discussion||this.step!==Q+1&&this.step!==Y+1){e.next=6;break}return this.step++,e.abrupt("return");case 6:if(t=this.course,(n=X[this.step-1])&&n!==t.settings.setup_status){e.next=10;break}return e.abrupt("return");case 10:return(s={features:c()(t.features),settings:c()(t.settings)}).settings.setup_status=n,e.next=14,this.courseApi.update(t.id,s);case 14:t.settings.setup_status=n;case 15:case"end":return e.stop()}}),e,this)}))),function(){return H.apply(this,arguments)})}},Z=(n("oxn1"),Object(d.a)(J,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"course-setup"},[n("Wizard",{attrs:{step:e.step}},[n("Welcome",{on:{next:e.next,skip:e.skip}}),e._v(" "),n("Features",{on:{next:e.next}}),e._v(" "),n("Categories",{on:{next:e.next}}),e._v(" "),n("Startpage",{on:{next:e.next}}),e._v(" "),n("Invite",{key:"staff",attrs:{role:"staff",label:"staff"},on:{next:e.next}}),e._v(" "),n("Invite",{key:"student",attrs:{role:"student",label:"students"},on:{next:e.next}}),e._v(" "),n("Announce",{attrs:{"thread-list":e.threadList},on:{next:e.next}}),e._v(" "),n("Final",{on:{next:e.next}}),e._v(" "),n("Done",{on:{finish:function(t){return e.$emit("finish")}}})],1)],1)}),[],!1,null,null,null).exports),ee={components:{Icon:n("WmPt").a}};n("QBAF");function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var ne={components:{Setup:Z,Glance:Object(d.a)(ee,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"discuss-glance"},[t("Icon",{staticClass:"dglance-icon",attrs:{icon:"discussion"}}),this._v(" "),t("div",{staticClass:"dglance-text"},[this._v(this._s(this.$t("discussion.selectThread")))])],1)}),[],!1,null,null,null).exports},props:{threadList:{type:Object,required:!0}},data:function(){return{setup:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(i.e)(["course"]),{},Object(i.c)(["isAdmin"])),watch:{course:{immediate:!0,handler:function(e){this.setup=this.isAdmin&&"done"!==e.settings.setup_status}}}},se=(n("FqCa"),Object(d.a)(ne,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"discuss-landing"},[e.setup?n("Setup",{staticClass:"dl-setup",attrs:{"thread-list":e.threadList},on:{finish:function(t){e.setup=!1}}}):n("Glance",{staticClass:"dl-glance"})],1)}),[],!1,null,null,null));t.default=se.exports},isJU:function(e,t,n){"use strict";var s=n("nV0h");n.n(s).a},"j+H3":function(e,t,n){"use strict";var s=n("bRKa");n.n(s).a},j3I6:function(e,t,n){},j7kU:function(e,t,n){},jISS:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("qePV"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("rePB"),i=n("zZ0H"),r=n.n(i),a=n("d8FT"),o=n.n(a),l=n("L2JU"),c=n("Q2AE"),u=n("TphV"),d=n("2PkB"),h=n("WmPt"),p=n("CkVh"),f=n("Kaxq"),m=n("qbxg"),v=n("gfqH"),b=n("/jHr"),g=n("5/Cn");function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _={name:"ChallengeShow",components:{Navbar:u.a,NavbarButton:d.a,Icon:h.a,ContextMenuTrigger:p.a,ContextMenuItem:f.a,ChallengeContextMenuItems:m.a,Challenge:v.a},props:{challengeId:{type:Number,required:!0},userId:{type:Number,default:null},linkPrefix:{type:String,required:!0},compact:{type:Boolean,default:!1}},data:function(){return{loading:null,challenge:null,temporary:null,menuVisible:!1,internalCompact:this.compact}},computed:w({},Object(l.e)(["isSmall"]),{},Object(l.c)(["isStaff","isAdmin","isUserAdmin","isLabActive"]),{hasDescription:function(){return this.challenge&&this.challenge.content&&!b.c(this.challenge.content)},backBtnText:function(){return this.isSmall?"Back":"assessment"===this.linkPrefix?"Assessments":"Challenges"},challengeTypeLabel:function(){switch(this.linkPrefix){case"challenge":return"Challenge";case"assessment":return"Assessment"}},challengeTypeIcon:function(){switch(this.linkPrefix){case"challenge":return"star";case"assessment":return"assignment"}},showRoute:function(){return{name:"".concat(this.linkPrefix,"-show"),query:o()({masquerade:this.$route.query.masquerade},r.a)}},submissionsRoute:function(){return{name:"".concat(this.linkPrefix,"-submissions"),query:o()({masquerade:this.$route.query.masquerade,u:this.$route.query.u},r.a)}},solutionRoute:function(){return{name:"".concat(this.linkPrefix,"-solution"),query:o()({masquerade:this.$route.query.masquerade},r.a)}},navbarTitle:function(){return!this.challenge||this.hasDescription||this.isSmall?"":this.challenge.title},markable:function(){return this.challenge&&"none"!==this.challenge.type}}),created:function(){var e=this;this.$watch((function(){return!e.isStaff&&!e.isLabActive&&e.challenge&&e.challenge.is_exam&&!1===e.temporary}),(function(t){t&&(e.$router.push({name:"".concat(e.linkPrefix,"-index")}),g.a({icon:"info",title:"Time's up",text:"The assessment has ended. It is no longer available."}))}))},mounted:function(){this.setNavbarVisible(!0),this.internalCompact&&this.setAppbarVisible(!1)},destroyed:function(){this.setNavbarVisible(!1),this.setAppbarVisible(!0)},methods:w({},Object(l.d)({setNavbarVisible:c.c.SET_NAVBAR_VISIBLE,setAppbarVisible:c.c.SET_APPBAR_VISIBLE}),{onChallengeError:function(){this.$router.push({name:"".concat(this.linkPrefix,"-index")})}})},k=(n("iahB"),n("KHd+")),C=Object(k.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"challenge-show"},[e.challenge?n("Navbar",{staticClass:"chas-navbar",attrs:{title:e.navbarTitle,loading:e.loading,secondary:""},scopedSlots:e._u([{key:"left",fn:function(){return[e.internalCompact?n("Icon",{staticClass:"chas-navbar-ed",attrs:{icon:"ed"}}):n("NavbarButton",{attrs:{text:e.backBtnText,icon:"chevron-left",to:{name:e.linkPrefix+"-index"},"prefer-text-hidden":e.isSmall}})]},proxy:!0},{key:"right",fn:function(){return[n("NavbarButton",{attrs:{text:e.challengeTypeLabel,icon:e.challengeTypeIcon,to:e.showRoute,"prefer-text-hidden":e.isSmall,pressed:e.$route.matched[e.$route.matched.length-1].name===e.showRoute.name}}),e._v(" "),n("NavbarButton",{attrs:{text:"Submissions",icon:"restore",to:e.submissionsRoute,"prefer-text-hidden":e.isSmall,pressed:e.$route.matched[e.$route.matched.length-1].name===e.submissionsRoute.name}}),e._v(" "),e.isStaff||!e.challenge.is_active?n("NavbarButton",{attrs:{text:"Solution"+(e.challenge.is_active?" (hidden)":""),icon:"tick",to:e.solutionRoute,"prefer-text-hidden":e.isSmall,pressed:e.$route.matched[e.$route.matched.length-1].name===e.solutionRoute.name}}):e._e(),e._v(" "),n("ContextMenuTrigger",{attrs:{active:e.menuVisible},on:{"update:active":function(t){e.menuVisible=t}},scopedSlots:e._u([{key:"trigger",fn:function(t){var s=t.trigger,i=t.attrs;return[n("NavbarButton",e._b({attrs:{icon:"more-horiz"},on:{action:s}},"NavbarButton",i,!1))]}},{key:"items",fn:function(){return[n("ChallengeContextMenuItems",{attrs:{"is-admin":e.isAdmin,"is-user-admin":e.isUserAdmin,markable:e.markable,"get-component":function(){return e.$refs.challenge},challenge:e.challenge},scopedSlots:e._u([{key:"general",fn:function(){return[e.isAdmin?n("ContextMenuItem",{key:"edit",attrs:{text:"Edit"},on:{click:function(t){return e.$router.push({name:e.linkPrefix+"-edit"})}}}):e._e()]},proxy:!0},{key:"submissions",fn:function(){return[e.isStaff?n("ContextMenuItem",{key:"submitAll",attrs:{text:"Submit All"},on:{click:function(t){return e.$refs.challenge.submitAll()}}}):e._e(),e._v(" "),e.isStaff&&e.challenge.requires_lti_link?n("ContextMenuItem",{key:"pushGrades",attrs:{text:"Push Grades to Tool Consumer"},on:{click:function(t){return e.$refs.challenge.pushGrades()}}}):e._e()]},proxy:!0}],null,!1,2441687268)})]},proxy:!0}],null,!1,959552618)})]},proxy:!0}],null,!1,2518003268)}):e._e(),e._v(" "),n("Challenge",{ref:"challenge",staticClass:"chas-challenge",attrs:{"challenge-id":e.challengeId,"user-id":e.userId,"persist-id":"challengeShow","shortcut-keys-disabled":"challenge-show"!==e.$route.name&&"assessment-show"!==e.$route.name},on:{loading:function(t){e.loading=t},challenge:function(t){e.challenge=t,e.temporary=null},temporary:function(t){e.temporary=t},error:e.onChallengeError},scopedSlots:e._u([{key:"default",fn:function(t){return[n("RouterView",e._b({staticClass:"chas-subview"},"RouterView",t,!1))]}}])})],1)}),[],!1,null,null,null);t.default=C.exports},jNrv:function(e,t,n){"use strict";var s=n("FmCW");n.n(s).a},jPwb:function(e,t,n){},jQ4J:function(e,t,n){},jdow:function(e,t,n){},jfWh:function(e,t,n){},jjcQ:function(e,t,n){"use strict";var s=n("VTRy");n.n(s).a},joVV:function(e,t,n){},jpZP:function(e,t,n){"use strict";var s=n("ueMK");n.n(s).a},jqv0:function(e,t,n){"use strict";var s=n("b9Xl");n.n(s).a},jsmB:function(e,t,n){},jstb:function(e,t,n){},jxI9:function(e,t,n){"use strict";var s=n("5vMp");n.n(s).a},jyOL:function(e,t,n){},"k3H/":function(e,t,n){"use strict";var s=n("dAzZ");n.n(s).a},kBfW:function(e,t,n){"use strict";var s=n("c3Va");n.n(s).a},kBpu:function(e,t,n){},kCJ2:function(e,t,n){},kDLI:function(e,t,n){"use strict";var s=n("7yah");n.n(s).a},kGqS:function(e,t,n){},kJps:function(e,t,n){"use strict";var s=n("zWr8"),i={components:{Sandbox:n("vfuN").a},extends:s.a},r=(n("r3Ij"),n("KHd+")),a=Object(r.a)(i,(function(){var e=this.$createElement;return(this._self._c||e)("Sandbox",{staticClass:"lessli-html-sandbox",attrs:{html:this.slide.html}})}),[],!1,null,null,null);t.a=a.exports},kUIt:function(e,t,n){"use strict";n("fbCW"),n("4mDm"),n("2B1R"),n("07d7"),n("3bBZ"),n("mQpL");var s=n("KHd+"),i=Object(s.a)({},(function(e,t){return(0,t._c)("kbd",{staticClass:"key"},[t._t("default")],2)}),[],!0,null,null,null).exports,r=n("aLgN"),a={components:{Key:i},props:{value:{type:[String,Object],default:""},display:{type:String,default:"symbol"}},computed:{shortcut:function(){return new r.a(this.value)},keys:function(){var e=this.shortcut,t=this.display;return e.keys.map((function(e){var n=r.b(e)||{string:e};return["symbol"===t&&n.symbol,("symbol"===t||"compact"===t)&&n.stringCompact,n.string].find(Boolean)}))}}},o=(n("J9P4"),Object(s.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"keyboard-shortcut",attrs:{title:e.shortcut.display}},e._l(e.keys,(function(t,s){return n("Key",{key:s},[e._v(e._s(t))])})),1)}),[],!1,null,null,null));t.a=o.exports},kV00:function(e,t,n){"use strict";var s=n("Hf3e");n.n(s).a},kWTT:function(e,t,n){},kYGP:function(e,t,n){"use strict";n("2B1R");var s=n("K4j9"),i=n("zBf9"),r=n("6inl"),a=n("4K9I"),o={components:{Portal:s.Portal,CanvasSketch:r.a,EdButton:a.a},extends:i.a,data:function(){return{drawing:!0}},computed:{canvasSize:function(){var e=this.question;return 0===e.imageWidth||0===e.imageHeight?{width:640,height:480}:{width:e.imageWidth,height:e.imageHeight}},valid:function(){return(this.value||[]).length>0}},methods:{onInput:function(e){e=e.map((function(e){return e.map((function(e){return Math.round(10*e)/10}))})),this.$emit("input",e)},clear:function(){this.$emit("input",[])}}},l=(n("fJT6"),n("KHd+")),c=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quiz-question-show-sketch"},[n("CanvasSketch",{attrs:{"image-url":e.question.imageUrl,"image-width":e.canvasSize.width,"image-height":e.canvasSize.height,value:e.value,readonly:!e.drawing},on:{input:e.onInput}}),e._v(" "),n("Portal",{attrs:{to:"sar-question-actions"}},[n("div",{staticClass:"qqssk-actions"},[n("EdButton",{staticClass:"media-sm-device",attrs:{pressed:e.drawing},on:{click:function(t){e.drawing=!e.drawing}}},[e._v("Draw")]),e._v(" "),n("EdButton",{on:{click:e.clear}},[e._v("Clear")])],1)])],1)}),[],!1,null,null,null);t.a=c.exports},kcMa:function(e,t,n){},kmwD:function(e,t,n){"use strict";var s=n("4J/8");n.n(s).a},"ks/X":function(e,t,n){},"l/gT":function(e,t,n){},lDZM:function(e,t,n){"use strict";var s=n("rxLH");n.n(s).a},lE2J:function(e,t,n){"use strict";var s=n("fara");n.n(s).a},lJ4G:function(e,t,n){},"lQ8/":function(e,t,n){"use strict";var s=n("THgv");n.n(s).a},lRVQ:function(e,t,n){"use strict";var s=n("BYLk");n.n(s).a},lRrH:function(e,t,n){"use strict";var s=n("+Nfg");n.n(s).a},lS62:function(e,t,n){"use strict";var s=n("XhvD");n.n(s).a},lVsj:function(e,t,n){"use strict";var s={functional:!0,props:{items:{type:Array,required:!0},separator:{type:void 0,default:void 0}},render:function(e,t){for(var n=t.props,s=n.items,i=n.separator,r=t.data.scopedSlots,a=r.default,o=void 0===a?function(e){return e}:a,l=r.separator,c=void 0===l?function(){return i}:l,u=[],d=0;d<s.length;d++){var h={item:s[d],index:d};if(u.push(o(h)),d<s.length-1){var p=c(h);p&&u.push(p)}}return u}},i=n("KHd+"),r=Object(i.a)(s,void 0,void 0,!1,null,null,null);t.a=r.exports},lnyD:function(e,t,n){"use strict";var s=n("wnNh");n.n(s).a},lszC:function(e,t,n){},ltWs:function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("0oug"),n("ma9I"),n("TeQF"),n("fbCW"),n("yXV3"),n("4mDm"),n("2B1R"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("TWNs"),n("JfAA"),n("PKPk"),n("Rm1S"),n("UxlC"),n("hByQ"),n("FZtP"),n("3bBZ");var s,i=n("o0o1"),r=n.n(i),a=n("kvrn"),o=n.n(a),l=(n("ls82"),n("HaE+")),c=n("KQm4"),u=n("rePB"),d=n("DzJC"),h=n.n(d),p=n("Kw5r"),f=n("L2JU"),m=n("Q2AE"),v=n("bdgK"),b=n("20nU"),g=n("1lsy"),y=n("hSdx"),w=n("9Arg"),_=n("/jHr"),k=n("QZQe"),C=n("qTL9"),x=n("hH85"),j=(n("qePV"),n("NC1X")),O=n("oDEV"),S={components:{Spinner:j.a,FadeTransition:O.a},props:{src:{type:String,default:null},cors:{type:Boolean,default:!1},alt:{type:String,default:null},width:{type:Number,required:!0},height:{type:Number,required:!0}},data:function(){return{state:"loading",internalWidth:null,internalHeight:null}},computed:{crossorigin:function(){return this.cors?"anonymous":null},ratio:function(){return(this.height||this.internalHeight)/(this.width||this.internalWidth)},containerStyle:function(){return{"max-width":"".concat(this.width,"px")}},innerStyle:function(){return{"padding-top":"".concat(100*this.ratio,"%")}}},watch:{src:function(){this.internalWidth=null,this.internalHeight=null}},methods:{onLoad:function(e){this.state="loaded",this.internalWidth=e.target.naturalWidth,this.internalHeight=e.target.naturalHeight},onError:function(){this.state="error"}}},E=(n("Jd7D"),n("KHd+")),T=Object(E.a)(S,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"image-loader",style:e.containerStyle},[s("div",{staticClass:"imgl-inner",style:e.innerStyle},[s("Transition",["loaded"!==e.state?s("div",{staticClass:"imgl-loading"},[s("Spinner",{directives:[{name:"show",rawName:"v-show",value:"error"!==e.state,expression:"state !== 'error'"}],staticClass:"imgl-spinner"}),e._v(" "),s("img",{directives:[{name:"show",rawName:"v-show",value:"error"===e.state,expression:"state === 'error'"}],staticClass:"imgl-error",attrs:{src:n("SWsQ")}})],1):e._e()]),e._v(" "),s("FadeTransition",{attrs:{duration:.2}},[e.src?s("img",{directives:[{name:"show",rawName:"v-show",value:"loaded"===e.state,expression:"state === 'loaded'"}],staticClass:"imgl-img",attrs:{src:e.src,alt:e.alt,crossorigin:e.crossorigin},on:{load:e.onLoad,error:e.onError}}):e._e()])],1)])}),[],!1,null,null,null).exports,I=n("oJzX"),D={props:{url:{type:String,required:!0},filename:{type:String,required:!0}}},P=(n("9jDF"),Object(E.a)(D,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"amber-display-block amber-display-file"},[t("img",{attrs:{src:n("ACpp")}}),this._v(" "),t("a",{attrs:{target:"_blank",href:this.url,rel:"noopener noreferrer"}},[this._v(this._s(this.filename))])])}),[],!1,null,null,null).exports),A=n("R84W"),N=(n("+2oP"),n("3KgV"),n("sR2V"),n("T5An")),R={props:{value:{type:String,default:""},language:{type:String,default:void 0},languageSubset:{type:Array,default:void 0}},data:function(){return{highlights:null,computedLanguage:null,relevance:0}},watch:{value:"updateHighlights",language:"updateHighlights"},created:function(){this.updateHighlights()},methods:{updateHighlights:(s=Object(l.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.highlights=null,this.computedLanguage=null,this.relevance=0,!this.language){e.next=9;break}return e.next=6,Object(N.a)(this.language,this.value);case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,Object(N.b)(this.value,this.languageSubset);case 11:e.t0=e.sent;case 12:t=e.t0,this.highlights=Object.freeze(t.highlights),this.computedLanguage=t.language,this.relevance=t.relevance;case 16:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},render:function(){var e=arguments[0],t=this.highlights,n=this.value;if(t){var s=function(e){return e.replace(/\t/g,"    ")},i=function t(n,i){for(var r=[],a=0;a<n.length;){for(var o=a+1;o<n.length&&n[o].type[i]===n[a].type[i];)o++;var l=n.slice(a,o);i>=l[0].type.length?r.push([l.reduce((function(e,t){return e+s(t.text)}),"")]):r.push(e("span",{staticClass:"hljs-".concat(l[0].type[i])},[t(l,i+1)])),a=o}return r};return e("div",[i(t,0)])}return e("div",[n])}},M=Object(E.a)(R,void 0,void 0,!1,null,null,null).exports,L=n("oNMn");function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e){return e.match(/^\s*(\S*)/)[1]}var $,U={components:{Preview:I.a},props:{value:{type:String,default:null},lineNumbers:{type:Boolean,default:!1},spans:{type:Array,default:function(){return[]}},spansVisible:{type:Boolean,default:!1},nonInteractive:{type:Boolean,default:!1}},data:function(){return{previewUrls:[],previewIndex:0,previewVisible:!1}},computed:B({},Object(f.e)(["user","mentionables"]),{},Object(f.c)(["highlightableLanguages"]),{previewItems:function(){return this.previewUrls.map((function(e){return{type:"image",url:e}}))},mathEnabled:function(){return!this.lineNumbers},cssClass:function(){return{"amber-display-lineno":this.lineNumbers,"amber-display-spans":this.spansVisible}}}),watch:{value:function(e){this.setValue(e)}},created:function(){this.renderLineNumbersThrottled=h()(this.renderLineNumbers,100),this.components=[],this.latex=null,this.fragment=null,this.fragmentCtx=null},mounted:function(){this.lineNumbers&&(this.resizeObserver=new v.a(this.renderLineNumbersThrottled),this.resizeObserver.observe(this.$el)),this.setValue(this.value)},destroyed:function(){this.resizeObserver&&this.resizeObserver.disconnect(),this.renderLineNumbersThrottled.cancel(),this.removeComponents()},methods:B({},Object(f.b)({loadMentionables:m.a.LOAD_MENTIONABLES}),{onImageClick:function(e){var t=e.target;if("IMG"===t.tagName&&t.classList.contains("imgl-img")){var n=Object(c.a)(document.querySelectorAll("img.imgl-img"));this.previewUrls=n.map((function(e){return e.src})),this.previewIndex=n.indexOf(t),this.previewVisible=!0}},onPreviewClose:function(){this.previewVisible=!1},removeComponents:function(){var e=!0,t=!1,n=void 0;try{for(var s,i=this.components[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){var r=s.value;r.$el.remove(),r.$destroy()}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.components=[]},setValue:function(e){this.removeComponents(),e?this.setAmberDocument(e):this.$el.innerHTML=""},setAmberDocument:function(e){if(this.$el.innerHTML="",!_.c(e)){this.latex=null,this.labelCount=0;var t=(new DOMParser).parseFromString(e,"text/xml").documentElement;this.fragment=document.createDocumentFragment(),this.fragmentCtx=this.fragment;var n=!0,s=!1,i=void 0;try{for(var r,a=t.childNodes[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value;this.renderNode(o)}}catch(l){s=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}for(;this.fragment.firstChild&&this.fragment.firstChild.classList&&this.fragment.firstChild.classList.contains("amber-content-empty");)this.fragment.firstChild.remove();for(;this.fragment.lastChild&&this.fragment.lastChild.classList&&this.fragment.lastChild.classList.contains("amber-content-empty");)this.fragment.lastChild.remove();this.$el.appendChild(this.fragment),this.fragment=null,this.fragmentCtx=null,this.mathEnabled&&Object(g.a)(this.$el),this.lineNumbers?this.renderLineNumbers():this.$emit("spans",null)}},pushCtx:function(e){this.fragmentCtx.appendChild(e),this.fragmentCtx=e},popCtx:function(){this.fragmentCtx=this.fragmentCtx.parentNode},renderNode:function(e){if(e.nodeType===Node.ELEMENT_NODE)switch(e.tagName){case"paragraph":this.renderTag(e,"p",{content:!0});break;case"blockquote":this.renderTag(e,"blockquote",{content:!0});break;case"heading":this.renderTag(e,"h"+e.getAttribute("level"),{content:!0});break;case"list":this.renderTag(e,"number"===e.getAttribute("style")?"ol":"ul");break;case"list-item":this.renderListItem(e);break;case"rule":this.renderTag(e,"hr");break;case"bold":this.renderTag(e,"b");break;case"italic":this.renderTag(e,"i");break;case"underline":this.renderTag(e,"u");break;case"code":this.renderTag(e,"code");break;case"strike":this.renderTag(e,"s");break;case"sup":this.renderTag(e,"sup");break;case"sub":this.renderTag(e,"sub");break;case"break":this.renderTag(e,"br");break;case"callout":this.renderCallout(e);break;case"pre":this.renderPre(e);break;case"label":this.renderLabel();break;case"span":this.renderSpan(e);break;case"span-ref":this.renderSpanRef(e);break;case"figure":this.renderFigure(e);break;case"video":this.renderVideo(e);break;case"snippet":this.renderSnippet(e);break;case"web-snippet":this.renderWebSnippet(e);break;case"file":this.renderFile(e);break;case"math":this.renderMath(e);break;case"link":this.renderLink(e);break;case"mention":this.renderMention(e)}else e.nodeType===Node.TEXT_NODE&&this.renderText(e.nodeValue)},renderTag:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=document.createElement(t);s.className="amber-el amber-".concat(e.tagName),n.content&&s.classList.add("amber-content");var i=e.getAttribute("id");if(i&&(s.dataset.id=i),this.pushCtx(s),e.childNodes.length){var r=!0,a=!1,o=void 0;try{for(var l,c=e.childNodes[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;this.renderNode(u)}}catch(p){a=!0,o=p}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}"p"===t&&w.v(s,(function(e){e.target="_blank",e.rel="noopener noreferrer"}))}else if(n.content){var d=document.createElement("span");d.style.display="inline-block",s.appendChild(d),s.classList.add("amber-content-empty")}if(n.content){var h=document.createElement("div");h.className="amber-gutter",s.appendChild(h)}return this.popCtx(),s},renderListItem:function(e){var t=this.renderTag(e,"li"),n=Object(c.a)(e.childNodes).every((function(e){return"list"===e.tagName}));t.classList.toggle("amber-listitem-nomarker",n)},renderCallout:function(e){var t=this.renderTag(e,"p",{content:!0}),n=e.getAttribute("type")||"info";return t.classList.add("amber-callout-".concat(n)),t},renderPre:function(e){this.$createElement;var t=this.highlightableLanguages;if(t.length){var n=document.createElement("pre");n.className="amber-el amber-pre amber-content";var s=e.getAttribute("id");if(s&&(n.dataset.id=s),this.pushCtx(n),e.childNodes.length){var i=_.d(e),r=new p.default({el:document.createElement("div"),parent:this,render:function(){var e=arguments[0];return e("div",[e(M,{attrs:{value:i,languageSubset:t}})])}});n.appendChild(r.$el),this.components.push(r)}else{var a=document.createElement("span");a.style.display="inline-block",n.appendChild(a),n.classList.add("amber-content-empty")}var o=document.createElement("div");return o.className="amber-gutter",n.appendChild(o),this.popCtx(),n}this.renderTag(e,"pre",{content:!0})},renderSpan:function(e){var t=this.renderTag(e,"span");if(this.spansVisible){var n=e.getAttribute("id");t.title="Span: ".concat(n)}},renderLink:function(e){var t=document.createElement("a");t.className="amber-el";var n=e.getAttribute("href");y.isEmail(n)?n="mailto:"+n:/^(https?:\/\/|mailto:)/.test(n)||(n="http://"+n),t.href=n,t.target="_blank",t.rel="noopener noreferrer",this.pushCtx(t);var s=!0,i=!1,r=void 0;try{for(var a,o=e.childNodes[Symbol.iterator]();!(s=(a=o.next()).done);s=!0){var l=a.value;this.renderNode(l)}}catch(c){i=!0,r=c}finally{try{s||null==o.return||o.return()}finally{if(i)throw r}}this.popCtx()},renderMention:($=Object(l.a)(r.a.mark((function e(t){var n,s,i,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$createElement,n=t.textContent,s=+t.getAttribute("id"),(i=new p.default({parent:this,data:{text:n,id:s},computed:{label:function(){return"@"+(this.text?q(this.text):this.id||"")}},render:function(e){var t=this,n={scopedSlots:{default:function(n){var s=n.mouseEnter,i=n.mouseLeave;return e("span",{class:"amber-mention",on:{mouseenter:s,mouseleave:i}},[t.label])}}};return e(L.a,o()([{attrs:{userId:this.id}},n]))}})).$mount(),this.fragmentCtx.appendChild(i.$el),this.components.push(i),e.next=9,this.loadMentionables();case 9:(a=this.mentionables.find((function(e){return e.id===s})))&&(i.text=a.label);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return $.apply(this,arguments)}),renderText:function(e){this.fragmentCtx.appendChild(document.createTextNode(e))},renderLabel:function(){var e=document.createElement("span");e.className="amber-label",e.textContent=++this.labelCount,this.fragmentCtx.appendChild(e)},renderSpanRef:function(e){var t=this,n=this.$createElement,s=e.getAttribute("span-id"),i=new p.default({el:document.createElement("span"),parent:this,render:function(){var e,i=t.spans.find((function(e){return e.id===s}));return i?(e=i.lineStart===i.lineEnd?"Line ".concat(i.lineStart):"Lines ".concat(i.lineStart," to ").concat(i.lineEnd),e+=': "'.concat(y.ellipsis(i.text,4,"word"),'"')):e="Missing reference #".concat(s),n("span",{staticClass:"amber-span-ref"},[e])}});this.fragmentCtx.appendChild(i.$el),this.components.push(i)},renderFigure:function(e){this.$createElement;var t=e.firstChild;if(t.getAttribute("src")){var n=t.getAttribute("src"),s=!1,i=n.match(/^https:\/\/edstem\.com\.au\/api\/files\/(.+)$/);i?(n="".concat(b.e,"/files/").concat(i[1]),s=!0):(i=n.match(new RegExp("^".concat(b.e,"/files/(.+)$"))))&&(n="".concat(b.e,"/files/").concat(i[1]),s=!0);var r=t.getAttribute("alt"),a=+t.getAttribute("width")||void 0,o=+t.getAttribute("height")||void 0,l=new p.default({el:document.createElement("div"),parent:this,render:function(){var e=arguments[0];return e(T,{attrs:{src:n,cors:s,alt:r,width:a,height:o}})}});l.$el.classList.add("amber-display-block","amber-display-image"),l.$el.addEventListener("click",this.onImageClick),this.fragmentCtx.appendChild(l.$el),this.components.push(l)}},renderVideo:function(e){this.$createElement;if(e.getAttribute("src")){var t=document.createElement("div");t.className="amber-display-block amber-display-video",t.style.maxWidth=e.getAttribute("width")+"px",this.fragmentCtx.appendChild(t);var n=e.getAttribute("src"),s=e.getAttribute("width"),i=+e.getAttribute("height")/+s||9/16,r=new p.default({el:document.createElement("div"),parent:this,render:function(){var e=arguments[0];return e(A.a,{attrs:{ratio:i}},[e(x.a,{attrs:{url:n}})])}});t.appendChild(r.$el),this.components.push(r)}},renderSnippet:function(e){this.$createElement;var t=document.createElement("div");t.className="amber-display-block",this.fragmentCtx.appendChild(t);var n="",s="",i=Object(c.a)(e.childNodes),r=i.find((function(e){return e.nodeType===Node.TEXT_NODE})),a=i.find((function(e){return e.nodeType===Node.ELEMENT_NODE&&"snippet-file"===e.tagName.toLowerCase()&&"code"===e.getAttribute("id")})),o=i.find((function(e){return e.nodeType===Node.ELEMENT_NODE&&"snippet-file"===e.tagName.toLowerCase()&&"schema"===e.getAttribute("id")}));if(a?n=a.textContent:r&&(n=r.textContent),o&&(s=o.textContent),this.nonInteractive){var l=document.createElement("pre");l.className="amber-el amber-pre amber-content",l.textContent=[s,n].filter(Boolean).join("\n\n").replace("\t","    "),t.appendChild(l)}else{var u="true"===e.getAttribute("runnable"),d=e.getAttribute("language"),h=new p.default({el:document.createElement("div"),parent:this,render:function(){var e=arguments[0];return e(k.a,{attrs:{code:n,schema:s,runnable:u,language:d}})}});t.appendChild(h.$el),this.components.push(h)}},renderWebSnippet:function(e){var t=document.createElement("div");t.className="amber-display-block",this.fragmentCtx.appendChild(t);var n=Object(c.a)(e.childNodes),s=n.find((function(e){return"web-snippet-file"===e.tagName&&"html"===e.getAttribute("language")})),i=n.find((function(e){return"web-snippet-file"===e.tagName&&"css"===e.getAttribute("language")})),r=n.find((function(e){return"web-snippet-file"===e.tagName&&"js"===e.getAttribute("language")})),a=new p.default({el:document.createElement("div"),parent:this,data:{html:s?s.textContent:"",css:i?i.textContent:"",js:r?r.textContent:"",layout:e.getAttribute("layout")||"compact",previewHidden:"true"===e.getAttribute("preview-hidden"),htmlHidden:!!s&&"true"===s.getAttribute("hidden"),cssHidden:!!i&&"true"===i.getAttribute("hidden"),jsHidden:!!r&&"true"===r.getAttribute("hidden")},render:function(e){return e(C.a,{props:{html:this.html,css:this.css,js:this.js,layout:this.layout,previewHidden:this.previewHidden,htmlHidden:this.htmlHidden,cssHidden:this.cssHidden,jsHidden:this.jsHidden,readonly:!0},on:{"update:html":function(e){return a.html=e},"update:css":function(e){return a.css=e},"update:js":function(e){return a.js=e}}})}});t.appendChild(a.$el),this.components.push(a)},renderFile:function(e){this.$createElement;if(e.getAttribute("url")){var t=e.getAttribute("url"),n=e.getAttribute("filename"),s=new p.default({el:document.createElement("div"),parent:this,render:function(){var e=arguments[0];return e(P,{attrs:{url:t,filename:n}})}});this.fragmentCtx.appendChild(s.$el),this.components.push(s)}},renderMath:function(e){if(this.mathEnabled&&e.textContent){var t=document.createElement("p");t.textContent="$$"+e.textContent+"$$",this.fragmentCtx.appendChild(t)}},renderLineNumbers:function(){this.renderLineNumbersThrottled.cancel();for(var e=[],t=0,n=0,s=Object(c.a)(this.$el.querySelectorAll(".amber-gutter"));n<s.length;n++){var i=s[n],r=this.renderLineNumbersForElement(i.parentNode,i,t);t+=r.lineCount,e.push.apply(e,Object(c.a)(r.spans))}this.$emit("spans",e)},renderLineNumbersForElement:function(e,t,n){for(;t.lastChild;)t.lastChild.remove();var s=document.createElement("span");s.style.display="inline-block",s.textContent="​",e.appendChild(s);var i=s.getBoundingClientRect().height;s.remove(),t.style.lineHeight=i+"px";for(var r=Math.round(e.clientHeight/i),a=0;a<r;a++){var o=n+a,l=3===o,u=document.createElement("div");u.textContent=l?"Line":o+1,(l||o%5==4)&&u.classList.add("amber-lineno-visible"),t.appendChild(u)}for(var d=[],h=e.getBoundingClientRect(),p=0,f=Object(c.a)(e.querySelectorAll(".amber-span[data-id]"));p<f.length;p++){var m=f[p],v=m.getBoundingClientRect();d.push({id:m.dataset.id,lineStart:n+Math.round((v.top-h.top)/i)+1,lineEnd:n+Math.round((v.bottom-h.top)/i),text:m.textContent})}return{lineCount:r,spans:d}},onClick:function(e){if(!("A"!==e.target.tagName||e.metaKey||e.altKey||e.ctrlKey||e.shiftKey||e.defaultPrevented||void 0!==e.button&&0!==e.button)&&y.isInternalUrl(e.target.href)){var t=this.$router.resolve(e.target.pathname+e.target.search);"404"!==t.route.name&&t.route.matched.length&&(e.preventDefault(),this.$router.push(e.target.pathname+e.target.search+e.target.hash))}}})},z=(n("KvuT"),Object(E.a)(U,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"amber-display",class:e.cssClass,on:{click:e.onClick}},[e.previewVisible?n("Preview",{attrs:{items:e.previewItems,index:e.previewIndex},on:{"update:index":function(t){e.previewIndex=t},close:e.onPreviewClose}}):e._e()],1)}),[],!1,null,null,null));t.a=z.exports},lyLl:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("qePV"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("sEfC"),l=n.n(o),c=n("L2JU"),u=n("BtCt"),d=n("/Yj0"),h=n("LA8e");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m,v={name:"Slide",props:{slideId:{type:Number,required:!0}},computed:f({},Object(c.c)("lesson",["lesson","slide","slideIndex"]),{component:function(){return h.a[this.slide.type]}}),watch:{slideId:"update"},created:function(){this.viewSlide=l()(this.viewSlide,1e3),this.update()},destroyed:function(){this.setSlideId(null),this.viewSlide.cancel()},methods:f({},Object(c.b)("lesson",{loadSlide:u.a.LOAD_SLIDE,viewSlide:u.a.VIEW_SLIDE}),{},Object(c.d)("lesson",{setSlideId:u.c.SET_SLIDE_ID}),{update:(m=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.loadSlide(this.slideId);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),d.b({type:"error",text:"Could not download slide."}),e.abrupt("return");case 9:this.viewSlide(),this.$emit("updated");case 11:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(){return m.apply(this,arguments)})})},b=n("KHd+"),g=Object(b.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.slide?n(e.component,{tag:"component",attrs:{lesson:e.lesson,slide:e.slide},on:{completed:function(t){return e.$emit("completed",t)},next:function(t){return e.$emit("next",t)}}}):e._e()}),[],!1,null,null,null);t.default=g.exports},"m/JK":function(e,t,n){"use strict";var s=n("wW/4");n.n(s).a},m8st:function(e,t,n){},mBO2:function(e,t,n){},mBgw:function(e,t,n){},mCHH:function(e,t,n){"use strict";var s=n("0cbp");n.n(s).a},"mEA/":function(e,t,n){"use strict";var s=n("NTVx");n.n(s).a},mEIf:function(e,t,n){"use strict";var s=n("p/un");n.n(s).a},mGP1:function(e,t,n){},"mI+f":function(e,t,n){},mOlB:function(e,t,n){},mQpL:function(e,t,n){"use strict";var s=n("tm+e");n.n(s).a},mR7k:function(e,t,n){},mWS5:function(e,t,n){"use strict";var s=n("yVQn");n.n(s).a},ma8F:function(e,t,n){"use strict";n.r(t);var s=n("VYah"),i=n("YxxY"),r=n("ltWs"),a=n("gA4q"),o=n("/jHr"),l={name:"ChallengeSolution",components:{Split:s.a,SplitPanel:i.a,AmberDisplay:r.a,ChallengeWorkspace:a.a},props:{challenge:{type:Object,required:!0},password:{type:String,default:null},ipHash:{type:String,default:null},shortcutKeysDisabled:{type:Boolean,default:!1}},data:function(){return{splitPanelExplanationFrac:1,splitPanelWorkspaceFrac:2}},computed:{hasExplanation:function(){return!(!this.challenge.explanation||o.c(this.challenge.explanation))}}},c=(n("8U1b"),n("KHd+")),u=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Split",{staticClass:"chasol-split",attrs:{orientation:"horizontal","persist-id":"challengeSolution"}},[e.hasExplanation?n("SplitPanel",{key:"explanation",staticClass:"chasol-split-panel-explanation",attrs:{frac:e.splitPanelExplanationFrac,collapsable:"","collapsed-text":"Explanation"},on:{"update:frac":function(t){e.splitPanelExplanationFrac=t}}},[n("AmberDisplay",{staticClass:"chasol-explanation",attrs:{value:e.challenge.explanation}})],1):e._e(),e._v(" "),n("SplitPanel",{key:"workspace",attrs:{frac:e.splitPanelWorkspaceFrac,collapsable:"","collapsed-text":"Workspace"},on:{"update:frac":function(t){e.splitPanelWorkspaceFrac=t}}},[n("ChallengeWorkspace",{staticClass:"chasol-workspace",attrs:{"persist-id":"challengeSolutionWorkspace","connect-type":"solution-view","connect-param":e.challenge.id,challenge:e.challenge,password:e.password,"ip-hash":e.ipHash,"shortcut-keys-disabled":e.shortcutKeysDisabled}})],1)],1)}),[],!1,null,null,null);t.default=u.exports},mc3f:function(e,t,n){"use strict";var s=n("K4iU");n.n(s).a},merv:function(e,t,n){"use strict";var s=n("hVQ+");n.n(s).a},mfI4:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("L2JU"),l=n("NC1X"),c=n("xtk+"),u=n("4K9I"),d=n("Edju"),h=n("TdcQ"),p=n("/Yj0");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var m,v={inject:["userApi"],components:{Spinner:l.a,EdInput:c.a,EdButton:u.a,FormLayout:d.a,FormLayoutRow:h.a},data:function(){return{loading:!1,passwordCurrent:null,passwordNew:null,passwordRetype:null}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.e)(["user"])),methods:{changePassword:(m=Object(r.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.user.has_password||this.passwordCurrent){e.next=4;break}return p.b({type:"error",text:"Enter your current password."}),this.$refs.passwordCurrent.$el.focus(),e.abrupt("return");case 4:if(this.passwordNew){e.next=8;break}return p.b({type:"error",text:"Enter your new password."}),this.$refs.passwordNew.$el.focus(),e.abrupt("return");case 8:if(this.passwordRetype){e.next=12;break}return p.b({type:"error",text:"Retype your new password."}),this.$refs.passwordRetype.$el.focus(),e.abrupt("return");case 12:if(this.passwordNew===this.passwordRetype){e.next=18;break}return p.b({type:"error",text:"Your new passwords do not match."}),this.passwordNew=null,this.passwordRetype=null,this.$refs.passwordNew.$el.focus(),e.abrupt("return");case 18:return this.loading=!0,e.prev=19,e.next=22,this.userApi.changePassword(this.user.id,this.passwordCurrent,this.passwordNew);case 22:e.next=28;break;case 24:return e.prev=24,e.t0=e.catch(19),400===e.t0.status&&e.t0.data&&e.t0.data.message&&/Current password is invalid/.test(e.t0.data.message)?(p.b({type:"error",text:"Your current password is incorrect."}),this.passwordCurrent=null,this.$nextTick((function(){return t.$refs.passwordCurrent.$el.focus()}))):p.b({type:"error",text:"Unable to change password."}),e.abrupt("return");case 28:return e.prev=28,this.loading=!1,e.finish(28);case 31:p.b({type:"success",text:"Password changed."}),this.loading=!1,this.passwordCurrent=null,this.passwordNew=null,this.passwordRetype=null,this.user.has_password=!0;case 37:case"end":return e.stop()}}),e,this,[[19,24,28,31]])}))),function(){return m.apply(this,arguments)})}},b=(n("EEGP"),n("KHd+")),g=Object(b.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{staticClass:"settings-heading"},[e._v(e._s(e.user.has_password?"Change":"Add")+" Password")]),e._v(" "),n("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.changePassword(t)}}},[n("FormLayout",{staticClass:"setpass-layout"},[e.user.has_password?n("FormLayoutRow",{attrs:{label:"Current password:"}},[n("EdInput",{ref:"passwordCurrent",attrs:{type:"password",autocomplete:"current-password",disabled:e.loading},model:{value:e.passwordCurrent,callback:function(t){e.passwordCurrent=t},expression:"passwordCurrent"}})],1):e._e(),e._v(" "),n("FormLayoutRow",{attrs:{label:e.user.has_password?"New password:":"Password:"}},[n("EdInput",{ref:"passwordNew",attrs:{type:"password",autocomplete:"new-password",disabled:e.loading},model:{value:e.passwordNew,callback:function(t){e.passwordNew=t},expression:"passwordNew"}})],1),e._v(" "),n("FormLayoutRow",{attrs:{label:"Retype password:"}},[n("EdInput",{ref:"passwordRetype",attrs:{type:"password",autocomplete:"new-password",disabled:e.loading},model:{value:e.passwordRetype,callback:function(t){e.passwordRetype=t},expression:"passwordRetype"}})],1),e._v(" "),n("FormLayoutRow",[n("div",{staticClass:"settings-actions"},[e.loading?n("Spinner",{staticClass:"settings-spinner"}):e._e(),e._v(" "),n("EdButton",{attrs:{type:"submit",disabled:e.loading}},[e._v(e._s(e.user.has_password?"Change":"Add")+" Password")])],1)])],1)],1)])}),[],!1,null,null,null);t.default=g.exports},mhJO:function(e,t,n){"use strict";var s=n("yFn6");n.n(s).a},mmZQ:function(e,t,n){"use strict";n("pNMO"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("rePB"),i=n("vF1J");function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var o={functional:!0,render:function(e,t){var n=a({},t.data,{scopedSlots:a({highlight:function(t){return e("span",{class:"search-highlight-basic"},[t])}},t.scopedSlots)});return e(i.a,n)}},l=(n("gQHg"),n("KHd+")),c=Object(l.a)(o,void 0,void 0,!1,null,null,null);t.a=c.exports},mn5C:function(e,t,n){"use strict";var s=n("jdow");n.n(s).a},msI1:function(e,t,n){"use strict";var s=n("hVI8");n.n(s).a},mtps:function(e,t,n){},mx2J:function(e,t,n){"use strict";n("qePV");var s={methods:{scrollDetail:function(e){this.$refs.detail.scrollTop=e}}},i=(n("RO+U"),n("KHd+")),r=Object(i.a)(s,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"nav-master-detail"},[t("div",{staticClass:"navmd-side-nav"},[this._t("side")],2),this._v(" "),t("div",{ref:"detail",staticClass:"navmd-side-content"},[this._t("default")],2)])}),[],!1,null,null,null).exports,a=(n("pNMO"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP"),n("rePB"));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var l={functional:!0,render:function(e,t){return e("nav",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.data,{staticClass:["nav-list",t.data.staticClass].filter(Boolean).join(" ")}),[t.children])}},c=Object(i.a)(l,void 0,void 0,!1,null,null,null).exports;function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var d={functional:!0,render:function(e,t){return e("div",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.data,{staticClass:["nav-list-group",t.data.staticClass].filter(Boolean).join(" ")}),[e("div",{staticClass:"nav-list-group-inner"},[t.children])])}},h=(n("DdLw"),Object(i.a)(d,void 0,void 0,!1,null,null,null).exports);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m={functional:!0,props:{selected:{type:Boolean,default:!1},route:{type:null,default:void 0}},render:function(e,t){var n=f({},t.data,{props:f({},t.props),staticClass:["nav-list-button",t.data.staticClass].filter(Boolean).join(" "),class:[t.data.class,{selected:t.props.selected}]});return t.props.route&&(n.props.to=t.props.route),e(t.props.route?"router-link":"button",n,[t.children])}},v=(n("dlxV"),Object(i.a)(m,void 0,void 0,!1,null,null,null).exports),b=n("syKy"),g=n("bycc"),y=n("5lBx"),w={components:{NavMasterDetail:r,NavList:c,NavListGroup:h,NavListButton:v,TableView:b.a,TableViewSection:g.a,TableViewCell:y.a},props:{sections:{type:Array,default:function(){return[]}},compact:{type:Boolean,default:!1},rootPageVisible:{type:Boolean,default:!1},detailMaxWidth:{type:Number,default:600}},methods:{scrollDetail:function(e){this.$refs.masterDetail&&this.$refs.masterDetail.scrollDetail(e)}}},_=(n("dazs"),Object(i.a)(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"settings-page"},[e.compact?[e.rootPageVisible?n("TableView",{staticClass:"setpg-table"},e._l(e.sections,(function(t,s){return n("TableViewSection",{key:s},e._l(t,(function(t){return n("TableViewCell",{key:t.route,attrs:{label:t.title,accessory:"disclosure",selectable:""},on:{click:function(n){return e.$router.push({name:t.route})}}})})),1)})),1):n("div",{staticClass:"setpg-table-detail"},[e._t("default")],2)]:n("NavMasterDetail",{ref:"masterDetail",staticClass:"setpg-nav",scopedSlots:e._u([{key:"side",fn:function(){return[n("NavList",{staticClass:"setpg-navlist"},e._l(e.sections,(function(t,s){return n("NavListGroup",{key:s},e._l(t,(function(t){return n("NavListButton",{key:t.route,attrs:{route:{name:t.route},selected:e.$route.name===t.route}},[e._v("\n\t\t\t\t\t\t"+e._s(t.title)+"\n\t\t\t\t\t")])})),1)})),1)]},proxy:!0}],null,!1,3144360711)},[e._v(" "),n("div",{staticClass:"setpg-detail",style:{width:e.detailMaxWidth+"px"}},[e._t("default")],2)])],2)}),[],!1,null,null,null));t.a=_.exports},"n+Vu":function(e,t,n){"use strict";var s=n("LV3f");n.n(s).a},n11X:function(e,t,n){},n1BI:function(e,t,n){"use strict";var s=n("imey");n.n(s).a},nAm1:function(e,t,n){"use strict";var s=n("NEGH");n.n(s).a},nGoB:function(e,t,n){"use strict";var s=n("w60R");n.n(s).a},nQyZ:function(e,t,n){},nV0h:function(e,t,n){},nVGi:function(e,t,n){"use strict";n("qePV");var s=n("sEfC"),i=n.n(s),r=n("Kw5r"),a=n("9Arg"),o={props:{active:{type:Boolean,default:!1},element:{type:Element,default:void 0},action:{type:String,default:"off"},anchorX:{type:Number,default:.5},anchorY:{type:Number,default:1},delayOn:{type:Number,default:0},delayOff:{type:Number,default:0},disabled:{type:Boolean,default:!1}},data:function(){return{vnode:null,mouseX:0,mouseY:0,bounds:{left:0,top:0,width:0,height:0}}},computed:{pos:function(){return{x:this.bounds.left+this.bounds.width*this.anchorX,y:this.bounds.top+this.bounds.height*this.anchorY}}},watch:{delayOn:{immediate:!0,handler:function(e){this.triggerOnDebounced&&this.triggerOnDebounced.cancel(),this.triggerOnDebounced=i()(this.triggerOn,e)}},delayOff:{immediate:!0,handler:function(e){this.triggerOffDebounced&&this.triggerOffDebounced.cancel(),this.triggerOffDebounced=i()(this.triggerOff,e)}}},created:function(){var e=this,t=this.$createElement;this.container=new r.default({parent:this,render:function(){return t("div",[e.vnode])}}),this.container.$mount()},mounted:function(){var e=this;this.$nextTick((function(){return e.updateBounds()})),this.disposable=a.f(window,"resize",(function(){return e.updateBounds()}))},updated:function(){var e=this;this.$nextTick((function(){return e.updateBounds()}))},destroyed:function(){this.triggerOnDebounced.cancel(),this.triggerOffDebounced.cancel(),this.container.$destroy(),this.disposable&&this.disposable.dispose()},methods:{updateBounds:function(){var e=(this.element||this.$el).getBoundingClientRect();this.bounds.left=e.left,this.bounds.top=e.top,this.bounds.width=e.width,this.bounds.height=e.height},triggerOn:function(e){this.disabled||(this.mouseX=e.clientX+window.pageXOffset,this.mouseY=e.clientY+window.pageYOffset,this.$emit("update:active",!0))},triggerOff:function(){this.$emit("update:active",!1)},trigger:function(e,t){if(null==t)switch(t=!1,this.action){case"show":t=!0;break;case"hide":t=!1;break;case"toggle":t=!this.active}t?(this.triggerOffDebounced.cancel(),this.active||this.triggerOnDebounced(e)):(this.triggerOnDebounced.cancel(),this.active&&this.triggerOffDebounced())}},render:function(){if(this.vnode=null,this.active&&this.$scopedSlots.target){var e=this.$scopedSlots.target({mouseX:this.mouseX,mouseY:this.mouseY,targetLeft:this.bounds.left,targetTop:this.bounds.top,targetWidth:this.bounds.width,targetHeight:this.bounds.height,x:this.pos.x,y:this.pos.y}),t=e&&e[0];t&&(t._isVue=!0,this.vnode=t)}if(this.$scopedSlots.trigger){var n=this.active?{"data-trigger-active":""}:{};return this.$scopedSlots.trigger({trigger:this.trigger,attrs:n})}}},l=n("KHd+"),c=Object(l.a)(o,void 0,void 0,!1,null,null,null);t.a=c.exports},nkcA:function(e,t,n){"use strict";var s=n("Qk0s");n.n(s).a},nlyi:function(e,t,n){},nnuT:function(e,t,n){},nsxv:function(e){e.exports=JSON.parse('[{"value":"😀","name":"grinning face"},{"value":"😂","name":"grinning face with tears of joy"},{"value":"😊","name":"grinning face with squinting eyes"},{"value":"🙂","name":"slightly smiling face"},{"value":"😍","name":"grinning face with heart-shaped eyes"},{"value":"😛","name":"grinning face with stuck-out tongue"},{"value":"🤪","name":"goofy face"},{"value":"🤨","name":"face with raised eyebrow"},{"value":"😎","name":"smiling face with sunglasses"},{"value":"🙁","name":"slightly frowning face"},{"value":"😢","name":"crying face"},{"value":"😭","name":"loudly crying face"},{"value":"😡","name":"pouting face"},{"value":"😱","name":"face screaming in fear"},{"value":"🤮","name":"vomiting"},{"value":"👍","name":"thumbs up"},{"value":"👎","name":"thumbs down"}]')},nu3u:function(e,t,n){"use strict";var s=n("WmPt"),i=n("qJ5K"),r={components:{Icon:s.a,FormattedDisplay:i.a},props:{value:{type:String,required:!0},formatted:{type:Boolean,required:!0},spans:{type:Array,default:function(){return[]}}}},a=(n("CHDK"),n("KHd+")),o=Object(a.a)(r,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"quiz-explanation"},[t("h2",{staticClass:"quiz-explanation-heading"},[t("Icon",{attrs:{icon:"info"}}),this._v("\n\t\tExplanation\n\t")],1),this._v(" "),t("FormattedDisplay",{attrs:{formatted:this.formatted,value:this.value,spans:this.spans}})],1)}),[],!1,null,null,null);t.a=o.exports},nvE8:function(e,t,n){"use strict";var s=n("YcB/");n.n(s).a},nxW9:function(e,t,n){},"o+Ch":function(e,t,n){"use strict";var s=n("m8st");n.n(s).a},"o+Su":function(e,t,n){"use strict";n.r(t);n("pNMO"),n("4Brf"),n("0oug"),n("ma9I"),n("TeQF"),n("yXV3"),n("4mDm"),n("2B1R"),n("+2oP"),n("ToJy"),n("pDQq"),n("Tskq"),n("qePV"),n("zKZe"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("5s+n"),n("p532"),n("inlA"),n("PKPk"),n("Rm1S"),n("EnZy"),n("LKBx"),n("FZtP"),n("3bBZ");var s=n("KQm4"),i=n("o0o1"),r=n.n(i),a=(n("ls82"),n("HaE+")),o=n("rePB"),l=n("sEfC"),c=n.n(l),u=n("L2JU"),d=(n("uqXc"),n("kvrn")),h=n.n(d),p=n("1OyB"),f=n("vuIU"),m=n("md7G"),v=n("foSv"),b=n("JX7q"),g=n("Ji7U"),y=n("43W2"),w=n("q6QK"),_=n("BI+k"),k=n("+KDJ"),C=n("hSdx"),x=n("HYbr"),j={components:{StatusMessage:y.a,Codemirror:w.a},props:{session:{type:Object,default:null},settings:{type:Object,required:!0},errorMessage:{type:String,default:null},scrollX:{type:Number,default:0},scrollY:{type:Number,default:0},autofocus:{type:Boolean,default:!1}},methods:{convertIndentation:function(e){this.$refs.codemirror&&this.$refs.codemirror.convertIndentation(e)}}},O=function(e){function t(e,n){var s;return Object(p.a)(this,t),(s=Object(m.a)(this,Object(v.a)(t).call(this))).handleCursorPos=s.handleCursorPos.bind(Object(b.a)(s)),s.handleScrollX=s.handleScrollX.bind(Object(b.a)(s)),s.handleScrollY=s.handleScrollY.bind(Object(b.a)(s)),s.handleSoftTabs=s.handleSoftTabs.bind(Object(b.a)(s)),s.handleTabSize=s.handleTabSize.bind(Object(b.a)(s)),s.workspace=e,s.path=n,s.session=null,s.cursorPos=null,s.scrollX=0,s.scrollY=0,s.softTabs=null,s.tabSize=null,s.saving=!1,s.savingTimeout=null,s.openingSoft=!1,s.errorMessage=null,s}return Object(g.a)(t,e),Object(f.a)(t,[{key:"handleCursorPos",value:function(e){this.cursorPos=e}},{key:"handleScrollX",value:function(e){this.scrollX=e}},{key:"handleScrollY",value:function(e){this.scrollY=e}},{key:"handleSoftTabs",value:function(e){this.softTabs=e}},{key:"handleTabSize",value:function(e){this.tabSize=e}},{key:"convertIndentation",value:function(e){var t=this.vnode&&this.vnode.componentInstance;t&&t.convertIndentation(e)}},{key:"render",value:function(e){var t=this,n=this.path.lastIndexOf("/"),s=this.path.slice(n+1),i=this.session&&this.session.status()===x.g;i&&!this.saving&&null===this.savingTimeout?this.savingTimeout=setTimeout((function(){t.savingTimeout=null,t.saving=!0}),2e3):!i&&this.saving&&(this.saving=!1);var r={on:{"update:cursorPos":this.handleCursorPos,"update:scrollX":this.handleScrollX,"update:scrollY":this.handleScrollY,softTabs:this.handleSoftTabs,tabSize:this.handleTabSize}};return this.vnode=e(j,h()([{attrs:{errorMessage:this.errorMessage,session:this.session,settings:this.workspace.workspaceSettings,scrollX:this.scrollX,scrollY:this.scrollY,autofocus:this.workspace.autofocus}},r])),e(_.a,{key:this.id,attrs:{title:s,tooltip:this.path,soft:this.soft,modified:!!this.session&&this.session.floating,loading:!this.session&&!this.errorMessage||this.saving,icon:C.fileFolderIcon(s,"file")}},[this.vnode])}},{key:"status",get:function(){return this.errorMessage?"Unable to open ".concat(this.path):this.session?this.path:"Opening ".concat(this.path,"...")}},{key:"soft",get:function(){return this.session?this.session.soft:this.openingSoft}}]),t}(k.b);O.description="Editor",O.fileAssociation=!0;var S=j,E=(n("6kI9"),n("KHd+")),T=(Object(E.a)(S,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pitem-code"},[e.errorMessage?n("StatusMessage",{staticClass:"pitem-code-error"},[e._v(e._s(e.errorMessage))]):e.session?n("Codemirror",{ref:"codemirror",staticClass:"pitem-code-cm",attrs:{layout:"fill",filename:e.session.path,session:e.session,readonly:e.session.readonly,settings:e.settings,"scroll-x":e.scrollX,"scroll-y":e.scrollY,autofocus:e.autofocus},on:{"update:cursorPos":function(t){return e.$emit("update:cursorPos",t)},"update:scrollX":function(t){return e.$emit("update:scrollX",t)},"update:scrollY":function(t){return e.$emit("update:scrollY",t)},softTabs:function(t){return e.$emit("softTabs",t)},tabSize:function(t){return e.$emit("tabSize",t)}}}):e._e()],1)}),[],!1,null,null,null).exports,{components:{WebPreview:n("2XLt").a},props:{autoreload:{type:Boolean,default:!1},url:{type:String,default:""}},methods:{reload:function(){this.$refs.preview.reload()}}}),I=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(m.a)(this,Object(v.a)(t).call(this))).autoreload=!0,e.path="",e.url="",e.handleUpdateAutoreload=e.handleUpdateAutoreload.bind(Object(b.a)(e)),e.handleUpdateUrl=e.handleUpdateUrl.bind(Object(b.a)(e)),e}return Object(g.a)(t,e),Object(f.a)(t,[{key:"handleUpdateAutoreload",value:function(e){this.autoreload=e}},{key:"handleUpdateUrl",value:function(e){this.url=e}},{key:"reload",value:function(){this.vnode&&this.vnode.componentInstance&&this.vnode.componentInstance.reload()}},{key:"render",value:function(e){var t={on:{"update:autoreload":this.handleUpdateAutoreload,"update:url":this.handleUpdateUrl}};return this.vnode=e(T,h()([{attrs:{autoreload:this.autoreload,url:this.url}},t])),e(_.a,{key:this.id,attrs:{title:"Web Preview",tooltip:this.url,icon:"globe"}},[this.vnode])}},{key:"status",get:function(){return this.url}}]),t}(k.b);I.description="Web Preview";var D=T,P=(n("CzYW"),Object(E.a)(D,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("WebPreview",{ref:"preview",staticClass:"pitem-web-preview",attrs:{autoreload:e.autoreload,url:e.url},on:{"update:autoreload":function(t){return e.$emit("update:autoreload",t)},"update:url":function(t){return e.$emit("update:url",t)}}})}),[],!1,null,null,null).exports,n("x0AG"),{components:{Preview:n("oJzX").a},props:{url:{type:String,required:!0}},data:function(){return{previewVisible:!1,previewUrls:[],previewIndex:0}},computed:{previewItems:function(){return this.previewUrls.map((function(e){return{type:"image",url:e}}))}},methods:{showPreview:function(){var e=this;this.previewVisible=!0,this.previewUrls=Object(s.a)(document.querySelectorAll(".pitem-image-image")).map((function(e){return e.src})),this.previewIndex=this.previewUrls.findIndex((function(t){return decodeURI(t)===e.url}))},hidePreview:function(){this.previewVisible=!1}}}),A=function(e){function t(e,n){var s;return Object(p.a)(this,t),(s=Object(m.a)(this,Object(v.a)(t).call(this))).path=e,s.url=n,s}return Object(g.a)(t,e),Object(f.a)(t,[{key:"render",value:function(e){var t=C.splitPath(this.path).filename;return e(_.a,{key:this.id,attrs:{title:t,tooltip:this.path,icon:"image"}},[e(P,{attrs:{url:this.url}})])}},{key:"status",get:function(){return this.path}}]),t}(k.b);A.description="Image",A.fileAssociation=!0;var N=P,R=(n("J5OO"),Object(E.a)(N,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pitem-image"},[n("div",{staticClass:"pitem-image-container"},[n("img",{staticClass:"pitem-image-image",attrs:{src:e.url},on:{click:e.showPreview}})]),e._v(" "),e.previewVisible?n("Preview",{attrs:{items:e.previewItems,index:e.previewIndex},on:{"update:index":function(t){e.previewIndex=t},close:e.hidePreview}}):e._e()],1)}),[],!1,null,null,null).exports,{components:{EmbedEx:n("0gpV").a},props:{url:{type:String,required:!0}}}),M=function(e){function t(e,n){var s;return Object(p.a)(this,t),(s=Object(m.a)(this,Object(v.a)(t).call(this))).path=e,s.url=n,s}return Object(g.a)(t,e),Object(f.a)(t,[{key:"render",value:function(e){var t=C.splitPath(this.path).filename;return e(_.a,{key:this.id,attrs:{title:t,tooltip:this.path,icon:"pdf"}},[e(R,{attrs:{url:this.url}})])}},{key:"status",get:function(){return this.path}}]),t}(k.b);M.description="PDF",M.fileAssociation=!0;var L=R,F=(n("Qe5X"),Object(E.a)(L,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"pitem-pdf"},[t("EmbedEx",{staticClass:"pitem-pdf-embed",attrs:{src:this.url,type:"application/pdf"}})],1)}),[],!1,null,null,null).exports,n("NC1X")),B=n("oDEV"),q={components:{Spinner:F.a,FadeTransition:B.a},inheritAttrs:!1,props:{src:{type:String,default:null}},data:function(){return{loading:!0,iframeKey:0}},watch:{src:function(){this.loading=!0},loading:{immediate:!0,handler:function(e){this.$emit("loading",e)}}},methods:{onLoad:function(){this.loading=!1},onError:function(){this.loading=!1},reload:function(){this.iframeKey++},getContentWindow:function(){return this.$refs.iframe.contentWindow}}},$=(n("r17E"),Object(E.a)(q,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"iframe-loader"},[n("iframe",e._b({key:e.iframeKey,ref:"iframe",staticClass:"ifl-iframe",attrs:{src:e.src},on:{load:e.onLoad,error:e.onError}},"iframe",e.$attrs,!1)),e._v(" "),n("FadeTransition",[e.loading?n("Spinner",{staticClass:"ifl-spinner"}):e._e()],1)],1)}),[],!1,null,null,null).exports),U={components:{IframeLoader:$},props:{url:{type:String,required:!0}},methods:{reload:function(){this.$refs.iframe.reload()}}},z=function(e){function t(e,n){var s;return Object(p.a)(this,t),(s=Object(m.a)(this,Object(v.a)(t).call(this))).handleLoading=s.handleLoading.bind(Object(b.a)(s)),s.path=e,s.url=n,s.loading=!1,s}return Object(g.a)(t,e),Object(f.a)(t,[{key:"handleLoading",value:function(e){this.loading=e}},{key:"render",value:function(e){return e(_.a,{key:this.id,attrs:{title:"Jupyter",icon:"jupyter",loading:this.loading}},[e(U,{attrs:{url:this.url},on:{loading:this.handleLoading}})])}}]),t}(k.b);z.description="Jupyter",z.fileAssociation=!0;var V=U,H=(n("2L/q"),Object(E.a)(V,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pitem-jup"},[e.url?n("IframeLoader",{ref:"iframe",staticClass:"pitem-jup-iframe",attrs:{src:e.url,sandbox:"allow-scripts allow-modals allow-popups allow-forms allow-same-origin"},on:{loading:function(t){return e.$emit("loading",t)}}}):e._e(),e._v(" "),n("div",{staticClass:"iframe-blocker",staticStyle:{display:"none"}})],1)}),[],!1,null,null,null).exports,{props:{url:{type:String,required:!0}},methods:{reload:function(){this.$refs.iframe.reload()}}}),W=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(m.a)(this,Object(v.a)(t).call(this))).handleLoading=e.handleLoading.bind(Object(b.a)(e)),e.url="",e.loading=!1,e}return Object(g.a)(t,e),Object(f.a)(t,[{key:"handleLoading",value:function(e){this.loading=e}},{key:"render",value:function(e){return e(_.a,{key:this.id,attrs:{title:"RStudio",icon:"r"}},[e(H,{attrs:{url:this.url},on:{loading:this.handleLoading}})])}}]),t}(k.b);W.description="RStudio";var Q=H,K=(n("XA15"),Object(E.a)(Q,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pitem-rstudio"},[e.url?n("IframeLoader",{ref:"iframe",staticClass:"pitem-rstudio-iframe",attrs:{src:e.url,sandbox:"allow-scripts allow-modals allow-popups allow-forms allow-same-origin"},on:{loading:function(t){return e.$emit("loading",t)}}}):e._e(),e._v(" "),n("div",{staticClass:"iframe-blocker",staticStyle:{display:"none"}})],1)}),[],!1,null,null,null).exports,n("sce4")),Y=n("YQsj"),G={components:{Terminal:Y.a},props:{readonly:{type:Boolean,default:!1},settings:{type:K.a,required:!0}}},X=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(m.a)(this,Object(v.a)(t).call(this))).handleTitle=n.handleTitle.bind(Object(b.a)(n)),n.handleInput=n.handleInput.bind(Object(b.a)(n)),n.handleResized=n.handleResized.bind(Object(b.a)(n)),n.workspace=e,n.loading=!1,n.terminalId=null,n.terminalTitle="",n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"handleTitle",value:function(e){this.terminalTitle=e}},{key:"handleInput",value:function(e){this.workspace.onTerminalInput(this.terminalId,e)}},{key:"handleResized",value:function(){this.workspace.onTerminalResized(this.terminalId)}},{key:"render",value:function(e){this.vnode=e(G,{attrs:{readonly:this.workspace.ctrl.readonly,settings:this.workspace.workspaceSettings},on:{title:this.handleTitle,input:this.handleInput,resized:this.handleResized}});var t=this.terminalTitle||"Terminal";return e(_.a,{key:this.id,attrs:{title:t,loading:this.loading,icon:"terminal"}},[this.vnode])}},{key:"terminal",get:function(){return this.vnode&&this.vnode.componentInstance&&this.vnode.componentInstance.$refs.terminal}},{key:"status",get:function(){return this.terminalTitle}}]),t}(k.b);X.description="Terminal";var J=G,Z=(n("8xJi"),Object(E.a)(J,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pitem-term"},[n("Terminal",{ref:"terminal",staticClass:"pitem-term-terminal",attrs:{readonly:e.readonly,sounds:e.settings.get("terminalSounds")},on:{title:function(t){return e.$emit("title",t)},input:function(t){return e.$emit("input",t)},resized:function(t){return e.$emit("resized",t)}}})],1)}),[],!1,null,null,null).exports,n("BkRI")),ee=n.n(Z),te=n("5/Cn"),ne=n("/Yj0"),se=n("clw3"),ie=n("Pa8A"),re=n("4cYw");function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var oe,le,ce={directives:{Tooltip:ie.a},components:{EdSelect:re.a,Codemirror:w.a},props:{settings:{type:K.a,required:!0},snippet:{type:Object,required:!0},readonly:{type:Boolean,default:!1}},inject:["snippetApi"],data:function(){return{fileTypes:C.fileTypes,model:null}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(u.e)(["course"]),{languageLabel:function(){return C.fileTypes[this.model.language]}}),watch:{snippet:{immediate:!0,handler:"setModel"}},methods:{setModel:function(){this.model=this.snippet?ee()(this.snippet):null},save:(le=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.model.id){e.next=7;break}return e.next=4,this.snippetApi.updateSnippet(this.model.id,this.model);case 4:this.model=e.sent,e.next=10;break;case 7:return e.next=9,this.snippetApi.createSnippet(this.course.id,this.model);case 9:this.model=e.sent;case 10:e.next=17;break;case 12:return e.prev=12,e.t0=e.catch(0),e.next=16,te.a({icon:"error",title:"Unable to save snippet"});case 16:return e.abrupt("return");case 17:ne.b({type:"success",text:"Snippet saved."}),this.$emit("saved",this.model);case 19:case"end":return e.stop()}}),e,this,[[0,12]])}))),function(){return le.apply(this,arguments)}),destroy:(oe=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.model.id){e.next=16;break}return e.next=3,te.b({title:"Delete snippet?",text:"This cannot be undone.",icon:"warning",primaryAction:"Delete"});case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,this.snippetApi.destroySnippet(this.model.id);case 8:e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(5),e.next=14,te.a({icon:"error",title:"Unable to delete snippet"});case 14:return e.abrupt("return");case 15:ne.b({type:"success",text:"Snippet deleted."});case 16:this.$emit("deleted");case 17:case"end":return e.stop()}}),e,this,[[5,10]])}))),function(){return oe.apply(this,arguments)})}},ue=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(m.a)(this,Object(v.a)(t).call(this))).emitSaved=e.emitSaved.bind(Object(b.a)(e)),e.emitDeleted=e.emitDeleted.bind(Object(b.a)(e)),e.emitter=new se.c,e.workspace=null,e.snippet=null,e}return Object(g.a)(t,e),Object(f.a)(t,[{key:"render",value:function(e){return e(_.a,{key:this.id,attrs:{title:this.name,icon:"cut"}},[e(ce,{attrs:{settings:this.workspace.workspaceSettings,snippet:this.snippet,readonly:!this.workspace.isStaff},on:{saved:this.emitSaved,deleted:this.emitDeleted}})])}},{key:"onSaved",value:function(e){return this.emitter.on("saved",e)}},{key:"onDeleted",value:function(e){return this.emitter.on("deleted",e)}},{key:"emitSaved",value:function(e){this.emitter.emit("saved",e)}},{key:"emitDeleted",value:function(e){this.emitter.emit("deleted",e)}},{key:"name",get:function(){return this.snippet&&this.snippet.name||"Untitled snippet"}},{key:"status",get:function(){return this.name}}]),t}(k.b);ue.description="Snippet";var de=ce,he=(n("0/gM"),Object(E.a)(de,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pitem-snippet"},[n("div",{staticClass:"pitem-snippet-head"},[n("div",{staticClass:"pitem-snippet-head-item fill"},[n("input",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Snippet Name",expression:"'Snippet Name'"},{name:"model",rawName:"v-model",value:e.model.name,expression:"model.name"}],staticClass:"pitem-snippet-name",attrs:{type:"text",placeholder:"Snippet Name",readonly:e.readonly},domProps:{value:e.model.name},on:{input:function(t){t.target.composing||e.$set(e.model,"name",t.target.value)}}})]),e._v(" "),n("div",{staticClass:"pitem-snippet-head-item"},[e.readonly?n("div",{staticClass:"pitem-snippet-lang-label"},[e._v(e._s(e.languageLabel))]):n("EdSelect",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Language",expression:"'Language'"}],staticClass:"pitem-snippet-lang",model:{value:e.model.language,callback:function(t){e.$set(e.model,"language",t)},expression:"model.language"}},e._l(e.fileTypes,(function(t,s){return n("option",{key:s,domProps:{value:s}},[e._v("\n\t\t\t\t\t"+e._s(t)+"\n\t\t\t\t")])})),0)],1),e._v(" "),n("div",{staticClass:"pitem-snippet-head-item"},[e.readonly?e._e():n("a",{staticClass:"pitem-snippet-btn",on:{click:e.save}},[e._v("Save")])]),e._v(" "),n("div",{staticClass:"pitem-snippet-head-item"},[e.readonly?e._e():n("a",{staticClass:"pitem-snippet-btn",on:{click:e.destroy}},[e._v("Delete")])])]),e._v(" "),n("Codemirror",{staticClass:"pitem-snippet-codemirror",attrs:{layout:"fill",filename:"."+e.model.language,settings:e.settings,readonly:e.readonly,"line-numbers":""},model:{value:e.model.content,callback:function(t){e.$set(e.model,"content",t)},expression:"model.content"}})],1)}),[],!1,null,null,null).exports,n("wZ/5"),n("rOQg"),n("XMab"),n("moxL"),n("qXVe"),n("c162"),n("waxf"),n("0TkE"),n("Onu3"),n("1dYe"),n("gvgV"),n("6R/c"),n("YL0P"),n("X5Zq"),n("MoCz"),n("P8wP"),n("ypFw"),n("JaFt"),n("zSZm"),n("KVSy"),n("ZJ55"),n("IZzc"),n("s5qe"),n("cvf0"),function(){function e(){Object(p.a)(this,e),this.arrays=[],this.length=0}return Object(f.a)(e,[{key:"push",value:function(e){this.arrays.push(new Uint8Array(e)),this.length+=e.byteLength}},{key:"shift",value:function(e){for(var t=new ArrayBuffer(e),n=new Uint8Array(t),s=0;s<e;){var i=this.arrays[0];s+i.byteLength>e?(n.set(i.subarray(0,e-s),s),this.arrays[0]=i.subarray(e-s),s=e):(n.set(i,s),this.arrays.shift(),s+=i.byteLength)}return this.length-=e,t}}]),e}()),pe=function(){function e(t){Object(p.a)(this,e),this.buffer=new he,this.queue=Promise.resolve(),this.readResolve=null,this.readReject=null,this.readLength=0,this.ws=new WebSocket(t),this.ws.binaryType="arraybuffer",this.ws.onmessage=this.onWsMessage.bind(this),this.ws.onclose=this.onWsClose.bind(this)}return Object(f.a)(e,[{key:"close",value:function(){this.ws&&(this.ws.close(),this.ws.onmessage=null,this.ws.onclose=null,this.ws=null,this.readReject&&this.readReject(new Error("Websocket closed")))}},{key:"onWsMessage",value:function(e){this.buffer.push(e.data),this.flushOnce()}},{key:"onWsClose",value:function(){this.close()}},{key:"write",value:function(e){if(!this.ws)throw new Error("Websocket closed");this.ws.send(e)}},{key:"read",value:function(e){var t=this;return this.ws?(this.queue=this.queue.then((function(){var n=new Promise((function(n,s){t.readResolve=n,t.readReject=s,t.readLength=e})),s=function(){t.readResolve=null,t.readReject=null,t.readLength=0};return n.then(s,s),t.flushOnce(),n})),this.queue):Promise.reject(new Error("Websocket closed"))}},{key:"flushOnce",value:function(){this.readResolve&&this.buffer.length>=this.readLength&&this.readResolve(this.buffer.shift(this.readLength))}}]),e}(),fe=(n("yyme"),n("+ywr"),n("16wW")),me=n.n(fe),ve=(n("hMMk"),new Map([[8,65288],[9,65289],[13,65293],[27,65307],[46,65535],[37,65361],[38,65362],[39,65363],[40,65364],[16,65505],[17,65507],[91,65511],[18,65513]]));var be,ge,ye,we=(be=new ArrayBuffer(2),ge=new DataView(be),ye=new Uint16Array(be),ge.setUint16(0,1,!0),1===ye[0]),_e=function(){function e(t){Object(p.a)(this,e),this.emitter=new se.c,this.channel=t,this.name="",this.initialized=!1,this.framebufferWidth=0,this.framebufferHeight=0,this.pixelFormat={bitsPerPixel:0,bytesPerPixel:0,depth:0,bigEndian:!1,truecolor:!1,redMax:0,greenMax:0,blueMax:0,redShift:0,greenShift:0,blueShift:0},this.rfbVersionMajor=null,this.rfbVersionMinor=null,this.inflator=new me.a.Inflate,this.outgoingMessageQueue=[],this.run()}var t,n,s,i,o,l,c,u,d,h,m,v,b,g,y;return Object(f.a)(e,[{key:"onInit",value:function(e){return this.emitter.on("init",e)}},{key:"onSize",value:function(e){return this.emitter.on("size",e)}},{key:"onFramebufferRectRaw",value:function(e){return this.emitter.on("framebufferRectRaw",e)}},{key:"onFramebufferRectCopy",value:function(e){return this.emitter.on("framebufferRectCopy",e)}},{key:"onFramebufferRectFill",value:function(e){return this.emitter.on("framebufferRectFill",e)}},{key:"onBell",value:function(e){return this.emitter.on("bell",e)}},{key:"onCut",value:function(e){return this.emitter.on("cut",e)}},{key:"destroy",value:function(){this.channel.close()}},{key:"run",value:(y=Object(a.a)(r.a.mark((function e(){var t,n,s,i,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleVersion();case 2:return e.next=4,this.handleSecurity();case 4:return e.next=6,this.handleServerInit();case 6:for(t=!0,n=!1,s=void 0,e.prev=9,i=this.outgoingMessageQueue[Symbol.iterator]();!(t=(a=i.next()).done);t=!0)o=a.value,this.channel.write(o);e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),n=!0,s=e.t0;case 17:e.prev=17,e.prev=18,t||null==i.return||i.return();case 20:if(e.prev=20,!n){e.next=23;break}throw s;case 23:return e.finish(20);case 24:return e.finish(17);case 25:this.outgoingMessageQueue=[];case 26:return e.next=28,this.handleMessage();case 28:e.next=26;break;case 30:case"end":return e.stop()}}),e,this,[[9,13,17,25],[18,,20,24]])}))),function(){return y.apply(this,arguments)})},{key:"handleVersion",value:(g=Object(a.a)(r.a.mark((function e(){var t,n,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.channel.read(12);case 2:t=e.sent,n=String.fromCharCode.apply(String,new Uint8Array(t)),(s=n.match(/^RFB (\d{3}).(\d{3})\n$/))&&3===s.length&&(this.rfbVersionMajor=+s[1],this.rfbVersionMinor=+s[2],this.channel.write("RFB 003.007\n"));case 6:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"handleSecurity",value:(b=Object(a.a)(r.a.mark((function t(){var n,s,i,a,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.channel.read(1);case 2:return n=t.sent,s=new Uint8Array(n),i=s[0],t.next=7,this.channel.read(i);case 7:n=t.sent,-1!==(s=new Uint8Array(n)).indexOf(e.SECURITY_NONE)&&(a=new ArrayBuffer(1),new Uint8Array(a)[0]=e.SECURITY_NONE,this.channel.write(a),o=new ArrayBuffer(1),new Uint8Array(o)[0]=0,this.channel.write(o));case 10:case"end":return t.stop()}}),t,this)}))),function(){return b.apply(this,arguments)})},{key:"handleServerInit",value:(v=Object(a.a)(r.a.mark((function t(){var n,s,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.channel.read(24);case 2:return n=t.sent,s=new DataView(n),this.framebufferWidth=s.getUint16(0),this.framebufferHeight=s.getUint16(2),this.pixelFormat.bitsPerPixel=s.getUint8(4),this.pixelFormat.bytesPerPixel=this.pixelFormat.bitsPerPixel/8,this.pixelFormat.depth=s.getUint8(5),this.pixelFormat.bigEndian=0!==s.getUint8(6),this.pixelFormat.trueColor=0!==s.getUint8(7),this.pixelFormat.redMax=s.getUint16(8),this.pixelFormat.greenMax=s.getUint16(10),this.pixelFormat.blueMax=s.getUint16(12),this.pixelFormat.redShift=s.getUint8(14),this.pixelFormat.greenShift=s.getUint8(15),this.pixelFormat.blueShift=s.getUint8(16),i=s.getUint32(20),t.next=20,this.channel.read(i);case 20:n=t.sent,this.name=String.fromCharCode.apply(String,new Uint8Array(n)),this.initialized=!0,this.emitter.emit("size",{w:this.framebufferWidth,h:this.framebufferHeight}),this.emitter.emit("init"),this.setEncodings([e.ENCODING_COPY_RECT,e.ENCODING_ZRLE,e.ENCODING_HEXTILE,e.ENCODING_RRE,e.ENCODING_RAW]),this.setPixelFormat({bitsPerPixel:32,depth:24,bigEndian:!we,trueColor:!0,redMax:255,greenMax:255,blueMax:255,redShift:0,greenShift:8,blueShift:16}),this.framebufferUpdateRequest(0,0,this.framebufferWidth,this.framebufferHeight,!1);case 28:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)})},{key:"handleMessage",value:(m=Object(a.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,this.channel.read(1);case 3:t.t1=t.sent,n=new t.t0(t.t1)[0],t.t2=n,t.next=t.t2===e.MSG_FRAMEBUFFER_UPDATE?8:t.t2===e.MSG_SET_COLOR_MAP_ENTRIES?11:t.t2===e.MSG_BELL?14:t.t2===e.MSG_SERVER_CUT_TEXT?16:19;break;case 8:return t.next=10,this.handleFramebufferUpdate();case 10:return t.abrupt("break",20);case 11:return t.next=13,this.handleSetColorMapEntries();case 13:return t.abrupt("break",20);case 14:return this.handleBell(),t.abrupt("break",20);case 16:return t.next=18,this.handleServerCutText();case 18:return t.abrupt("break",20);case 19:throw new Error("Unknown message type: ".concat(n));case 20:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)})},{key:"handleFramebufferUpdate",value:(h=Object(a.a)(r.a.mark((function t(){var n,s,i,a,o,l,c,u,d=this;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=DataView,t.next=3,this.channel.read(3);case 3:t.t1=t.sent,n=new t.t0(t.t1).getUint16(1),s=0;case 6:if(!(s<n)){t.next=42;break}return t.t2=DataView,t.next=10,this.channel.read(12);case 10:t.t3=t.sent,i=new t.t2(t.t3),a=i.getUint16(0),o=i.getUint16(2),l=i.getUint16(4),c=i.getUint16(6),u=i.getInt32(8),t.t4=u,t.next=t.t4===e.ENCODING_RAW?20:t.t4===e.ENCODING_COPY_RECT?23:t.t4===e.ENCODING_RRE?26:t.t4===e.ENCODING_HEXTILE?29:t.t4===e.ENCODING_TRLE?32:t.t4===e.ENCODING_ZRLE?35:38;break;case 20:return t.next=22,this.handleFramebufferUpdateRaw(a,o,l,c);case 22:return t.abrupt("break",39);case 23:return t.next=25,this.handleFramebufferUpdateCopyRect(a,o,l,c);case 25:return t.abrupt("break",39);case 26:return t.next=28,this.handleFramebufferUpdateRre(a,o,l,c);case 28:return t.abrupt("break",39);case 29:return t.next=31,this.handleFramebufferUpdateHextile(a,o,l,c);case 31:return t.abrupt("break",39);case 32:return t.next=34,this.handleFramebufferUpdateTrle(a,o,l,c);case 34:return t.abrupt("break",39);case 35:return t.next=37,this.handleFramebufferUpdateZrle(a,o,l,c);case 37:return t.abrupt("break",39);case 38:throw new Error("Unknown encoding type: ".concat(u));case 39:s++,t.next=6;break;case 42:setTimeout((function(){return d.framebufferUpdateRequest(0,0,d.framebufferWidth,d.framebufferHeight,!0)}),1e3/30);case 43:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"handleFramebufferUpdateRaw",value:(d=Object(a.a)(r.a.mark((function e(t,n,s,i){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.channel.read(s*i*this.pixelFormat.bytesPerPixel);case 2:a=e.sent,this.convertPixelsToRgba(a),this.emitter.emit("framebufferRectRaw",{x:t,y:n,w:s,h:i,buffer:a});case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,n,s){return d.apply(this,arguments)})},{key:"handleFramebufferUpdateCopyRect",value:(u=Object(a.a)(r.a.mark((function e(t,n,s,i){var a,o,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=DataView,e.next=3,this.channel.read(4);case 3:e.t1=e.sent,a=new e.t0(e.t1),o=a.getUint16(0),l=a.getUint16(2),this.emitter.emit("framebufferRectCopy",{x:t,y:n,w:s,h:i,srcX:o,srcY:l});case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,n,s){return u.apply(this,arguments)})},{key:"handleFramebufferUpdateRre",value:(c=Object(a.a)(r.a.mark((function e(t,n,s,i){var a,o,l,c,u,d,h,p,f,m;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.channel.read(4+this.pixelFormat.bytesPerPixel);case 2:return a=e.sent,o=new DataView(a),l=o.getUint32(0),c=this.convertPixelToRgba(o.getUint32(4,we)),e.next=8,this.channel.read((this.pixelFormat.bytesPerPixel+8)*l);case 8:for(a=e.sent,o=new DataView(a),this.emitter.emit("framebufferRectFill",{x:t,y:n,w:s,h:i,color:c}),u=0;u<l;u++)d=this.convertPixelToRgba(o.getUint32(12*u+0,we)),h=o.getUint16(12*u+4),p=o.getUint16(12*u+6),f=o.getUint16(12*u+8),m=o.getUint16(12*u+10),this.emitter.emit("framebufferRectFill",{x:t+h,y:n+p,w:f,h:m,color:d});case 12:case"end":return e.stop()}}),e,this)}))),function(e,t,n,s){return c.apply(this,arguments)})},{key:"handleFramebufferUpdateHextile",value:(l=Object(a.a)(r.a.mark((function e(t,n,s,i){var a,o,l,c,u,d,h,p,f,m,v,b,g,y,w,_,k,C,x,j,O,S;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Math.ceil(s/16),o=Math.ceil(i/16),l=0,c=0,u=0;case 5:if(!(u<o)){e.next=60;break}d=0;case 7:if(!(d<a)){e.next=57;break}return h=Math.min(16*(d+1),s)-16*d,p=Math.min(16*(u+1),i)-16*u,e.t0=Uint8Array,e.next=13,this.channel.read(1);case 13:if(e.t1=e.sent,!(1&(f=new e.t0(e.t1)[0]))){e.next=23;break}return e.next=18,this.channel.read(h*p*this.pixelFormat.bytesPerPixel);case 18:m=e.sent,this.convertPixelsToRgba(m),this.emitter.emit("framebufferRectRaw",{x:t+16*d,y:n+16*u,w:h,h:p,buffer:m}),e.next=54;break;case 23:if(!(2&f)){e.next=31;break}return e.t2=this,e.t3=Uint32Array,e.next=28,this.channel.read(4);case 28:e.t4=e.sent,e.t5=new e.t3(e.t4)[0],l=e.t2.convertPixelToRgba.call(e.t2,e.t5);case 31:if(!(4&f)){e.next=39;break}return e.t6=this,e.t7=Uint32Array,e.next=36,this.channel.read(4);case 36:e.t8=e.sent,e.t9=new e.t7(e.t8)[0],c=e.t6.convertPixelToRgba.call(e.t6,e.t9);case 39:if(this.emitter.emit("framebufferRectFill",{x:t+16*d,y:n+16*u,w:h,h:p,color:l}),!(8&f)){e.next=54;break}return v=16&f,e.t10=Uint8Array,e.next=45,this.channel.read(1);case 45:return e.t11=e.sent,b=new e.t10(e.t11)[0],g=2+(v?this.pixelFormat.bytesPerPixel:0),e.next=50,this.channel.read(g*b);case 50:for(y=e.sent,w=new DataView(y),_=0,k=0;k<b;k++)C=void 0,v?(C=this.convertPixelToRgba(w.getUint32(_,we)),_+=4):C=c,x=t+16*d+(w.getUint8(_)>>>4),j=n+16*u+(15&w.getUint8(_)),_++,O=1+(w.getUint8(_)>>>4),S=1+(15&w.getUint8(_)),_++,this.emitter.emit("framebufferRectFill",{x:x,y:j,w:O,h:S,color:C});case 54:d++,e.next=7;break;case 57:u++,e.next=5;break;case 60:case"end":return e.stop()}}),e,this)}))),function(e,t,n,s){return l.apply(this,arguments)})},{key:"handleFramebufferUpdateTrle",value:(o=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})},{key:"handleFramebufferUpdateZrle",value:(i=Object(a.a)(r.a.mark((function e(t,n,s,i){var o,l,c,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=DataView,e.next=3,this.channel.read(4);case 3:return e.t1=e.sent,o=new e.t0(e.t1).getUint32(0),e.t2=this.inflator,e.next=8,this.channel.read(o);case 8:return e.t3=e.sent,e.t4=me.a.Z_SYNC_FLUSH,e.t2.push.call(e.t2,e.t3,e.t4),l=this.inflator.result,c=0,u=function(){var e=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.slice(c,c+t).buffer,c+=t,e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=16,this.handleTrleData(t,n,s,i,64,u);case 16:case"end":return e.stop()}}),e,this)}))),function(e,t,n,s){return i.apply(this,arguments)})},{key:"handleTrleData",value:(s=Object(a.a)(r.a.mark((function e(t,n,s,i,a,o){var l,c,u,d,h,p,f,m,v,b,g,y,w,_,k,C,x,j,O,S,E,T,I,D,P,A,N,R,M,L,F,B;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=Math.ceil(s/a),c=Math.ceil(i/a),u=function(e){var t=new ArrayBuffer(e.byteLength/3*4),n=new Uint8Array(t),s=new Uint8Array(e);if(we)for(var i=0;i<s.length/3;i++)n[4*i+0]=s[3*i+0],n[4*i+1]=s[3*i+1],n[4*i+2]=s[3*i+2],n[4*i+3]=255;else for(var r=0;r<s.length/3;r++)n[4*r+0]=255,n[4*r+1]=s[3*r+2],n[4*r+2]=s[3*r+1],n[4*r+3]=s[3*r+0];return t},h=0;case 4:if(!(h<c)){e.next=126;break}p=0;case 6:if(!(p<l)){e.next=123;break}return f=Math.min((p+1)*a,s)-p*a,m=Math.min((h+1)*a,i)-h*a,e.t0=Uint8Array,e.next=12,o(1);case 12:if(e.t1=e.sent,0!==(v=new e.t0(e.t1)[0])){e.next=23;break}return e.t2=u,e.next=18,o(f*m*3);case 18:e.t3=e.sent,b=(0,e.t2)(e.t3),this.emitter.emit("framebufferRectRaw",{x:t+p*a,y:n+h*a,w:f,h:m,buffer:b}),e.next=120;break;case 23:if(1!==v){e.next=34;break}return e.t4=Uint32Array,e.t5=u,e.next=28,o(3);case 28:e.t6=e.sent,e.t7=(0,e.t5)(e.t6),g=new e.t4(e.t7)[0],this.emitter.emit("framebufferRectFill",{x:t+p*a,y:n+h*a,w:f,h:m,color:g}),e.next=120;break;case 34:if(!(v<=127)){e.next=57;break}if(127===v){e.next=43;break}return e.t8=Uint32Array,e.t9=u,e.next=40,o(3*v);case 40:e.t10=e.sent,e.t11=(0,e.t9)(e.t10),d=new e.t8(e.t11);case 43:return w=f*(y=v>16?8:v>4?4:v>2?2:1)+7>>>3,e.t12=Uint8Array,e.next=48,o(w*m);case 48:for(e.t13=e.sent,_=new e.t12(e.t13),k=new Uint32Array(f*m),C=0,x=0,j=0;j<m;j++)for(O=0,S=void 0,E=0;E<f;E++)0===O&&(O=8,S=_[x++]),T=S>>>(O-=y)&(1<<y)-1,k[C++]=d[T];this.emitter.emit("framebufferRectRaw",{x:t+p*a,y:n+h*a,w:f,h:m,color:k.buffer}),e.next=120;break;case 57:if(128!==v){e.next=86;break}I=new Uint32Array(f*m),D=0;case 60:if(!(D<f*m)){e.next=83;break}return e.t14=Uint32Array,e.t15=u,e.next=65,o(3);case 65:e.t16=e.sent,e.t17=(0,e.t15)(e.t16),P=new e.t14(e.t17)[0],A=1;case 69:return e.t18=Uint8Array,e.next=72,o(1);case 72:if(e.t19=e.sent,N=new e.t18(e.t19)[0],A+=N,255===N){e.next=77;break}return e.abrupt("break",79);case 77:e.next=69;break;case 79:I.fill(P,D,D+A),D+=A,e.next=60;break;case 83:this.emitter.emit("framebufferRectRaw",{x:t+p*a,y:n+h*a,w:f,h:m,color:I.buffer}),e.next=120;break;case 86:if(129===v){e.next=94;break}return e.t20=Uint32Array,e.t21=u,e.next=91,o(3*(v-128));case 91:e.t22=e.sent,e.t23=(0,e.t21)(e.t22),d=new e.t20(e.t23);case 94:R=new Uint32Array(f*m),M=0;case 96:if(!(M<f*m)){e.next=119;break}return L=1,e.t24=Uint8Array,e.next=101,o(1);case 101:if(e.t25=e.sent,!((F=new e.t24(e.t25)[0])>=128)){e.next=115;break}F-=128;case 105:return e.t26=Uint8Array,e.next=108,o(1);case 108:if(e.t27=e.sent,B=new e.t26(e.t27)[0],L+=B,255===B){e.next=113;break}return e.abrupt("break",115);case 113:e.next=105;break;case 115:R.fill(d[F],M,M+L),M+=L,e.next=96;break;case 119:this.emitter.emit("framebufferRectRaw",{x:t+p*a,y:n+h*a,w:f,h:m,buffer:R.buffer});case 120:p++,e.next=6;break;case 123:h++,e.next=4;break;case 126:case"end":return e.stop()}}),e,this)}))),function(e,t,n,i,r,a){return s.apply(this,arguments)})},{key:"handleSetColorMapEntries",value:(n=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"handleBell",value:function(){this.emitter.emit("bell")}},{key:"handleServerCutText",value:(t=Object(a.a)(r.a.mark((function e(){var t,n,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=DataView,e.next=3,this.channel.read(7);case 3:return e.t1=e.sent,t=new e.t0(e.t1),n=t.getUint32(3),e.t2=String.fromCharCode,e.t3=String,e.t4=Uint8Array,e.next=11,this.channel.read(n);case 11:e.t5=e.sent,e.t6=new e.t4(e.t5),s=e.t2.apply.call(e.t2,e.t3,e.t6),this.emitter.emit("cut",s);case 15:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"convertPixelToRgba",value:function(e){return e|(we?4278190080:255)}},{key:"convertPixelsToRgba",value:function(e){for(var t=new Uint32Array(e),n=0;n<t.length;n++)t[n]=this.convertPixelToRgba(t[n])}},{key:"framebufferUpdateRequest",value:function(t,n,s,i,r){var a=new ArrayBuffer(10),o=new DataView(a);o.setUint8(0,e.MSG_FRAMEBUFFER_UPDATE_REQUEST),o.setUint8(1,+r),o.setUint16(2,t),o.setUint16(4,n),o.setUint16(6,s),o.setUint16(8,i),this.channel.write(a)}},{key:"setEncodings",value:function(t){var n=new ArrayBuffer(4+4*t.length),s=new DataView(n);s.setUint8(0,e.MSG_SET_ENCODINGS),s.setUint16(2,t.length);for(var i=0;i<t.length;i++)s.setInt32(4+4*i,t[i]);this.channel.write(n)}},{key:"setPixelFormat",value:function(t){var n=new ArrayBuffer(20),s=new DataView(n);s.setUint8(0,e.MSG_SET_PIXEL_FORMAT),s.setUint8(4,t.bitsPerPixel),s.setUint8(5,t.depth),s.setUint8(6,+t.bigEndian),s.setUint8(7,+t.trueColor),s.setUint16(8,t.redMax),s.setUint16(10,t.greenMax),s.setUint16(12,t.blueMax),s.setUint8(14,t.redShift),s.setUint8(15,t.greenShift),s.setUint8(16,t.blueShift),this.channel.write(n),t.bytesPerPixel=t.bitsPerPixel/8,this.pixelFormat=t}},{key:"pointerEvent",value:function(t){if(this.initialized){var n=new ArrayBuffer(6),s=new DataView(n);s.setUint8(0,e.MSG_POINTER_EVENT),s.setUint8(1,t.button1<<0|t.button2<<1|t.button3<<2|t.button4<<3|t.button5<<4),s.setUint16(2,t.x),s.setUint16(4,t.y),this.channel.write(n)}}},{key:"keyEvent",value:function(t,n){if(this.initialized){var s=new ArrayBuffer(8),i=new DataView(s);i.setUint8(0,e.MSG_KEY_EVENT),i.setUint8(1,+n),i.setUint32(4,t),this.channel.write(s)}}}]),e}();_e.SECURITY_INVALID=0,_e.SECURITY_NONE=1,_e.SECURITY_VNC_AUTH=2,_e.MSG_SET_PIXEL_FORMAT=0,_e.MSG_SET_ENCODINGS=2,_e.MSG_FRAMEBUFFER_UPDATE_REQUEST=3,_e.MSG_KEY_EVENT=4,_e.MSG_POINTER_EVENT=5,_e.MSG_CLIENT_CUT_TEXT=6,_e.MSG_FRAMEBUFFER_UPDATE=0,_e.MSG_SET_COLOR_MAP_ENTRIES=1,_e.MSG_BELL=2,_e.MSG_SERVER_CUT_TEXT=3,_e.ENCODING_RAW=0,_e.ENCODING_COPY_RECT=1,_e.ENCODING_RRE=2,_e.ENCODING_HEXTILE=5,_e.ENCODING_TRLE=15,_e.ENCODING_ZRLE=16;var ke=function(){function e(t){Object(p.a)(this,e),this.canvas=t,this.canvas.width=0,this.canvas.height=0,this.ctx=this.canvas.getContext("2d")}return Object(f.a)(e,[{key:"setSize",value:function(e,t){this.canvas.width=e,this.canvas.height=t}},{key:"drawImage",value:function(e,t,n,s,i){var r=this.ctx.createImageData(n,s);r.data.set(new Uint8Array(i)),this.ctx.putImageData(r,e,t)}},{key:"copyRect",value:function(e,t,n,s,i,r){this.ctx.drawImage(this.canvas,i,r,n,s,e,t,n,s)}},{key:"fillRect",value:function(e,t,n,s,i){var r,a,o;we?(r=i>>>0&255,a=i>>>8&255,o=i>>>16&255):(r=i>>>24&255,a=i>>>16&255,o=i>>>8&255),this.ctx.fillStyle="rgb(".concat(r,", ").concat(a,", ").concat(o,")"),this.ctx.fillRect(e,t,n,s)}}]),e}(),Ce=n("9Arg"),xe=function(){function e(t){Object(p.a)(this,e),this.proxy=new pe(t),this.vnc=new _e(this.proxy),this.canvas=document.createElement("canvas"),this.canvas.tabIndex=0,this.framebuffer=new ke(this.canvas),this.disposables=new se.a(this.vnc.onSize(this.onVncSize.bind(this)),this.vnc.onFramebufferRectRaw(this.onVncFramebufferRectRaw.bind(this)),this.vnc.onFramebufferRectCopy(this.onVncFramebufferRectCopy.bind(this)),this.vnc.onFramebufferRectFill(this.onVncFramebufferRectFill.bind(this)),Object(Ce.f)(this.canvas,"contextmenu",(function(e){return e.preventDefault()})),Object(Ce.f)(this.canvas,"mousemove",this.onCanvasMouseEvent.bind(this)),Object(Ce.f)(this.canvas,"mousedown",this.onCanvasMouseEvent.bind(this)),Object(Ce.f)(this.canvas,"mouseup",this.onCanvasMouseEvent.bind(this)),Object(Ce.f)(this.canvas,"keydown",this.onCanvasKeyEvent.bind(this)),Object(Ce.f)(this.canvas,"keypress",this.onCanvasKeyEvent.bind(this)),Object(Ce.f)(this.canvas,"keyup",this.onCanvasKeyEvent.bind(this)))}return Object(f.a)(e,[{key:"destroy",value:function(){this.disposables.dispose(),this.vnc.destroy()}},{key:"onVncSize",value:function(e){var t=e.w,n=e.h;this.framebuffer.setSize(t,n)}},{key:"onVncFramebufferRectRaw",value:function(e){var t=e.x,n=e.y,s=e.w,i=e.h,r=e.buffer;this.framebuffer.drawImage(t,n,s,i,r)}},{key:"onVncFramebufferRectCopy",value:function(e){var t=e.x,n=e.y,s=e.w,i=e.h,r=e.srcX,a=e.srcY;this.framebuffer.copyRect(t,n,s,i,r,a)}},{key:"onVncFramebufferRectFill",value:function(e){var t=e.x,n=e.y,s=e.w,i=e.h,r=e.color;this.framebuffer.fillRect(t,n,s,i,r)}},{key:"onCanvasMouseEvent",value:function(e){var t=this.canvas.getBoundingClientRect();this.vnc.pointerEvent({x:e.clientX-t.left,y:e.clientY-t.top,button1:!!(1&e.buttons),button2:!!(4&e.buttons),button3:!!(2&e.buttons),button4:!1,button5:!1})}},{key:"onCanvasKeyEvent",value:function(e){var t=function(e){return ve.has(e.which)?"keypress"!==e.type?ve.get(e.which):void 0:"keydown"!==e.type?e.which:null}(e);t&&this.vnc.keyEvent(t,"keyup"!==e.type)}}]),e}(),je={props:{url:{type:String,required:!0}},created:function(){this.ctrl=new xe(this.url)},mounted:function(){this.$el.appendChild(this.ctrl.canvas),this.ctrl.canvas.classList.add("vnc-canvas"),this.ctrl.vnc.onInit(this.onCtrlInit)},destroyed:function(){this.ctrl.destroy()},methods:{onCtrlInit:function(){this.$emit("name",this.ctrl.vnc.name)}}},Oe=(n("wPNs"),{components:{Vnc:Object(E.a)(je,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"vnc"})}),[],!1,null,null,null).exports},props:{url:{type:String,required:!0}}}),Se=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(m.a)(this,Object(v.a)(t).call(this))).handleName=e.handleName.bind(Object(b.a)(e)),e.url="",e.name="",e}return Object(g.a)(t,e),Object(f.a)(t,[{key:"handleName",value:function(e){this.name=e}},{key:"render",value:function(e){var t=(this.name,"Remote Desktop (Beta)");return e(_.a,{key:this.id,attrs:{title:t,icon:"desktop"}},[e(Oe,{attrs:{url:this.url},on:{name:this.handleName}})])}}]),t}(k.b);Se.description="Remote Desktop";var Ee=Oe,Te=(n("0Yai"),Object(E.a)(Ee,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pitem-remote-desktop"},[n("Vnc",{staticClass:"pitem-rd-vnc",attrs:{url:e.url},on:{name:function(t){return e.$emit("name",t)}},nativeOn:{contextmenu:function(e){e.stopPropagation()}}})],1)}),[],!1,null,null,null).exports,n("SBq4")),Ie=n("xtk+"),De={directives:{Autofocus:Te.a},components:{EdInput:Ie.a},props:{prefix:{type:String,default:""},value:{type:String,default:""},selectName:{type:Boolean,default:!1}},watch:{value:{immediate:!0,handler:function(e,t){e=e||"",t=t||"",this.prefix&&!e.startsWith(this.prefix)&&(this.prefix.startsWith(e)||!t.startsWith(this.prefix)?this.$emit("input",this.prefix):this.$emit("input",t))}}},mounted:function(){if(this.selectName){var e=this.value.lastIndexOf("/");-1===e&&(e=0);var t=this.value.lastIndexOf(".");-1===t&&(t=this.value.length),this.$refs.path.$el.selectionStart=e+1,this.$refs.path.$el.selectionEnd=t}}},Pe=(n("aExP"),Object(E.a)(De,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sheet-path-input"},[n("div",{staticClass:"spi-title"},[e._t("default")],2),e._v(" "),n("EdInput",{directives:[{name:"autofocus",rawName:"v-autofocus"}],ref:"path",staticClass:"spi-input",attrs:{value:e.value,spellcheck:"false"},on:{input:function(t){return e.$emit("input",t)},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$emit("submit")},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.$emit("cancel")}]}})],1)}),[],!1,null,null,null).exports),Ae=n("/lWA"),Ne=n("MXzO"),Re=n("ySoy"),Me={provide:function(){var e=this,t={};return Object.defineProperty(t,"computed",{enumerable:!0,get:function(){return e.theme}}),{theme:t}},props:{theme:{type:String,default:null},tag:{type:String,default:""}},render:function(e){var t=this.$scopedSlots.default&&this.$scopedSlots.default();return this.tag?e(this.tag,t):t}},Le=Object(E.a)(Me,void 0,void 0,!1,null,null,null).exports,Fe=n("WmPt"),Be=n("4K9I"),qe=n("5dcz"),$e=n("B7nN"),Ue=n("7zca"),ze=(n("sDtr"),Object(E.a)({},(function(e,t){return(0,t._c)("div",{staticClass:"toolbar-space"})}),[],!0,null,null,null).exports),Ve=n("hNx+"),He=n("Oshs"),We=n("VYah"),Qe=n("YxxY"),Ke=n("Dm8+"),Ye=(n("Junv"),n("SYor"),n("wd/R")),Ge=n.n(Ye),Xe={props:{item:{type:Object,required:!0}}},Je=(n("TPou"),Object(E.a)(Xe,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"chat-item-label"},[this._v(this._s(this.item.text))])}),[],!1,null,null,null).exports),Ze=n("F3Tp"),et={functional:!0,props:{text:{type:String,default:""}},render:function(e,t){var n=t.props.text,s=C.findLinksInText(n),i=[],r=0,a=!0,o=!1,l=void 0;try{for(var c,u=s[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;d.from>r&&i.push(n.substring(r,d.from));var h=n.substring(d.from,d.to),p=h;"email"!==d.type||/^mailto:/.test(p)?"link"!==d.type||/^(https?:\/\/|mailto:)/.test(p)||(p="http://"+p):p="mailto:"+p,i.push(e("a",{attrs:{href:p,target:"_blank",rel:"noopener noreferrer"}},h)),r=d.to}}catch(f){o=!0,l=f}finally{try{a||null==u.return||u.return()}finally{if(o)throw l}}return r<n.length&&i.push(n.substring(r)),i}},tt=Object(E.a)(et,void 0,void 0,!1,null,null,null).exports,nt={components:{Avatar:Ze.a,Linkify:tt},mixins:[Ae.a],props:{item:{type:Object,required:!0}},computed:{cssClass:function(){return["chat-item-group-".concat(this.computedTheme),this.item.side]}},methods:{messageTooltip:function(e){return Ge()(e.at).format("dddd D MMMM YYYY, h:mm:ss a")},userTooltip:function(e){return"".concat(e.name," (").concat(e.online?"Online":"Offline",")")}}},st=(n("qvPh"),{components:{ChatItemLabel:Je,ChatItemGroup:Object(E.a)(nt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-item-group",class:e.cssClass},[n("Avatar",{staticClass:"cig-avatar",attrs:{user:e.item.user,online:e.item.user.online,title:e.userTooltip(e.item.user)}}),e._v(" "),n("div",{staticClass:"cig-msgs"},[e._l(e.item.messages,(function(t,s){return n("div",{key:s,staticClass:"cig-msg",attrs:{title:e.messageTooltip(t)}},[n("Linkify",{attrs:{text:t.text}})],1)})),e._v(" "),n("svg",{staticClass:"cig-glyph",attrs:{viewBox:"0 0 40 40"}},[n("path",{attrs:{d:"M20,0v20c0,9.568,6.53,20,20,20C16.127,40,0,33.792,0,20C0,17.845,0,0,0,0H20z"}})])],2)],1)}),[],!1,null,null,null).exports},props:{items:{type:Array,required:!0}}}),it=(n("9xwX"),Object(E.a)(st,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"chat-display"},this._l(this.items,(function(e,n){return t(e.type,{key:n,tag:"component",attrs:{item:e}})})),1)}),[],!1,null,null,null).exports),rt=n("YU3p");function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function ot(e,t){for(var n=[e[t++]];t<e.length&&e[t].type===n[0].type;)n.push(e[t++]);return n}function lt(e){return e.length>2?"".concat(e.slice(0,2).join(", ")," and ").concat(e.length-2," other ").concat(e.length>3?"people":"person"):e.length>1?"".concat(e[0]," and ").concat(e[1]):e[0]}var ct,ut,dt,ht,pt={components:{FadeTransition:B.a,ChatDisplay:it,TextareaEx:rt.a},mixins:[Ae.a],props:{events:{type:Array,required:!0}},data:function(){return{input:"",items:[],hasNewEvents:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(u.e)(["user"])),watch:{events:{immediate:!0,handler:(ct=Object(a.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.updateItems(),(t=this.$refs.display&&this.$refs.display.$el)&&t.scrollTop!==t.scrollHeight-t.clientHeight){e.next=11;break}return this.hasNewEvents=!1,e.next=7,this.$nextTick();case 7:(t=this.$refs.display&&this.$refs.display.$el)&&(t.scrollTop=t.scrollHeight-t.clientHeight),e.next=12;break;case 11:this.hasNewEvents=!0;case 12:case"end":return e.stop()}}),e,this)}))),function(){return ct.apply(this,arguments)})}},methods:{submitMessage:function(){var e=this.input.trim();e&&(this.$emit("submit-message",e),this.input="",this.scrollToBottom())},onDisplayScroll:function(){var e=this.$refs.display.$el;this.hasNewEvents&&e.scrollTop===e.scrollHeight-e.clientHeight&&(this.hasNewEvents=!1)},scrollToBottom:function(){var e=this.$refs.display.$el;e.scrollTop=e.scrollHeight-e.clientHeight},updateItems:function(){this.items=[];for(var e=null,t=0;t<this.events.length;t++){var n=this.events[t];switch((!e||n.at-e.at>36e5)&&(this.items.push({type:"ChatItemLabel",text:Ge()(n.at).calendar()}),e=null),n.type){case"message":e&&e.userId===n.userId||this.items.push({type:"ChatItemGroup",side:n.userId===this.user.id?"right":"left",user:n.user,messages:[]}),this.items[this.items.length-1].messages.push({at:n.at,text:n.text});break;case"clientJoin":case"clientLeave":var s=ot(this.events,t);t+=s.length-1;var i=lt(s.reverse().map((function(e){return e.user.name})));this.items.push({type:"ChatItemLabel",text:"".concat(i," ").concat("clientJoin"===n.type?"joined":"left")})}e=n}}}},ft=(n("S1cT"),Object(E.a)(pt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat",class:"chat-"+e.computedTheme},[n("div",{staticClass:"chat-content-container"},[n("ChatDisplay",{ref:"display",staticClass:"chat-content-display",attrs:{items:e.items},nativeOn:{scroll:function(t){return e.onDisplayScroll(t)}}}),e._v(" "),n("FadeTransition",{attrs:{duration:.2}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.hasNewEvents,expression:"hasNewEvents"}],staticClass:"chat-content-footer"},[n("span",{staticClass:"chat-content-footer-text",on:{click:e.scrollToBottom}},[e._v("New Messages Below")])])])],1),e._v(" "),n("TextareaEx",{staticClass:"chat-input",attrs:{placeholder:"Type a message"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.submitMessage(t))}},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1)}),[],!1,null,null,null).exports),mt=n("2ejt"),vt=n("JBdv"),bt=n("nVGi"),gt=n("62+2"),yt=n("CkVh"),wt=n("VlpE"),_t=n("Kaxq"),kt=n("Yswc"),Ct=n("9z1j"),xt=n("9oRF"),jt={diff:{key:"diff",text:"Diff"},preview:{key:"preview",text:"Preview"}},Ot={directives:{Tooltip:ie.a},components:{Icon:Fe.a,TabsHeader:Ct.a,DiffText:xt.a,Codemirror:w.a,Spinner:F.a},props:{session:{type:Object,default:null},path:{type:String,required:!0},hash1:{type:String,required:!0},hash2:{type:String,required:!0},mode:{type:String,required:!0}},data:function(){return{diffLoading:!1,diff:[],previewLoading:!1,preview:null,selectedTab:jt.diff,tabs:[jt.diff,jt.preview]}},computed:{diffLinesAdded:function(){return this.diff.filter((function(e){return"+"===e.type})).length},diffLinesRemoved:function(){return this.diff.filter((function(e){return"-"===e.type})).length}},mounted:function(){"modified"===this.mode&&this.loadDiff(),this.loadPreview()},methods:{loadDiff:(ht=Object(a.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.diffLoading=!0,(t={}).hash1=this.hash1,this.hash2?t.hash2=this.hash2:t.path2=this.path,e.prev=4,e.next=7,this.session.getFileDiff(t);case 7:this.diff=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),ne.b({type:"error",text:"Unable to load file diff."});case 13:return e.prev=13,this.diffLoading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[4,10,13,16]])}))),function(){return ht.apply(this,arguments)}),loadPreview:(dt=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.previewLoading=!0,e.prev=1,!this.hash2&&!this.hash1){e.next=8;break}return e.next=5,this.session.getFileDataFromHash(this.hash2||this.hash1);case 5:this.preview=e.sent,e.next=11;break;case 8:return e.next=10,this.session.getFileDataFromIndex(this.path);case 10:this.preview=e.sent;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),ne.b({type:"error",text:"Unable to load file preview."});case 16:return e.prev=16,this.previewLoading=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[1,13,16,19]])}))),function(){return dt.apply(this,arguments)}),checkoutFile:(ut=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te.b({title:"Revert file to this revision?",text:"This will overwrite the contents of this file.",icon:"warning",primaryAction:"Revert",secondaryAction:"Cancel"});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,this.session.checkoutFile(this.hash2||this.hash1,this.path);case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(4),ne.b({type:"error",text:"Unable to revert file."}),e.abrupt("return");case 13:ne.b({type:"success",text:"Reverted file successfully."});case 14:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(){return ut.apply(this,arguments)})}},St=function(e){function t(e,n,s,i,r){var a;return Object(p.a)(this,t),(a=Object(m.a)(this,Object(v.a)(t).call(this))).session=e,a.path=n,a.mode=s,a.hash1=i,a.hash2=r,a}return Object(g.a)(t,e),Object(f.a)(t,[{key:"render",value:function(e){var t=this.path.substr(this.path.lastIndexOf("/")+1);return e(_.a,{key:this.id,attrs:{title:t,tooltip:this.path,icon:C.fileFolderIcon(t,"file")}},[e(Ot,{attrs:{path:this.path,session:this.session,mode:this.mode,hash1:this.hash1,hash2:this.hash2}})])}}]),t}(k.b);St.description="File Revision";var Et,Tt,It=Ot,Dt=(n("o4ob"),Object(E.a)(It,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pitem-file-revision"},[n("header",{staticClass:"pifr-header"},[n("div",{staticClass:"pifr-header-path-container"},[n("span",{staticClass:"pifr-header-path"},[e._v(e._s(e.path))]),e._v(" "),n("span",{staticClass:"pifr-header-mode",class:e.mode},[e._v(e._s(e.mode))])]),e._v(" "),n("Icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Revert File",expression:"'Revert File'"}],staticClass:"pifr-header-btn",attrs:{icon:"restore"},on:{click:e.checkoutFile}})],1),e._v(" "),n("div",{staticClass:"pifr-body"},["modified"!==e.mode?[e.previewLoading?n("Spinner",{staticClass:"pifr-spinner"}):n("Codemirror",{staticClass:"pifr-preview alone",attrs:{layout:"fill",filename:e.path,value:e.preview,readonly:"","line-numbers":""}})]:[n("TabsHeader",{staticClass:"pifr-tabs",attrs:{tabs:e.tabs},model:{value:e.selectedTab,callback:function(t){e.selectedTab=t},expression:"selectedTab"}}),e._v(" "),"diff"===e.selectedTab.key?n("div",{staticClass:"pifr-tab"},[e.diffLoading?n("Spinner",{staticClass:"pifr-spinner"}):n("div",{staticClass:"pifr-diff-scroller"},[n("div",{staticClass:"pifr-field"},[e._v("Lines added: "),n("span",{staticClass:"pifr-added"},[e._v(e._s(e.diffLinesAdded))])]),e._v(" "),n("div",{staticClass:"pifr-field"},[e._v("Lines removed: "),n("span",{staticClass:"pifr-removed"},[e._v(e._s(e.diffLinesRemoved))])]),e._v(" "),n("DiffText",{staticClass:"pifr-diff",attrs:{diff:e.diff}})],1)],1):e._e(),e._v(" "),"preview"===e.selectedTab.key?n("div",{staticClass:"pifr-tab"},[e.previewLoading?n("Spinner",{staticClass:"pifr-spinner"}):n("Codemirror",{staticClass:"pifr-preview",attrs:{layout:"fill",filename:e.path,value:e.preview,readonly:"","line-numbers":""}})],1):e._e()]],2)])}),[],!1,null,null,null).exports,n("K24h")),Pt=n("gv/e"),At={directives:{Tooltip:ie.a},components:{Icon:Fe.a,InfiniteScroll:Dt.a,Split:We.a,SplitPanel:Qe.a,PaneLayout:Ve.a,Placeholder:Pt.a},props:{session:{type:Object,required:!0}},data:function(){return{layout:new k.a,activePane:null,selectedRevision:null,loadingRevisions:!1,revisions:[],hasMoreRevisions:!0,workspacePreviewParam:null,splitPanelRevisionsFrac:250,splitPanelPreviewFrac:1}},computed:{activeItem:{get:function(){return this.activePane&&this.activePane.selectedItem},set:function(e){this.activePane=e.parent,this.activePane.selectedItem=e}}},watch:{selectedRevision:function(){this.closeAllItems(),this.workspacePreviewParam=null}},beforeCreate:function(){this.$options.components.Workspace=n("o+Su").default},mounted:function(){this.loadMoreRevisions()},methods:{calendar:function(e){return Ge()(e).calendar(null,{lastDay:"[Yesterday at] LT",sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",lastWeek:"[Last] dddd [at] LT",nextWeek:"dddd [at] LT",sameElse:"L [at] LT"})},loadMoreRevisions:(Tt=Object(a.a)(r.a.mark((function e(){var t,n,i,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasMoreRevisions&&!this.loadingRevisions){e.next=2;break}return e.abrupt("return");case 2:return this.loadingRevisions=!0,t=this.revisions.length?this.revisions[this.revisions.length-1].at:void 0,e.prev=4,e.next=7,this.session.getTimeline(t);case 7:n=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),ne.b({type:"error",text:"Unable to get workspace revisions."}),e.abrupt("return");case 14:return e.prev=14,this.loadingRevisions=!1,e.finish(14);case 17:this.hasMoreRevisions=n.items.length>0,this.hasMoreRevisions&&(a=function(e){return{hashFrom:e.hash,hashTo:e.hash2,path:e.path,type:e.type}},(i=this.revisions).push.apply(i,Object(s.a)(n.items.map((function(e){return{at:new Date(e.at),commitFrom:e.commit_from,commitTo:e.commit_to,added:e.added.map(a),removed:e.removed.map(a),modified:e.modified.map(a)}})))));case 19:case"end":return e.stop()}}),e,this,[[4,10,14,17]])}))),function(){return Tt.apply(this,arguments)}),selectRevision:function(e){this.selectedRevision=e},isRevisionSelected:function(e){return this.selectedRevision===e},fileIcon:function(e){if("symlink"===e.type)return"symlink";var t=e.path.lastIndexOf("/"),n=e.path.slice(t+1);return C.fileFolderIcon(n,e.type)},fileIconTooltip:function(e){switch(e){case"file":return"File";case"folder":return"Folder";case"symlink":return"Symbolic Link"}},closeAllItems:function(){var e=!0,t=!1,n=void 0;try{for(var s,i=this.layout.items()[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){s.value.remove()}}catch(r){t=!0,n=r}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},ensureActivePane:function(){return this.activePane||(this.activePane=this.layout.getOrCreateFirstPane())},onPaneLayoutItemsClose:function(e){var t=!0,n=!1,s=void 0;try{for(var i,r=e[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){i.value.remove()}}catch(a){n=!0,s=a}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}},openFile:function(e,t){if("file"===e.type){this.workspacePreviewParam=null;var n=this.layout.findItem((function(t){return t instanceof St&&t.path===e.path}));n||(n=new St(this.session,e.path,t,e.hashFrom,e.hashTo),this.ensureActivePane().appendItem(n)),this.activeItem=n}},toggleWorkspacePreview:function(e){this.workspacePreviewParam?this.workspacePreviewParam=null:this.workspacePreviewParam={wid:this.session.wid,hash:e}},checkoutCommit:(Et=Object(a.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te.b({title:"Revert workspace to this revision?",text:"The state of the workspace will be reverted to what it was in this revision. The current state of the workspace will be saved as a new revision prior to reverting in case you wish to revert back to the current state.",icon:"warning",primaryAction:"Revert",secondaryAction:"Cancel"});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.session.checkoutCommit(t);case 6:ne.b({type:"success",text:"Reverted workspace successfully."}),this.$emit("reverted-workspace");case 8:case"end":return e.stop()}}),e,this)}))),function(e){return Et.apply(this,arguments)})}},Nt=(n("yZJj"),Object(E.a)(At,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"workspace-revisions"},[n("Split",{staticClass:"wsrev-split",attrs:{orientation:"horizontal","invisible-dividers":""}},[n("SplitPanel",{attrs:{sizing:"fixed",frac:e.splitPanelRevisionsFrac,collapsable:"","collapsed-text":"Revisions"},on:{"update:frac":function(t){e.splitPanelRevisionsFrac=t}}},[n("InfiniteScroll",{on:{trigger:e.loadMoreRevisions}},[n("div",{staticClass:"wsrev-list"},[e.loadingRevisions||e.revisions.length?e._e():n("div",{staticClass:"wsrev-no-revisions"},[e._v("No revisions")]),e._v(" "),e._l(e.revisions,(function(t,s){return n("div",{key:s,staticClass:"wsrev-item",class:{selected:e.isRevisionSelected(t)},on:{click:function(n){return e.selectRevision(t)}}},[n("div",{staticClass:"wsrev-item-date"},[e._v(e._s(e.calendar(t.at)))]),e._v(" "),e.isRevisionSelected(t)?[n("div",{staticClass:"wsrev-action"},[n("Icon",{attrs:{icon:"search"}}),e._v(" "),n("a",{on:{click:function(n){return e.toggleWorkspacePreview(t.commitTo)}}},[e._v(e._s(e.workspacePreviewParam?"Close Preview":"Preview"))])],1),e._v(" "),n("div",{staticClass:"wsrev-action"},[n("Icon",{attrs:{icon:"restore"}}),e._v(" "),n("a",{on:{click:function(n){return e.checkoutCommit(t.commitTo)}}},[e._v("Revert")])],1),e._v(" "),n("div",{staticClass:"wsrev-item-changes"},[t.added.length?[n("div",{staticClass:"wsrev-item-section created"},[e._v("Created")]),e._v(" "),e._l(t.added,(function(t){return n("div",{key:t.path,staticClass:"wsrev-item-file"},[n("Icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.fileIconTooltip(t.type),expression:"fileIconTooltip(file.type)"}],staticClass:"wsrev-item-icon colored",attrs:{icon:e.fileIcon(t)}}),e._v(" "),n("span",{staticClass:"wsrev-item-file-name",class:t.type,on:{click:function(n){return e.openFile(t,"created")}}},[e._v(e._s(t.path))])],1)}))]:e._e(),e._v(" "),t.removed.length?[n("div",{staticClass:"wsrev-item-section deleted"},[e._v("Deleted")]),e._v(" "),e._l(t.removed,(function(t){return n("div",{key:t.path,staticClass:"wsrev-item-file"},[n("Icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.fileIconTooltip(t.type),expression:"fileIconTooltip(file.type)"}],staticClass:"wsrev-item-icon colored",attrs:{icon:e.fileIcon(t)}}),e._v(" "),n("span",{staticClass:"wsrev-item-file-name",class:t.type,on:{click:function(n){return e.openFile(t,"deleted")}}},[e._v(e._s(t.path))])],1)}))]:e._e(),e._v(" "),t.modified.length?[n("div",{staticClass:"wsrev-item-section modified"},[e._v("Modified")]),e._v(" "),e._l(t.modified,(function(t){return n("div",{key:t.path,staticClass:"wsrev-item-file"},[n("Icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.fileIconTooltip(t.type),expression:"fileIconTooltip(file.type)"}],staticClass:"wsrev-item-icon colored",attrs:{icon:e.fileIcon(t)}}),e._v(" "),n("span",{staticClass:"wsrev-item-file-name",class:t.type,on:{click:function(n){return e.openFile(t,"modified")}}},[e._v(e._s(t.path))])],1)}))]:e._e()],2)]:e._e()],2)}))],2)])],1),e._v(" "),n("SplitPanel",{attrs:{frac:e.splitPanelPreviewFrac,collapsable:"","collapsed-text":"Preview"},on:{"update:frac":function(t){e.splitPanelPreviewFrac=t}}},[n("PaneLayout",{directives:[{name:"show",rawName:"v-show",value:!e.workspacePreviewParam,expression:"!workspacePreviewParam"}],staticClass:"wsrev-pane-layout",attrs:{splittable:"","active-pane":e.activePane,layout:e.layout},on:{"update:activePane":function(t){e.activePane=t},"update:active-pane":function(t){e.activePane=t},itemsClose:e.onPaneLayoutItemsClose},scopedSlots:e._u([{key:"placeholder",fn:function(){return[n("Placeholder",[e._v("Select a revision")])]},proxy:!0}])}),e._v(" "),e.workspacePreviewParam?n("Workspace",{staticClass:"wsrev-workspace-preview",attrs:{type:"code","connect-type":"workspace-revision","connect-param":e.workspacePreviewParam,autofocus:""}}):e._e()],1)],1)],1)}),[],!1,null,null,null).exports),Rt=(n("fbCW"),n("yq1k"),n("YGK4"),n("JTJg"),n("Zova")),Mt=n("EVdn"),Lt=n.n(Mt),Ft={name:"TreeNode",components:{Spinner:F.a,Icon:Fe.a},props:{node:{type:Object,required:!0}},computed:{rootClass:function(){return this.node.type},nodeClass:function(){return{expanded:this.node.expanded,selected:this.node.selected,hidden:this.node.name.startsWith(".")}},nodeStyle:function(){return{"padding-left":14*this.node.depth+"px"}},splitName:function(){return"folder"===this.node.type?{name:this.node.name,extension:""}:C.splitPath(this.node.name)},icon:function(){return C.fileFolderIcon(this.node.name,this.node.type)}}},Bt=(n("MAZk"),Object(E.a)(Ft,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tree-node",class:e.rootClass,attrs:{draggable:"true"},on:{dragstart:function(t){return e.$emit("dragstart",{node:e.node,event:t})}}},[n("div",{staticClass:"tnode-item",class:e.nodeClass,style:e.nodeStyle,on:{click:function(t){return e.$emit("click",{node:e.node,event:t})},contextmenu:function(t){return t.preventDefault(),t.stopPropagation(),e.$emit("contextmenu",{node:e.node,event:t})}}},[n("div",{staticClass:"tnode-glyph-container"},["folder"===e.node.type?n("svg",{staticClass:"tnode-chevron"},[n("path",{attrs:{d:"M1,1 L5,5 L1,9"}})]):e._e()]),e._v(" "),n("Icon",{staticClass:"tnode-icon colored",attrs:{icon:e.icon}}),e._v(" "),n("span",{staticClass:"tnode-label"},[n("span",{staticClass:"tnode-label-name"},[e._v(e._s(e.splitName.name))]),n("span",{staticClass:"tnode-label-ext"},[e._v(e._s(e.splitName.extension?"."+e.splitName.extension:""))])]),e._v(" "),e.node.loading?n("Spinner",{staticClass:"tnode-spinner"}):e._e()],1),e._v(" "),e._l(e.node.children,(function(t){return n("TreeNode",{key:t.name,attrs:{node:t},on:{click:function(t){return e.$emit("click",t)},contextmenu:function(t){return e.$emit("contextmenu",t)},dragstart:function(t){return e.$emit("dragstart",t)}}})}))],2)}),[],!1,null,null,null).exports),qt=n("G7T9"),$t=n("7W7u"),Ut=new Set([".DS_Store","Thumbs.db","desktop.ini","Desktop.ini"]),zt=new Set(["node_modules"]);function Vt(e,t,n){t=Math.max(0,Math.min(e.length-1,t));for(var s=(n=Math.max(0,Math.min(e.length-1,n)))>t?1:-1,i=[],r=t;r!==n;r+=s)i.push(e[r]);return i.push(e[n]),i}var Ht,Wt,Qt,Kt,Yt={components:{TreeNode:Bt},mixins:[Ae.a],props:{nodes:{type:Array,required:!0},selectedNodes:{type:Array,required:!0},showDotNodes:{type:Boolean,default:!0}},computed:{filteredNodes:function(){var e=this,t=new Set(this.selectedNodes);return function n(s,i,r){return r.filter((function(t){return e.showDotNodes||!t.name.startsWith(".")})).map((function(e){return{parent:s,depth:i,type:e.type,expanded:e.expanded,loading:e.loading,name:e.name,path:e.path,selected:t.has(e),children:e.expanded?n(e,i+1,e.children):[],original:e}})).sort((function(e,t){var n=("folder"!==e.type)-("folder"!==t.type);return 0!==n?n:C.naturalComparator(e.name,t.name)}))}(null,0,this.nodes)},filteredNodesFlattened:function(){var e=r.a.mark((function e(t){var n,s,i,a,o,l;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=!0,s=!1,i=void 0,r.prev=3,a=t[Symbol.iterator]();case 5:if(n=(o=a.next()).done){r.next=13;break}return l=o.value,r.next=9,l;case 9:return r.delegateYield(e(l.children),"t0",10);case 10:n=!0,r.next=5;break;case 13:r.next=19;break;case 15:r.prev=15,r.t1=r.catch(3),s=!0,i=r.t1;case 19:r.prev=19,r.prev=20,n||null==a.return||a.return();case 22:if(r.prev=22,!s){r.next=25;break}throw i;case 25:return r.finish(22);case 26:return r.finish(19);case 27:case"end":return r.stop()}}),e,null,[[3,15,19,27],[20,,22,26]])}));return Object(s.a)(e(this.filteredNodes))}},created:function(){this.dragTarget=null,this.dragEnterSet=new Set},mounted:function(){var e=this;this.$watch((function(){return e.selectedNodes[e.selectedNodes.length-1]}),(function(t){t&&e.$nextTick((function(){var n=qt.d(e,(function(e){return qt.j(e.$vnode,Bt)&&e.node.original===t}));n&&Ce.D(Ce.o(e.$el),n.$el)}))}))},methods:{selectNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){var n=new Set(this.selectedNodes),i=!0,r=!1,a=void 0;try{for(var o,l=e[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value;n.delete(c)||n.add(c)}}catch(u){r=!0,a=u}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}e=Object(s.a)(n)}this.$emit("update:selectedNodes",e)},moveSelectionUpDown:function(e){var t=this.selectedNodes[this.selectedNodes.length-1];if(t){var n=this.filteredNodesFlattened.findIndex((function(e){return e.original===t}));-1!==n&&(n+=e?1:-1,this.filteredNodesFlattened[n]&&(t=this.filteredNodesFlattened[n].original),this.selectNodes([t]))}},expandCollapse:function(e){var t=this,n=this.filteredNodesFlattened.find((function(e){return e.original===t.selectedNodes[0]}));if(!e&&1===this.selectedNodes.length&&n&&"folder"!==n.type&&n.parent)this.selectNodes([n.parent]);else{var s=!0,i=!1,r=void 0;try{for(var a,o=this.selectedNodes[Symbol.iterator]();!(s=(a=o.next()).done);s=!0){var l=a.value;"folder"===l.type&&this.$emit("node-expand-collapse",{node:l,expand:e})}}catch(c){i=!0,r=c}finally{try{s||null==o.return||o.return()}finally{if(i)throw r}}}},enter:function(){this.$emit("node-select",{soft:!1})},onClick:function(){this.selectNodes([])},onContextMenu:function(e){this.$emit("context-menu",e)},onNodeClick:(Wt=Object(a.a)(r.a.mark((function e(t){var n,s,i,a,o,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.node,s=t.event,!$t.c(s)&&s.button===$t.a){e.next=3;break}return e.abrupt("return");case 3:if(!Ce.u(s)){e.next=7;break}this.selectNodes([n.original],!0),e.next=20;break;case 7:if(!s.shiftKey||!this.selectedNodes.length){e.next=15;break}i=this.selectedNodes[this.selectedNodes.length-1],a=n.original,o=this.filteredNodesFlattened.findIndex((function(e){return e.original===i})),l=this.filteredNodesFlattened.findIndex((function(e){return e.original===a})),-1!==o&&-1!==l&&this.selectNodes(Vt(this.filteredNodesFlattened,l,o).map((function(e){return e.original}))),e.next=20;break;case 15:return this.selectNodes([n.original]),e.next=18,this.$nextTick();case 18:this.expandCollapse(!n.expanded),this.$emit("node-select",{soft:1===s.detail});case 20:case"end":return e.stop()}}),e,this)}))),function(e){return Wt.apply(this,arguments)}),onNodeContextMenu:function(e){var t=e.node,n=e.event,i=t.original,r=new Set(this.selectedNodes);r.has(i)?r.delete(i):r.clear(),r.add(i),this.selectNodes(Object(s.a)(r)),this.$emit("node-context-menu",n)},getDragNodeTarget:function(e){var t=Lt()(e).closest(".tree-node.folder")[0];return qt.d(this,(function(e){return e.$el===t}))||this},dragNodeEnter:function(e){e.$el.classList.add("over")},dragNodeLeave:function(e){e.$el.classList.remove("over")},onNodeDragStart:function(e){var t=e.node,n=e.event;if(n.dataTransfer){n.stopPropagation(),n.dataTransfer.effectAllowed="move";var s=this.selectedNodes.includes(t.original)?this.selectedNodes.slice():[t.original];if(s.length>1){var i=new Image;i.src=Ce.G,n.dataTransfer.setDragImage(i,0,0)}n.dataTransfer.setData("ed/x-workspace-files",JSON.stringify({files:s.map((function(e){return{type:e.type,path:e.path}}))})),1===s.length&&"file"===s[0].type&&n.dataTransfer.setData("ed/x-pane-item-open-request",JSON.stringify({type:"open-workspace-file",path:s[0].path}))}},onDragOver:function(e){e.preventDefault();var t=new Set(e.dataTransfer.types);t.has("ed/x-workspace-files")?e.dataTransfer.dropEffect="move":t.has("Files")&&(e.dataTransfer.dropEffect="copy")},onDragEnter:function(e){e.preventDefault();var t=this.getDragNodeTarget(e.target);this.dragEnterSet.add(e.target),t!==this.dragTarget&&(this.dragTarget&&this.dragNodeLeave(this.dragTarget),this.dragNodeEnter(t),this.dragTarget=t)},onDragLeave:function(e){this.dragEnterSet.delete(e.target),0===this.dragEnterSet.size&&(this.dragNodeLeave(this.dragTarget),this.dragTarget=null)},onDrop:(Ht=Object(a.a)(r.a.mark((function e(t){var n,s,i,a,o,l,c,u,d,h,p,f,m;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.dragEnterSet.clear(),this.dragTarget){e.next=3;break}return e.abrupt("return");case 3:if(!t.dataTransfer.getData("ed/x-workspace-files")){e.next=14;break}t.preventDefault(),t.stopPropagation(),n=JSON.parse(t.dataTransfer.getData("ed/x-workspace-files")),s=this.dragTarget===this?"/home":this.dragTarget.node.path,i=n.files.map((function(e){return{type:e.type,src:e.path,dest:s+"/"+e.path.substr(e.path.lastIndexOf("/")+1)}})).filter((function(e){return e.src!==e.dest})),this.dragNodeLeave(this.dragTarget),this.dragTarget=null,i.length&&this.$emit("tree-file-move",{moves:i}),e.next=55;break;case 14:t.preventDefault(),t.stopPropagation(),a=[],o=function(e){return e.isFile?Ut.has(e.name)?Ce.b:Ce.a:e.isDirectory&&zt.has(e.name)?Ce.b:Ce.a},l=!0,c=!1,e.prev=20,d=Object(Rt.a)(Ce.C(t.dataTransfer,o));case 22:return e.next=24,d.next();case 24:return h=e.sent,l=h.done,e.next=28,h.value;case 28:if(p=e.sent,l){e.next=38;break}if(f=p,!(a.length>200)){e.next=34;break}return te.a({icon:"warning",title:"Too many files",text:"You are attempting to upload more than 200 files. Try again with less files."}),e.abrupt("return");case 34:a.push(f);case 35:l=!0,e.next=22;break;case 38:e.next=44;break;case 40:e.prev=40,e.t0=e.catch(20),c=!0,u=e.t0;case 44:if(e.prev=44,e.prev=45,l||null==d.return){e.next=49;break}return e.next=49,d.return();case 49:if(e.prev=49,!c){e.next=52;break}throw u;case 52:return e.finish(49);case 53:return e.finish(44);case 54:a.length&&(m=this.dragTarget===this?"/home":this.dragTarget.node.path,this.dragNodeLeave(this.dragTarget),this.dragTarget=null,this.$emit("tree-files-upload",{files:a,path:m}));case 55:case"end":return e.stop()}}),e,this,[[20,40,44,54],[45,,49,53]])}))),function(e){return Ht.apply(this,arguments)})}},Gt=(n("KRl/"),{components:{Tree:Object(E.a)(Yt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tree",class:"tree-"+e.computedTheme,attrs:{tabindex:"0"},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.moveSelectionUpDown(!1))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.moveSelectionUpDown(!0))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:(t.preventDefault(),e.expandCollapse(!1))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"right",39,t.key,["Right","ArrowRight"])?null:"button"in t&&2!==t.button?null:(t.preventDefault(),e.expandCollapse(!0))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.enter(t))}],dragover:e.onDragOver,dragenter:e.onDragEnter,dragleave:e.onDragLeave,drop:e.onDrop}},[e.filteredNodes.length?n("div",{staticClass:"tree-inner",on:{contextmenu:function(t){return t.target!==t.currentTarget?null:(t.preventDefault(),t.stopPropagation(),e.onContextMenu(t))},click:function(t){return t.target!==t.currentTarget?null:e.onClick(t)}}},e._l(e.filteredNodes,(function(t){return n("TreeNode",{key:t.name,attrs:{node:t},on:{click:e.onNodeClick,contextmenu:e.onNodeContextMenu,dragstart:e.onNodeDragStart}})})),1):n("div",{staticClass:"tree-placeholder"},[e._t("default")],2)])}),[],!1,null,null,null).exports,ProgressBar:n("3PXm").a},props:{nodes:{type:Array,required:!0},selectedNodes:{type:Array,required:!0},showDotNodes:{type:Boolean,required:!0},readonly:{type:Boolean,required:!0},filesUploadingCount:{type:Number,required:!0},filesUploadedCount:{type:Number,required:!0}},methods:{pluralize:C.pluralize}}),Xt=(n("ZG5+"),Object(E.a)(Gt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"workspace-tree"},[n("Tree",{staticClass:"wst-tree",attrs:{nodes:e.nodes,"selected-nodes":e.selectedNodes,"show-dot-nodes":e.showDotNodes},on:{"update:selectedNodes":function(t){return e.$emit("update:selectedNodes",t)},"tree-files-upload":function(t){return e.$emit("tree-files-upload",t)},"tree-file-move":function(t){return e.$emit("tree-file-move",t)},"node-select":function(t){return e.$emit("node-select",t)},"node-expand-collapse":function(t){return e.$emit("node-expand-collapse",t)},"node-context-menu":function(t){return e.$emit("node-context-menu",t)},"context-menu":function(t){return e.$emit("context-menu",t)}}},[n("div",{staticClass:"wst-placeholder"},[e.readonly?n("div",{staticClass:"wst-placeholder-title"},[e._v("No Files")]):[n("div",{staticClass:"wst-placeholder-title"},[e._v("Workspace is Empty")]),e._v(" "),n("div",{staticClass:"wst-placeholder-action",on:{click:function(t){return e.$emit("new-file")}}},[e._v("New File")]),e._v(" "),n("div",{staticClass:"wst-placeholder-action",on:{click:function(t){return e.$emit("new-folder")}}},[e._v("New Folder")]),e._v(" "),n("div",{staticClass:"wst-placeholder-action",on:{click:function(t){return e.$emit("upload-file")}}},[e._v("Upload File")])]],2)]),e._v(" "),e.filesUploadingCount?n("div",{staticClass:"wst-uploading"},[n("div",{staticClass:"wst-uploading-text"},[e._v("Uploading "+e._s(e.filesUploadingCount)+" "+e._s(e.pluralize(e.filesUploadingCount,"file"))+"...")]),e._v(" "),n("ProgressBar",{staticClass:"wst-uploading-bar",attrs:{max:e.filesUploadingCount,value:e.filesUploadedCount,fake:.2}})],1):e._e()],1)}),[],!1,null,null,null).exports),Jt={components:{EdButton:Be.a,Spinner:F.a},mixins:[Ae.a],props:{title:{type:String,default:""},reload:{type:Boolean,default:!1}}},Zt=(n("v0bE"),Object(E.a)(Jt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"workspace-overlay",class:"workspace-overlay-"+e.computedTheme},[n("Spinner",{staticClass:"ws-overlay-spinner"}),e._v(" "),n("div",{staticClass:"ws-overlay-text"},[e._v(e._s(e.title))]),e._v(" "),e.$slots.default||e.$scopedSlots.default?n("div",{staticClass:"ws-overlay-error"},[e._t("default")],2):e._e(),e._v(" "),e.reload?n("EdButton",{staticClass:"primary",on:{click:function(t){return e.$emit("reload")}}},[e._v("Reload?")]):e._e()],1)}),[],!1,null,null,null).exports),en=n("sQg2"),tn={inject:["fetch"],components:{ToolbarGroup:$e.a,ToolbarButton:Ue.a},directives:{Tooltip:ie.a},props:{connectType:{type:String,default:""},connectParam:{type:String,default:""}},data:function(){return{ctrl:null,canTalk:!1,muted:!0,deafened:!0,stateLoading:!1,localSound:!1,remoteSound:!1}},computed:{cssClass:function(){return{"wsa-connected":this.connected,"wsa-connecting":this.connecting,"wsa-unmuted":!this.muted&&!this.localSound,"wsa-local-sound":this.localSound,"wsa-remote-sound":this.remoteSound,"wsa-toolbar":!0,"wsa-strip":!0}},disconnected:function(){return!this.ctrl||"disconnected"===this.ctrl.status},connected:function(){return this.ctrl&&"connected"===this.ctrl.status},connecting:function(){return this.ctrl&&"connecting"===this.ctrl.status},isAudioActive:function(){return this.connected&&(!this.muted||!this.deafened)}},beforeDestroy:function(){this.ctrl&&this.ctrl.disconnect()},methods:{muteToggle:(Kt=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.stateLoading=!0,!this.muted){e.next=6;break}return e.next=4,this.ctrl.unmute();case 4:e.next=8;break;case 6:return e.next=8,this.ctrl.mute();case 8:this.stateLoading=!1;case 9:case"end":return e.stop()}}),e,this)}))),function(){return Kt.apply(this,arguments)}),deafenToggle:(Qt=Object(a.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.stateLoading=!0,!this.deafened){e.next=8;break}return this.ctrl.undeafen(),t=this.$refs.au,e.next=6,t.play();case 6:e.next=9;break;case 8:this.ctrl.deafen();case 9:case"end":return e.stop()}}),e,this)}))),function(){return Qt.apply(this,arguments)}),disconnect:function(){this.ctrl&&this.ctrl.disconnect()},connect:function(){var e=this;this.muted=!0,this.deafened=!0,this.ctrl=new en.a(this.fetch),this.ctrl.connect(this.connectType,this.connectParam,{}),this.ctrl.onLocalSound((function(t){e.localSound=t>0})),this.ctrl.onRemoteSound((function(t){e.remoteSound=t>0})),this.ctrl.onDoubleConnect((function(){ne.b({type:"warning",text:"You have connected from another place"})})),this.ctrl.onMicFailed((function(){ne.b({type:"info",text:"Could not capture your microphone, please allow Ed permission to use your microphone if you wish to speak"})})),this.ctrl.onStateUpdate((function(t){e.stateStr=JSON.stringify(t,null,4),e.ctrl.userState&&(e.canTalk=e.ctrl.userState.can_write_audio,e.muted=e.ctrl.userState.muted,e.deafened=e.ctrl.userState.deafened,e.stateLoading=!1)})),this.ctrl.onStream(function(){var t=Object(a.a)(r.a.mark((function t(n){var s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(s=e.$refs.au).srcObject=n,s.autoplay=!0;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.ctrl.onClose((function(){e.ctrl=null,e.$refs.au.srcObject=null}))}}},nn=(n("pPUH"),Object(E.a)(tn,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ToolbarGroup",{class:e.cssClass},[n("audio",{ref:"au",attrs:{autoplay:"",playsinline:""}}),e._v(" "),e.connected||e.connecting?e._e():[n("ToolbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Join Voice Call",expression:"'Join Voice Call'"}],attrs:{icon:"call"},on:{click:e.connect}})],e._v(" "),e.connecting||e.connected?[e.connected?[e.canTalk?n("ToolbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.muted?"Unmute":"Mute",expression:"muted ? 'Unmute' : 'Mute'"}],class:{"wsa-mic-unmuted":!e.muted&&!e.stateLoading,"wsa-mic-active":e.localSound},attrs:{icon:e.muted?"mic-disabled-active":"mic",disabled:e.stateLoading},on:{click:e.muteToggle}}):e._e(),e._v(" "),n("ToolbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.deafened?"Undeafen":"Deafen",expression:"deafened ? 'Undeafen' : 'Deafen'"}],class:{"wsa-headset-active":e.remoteSound},attrs:{icon:e.deafened?"headset-disabled-active":"headset",disabled:e.stateLoading},on:{click:e.deafenToggle}})]:e._e(),e._v(" "),n("div",{staticClass:"wsa-status"},[n("span",{staticClass:"wsa-status-text"},[e._v(e._s(e.ctrl?e.ctrl.displayStatus:""))])]),e._v(" "),n("ToolbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Disconnect",expression:"'Disconnect'"}],attrs:{icon:"call-end"},on:{click:e.disconnect}})]:e._e()],2)}),[],!1,null,null,null).exports),sn=n("W2hi"),rn={directives:{Tooltip:ie.a},components:{Icon:Fe.a,Ticker:sn.a},props:{count:{type:Number,default:0}}},an=(n("PIuy"),Object(E.a)(rn,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:this.count+" online",expression:"`${count} online`"}],staticClass:"workspace-online-indicator"},[t("Icon",{staticClass:"wsoi-users",attrs:{icon:"person"}}),this._v(" "),t("span",{staticClass:"wsoi-count"},[t("Ticker",{attrs:{value:this.count}})],1)],1)}),[],!1,null,null,null).exports),on=n("/ykK"),ln=n("6XG0");function cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function un(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dn,hn={components:{Popup:on.a,EdCheck:ln.a,EdSelect:re.a,EdInput:Ie.a,ContextMenuTrigger:yt.a,ContextMenuItem:_t.a},props:{x:{type:Number,default:0},y:{type:Number,default:0},settings:{type:Object,required:!0}},data:function(){return{model:null,menuSetting:null}},computed:un({},Object(u.e)(["course"])),created:function(){this.disposable=this.settings.onChange(this.updateModel),this.updateModel()},destroyed:function(){this.disposable.dispose()},methods:{updateModel:function(){var e=this;this.model=["wordWrap","lineNumbers","highlightActiveLine","showInvisibles","detectIndentation","softTabs","smartIndent","theme","autoCloseTags","autocomplete","linter","terminalSounds","showHiddenFiles","emmet","tabSize","keyMap","zoom"].map((function(t){return{key:t,value:e.settings.get(t),isSet:e.settings.isSet(t),definition:e.getDefinition(t)}}))},setSetting:function(e,t){this.settings.set(e,t)},resetSetting:function(e){this.settings.unset(e)},getDefinition:function(e){var t=this.settings.getDefinition(e);return"theme"===e&&27===this.course.realm_id&&(t=un({},t,{description:"If you need an explanation you're not L33t enough.",values:t.values.map((function(e){return"dark"===e.value?un({},e,{text:"L33t H4ck0r M0d3"}):e}))})),t}}},pn=(n("8NaZ"),Object(E.a)(hn,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Popup",{attrs:{title:"Settings",x:e.x,y:e.y},on:{close:function(t){return e.$emit("close")}}},[n("div",{staticClass:"wspset-info"},[e._v("\n\t\tSettings will be stored on this device only.\n\t")]),e._v(" "),n("div",{staticClass:"wspset-stack"},e._l(e.model,(function(t){return n("ContextMenuTrigger",{key:t.key,attrs:{active:e.menuSetting===t},on:{"update:active":function(n){e.menuSetting=n?t:null}},scopedSlots:e._u([{key:"trigger",fn:function(s){var i=s.trigger,r=s.attrs;return[n("div",e._b({staticClass:"wspset-stack-item",class:{set:t.isSet},on:{contextmenu:function(e){return e.preventDefault(),i(e)}}},"div",r,!1),["boolean"===t.definition.type?n("EdCheck",{staticClass:"wspset-check",attrs:{label:t.definition.text,description:t.definition.description,value:t.value},on:{input:function(n){return e.setSetting(t.key,n)}}}):[n("div",{staticClass:"wspset-label"},[e._v(e._s(t.definition.text))]),e._v(" "),n("div",{staticClass:"wspset-description"},[e._v(e._s(t.definition.description))]),e._v(" "),"enum"===t.definition.type?n("EdSelect",{staticClass:"wspset-select",attrs:{value:t.value},on:{input:function(n){return e.setSetting(t.key,n)}}},e._l(t.definition.values,(function(t){return n("option",{key:t.value,domProps:{value:t.value}},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.text)+"\n\t\t\t\t\t\t\t")])})),0):e._e(),e._v(" "),"number"===t.definition.type?n("EdInput",{staticClass:"wspset-input",attrs:{value:t.value},on:{blur:function(n){return e.setSetting(t.key,n.target.value)},keydown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.setSetting(t.key,n.target.value)}}}):e._e()]],2)]}},{key:"items",fn:function(){return[n("ContextMenuItem",{key:"reset",attrs:{text:"Reset Setting"},on:{click:function(t){return e.resetSetting(e.menuSetting.key)}}})]},proxy:!0}],null,!0)})})),1)])}),[],!1,null,null,null).exports),fn={components:{Popup:n("UNns").a,Spinner:F.a},props:{x:{type:Number,default:0},y:{type:Number,default:0},session:{type:Object,required:!0}},data:function(){return{loading:!1,items:[]}},mounted:function(){this.update()},methods:{update:(dn=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.session.getNetworkProcesses();case 4:this.items=e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:return e.prev=9,this.loading=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[1,7,9,12]])}))),function(){return dn.apply(this,arguments)}),onItemClick:function(e){this.$emit("launch",{ip:e.ip,port:e.port}),this.$emit("close")}}},mn=(n("gR/7"),Object(E.a)(fn,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Popup",{attrs:{"target-left":e.x,"target-top":e.y,"light-dismissable":"",background:"rgb(241, 240, 232)"},on:{close:function(t){return e.$emit("close")}}},[n("div",{staticClass:"workspace-popup-network"},[n("div",{staticClass:"wspnet-info"},[e._v("\n\t\t\tThe following programs are listening on a port.\n\t\t\tClick an item to open the host in a new tab.\n\t\t")]),e._v(" "),n("div",{staticClass:"wspnet-body"},[e.loading?n("Spinner",{staticClass:"wspnet-spinner"}):e._e(),e._v(" "),!e.loading&&e.items.length?n("div",{staticClass:"wspnet-items"},e._l(e.items,(function(t,s){return n("div",{key:s,staticClass:"wspnet-item",on:{click:function(n){return e.onItemClick(t)}}},[n("div",{staticClass:"wspnet-field"},[n("div",{staticClass:"wspnet-label"},[e._v("Host")]),e._v(" "),n("div",{staticClass:"wspnet-value"},[e._v(e._s(t.ip)+":"+e._s(t.port))])]),e._v(" "),n("div",{staticClass:"wspnet-field"},[n("div",{staticClass:"wspnet-label"},[e._v("Command")]),e._v(" "),n("div",{staticClass:"wspnet-value"},[e._v(e._s(t.command))])])])})),0):e._e(),e._v(" "),e.loading||e.items.length?e._e():n("div",{staticClass:"wspnet-none"},[e._v("No programs detected")])],1)])])}),[],!1,null,null,null).exports),vn={props:{value:{type:Number,default:0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},thumbSize:{type:Number,default:16}},destroyed:function(){this.releaseMouse()},methods:{captureMouse:function(){document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)},releaseMouse:function(){document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp)},handleMouseDown:function(e){0===e.button&&(this.captureMouse(),e.preventDefault(),this.handleMouseMove(e))},handleMouseUp:function(e){0===e.button&&this.releaseMouse()},handleMouseMove:function(e){var t=this.$el.getBoundingClientRect(),n=(e.clientX-t.left-this.thumbSize/2)/(t.width-this.thumbSize)||0,s=Math.min(1,Math.max(0,n))*(this.max-this.min),i=0===this.step?s:Math.round(s/this.step)*this.step,r=this.min+i;this.$emit("input",r)}}},bn=Object(E.a)(vn,(function(){var e=this.$createElement;return(this._self._c||e)("div",{on:{mousedown:this.handleMouseDown}},[this._t("default")],2)}),[],!1,null,null,null).exports,gn=n("bdgK"),yn={props:{intervals:{type:Array,required:!0}},created:function(){this.ctx=null,this.dirty=!1,this.animationFrame=-1,this.width=0,this.height=0,this.ratio=1},mounted:function(){this.init()},destroyed:function(){this.uninit()},methods:{invalidate:function(){var e=this;this.dirty||(this.dirty=!0,this.animationFrame=requestAnimationFrame((function(){return e.render()})))},init:function(){var e=this;this.resizeObserver=new gn.a((function(){return e.resize()})),this.resizeObserver.observe(this.$el),this.ctx=this.$refs.canvas.getContext("2d");var t=Math.min(window.devicePixelRatio||1,4),n=Ce.p(this.ctx,"backingStorePixelRatio")||1;this.ratio=t/n,this.resize(),this.render()},uninit:function(){cancelAnimationFrame(this.animationFrame),this.resizeObserver&&this.resizeObserver.disconnect()},resize:function(){this.width=this.$el.clientWidth,this.height=this.$el.clientHeight,this.$refs.canvas.width=Math.ceil(this.width*this.ratio),this.$refs.canvas.height=Math.ceil(this.height*this.ratio),this.$refs.canvas.style.width=this.width+"px",this.$refs.canvas.style.height=this.height+"px",this.ctx.scale(this.ratio,this.ratio),this.render()},renderIntervalTicks:function(e,t,n){var s=this.width*t,i=this.width*n;this.ctx.strokeStyle="#bbb",this.ctx.lineWidth=1/this.ratio;var r=e[0]||0,a=e[e.length-1]||0,o=!0,l=!1,c=void 0;try{for(var u,d=e[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var h=s+i*((u.value-r)/(a-r)||0);this.ctx.beginPath(),this.ctx.moveTo(h,this.height/2),this.ctx.lineTo(h,this.height),this.ctx.stroke()}}catch(p){l=!0,c=p}finally{try{o||null==d.return||d.return()}finally{if(l)throw c}}},renderIntervalBoundary:function(e,t,n){var s=this.width*t,i=this.width*n;this.ctx.strokeStyle="rgba(0, 0, 0, 0.8)",this.ctx.beginPath(),this.ctx.moveTo(s+i,0),this.ctx.lineTo(s+i,this.height),this.ctx.stroke()},render:function(){this.dirty=!1,this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.width,this.height);var e=this.intervals.reduce((function(e,t){return e+t.duration}),0),t=0,n=!0,s=!1,i=void 0;try{for(var r,a=this.intervals[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value,l=o.duration/e;this.renderIntervalTicks(o.timestamps,t,l),t+=l}}catch(v){s=!0,i=v}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}t=0;var c=!0,u=!1,d=void 0;try{for(var h,p=this.intervals[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var f=h.value,m=f.duration/e;this.renderIntervalBoundary(f.timestamps,t,m),t+=m}}catch(v){u=!0,d=v}finally{try{c||null==p.return||p.return()}finally{if(u)throw d}}}}},wn=(n("Otsd"),{components:{SliderController:bn,ReplayEvents:Object(E.a)(yn,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"replay-events"},[t("canvas",{ref:"canvas"})])}),[],!1,null,null,null).exports},props:{value:{type:Number,default:0},progress:{type:Number,default:void 0},timestamps:{type:Array,required:!0},idleInterval:{type:Number,default:6e6}},computed:{timestamp:function(){return this.timestamps[this.value]},intervals:function(){var e,t=[],n=!0,s=!1,i=void 0;try{for(var r,a=this.timestamps[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value;(!e||o-e[e.length-1]>this.idleInterval)&&(e=[],t.push(e)),e.push(o)}}catch(l){s=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}return t.map((function(e){return{timestamps:e,duration:e[e.length-1]-e[0]}}))},intervalDurationSum:function(){return this.intervals.reduce((function(e,t){return e+t.duration}),0)},valueStyle:function(){return"flex-grow: ".concat(this.valueToFrac(this.value))},progressStyle:function(){return"flex-grow: ".concat(this.valueToFrac(this.progress))}},methods:{fracToValue:function(e){var t,n=e*this.intervalDurationSum,s=0,i=!0,r=!1,a=void 0;try{for(var o,l=this.intervals[Symbol.iterator]();!(i=(o=l.next()).done)&&!(n<=(t=o.value).duration);i=!0)s+=t.timestamps.length,n-=t.duration}catch(d){r=!0,a=d}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}for(var c=0;c<t.timestamps.length-1;c++){var u=t.timestamps[c+1]-t.timestamps[c];if(n<u)break;n-=u,s++}return s},valueToFrac:function(e){var t=this.timestamps[e],n=C.binarySearch(this.intervals,(function(e){var n=e.timestamps;return t<n[0]?1:t>n[n.length-1]?-1:0})),s=this.intervals[n],i=0,r=!0,a=!1,o=void 0;try{for(var l,c=this.intervals[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;if(u===s)break;i+=u.duration}}catch(d){a=!0,o=d}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return(i+=t-s.timestamps[0])/this.intervalDurationSum},handleInput:function(e){var t=e/(this.timestamps.length-1);(e=this.fracToValue(t))!==this.value&&this.$emit("input",e)}}}),_n=(n("Q0TP"),Object(E.a)(wn,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("SliderController",{staticClass:"replay-slider",attrs:{value:e.value,min:0,max:e.timestamps.length-1,step:0},on:{input:e.handleInput}},[n("ReplayEvents",{staticClass:"replay-slider-events",attrs:{intervals:e.intervals}}),e._v(" "),n("div",{staticClass:"replay-slider-layer"},[n("div",{staticClass:"replay-slider-progress",style:e.progressStyle})]),e._v(" "),n("div",{staticClass:"replay-slider-layer"},[n("div",{staticClass:"replay-slider-space",style:e.valueStyle}),e._v(" "),n("div",{staticClass:"replay-slider-thumb"})])],1)}),[],!1,null,null,null).exports),kn={components:{DateDisplay:vt.a},props:{date:{type:null,required:!0}}},Cn=(n("y6Gm"),Object(E.a)(kn,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"replay-date"},[t("DateDisplay",{staticClass:"replay-date-day",attrs:{date:this.date,format:"ddd D/M/YYYY"}}),this._v(" "),t("DateDisplay",{staticClass:"replay-date-time",attrs:{date:this.date,format:"HH:mm:ss"}})],1)}),[],!1,null,null,null).exports),xn=(n("9AGB"),Object(E.a)({},(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"workspace-pane-placeholder"},[this._t("default")],2)}),[],!1,null,null,null).exports),jn=(n("ziPU"),Object(E.a)({},(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"workspace-toolbar-mini"},[this._t("default")],2)}),[],!1,null,null,null).exports),On=n("2RTD"),Sn=n("dA1T");var En={directives:{Tooltip:ie.a},components:{Icon:Fe.a},props:{latency:{type:Number,default:null}},computed:{style:function(){if(null!=this.latency){var e=(n=Math.min(1,Math.max(0,this.latency/600)),s=1.2,(Math.exp(s*n)-1)/(Math.exp(s)-1)),t=Math.floor(120*(1-e));return{fill:null===this.latency?"#888":"hsl(".concat(t,", 100%, 50%)")}}var n,s},tooltip:function(){return null==this.latency?"Latency: Unknown":"Latency: ".concat(Math.round(this.latency),"ms")}}},Tn=(n("QKZj"),Object(E.a)(En,(function(){var e=this.$createElement;return(this._self._c||e)("Icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:this.tooltip,expression:"tooltip"}],staticClass:"workspace-latency-indicator",style:this.style,attrs:{icon:"circle"}})}),[],!1,null,null,null).exports),In={components:{ContextMenuTrigger:yt.a,CodemirrorSettingsMenuItems:Sn.a,Spinner:F.a,LatencyIndicator:Tn},props:{parent:{type:Object,required:!0}}},Dn=Object(E.a)(In,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ws-sb",class:e.parent.statusClass},[n("span",{staticClass:"ws-sb-group"},[e.parent.computedChrome?e._e():[e.parent.statusDescription?n("span",{staticClass:"ws-sb-item"},[e._v(e._s(e.parent.statusDescription))]):e._e(),e._v(" "),e.parent.statusCursorPos?n("span",{staticClass:"ws-sb-item"},[e._v(e._s(e.parent.statusCursorPos))]):e._e(),e._v(" "),e.parent.activeCodeEditorItem?n("ContextMenuTrigger",{attrs:{active:e.parent.tabsMenuVisible,action:"toggle","anchor-y":1,"target-anchor-y":0},on:{"update:active":function(t){return e.$set(e.parent,"tabsMenuVisible",t)}},scopedSlots:e._u([{key:"trigger",fn:function(t){var s=t.trigger,i=t.attrs;return[n("button",e._b({staticClass:"ws-sb-btn",class:{active:e.parent.tabsMenuVisible},on:{click:s}},"button",i,!1),[e._v(e._s(e.parent.tabButtonText))])]}},{key:"items",fn:function(){return[n("CodemirrorSettingsMenuItems",{attrs:{"show-invisibles":e.parent.showInvisibles,"detect-indentation":e.parent.detectIndentation,"soft-tabs":e.parent.softTabs,"tab-size":e.parent.tabSize},on:{"update:showInvisibles":function(t){return e.parent.workspaceSettings.set("showInvisibles",t)},"update:detectIndentation":function(t){return e.parent.workspaceSettings.set("detectIndentation",t)},"update:softTabs":function(t){return e.parent.workspaceSettings.set("softTabs",t)},"update:tabSize":function(t){return e.parent.workspaceSettings.set("tabSize",t)},convertIndentation:e.parent.convertIndentation}})]},proxy:!0}],null,!1,1503202327)}):e._e()]],2),e._v(" "),e.parent.statusMasquerade?n("span",{staticClass:"ws-sb-item ws-sb-masquerade"},[e._v(e._s(e.parent.statusMasquerade))]):e._e(),e._v(" "),n("span",{staticClass:"ws-sb-group"},[e.parent.statusSaving?n("Spinner",{staticClass:"ws-sb-item ws-sb-saving-spinner"}):e._e(),e._v(" "),n("span",{staticClass:"ws-sb-item ws-sb-text"},[e._v(e._s(e.parent.status.text))]),e._v(" "),n("LatencyIndicator",{staticClass:"ws-sb-latency-indicator",attrs:{latency:e.parent.ctrl.latency}})],1)])}),[],!1,null,null,null).exports;function Pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function An(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pn(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Nn,Rn,Mn,Ln,Fn,Bn,qn,$n,Un=(Nn=1,function(){return Nn++}),zn={name:"Workspace",inject:["snippetApi","workspaceApi","fetch","networkMonitorService","sessionService","eventBus","workspaceSettings","keyboardShortcutManager"],directives:{Tooltip:ie.a},components:{FadeTransition:B.a,Theme:Le,EdButton:Be.a,Toolbar:qe.a,ToolbarGroup:$e.a,ToolbarButton:Ue.a,ToolbarSpace:ze,Icon:Fe.a,Spinner:F.a,PaneLayout:Ve.a,SheetContainer:He.a,Split:We.a,SplitPanel:Qe.a,ListView:Ke.a,Chat:ft,Avatar:Ze.a,ContentDialog:mt.a,IframeLoader:$,DateDisplay:vt.a,Revisions:Nt,Trigger:bt.a,ContextMenuTrigger:yt.a,ContextMenu:wt.a,ContextMenuItem:_t.a,ContextMenuSeparator:kt.a,Tree:Xt,Overlay:Zt,ToolbarAudio:nn,OnlineIndicator:an,PopupSettings:pn,PopupNetwork:mn,ReplaySlider:_n,ReplayDate:Cn,Placeholder:xn,Vnodes:gt.a,Terminal:Y.a,ToolbarMini:jn,ToolbarMiniButton:On.a,StatusBar:Dn,Wrapper:{functional:!0,render:function(e,t){var n=t.scopedSlots;return t.parent.$scopedSlots.layout?t.parent.$scopedSlots.layout({children:n.default&&n.default()||[],fixedTerminal:n.fixedTerminal&&n.fixedTerminal()||[],fixedTerminalLoading:t.parent.fixedTerminalLoading,fixedTerminalOpen:!!t.parent.fixedTerminalId,fixedTerminalMessage:t.parent.fixedTerminalMessage}):n.default&&n.default()}}},mixins:[Ae.a],props:{connectType:{type:String,required:!0},connectParam:{type:null,required:!0},connectPassword:{type:String,default:null},connectIpHash:{type:Number,default:null},connectUserId:{type:Number,default:null},chrome:{type:String,default:null},buildCommand:{type:String,default:null},simple:{type:Boolean,default:!1},chat:{type:Boolean,default:!1},keepOpen:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},showUserEmail:{type:Boolean,default:!1},openTerminalCommand:{type:String,default:""},openTerminalDisabled:{type:Boolean,default:!1}},data:function(){return{ctrl:null,treeOpen:!1,fullscreen:!1,snippetsVisible:!1,chatVisible:!1,hasNewChatMessages:!1,statusSaving:!1,statusSavingLong:!1,revisionsVisible:!1,fixedTerminalId:null,fixedTerminalLoading:!1,fixedTerminalMessage:null,saveDate:new Date,activePane:null,snippets:[],selectedSnippet:null,loadingSnippets:!1,loadedSnippets:!1,loaded:!1,jupyterUrl:null,rstudioUrl:null,layout:new k.a,replayPlaying:!1,replayRealTime:!1,replayPosition:0,replaySpeed:0,replayVisible:!1,chromeOverride:!1,softTabs:null,tabSize:null,detectIndentation:!1,showInvisibles:!1,terminalSounds:!1,showHiddenFiles:!1,menuVisible:!1,menuTreeVisible:!1,menuTreeX:0,menuTreeY:0,menuTreeNodeVisible:!1,menuTreeNodeX:0,menuTreeNodeY:0,menuNewFileFolderVisible:!1,popupSettingsVisible:!1,popupNetworkVisible:!1,tabsMenuVisible:!1,splitPanelFilesFrac:220,splitPanelWorkspaceFrac:1,splitPanelSnippetsFrac:250,splitPanelChatFrac:250,splitPanelChatUsersFrac:200,splitPanelChatDisplayFrac:1,splitPanelCompactTreeFrac:200,splitPanelCompactContentFrac:1}},computed:An({},Object(u.e)(["user","course"]),{},Object(u.c)(["isStaff","isAdmin","isUserAdmin"]),{cssClass:function(){return["ws-".concat(this.computedTheme),this.computedSimple&&"ws-simple"]},connectOptions:function(){return{keepOpen:this.keepOpen}},placeholder:function(){return this.ctrl.replay?"":this.ctrl.readonly?"Open a file to get started":"Create or open a file to get started"},onlineIndicator:function(){return"workspace"===this.connectType&&!this.computedChrome},toolbarAudio:function(){return"workspace"===this.connectType&&!this.computedChrome&&this.course.settings.voiceover},singleSelectedNode:function(){return 1===this.ctrl.selectedNodes.length?this.ctrl.selectedNodes[0]:null},loading:function(){return this.ctrl.loading},computedSimple:function(){return this.simple&&!this.chrome},_statusSaving:function(){return this.ctrl&&this.ctrl.editorSessions.some((function(e){return e.status()===x.g}))},status:function(){var e={text:null};return this.statusSaving?e.text="Saving...":this.ctrl.readonly?e.text="Workspace is in readonly mode. You will not be able to create, modify or delete files.":this.ctrl.temporary?e.text="Changes will not be saved":this.computedChrome?e.text="":e.text="All changes saved",e},statusMasquerade:function(){var e=this.ctrl.masqueradedUser;if(e&&e.id!==this.user.id){var t=this.showUserEmail?e.email:e.name;return"Masquerading as ".concat(t)}return""},statusCursorPos:function(){if(this.activeCodeEditorItem&&this.activeCodeEditorItem.cursorPos)return"".concat(this.activeCodeEditorItem.cursorPos.row,":").concat(this.activeCodeEditorItem.cursorPos.col)},statusDescription:function(){return this.activeItem&&(this.activeItem.status||this.activeItem.constructor.fileAssociation&&this.activeItem.path||this.activeItem.constructor.description)||""},statusClass:function(){if(this.ctrl.readonly||this.ctrl.temporary)return"warning"},participants:function(){return this.ctrl.participants.slice().sort((function(e,t){return e.online&&!t.online?-1:t.online&&!e.online?1:C.naturalComparator(e.name,t.name)}))},onlineParticipants:function(){return this.participants.filter((function(e){return e.online}))},computedOpenTerminalEnabled:function(){return!this.ctrl.readonly&&!this.openTerminalDisabled},snippetsEnabled:function(){return this.course&&27===this.course.realm_id},filteredSnippets:function(){return this.snippets.slice().sort((function(e,t){return C.naturalComparator(e.name,t.name)}))},jupyterEnabled:function(){return this.course&&-1===[430,420,453,451].indexOf(this.course.id)},rstudioEnabled:function(){return this.course&&-1===[430,420,453,451].indexOf(this.course.id)},remoteDesktopEnabled:function(){return this.course&&200===this.course.id},remoteDesktopPaneItem:function(){return this.layout.findItem((function(e){return e instanceof Se}))},activeItem:{get:function(){return this.activePane&&this.activePane.selectedItem},set:function(e){this.activePane=e.parent,this.activePane.selectedItem=e}},activeCodeEditorItem:function(){return this.activeItem instanceof O?this.activeItem:null},replayTimestamp:function(){return this.ctrl.replayTimestamps[this.ctrl.replayState.position]},replayEnabled:function(){return"standard"===this.ctrl.workspaceSession.type&&!this.computedChrome&&!this.ctrl.replay},computedChrome:function(){return this.chromeOverride?null:this.chrome},tabButtonText:function(){var e=this.detectIndentation,t=this.softTabs,n=this.tabSize,s=this.activeCodeEditorItem;return s&&(null!=s.softTabs&&(t=s.softTabs),null!=s.tabSize&&(n=s.tabSize)),"".concat(t?"Spaces: ".concat(n):"Tabs").concat(e?" (Auto)":"")}}),watch:{"ctrl.filesUploading":function(e){e.length>0&&(this.treeOpen=!0)},"ctrl.readonly":function(e){this.$emit("readonly",e)},"ctrl.temporary":function(e){this.$emit("temporary",e)},"ctrl.workspaceSession.wid":function(e){this.$emit("wid",e)},"ctrl.masqueradedUser":function(e){this.$emit("masqueraded-user",e)},_statusSaving:function(e){var t=this;null!=this.statusSavingTimeout&&(clearTimeout(this.statusSavingTimeout),this.statusSavingTimeout=null),null!=this.statusSavingLongTimeout&&(clearTimeout(this.statusSavingLongTimeout),this.statusSavingLongTimeout=null),e?(this.statusSavingTimeout=setTimeout((function(){t.statusSaving=!0}),2e3),this.statusSavingLongTimeout=setTimeout((function(){t.statusSavingLong=!0}),3e4)):(this.statusSaving=!1,this.statusSavingLong=!1,this.saveDate=new Date)},activeItem:function(e){if(e instanceof O&&e.path.match(/\.html?/i)&&this.$emit("web-preview-url",this.ctrl.getWebPreviewUrl(e.path)),e&&e.constructor.fileAssociation){var t=this.ctrl.findNode(e.path);this.ctrl.selectedNodes=t?[t]:[]}else e instanceof ue?this.selectedSnippet=e.snippet:this.ctrl.selectedNodes=[]}},created:function(){var e=this;this.pendingEditorSessions=new Map,this.pendingMessages=new Map,this.fixedTerminalTimeout=null,this.reopenFixedTerminalPending=!1,this.disposables=new se.a(this.eventBus.on("page-visibility:focused",this.onPageFocus),this.eventBus.on("network:status",this.onNetworkStatus),Ce.y(this.onFullscreenChange),Ce.f(window,"message",this.onWindowMessage),this.workspaceSettings.onChange((function(){return e.updateSettings()})),this.keyboardShortcutManager.register({default:"Control+\\",mac:"Meta+\\"},this.toggleTree,{description:"Toggle file tree"})),this.reloadWebPreviewPaneItems=c()(this.reloadWebPreviewPaneItems,500),this.ctrl=new Ne.a(this.fetch,this.sessionService),this.ctrl.onEditorSessionOpen(this.onCtrlEditorSessionOpen),this.ctrl.onEditorSessionSubsume(this.onCtrlEditorSessionSubsume),this.ctrl.onEditorSessionClose(this.onCtrlEditorSessionClose),this.ctrl.onDisplayError(this.onCtrlDisplayError),this.ctrl.onFileFolderMove(this.onCtrlFileFolderMove),this.ctrl.onTerminalOpen(this.onCtrlTerminalOpen),this.ctrl.onTerminalClose(this.onCtrlTerminalClose),this.ctrl.onTerminalData(this.onCtrlTerminalData),this.ctrl.onTerminalUpdate(this.onCtrlTerminalUpdate),this.ctrl.onTerminalOpenNotify(this.onCtrlTerminalOpenNotify),this.ctrl.onReplayUpdate(this.onCtrlReplayUpdate),this.ctrl.onFileCreate(this.onCtrlFileCreate),this.ctrl.onFileRemove(this.onCtrlFileRemove),this.ctrl.onFolderCreate(this.onCtrlFolderCreate),this.ctrl.onFileOt(this.onCtrlFileOt),this.ctrl.onChat(this.onCtrlChat),this.ctrl.onInit(this.onCtrlInit),this.updateSettings(),this.load(),this.$watch((function(){return!(e.ctrl.loading||e.ctrl.editorSessions.length&&e.computedSimple)}),(function(t){t&&(e.treeOpen=!0)})),this.$watch((function(){return!e.ctrl.loading}),(function(t){if(t){var n=!0,s=!1,i=void 0;try{for(var r,a=e.layout.itemsOfType(O)[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value;e.ctrl.pendingInitialOpenFiles.has(o.path)||e.closePlaintextFile(o,{notifyServer:!1})}}catch(c){s=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}if(!e.loaded&&e.ctrl.initialOpenFile){var l=e.getPaneItemCodeEditor(e.ctrl.initialOpenFile);l&&l.activate()}e.reinitJupyterPaneItems(),e.loaded=!0}})),this.$watch((function(){return e.connectType,e.connectParam,e.connectUserId,{}}),(function(){e.unload(),e.load()})),this.$watch((function(){return e.computedSimple&&!e.layout.root}),(function(t){t&&e.layout.setRoot(new k.c)}),{immediate:!0})},beforeDestroy:function(){this.unload(),this.disposables.dispose()},methods:{isAudioActive:function(){return this.$refs.toolbarAudio&&this.$refs.toolbarAudio.isAudioActive},onTreeContextMenu:function(e){this.menuTreeVisible=!0,this.menuTreeX=e.clientX+window.pageXOffset,this.menuTreeY=e.clientY+window.pageYOffset},onTreeNodeContextMenu:function(e){this.menuTreeNodeVisible=!0,this.menuTreeNodeX=e.clientX+window.pageXOffset,this.menuTreeNodeY=e.clientY+window.pageYOffset},ensureActivePane:function(){return this.activePane||(this.activePane=this.layout.getOrCreateFirstPane())},convertIndentation:function(e){this.activeCodeEditorItem&&this.activeCodeEditorItem.convertIndentation(e)},getPaneItemCodeEditor:function(e){return this.layout.findItem((function(t){return t instanceof O&&t.path===e}))},getPaneItemImage:function(e){return this.layout.findItem((function(t){return t instanceof A&&t.path===e}))},getPaneItemPdf:function(e){return this.layout.findItem((function(t){return t instanceof M&&t.path===e}))},getPaneItemTerminal:function(e){return this.layout.findItem((function(t){return t instanceof X&&t.terminalId===e}))},getPaneItemSnippet:function(e){return this.layout.findItem((function(t){return t instanceof ue&&t.snippet===e}))},getPaneItemJupyter:function(e){return this.layout.findItem((function(t){return t instanceof z&&t.path===e}))},load:function(){this.ctrl.load(this.connectType,this.connectParam,{userId:this.connectUserId,password:this.connectPassword,ipHash:this.connectIpHash})},unload:function(){this.ctrl.unload();var e=!0,t=!1,n=void 0;try{for(var s,i=this.layout.items()[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){var r=s.value;r instanceof O?this.closePlaintextFile(r,{notifyServer:!1}):r instanceof X&&this.closeTerminal(r.terminalId,{notifyServer:!1})}}catch(h){t=!0,n=h}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.stopFixedTerminalTimeout(),this.fixedTerminalId=null,this.fixedTerminalLoading=!1,this.fixedTerminalMessage=null,this.reopenFixedTerminalPending=!1;var a=!0,o=!1,l=void 0;try{for(var c,u=this.layout.items()[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;d.parent.removeItem(d,{autoclose:!0})}}catch(h){o=!0,l=h}finally{try{a||null==u.return||u.return()}finally{if(o)throw l}}this.pendingEditorSessions.clear(),this.pendingMessages.clear(),this.snippets=[],this.selectedSnippet=null,this.loadingSnippets=!1,this.loadedSnippets=!1,this.loaded=!1},updateSettings:function(){this.softTabs=this.workspaceSettings.get("softTabs"),this.tabSize=this.workspaceSettings.get("tabSize"),this.detectIndentation=this.workspaceSettings.get("detectIndentation"),this.showInvisibles=this.workspaceSettings.get("showInvisibles"),this.terminalSounds=this.workspaceSettings.get("terminalSounds"),this.showHiddenFiles=this.workspaceSettings.get("showHiddenFiles")},showPathInputSheet:function(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=(this.$createElement,{data:function(){return{value:t}},render:function(){var t=this,i=arguments[0];return i(Pe,{attrs:{selectName:s.selectName,prefix:"/home/",value:this.value},on:{input:function(e){return t.value=e},submit:function(){return n(t.value)},cancel:function(){return n(null)}}},[e])}});this.$refs.sheetContainer.showSheet(i,n)},showNameInputSheet:function(e,t){this.$createElement;var n={data:function(){return{value:""}},render:function(){var n=this,s=arguments[0];return s(Pe,{attrs:{value:this.value},on:{input:function(e){return n.value=e},submit:function(){return t(n.value)},cancel:function(){return t(null)}}},[e])}};this.$refs.sheetContainer.showSheet(n,t)},newFileFolder:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=function(e){e?t.createNewFileFolder(e,n)&&(t.$refs.sheetContainer.closeSheet(),n||t.openFile(e)):t.$refs.sheetContainer.closeSheet()},i="folder"===e.type?e.path:e.parent.path;"/"!==i[i.length-1]&&(i+="/"),this.showPathInputSheet("Enter the path for the new ".concat(n?"folder":"file","."),i,s)},createNewFileFolder:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.ctrl.findNode(e);if(n){if(t||"file"!==n.type)return te.a({title:"A file or folder with that name already exists",text:"Please choose a different name.",icon:"warning"}),!1;this.ctrl.openEditorSession(e)}else this.ctrl.fileFolderCreate(e,t);return!0},deleteSelectedFileFolder:($n=Object(a.a)(r.a.mark((function e(){var t,n,s,i,a,o,l,c,u,d,h,p,f,m;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this.ctrl.selectedNodes.slice()).length){e.next=3;break}return e.abrupt("return");case 3:return 1===t.length?(s=t[0],n="Delete ".concat(s.type," ").concat(s.name).concat("folder"===s.type?" and all of its contents":"","?")):n="Delete selected files and folders?",e.next=6,te.b({title:n,text:"This cannot be undone.",icon:"warning",primaryAction:"Delete",secondaryAction:"Cancel"});case 6:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:for(t.sort((function(e,t){return e.path<t.path?-1:1})),i=[],o=!0,l=!1,c=void 0,e.prev=13,u=t[Symbol.iterator]();!(o=(d=u.next()).done);o=!0)h=d.value,a?h.path.startsWith(a)||(i.push(h),a="folder"===h.type?h.path+"/":null):(i.push(h),"folder"===h.type&&(a=h.path+"/"));e.next=21;break;case 17:e.prev=17,e.t0=e.catch(13),l=!0,c=e.t0;case 21:e.prev=21,e.prev=22,o||null==u.return||u.return();case 24:if(e.prev=24,!l){e.next=27;break}throw c;case 27:return e.finish(24);case 28:return e.finish(21);case 29:for(p=0,f=i;p<f.length;p++)m=f[p],this.ctrl.fileFolderRemove(m.path,m.type);case 30:case"end":return e.stop()}}),e,this,[[13,17,21,29],[22,,24,28]])}))),function(){return $n.apply(this,arguments)}),renameSelectedFileFolder:function(){var e=this;if(1===this.ctrl.selectedNodes.length){var t=this.ctrl.selectedNodes[0],n=t.path;this.showPathInputSheet("Enter a new name for the ".concat(t.type,"."),n,(function(s){if(s){if(s!==n){if(e.ctrl.findNode(s))return void te.a({title:"File or folder with that name already exists",text:"Choose a different name.",icon:"warning"});e.ctrl.fileFolderMove(t.path,s,t.type)}e.$refs.sheetContainer.closeSheet()}else e.$refs.sheetContainer.closeSheet()}),{selectName:!0})}},commit:(qn=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("jupyter"!==this.computedChrome||!this.$refs.chromeIframe){e.next=8;break}return e.prev=1,e.next=4,this.postMessage(this.$refs.chromeIframe.getContentWindow(),"save-notebook");case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:return e.next=10,this.ctrl.commit();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(){return qn.apply(this,arguments)}),toggleChromeOverride:(Bn=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.chromeOverride,e.t0){e.next=5;break}return e.next=4,te.b({title:"Switch to full workspace view?",text:"Ensure you have saved any open files first.",primaryAction:"Switch"});case 4:e.t0=e.sent;case 5:if(!e.t0){e.next=7;break}this.chromeOverride=!this.chromeOverride;case 7:case"end":return e.stop()}}),e,this)}))),function(){return Bn.apply(this,arguments)}),downloadFileFolder:(Fn=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.ctrl.getDownloadUrl(t);case 3:n=e.sent,e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),ne.b({type:"error",text:"Unable to download."}),e.abrupt("return");case 10:Ce.j(n);case 11:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(e){return Fn.apply(this,arguments)}),downloadWorkspaceLog:function(){this.workspaceApi.downloadLog(this.ctrl.workspaceSession.wid,this.sessionService.authToken)},uploadToFolderNode:function(e){var t=this,n="folder"===e.type?e.path:e.parent.path;Ce.m((function(e){e=e.map((function(e){return{file:e,path:e.name}})),t.uploadFiles(e,n)}),{multiple:!0})},uploadFiles:(Ln=Object(a.a)(r.a.mark((function e(t,n){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=1===t.length&&t[0].path.match(/\.(zip|jar)$/i),!e.t0){e.next=5;break}return e.next=4,te.b({title:"Extract files?",text:"Do you want to extract the archive after uploading?",subtext:"Files in the archive will be extracted into the destination folder and the archive will be deleted. Existing files in the destination folder will be overwritten if they have the same name as any file in the archive.",icon:"question",primaryAction:"Upload and Extract",secondaryAction:"Upload"});case 4:e.t0=e.sent;case 5:return s=e.t0,n+="/",s||(n+="dummy"),e.prev=8,e.next=11,this.ctrl.upload(t,n);case 11:e.next=17;break;case 13:return e.prev=13,e.t1=e.catch(8),ne.b({type:"error",text:"Unable to upload files."}),e.abrupt("return");case 17:case"end":return e.stop()}}),e,this,[[8,13]])}))),function(e,t){return Ln.apply(this,arguments)}),insertPaneItemInAsidePosition:function(e){var t=this.ensureActivePane();if(this.computedSimple)t.appendItem(e);else if(this.layout.root instanceof k.c)0===this.layout.root.items.length?this.layout.root.appendItem(e):this.layout.root.split("right").appendItem(e);else{var n=Object(s.a)(this.layout.itemsOfType(e.constructor)),i=n[n.length-1];if(i)if(1===i.parent.items.length)if(i.parent.parent&&"horizontal"!==i.parent.parent.orientation){var r=new k.c;i.parent.parent.appendChild(r),r.appendItem(e)}else i.parent.split("down").appendItem(e);else{var a=i.parent.items.indexOf(i)+1;i.parent.insertItem(e,a)}else if("horizontal"===this.layout.root.orientation){var o=new k.c;this.layout.root.appendChild(o),o.appendItem(e)}else this.layout.root.split("right").appendItem(e)}},ensurePaneItemCodeEditor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getPaneItemCodeEditor(e);if(n)return n;var s,i=new O(this,e);(i.openingSoft=t.soft||!1,t&&t.pane)?t.pane.insertItem(i,t.index):((!this.activePane||this.activePane.items.length&&this.activePane.items.every((function(e){return e instanceof X})))&&(s=this.layout.findPane((function(e){return e.items.some((function(e){return e instanceof O}))}))),(s||this.ensureActivePane()).appendItem(i));return i},ensurePaneItemTerminal:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getPaneItemTerminal(e);if(n)return n;if(null!=e){var i=this.getPaneItemTerminal(null);if(i)return i.loading=!1,i.terminalId=e,i}var r=new X(this);if(r.terminalId=e,this.layout.root instanceof k.c)this.computedSimple||0===this.layout.root.items.length?this.layout.root.appendItem(r):this.layout.root.split("down").appendItem(r);else{var a=Object(s.a)(this.layout.itemsOfType(X)),o=a[a.length-1];if(o){var l=o.parent.items.indexOf(o)+1;o.parent.insertItem(r,l)}else this.layout.root?this.layout.root.split("down").appendItem(r):this.ensureActivePane().appendItem(r)}return t.data&&this.$nextTick((function(){r.terminal.write(t.data)})),this.$nextTick((function(){r.terminal.focus()})),r},openWebPreview:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e||(e=this.activeItem&&this.activeItem.constructor.fileAssociation?this.activeItem.path:"/");var n=this.ctrl.getWebPreviewUrl(e);if(t)Ce.z(n);else{var s=new I;s.path=e,s.url=this.ctrl.getWebPreviewUrl(e),this.insertPaneItemInAsidePosition(s),this.activeItem=s}},reloadWebPreviewPaneItems:function(){var e=!0,t=!1,n=void 0;try{for(var s,i=this.layout.itemsOfType(I)[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){s.value.reload()}}catch(r){t=!0,n=r}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},reinitWebPreviewPaneItems:function(){var e=!0,t=!1,n=void 0;try{for(var s,i=this.layout.itemsOfType(I)[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){var r=s.value;r.url=this.ctrl.getWebPreviewUrl(r.path)}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},openRemoteDesktop:function(){if(!this.remoteDesktopPaneItem){var e=new Se;e.url=this.ctrl.getVncUrl(),this.insertPaneItemInAsidePosition(e)}},openJupyter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.ctrl.getJupyterUrl(e);if("safari"===Re.a)Ce.z(t);else{var n=this.getPaneItemJupyter(e);n?this.activeItem=n:(n=new z(e,t),this.insertPaneItemInAsidePosition(n))}},reinitJupyterPaneItems:function(){var e=this.ctrl.homeNode.children.filter((function(e){return e.name.endsWith(".ipynb")})),t=1===e.length?e[0].path:"";this.jupyterUrl=this.ctrl.getJupyterUrl(t);var n=!0,s=!1,i=void 0;try{for(var r,a=this.layout.itemsOfType(z)[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value;o.url=this.ctrl.getJupyterUrl(o.path)}}catch(l){s=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}},openRStudio:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.ctrl.readonly)te.a({icon:"error",title:"Cannot open RStudio in a readonly workspace",text:"You must have write permission in this workspace to open RStudio. Click the Fork button in the toolbar to obtain your own private copy of this workspace which you can modify."});else{e=e||"safari"===Re.a;var t=this.ctrl.getRStudioUrl();if(e)Ce.z(t);else{var n=new W;n.url=t,this.insertPaneItemInAsidePosition(n)}}},reinitRStudioPaneItems:function(){this.rstudioUrl=this.ctrl.getRStudioUrl();var e=!0,t=!1,n=void 0;try{for(var s,i=this.layout.itemsOfType(W)[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){s.value.url=this.rstudioUrl}}catch(r){t=!0,n=r}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},openNetwork:function(e,t){var n=this.ctrl.getNetworkProcessUrl(e,t);Ce.z(n)},loadIfInErrorState:function(){this.networkMonitorService.online&&this.ctrl.loading&&0===this.ctrl.loadingMax&&this.ctrl.loadingReload&&this.load()},onPageFocus:function(){this.loadIfInErrorState()},onNetworkStatus:function(){this.loadIfInErrorState()},toggleFullscreen:function(){this.fullscreen?Ce.k():Ce.B(this.$el)},onFullscreenChange:function(){this.fullscreen=Ce.q()===this.$el},toggleTree:function(){this.treeOpen=!this.treeOpen},onTreeFilesUpload:function(e){var t=e.files,n=e.path;this.uploadFiles(t,n)},onTreeFileMove:(Mn=Object(a.a)(r.a.mark((function e(t){var n,s,i,a,o,l,c,u,d,h,p,f=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.moves,s=n.some((function(e){return f.ctrl.findNode(e.dest)})),e.t0=s,!e.t0){e.next=7;break}return e.next=6,te.b({icon:"warning",title:"One or more files already exist at the destination path with the same names",text:"If you proceed, files with conflicting names will be overwritten.",primaryAction:"Overwrite Files"});case 6:e.t0=!e.sent;case 7:if(!e.t0){e.next=9;break}return e.abrupt("return");case 9:for(i=!0,a=!1,o=void 0,e.prev=12,l=n[Symbol.iterator]();!(i=(c=l.next()).done);i=!0)u=c.value,d=u.type,h=u.src,p=u.dest,this.ctrl.fileFolderMove(h,p,d);e.next=20;break;case 16:e.prev=16,e.t1=e.catch(12),a=!0,o=e.t1;case 20:e.prev=20,e.prev=21,i||null==l.return||l.return();case 23:if(e.prev=23,!a){e.next=26;break}throw o;case 26:return e.finish(23);case 27:return e.finish(20);case 28:case"end":return e.stop()}}),e,this,[[12,16,20,28],[21,,23,27]])}))),function(e){return Mn.apply(this,arguments)}),onTreeNodeSelect:function(e){var t=e.soft,n=this.ctrl.selectedNodes[this.ctrl.selectedNodes.length-1];"file"===n.type&&this.openFile(n.path,{soft:t})},onTreeNodeExpandCollapse:function(e){var t=e.node,n=e.expand;if(t.expanded=n,n)this.ctrl.loadFolderContents(t.path);else{var s=t.path+"/";this.ctrl.selectedNodes=this.ctrl.selectedNodes.filter((function(e){return!e.path.startsWith(s)}))}},getTerminalById:function(e){var t=this.getPaneItemTerminal(e);return t?t.terminal:null!=e&&e===this.fixedTerminalId?this.$refs.terminal:null},onTerminalInput:function(e,t){null!=e&&(e===this.fixedTerminalId&&this.restartFixedTerminalTimeout(),this.ctrl.readonly||this.ctrl.terminalInput(e,t))},onTerminalResized:function(e){var t=this.getTerminalById(e);if(t&&!this.ctrl.readonly){var n=t.getIdealSize();this.ctrl.terminalResize(e,n.cols,n.rows)}},restartFixedTerminalTimeout:function(){var e=this;this.stopFixedTerminalTimeout(),this.fixedTerminalTimeout=setTimeout((function(){e.fixedTerminalTimeout=null,e.fixedTerminalMessage="Terminal was closed due to inactivity",e.closeTerminal(e.fixedTerminalId,{notifyServer:!0})}),3e5)},stopFixedTerminalTimeout:function(){null!=this.fixedTerminalTimeout&&(clearTimeout(this.fixedTerminalTimeout),this.fixedTerminalTimeout=null)},toggleTestExpanded:function(e){e.expanded=!e.expanded},onChatSubmitMessage:function(e){this.ctrl.sendChatMessage(e)},toggleChat:function(){this.chatVisible=!this.chatVisible,this.chatVisible&&(this.hasNewChatMessages=!1)},showReplay:function(){this.replayVisible=!0},hideReplay:function(){this.replayVisible=!1},replayPause:function(){this.replayPlaying&&(this.replayPlaying=!1,this.ctrl.replayUpdate({playing:this.replayPlaying}))},replayPlay:function(){this.replayPlaying||(this.replayPlaying=!0,this.ctrl.replayUpdate({playing:this.replayPlaying}))},replayPlayPause:function(){this.replayPlaying?this.replayPause():this.replayPlay()},replaySkipToStart:function(){this.replayPause(),this.replayPosition=0,this.ctrl.replayUpdate({position:this.replayPosition})},replaySkipToEnd:function(){this.replayPause(),this.replayPosition=this.ctrl.replayMaxPosition,this.ctrl.replayUpdate({position:this.replayPosition})},replayStepForward:function(){this.replayPause(),this.replayPosition<this.ctrl.replayMaxPosition&&(this.replayPosition++,this.ctrl.replayUpdate({position:this.replayPosition}))},replayStepBackward:function(){this.replayPause(),this.replayPosition>0&&(this.replayPosition--,this.ctrl.replayUpdate({position:this.replayPosition}))},replaySliderInput:function(e){this.replayPause(),this.replayPosition=e,this.ctrl.replayUpdate({position:this.replayPosition})},snippetIcon:function(e){return C.fileFolderIcon(".".concat(e),"file")},toggleSnippets:function(){this.snippetsVisible=!this.snippetsVisible,this.snippetsVisible&&this.loadSnippets()},loadSnippets:(Rn=Object(a.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loadingSnippets&&!this.loadedSnippets){e.next=2;break}return e.abrupt("return");case 2:return this.loadingSnippets=!0,e.prev=3,e.next=6,this.snippetApi.getSnippets(this.course.id);case 6:n=e.sent,(t=this.snippets).push.apply(t,Object(s.a)(n)),this.loadedSnippets=!0,e.next=13;break;case 11:e.prev=11,e.t0=e.catch(3);case 13:return e.prev=13,this.loadingSnippets=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[3,11,13,16]])}))),function(){return Rn.apply(this,arguments)}),onSnippetSaved:function(e,t){Object.assign(e.snippet,t)},onSnippetDeleted:function(e){var t=this.snippets.indexOf(e.snippet);-1!==t&&this.snippets.splice(t,1),this.closeSnippet(e)},createSnippetPaneItem:function(e){var t=this,n=new ue;return n.workspace=this,n.snippet=e,n.onSaved((function(e){return t.onSnippetSaved(n,e)})),n.onDeleted((function(){return t.onSnippetDeleted(n)})),n},insertSnippetPaneItem:function(e){var t=this.layout.findItem((function(e){return e instanceof ue}));if(t){var n=t.parent.items.indexOf(t)+1;t.parent.insertItem(e,n)}else this.activeItem?this.activeItem.parent.split("right").appendItem(e):this.ensureActivePane().appendItem(e)},newSnippet:function(){var e={id:0,language:"txt",name:"Untitled snippet",content:""};this.snippets.unshift(e),this.insertSnippetPaneItem(this.createSnippetPaneItem(e))},openSnippet:function(e){var t=this.getPaneItemSnippet(e);t?this.activeItem=t:this.insertSnippetPaneItem(this.createSnippetPaneItem(e))},closeSnippet:function(e){if(0===e.snippet.id){var t=this.snippets.indexOf(e.snippet);-1!==t&&this.snippets.splice(t,1)}e.remove(),this.selectedSnippet===e.snippet&&(this.selectedSnippet=null)},openFile:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.match(C.reImageFilename)?this.openImage(e):e.match(/\.pdf$/i)?this.openPdf(e):e.match(/\.ipynb$/i)?this.openJupyter(e):e.match(/\.Rmd$/)?this.openRStudio():this.openFileInCodeEditor(e,t)},openImage:function(e){var t=this.getPaneItemImage(e);if(t)this.activeItem=t;else{var n=new A(e,this.ctrl.getWebPreviewUrl(e));this.ensureActivePane().appendItem(n)}},openPdf:function(e){var t=this.getPaneItemPdf(e);if(t)this.activeItem=t;else{var n=new M(e,this.ctrl.getWebPreviewUrl(e));this.ensureActivePane().appendItem(n)}},openFileInCodeEditor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getPaneItemCodeEditor(e);if(!n||n.soft&&!t.soft){var s=this.layout.findItem((function(e){return e instanceof O&&e.soft}));s||this.ensurePaneItemCodeEditor(e,{pane:t.pane,index:t.index,soft:t.soft}),this.pendingEditorSessions.set(e,t),this.ctrl.openEditorSession(e,{soft:t.soft})}else this.activeItem=n},closePlaintextFile:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=An({notifyServer:!0},t),e.remove(),t.notifyServer&&this.ctrl.closeEditorSession(e.path)},openTerminal:function(){this.ensurePaneItemTerminal(null).loading=!0,this.ctrl.terminalOpen({command:this.openTerminalCommand,cols:80,rows:40})},closeTerminal:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=An({notifyServer:!0},t);var n=this.getPaneItemTerminal(e);n&&n.parent.removeItem(n,{autoclose:!0}),t.notifyServer&&this.ctrl.terminalClose(e),e===this.fixedTerminalId&&(this.fixedTerminalId=null,this.reopenFixedTerminalPending&&(this.reopenFixedTerminalPending=!1,this.openFixedTerminal()))},openFixedTerminal:function(){this.fixedTerminalLoading||this.fixedTerminalId||(this.fixedTerminalLoading=!0,this.ctrl.terminalOpen({id:"fixed",command:this.openTerminalCommand,cols:80,rows:40}))},resetFixedTerminal:function(){this.fixedTerminalId&&(this.reopenFixedTerminalPending=!0,this.ctrl.terminalKill(this.fixedTerminalId))},killAllTerminals:function(){this.fixedTerminalId&&this.ctrl.terminalKill(this.fixedTerminalId);var e=!0,t=!1,n=void 0;try{for(var s,i=this.layout.itemsOfType(X)[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){var r=s.value;this.ctrl.terminalKill(r.terminalId)}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},onPaneItemsClose:function(e){var t=!0,n=!1,s=void 0;try{for(var i,r=e[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;a instanceof O?this.closePlaintextFile(a):a instanceof X?this.closeTerminal(a.terminalId):a instanceof ue?this.closeSnippet(a):a.remove()}}catch(o){n=!0,s=o}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}},onRequestItemOpen:function(e){var t=e.type,n=e.path,s=e.pane,i=e.index;if("open-workspace-file"===t){var r=this.getPaneItemCodeEditor(n);r?s.insertItem(r,i):this.openFileInCodeEditor(n,{pane:s,index:i})}},onRequestHardOpen:function(e){e instanceof O&&this.openFileInCodeEditor(e.path)},showRevisions:function(){this.revisionsVisible=!0},hideRevisions:function(){this.revisionsVisible=!1},onCtrlEditorSessionOpen:function(e){var t=this.pendingEditorSessions.get(e.session.path);this.pendingEditorSessions.delete(e.session.path);var n=this.ensurePaneItemCodeEditor(e.session.path,t);n.session=e.session,t&&(this.activeItem=n)},onCtrlEditorSessionSubsume:function(e){var t=e.session,n=e.oldPath,s=this.getPaneItemCodeEditor(n);s&&(s.path=t.path,this.pendingEditorSessions.delete(t.path)&&(this.activeItem=s))},onCtrlEditorSessionClose:function(e){var t=e.session,n=this.getPaneItemCodeEditor(t.path);n&&n.remove()},onCtrlDisplayError:function(e){switch(e.type){case"file_open_rejected":if("join"===e.data.reason)return;var t=this.ensurePaneItemCodeEditor(e.data.path);switch(e.data.reason){case"binary":t.errorMessage="File contains binary data and cannot be displayed.";break;case"oversize":t.errorMessage="File is too large and cannot be displayed.";break;default:t.errorMessage="File cannot be opened."}break;case"out_of_space":ne.b({type:"error",title:"Out of space",text:"You have reached the maximum storage or file count limit. You should delete any unnecessary files to free up space.\n\nStorage usage: ".concat(e.data.used_bytes,"/").concat(e.data.total_bytes," bytes\nFile count usage: ").concat(e.data.used_files,"/").concat(e.data.total_files," files")})}},onCtrlFileFolderMove:function(e){var t=e.srcPath,n=e.destPath,s=!0,i=!1,r=void 0;try{for(var a,o=this.layout.items()[Symbol.iterator]();!(s=(a=o.next()).done);s=!0){var l=a.value;l.constructor.fileAssociation&&l.path===t&&(l.path=n)}}catch(c){i=!0,r=c}finally{try{s||null==o.return||o.return()}finally{if(i)throw r}}},onCtrlTerminalOpen:function(e){"fixed"===e.id?(this.fixedTerminalId&&this.closeTerminal(this.fixedTerminalId,{notifyServer:!0}),this.fixedTerminalId=e.id,this.fixedTerminalLoading=!1,this.$refs.terminal.open(),this.$refs.terminal.write(e.data),this.$refs.terminal.focus(),this.restartFixedTerminalTimeout()):this.ensurePaneItemTerminal(e.id,{data:e.data}),this.onTerminalResized(e.id)},onCtrlTerminalClose:function(e){this.closeTerminal(e.id)},onCtrlTerminalData:function(e){var t=this.getTerminalById(e.id);t?t.write(e.data):e.id===this.fixedTerminalId&&this.$refs.terminal.write(e.data)},onCtrlTerminalUpdate:function(e){var t=this.getTerminalById(e.id);t&&t.resize(e.pty_size.cols,e.pty_size.rows)},onCtrlTerminalOpenNotify:function(){},onCtrlReplayUpdate:function(e){this.replayPlaying=e.playing,this.replayRealTime=e.realTime,this.replaySpeed=e.speed,this.replayPlaying&&(this.replayPosition=e.position)},onCtrlFileCreate:function(e){if(this.pendingEditorSessions.delete(e.path)){this.openFileInCodeEditor(e.path);var t=this.ctrl.findNode(e.path);t&&this.ctrl.expandNodeRecursively(t)}},onCtrlFileRemove:function(e){var t=!0,n=!1,s=void 0;try{for(var i,r=this.layout.items()[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;a.constructor.fileAssociation&&a.path===e.path&&a.remove()}}catch(o){n=!0,s=o}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}},onCtrlFolderCreate:function(e){if(this.pendingEditorSessions.delete(e.path)){var t=this.ctrl.findNode(e.path);t&&(this.ctrl.expandNodeRecursively(t),this.ctrl.selectedNodes=[t])}},onCtrlFileOt:function(){this.reloadWebPreviewPaneItems(),this.$emit("file-ot")},onCtrlChat:function(){this.chatVisible||(this.hasNewChatMessages=!0)},onCtrlInit:function(){this.replayPlaying=this.ctrl.replayState.playing,this.replayRealTime=this.ctrl.replayState.realTime,this.replayPosition=this.ctrl.replayState.position,this.replaySpeed=this.ctrl.replayState.speed,this.reinitWebPreviewPaneItems(),this.reinitJupyterPaneItems(),this.reinitRStudioPaneItems();var e=!0,t=!1,n=void 0;try{for(var s,i=this.layout.itemsOfType(I)[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){var r=s.value;r.url=this.ctrl.getWebPreviewUrl(r.path)}}catch(h){t=!0,n=h}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}var a=!0,o=!1,l=void 0;try{for(var c,u=this.layout.itemsOfType(X)[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;this.closeTerminal(d.terminalId,{notifyServer:!1})}}catch(h){o=!0,l=h}finally{try{a||null==u.return||u.return()}finally{if(o)throw l}}this.stopFixedTerminalTimeout(),this.fixedTerminalId=null,this.fixedTerminalLoading=!1,this.fixedTerminalMessage=null,this.reopenFixedTerminalPending=!1},onWindowMessage:function(e){if(e.data&&e.data.id){var t=this.pendingMessages.get(e.data.id);t&&t.source===e.source&&t.resolve(e.data)}},postMessage:function(e,t){var n,s=this,i=new Promise((function(e){return n=e})),r=new Promise((function(e,t){setTimeout((function(){t(Error("Timeout"))}),5e3)})),a=Promise.race([i,r]);r.catch((function(){}));var o=Un();return this.pendingMessages.set(o,{resolve:n,source:e}),a.finally((function(){s.pendingMessages.delete(o)})),e.postMessage({id:o,type:t},"*"),a}}},Vn=(n("jNrv"),Object(E.a)(zn,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"workspace",class:e.cssClass},[n("Wrapper",{scopedSlots:e._u([{key:"fixedTerminal",fn:function(){return[n("Terminal",{ref:"terminal",staticClass:"ws-fixed-terminal",attrs:{sounds:e.terminalSounds},on:{input:function(t){return e.onTerminalInput(e.fixedTerminalId,t)},resized:function(t){return e.onTerminalResized(e.fixedTerminalId)}}})]},proxy:!0}])},[n("div",{staticClass:"ws-layout"},[e.computedSimple?e._e():n("div",{staticClass:"ws-toolbar-container"},[e.ctrl.replay?n("Toolbar",[e.computedChrome?e._e():n("ToolbarGroup",[n("ToolbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Toggle Tree View",expression:"'Toggle Tree View'"}],attrs:{icon:"tree-view",pressed:e.treeOpen},on:{click:e.toggleTree}})],1),e._v(" "),n("ToolbarGroup",[e.computedChrome?e._e():n("ToolbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.singleSelectedNode?'Download "'+e.singleSelectedNode.name+'"':"Download",expression:"singleSelectedNode ? `Download \\u0022${singleSelectedNode.name}\\u0022` : 'Download'"}],attrs:{icon:"download",disabled:1!==e.ctrl.selectedNodes.length},on:{click:function(t){return e.downloadFileFolder(e.singleSelectedNode.path)}}}),e._v(" "),n("ToolbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Download Workspace",expression:"'Download Workspace'"}],attrs:{icon:"cloud-download"},on:{click:function(t){return e.downloadFileFolder(e.ctrl.homeNode.path)}}})],1),e._v(" "),n("ToolbarGroup",[n("ToolbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Skip to Start",expression:"'Skip to Start'"}],attrs:{icon:"skip-previous"},on:{click:e.replaySkipToStart}}),e._v(" "),n("ToolbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Step Backward",expression:"'Step Backward'"}],attrs:{icon:"step-backward"},on:{click:e.replayStepBackward}}),e._v(" "),n("ToolbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.replayPlaying?"Stop":"Play",expression:"replayPlaying ? 'Stop' : 'Play'"}],attrs:{icon:e.replayPlaying?"stop":"play"},on:{click:e.replayPlayPause}}),e._v(" "),n("ToolbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Step Forward",expression:"'Step Forward'"}],attrs:{icon:"step-forward"},on:{click:e.replayStepForward}}),e._v(" "),n("ToolbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Skip to End",expression:"'Skip to End'"}],attrs:{icon:"skip-next"},on:{click:e.replaySkipToEnd}})],1),e._v(" "),n("ToolbarGroup",{staticClass:"ws-replay-tbgrp"},[n("ReplaySlider",{staticClass:"ws-replay-slider",attrs:{progress:e.ctrl.replayState.position,value:e.replayPosition,timestamps:e.ctrl.replayTimestamps},on:{input:e.replaySliderInput}}),e._v(" "),n("ReplayDate",{staticClass:"ws-replay-date",attrs:{date:e.replayTimestamp}})],1)],1):n("Toolbar",[e._t("toolbarLeft"),e._v(" "),e.computedChrome?e._e():n("ToolbarGroup",[n("ToolbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Toggle Tree View",expression:"'Toggle Tree View'"}],attrs:{icon:"tree-view",pressed:e.treeOpen},on:{click:e.toggleTree}})],1),e._v(" "),n("ToolbarGroup",[e.computedChrome?e._e():n("ToolbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"New File",expression:"'New File'"}],attrs:{icon:"file",disabled:e.ctrl.readonly},on:{click:function(t){return e.newFileFolder(e.ctrl.homeNode,!1)}}}),e._v(" "),e.computedChrome?e._e():n("ToolbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"New Folder",expression:"'New Folder'"}],attrs:{icon:"folder",disabled:e.ctrl.readonly},on:{click:function(t){return e.newFileFolder(e.ctrl.homeNode,!0)}}}),e._v(" "),e.computedChrome?e._e():n("ToolbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Upload File",expression:"'Upload File'"}],attrs:{icon:"upload",disabled:e.ctrl.readonly},on:{click:function(t){return e.uploadToFolderNode(e.ctrl.homeNode)}}}),e._v(" "),e.computedChrome?e._e():n("ToolbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.singleSelectedNode?'Download "'+e.singleSelectedNode.name+'"':"Download",expression:"singleSelectedNode ? `Download \\u0022${singleSelectedNode.name}\\u0022` : 'Download'"}],attrs:{icon:"download",disabled:1!==e.ctrl.selectedNodes.length},on:{click:function(t){return e.downloadFileFolder(e.singleSelectedNode.path)}}}),e._v(" "),n("ToolbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Download Workspace",expression:"'Download Workspace'"}],attrs:{icon:"cloud-download"},on:{click:function(t){return e.downloadFileFolder(e.ctrl.homeNode.path)}}})],1),e._v(" "),n("ToolbarSpace"),e._v(" "),e._t("toolbarCenter"),e._v(" "),n("ToolbarSpace"),e._v(" "),e.toolbarAudio?n("ToolbarAudio",{ref:"toolbarAudio",attrs:{"connect-type":"workspace","connect-param":e.ctrl.workspaceSession.wid}}):e._e(),e._v(" "),e.onlineIndicator?n("ToolbarGroup",[n("OnlineIndicator",{staticClass:"ws-online",attrs:{count:e.onlineParticipants.length}})],1):e._e(),e._v(" "),e.computedChrome?e._e():n("ToolbarGroup",[n("ToolbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Open Terminal",expression:"'Open Terminal'"}],attrs:{icon:"terminal",disabled:!e.computedOpenTerminalEnabled},on:{click:e.openTerminal}}),e._v(" "),e.ctrl.web?n("ToolbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Open Web Preview",expression:"'Open Web Preview'"}],attrs:{icon:"globe"},on:{click:function(t){return e.openWebPreview(null,t.shiftKey)}}}):e._e(),e._v(" "),n("Trigger",{attrs:{active:e.popupNetworkVisible,action:"toggle"},on:{"update:active":function(t){e.popupNetworkVisible=t}},scopedSlots:e._u([{key:"trigger",fn:function(t){var s=t.trigger,i=t.attrs;return[n("ToolbarButton",e._b({directives:[{name:"tooltip",rawName:"v-tooltip",value:"Network",expression:"'Network'"}],attrs:{icon:"wifi"},on:{click:s}},"ToolbarButton",i,!1))]}},{key:"target",fn:function(t){var s=t.x,i=t.y;return[n("PopupNetwork",{attrs:{x:s,y:i,session:e.ctrl.workspaceSession},on:{launch:function(t){return e.openNetwork(t.ip,t.port)},close:function(t){e.popupNetworkVisible=!1}}})]}}],null,!1,3421899165)}),e._v(" "),e.remoteDesktopEnabled?n("ToolbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Open Remote Desktop",expression:"'Open Remote Desktop'"}],attrs:{icon:"desktop"},on:{click:e.openRemoteDesktop}}):e._e(),e._v(" "),e.snippetsEnabled?n("ToolbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Toggle Snippets",expression:"'Toggle Snippets'"}],attrs:{icon:"cut",pressed:e.snippetsVisible},on:{click:e.toggleSnippets}}):e._e(),e._v(" "),e.chat?n("ToolbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Toggle Chat",expression:"'Toggle Chat'"}],attrs:{icon:"chat-bubble-outline",pressed:e.chatVisible,dot:e.hasNewChatMessages},on:{click:e.toggleChat}}):e._e(),e._v(" "),n("ToolbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Revisions",expression:"'Revisions'"}],attrs:{icon:"layers"},on:{click:e.showRevisions}})],1),e._v(" "),e._t("toolbarRight"),e._v(" "),n("ToolbarGroup",[n("ToolbarButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Toggle Fullscreen",expression:"'Toggle Fullscreen'"}],attrs:{icon:e.fullscreen?"fullscreen-exit":"fullscreen",pressed:e.fullscreen},on:{click:e.toggleFullscreen}}),e._v(" "),e.computedChrome?e._e():n("Trigger",{attrs:{active:e.popupSettingsVisible,action:"toggle"},on:{"update:active":function(t){e.popupSettingsVisible=t}},scopedSlots:e._u([{key:"trigger",fn:function(t){var s=t.trigger,i=t.attrs;return[n("ToolbarButton",e._b({directives:[{name:"tooltip",rawName:"v-tooltip",value:"Settings",expression:"'Settings'"}],attrs:{icon:"settings"},on:{click:s}},"ToolbarButton",i,!1))]}},{key:"target",fn:function(t){var s=t.x,i=t.y;return[n("PopupSettings",{attrs:{x:s,y:i,settings:e.workspaceSettings},on:{close:function(t){e.popupSettingsVisible=!1}}})]}}],null,!1,1397378373)}),e._v(" "),n("ContextMenuTrigger",{attrs:{active:e.menuVisible,action:"toggle"},on:{"update:active":function(t){e.menuVisible=t}},scopedSlots:e._u([{key:"trigger",fn:function(t){var s=t.trigger,i=t.attrs;return[n("ToolbarButton",e._b({attrs:{icon:"more-horiz"},on:{click:s}},"ToolbarButton",i,!1))]}},{key:"items",fn:function(){return[n("ContextMenuItem",{key:"replay",attrs:{disabled:!e.replayEnabled,text:"Replay"},on:{click:e.showReplay}}),e._v(" "),n("ContextMenuSeparator"),e._v(" "),e.chrome?n("ContextMenuItem",{key:"chromeView",attrs:{text:"Full View",checked:e.chromeOverride},on:{click:e.toggleChromeOverride}}):e._e(),e._v(" "),e.isUserAdmin?n("ContextMenuItem",{key:"downloadLog",attrs:{text:"Download Workspace Log"},on:{click:e.downloadWorkspaceLog}}):e._e()]},proxy:!0}],null,!1,1795199629)})],1)],2)],1),e._v(" "),e.computedChrome?e._e():n("Split",{staticClass:"ws-layout-body",attrs:{orientation:"horizontal","invisible-dividers":"","divider-size":0}},[!e.computedSimple&&e.treeOpen?n("SplitPanel",{key:"files",attrs:{frac:e.splitPanelFilesFrac,"min-frac":100,"max-frac":500,sizing:"fixed"},on:{"update:frac":function(t){e.splitPanelFilesFrac=t}}},[n("Tree",{staticClass:"ws-tree",attrs:{nodes:e.ctrl.homeNode.children,"selected-nodes":e.ctrl.selectedNodes,"show-dot-nodes":e.showHiddenFiles,readonly:!!e.ctrl.readonly,"files-uploading-count":e.ctrl.filesUploading.length,"files-uploaded-count":e.ctrl.filesUploadedCount},on:{"update:selectedNodes":function(t){return e.$set(e.ctrl,"selectedNodes",t)},"update:selected-nodes":function(t){return e.$set(e.ctrl,"selectedNodes",t)},"tree-files-upload":e.onTreeFilesUpload,"tree-file-move":e.onTreeFileMove,"node-select":e.onTreeNodeSelect,"node-expand-collapse":e.onTreeNodeExpandCollapse,"node-context-menu":e.onTreeNodeContextMenu,"context-menu":e.onTreeContextMenu,"new-file":function(t){return e.newFileFolder(e.ctrl.homeNode,!1)},"new-folder":function(t){return e.newFileFolder(e.ctrl.homeNode,!0)},"upload-file":function(t){return e.uploadToFolderNode(e.ctrl.homeNode)}}})],1):e._e(),e._v(" "),n("SplitPanel",{key:"workspace",attrs:{frac:e.splitPanelWorkspaceFrac,collapsable:"","collapsed-text":"Workspace"},on:{"update:frac":function(t){e.splitPanelWorkspaceFrac=t}}},[n("div",{staticClass:"ws-workspace-container"},[n("PaneLayout",{staticClass:"ws-pane-layout",attrs:{layout:e.layout,splittable:!e.computedSimple,"active-pane":e.activePane},on:{"update:activePane":function(t){e.activePane=t},"update:active-pane":function(t){e.activePane=t},itemsClose:e.onPaneItemsClose,itemDblClick:e.onRequestHardOpen,requestItemOpen:e.onRequestItemOpen},scopedSlots:e._u([{key:"placeholder",fn:function(){return[n("Placeholder",[e._v(e._s(e.placeholder))])]},proxy:!0},e.computedSimple?{key:"tabsLeft",fn:function(){return[n("ToolbarMini",{style:{width:e.treeOpen?e.splitPanelCompactTreeFrac+"px":void 0}},[n("ToolbarMiniButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Toggle Tree View",expression:"'Toggle Tree View'"}],attrs:{icon:"tree-view",pressed:e.treeOpen},on:{click:e.toggleTree}}),e._v(" "),e.ctrl.readonly?e._e():n("ContextMenuTrigger",{attrs:{active:e.menuNewFileFolderVisible},on:{"update:active":function(t){e.menuNewFileFolderVisible=t}},scopedSlots:e._u([{key:"trigger",fn:function(t){var s=t.trigger,i=t.attrs;return[n("ToolbarMiniButton",e._b({directives:[{name:"tooltip",rawName:"v-tooltip",value:"New File/Folder",expression:"'New File/Folder'"}],attrs:{icon:"add"},on:{click:s}},"ToolbarMiniButton",i,!1))]}},{key:"items",fn:function(){return[n("ContextMenuItem",{key:"newFile",attrs:{text:"New File..."},on:{click:function(t){return e.newFileFolder(e.ctrl.homeNode,!1)}}}),e._v(" "),n("ContextMenuItem",{key:"newFolder",attrs:{text:"New Folder..."},on:{click:function(t){return e.newFileFolder(e.ctrl.homeNode,!0)}}}),e._v(" "),n("ContextMenuItem",{key:"upload",attrs:{text:"Upload..."},on:{click:function(t){return e.uploadToFolderNode(e.ctrl.homeNode)}}})]},proxy:!0}],null,!1,558033391)})],1)]},proxy:!0}:null,e.computedSimple?{key:"tabsRight",fn:function(){return[n("ToolbarMini",[e._t("toolbarSimple"),e._v(" "),e.computedOpenTerminalEnabled?n("ToolbarMiniButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Open Terminal",expression:"'Open Terminal'"}],attrs:{icon:"terminal"},on:{click:e.openTerminal}}):e._e(),e._v(" "),e.isAdmin?n("ToolbarMiniButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Replay",expression:"'Replay'"}],key:"replay",attrs:{icon:"replay",disabled:!e.replayEnabled,text:"Replay"},on:{click:e.showReplay}}):e._e(),e._v(" "),n("ToolbarMiniButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Toggle Fullscreen",expression:"'Toggle Fullscreen'"}],attrs:{icon:e.fullscreen?"fullscreen-exit":"fullscreen",pressed:e.fullscreen},on:{click:e.toggleFullscreen}}),e._v(" "),n("Trigger",{attrs:{active:e.popupSettingsVisible,action:"toggle"},on:{"update:active":function(t){e.popupSettingsVisible=t}},scopedSlots:e._u([{key:"trigger",fn:function(t){var s=t.trigger,i=t.attrs;return[n("ToolbarMiniButton",e._b({directives:[{name:"tooltip",rawName:"v-tooltip",value:"Settings",expression:"'Settings'"}],attrs:{icon:"settings"},on:{click:s}},"ToolbarMiniButton",i,!1))]}},{key:"target",fn:function(t){var s=t.x,i=t.y;return[n("PopupSettings",{attrs:{x:s,y:i,settings:e.workspaceSettings},on:{close:function(t){e.popupSettingsVisible=!1}}})]}}],null,!1,857512101)})],2)]},proxy:!0}:null,e.computedSimple?{key:"layout",fn:function(t){var s=t.items;return[n("Split",{staticClass:"ws-compact-split",attrs:{orientation:"horizontal","invisible-dividers":""}},[e.treeOpen?n("SplitPanel",{key:"tree",attrs:{frac:e.splitPanelCompactTreeFrac,"min-frac":100,"max-frac":500,sizing:"fixed"},on:{"update:frac":function(t){e.splitPanelCompactTreeFrac=t}}},[n("Tree",{staticClass:"ws-tree",attrs:{nodes:e.ctrl.homeNode.children,"selected-nodes":e.ctrl.selectedNodes,"show-dot-nodes":e.showHiddenFiles,readonly:!!e.ctrl.readonly,"files-uploading-count":e.ctrl.filesUploading.length,"files-uploaded-count":e.ctrl.filesUploadedCount},on:{"update:selectedNodes":function(t){return e.$set(e.ctrl,"selectedNodes",t)},"update:selected-nodes":function(t){return e.$set(e.ctrl,"selectedNodes",t)},"tree-files-upload":e.onTreeFilesUpload,"tree-file-move":e.onTreeFileMove,"node-select":e.onTreeNodeSelect,"node-expand-collapse":e.onTreeNodeExpandCollapse,"node-context-menu":e.onTreeNodeContextMenu,"context-menu":e.onTreeContextMenu,"new-file":function(t){return e.newFileFolder(e.ctrl.homeNode,!1)},"new-folder":function(t){return e.newFileFolder(e.ctrl.homeNode,!0)},"upload-file":function(t){return e.uploadToFolderNode(e.ctrl.homeNode)}}})],1):e._e(),e._v(" "),n("SplitPanel",{key:"content",attrs:{frac:e.splitPanelCompactContentFrac},on:{"update:frac":function(t){e.splitPanelCompactContentFrac=t}}},[s.length?n("Vnodes",{attrs:{vnodes:s}}):n("Placeholder",[e._v(e._s(e.placeholder))])],1)],1)]}}:null],null,!0)}),e._v(" "),n("StatusBar",{attrs:{parent:e.$vnode.componentInstance}})],1),e._v(" "),n("SheetContainer",{ref:"sheetContainer",staticClass:"ws-sheet-container"})],1),e._v(" "),e.snippetsVisible?n("SplitPanel",{key:"snippets",attrs:{frac:e.splitPanelSnippetsFrac,"min-frac":200,"max-frac":400,sizing:"fixed",collapsable:"","collapsed-text":"Snippets"},on:{"update:frac":function(t){e.splitPanelSnippetsFrac=t}}},[n("div",{staticClass:"ws-snip-container"},[n("div",{staticClass:"ws-pane-header"},[e._v("Snippets")]),e._v(" "),e.isStaff?n("div",{staticClass:"ws-snip-actions"},[n("EdButton",{staticClass:"ws-snip-new",on:{click:e.newSnippet}},[e._v("New Snippet")])],1):e._e(),e._v(" "),e.loadingSnippets?n("Spinner",{staticClass:"ws-snip-spinner"}):e._e(),e._v(" "),n("ListView",{staticClass:"ws-snip-list list-view-basic",attrs:{items:e.filteredSnippets,"item-key":function(e,t){return e.id||"unsaved-"+t},"selected-item":e.selectedSnippet},on:{"update:selectedItem":function(t){e.selectedSnippet=t},"update:selected-item":function(t){e.selectedSnippet=t},"item-click":function(t){return e.openSnippet(t)}},scopedSlots:e._u([{key:"item",fn:function(t){var s=t.item;return[n("div",{staticClass:"ws-snip-item",class:{unsaved:0===s.id}},[n("Icon",{staticClass:"ws-snip-icon colored",attrs:{icon:e.snippetIcon(s.language)}}),e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(s.name)+"\n\t\t\t\t\t\t\t\t")],1)]}}],null,!1,3959152622)})],1)]):e._e(),e._v(" "),e.chat&&e.chatVisible?n("SplitPanel",{key:"chat",attrs:{frac:e.splitPanelChatFrac,"min-frac":200,"max-frac":600,priority:90,sizing:"fixed",collapsable:"","collapsed-text":"Chat"},on:{"update:frac":function(t){e.splitPanelChatFrac=t}}},[n("Split",{staticClass:"ws-chat-split",attrs:{orientation:"vertical","invisible-dividers":""}},[n("SplitPanel",{attrs:{sizing:"fixed",frac:e.splitPanelChatUsersFrac,"min-frac":35},on:{"update:frac":function(t){e.splitPanelChatUsersFrac=t}}},[n("div",{staticClass:"ws-chat-panel-users"},[n("div",{staticClass:"ws-pane-header"},[e._v("Participants")]),e._v(" "),n("div",{staticClass:"ws-chat-users"},e._l(e.participants,(function(t){return n("div",{key:t.id,staticClass:"ws-chat-user"},[n("Avatar",{staticClass:"ws-chat-avatar",attrs:{user:t,online:t.online}}),e._v(" "),n("div",{staticClass:"ws-chat-name",class:{offline:!t.online}},[e._v(e._s(t.name))])],1)})),0)])]),e._v(" "),n("SplitPanel",{attrs:{frac:e.splitPanelChatDisplayFrac},on:{"update:frac":function(t){e.splitPanelChatDisplayFrac=t}}},[n("div",{staticClass:"ws-chat-panel-chat"},[n("div",{staticClass:"ws-pane-header"},[e._v("Chat")]),e._v(" "),n("Chat",{staticClass:"ws-chat",attrs:{events:e.ctrl.chatEvents},on:{"submit-message":e.onChatSubmitMessage}})],1)])],1)],1):e._e()],1),e._v(" "),"jupyter"===e.computedChrome?n("IframeLoader",{ref:"chromeIframe",staticClass:"ws-iframe",attrs:{src:e.jupyterUrl,sandbox:"allow-scripts allow-modals allow-popups allow-forms allow-same-origin"}}):e._e(),e._v(" "),"rstudio"===e.computedChrome?n("IframeLoader",{ref:"chromeIframe",staticClass:"ws-iframe",attrs:{src:e.rstudioUrl,sandbox:"allow-scripts allow-modals allow-popups allow-forms allow-same-origin"}}):e._e(),e._v(" "),e.computedChrome?n("StatusBar",{attrs:{parent:e.$vnode.componentInstance}}):e._e()],1)]),e._v(" "),n("FadeTransition",[e.loading?n("Overlay",{attrs:{title:e.ctrl.loadingTitle,reload:e.ctrl.loadingReload},on:{reload:e.load}},[e._v("\n\t\t\t"+e._s(e.ctrl.loadingText)+"\n\t\t")]):e._e()],1),e._v(" "),n("FadeTransition",[!e.loading&&e.statusSavingLong?n("Overlay",{attrs:{title:"Saving...",reload:""},on:{reload:e.load}},[e._v("\n\t\t\tIt's taking longer than usual.\n\t\t\t"),e.saveDate?[e._v("Your work was last saved "),n("DateDisplay",{attrs:{date:e.saveDate,format:"fromNow"}}),e._v(".")]:e._e()],2):e._e()],1),e._v(" "),e.menuTreeVisible?n("ContextMenu",{attrs:{"target-left":e.menuTreeX,"target-top":e.menuTreeY},on:{close:function(t){e.menuTreeVisible=!1}}},[n("ContextMenuItem",{key:"newFile",attrs:{text:"New File...",disabled:e.ctrl.readonly},on:{click:function(t){return e.newFileFolder(e.ctrl.homeNode,!1)}}}),e._v(" "),n("ContextMenuItem",{key:"newFolder",attrs:{text:"New Folder...",disabled:e.ctrl.readonly},on:{click:function(t){return e.newFileFolder(e.ctrl.homeNode,!0)}}}),e._v(" "),n("ContextMenuItem",{key:"upload",attrs:{text:"Upload Here...",disabled:e.ctrl.readonly},on:{click:function(t){return e.uploadToFolderNode(e.ctrl.homeNode)}}}),e._v(" "),n("ContextMenuSeparator"),e._v(" "),n("ContextMenuItem",{key:"download",attrs:{text:"Download All"},on:{click:function(t){return e.downloadFileFolder(e.ctrl.homeNode.path)}}})],1):e._e(),e._v(" "),e.menuTreeNodeVisible?n("ContextMenu",{attrs:{"target-left":e.menuTreeNodeX,"target-top":e.menuTreeNodeY},on:{close:function(t){e.menuTreeNodeVisible=!1}}},[n("ContextMenuItem",{key:"newFile",attrs:{text:"New File...",disabled:e.ctrl.readonly},on:{click:function(t){return e.newFileFolder(e.ctrl.selectedNodes[e.ctrl.selectedNodes.length-1]||e.ctrl.homeNode,!1)}}}),e._v(" "),n("ContextMenuItem",{key:"newFolder",attrs:{text:"New Folder...",disabled:e.ctrl.readonly},on:{click:function(t){return e.newFileFolder(e.ctrl.selectedNodes[e.ctrl.selectedNodes.length-1]||e.ctrl.homeNode,!0)}}}),e._v(" "),n("ContextMenuItem",{key:"upload",attrs:{text:"Upload Here...",disabled:e.ctrl.readonly},on:{click:function(t){return e.uploadToFolderNode(e.ctrl.selectedNodes[e.ctrl.selectedNodes.length-1]||e.ctrl.homeNode)}}}),e._v(" "),n("ContextMenuSeparator"),e._v(" "),n("ContextMenuItem",{key:"delete",attrs:{text:"Delete",disabled:e.ctrl.readonly},on:{click:e.deleteSelectedFileFolder}}),e._v(" "),e.singleSelectedNode?n("ContextMenuItem",{key:"rename",attrs:{text:"Rename",disabled:e.ctrl.readonly},on:{click:e.renameSelectedFileFolder}}):e._e(),e._v(" "),e.ctrl.web&&e.singleSelectedNode&&e.singleSelectedNode.name.match(/\.html?/i)?n("ContextMenuItem",{key:"open",attrs:{text:"Open in Web Preview"},on:{click:function(t){return e.openWebPreview(e.ctrl.selectedNodes[e.ctrl.selectedNodes.length-1].path)}}}):e._e(),e._v(" "),e.singleSelectedNode?n("ContextMenuItem",{key:"download",attrs:{text:"Download",disabled:!e.singleSelectedNode||!["file","folder"].includes(e.singleSelectedNode.type)},on:{click:function(t){return e.downloadFileFolder(e.singleSelectedNode.path)}}}):e._e(),e._v(" "),n("ContextMenuSeparator"),e._v(" "),n("ContextMenuItem",{key:"downloadAll",attrs:{text:"Download All"},on:{click:function(t){return e.downloadFileFolder(e.ctrl.homeNode.path)}}})],1):e._e(),e._v(" "),e.revisionsVisible?n("ContentDialog",{attrs:{title:"Revisions"},on:{close:e.hideRevisions}},[n("Theme",{attrs:{tag:"div"}},[n("Revisions",{staticClass:"ws-revisions",attrs:{session:e.ctrl.workspaceSession},on:{"reverted-workspace":e.hideRevisions}})],1)],1):e._e(),e._v(" "),!e.ctrl.replay&&e.replayVisible?n("ContentDialog",{attrs:{title:"Replay"},on:{close:e.hideReplay}},[n("Workspace",{staticClass:"ws-replay-workspace",attrs:{type:"code","connect-type":"workspace-replay","connect-param":e.ctrl.workspaceSession.wid,autofocus:""}})],1):e._e()],1)}),[],!1,null,null,null));t.default=Vn.exports},o24b:function(e,t,n){},o4LN:function(e,t,n){},o4ob:function(e,t,n){"use strict";var s=n("PaLc");n.n(s).a},o6jO:function(e,t,n){},o7oi:function(e,t,n){"use strict";function s(e,t){return"staff"===t||"admin"===t?"admin":e}function i(e){switch(e){case"":return"No Access";case"read":return"Read";case"write":return"Read and Write";case"admin":return"Admin"}}n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i}))},oJzX:function(e,t,n){"use strict";n("qePV");var s=n("ZOv9"),i=n("NC1X"),r=n("WmPt"),a=n("2PkB"),o={props:{item:{type:Object,required:!0}},data:function(){return{loading:!0}},watch:{"item.url":function(){this.loading=!0,this.$emit("will-load")}},created:function(){this.$emit("will-load")},methods:{onImageLoad:function(){this.loading=!1,this.$emit("did-load")},onImageError:function(){this.loading=!1,this.$emit("did-load")}}},l=(n("Z3N9"),n("KHd+")),c=Object(l.a)(o,(function(){var e=this.$createElement,t=this._self._c||e;return t("Transition",[t("img",{directives:[{name:"show",rawName:"v-show",value:!this.loading,expression:"!loading"}],staticClass:"preview-image",attrs:{src:this.item.url},on:{load:this.onImageLoad,error:this.onImageError}})])}),[],!1,null,null,null).exports,u={props:{item:{type:Object,required:!0}}},d=(n("0goA"),Object(l.a)(u,(function(){var e=this.$createElement;return(this._self._c||e)("textarea",{staticClass:"preview-text",domProps:{value:this.item.text}})}),[],!1,null,null,null).exports),h={components:{EmbedEx:n("0gpV").a},props:{item:{type:Object,required:!0}}},p=(n("B1lS"),Object(l.a)(h,(function(){var e=this.$createElement;return(this._self._c||e)("EmbedEx",{staticClass:"preview-pdf",attrs:{src:this.item.url,type:"application/pdf"}})}),[],!1,null,null,null).exports),f={props:{records:{type:Array,required:!0}}},m=(n("9ero"),{components:{CsvDisplay:Object(l.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("table",{staticClass:"csv-display"},[n("tbody",e._l(e.records,(function(t,s){return n("tr",{key:s},e._l(t,(function(t,s){return n("td",{key:s},[e._v(e._s(t))])})),0)})),0)])}),[],!1,null,null,null).exports},props:{item:{type:Object,required:!0}}}),v=(n("PiU9"),Object(l.a)(m,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"preview-csv"},[t("CsvDisplay",{attrs:{records:this.item.records}})],1)}),[],!1,null,null,null).exports),b=n("oDEV"),g=n("9Arg"),y=n("e5Oz"),w={components:{FullscreenModal:s.a,Spinner:i.a,Icon:r.a,NavbarButton:a.a,FadeTransition:b.a},props:{title:{type:String,default:"Preview"},items:{type:Array,required:!0},index:{type:Number,default:-1}},data:function(){return{loading:!1}},computed:{item:function(){return this.items[this.index]},itemComponent:function(){if(this.item)switch(this.item.type){case"image":return c;case"text":return d;case"pdf":return p;case"csv":return v}},canGoPrevious:function(){return this.index>0},canGoNext:function(){return this.index<this.items.length-1},download:function(){switch(this.item.type){case"csv":return this.downloadCSV;case"text":return this.downloadText;case"image":return this.downloadImage;case"pdf":return this.downloadPDF}}},created:function(){document.addEventListener("keydown",this.onDocumentKeyDown),document.activeElement.blur()},destroyed:function(){document.removeEventListener("keydown",this.onDocumentKeyDown)},methods:{onDocumentKeyDown:function(e){switch(e.key){case"ArrowLeft":this.previous();break;case"ArrowRight":this.next();break;case"Escape":this.close()}},onItemWillLoad:function(){this.loading=!0},onItemDidLoad:function(){this.loading=!1},close:function(){this.$emit("close")},previous:function(){this.canGoPrevious&&this.$emit("update:index",this.index-1)},next:function(){this.canGoNext&&this.$emit("update:index",this.index+1)},downloadCSV:function(){var e=window.btoa(y.b(this.item.records));g.i("data:text/csv;base64,".concat(e),this.item.filename)},downloadText:function(){var e=window.btoa(this.item.text);g.i("data:text/plain;base64,".concat(e),this.item.filename)},downloadImage:function(){g.i(this.item.url,this.item.filename)},downloadPDF:function(){g.i(this.item.url,this.item.filename)}}},_=(n("Chl9"),Object(l.a)(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("FullscreenModal",{attrs:{title:e.title},on:{close:e.close},scopedSlots:e._u([e.item.filename&&e.download?{key:"navbar-right",fn:function(){return[n("NavbarButton",{attrs:{text:"Download"},on:{action:e.download}})]},proxy:!0}:null],null,!0)},[e._v(" "),n("div",{staticClass:"preview-layout"},[n("div",{staticClass:"preview-layout-side media-not-sm",on:{click:function(t){return t.target!==t.currentTarget?null:e.close(t)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.canGoPrevious,expression:"canGoPrevious"}],staticClass:"preview-seek-btn left",attrs:{title:"Previous"},on:{click:function(t){return t.preventDefault(),e.previous(t)}}},[n("Icon",{staticClass:"preview-seek-btn-icon",attrs:{icon:"chevron-left"}})],1)]),e._v(" "),n("div",{staticClass:"preview-layout-body",on:{click:function(t){return t.target!==t.currentTarget?null:e.close(t)}}},[n(e.itemComponent,{tag:"component",attrs:{item:e.item},on:{"will-load":e.onItemWillLoad,"did-load":e.onItemDidLoad}})],1),e._v(" "),n("div",{staticClass:"preview-layout-side media-not-sm",on:{click:function(t){return t.target!==t.currentTarget?null:e.close(t)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.canGoNext,expression:"canGoNext"}],staticClass:"preview-seek-btn right",attrs:{title:"Next"},on:{click:function(t){return t.preventDefault(),e.next(t)}}},[n("Icon",{staticClass:"preview-seek-btn-icon",attrs:{icon:"chevron-right"}})],1)])]),e._v(" "),n("FadeTransition",{attrs:{duration:.1}},[n("Spinner",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"preview-spinner"})],1)],1)}),[],!1,null,null,null));t.a=_.exports},oLoy:function(e,t,n){"use strict";var s={props:{value:{type:Boolean,default:!1},label:{type:String,default:""},description:{type:String,default:""},disabled:{type:Boolean,default:!1}},methods:{onClick:function(e){this.disabled||(e.preventDefault(),this.$emit("input",!0))}}},i=(n("G6cA"),n("KHd+")),r=Object(i.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ed-radio",attrs:{tabindex:"0",role:"radio","aria-checked":(!!e.value).toString(),"aria-disabled":(!!e.disabled).toString(),"aria-label":e.label},on:{click:e.onClick,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:e.onClick(t)}}},[n("div",{staticClass:"ed-radio-layout"},[e._m(0),e._v(" "),n("div",{staticClass:"ed-radio-label"},[e._v(e._s(e.label)),e._t("default")],2)]),e._v(" "),e.description?n("div",{staticClass:"ed-radio-description"},[e._v(e._s(e.description))]):e._e()])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"ed-radio-btn"},[t("div",{staticClass:"ed-radio-check"})])}],!1,null,null,null);t.a=r.exports},oNMn:function(e,t,n){"use strict";n("pNMO"),n("TeQF"),n("qePV"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("sEfC"),l=n.n(o),c=n("L2JU"),u=n("9Arg"),d=n("8PNo"),h=n("F3Tp"),p=n("83PK"),f=n("WmPt");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var v={components:{Avatar:h.a,UserRoleLabel:p.a,Icon:f.a},props:{user:{type:Object,required:!0},role:{type:String,required:!0},email:{type:String,required:!0}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(c.e)(["course"]),{},Object(c.c)(["getUserTutorials"]),{tutorial:function(){return this.getUserTutorials(this.user).join(", ")}}),methods:{copyEmail:function(){d.a(this.email)}}},b=(n("2Te8"),n("KHd+")),g=Object(b.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"discuss-user-info"},[n("div",{staticClass:"dui-header"},[n("Avatar",{staticClass:"dui-avatar",attrs:{user:e.user}}),e._v(" "),n("div",{staticClass:"dui-details"},[n("div",{staticClass:"dui-name"},[n("span",[e._v(e._s(e.user.name))]),e._v(" "),e.role?n("UserRoleLabel",{staticClass:"dui-role",attrs:{user:e.user,role:e.role,course:e.course}}):e._e()],1),e._v(" "),n("div",{staticClass:"dui-tutorial"},[e._v("\n\t\t\t\t"+e._s(e.tutorial)+"\n\t\t\t")]),e._v(" "),n("div",{staticClass:"dui-email"},[n("span",[e._v(e._s(e.email))]),e._v(" "),n("button",{staticClass:"dui-copy",attrs:{title:"Copy to Clipboard"},on:{click:e.copyEmail}},[n("Icon",{attrs:{icon:"copy"}})],1)])])],1)])}),[],!1,null,null,null).exports,y=n("nVGi"),w=n("UNns");function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var k,C=null,x={props:{userId:{type:Number,required:!0}},inject:["courseApi"],data:function(){return{visible:!1,loading:!1,loaded:!1,user:null}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(c.e)(["course"])),watch:{userId:function(){this.loaded=!1}},created:function(){this.delayedShow=l()(this.show,1e3),this.delayedHide=l()(this.hide,300)},destroyed:function(){this.hide()},methods:{onMouseEnter:function(){this.delayedHide.cancel(),this.delayedShow()},onMouseLeave:function(){this.delayedShow.cancel(),this.delayedHide()},onAncestorScroll:function(){this.hide()},show:function(){this.delayedShow.cancel(),this.delayedHide.cancel(),this.visible=!0,this.loadUserData(),C!==this&&(C&&(C.delayedShow.cancel(),C.delayedHide.cancel(),C.visible=!1),C=this,this.disposeScrollEvents=u.x(this.$el,this.onAncestorScroll))},hide:function(){this.delayedShow.cancel(),this.delayedHide.cancel(),this.visible=!1,C===this&&(C=null,this.disposeScrollEvents.dispose(),this.disposeScrollEvents=null)},loadUserData:(k=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loading&&!this.loaded){e.next=2;break}return e.abrupt("return");case 2:return this.loading=!0,e.prev=3,e.next=6,this.courseApi.getCourseUser(this.course.id,this.userId,{emails:!0});case 6:this.user=e.sent,this.loaded=!0,e.next=12;break;case 10:e.prev=10,e.t0=e.catch(3);case 12:return e.prev=12,this.loading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[3,10,12,15]])}))),function(){return k.apply(this,arguments)})},render:function(e){var t=this,n=this.$scopedSlots.default,s=this.loaded,i=this.visible,r=this.show,a=this.hide,o=this.onMouseEnter,l=this.onMouseLeave;return e(y.a,{props:{active:i&&s},scopedSlots:{trigger:function(e){var t=e.attrs;return n({attrs:t,mouseEnter:o,mouseLeave:l,show:r})},target:function(n){var s=n.targetLeft,i=n.targetTop,r=n.targetWidth,c=n.targetHeight;return e(w.a,{props:{targetLeft:s,targetTop:i,targetWidth:r,targetHeight:c,clipMode:"flip",anchorY:1,targetAnchorY:0,lightDismissable:!0},on:{close:function(){a()}},scopedSlots:{default:function(){var n=t.user;return e("div",{staticClass:"duip-layout",on:{mouseenter:o,mouseleave:l}},[e(g,{props:{user:n,email:n.email,role:n.role}})])}}})}}})}},j=(n("VM45"),Object(b.a)(x,void 0,void 0,!1,null,null,null));t.a=j.exports},oQLL:function(e,t,n){"use strict";var s=n("Y9Wh");n.n(s).a},oRKG:function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("0oug"),n("TeQF"),n("4mDm"),n("+2oP"),n("07d7"),n("YGK4"),n("PKPk"),n("3bBZ");t.a={data:function(){return{searchQuery:""}},computed:{allSelected:function(){return this.filteredItems.length>0&&this.filteredItems.every((function(e){return e.selected}))},selectedItems:function(){return this.items.filter((function(e){return e.selected}))},filteredItems:function(){return this.items.slice()}},watch:{filteredItems:function(){var e=new Set(this.filteredItems),t=!0,n=!1,s=void 0;try{for(var i,r=this.items[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;e.has(a)||(a.selected=!1)}}catch(o){n=!0,s=o}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}}},methods:{selectAll:function(e){var t=!0,n=!1,s=void 0;try{for(var i,r=this.filteredItems[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){i.value.selected=e}}catch(a){n=!0,s=a}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}}}}},oSlJ:function(e,t,n){"use strict";var s=n("I0ji");n.n(s).a},oVwF:function(e,t,n){"use strict";var s=n("WVTM");n.n(s).a},oZ07:function(e,t,n){},ocVH:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("SYor");var s=n("/jHr");function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?s.c(e):""===e.trim()}},oezD:function(e,t,n){},ofCr:function(e,t,n){"use strict";var s=n("jQ4J");n.n(s).a},ogGO:function(e,t,n){"use strict";var s=n("GDc/");n.n(s).a},olya:function(e,t,n){"use strict";var s=n("Nc8F");n.n(s).a},onGj:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("2B1R"),n("ToJy"),n("qePV"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s,i,r,a=n("o0o1"),o=n.n(a),l=(n("ls82"),n("HaE+")),c=n("rePB"),u=n("L2JU"),d=n("Q2AE"),h=n("t19P"),p=n("TphV"),f=n("2PkB"),m=n("CkVh"),v=n("Kaxq"),b=n("6XG0"),g={components:{EdInput:n("xtk+").a},props:{items:{type:Array,default:function(){return[]}},value:{type:void 0,default:void 0},placeholder:{type:String,default:""},keySelector:{type:Function,default:function(e,t){return t}},filterSelector:{type:Function,default:function(){return!0}},labelSelector:{type:Function,default:function(e){return String(e)}}},data:function(){return{query:"",locked:!1,listVisible:!1}},computed:{filteredItems:function(){var e=this.items,t=this.query,n=this.locked,s=this.filterSelector,i=n?"":t;return e.filter((function(e){return s(e,i)}))},lockedLabel:function(){return this.locked?this.labelSelector(this.value):this.query}},watch:{value:{immediate:!0,handler:function(e){e&&(this.query=this.labelSelector(e),this.locked=!0)}}},methods:{onItemClick:function(e){this.$emit("input",e),this.$refs.input.$el.blur()},onInputMousedown:function(e){this.listVisible||(e.preventDefault(),this.$refs.input.$el.select())},onInputFocus:function(){this.query="",this.listVisible=!0},onInputBlur:function(){this.locked||(this.query=""),this.listVisible=!1},onInputInput:function(e){this.query=e,this.locked=!1,this.value&&this.$emit("input",null)}}},y=(n("Z2Dp"),n("KHd+")),w=Object(y.a)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ed-combo"},[n("EdInput",{ref:"input",staticClass:"edcombo-input",attrs:{value:e.lockedLabel,placeholder:e.placeholder},on:{mousedown:e.onInputMousedown,focus:e.onInputFocus,blur:e.onInputBlur,input:e.onInputInput}}),e._v(" "),e.listVisible?n("div",{staticClass:"edcombo-list",on:{mousedown:function(e){e.preventDefault()}}},e._l(e.filteredItems,(function(t,s){return n("div",{key:e.keySelector(t,s),staticClass:"edcombo-list-item",on:{click:function(n){return e.onItemClick(t)}}},[e._t("item",null,{item:t,index:s,query:e.query})],2)})),0):e._e()],1)}),[],!1,null,null,null).exports,_=n("VYah"),k=n("YxxY"),C={props:{lesson:{type:Object,required:!0},slide:{type:Object,required:!0},userId:{type:Number,default:void 0},textHidden:{type:Boolean,default:!1},responseHidden:{type:Boolean,default:!1}}},x=n("ltWs"),j={components:{AmberDisplay:x.a},extends:C},O=Object(y.a)(j,(function(){var e=this.$createElement;return(this._self._c||e)("AmberDisplay",{attrs:{value:this.slide.content}})}),[],!1,null,null,null).exports,S={components:{EmbedEx:n("0gpV").a},extends:C},E=(n("9ipI"),Object(y.a)(S,(function(){var e=this.$createElement;return(this._self._c||e)("EmbedEx",{staticClass:"lesslip-pdf-embed",attrs:{src:this.slide.fileUrl,type:"application/pdf"}})}),[],!1,null,null,null).exports),T={components:{AmberDisplay:x.a},extends:C},I=Object(y.a)(T,(function(){var e=this.$createElement;return(this._self._c||e)("AmberDisplay",{attrs:{value:this.slide.content}})}),[],!1,null,null,null).exports,D=n("hH85"),P=n("R84W"),A={components:{AmberDisplay:x.a,VideoEmbed:D.a,Flexible:P.a},extends:C},N=(n("xzIh"),Object(y.a)(A,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"lesslip-vid-video"},[t("Flexible",{attrs:{ratio:9/16}},[t("VideoEmbed",{attrs:{url:this.slide.videoUrl}})],1)],1),this._v(" "),t("AmberDisplay",{staticClass:"lesslip-vid-content",attrs:{value:this.slide.content}})],1)}),[],!1,null,null,null).exports),R=n("SuT0"),M=n("kJps"),L={components:{Question:n("t1TD").a},extends:C},F=Object(y.a)(L,(function(){var e=this.$createElement;return(this._self._c||e)("Question",{attrs:{question:this.slide.question}})}),[],!1,null,null,null).exports,B=(n("fbCW"),n("4mDm"),n("07d7"),n("5s+n"),n("PKPk"),n("3bBZ"),n("ODXe")),q={props:{question:{type:null,required:!0},value:{type:null,required:!0},spans:{type:Array,default:void 0},textHidden:{type:Boolean,default:!1}}},$={components:{Show:n("2U/o").a},extends:q},U=Object(y.a)($,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.textHidden?this._e():t("Show",{attrs:{question:this.question,value:this.value,spans:this.spans,readonly:""}})],1)}),[],!1,null,null,null).exports,z={components:{Show:n("rMvd").a},extends:q},V=Object(y.a)(z,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.textHidden?this._e():t("Show",{attrs:{question:this.question,value:this.value,spans:this.spans,readonly:""}})],1)}),[],!1,null,null,null).exports,H={extends:q},W=(n("QBh3"),Object(y.a)(H,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.value?t("pre",{staticClass:"quiz-question-preview-shortanswer-response"},[this._v(this._s(this.value))]):this._e()])}),[],!1,null,null,null).exports),Q={components:{Show:n("d4Fw").a},extends:q},K=Object(y.a)(Q,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.textHidden?this._e():t("Show",{attrs:{question:this.question,value:this.value,spans:this.spans,readonly:""}})],1)}),[],!1,null,null,null).exports,Y={components:{Show:n("PXqa").a},extends:q},G=Object(y.a)(Y,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.textHidden?this._e():t("Show",{attrs:{question:this.question,value:this.value,spans:this.spans,readonly:""}})],1)}),[],!1,null,null,null).exports,X={components:{Show:n("LzC0").a},extends:q},J=Object(y.a)(X,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.textHidden?this._e():t("Show",{attrs:{question:this.question,value:this.value,spans:this.spans,readonly:""}})],1)}),[],!1,null,null,null).exports,Z={components:{Show:n("kYGP").a},extends:q},ee=Object(y.a)(Z,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.textHidden?this._e():t("Show",{attrs:{question:this.question,value:this.value,spans:this.spans,readonly:""}})],1)}),[],!1,null,null,null).exports,te=n("/jHr"),ne={components:{AmberDisplay:x.a},extends:q,computed:{hasContent:function(){return this.value&&this.value.content&&!Object(te.c)(this.value.content)}}},se=(n("BuBW"),Object(y.a)(ne,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.hasContent?t("AmberDisplay",{staticClass:"quiz-question-preview-general-response",attrs:{value:this.value.content,"non-interactive":""}}):this._e()],1)}),[],!1,null,null,null).exports),ie=n("E2AO"),re=(s={},Object(c.a)(s,ie.a.TYPE_MULTIPLE_CHOICE,U),Object(c.a)(s,ie.a.TYPE_TRUE_FALSE,V),Object(c.a)(s,ie.a.TYPE_SHORT_ANSWER,W),Object(c.a)(s,ie.a.TYPE_WORDCLOUD,W),Object(c.a)(s,ie.a.TYPE_NUMERICAL,K),Object(c.a)(s,ie.a.TYPE_REORDER,G),Object(c.a)(s,ie.a.TYPE_HOTSPOT,J),Object(c.a)(s,ie.a.TYPE_SKETCH,ee),Object(c.a)(s,ie.a.TYPE_GENERAL,se),s),ae={components:{FormattedDisplay:n("qJ5K").a},props:{question:{type:null,required:!0},value:{type:null,required:!0},spans:{type:Array,default:void 0},textHidden:{type:Boolean,default:!1}},computed:{component:function(){return re[this.question.type]}}},oe=(n("x6K9"),Object(y.a)(ae,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quiz-question-preview"},[e.textHidden?e._e():n("FormattedDisplay",{staticClass:"qqprev-content",attrs:{value:e.question.content,formatted:e.question.formatted,spans:e.spans}}),e._v(" "),n(e.component,{tag:"component",attrs:{question:e.question,value:e.value,spans:e.spans,"text-hidden":e.textHidden}})],1)}),[],!1,null,null,null).exports),le=n("sl2b"),ce=n("/Yj0"),ue={components:{AmberDisplay:x.a,Question:oe},extends:C,inject:["lessonApi"],data:function(){return{questions:[],responses:[],states:[]}},computed:{updateTrigger:function(){return[this.slide.id,this.userId].join(",")},passage:function(){return this.slide.passage||te.a},hasPassage:function(){return!te.c(this.passage)},computedQuestions:function(){var e=this.lesson,t=this.questions,n=this.states,s=this.responses;return t.map((function(i,r){var a=s.find((function(e){return e.questionId===i.id})),o=n.find((function(e){return e.questionId===i.id})),l=null,c=!1;return a&&o?a.createdAt>o.createdAt?(l=a.data,c=!0):l=o.data:a?(l=a.data,c=!0):o&&(l=o.data),{question:i,submitted:c,response:l,title:t.length>1||e.settings.quizQuestionNumberStyle?Object(le.a)(r+1,e.settings.quizQuestionNumberStyle):"Question"}}))}},watch:{updateTrigger:"update"},created:function(){this.update()},methods:{update:(i=Object(l.a)(o.a.mark((function e(){var t,n,s,i,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.questions=[],this.responses=[],this.states=[],e.prev=3,e.next=6,Promise.all([this.lessonApi.getSlideQuestions(this.slide.id),this.lessonApi.getSlideResponses(this.slide.id,this.userId),this.lessonApi.getSlideStates(this.slide.id,this.userId)]);case 6:i=e.sent,r=Object(B.a)(i,3),t=r[0],n=r[1],s=r[2],e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),ce.b({type:"error",text:"Unable to load questions for this slide."}),e.abrupt("return");case 17:this.questions=t,this.responses=n,this.states=s;case 20:case"end":return e.stop()}}),e,this,[[3,13]])}))),function(){return i.apply(this,arguments)})}},de=(n("Cupl"),Object(y.a)(ue,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"lesslip-quiz"},[e.hasPassage&&!e.textHidden?n("AmberDisplay",{staticClass:"lesslipq-passage",attrs:{value:e.passage}}):e._e(),e._v(" "),e._l(e.computedQuestions,(function(t,s){return n("div",{key:t.question.id,staticClass:"lesslipq-question"},[n("h1",{staticClass:"lesslipq-question-title"},[e._v(e._s(t.title))]),e._v(" "),n("Question",{attrs:{question:t.question.quizQuestion,value:e.responseHidden?void 0:t.response,"text-hidden":e.textHidden}})],1)}))],2)}),[],!1,null,null,null).exports),he=n("3I1m"),pe=(r={},Object(c.a)(r,he.h.document,O),Object(c.a)(r,he.h.pdf,E),Object(c.a)(r,he.h.code,I),Object(c.a)(r,he.h.postgres,I),Object(c.a)(r,he.h.rstudio,I),Object(c.a)(r,he.h.jupyter,I),Object(c.a)(r,he.h.web,I),Object(c.a)(r,he.h.video,N),Object(c.a)(r,he.h.webpage,R.a),Object(c.a)(r,he.h.html,M.a),Object(c.a)(r,he.h.quizQuestion,F),Object(c.a)(r,he.h.quiz,de),r),fe=n("5/Cn"),me=n("9Arg"),ve=n("hSdx");function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye,we,_e={name:"LessonPreview",components:{HeaderContainer:h.a,ContextMenuTrigger:m.a,ContextMenuItem:v.a,Navbar:p.a,NavbarButton:f.a,EdCheck:b.a,EdCombo:w,Split:_.a,SplitPanel:k.a},inject:["lessonApi","courseApi"],props:{lessonId:{type:Number,required:!0}},data:function(){return{optionsFrac:220,bodyFrac:1,loading:!1,downloading:!1,lesson:null,slides:null,menuVisible:!1,textVisible:!0,responsesVisible:!0,userComboValue:null,previewUser:null,users:[]}},computed:ge({},Object(u.e)(["course","user"]),{},Object(u.c)(["isStaff"]),{items:function(){return this.slides.map((function(e){return{slide:e,component:pe[e.type]}}))}}),watch:{userComboValue:function(e){e&&(this.previewUser=e)}},created:function(){this.userComboValue=this.user,this.previewUser=this.user,this.update()},mounted:function(){this.setNavbarVisible(!0)},destroyed:function(){this.setNavbarVisible(!1)},methods:ge({},Object(u.d)({setNavbarVisible:d.c.SET_NAVBAR_VISIBLE}),{update:function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,this.isStaff&&this.loadUsers(),e.prev=2,e.next=5,this.lessonApi.getLesson(this.lessonId);case 5:t=e.sent,n=t.lesson,s=t.slides,this.lesson=n,this.slides=s,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),ce.b({type:"error",text:"Unable to load lesson preview."});case 15:return e.prev=15,this.loading=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(){return e.apply(this,arguments)}}(),loadUsers:(we=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.courseApi.getCourseUsers(this.course.id,{emails:!0});case 2:this.users=e.sent,this.users.sort((function(e,t){return ve.naturalComparator(e.name,t.name)}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return we.apply(this,arguments)}),print:function(){me.A(this.$refs.content)},downloadPdf:(ye=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=me.l(this.$refs.content),this.downloading=!0,e.prev=2,e.next=5,this.courseApi.downloadPdf(this.course.id,t,"".concat(this.lesson.title,".pdf"));case 5:e.next=13;break;case 7:return e.prev=7,e.t0=e.catch(2),e.next=11,fe.a({icon:"warning",title:"Unable to generate PDF",text:"Please try again.",subtext:"Alternatively select Generate Offline and choose Save as PDF as the destination.",secondaryAction:"Generate Offline"});case 11:e.sent||this.print();case 13:this.downloading=!1;case 14:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(){return ye.apply(this,arguments)}),userComboFilterSelector:function(e,t){return ve.validateSubstrDeep(e,t,"name","email")}})},ke=(n("Ffo8"),Object(y.a)(_e,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("HeaderContainer",{staticClass:"lesson-preview",scopedSlots:e._u([{key:"header",fn:function(){return[n("Navbar",{attrs:{title:"Preview",loading:e.loading,secondary:""},scopedSlots:e._u([{key:"left",fn:function(){return[n("NavbarButton",{attrs:{text:"Back",icon:"chevron-left"},on:{action:function(t){return e.$router.back()}}})]},proxy:!0},{key:"right",fn:function(){return[n("NavbarButton",{attrs:{text:e.downloading?"Generating...":"Download PDF",disabled:!e.lesson||e.downloading},on:{action:e.downloadPdf}}),e._v(" "),n("ContextMenuTrigger",{attrs:{active:e.menuVisible},on:{"update:active":function(t){e.menuVisible=t}},scopedSlots:e._u([{key:"trigger",fn:function(t){var s=t.trigger,i=t.attrs;return[n("NavbarButton",e._b({attrs:{icon:"more-horiz"},on:{action:s}},"NavbarButton",i,!1))]}},{key:"items",fn:function(){return[n("ContextMenuItem",{key:"print",attrs:{text:"Print"},on:{click:e.print}})]},proxy:!0}])})]},proxy:!0}])})]},proxy:!0}])},[e._v(" "),n("Split",{staticClass:"lesprev-split",attrs:{orientation:"horizontal"}},[n("SplitPanel",{attrs:{sizing:"fixed",frac:e.optionsFrac,"min-frac":100,"max-frac":300},on:{"update:frac":function(t){e.optionsFrac=t}}},[n("div",{staticClass:"lesprev-options"},[e.isStaff?[n("EdCombo",{staticClass:"lesprev-user-combo",attrs:{placeholder:"Select a user",items:e.users,"key-selector":function(e){return e.id},"filter-selector":e.userComboFilterSelector,"label-selector":function(e){return e.name}},scopedSlots:e._u([{key:"item",fn:function(t){var s=t.item;t.query;return[n("div",{staticClass:"lesprev-user-item"},[n("div",{staticClass:"lesprev-user-item-name"},[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(s.name)+"\n\t\t\t\t\t\t\t\t")]),e._v(" "),n("div",{staticClass:"lesprev-user-item-email"},[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(s.email)+"\n\t\t\t\t\t\t\t\t")])])]}}],null,!1,3187852564),model:{value:e.userComboValue,callback:function(t){e.userComboValue=t},expression:"userComboValue"}})]:e._e(),e._v(" "),n("h2",{staticClass:"lesprev-heading"},[e._v("View options")]),e._v(" "),n("EdCheck",{staticClass:"lesprev-options-item",attrs:{label:"Show questions"},model:{value:e.textVisible,callback:function(t){e.textVisible=t},expression:"textVisible"}}),e._v(" "),n("EdCheck",{staticClass:"lesprev-options-item",attrs:{label:"Show responses"},model:{value:e.responsesVisible,callback:function(t){e.responsesVisible=t},expression:"responsesVisible"}})],2)]),e._v(" "),n("SplitPanel",{attrs:{frac:e.bodyFrac},on:{"update:frac":function(t){e.bodyFrac=t}}},[n("div",{staticClass:"lesprev-preview"},[e.lesson?n("div",{ref:"content",staticClass:"lesprev-container"},[n("h1",{staticClass:"lesprev-title"},[e._v(e._s(e.lesson.title))]),e._v(" "),e._l(e.items,(function(t){return n("div",{key:t.slide.id,staticClass:"lesprev-item"},[n("h1",{staticClass:"lesprev-slide-title"},[e._v(e._s(t.slide.title))]),e._v(" "),n(t.component,{tag:"component",attrs:{lesson:e.lesson,slide:t.slide,"user-id":e.previewUser.id,"text-hidden":!e.textVisible,"response-hidden":!e.responsesVisible}})],1)}))],2):e._e()])])],1)],1)}),[],!1,null,null,null));t.default=ke.exports},onUx:function(e,t,n){"use strict";var s=n("JRR8");n.n(s).a},onyE:function(e,t,n){},oxn1:function(e,t,n){"use strict";var s=n("pC21");n.n(s).a},"p/un":function(e,t,n){},p2fF:function(e,t,n){},p5fx:function(e,t,n){"use strict";var s=n("i4Fa");n.n(s).a},p82i:function(e,t,n){},pAbs:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("rePB"),i=n("L2JU"),r=n("MXzO"),a=n("oDEV"),o=n("NC1X");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var c={name:"Jupyter",components:{FadeTransition:a.a,Spinner:o.a},inject:["fetch","challengeApi","sessionService"],data:function(){return{ctrl:null,jupyterUrl:null,appbar:{title:"Jupyter (beta)",visible:!0}}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(i.e)(["user"])),created:function(){this.ctrl=new r.a(this.fetch,this.challengeApi,this.sessionService),this.ctrl.onInit(this.onCtrlInit),this.ctrl.load("jupyter",null,{userId:this.user.id,image:this.$route.query.image})},destroyed:function(){this.ctrl.unload()},methods:{onCtrlInit:function(){this.jupyterUrl=this.ctrl.getJupyterUrl()},home:function(){this.$refs.iframe.src=this.$refs.iframe.src},restart:function(){this.ctrl.workspaceSession.stopService("jupyter"),this.ctrl.workspaceSession.startService("jupyter"),this.$refs.iframe.src=this.$refs.iframe.src}}},u=(n("KTI/"),n("KHd+")),d=Object(u.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"jupyter"},[n("header",{staticClass:"jupyter-header"},[n("button",{staticClass:"jupyter-header-action",attrs:{disabled:e.ctrl.loading},on:{click:e.home}},[e._v("Home")]),e._v(" "),n("button",{staticClass:"jupyter-header-action",attrs:{disabled:e.ctrl.loading},on:{click:e.restart}},[e._v("Restart")])]),e._v(" "),e.jupyterUrl?n("iframe",{ref:"iframe",staticClass:"jupyter-iframe",attrs:{src:e.jupyterUrl,sandbox:"allow-scripts allow-modals allow-popups allow-forms allow-same-origin"}}):e._e(),e._v(" "),n("FadeTransition",[e.ctrl.loading?n("div",{staticClass:"jupyter-overlay"},[n("div",{staticClass:"jupyter-overlay-text"},[e._v("Opening Jupyter...")]),e._v(" "),n("Spinner",{staticClass:"jupyter-overlay-spinner"})],1):e._e()])],1)}),[],!1,null,null,null);t.default=d.exports},pC21:function(e,t,n){},pFjV:function(e,t,n){},pFqp:function(e,t,n){"use strict";var s=n("UQqx");n.n(s).a},"pP/o":function(e,t,n){"use strict";n.r(t);n("pNMO"),n("4Brf"),n("0oug"),n("ma9I"),n("TeQF"),n("4mDm"),n("2B1R"),n("ToJy"),n("Tskq"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("PKPk"),n("SYor"),n("FZtP"),n("3bBZ");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("ODXe"),o=n("KQm4"),l=n("rePB"),c=n("wd/R"),u=n.n(c),d=n("L2JU"),h=n("4PS8"),p=n("/Yj0"),f=n("5/Cn"),m=n("hSdx"),v=n("9Arg"),b=n("GJ+R"),g=n("Pa8A"),y=n("WmPt"),w=n("NC1X"),_=n("0XH5"),k=n("9wdi"),C=n("N+Un"),x=n("43W2"),j=n("Oshs"),O=n("4K9I"),S=n("JBdv"),E=n("HEf1"),T=(n("fbCW"),n("Q2AE")),I=n("OBDa"),D=n("Gste"),P=n("LnxB");function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R,M={components:{DialogLayout:I.a,SearchInput:_.a,Datatable:D.a,EdButton:O.a,Message:P.a},inject:["courseApi"],data:function(){return{searchQuery:"",selectedLab:null,updatingEnrollment:!1,sortColumn:"timeStart",sortDescending:!1}},computed:N({},Object(d.e)(["labs","labsLoading","course","user"]),{},Object(d.c)(["nextLabTimeFor"]),{loading:function(){return this.labsLoading||this.updatingEnrollment},columns:function(){return[].concat(Object(o.a)(this.course.lab?[{key:"icon",type:"icon"}]:[]),[{key:"name",header:"Name",type:"text",sortable:!0},{key:"location",header:"Location",type:"text",sortable:!0},{key:"timeStart",header:"Start time",type:"date",format:"ddd D/M/YY h:mm a",sortable:!0},{key:"duration",header:"Duration",type:"number",sortable:!0},{key:"enrollments",header:"Enrollments",type:"number",display:function(e,t){return e+(t.maxEnrollments?"/".concat(t.maxEnrollments):"")},sortable:!0}])},items:function(){var e=this;return this.labs.filter((function(e){return!e.hidden})).map((function(t){var n=e.nextLabTimeFor(t);return{id:t.id,name:t.name,location:t.location,duration:t.duration,enrollments:t.enrollments,maxEnrollments:t.maxEnrollments,timeStart:n&&n.startExact,timeEnd:n&&n.endExact,icon:e.course.lab&&e.course.lab.id===t.id?"tick":null}}))},filteredItems:function(){var e=this,t=this.columns.find((function(e){return"timeStart"===e.key})).format;return this.items.filter((function(n){return m.validateSubstrDeep({name:n.name,location:n.location,duration:n.duration,time:n.timeStart&&n.timeStart.format(t)},e.searchQuery,"name","location","duration","time")})).sort((function(e,t){return m.naturalComparator(e.name,t.name)}))}}),created:function(){var e=this;this.selectedLab=this.course.lab&&this.labs.find((function(t){return t.id===e.course.lab.id}))||null,this.loadLabs()},methods:N({},Object(d.b)({loadLabs:T.a.LOAD_LABS}),{enroll:(R=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.updatingEnrollment&&this.selectedLab){e.next=2;break}return e.abrupt("return");case 2:if(!((t=this.course.lab&&this.course.lab.id===this.selectedLab.id?null:this.selectedLab)&&t.maxEnrollments&&t.enrollments>=t.maxEnrollments)){e.next=6;break}return f.a({icon:"error",title:"Cannot enroll in this lab",text:"This lab cannot accept any more enrollments."}),e.abrupt("return");case 6:return this.updatingEnrollment=!0,e.prev=7,e.next=10,this.courseApi.updateCourseRole(this.course.id,this.user.id,{lab_id:t?t.id:null});case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(7),f.a({icon:"error",title:"Unable to update lab enrollment",text:"Check your Internet connection and try again later."}),e.abrupt("return");case 16:return e.prev=16,this.updatingEnrollment=!1,e.finish(16);case 19:p.b({type:"success",text:"Your lab enrollment has been updated."}),this.$emit("done");case 21:case"end":return e.stop()}}),e,this,[[7,12,16,19]])}))),function(){return R.apply(this,arguments)})})},L=(n("cHTo"),n("KHd+")),F=Object(L.a)(M,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogLayout",{staticClass:"sheet-lab-enrollment",attrs:{title:"Lab Enrollment",disabled:e.loading},scopedSlots:e._u([{key:"primaryActions",fn:function(){return[n("EdButton",{staticClass:"primary",attrs:{disabled:e.loading||!e.selectedLab},on:{click:e.enroll}},[e._v("\n\t\t\t"+e._s(e.course.lab&&e.selectedLab&&e.course.lab.id===e.selectedLab.id?"Unenroll":"Enroll")+"\n\t\t")])]},proxy:!0}])},[n("div",{staticClass:"slaben-content"},[n("Message",{staticClass:"slaben-message"},[e._v("Choose the lab you want to be enrolled in.")]),e._v(" "),n("SearchInput",{staticClass:"slaben-search",attrs:{placeholder:"Filter labs",disabled:e.loading},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),e._v(" "),n("div",{staticClass:"slaben-table-scroll"},[n("Datatable",{staticClass:"slaben-table",attrs:{theme:"rowBorder",columns:e.columns,rows:e.filteredItems,"selection-mode":"row","is-row-selected":function(t){return t===e.selectedLab},"sort-column":e.sortColumn,"sort-descending":e.sortDescending},on:{"update:sortColumn":function(t){e.sortColumn=t},"update:sort-column":function(t){e.sortColumn=t},"update:sortDescending":function(t){e.sortDescending=t},"update:sort-descending":function(t){e.sortDescending=t},"row-click":function(t){e.selectedLab=t.row}}})],1)],1)])}),[],!1,null,null,null).exports;function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $,U,z={name:"AssessmentIndex",directives:{Tooltip:g.a},components:{Icon:y.a,Spinner:w.a,SearchInput:_.a,Actionbar:k.a,ActionbarAction:C.a,StatusMessage:x.a,SheetContainer:j.a,EdButton:O.a,DateDisplay:S.a},inject:["challengeApi"],data:function(){return{loading:!1,searchQuery:"",assessments:[],challenges:[],ip:null}},computed:q({},Object(d.e)(["user","course"]),{},Object(d.c)(["isAdmin","isStaff","isLockdownActive","isLabActive","nextLabTime"]),{ipHash:function(){return this.ip&&Object(h.e)(this.ip,this.user.id)},computedAssessments:function(){return[].concat(Object(o.a)(this.assessments),Object(o.a)(this.challenges))},filteredAssessments:function(){var e=this;return this.computedAssessments.filter((function(t){return b.a(t,e.course.lab,e.isStaff,e.isLockdownActive,e.isLabActive,e.ip).read&&m.validateSubstrDeep(t,e.searchQuery,"title")}))},groups:function(){var e=this,t=new Map,n=!0,s=!1,i=void 0;try{for(var r,o=this.filteredAssessments[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var l=r.value,c=l.category.trim();t.has(c)||t.set(c,[]),t.get(c).push(l)}}catch(y){s=!0,i=y}finally{try{n||null==o.return||o.return()}finally{if(s)throw i}}var u=new Date(0,0),d=[],h=!0,p=!1,f=void 0;try{for(var v,b=function(){var t=Object(a.a)(v.value,2),n=t[0],s=t[1],i=!0,r=!0,o=null;d.push({category:n,assessments:s.sort((function(e,t){var n=(t.due_at||u)-(e.due_at||u);return 0!==n?n:0!==(n=e.number-t.number)?n:m.naturalComparator(e.title,t.title)})).map((function(t){(null==o||t.number>o)&&(o=t.number,i=i&&r,r=!0);var n=q({},t,{unavailableSequentially:!e.isStaff&&t.sequential_completion&&!i,unavailableCompleted:!e.isStaff&&t.unavailable_after_completion&&"completed"===t.status});return r=r&&"completed"===t.status,n}))})},g=t.entries()[Symbol.iterator]();!(h=(v=g.next()).done);h=!0)b()}catch(y){p=!0,f=y}finally{try{h||null==g.return||g.return()}finally{if(p)throw f}}return d.sort((function(e,t){return m.naturalComparator(e.category,t.category)})),d}}),watch:{isLabActive:"update"},created:function(){this.update()},methods:{formatDate:function(e,t){return u()(e).format(t)},assessmentLink:function(e){return e.unavailableCompleted||e.unavailableSequentially?"":{name:"assessment-show",params:{challengeId:e.id}}},update:(U=Object(r.a)(i.a.mark((function e(){var t,n,s,r,a,o,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loading=!0,e.prev=1,!this.isLabActive){e.next=6;break}return e.next=5,v.r();case 5:this.ip=e.sent;case 6:return t={ipHash:this.ipHash},e.next=9,this.challengeApi.getCourseChallenges("assessment",this.course.id,t);case 9:if(this.assessments=e.sent,571!==this.course.id){e.next=34;break}return e.next=13,this.challengeApi.getCourseChallenges("challenge",this.course.id,t);case 13:for(n=e.sent,this.challenges=n.filter((function(e){return/1105|1905|9105/.test(e.title)})),s=!0,r=!1,a=void 0,e.prev=18,o=this.challenges[Symbol.iterator]();!(s=(l=o.next()).done);s=!0)l.value.category="Tutorial Exercises";e.next=26;break;case 22:e.prev=22,e.t0=e.catch(18),r=!0,a=e.t0;case 26:e.prev=26,e.prev=27,s||null==o.return||o.return();case 29:if(e.prev=29,!r){e.next=32;break}throw a;case 32:return e.finish(29);case 33:return e.finish(26);case 34:e.next=39;break;case 36:e.prev=36,e.t1=e.catch(1),p.b({type:"error",text:"Unable to fetch assessments."});case 39:return e.prev=39,this.loading=!1,e.finish(39);case 42:case"end":return e.stop()}}),e,this,[[1,36,39,42],[18,22,26,34],[27,,29,33]])}))),function(){return U.apply(this,arguments)}),deleteAssessment:($=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.b({title:"Delete assessment?",text:"This cannot be undone.",icon:"warning",primaryAction:"Delete"});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,this.challengeApi.destroyChallenge(t.id);case 7:this.assessments=this.assessments.filter((function(e){return e.id!==t.id})),this.challenges=this.challenges.filter((function(e){return e.id!==t.id})),p.b({type:"success",text:"Assessment deleted."}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),p.b({type:"error",text:"Unable to delete assessment."});case 15:case"end":return e.stop()}}),e,this,[[4,12]])}))),function(e){return $.apply(this,arguments)}),showNewAssessmentSheet:function(){var e=this;this.$refs.sheetContainer.showSheet(E.a,(function(){e.$refs.sheetContainer.closeSheet()}))},showLabEnrollmentSheet:function(){var e=this;this.$refs.sheetContainer.showSheet(F,(function(){e.$refs.sheetContainer.closeSheet()}))}}},V=(n("Xx36"),Object(L.a)(z,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._m(0),e._v(" "),n("div",{staticClass:"assi-container"},[e.isStaff||!e.course.settings.user_lab_enrollment&&!e.course.lab?e._e():n("div",{staticClass:"assi-lab"},[n("div",[e.course.lab?[e._v("\n\t\t\t\t\tYou are enrolled in exam lab "),n("strong",[e._v(e._s(e.course.lab.name))]),e._v(" "),n("table",{staticClass:"assi-lab-info"},[n("tr",[e.course.lab.location?n("th",[e._v("Location:")]):e._e(),e._v(" "),n("td",[n("strong",[e._v(e._s(e.course.lab.location))])])]),e._v(" "),n("tr",[n("th",[e._v("Start time:")]),e._v(" "),n("td",[n("strong",[e.nextLabTime?n("DateDisplay",{attrs:{date:e.nextLabTime.startExact,format:"dddd D MMMM [at] h:mm a"}}):[e._v("Ended")]],2)])]),e._v(" "),n("tr",[n("th",[e._v("Duration:")]),e._v(" "),n("td",[n("strong",[e._v(e._s(e.course.lab.duration)+" minutes")])])])])]:[e._v("You are not enrolled in any lab")]],2),e._v(" "),e.course.settings.user_lab_enrollment?n("EdButton",{staticClass:"assi-lab-btn",on:{click:e.showLabEnrollmentSheet}},[e._v("\n\t\t\t\t"+e._s(e.course.lab?"Change":"Enroll")+"\n\t\t\t")]):e._e()],1),e._v(" "),n("Actionbar",{directives:[{name:"show",rawName:"v-show",value:e.isAdmin||e.computedAssessments.length,expression:"isAdmin || computedAssessments.length"}],staticClass:"page-heading-actions",scopedSlots:e._u([e.isAdmin?{key:"primary",fn:function(){return[n("ActionbarAction",{staticClass:"primary",on:{click:e.showNewAssessmentSheet}},[e._v("New Assessment")])]},proxy:!0}:null,{key:"secondary",fn:function(){return[n("SearchInput",{attrs:{placeholder:"Search assessments"},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}})]},proxy:!0}],null,!0)}),e._v(" "),e.loading?n("Spinner",{staticClass:"assi-spinner"}):[e.groups.length?e._e():n("StatusMessage",{scopedSlots:e._u([{key:"subtext",fn:function(){return[e.searchQuery?[e._v("Refine your search and try again")]:e.isAdmin?[n("a",{on:{click:e.showNewAssessmentSheet}},[e._v("Create a new assessment")])]:[e._v("Check back later")]]},proxy:!0}],null,!1,862778452)},[e.searchQuery?[e._v("No assessments match your search query")]:[e._v("There are no assessments yet")]],2),e._v(" "),e._l(e.groups,(function(t){return n("div",{key:t.category},[t.category?n("h2",{staticClass:"assi-group-category"},[e._v(e._s(t.category))]):e._e(),e._v(" "),e._l(t.assessments,(function(t){return n("div",{key:t.id,staticClass:"assi-item",class:{"assi-item-unavailable":t.unavailableCompleted||t.unavailableSequentially},attrs:{tag:"div"}},[n("RouterLink",{staticClass:"assi-item-content assi-link",attrs:{to:e.assessmentLink(t)}},[t.is_exam?n("div",{staticClass:"assi-exam"},[e._v("\n\t\t\t\t\t\t\t"+e._s(t.write?"Exam":"Exam Preview")+"\n\t\t\t\t\t\t")]):e._e(),e._v(" "),n("div",{staticClass:"assi-title-layout"},[t.has_password?n("Icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Password Required",expression:"'Password Required'"}],staticClass:"assi-title-lock",attrs:{icon:"lock"}}):e._e(),e._v(" "),n("span",{staticClass:"assi-title-text"},[e._v(e._s(t.title))]),e._v(" "),t.is_hidden?n("span",{staticClass:"assi-title-hidden"},[e._v("(hidden)")]):e._e()],1),e._v(" "),n("div",{staticClass:"assi-outline"},[e._v(e._s(t.outline))]),e._v(" "),n("div",{staticClass:"assi-footnote"},["completed"===t.status?[e._v("You have completed this assessment.")]:e._e(),e._v(" "),t.unavailableCompleted?[e._v("It is no longer available for you to access.")]:t.unavailableSequentially?[e._v("You must complete all prior assessments first.")]:e._e()],2)]),e._v(" "),t.due_at?n("RouterLink",{staticClass:"assi-item-aside assi-link",attrs:{to:e.assessmentLink(t),tabindex:"-1"}},[n("div",{staticClass:"assi-title"},[e._v("Due")]),e._v(" "),n("div",{staticClass:"assi-due"},[e._v("\n\t\t\t\t\t\t\t"+e._s(e.formatDate(t.due_at,"h:mmA dddd"))),n("br"),e._v("\n\t\t\t\t\t\t\t"+e._s(e.formatDate(t.due_at,"D MMMM YYYY"))+"\n\t\t\t\t\t\t")])]):e._e(),e._v(" "),e.isAdmin?n("div",{staticClass:"assi-actions"},[n("RouterLink",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Edit",expression:"'Edit'"}],staticClass:"assi-action",attrs:{to:{name:"assessment-edit",params:{challengeId:t.id}}},on:{click:function(e){e.stopPropagation()}}},[n("Icon",{attrs:{icon:"pencil"}})],1),e._v(" "),n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Delete",expression:"'Delete'"}],staticClass:"assi-action",on:{click:function(n){return n.stopPropagation(),e.deleteAssessment(t)}}},[n("Icon",{attrs:{icon:"cross"}})],1)],1):e._e()],1)}))],2)}))]],2),e._v(" "),n("SheetContainer",{ref:"sheetContainer",staticClass:"assi-sheet-container"})],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"page-heading-container"},[t("h1",{staticClass:"page-heading"},[this._v("Assessments")])])}],!1,null,null,null));t.default=V.exports},pPUH:function(e,t,n){"use strict";var s=n("+inH");n.n(s).a},pQCh:function(e,t,n){"use strict";var s=n("YLrK");n.n(s).a},"pQr/":function(e,t,n){"use strict";var s=n("YK/l");n.n(s).a},pQym:function(e,t,n){},pcOO:function(e,t,n){},pcie:function(e,t,n){"use strict";var s=n("qMts");n.n(s).a},pfCn:function(e,t,n){},pkDc:function(e,t,n){},pmaU:function(e,t,n){"use strict";var s=n("mBO2");n.n(s).a},ppKb:function(e,t,n){e.exports=n.p+"assets/avatar.be22d9cf.svg"},pqoI:function(e,t,n){},"q/nw":function(e,t,n){},q6BU:function(e,t,n){},q6QK:function(e,t,n){"use strict";n("pNMO"),n("TeQF"),n("fbCW"),n("uqXc"),n("2B1R"),n("+2oP"),n("ToJy"),n("qePV"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("5s+n"),n("Rm1S"),n("OM9Z"),n("FZtP");var s=n("rePB"),i=n("o0o1"),r=n.n(i),a=(n("ls82"),n("HaE+")),o=n("DzJC"),l=n.n(o),c=n("bdgK"),u=n("L2JU"),d=n("hSdx"),h=n("9Arg"),p=n("5/Cn"),f=n("/Yj0"),m=n("7W7u"),v=n("8PNo"),b=n("VrN/"),g=n.n(b);n("/9rB"),n("ELLl"),n("jDMi"),n("Bd2K"),n("uTOq"),n("C2zF"),n("Ku0u"),n("McUL"),n("cokd"),n("6wyt"),n("dfh3"),n("Lm6R");g.a.defineOption("showInvisibles",!1,(function(e,t,n){var s,i=0,r=e.getOption("maxInvisibles")||16;n===g.a.Init&&(n=!1),n&&!t?(e.removeOverlay("invisibles"),s=document.querySelector('[data-name="js-show-invisibles"]'),document.head.removeChild(s)):!n&&t&&(!function(e){var t="",n="",s=document.createElement("style");s.setAttribute("data-name","js-show-invisibles"),n+='.CodeMirror .cm-tab::before { position: absolute; content: "→"; }\n';for(var i=1;i<=e;++i)n+=".CodeMirror .cm-whitespace-"+i+'::before { content: "'+(t+="·")+'"; }\n';s.textContent='\n.cm-whitespace::before {\n\tposition: absolute;\n\tpointer-events: none;\n\tcolor: #404F7D;\n}\n\n.CodeMirror-code > div > pre > span::after {\n\tpointer-events: none;\n\tcolor: #404F7D;\n\tcontent: "¬"\n}\n'+n,document.head.appendChild(s)}(r),e.addOverlay({name:"invisibles",token:function(e){var t,n=0,s=" "===e.peek();if(s){for(;s&&n<r;)++n,e.next(),s=" "===e.peek();t="whitespace whitespace-"+n,n===r&&(t+=" whitespace-rand-"+i++)}else{for(;!e.eol()&&!s;)e.next(),s=" "===e.peek();t="cm-eol"}return t}}))}));n("4Brf"),n("0oug"),n("ma9I"),n("x0AG"),n("yq1k"),n("4mDm"),n("pDQq"),n("JTJg"),n("PKPk"),n("3bBZ");var y=n("KQm4"),w=n("kvrn"),_=n.n(w),k=n("1OyB"),C=n("vuIU"),x=n("ODXe"),j=n("sEfC"),O=n.n(j),S=n("Kw5r"),E=n("CXsq"),T=(n("Tskq"),n("/lWA")),I=n("Pa8A"),D=n("UNns"),P=n("WmPt"),A=n("vF1J"),N=new Map([[1,{icon:"string",label:"Text"}],[2,{icon:"method",label:"Method"}],[3,{icon:"method",label:"Function"}],[4,{icon:"method",label:"Constructor"}],[5,{icon:"field",label:"Field"}],[6,{icon:"variable",label:"Variable"}],[7,{icon:"class",label:"Class"}],[8,{icon:"interface",label:"Interface"}],[9,{icon:"namespace",label:"Module"}],[10,{icon:"property",label:"Property"}],[11,{icon:"ruler",label:"Unit"}],[12,{icon:"enumerator",label:"Value"}],[13,{icon:"enumerator",label:"Enum"}],[14,{icon:"keyword",label:"Keyword"}],[15,{icon:"snippet",label:"Snippet"}],[16,{icon:"colorPalette",label:"Color"}],[17,{icon:"document",label:"File"}],[18,{icon:"importFile",label:"Reference"}],[19,{icon:"folder",label:"Folder"}],[20,{icon:"enumItem",label:"Enum Member"}],[21,{icon:"constant",label:"Constant"}],[22,{icon:"structure",label:"Structure"}],[23,{icon:"event",label:"Event"}],[24,{icon:"operator",label:"Operator"}],[25,{icon:"template",label:"Type Parameter"}]]),R={directives:{Tooltip:I.a},components:{Popup:D.a,Icon:P.a,SearchHighlight:A.a},mixins:[T.a],props:{targetLeft:{type:Number,default:0},targetTop:{type:Number,default:0},targetWidth:{type:Number,default:0},targetHeight:{type:Number,default:0},items:{type:Array,required:!0,default:function(){return[]}},selectedIndex:{type:Number,default:0},prefix:{type:String,default:""}},computed:{computedItems:function(){var e=this;return this.items.map((function(t,n){return{text:t.menuText,type:N.get(t.type),selected:e.selectedIndex===n}}))},selectedItem:function(){return this.items[this.selectedIndex]},typeColumnVisible:function(){return this.computedItems.some((function(e){return e.type}))},background:function(){return"dark"===this.computedTheme?"#222":"#fff"},borderColor:function(){return"dark"===this.computedTheme?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},insetLeft:function(){return 5+(this.typeColumnVisible?24:0)}},watch:{selectedIndex:function(){var e=this;this.$nextTick((function(){var t=e.$refs.items[e.selectedIndex];t&&h.D(e.$refs.scroller,t)}))}},methods:{itemIcon:function(e){return"suggest-".concat(e).concat("dark"===this.computedTheme?"-inverse":"")},onItemMouseDown:function(e){this.$emit("update:selectedIndex",e)},onItemClick:function(e){this.$emit("itemClick",this.items[e])}}},M=(n("OCSe"),n("KHd+")),L=Object(M.a)(R,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Popup",{attrs:{"target-left":e.targetLeft,"target-top":e.targetTop,"target-width":e.targetWidth,"target-height":e.targetHeight,"target-anchor-x":0,"target-anchor-y":1,"anchor-x":0,"anchor-y":0,"inset-top":-2,"inset-bottom":-2,"inset-left":e.insetLeft,"border-radius":4,background:e.background,"border-color":e.borderColor,arrowless:"","clip-mode":"flipY"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.flipState;return[n("div",{staticClass:"autocomplete-menu-popup",class:"acmp-"+e.computedTheme,on:{mousedown:function(e){e.preventDefault()}}},[n("div",{ref:"scroller",staticClass:"acmp-scroller",style:{order:s.y?1:0}},[n("table",{staticClass:"acmp-table"},[n("tbody",e._l(e.computedItems,(function(t,s){return n("tr",{key:s,ref:"items",refInFor:!0,staticClass:"acmp-item",class:{selected:t.selected},on:{mousedown:function(t){return e.onItemMouseDown(s)},click:function(t){return e.onItemClick(s)}}},[e.typeColumnVisible?n("td",{staticClass:"acmp-type"},[t.type?n("Icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.type.label,expression:"item.type.label"}],staticClass:"acmp-type-icon",attrs:{icon:e.itemIcon(t.type.icon)}}):e._e()],1):e._e(),e._v(" "),n("td",{staticClass:"acmp-text"},[n("SearchHighlight",{attrs:{text:t.text,search:e.prefix,"ignore-case":""}})],1)])})),0)])]),e._v(" "),e.selectedItem&&e.selectedItem.description?n("footer",{staticClass:"acmp-description"},[n("div",{staticClass:"acmp-description-text"},[e._v(e._s(e.selectedItem.description.trim()))])]):e._e()])]}}])})}),[],!1,null,null,null).exports,F={components:{Popup:D.a},mixins:[T.a],props:{targetLeft:{type:Number,default:0},targetTop:{type:Number,default:0},targetWidth:{type:Number,default:0},targetHeight:{type:Number,default:0},text:{type:String,default:""},docs:{type:String,default:""},highlightStart:{type:Number,default:0},highlightLength:{type:Number,default:0}},computed:{background:function(){return"dark"===this.computedTheme?"#222":"#fff"},borderColor:function(){return"dark"===this.computedTheme?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"}}},B=(n("73nH"),Object(M.a)(F,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Popup",{attrs:{"target-left":e.targetLeft,"target-top":e.targetTop,"target-width":e.targetWidth,"target-height":e.targetHeight,"target-anchor-x":0,"target-anchor-y":0,"anchor-x":0,"anchor-y":1,"inset-top":-10,"inset-bottom":-10,"border-radius":4,background:e.background,"border-color":e.borderColor,elevation:1,arrowless:"","clip-mode":"flipY"}},[n("div",{staticClass:"autocomplete-tooltip-popup",class:"actp-"+e.computedTheme},[n("div",{staticClass:"actp-section actp-sig"},[n("span",[e._v(e._s(e.text.substr(0,e.highlightStart))),n("strong",[e._v(e._s(e.text.substr(e.highlightStart,e.highlightLength)))]),e._v(e._s(e.text.substr(e.highlightStart+e.highlightLength)))])]),e._v(" "),e.docs?n("div",{staticClass:"actp-section actp-docs"},[e._v(e._s(e.docs))]):e._e()])])}),[],!1,null,null,null).exports),q=[],$=/\w*$/,U=/[\w\\.]*$/;function z(e){for(var t=0;t<q.length;t++)if(q[t].name===e.name){q.splice(t,1);break}q.push(e)}function V(e,t){return t=t.toLowerCase(),e.filter((function(e){return e.insertionText.toLowerCase().includes(t)})).map((function(e,n){return[e,n,e.insertionText.toLowerCase()===t?0:1]})).sort((function(e,t){var n=Object(x.a)(e,3),s=n[1],i=n[2],r=Object(x.a)(t,3),a=r[1],o=i-r[2];return 0!==o?o:s-a})).slice(0,100).map((function(e){return Object(x.a)(e,1)[0]}))}function H(e,t,n){var s=O()(e,t,{leading:!0,trailing:!0}),i=l()(s,n,{leading:!1,trailing:!0}),r=i.cancel;return i.cancel=function(){r.call(i),s.cancel()},i}g.a.defineExtension("activateAutocomplete",(function(e){this.state.autocomplete||(this.state.autocomplete=new W(this,e))})),g.a.defineExtension("deactivateAutocomplete",(function(){this.state.autocomplete&&(this.state.autocomplete.dispose(),delete this.state.autocomplete)})),g.a.defineExtension("setAutocompleteTheme",(function(e){this.state.autocomplete&&this.state.autocomplete.setTheme(e)})),g.a.defineExtension("autocomplete",(function(e){this.state.autocomplete&&this.state.autocomplete.trigger(e)})),g.a.commands.autocomplete=function(e){var t=e.state.autocomplete;t&&t.trigger(!0)};var W=function(){function e(t,n){var s=this;Object(k.a)(this,e),this.triggerMenuContinueDebounced=H(this.triggerMenuContinueDebounced,20,20),this.triggerTooltipDebounced=H(this.triggerTooltipDebounced,180,20),this.cm=t,this.session=n,this.disposed=!1,this.prefix=null,this.prevCursor=t.getCursor(),this.menuStartCursor=null,this.inputKeyPressed=!1,this.backspaceKeyPressed=!1,this.menuReplaceStart=null,this.tooltipStart=null,this.suggestionsCTS=null,this.pendingTooltip=null,this.menuData={theme:"light",visible:!1,left:0,top:0,lineHeight:0,allItems:[],items:[],selectedIndex:0,prefix:""},this.tooltipData={theme:"light",visible:!1,left:0,top:0,lineHeight:0,text:"",docs:"",highlightStart:0,highlightLength:0},this.createMenuWidget(),this.createTooltipWidget();var i=function(e){return function(){return s.menuData.visible?e():g.a.Pass}};this.keyMap={Down:i((function(){return s.selectRelative(1)})),Up:i((function(){return s.selectRelative(-1)})),Tab:i((function(){return s.pick()})),Esc:i((function(){s.hideMenu(),s.hideTooltip()}))},this.cm.addKeyMap(this.keyMap),this.onBlur=this.onBlur.bind(this),this.onChanges=this.onChanges.bind(this),this.onCursorActivity=this.onCursorActivity.bind(this),this.onKeyPress=this.onKeyPress.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onScroll=this.onScroll.bind(this),this.cm.on("blur",this.onBlur),this.cm.on("changes",this.onChanges),this.cm.on("cursorActivity",this.onCursorActivity),this.cm.on("keypress",this.onKeyPress),this.cm.on("keydown",this.onKeyDown),this.cm.on("scroll",this.onScroll)}var t,n,s,i,o;return Object(C.a)(e,[{key:"dispose",value:function(){this.disposed||(this.disposed=!0,this.menu.$destroy(),this.tooltip.$destroy(),this.cm.removeKeyMap(this.keyMap),this.cm.off("blur",this.onBlur),this.cm.off("changes",this.onChanges),this.cm.off("cursorActivity",this.onCursorActivity),this.cm.off("keypress",this.onKeyPress),this.cm.off("keydown",this.onKeyDown),this.cm.off("scroll",this.onScroll),this.cancelPendingSuggestions(),this.pendingTooltip=null,this.triggerMenuContinueDebounced.cancel(),this.triggerTooltipDebounced.cancel())}},{key:"setTheme",value:function(e){this.menuData.theme=e,this.tooltipData.theme=e}},{key:"createMenuWidget",value:function(){this.$createElement;var e=this;this.menu=new S.default({data:this.menuData,render:function(){var t=this,n=arguments[0],s={on:{"update:selectedIndex":function(e){return t.selectedIndex=e}}};return this.visible&&n(L,_()([{attrs:{theme:this.theme,targetLeft:this.left,targetTop:this.top,targetHeight:this.lineHeight,items:this.items,selectedIndex:this.selectedIndex,prefix:this.prefix},on:{itemClick:function(t){return e.pick(t)}}},s]))}}),this.menu.$mount()}},{key:"createTooltipWidget",value:function(){this.$createElement;this.tooltip=new S.default({data:this.tooltipData,render:function(){var e=arguments[0];return this.visible&&!!this.text&&e(B,{attrs:{theme:this.theme,targetLeft:this.left,targetTop:this.top,targetHeight:this.lineHeight,text:this.text,docs:this.docs,highlightStart:this.highlightStart,highlightLength:this.highlightLength}})}}),this.tooltip.$mount()}},{key:"onBlur",value:function(){this.hideMenu(),this.hideTooltip()}},{key:"onChanges",value:function(e,t){if(this.backspaceKeyPressed||this.inputKeyPressed){if(this.backspaceKeyPressed||this.inputKeyPressed&&t.some((function(e){return e.text.some(Boolean)}))){var n=this.cm.getCursor(),s=this.cm.getDoc().getLine(n.line).length===n.ch,i=t.some((function(e){return e.removed.some((function(e){return e.length>0}))}));!i||i&&s?this.triggerMenu():this.hideMenu()}else this.hideMenu();this.backspaceKeyPressed=!1,this.inputKeyPressed=!1}}},{key:"onCursorActivity",value:function(){var e=this.cm.getCursor(),t=!1;(t|=e.line!==this.prevCursor.line)||null===this.menuStartCursor||(e.ch<this.menuStartCursor.ch||e.ch<this.prevCursor.ch)&&(t|=this.cm.getDoc().getLine(e.line).length!==e.ch),t?(this.hideTooltip(),this.hideMenu()):this.triggerTooltipDebounced(),this.prevCursor=e}},{key:"onKeyPress",value:function(){this.inputKeyPressed=!0}},{key:"onKeyDown",value:function(e,t){this.backspaceKeyPressed=8===t.keyCode}},{key:"onScroll",value:function(){this.menuData.visible&&this.updateMenuPosition(),this.tooltipData.visible&&this.updateTooltipPosition()}},{key:"showMenu",value:function(){this.cm.hasFocus()&&this.menuData.items.length&&(this.menuData.visible||(this.menuStartCursor=this.cm.getCursor()),this.menuData.visible=!0,this.updateMenuPosition())}},{key:"hideMenu",value:function(){this.menuData.visible&&(this.menuData.visible=!1,this.menuStartCursor=null,this.triggerMenuContinueDebounced.cancel(),this.triggerTooltipDebounced.cancel(),this.cancelPendingSuggestions(),this.menuData.items=[],this.menuData.selectedIndex=0)}},{key:"showTooltip",value:function(){this.cm.hasFocus()&&this.tooltipData.text&&(this.tooltipData.visible=!0,this.updateTooltipPosition())}},{key:"hideTooltip",value:function(){this.tooltipData.visible&&(this.tooltipData.visible=!1,this.pendingTooltip=null)}},{key:"trigger",value:function(){return Promise.all([this.triggerMenu(),this.triggerTooltipDebounced()])}},{key:"updateMenuData",value:function(){var e=this.cm.getCursor(),t=this.cm.getRange({line:e.line,ch:0},e),n=t.match(U)[0];this.menuData.items=V(this.menuData.allItems,n),0===this.menuData.items.length&&(n=t.match($)[0],this.menuData.items=V(this.menuData.allItems,n)),this.menuData.prefix=n,this.menuReplaceStart={line:e.line,ch:e.ch-n.length},this.menuData.items.length?this.showMenu():this.hideMenu()}},{key:"triggerMenu",value:(o=Object(a.a)(r.a.mark((function e(t){var n,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.cm.getCursor(),s=this.cm.getModeAt(n),e.next=4,this.triggerMenuContinueDebounced(n,this.menuData.prefix,s,t);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"triggerMenuContinueDebounced",value:(i=Object(a.a)(r.a.mark((function e(t,n,s,i){var a,o,l,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={session:this.session,mode:s},(o=q.filter((function(e){return e.accept(a)}))).length){e.next=4;break}return e.abrupt("return");case 4:if(o.sort((function(e,t){return t.priority-e.priority})),-1!==(l=o.findIndex((function(e){return e.overridesLowerPriority})))){for(c=o[l].priority;l<o.length&&o[l].priority===c;)l++;o.splice(l)}return e.next=9,this.getSuggestions(o,t,n,i);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t,n,s){return i.apply(this,arguments)})},{key:"triggerTooltipDebounced",value:(s=Object(a.a)(r.a.mark((function e(t){var n,s,i,a,o,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.cm.getCursor(),s=this.cm.getRange({line:n.line,ch:0},n),i=s.match($)[0],a=this.cm.getModeAt(n),o={session:this.session,mode:a},(l=q.filter((function(e){return e.accept(o)}))).length){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,this.getTooltip(l,n,i,t);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"getSuggestions",value:(n=Object(a.a)(r.a.mark((function e(t,n,s,i){var a,o,l,c,u,d,h,p,f,m,v,b=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={cm:this.cm,session:this.session,manualTrigger:i,cursor:n,prefix:s},this.cancelPendingSuggestions(),o=new E.b,this.suggestionsCTS=o,l=Promise.all(t.map((function(e){return e.getSuggestions(a,b.suggestionsCTS.token)}))),c=[],e.prev=7,e.next=10,l;case 10:if(c=e.sent,this.suggestionsCTS===o){e.next=14;break}return e.abrupt("return");case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(7),e.abrupt("return");case 20:return e.prev=20,this.suggestionsCTS===o&&this.cancelPendingSuggestions(),e.finish(20);case 23:for(u=[],d=!0,h=!1,p=void 0,e.prev=27,f=c[Symbol.iterator]();!(d=(m=f.next()).done);d=!0)(v=m.value)&&u.push.apply(u,Object(y.a)(v));e.next=35;break;case 31:e.prev=31,e.t1=e.catch(27),h=!0,p=e.t1;case 35:e.prev=35,e.prev=36,d||null==f.return||f.return();case 38:if(e.prev=38,!h){e.next=41;break}throw p;case 41:return e.finish(38);case 42:return e.finish(35);case 43:this.menuData.allItems=u,this.menuData.selectedIndex=0,this.updateMenuData();case 47:case"end":return e.stop()}}),e,this,[[7,16,20,23],[27,31,35,43],[36,,38,42]])}))),function(e,t,s,i){return n.apply(this,arguments)})},{key:"cancelPendingSuggestions",value:function(){this.suggestionsCTS&&(this.suggestionsCTS.cancel(),this.suggestionsCTS.dispose(),this.suggestionsCTS=null)}},{key:"getTooltip",value:(t=Object(a.a)(r.a.mark((function e(t,n,s,i){var a,o,l,c,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={cm:this.cm,session:this.session,manualTrigger:i,cursor:n,prefix:s},o=Promise.all(t.filter((function(e){return e.getTooltip})).map((function(e){return e.getTooltip(a)}))),this.pendingTooltip=o,e.prev=4,e.next=7,o;case 7:if(l=e.sent,this.pendingTooltip===o){e.next=11;break}return e.abrupt("return");case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4);case 16:return e.prev=16,this.pendingTooltip===o&&(this.pendingTooltip=null),e.finish(16);case 19:c=l.filter(Boolean),(u=c[0])?(this.tooltipStart=u.pos,this.tooltipData.text=u.text,this.tooltipData.docs=u.docs,this.tooltipData.highlightStart=u.highlightStart||0,this.tooltipData.highlightLength=u.highlightLength||0):(this.tooltipStart=null,this.tooltipData.text="",this.tooltipData.docs="",this.tooltipData.highlightStart=0,this.tooltipData.highlightLength=0),this.tooltipData.text?this.showTooltip():this.hideTooltip();case 24:case"end":return e.stop()}}),e,this,[[4,13,16,19]])}))),function(e,n,s,i){return t.apply(this,arguments)})},{key:"pick",value:function(e){if(e=e||this.menuData.items[this.menuData.selectedIndex]){var t=this.cm.getCursor();this.cm.replaceRange(e.insertionText,this.menuReplaceStart,t),this.hideMenu()}}},{key:"updateMenuPosition",value:function(){var e=this.cm.cursorCoords(this.menuReplaceStart,"page");this.menuData.left=e.left,this.menuData.top=e.top,this.menuData.lineHeight=e.bottom-e.top}},{key:"updateTooltipPosition",value:function(){var e=this.cm.cursorCoords(this.tooltipStart,"page");this.tooltipData.left=e.left,this.tooltipData.top=e.top,this.tooltipData.lineHeight=e.bottom-e.top}},{key:"selectRelative",value:function(e){return 1===this.menuData.items.length?g.a.Pass:(this.menuData.selectedIndex=(this.menuData.selectedIndex+e+this.menuData.items.length)%this.menuData.items.length,null)}}]),e}();function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}g.a.defineExtension("activateLinter",(function(){this.state.linter||(this.state.linter=new Y(this))})),g.a.defineExtension("deactivateLinter",(function(){this.state.linter&&(this.state.linter.dispose(),delete this.state.linter)})),g.a.defineExtension("setLinterMessages",(function(e){this.state.linter&&this.state.linter.setMessages(e)}));var Y=function(){function e(t){Object(k.a)(this,e),this.cm=t,this.disposed=!1,this.messages=[]}return Object(C.a)(e,[{key:"dispose",value:function(){this.disposed||(this.disposed=!0,this.clearMessages())}},{key:"clearMessages",value:function(){var e=!0,t=!1,n=void 0;try{for(var s,i=this.messages[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){s.value.marker.clear()}}catch(r){t=!0,n=r}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.messages=[]}},{key:"setMessages",value:function(e){this.clearMessages();var t=!0,n=!1,s=void 0;try{for(var i,r=e[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;if(1===a.severity){var o=this.cm.markText(a.positionStart,a.positionEnd,{className:"cm-linter-marker",title:a.excerpt});this.messages.push(K({},a,{marker:o}))}}}catch(l){n=!0,s=l}finally{try{t||null==r.return||r.return()}finally{if(n)throw s}}}}]),e}(),G=(n("JfAA"),n("YGK4"),n("inlA"),n("UxlC"),n("EnZy"),n("LKBx"),n("SYor"),n("ENF9"),function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(k.a)(this,e),this.cm=t,this.isMethodToken=n.isMethodToken||function(){return!1},this.line=null,this.mappings=null}return Object(C.a)(e,[{key:"update",value:function(e){var t=this.cm.getCursor();t.line!==this.line&&(this.line=t.line,this.mappings=new Map);var n=this.cm.getTokenAt(t);this.mappings.set(n.start,{string:n.string,start:n.start,suggestions:e})}},{key:"getSymbol",value:function(){var e=this.cm.getCursor();if(e.line!==this.line)return null;var t=this.cm.getLineTokens(e.line),n=this.cm.getTokenAt(e),s=t.findIndex((function(e){return e.start===n.start})),i=0,r=0;e:for(;s>=0;s--)switch(t[s].string){case",":0===i&&r++;break;case")":i++;break;case"(":if(0===i)break e;i--}var a=t[s-1];if(a&&(["variable","property"].includes(a.type)||this.isMethodToken(a))){var o=this.mappings.get(a.start);if(o&&a.string.startsWith(o.string)){var l=o.suggestions.find((function(e){return e.insertionText===a.string}));if(l)return{suggestion:l,pos:{line:e.line,ch:a.start},parameterIndex:r}}}return null}}]),e}());function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var J=/^[^( ]+\(([^)]*)\)/;function Z(e,t){var n=e.match(J);if(!n)return null;var s={start:0,length:0};if(t<(n?n[1].split(",").length:0)){for(var i=e.split(/[(),]/),r=0,a=0;a<=t;a++)r+=i[a].length+1;s.start=r,s.length=i[t+1].length}return s}function ee(e){e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({autoTriggerFilter:[],nocompl:[],tooltipOptions:{}},e);var t,n,i=new WeakMap,o=new WeakMap,l=new WeakMap,c=["{","}",";","(",")","'",'"']+e.nocompl;function u(e){var t=i.get(e);return t||(t=new ne,i.set(e,t)),i.get(e)}function d(t){var n=o.get(t);return n||(n=new te(e.tooltipOptions),o.set(t,n)),o.get(t)}return{name:e.name,priority:e.priority,overridesLowerPriority:e.overridesLowerPriority,accept:e.accept,getSuggestions:(n=Object(a.a)(r.a.mark((function t(n,s){var i,a,o,d,h,p,f,m,v,b,g,y,w,_,k,C,x,j,O,S,E,T,I,D,P,A,N;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=n.cm,a=n.session,o=n.cursor,d=n.manualTrigger,h=i.getRange({line:o.line,ch:0},o),p=u(a),f=null,h.endsWith(".")?f=".":h.endsWith("(")?f="(":h.endsWith(")")?f=")":h.endsWith("    ")?f="    ":h.endsWith(" ")?f=" ":h.endsWith(";")?f=";":h.endsWith("::")?f="::":h.endsWith("->")?f="->":/[a-zA-Z0-9_]$/.test(h)?f="a":/[=!@$^&*\-+|]$/.test(h)&&(f="*"),d){t.next=75;break}if(!se(h)){t.next=9;break}return p.updateEnding(f),t.abrupt("return",[]);case 9:if("*"!==f){t.next=12;break}return p.updateEnding(f),t.abrupt("return",[]);case 12:m=h.trim(),v=!0,b=!1,g=void 0,t.prev=16,y=c[Symbol.iterator]();case 18:if(v=(w=y.next()).done){t.next=26;break}if(_=w.value,!h.endsWith(_)&&!m.endsWith(_)){t.next=23;break}return p.updateEnding(f),t.abrupt("return",[]);case 23:v=!0,t.next=18;break;case 26:t.next=32;break;case 28:t.prev=28,t.t0=t.catch(16),b=!0,g=t.t0;case 32:t.prev=32,t.prev=33,v||null==y.return||y.return();case 35:if(t.prev=35,!b){t.next=38;break}throw g;case 38:return t.finish(35);case 39:return t.finish(32);case 40:if(""!==h&&!/^\s+$/.test(h)){t.next=43;break}return p.updateEnding(f),t.abrupt("return",[]);case 43:if(0===e.autoTriggerFilter.length){t.next=75;break}k=!1,C=!0,x=!1,j=void 0,t.prev=48,O=e.autoTriggerFilter[Symbol.iterator]();case 50:if(C=(S=O.next()).done){t.next=58;break}if(E=S.value,f!==E){t.next=55;break}return k=!0,t.abrupt("break",58);case 55:C=!0,t.next=50;break;case 58:t.next=64;break;case 60:t.prev=60,t.t1=t.catch(48),x=!0,j=t.t1;case 64:t.prev=64,t.prev=65,C||null==O.return||O.return();case 67:if(t.prev=67,!x){t.next=70;break}throw j;case 70:return t.finish(67);case 71:return t.finish(64);case 72:if(k){t.next=75;break}return p.updateEnding(f),t.abrupt("return",[]);case 75:if(T=p.needReload(h,f),I=T.reload,D=T.add,!I){t.next=83;break}return t.next=79,a.getSuggestions(o,d,s);case 79:P=t.sent,A=P.items.map((function(e){return{insertionText:e.insertText||e.label,menuText:e.label,type:e.kind,description:e.detail}})),p.save(A,f,P.truncated,D),e.tooltipOptions.symbolTracker&&((N=l.get(a))||(N=new G(i,{isMethodToken:e.isMethodToken}),l.set(a,N)),N.update(p.list));case 83:return t.abrupt("return",p.list);case 84:case"end":return t.stop()}}),t,null,[[16,28,32,40],[33,,35,39],[48,60,64,72],[65,,67,71]])}))),function(e,t){return n.apply(this,arguments)}),getTooltip:(t=Object(a.a)(r.a.mark((function t(n){var s,i,a,o,c,u,h,p,f,m,v,b,g,y,w,_,k,C,x,j,O,S;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=n.session,i=n.cm,a=n.cursor,!e.tooltipOptions.symbolTracker){t.next=15;break}if(o=l.get(s)){t.next=5;break}return t.abrupt("return",null);case 5:if(c=o.getSymbol()){t.next=8;break}return t.abrupt("return",null);case 8:if(u=c.suggestion.menuText){t.next=11;break}return t.abrupt("return",null);case 11:return h={text:u,pos:c.pos},(p=Z(u,c.parameterIndex))&&(h.highlightStart=p.start,h.highlightLength=p.length),t.abrupt("return",h);case 15:if(f=d(s),m=a.line,v=i.getDoc().getRange({line:a.line,ch:0},a),b=ie(v),g=b.bracketIndex,y=b.commaIndex,w=f.tooltip,0!==g){t.next=24;break}f.save(m,g,null),t.next=57;break;case 24:if(!f.needReload(m,g)){t.next=57;break}return w=null,t.next=28,s.getSignatureHelp(a);case 28:if(!(_=t.sent)||!_.signatures){t.next=56;break}k=!0,C=!1,x=void 0,t.prev=33,j=_.signatures[Symbol.iterator]();case 35:if(k=(O=j.next()).done){t.next=42;break}return S=O.value,w={text:S.label,docs:S.documentation},t.abrupt("break",42);case 39:k=!0,t.next=35;break;case 42:t.next=48;break;case 44:t.prev=44,t.t0=t.catch(33),C=!0,x=t.t0;case 48:t.prev=48,t.prev=49,k||null==j.return||j.return();case 51:if(t.prev=51,!C){t.next=54;break}throw x;case 54:return t.finish(51);case 55:return t.finish(48);case 56:f.save(m,g,w);case 57:return t.abrupt("return",f.applyComma(v,y));case 58:case"end":return t.stop()}}),t,null,[[33,44,48,56],[49,,51,55]])}))),function(e){return t.apply(this,arguments)})}}var te=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(k.a)(this,e),this.lineNumber=0,this.bracketIndex=0,this.tooltip=null,this.kwargs=!0,this.argSplitter=": ",this.isVararg=function(e){return e.startsWith("*")},t.disableKwargs&&(this.kwargs=!1),t.isVararg&&(this.isVararg=t.isVararg),t.argSplitter&&(this.argSplitter=t.argSplitter)}return Object(C.a)(e,[{key:"save",value:function(e,t,n){this.lineNumber=e,this.bracketIndex=t,this.tooltip=n}},{key:"needReload",value:function(e,t){return this.lineNumber!==e||this.bracketIndex!==t||0===this.bracketIndex}},{key:"applyComma",value:function(e,t){if(!this.tooltip)return this.tooltip;for(var n=null,s=null,i=[],r=[],a=0;a<this.tooltip.text.length;a++){var o=this.tooltip.text[a];if(null!==n){switch(o){case"[":case"<":case"(":i.push(o);break;case"]":case")":case">":")"===o&&0===i.length&&null===s&&(s=a,r.push(a)),i.pop()}","===o&&0===i.length&&r.push(a)}else"("===o&&(n=a,r.push(a))}for(var l=[],c=0;c<r.length;c++){var u=r[c]+1,d=r[c+1]-r[c]-1,h=this.tooltip.text.substring(u,u+d).trim();l.push({vararg:this.isVararg(h),value:h,parts:h.split(this.argSplitter),start:u,len:d})}if(t<l.length){this.tooltip.highlightStart=l[t].start,this.tooltip.highlightLength=l[t].len;for(var p=0;p<t;p++)l[p].vararg&&(this.tooltip.highlightStart=l[p].start,this.tooltip.highlightLength=l[p].len)}if(this.kwargs){for(var f=[],m=null,v=e.length-1;v>=0;v--){var b=e[v];switch(b){case"[":case"<":case"(":case"{":f.pop(b);break;case"]":case")":case">":case"}":f.push(b)}if((","===b||v===n)&&0===f.length){m=e.substring(v+1);break}}if(m){m=m.replace(/\s/g,"");var g=!0,y=!1,w=void 0;try{for(var _,k=l[Symbol.iterator]();!(g=(_=k.next()).done);g=!0){var C=_.value;C.parts.length>=0&&m.startsWith(C.parts[0]+"=")&&(this.tooltip.highlightStart=C.start,this.tooltip.highlightLength=C.len)}}catch(x){y=!0,w=x}finally{try{g||null==k.return||k.return()}finally{if(y)throw w}}}}return this.tooltip}}]),e}(),ne=function(){function e(){Object(k.a)(this,e),this.endingType="",this.truncated=!1,this.count=0,this.list=[],this.listHash=new Set}return Object(C.a)(e,[{key:"needReload",value:function(e,t){return this.truncated||t!==this.endingType?(this.count=0,{reload:!0,add:this.truncated&&"a"===this.endingType&&"a"===t}):("a"===t&&t===this.endingType&&this.count++,this.count>3?(this.endingType="",{reload:!0,add:!0}):{reload:this.endingType!==t,add:!1})}},{key:"hashCode",value:function(e){return Object(d.hash)(e.insertionText||"")^Object(d.hash)(e.menuText||"")^Object(d.hash)((e.type||"").toString())^Object(d.hash)(e.description||"")}},{key:"save",value:function(e,t,n,s){if(s){var i=!0,r=!1,a=void 0;try{for(var o,l=this.list[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value,u=this.hashCode(c);this.listHash.has(u)||(this.list.push(c),this.listHash.add(u))}}catch(b){r=!0,a=b}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}}else{this.list=e,this.listHash=new Set;var d=!0,h=!1,p=void 0;try{for(var f,m=this.list[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){var v=f.value;this.listHash.add(this.hashCode(v))}}catch(b){h=!0,p=b}finally{try{d||null==m.return||m.return()}finally{if(h)throw p}}}this.truncated=n,this.endingType=t,this.count=0}},{key:"updateEnding",value:function(e){this.endingType=e,this.list=[],this.listHash=new Set,this.count=0}}]),e}();function se(e){for(var t=!1,n=null,s=0;s<e.length;s++){var i=e[s];if(n&&"\\"===i&&(t=!0),"'"!==i&&'"'!==i);else{if(t){t=!1;continue}n=n===i?null:i}}if(n)return[]}function ie(e){var t=0,n=0,s=null,i=!0,r=!1,a=void 0;try{for(var o,l=e[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value;"("===c&&"("!==s&&t++,")"===c&&t--,","===c&&n++,s=c}}catch(u){r=!0,a=u}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}return t<0&&(t=0),{bracketIndex:t,commaIndex:n}}z(ee({name:"Java",priority:1,overridesLowerPriority:!0,accept:function(e){var t=e.session,n=e.mode;return t&&"text/x-java"===n.helperType},autoTriggerFilter:["a","."],tooltipOptions:{symbolTracker:!0}})),z(ee({name:"Python",priority:1,overridesLowerPriority:!0,accept:function(e){var t=e.session,n=e.mode;return t&&"python"===n.name},nocompl:[":"],autoTriggerFilter:["a","."],tooltipOptions:{disableKwargs:!1,isVararg:function(e){return e.startsWith("*")}}})),z(ee({name:"Ruby",priority:1,overridesLowerPriority:!0,accept:function(e){var t=e.session,n=e.mode;return t&&"ruby"===n.name},autoTriggerFilter:[" ","a",".","::"],tooltip:{}})),z(ee({name:"C/C++",priority:1,overridesLowerPriority:!0,accept:function(e){var t=e.session,n=e.mode;return t&&("text/x-csrc"===n.helperType||"text/x-c++src"===n.helperType)},autoTriggerFilter:["a",".","::","->"],tooltipOptions:{disableKwargs:!0,isVararg:function(e){return e.startsWith("...")||e.endsWith("...")}}})),z(ee({name:"R",priority:1,overridesLowerPriority:!0,accept:function(e){var t=e.session,n=e.mode;return t&&"r"===n.name},autoTriggerFilter:["a","."],tooltipOptions:{disableKwargs:!1,isVararg:function(e){return e.startsWith("...")},argSplitter:" = "}}));var re,ae=n("zpA9");z({name:"HTML",priority:1,overridesLowerPriority:!0,accept:function(e){var t=e.mode;return"xml"===t.name&&"html"===t.helperType},getSuggestions:(re=Object(a.a)(r.a.mark((function e(t){var n,s,i,a,o,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.cm,s=t.cursor,!(i=n.getRange({line:s.line,ch:0},s)).match(/<[-_a-z0-9]*$/i)){e.next=4;break}return e.abrupt("return",ae.map((function(e){return{insertionText:e.tag,menuText:e.tag,type:10}})));case 4:if(" "!==i[i.length-1]){e.next=13;break}if("string"!==(a=n.getTokenAt(s)).type||/['"]/.test(a.string[a.string.length-1])&&1!==a.string.length){e.next=8;break}return e.abrupt("return");case 8:if(!(o=g.a.innerMode(n.getMode(),a.state).state)||!o.tagName){e.next=13;break}if(!(l=ae.find((function(e){return e.tag===o.tagName})))){e.next=13;break}return e.abrupt("return",l.attrs.map((function(e){return{insertionText:"".concat(e,'="'),menuText:e,type:13}})));case 13:case"end":return e.stop()}}),e)}))),function(e){return re.apply(this,arguments)})});n("p77/"),n("1y8p");var oe,le=n("db+F"),ce=n("VlpE"),ue=n("Kaxq"),de=n("Yswc"),he=[{test:/\.txt$/i,mode:"",load:(oe=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return oe.apply(this,arguments)})},{test:/\.c$/i,mode:"text/x-csrc",load:function(){return n.e(2).then(n.t.bind(null,"S6bl",7))}},{test:/\.(cc|cpp|cxx|h|hpp|hxx)$/i,mode:"text/x-c++src",load:function(){return n.e(2).then(n.t.bind(null,"S6bl",7))}},{test:/\.cs$/i,mode:"text/x-csharp",load:function(){return n.e(2).then(n.t.bind(null,"S6bl",7))}},{test:/\.hs$/i,mode:"text/x-haskell",load:function(){return n.e(40).then(n.t.bind(null,"0+DK",7))}},{test:/\.py$/i,mode:"text/x-python",load:function(){return n.e(10).then(n.t.bind(null,"25Eh",7))}},{test:/\.py3$/i,mode:"text/x-python",load:function(){return n.e(10).then(n.t.bind(null,"25Eh",7))}},{test:/\.sage$/i,mode:"text/x-python",load:function(){return n.e(10).then(n.t.bind(null,"25Eh",7))}},{test:/\.rb$/i,mode:"text/x-ruby",load:function(){return n.e(15).then(n.t.bind(null,"hTYL",7))}},{test:/\.java$/i,mode:"text/x-java",load:function(){return n.e(2).then(n.t.bind(null,"S6bl",7))}},{test:/\.js$/i,mode:"text/javascript",load:function(){return n.e(0).then(n.t.bind(null,"+dQi",7))}},{test:/\.json$/i,mode:"application/json",load:function(){return n.e(0).then(n.t.bind(null,"+dQi",7))}},{test:/\.coffee$/i,mode:"text/x-coffeescript",load:function(){return n.e(36).then(n.t.bind(null,"oL3q",7))}},{test:/^LANGUAGE$|\.[sS][hH]$/,mode:"text/x-sh",load:function(){return n.e(44).then(n.t.bind(null,"AvDn",7))}},{test:/\.swift$/i,mode:"text/x-swift",load:function(){return n.e(46).then(n.t.bind(null,"wOIU",7))}},{test:/\.css$/i,mode:"text/css",load:function(){return n.e(1).then(n.t.bind(null,"ewDg",7))}},{test:/\.xml$/i,mode:"text/xml",load:function(){return n.e(3).then(n.t.bind(null,"1eCo",7))}},{test:/\.html?$/i,mode:"text/html",load:function(){return Promise.all([n.e(3).then(n.t.bind(null,"1eCo",7)),n.e(0).then(n.t.bind(null,"+dQi",7)),n.e(1).then(n.t.bind(null,"ewDg",7)),Promise.all([n.e(1),n.e(0),n.e(5)]).then(n.t.bind(null,"1p+/",7))])}},{test:/\.md$/i,mode:"text/markdown",load:function(){return n.e(34).then(n.t.bind(null,"lZu9",7))}},{test:/\.erb$/i,mode:"application/x-erb",load:function(){return Promise.all([n.e(3).then(n.t.bind(null,"1eCo",7)),n.e(0).then(n.t.bind(null,"+dQi",7)),n.e(1).then(n.t.bind(null,"ewDg",7)),n.e(15).then(n.t.bind(null,"hTYL",7)),Promise.all([n.e(1),n.e(0),n.e(5)]).then(n.t.bind(null,"1p+/",7)),Promise.all([n.e(1),n.e(0),n.e(9)]).then(n.t.bind(null,"dLt8",7))])}},{test:/\.ejs$/i,mode:"application/x-ejs",load:function(){return Promise.all([n.e(3).then(n.t.bind(null,"1eCo",7)),n.e(0).then(n.t.bind(null,"+dQi",7)),n.e(1).then(n.t.bind(null,"ewDg",7)),Promise.all([n.e(1),n.e(0),n.e(5)]).then(n.t.bind(null,"1p+/",7)),Promise.all([n.e(1),n.e(0),n.e(9)]).then(n.t.bind(null,"dLt8",7))])}},{test:/\.aspx$/i,mode:"application/x-aspx",load:function(){return Promise.all([n.e(3).then(n.t.bind(null,"1eCo",7)),n.e(0).then(n.t.bind(null,"+dQi",7)),n.e(1).then(n.t.bind(null,"ewDg",7)),n.e(2).then(n.t.bind(null,"S6bl",7)),Promise.all([n.e(1),n.e(0),n.e(5)]).then(n.t.bind(null,"1p+/",7)),Promise.all([n.e(1),n.e(0),n.e(9)]).then(n.t.bind(null,"dLt8",7))])}},{test:/\.haml$/i,mode:"text/x-haml",load:function(){return Promise.all([n.e(1),n.e(0),n.e(32)]).then(n.t.bind(null,"c+b1",7))}},{test:/\.sql$/i,mode:"text/x-sql",load:function(){return Promise.resolve().then(n.t.bind(null,"/9rB",7))}},{test:/\.m$/,mode:"text/x-octave",load:function(){return n.e(43).then(n.t.bind(null,"mybg",7))}},{test:/\.f95$/i,mode:"text/x-fortran",load:function(){return n.e(38).then(n.t.bind(null,"UYub",7))}},{test:/\.r$/i,mode:"text/x-rsrc",load:function(){return n.e(14).then(n.t.bind(null,"kD6b",7))}},{test:/\.jl$/i,mode:"text/x-julia",load:function(){return n.e(41).then(n.t.bind(null,"NGrM",7))}},{test:/\.vb$/i,mode:"text/x-vb",load:function(){return n.e(47).then(n.t.bind(null,"Kr55",7))}},{test:/\.(lisp|cl)$/i,mode:"text/x-common-lisp",load:function(){return n.e(37).then(n.t.bind(null,"kmAK",7))}},{test:/\.rs$/i,mode:"text/rust",load:function(){return n.e(35).then(n.t.bind(null,"sY4N",7))}},{test:/\.tex$/i,mode:"text/x-latex",load:function(){return n.e(45).then(n.t.bind(null,"+NIl",7))}},{test:/\.vue$/i,mode:"text/x-vue",load:function(){return Promise.all([n.e(1),n.e(0),n.e(13),n.e(31)]).then(n.t.bind(null,"aT2M",7))}},{test:/\.(pug|jade)$/i,mode:"text/x-pug",load:function(){return Promise.all([n.e(1),n.e(0),n.e(13)]).then(n.t.bind(null,"W+/v",7))}},{test:/\.(s|asm)$/i,mode:"gas",load:function(){return n.e(39).then(n.t.bind(null,"Upog",7))}},{test:/\.(v|vh|sv|svh)$/i,mode:"verilog",load:function(){return n.e(48).then(n.t.bind(null,"m2bc",7))}},{test:/\.mli?$/i,mode:"text/x-ocaml",load:function(){return n.e(42).then(n.t.bind(null,"NU+Z",7))}},{test:/\.r$/i,mode:"r",load:function(){return n.e(14).then(n.t.bind(null,"kD6b",7))}},{test:/\.php$/i,mode:"php",load:function(){return Promise.all([n.e(1),n.e(0),n.e(2),n.e(33)]).then(n.t.bind(null,"RNWO",7))}}];function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var fe,me=[{test:/\.(py3?|sage)$/i,softTabs:!0,tabSize:4},{test:/^makefile$/i,softTabs:!1,tabSize:4},{test:/\.hs$/i,softTabs:!0,tabSize:4}],ve=function(){return fe||(window.CodeMirror=g.a,fe=d.promiseLongOperation(n.e(49).then(n.t.bind(null,"RMTI",7)),function(){var e=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.b({type:"info",duration:0,closable:!1,text:"Downloading Emmet..."}),e.prev=1,e.next=4,t;case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),f.b({type:"error",text:"Unable to download Emmet. Check your Internet connection and try again."}),t=null,e.abrupt("return");case 11:return e.prev=11,n.hide(),e.finish(11);case 14:f.b({type:"success",text:"Emmet is enabled."});case 15:case"end":return e.stop()}}),e,null,[[1,6,11,14]])})));return function(t){return e.apply(this,arguments)}}(),5e3).then((function(e){return e.default}))),fe};function be(e){e.somethingSelected()?e.indentSelection("add"):e.replaceSelection(e.getOption("indentWithTabs")?"\t":" ".repeat(e.getOption("indentUnit")),"end","+input")}function ge(e){var t=e.getCursor(),n=e.getRange({line:t.line,ch:0},t);if(e.somethingSelected()||!/^ +$/.test(n))return g.a.Pass;var s=e.getOption("indentUnit"),i=t.ch%s||s;e.replaceRange("",t,{line:t.line,ch:t.ch-i})}var ye,we,_e,ke={components:{ContextMenu:ce.a,ContextMenuItem:ue.a,ContextMenuSeparator:de.a},mixins:[T.a],props:{value:{type:String,default:""},filename:{type:String,default:""},focused:{type:Boolean,default:!1},layout:{type:String,default:null},autofocus:{type:Boolean,default:!1},lineNumbers:{type:Boolean,default:!1},wordWrap:{type:Boolean,default:!1},autoCloseTags:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},cursorPos:{type:Object,default:null},session:{type:Object,default:null},settings:{type:Object,default:null},scrollX:{type:Number,default:0},scrollY:{type:Number,default:0},softTabs:{type:Boolean,default:!1},tabSize:{type:Number,default:4},showInvisibles:{type:Boolean,default:!1},detectIndentation:{type:Boolean,default:!0}},data:function(){return{zoom:1,menuVisible:!1,menuX:0,menuY:0,settingsSoftTabs:null,settingsSoftTabsIsSet:!1,settingsTabSize:null,settingsTabSizeIsSet:!1,detectedSoftTabs:null,detectedTabSize:null,settingsShowInvisibles:null,settingsDetectIndentation:null}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(u.e)(["course"]),{cssClass:function(){return["cm-zoom-".concat(Math.round(100*this.zoom)),{"cm-auto":"auto"===this.layout,"cm-fill":"fill"===this.layout,"cm-readonly":this.readonly}]},computedFilename:function(){return this.filename.slice(this.filename.lastIndexOf("/")+1)},mode:function(){var e=this.computedFilename||".txt";return he.find((function(t){return t.test.test(e)}))},fallbackSettings:function(){var e=this;return me.find((function(t){return t.test.test(e.computedFilename)}))},courseSettings:function(){return this.course?{softTabs:this.course.settings.soft_tabs,tabSize:this.course.settings.tab_size}:null},computedSoftTabs:function(){return null!=this.detectedSoftTabs?this.detectedSoftTabs:this.settingsSoftTabsIsSet?this.settingsSoftTabs:this.courseSettings&&null!=this.courseSettings.softTabs?this.courseSettings.softTabs:null!=this.settingsSoftTabs?this.settingsSoftTabs:this.softTabs},computedTabSize:function(){return null!=this.detectedTabSize?this.detectedTabSize:this.settingsTabSizeIsSet?this.settingsTabSize:this.courseSettings&&null!=this.courseSettings.tabSize?this.courseSettings.tabSize:null!=this.settingsTabSize?this.settingsTabSize:this.tabSize},computedShowInvisibles:function(){return null!=this.settingsShowInvisibles?this.settingsShowInvisibles:this.showInvisibles},computedDetectIndentation:function(){return null!=this.settingsDetectIndentation?this.settingsDetectIndentation:this.detectIndentation}}),watch:{computedTheme:"updateTheme",value:function(e){this.ignoreValueChanged?this.ignoreValueChanged=!1:this.cm.setValue(e||"")},mode:function(e){this.setMode(e)},focused:function(e){var t=this;e&&!this.cm.hasFocus()&&setTimeout((function(){return t.cm.focus()}))},readonly:{immediate:!0,handler:function(e){this.cm&&this.cm.setOption("readOnly",e),this.$emit("readonly",e)}},computedSoftTabs:{immediate:!0,handler:function(e){this.cm&&this.cm.setOption("indentWithTabs",!e),this.$emit("softTabs",e)}},computedTabSize:{immediate:!0,handler:function(e){this.cm&&(this.cm.setOption("tabSize",e),this.cm.setOption("indentUnit",e)),this.$emit("tabSize",e)}},computedShowInvisibles:{immediate:!0,handler:function(e){this.cm&&this.cm.setOption("showInvisibles",e),this.$emit("showInvisibles",e)}},detectedSoftTabs:{immediate:!0,handler:function(e){this.$emit("detectedIndentation",null!=e)}},cursorPos:{deep:!0,handler:function(e){if(e){var t=this.cm.getCursor("to"),n=e.col-1,s=e.row-1;t.line===s&&t.ch===n||this.cm.setCursor(s,n)}}},scrollX:"updateScroll",scrollY:"updateScroll",fallbackSettings:"updateDetectedIndentation",session:function(e,t){t&&this.removeSession(t),e&&this.setSession(e)}},mounted:(_e=Object(a.a)(r.a.mark((function e(){var t,n=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ignoreValueChanged=!1,this.createEditor(),t=l()((function(){n.$el&&h.t(n.$el)&&n.cm.refresh()}),200),this.resizeObserver=new c.a(t),this.resizeObserver.observe(this.$el),this.setMode(this.mode),this.session&&this.setSession(this.session),!this.settings){e.next=13;break}return this.settingsChangeDisposable=this.settings.onChange(this.applySettings),e.next=11,this.applySettings();case 11:e.next=14;break;case 13:this.updateDetectedIndentation();case 14:this.updateTheme();case 15:case"end":return e.stop()}}),e,this)}))),function(){return _e.apply(this,arguments)}),destroyed:function(){this.resizeObserver&&this.resizeObserver.disconnect(),this.settingsChangeDisposable&&this.settingsChangeDisposable.dispose(),this.cm&&(this.cm.deactivateAutocomplete(),this.cm.deactivateLinter()),this.session&&this.removeSession(this.session)},methods:{createEditor:function(){var e=this,t={theme:this.computedTheme,tabSize:this.computedTabSize,indentUnit:this.computedTabSize,indentWithTabs:!this.computedSoftTabs,matchBrackets:!0,autoCloseBrackets:!0,styleActiveLine:!1,showInvisibles:this.computedShowInvisibles,showCursorWhenSelecting:!0,lineNumbers:this.lineNumbers,lineWrapping:this.wordWrap,dragDrop:!1,readOnly:this.readonly,autoCloseTags:this.autoCloseTags,value:this.value||""};"auto"===this.layout&&(t.viewportMargin=1/0),this.cm=new g.a(this.$el,t);var n=function(){};this.cm.setOption("extraKeys",{Insert:n,"Ctrl-S":n,"Cmd-S":n,"Shift-Enter":n,"Cmd-/":function(e){return e.toggleComment({indent:!0})},"Ctrl-/":function(e){return e.toggleComment({indent:!0})},"Ctrl-Space":function(e){return e.autocomplete(!0)},"Alt-Space":function(e){return e.autocomplete(!0)},"Shift-Ctrl-Space":function(e){return e.autocomplete(!1)},"Shift-Alt-Space":function(e){return e.autocomplete(!1)},Tab:be,Backspace:ge}),this.cm.on("change",this.handleEditorChange),this.cm.on("scroll",this.handleEditorScroll),this.cm.on("contextmenu",this.handleEditorContextMenu),this.cm.on("mousedown",this.handleEditorMouseDown),this.cm.on("scrollCursorIntoView",this.handleEditorScrollCursorIntoView),this.cm.on("focus",this.handleEditorFocus),this.cm.on("blur",this.handleEditorBlur),this.cm.on("cursorActivity",this.handleEditorCursorActivitiy),this.$nextTick((function(){e.autofocus&&e.cm.focus(),e.updateScroll()}))},setSession:function(e){this.cm.setValue(e.content),e.setEditor(this.cm)},removeSession:function(e){e.setEditor(null)},updateTheme:function(){this.cm.setOption("theme",this.computedTheme),this.cm.setAutocompleteTheme(this.computedTheme)},updateScroll:function(){this.cm.scrollTo(this.scrollX,this.scrollY)},setMode:(we=Object(a.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,t.load();case 3:this.cm.setOption("mode",t.mode),e.next=7;break;case 6:this.cm.setOption("mode","");case 7:case"end":return e.stop()}}),e,this)}))),function(e){return we.apply(this,arguments)}),focus:function(){this.cm.focus()},copy:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cm.getSelection();e&&this.cm.execCommand("delCharBefore"),v.a(t)},showClipboardAlert:function(e){this.$createElement;p.e({render:function(){var t=this,n=arguments[0];return n(le.a,{attrs:{action:e},on:{action:function(e){return t.$emit("action",e)}}})}})},applySettings:(ye=Object(a.a)(r.a.mark((function e(){var t,n=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.settingsSoftTabs=this.settings.get("softTabs"),this.settingsTabSize=this.settings.get("tabSize"),this.settingsSoftTabsIsSet=this.settings.isSet("softTabs"),this.settingsTabSizeIsSet=this.settings.isSet("tabSize"),this.settingsShowInvisibles=this.settings.get("showInvisibles"),this.settingsDetectIndentation=this.settings.get("detectIndentation"),this.cm.setOption("lineWrapping",this.settings.get("wordWrap")),this.cm.setOption("lineNumbers",this.settings.get("lineNumbers")),this.cm.setOption("styleActiveLine",this.settings.get("highlightActiveLine")),this.cm.setOption("smartIndent",this.settings.get("smartIndent")),this.cm.setOption("autoCloseTags",this.settings.get("autoCloseTags")),this.cm.setOption("keyMap",this.settings.get("keyMap")),this.updateDetectedIndentation(),t=this.settings.get("zoom"),this.zoom!==t&&(this.zoom=t,this.$nextTick((function(){return n.cm.refresh()}))),this.settings.get("autocomplete")?this.session&&this.cm.activateAutocomplete(this.session):this.cm.deactivateAutocomplete(),this.settings.get("linter")?this.cm.activateLinter():this.cm.deactivateLinter(),!this.settings.get("emmet")){e.next=25;break}return e.next=20,ve();case 20:(0,e.sent)(this.cm),this.emmetEnabled=!0,e.next=31;break;case 25:if(!this.emmetEnabled){e.next=31;break}return e.next=28,ve();case 28:e.sent.dispose(this.cm),this.emmetEnabled=!1;case 31:case"end":return e.stop()}}),e,this)}))),function(){return ye.apply(this,arguments)}),updateDetectedIndentation:function(){if(this.computedDetectIndentation){var e=this.calculateIndentation();this.detectedSoftTabs=e.softTabs,this.detectedTabSize=e.tabSize}else this.detectedSoftTabs=null,this.detectedTabSize=null},convertIndentation:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"spaces",t=this.computedTabSize,n="spaces"===e?" ".repeat(t):"\t",s=0;s<this.cm.lineCount();s++){for(var i=this.cm.getLine(s).match(/^[ \t]*/)[0],r="",a=0,o=0;o<i.length;o++)(a="\t"===i[o]?t:a+1)===t&&(r+=n,a=0);this.cm.replaceRange(r,{line:s,ch:0},{line:s,ch:i.length-a},"+input")}this.updateDetectedIndentation()},calculateIndentation:function(){var e=null,t=null;if(this.cm){for(var n=[],s=0;s<Math.min(100,this.cm.lineCount());s++){var i=this.cm.getLine(s);i.match(/^\s*$/)?n.push({spaces:0,tabs:0}):n.push({spaces:i.match(/^ */)[0].length,tabs:i.match(/^\t*/)[0].length})}var r=n.reduce((function(e,t){return e+(t.tabs?1:0)}),0),a=n.reduce((function(e,t){return e+(t.spaces?1:0)}),0);if(r>a)e=!1;else if(a>r){e=!0;var o=[2,3,4,5,6,7,8].map((function(e){return{size:e,score:n.reduce((function(t,n){return t+(n.spaces>0&&n.spaces%e==0?1:0)}),0)}}));o.every((function(e){return e.score===o[0].score}))||(o.sort(d.compositeComparator((function(e,t){return t.score-e.score}),(function(e,t){return t.size-e.size}))),t=o[0].size)}}return this.fallbackSettings&&(null==e&&null!=this.fallbackSettings.softTabs&&(e=this.fallbackSettings.softTabs),null==t&&null!=this.fallbackSettings.tabSize&&(t=this.fallbackSettings.tabSize)),{softTabs:e,tabSize:t}},handleEditorChange:function(){var e=this.cm.getValue();this.value!==e&&(this.ignoreValueChanged=!0,this.$emit("input",e))},handleEditorScroll:function(){var e=this.cm.getScrollInfo();this.$emit("update:scrollX",e.left),this.$emit("update:scrollY",e.top)},handleEditorContextMenu:function(e,t){t.preventDefault(),t.stopPropagation(),this.menuVisible=!0,this.menuX=t.clientX+window.pageXOffset,this.menuY=t.clientY+window.pageYOffset},handleEditorMouseDown:function(e,t){t.button===m.b&&t.preventDefault()},handleEditorScrollCursorIntoView:function(e,t){t.preventDefault()},handleEditorFocus:function(){this.$emit("focus")},handleEditorBlur:function(){this.$emit("blur")},handleEditorCursorActivitiy:function(){var e=this.cm.getCursor("to"),t={col:e.ch+1,row:e.line+1};this.$emit("update:cursorPos",t)}}},Ce=(n("/c/i"),Object(M.a)(ke,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ed-codemirror",class:e.cssClass},[e.menuVisible?n("ContextMenu",{attrs:{"target-left":e.menuX,"target-top":e.menuY},on:{close:function(t){e.menuVisible=!1}}},[n("ContextMenuItem",{key:"undo",attrs:{text:"Undo",shortcut:{mac:"cmd+z",default:"ctrl+z"},disabled:e.readonly},on:{click:function(t){return e.cm.execCommand("undo")}}}),e._v(" "),n("ContextMenuItem",{key:"redo",attrs:{text:"Redo",shortcut:{mac:"cmd+y",default:"ctrl+y"},disabled:e.readonly},on:{click:function(t){return e.cm.execCommand("redo")}}}),e._v(" "),n("ContextMenuSeparator"),e._v(" "),n("ContextMenuItem",{key:"cut",attrs:{text:"Cut",shortcut:{mac:"cmd+x",default:"ctrl+x"},disabled:e.readonly},on:{click:function(t){return e.copy(!0)}}}),e._v(" "),n("ContextMenuItem",{key:"copy",attrs:{text:"Copy",shortcut:{mac:"cmd+c",default:"ctrl+c"}},on:{click:function(t){return e.copy(!1)}}}),e._v(" "),n("ContextMenuItem",{key:"paste",attrs:{text:"Paste",shortcut:{mac:"cmd+v",default:"ctrl+v"},disabled:e.readonly},on:{click:function(t){return e.showClipboardAlert("paste")}}}),e._v(" "),n("ContextMenuSeparator"),e._v(" "),n("ContextMenuItem",{key:"delete",attrs:{text:"Delete",shortcut:"backspace",disabled:e.readonly},on:{click:function(t){return e.cm.execCommand("delCharBefore")}}}),e._v(" "),n("ContextMenuItem",{key:"selectAll",attrs:{text:"Select All",shortcut:{mac:"cmd+a",default:"ctrl+a"}},on:{click:function(t){return e.cm.execCommand("selectAll")}}})],1):e._e()],1)}),[],!1,null,null,null));t.a=Ce.exports},q6sz:function(e,t,n){},qC1I:function(e,t,n){"use strict";var s=n("UdAl");n.n(s).a},"qE/O":function(e,t,n){"use strict";var s=n("LLd1");n.n(s).a},qHKK:function(e,t,n){},qJ5K:function(e,t,n){"use strict";n("pNMO"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("rePB"),i=n("ltWs"),r=n("b/yj");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var o={functional:!0,props:{value:{type:String,default:null},formatted:{type:Boolean,required:!0},spans:{type:Array,default:void 0}},render:function(e,t){var n,o,l=t.props,c=l.value,u=l.formatted,d=l.spans,h=[t.data.class,"quiz-formatted-display"];return u?(n=i.a,o={value:c,spans:d}):(n=r.a,h.push("sfd-unformatted"),o={latex:c,display:!1}),e(n,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.data,{class:h,props:o}))}},l=(n("uBPy"),n("KHd+")),c=Object(l.a)(o,void 0,void 0,!1,null,null,null);t.a=c.exports},qJuF:function(e,t,n){},qMts:function(e,t,n){},qTL9:function(e,t,n){"use strict";n("TeQF"),n("fbCW"),n("+2oP"),n("Rm1S");var s=n("sEfC"),i=n.n(s),r=n("Pa8A"),a=n("6XG0"),o=n("oLoy"),l={components:{EdCheck:a.a,EdRadio:o.a},props:{preview:{type:Boolean,required:!0},html:{type:Boolean,required:!0},css:{type:Boolean,required:!0},js:{type:Boolean,required:!0},layout:{type:String,required:!0}}},c=(n("TNIm"),n("KHd+")),u=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"web-snippet-settings"},[n("section",{staticClass:"wsnipset-section"},[n("span",{staticClass:"wsnipset-heading"},[e._v("Layout")]),e._v(" "),n("div",{staticClass:"wsnipset-layout"},[n("EdRadio",{attrs:{label:"Tabbed",value:"compact"===e.layout||"previewBottom"===e.layout},on:{input:function(t){return e.$emit("update:layout","compact")}}}),e._v(" "),n("EdRadio",{attrs:{label:"Seamless",value:"seamless"===e.layout},on:{input:function(t){return e.$emit("update:layout","seamless")}}})],1)]),e._v(" "),n("section",{staticClass:"wsnipset-section"},[n("span",{staticClass:"wsnipset-heading"},[e._v("Tabs")]),e._v(" "),n("div",[n("div",{staticClass:"wsnipset-layout"},[n("EdCheck",{attrs:{label:"Preview",disabled:"seamless"===e.layout||"previewBottom"===e.layout,value:"previewBottom"!==e.layout&&"seamless"!==e.layout&&e.preview},on:{input:function(t){return e.$emit("update:preview",t)}}}),e._v(" "),n("EdCheck",{attrs:{label:"HTML",disabled:"seamless"===e.layout,value:"seamless"!==e.layout&&e.html},on:{input:function(t){return e.$emit("update:html",t)}}}),e._v(" "),n("EdCheck",{attrs:{label:"CSS",disabled:"seamless"===e.layout,value:"seamless"!==e.layout&&e.css},on:{input:function(t){return e.$emit("update:css",t)}}}),e._v(" "),n("EdCheck",{attrs:{label:"JavaScript",disabled:"seamless"===e.layout,value:"seamless"!==e.layout&&e.js},on:{input:function(t){return e.$emit("update:js",t)}}})],1),e._v(" "),n("div",{staticClass:"wsnipset-layout"},[n("EdCheck",{attrs:{label:"Show preview below code",disabled:"seamless"===e.layout,value:"seamless"!==e.layout&&"previewBottom"===e.layout},on:{input:function(t){return e.$emit("update:layout",t?"previewBottom":"compact")}}})],1)])])])}),[],!1,null,null,null).exports,d=n("/NnU"),h=n("q6QK"),p=n("vfuN"),f=n("WmPt"),m=n("UNns"),v=n("nVGi"),b={directives:{Tooltip:r.a},components:{WebSnippetSettings:u,WebSnippetLogs:d.a,Codemirror:h.a,Sandbox:p.a,Icon:f.a,Popup:m.a,Trigger:v.a},props:{html:{type:String,default:""},css:{type:String,default:""},js:{type:String,default:""},selectedTab:{type:String,default:"html"},previewHidden:{type:Boolean,default:!1},htmlHidden:{type:Boolean,default:!1},cssHidden:{type:Boolean,default:!1},jsHidden:{type:Boolean,default:!1},layout:{type:String,default:"compact"},readonly:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1}},data:function(){return{sandboxLoaded:!1,internalSelectedTab:"html",generatedHtml:"",generatedCss:"",generatedJs:"",settingsPopupVisible:!1,codeChanged:!0,logs:[],sandboxHeight:0,allowPopups:!1}},computed:{computedSelectedTab:{get:function(){return"seamless"===this.layout&&this.readonly?"preview":"selectedTab"in this.$vnode.componentOptions.propsData?this.selectedTab:this.internalSelectedTab},set:function(e){"selectedTab"in this.$vnode.componentOptions.propsData?this.$emit("update:selectedTab",e):this.internalSelectedTab=e,this.userDidInteract()}},sandboxVisible:function(){return"previewBottom"===this.layout||"preview"===this.computedSelectedTab},tabs:function(){var e=this.layout,t=this.readonly,n=this.previewHidden,s=this.htmlHidden,i=this.cssHidden,r=this.jsHidden;return["previewBottom"!==e&&(!t||!n)&&{key:"preview",label:"Preview"},(!t||!s)&&{key:"html",label:"HTML"},(!t||!i)&&{key:"css",label:"CSS"},(!t||!r)&&{key:"js",label:"JavaScript"}].filter(Boolean)}},watch:{computedSelectedTab:"invalidatePreview",layout:"invalidatePreview",html:"onCodeChanged",css:"onCodeChanged",js:"onCodeChanged",sandboxVisible:{immediate:!0,handler:function(e){e&&(this.sandboxLoaded=!0)}}},created:function(){var e=this;this.generateDebounced=i()(this.generate,500),this.invalidatePreview(),this.$watch((function(){return e.tabs.find((function(t){return t.key===e.computedSelectedTab}))}),(function(t){if(!t){var n=e.tabs[0],s=e.tabs.find((function(e){return"preview"!==e.key}));e.computedSelectedTab=s?s.key:n?n.key:null}}),{immediate:!0})},methods:{generate:function(){this.codeChanged&&(this.sandboxVisible||(this.sandboxLoaded=!1),this.codeChanged=!1,this.generatedHtml=this.html,this.generatedHtml.match(/<!doctype/i)||(this.generatedHtml="<!DOCTYPE html>"+this.generatedHtml),this.generatedCss=this.css,this.generatedJs=this.js,this.logs=[])},invalidatePreview:function(){this.codeChanged&&("previewBottom"===this.layout?this.generateDebounced():"preview"===this.computedSelectedTab&&(this.generateDebounced.cancel(),this.generate()))},onCodeChanged:function(){this.codeChanged=!0,this.invalidatePreview()},onUpdateLayout:function(e){this.$emit("update:layout",e)},onError:function(e){this.logs.push({level:"error",message:e}),this.truncateLogs()},onLog:function(e){this.logs.push({level:e.level,message:e.args.join(" ")}),this.truncateLogs()},truncateLogs:function(){this.logs.length>1e3&&(this.logs=this.logs.slice(this.logs.length-1e3))},onHeight:function(e){this.sandboxHeight=e},onInput:function(e,t){this.$emit(e,t),this.userDidInteract()},userDidInteract:function(){this.allowPopups||(this.allowPopups=!0,this.logs=[])}}},g=(n("x5kS"),Object(c.a)(b,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"web-snippet",class:{"wsnip-bordered":!e.readonly||"seamless"!==e.layout}},[!e.readonly||"seamless"!==e.layout&&e.tabs.length>1?n("div",{staticClass:"wsnip-tb"},[n("div",{staticClass:"wsnip-tabs"},e._l(e.tabs,(function(t){return n("button",{key:t.key,staticClass:"wsnip-btn wsnip-tab",class:{selected:e.computedSelectedTab===t.key},on:{click:function(n){e.computedSelectedTab=t.key}}},[e._v("\n\t\t\t\t"+e._s(t.label)+"\n\t\t\t")])})),0),e._v(" "),e._t("default"),e._v(" "),e.readonly?e._e():n("Trigger",{attrs:{active:e.settingsPopupVisible,action:"toggle"},on:{"update:active":function(t){e.settingsPopupVisible=t}},scopedSlots:e._u([{key:"trigger",fn:function(t){var s=t.trigger,i=t.attrs;return[n("button",e._b({directives:[{name:"tooltip",rawName:"v-tooltip",value:"Snippet Settings",expression:"'Snippet Settings'"}],staticClass:"wsnip-btn",on:{click:s}},"button",i,!1),[n("Icon",{attrs:{icon:"settings"}})],1)]}},{key:"target",fn:function(t){var s=t.x,i=t.y;return[n("Popup",{attrs:{"target-left":s,"target-top":i,"anchor-x":.9,"light-dismissable":""},on:{close:function(t){e.settingsPopupVisible=!1}}},[n("WebSnippetSettings",{attrs:{preview:!e.previewHidden,html:!e.htmlHidden,css:!e.cssHidden,js:!e.jsHidden,layout:e.layout},on:{"update:preview":function(t){return e.$emit("update:previewHidden",!t)},"update:html":function(t){return e.$emit("update:htmlHidden",!t)},"update:css":function(t){return e.$emit("update:cssHidden",!t)},"update:js":function(t){return e.$emit("update:jsHidden",!t)},"update:layout":e.onUpdateLayout}})],1)]}}],null,!1,595280685)})],2):e._e(),e._v(" "),!e.readonly||"seamless"!==e.layout&&!e.htmlHidden?n("Codemirror",{directives:[{name:"show",rawName:"v-show",value:"html"===e.computedSelectedTab,expression:"computedSelectedTab === 'html'"}],staticClass:"wsnip-codemirror",attrs:{layout:"auto","line-numbers":"",value:e.html,autofocus:e.autofocus,filename:".html"},on:{input:function(t){return e.onInput("update:html",t)}}}):e._e(),e._v(" "),!e.readonly||"seamless"!==e.layout&&!e.cssHidden?n("Codemirror",{directives:[{name:"show",rawName:"v-show",value:"css"===e.computedSelectedTab,expression:"computedSelectedTab === 'css'"}],staticClass:"wsnip-codemirror",attrs:{layout:"auto","line-numbers":"",value:e.css,filename:".css"},on:{input:function(t){return e.onInput("update:css",t)}}}):e._e(),e._v(" "),!e.readonly||"seamless"!==e.layout&&!e.jsHidden?n("Codemirror",{directives:[{name:"show",rawName:"v-show",value:"js"===e.computedSelectedTab,expression:"computedSelectedTab === 'js'"}],staticClass:"wsnip-codemirror",attrs:{layout:"auto","line-numbers":"",value:e.js,filename:".js"},on:{input:function(t){return e.onInput("update:js",t)}}}):e._e(),e._v(" "),e.sandboxLoaded?n("Sandbox",{directives:[{name:"show",rawName:"v-show",value:e.sandboxVisible,expression:"sandboxVisible"}],staticClass:"wsnip-sandbox",style:{height:e.sandboxHeight+"px",maxHeight:"seamless"===e.layout?"auto":"300px"},attrs:{html:e.generatedHtml,css:e.generatedCss,js:e.generatedJs,"allow-popups":e.allowPopups},on:{error:e.onError,log:e.onLog,height:e.onHeight}}):e._e(),e._v(" "),e.logs.length?n("WebSnippetLogs",{directives:[{name:"show",rawName:"v-show",value:e.sandboxVisible,expression:"sandboxVisible"}],staticClass:"wsnip-logs",attrs:{logs:e.logs}}):e._e()],1)}),[],!1,null,null,null));t.a=g.exports},qWa7:function(e,t,n){"use strict";var s=n("8dc9");n.n(s).a},qbxg:function(e,t,n){"use strict";n("ma9I");var s=n("KQm4"),i=n("Kaxq"),r=n("Yswc"),a={functional:!0,props:{isAdmin:{type:Boolean,default:!1},isUserAdmin:{type:Boolean,default:!1},markable:{type:Boolean,default:!1},getComponent:{type:Function,required:!0},challenge:{type:Object,required:!0}},render:function(e,t){var n=t.props,a=n.isAdmin,o=n.isUserAdmin,l=n.markable,c=n.getComponent,u=n.challenge,d=t.scopedSlots;return[].concat(Object(s.a)(d.general&&d.general()||[]),[u&&!(u.features.git_submission&&u.settings.only_git_submission)&&e(i.a,{key:"reset",attrs:{text:"Reset to Scaffold"},on:{click:function(){return c().resetAttempt()}}}),u&&u.features.git_submission&&e(i.a,{key:"resetGit",attrs:{text:"Reset Git Repository"},on:{click:function(){return c().resetGitRepository()}}}),e(i.a,{key:"print",attrs:{text:"Print Description"},on:{click:function(){return c().print()}}}),e(r.a),a&&l&&e(i.a,{key:"remark",attrs:{text:"Remark Submissions..."},on:{click:function(){return c().showSheetRemarkSubmissions()}}})],Object(s.a)(d.submissions&&d.submissions()||[]),[e(r.a),a&&e(i.a,{key:"downloadSubmissions",attrs:{text:"Download Submissions ..."},on:{click:function(){return c().showDownloadSubmissionsSheet()}}}),a&&e(i.a,{key:"downloadResults",attrs:{text:"Download Results..."},on:{click:function(){return c().showSheetDownloadResults()}}}),a&&e(i.a,{key:"downloadSim",attrs:{text:"Download Similarity Report..."},on:{click:function(){return c().showDownloadSimilaritySheet()}}})],Object(s.a)(d.download&&d.download()||[]),[o&&e(i.a,{key:"downloadLog",attrs:{text:"Download Workspace Log"},on:{click:function(){return c().downloadWorkspaceLog()}}})])}},o=n("KHd+"),l=Object(o.a)(a,void 0,void 0,!1,null,null,null);t.a=l.exports},qcHD:function(e,t,n){"use strict";var s=n("YvKY");n.n(s).a},qctn:function(e,t,n){"use strict";var s=n("TfQX");n.n(s).a},qfmj:function(e,t,n){"use strict";var s=n("gSBo");n.n(s).a},qjA0:function(e,t,n){"use strict";var s=n("pqoI");n.n(s).a},qk7x:function(e,t,n){},qq4C:function(e,t,n){"use strict";var s=n("t2Ru");n.n(s).a},qvPh:function(e,t,n){"use strict";var s=n("MaaL");n.n(s).a},qyPC:function(e,t,n){},"r+/L":function(e,t,n){},"r/0h":function(e,t,n){},r17E:function(e,t,n){"use strict";var s=n("JEQC");n.n(s).a},r2p1:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("4mDm"),n("2B1R"),n("+2oP"),n("ToJy"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("YGK4"),n("PKPk"),n("FZtP"),n("3bBZ");var s=n("KQm4"),i=n("o0o1"),r=n.n(i),a=(n("ls82"),n("HaE+")),o=n("rePB"),l=n("oRKG"),c=n("6XG0"),u=n("0XH5"),d=n("WmPt"),h=n("K24h"),p=n("JBdv"),f=n("L2JU"),m=n("5/Cn"),v=n("/Yj0"),b=n("hSdx");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var y,w,_={components:{EdCheck:c.a,SearchInput:u.a,Icon:d.a,InfiniteScroll:h.a,DateDisplay:p.a},mixins:[l.a],inject:["swayApi"],data:function(){return{searchQuery:"",items:[],displayedItemsCount:50}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(f.e)(["course"]),{filteredItems:function(){var e=this;return this.items.filter((function(t){return b.validateSubstrDeep(t.quiz,e.searchQuery,"name")})).sort((function(e,t){return(t.quiz.updatedAt||t.quiz.createdAt)-(e.quiz.updatedAt||e.quiz.createdAt)}))},displayedItems:function(){return this.filteredItems.slice(0,this.displayedItemsCount)}}),watch:{filteredItems:function(){this.displayedItemsCount=50}},created:function(){this.update()},methods:{pluralize:b.pluralize,update:(w=Object(a.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.swayApi.getQuizResults(this.course.id);case 3:t=e.sent,this.items=t.map((function(e){return{quiz:e,selected:!1}})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v.b({type:"error",text:"Unable to fetch activity results listing."});case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return w.apply(this,arguments)}),displayMoreQuizzes:function(){this.displayedItemsCount=Math.min(this.displayedItemsCount+50,this.items.length)},downloadResult:function(e){this.swayApi.downloadResult(e.id)},deleteSelected:(y=Object(a.a)(r.a.mark((function e(){var t,n,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.selectedItems,e.next=3,m.d({icon:"warning",title:"Delete selected?",text:1===t.length?'Are you sure you want to delete the activity result "'.concat(t[0].quiz.name,'"? This cannot be undone.'):"Are you sure you want to delete these ".concat(t.length," activity results? This cannot be undone."),primaryAction:"Delete",secondaryAction:"Cancel"});case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,i=new Set(t.map((function(e){return e.quiz.id}))),e.next=9,(n=this.swayApi).destroyQuizResults.apply(n,Object(s.a)(i));case 9:this.items=this.items.filter((function(e){return!i.has(e.quiz.id)})),v.b({type:"success",text:"Selected activity results deleted."}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),v.b({type:"error",text:"Unable to delete the selected activity results."});case 16:case"end":return e.stop()}}),e,this,[[5,13]])}))),function(){return y.apply(this,arguments)})}},k=(n("ammm"),n("KHd+")),C=Object(k.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sway-reports"},[n("div",{staticClass:"sway-container"},[n("p",{staticClass:"sway-infobox"},[e._v("\n\t\t\tThis page contains the results of all activities conducted in this course.\n\t\t\tSelect an activity to view the results table for that activity. You can also download\n\t\t\tthe results in CSV format.\n\t\t")]),e._v(" "),n("SearchInput",{staticClass:"srpi-search",attrs:{placeholder:"Search reports"},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),e._v(" "),n("div",{staticClass:"sway-actions"},[n("div",{staticClass:"sway-actions-group"},[n("button",{staticClass:"sway-action",attrs:{disabled:!e.selectedItems.length},on:{click:e.deleteSelected}},[n("Icon",{staticClass:"sway-action-icon",attrs:{icon:"delete"}}),e._v(" "),n("span",{staticClass:"sway-action-text"},[e._v("Delete")])],1)]),e._v(" "),n("div",{staticClass:"sway-actions-group"},[e._v("\n\t\t\t\t"+e._s(e.items.length)+" "+e._s(e.pluralize(e.items.length,"activity","activities"))+" total\n\t\t\t")])]),e._v(" "),n("InfiniteScroll",{on:{trigger:e.displayMoreQuizzes}},[n("table",{staticClass:"sway-table"},[n("thead",[n("tr",[n("th",{staticClass:"srpi-col-check"},[n("EdCheck",{attrs:{value:e.allSelected,disabled:!e.filteredItems.length},on:{input:function(t){return e.selectAll(t)}}})],1),e._v(" "),n("th",{staticClass:"srpi-col-name"},[e._v("Name")]),e._v(" "),n("th",{staticClass:"srpi-col-launcher"},[e._v("Launched By")]),e._v(" "),n("th",{staticClass:"srpi-col-date"},[e._v("Date")]),e._v(" "),n("th",{staticClass:"srpi-col-action"},[e._v("Download CSV")])])]),e._v(" "),n("tbody",e._l(e.displayedItems,(function(t){return n("tr",{key:t.quiz.id},[n("td",{staticClass:"srpi-col-check"},[n("EdCheck",{model:{value:t.selected,callback:function(n){e.$set(t,"selected",n)},expression:"item.selected"}})],1),e._v(" "),n("td",{staticClass:"srpi-col-name"},[n("RouterLink",{attrs:{to:{name:"sway-reports-show",params:{quizId:t.quiz.id}}}},[e._v(e._s(t.quiz.name))])],1),e._v(" "),n("td",{staticClass:"srpi-col-launcher"},[e._v(e._s(t.quiz.userName))]),e._v(" "),n("td",{staticClass:"srpi-col-date"},[n("DateDisplay",{attrs:{date:t.quiz.updatedAt||t.quiz.createdAt,format:"fromNow"}})],1),e._v(" "),n("td",{staticClass:"srpi-col-action",on:{click:function(n){return e.downloadResult(t.quiz)}}},[n("Icon",{staticClass:"sway-col-action-icon",attrs:{icon:"download"}})],1)])})),0)])])],1)])}),[],!1,null,null,null);t.default=C.exports},r3Ij:function(e,t,n){"use strict";var s=n("2iPU");n.n(s).a},rDWb:function(e,t,n){"use strict";var s=n("/iFh");n.n(s).a},rEhS:function(e,t,n){"use strict";var s=n("sL6Y");n.n(s).a},rLgb:function(e,t,n){},rMvd:function(e,t,n){"use strict";var s=n("zBf9"),i=n("WmPt"),r=n("oLoy"),a={components:{Icon:i.a,EdRadio:r.a},extends:s.a,data:function(){return{items:[{value:!0,label:"True"},{value:!1,label:"False"}]}},computed:{valid:function(){return null!=this.value}},methods:{emitInput:function(e){this.editable&&this.$emit("input",e)},answerCorrect:function(e){return null!=this.solution?this.solution===e||this.value!==e&&void 0:null!=this.correct&&this.value===e?this.correct:void 0},answerIcon:function(e){switch(this.answerCorrect(e)){case!0:return"tick";case!1:return"cross"}},answerClass:function(e){switch(this.answerCorrect(e)){case!0:return"correct";case!1:return"incorrect"}}}},o=(n("deQZ"),n("KHd+")),l=Object(o.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quiz-question-show-tf",class:{enabled:e.editable}},e._l(e.items,(function(t){return n("div",{key:t.value,staticClass:"qqstf-item",class:e.answerClass(t.value),on:{click:function(n){return e.emitInput(t.value)}}},[n("EdRadio",{staticClass:"qqstf-radio",attrs:{label:t.label,value:e.value===t.value},on:{input:function(n){return e.emitInput(t.value)}}}),e._v(" "),n("Icon",{staticClass:"qqstf-icon",attrs:{icon:e.answerIcon(t.value)}})],1)})),0)}),[],!1,null,null,null);t.a=l.exports},ribY:function(e,t,n){},rn9D:function(e,t,n){},rvAr:function(e,t,n){},rvcz:function(e,t,n){"use strict";var s=n("hv6D");n.n(s).a},rwSh:function(e,t,n){},rwiz:function(e,t,n){},rxLH:function(e,t,n){},ry1Z:function(e,t,n){"use strict";var s=n("U3Ge");n.n(s).a},ryIU:function(e,t,n){"use strict";var s=n("aMaT");n.n(s).a},ryzy:function(e,t,n){"use strict";var s=n("394T");n.n(s).a},rz1s:function(e,t,n){},"s+q+":function(e,t,n){},s0lQ:function(e,t,n){},s20v:function(e,t,n){},s3ph:function(e,t,n){"use strict";var s=n("N8J4");n.n(s).a},s5ut:function(e,t,n){},s77E:function(e,t,n){},s7c9:function(e,t,n){},sBop:function(e,t,n){"use strict";var s=n("/fhb");n.n(s).a},sC4w:function(e,t,n){"use strict";var s=n("+vuJ");n.n(s).a},sD6o:function(e,t,n){"use strict";n.r(t);n("07d7"),n("5s+n");var s,i=n("o0o1"),r=n.n(i),a=(n("ls82"),n("HaE+")),o={components:{EdSelect:n("4cYw").a},data:function(){return{locales:[{locale:"en_AU",name:"English"},{locale:"jp_JP",name:"日本語"}]}},methods:{setLocale:(s=Object(a.a)(r.a.mark((function e(t){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$i18n.locale!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n("CCOq")("./".concat(t,".yaml"));case 4:s=e.sent,this.$i18n.setLocaleMessage(t,s.default),this.$i18n.locale=t;case 7:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})}},l=(n("fa1T"),n("KHd+")),c=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{staticClass:"settings-heading"},[e._v("Language")]),e._v(" "),n("EdSelect",{staticClass:"setlang-select",attrs:{value:e.$i18n.locale},on:{input:e.setLocale}},e._l(e.locales,(function(t){return n("option",{key:t.locale,domProps:{value:t.locale}},[e._v("\n\t\t\t"+e._s(t.name)+"\n\t\t")])})),0)],1)}),[],!1,null,null,null);t.default=c.exports},sDtr:function(e,t,n){"use strict";var s=n("kcMa");n.n(s).a},sIew:function(e,t,n){e.exports=n.p+"assets/bot.bc64e547.svg"},sK6X:function(e,t,n){"use strict";var s=n("Kw5r");t.a={inserted:function(e){s.default.nextTick((function(){return e.select()}))}}},sL6Y:function(e,t,n){},sLCi:function(e,t,n){},sNTH:function(e,t,n){"use strict";var s=n("n11X");n.n(s).a},sNlw:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("+2oP"),n("ToJy"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("L2JU"),l=n("WmPt"),c=n("CkVh"),u=n("Kaxq"),d=n("SBq4"),h=n("bBMf"),p=n("PBi1"),f=n("6XG0"),m={directives:{Autofocus:d.a},components:{Alert:h.a,AlertButton:p.a,EdCheck:f.a},props:{courseName:{type:String,required:!0}},data:function(){return{checked:!1}}},v=(n("VZIF"),n("KHd+")),b=Object(v.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Alert",{attrs:{icon:"warning",title:"Unenroll from "+e.courseName+"?",text:"If you proceed, you will no longer have access to the course as well as any content that you may have created within it. An instructor will have to add you back to the course if you change your mind."},scopedSlots:e._u([{key:"primaryActions",fn:function(){return[n("AlertButton",{directives:[{name:"autofocus",rawName:"v-autofocus"}],on:{click:function(t){return e.$emit("action",!1)}}},[e._v("Cancel")]),e._v(" "),n("AlertButton",{attrs:{disabled:!e.checked},on:{click:function(t){return e.$emit("action",!0)}}},[e._v("Unenroll")])]},proxy:!0}])},[n("div",{staticClass:"alert-unenroll-check"},[n("EdCheck",{attrs:{label:"I confirm I want to unenroll myself from the course"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)])}),[],!1,null,null,null).exports,g=n("hSdx"),y=n("5/Cn"),w=n("/Yj0");function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var k,C={inject:["courseApi"],components:{Icon:l.a,ContextMenuTrigger:c.a,ContextMenuItem:u.a},data:function(){return{menuCourse:null}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.e)(["user"]),{sortedCourses:function(){return this.user.courses.slice().sort(g.compositeComparator((function(e,t){return("archived"===e.status?1:0)-("archived"===t.status?1:0)}),(function(e,t){return g.naturalComparator(t.year,e.year)}),(function(e,t){return g.naturalComparator(t.session,e.session)}),(function(e,t){return g.naturalComparator(e.code,t.code)}),(function(e,t){return g.naturalComparator(e.name,t.name)})))}}),methods:{unenroll:(k=Object(r.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$createElement,n={render:function(){var e=this,n=arguments[0];return n(b,{attrs:{courseName:t.code},on:{action:function(t){return e.$emit("action",t)}}})}},e.next=4,y.e(n);case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,e.next=9,this.courseApi.unenroll(t.id,{userIds:[this.user.id]});case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(6),w.b({type:"error",text:"Unable to unenroll yourself from the course."}),e.abrupt("return");case 15:this.user.courses=this.user.courses.filter((function(e){return e.id!==t.id})),w.b({type:"success",text:"You have been unenrolled from ".concat(t.code,".")});case 17:case"end":return e.stop()}}),e,this,[[6,11]])}))),function(e){return k.apply(this,arguments)})}},x=(n("sqlK"),Object(v.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{staticClass:"settings-heading"},[e._v("My Courses")]),e._v(" "),n("p",{staticClass:"settings-text"},[0===e.sortedCourses?[e._v("\n\t\t\tYou are not enrolled in any courses.\n\t\t")]:[e._v("\n\t\t\tThe following is a list of courses you are enrolled in.\n\t\t")]],2),e._v(" "),e._l(e.sortedCourses,(function(t){return n("div",{key:t.id,staticClass:"setcou-course"},[n("div",{staticClass:"setcou-body"},[n("div",{staticClass:"setcou-name"},[e._v(e._s(t.code)+" – "+e._s(t.name))]),e._v(" "),n("div",{staticClass:"setcou-subtext"},[e._v(e._s(t.year)+" "+e._s(t.session))])]),e._v(" "),n("ContextMenuTrigger",{attrs:{active:e.menuCourse===t},on:{"update:active":function(n){e.menuCourse=n?t:null}},scopedSlots:e._u([{key:"trigger",fn:function(t){var s=t.trigger,i=t.attrs;return[n("button",e._b({staticClass:"setcou-but",on:{click:s}},"button",i,!1),[n("Icon",{attrs:{icon:"more-horiz"}})],1)]}},{key:"items",fn:function(){return[n("ContextMenuItem",{key:"unenroll",attrs:{text:"Unenroll"},on:{click:function(t){return e.unenroll(e.menuCourse)}}})]},proxy:!0}],null,!0)})],1)}))],2)}),[],!1,null,null,null));t.default=x.exports},sQg2:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n("ma9I"),n("yXV3"),n("4mDm"),n("rOQg"),n("tkto"),n("07d7"),n("4l63"),n("TWNs"),n("JfAA"),n("UxlC"),n("XMab"),n("moxL"),n("qXVe"),n("c162"),n("waxf"),n("0TkE"),n("Onu3"),n("1dYe"),n("gvgV"),n("6R/c"),n("YL0P"),n("X5Zq"),n("MoCz"),n("P8wP"),n("ypFw"),n("JaFt"),n("zSZm"),n("KVSy"),n("ZJ55"),n("IZzc"),n("s5qe"),n("cvf0"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("1OyB"),o=n("vuIU"),l=(n("0JNz"),n("20nU")),c=n("clw3"),u=n("hSdx"),d=n("ySoy"),h=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];u.log.apply(u,["MEDIA","rgb(255, 117, 0)"].concat(t))},p=function(){function e(){Object(a.a)(this,e),this.emitter=new c.c,this.stream=null,this.lastEmit=null,this.lastSound=null,this.lastSoundEmit=0,this.lastSilenceEmit=0,this.triggered=!1,this.ctx=null,this.analyser=null}return Object(o.a)(e,[{key:"onSound",value:function(e){return this.emitter.on("sound",e)}},{key:"onSilence",value:function(e){return this.emitter.on("silence",e)}},{key:"loop",value:function(e){if(null!==this.stream){requestAnimationFrame(this.loop.bind(this));var t=new Uint8Array(this.analyser.frequencyBinCount);this.analyser.getByteFrequencyData(t);var n=t.some((function(e){return e}));n&&(e-this.lastSoundEmit>2e3&&("sound"!==this.lastEmit&&(this.emitter.emit("sound"),this.lastEmit="sound"),this.lastSoundEmit=e),this.lastSound=e),!n&&e-this.lastSound>2e3&&e-this.lastSilenceEmit>2e3&&("silence"!==this.lastEmit&&(this.emitter.emit("silence"),this.lastEmit="silence"),this.lastSilenceEmit=e)}}},{key:"setStream",value:function(e){if(this.stream=e,null===e)return this.emitter.emit("silence"),null!==this.ctx&&this.ctx.close(),this.ctx=null,void(this.analyser=null);try{window.AudioContext=window.AudioContext||window.webkitAudioContext,window.audioContext=new AudioContext,this.ctx=new AudioContext}catch(t){return}null!==this.ctx&&(this.analyser=this.ctx.createAnalyser(),this.ctx.createMediaStreamSource(e).connect(this.analyser),this.analyser.minDecibels=-80,this.lastEmit=null,this.lastSound=performance.now(),requestAnimationFrame(this.loop.bind(this)))}}]),e}(),f=function(){function e(t){Object(a.a)(this,e),this.fetch=t,this.emitter=new c.c,this.status="closed",this.sock=null,this.id=null,this.channel=null,this.connected=!1,this.peer=null,this.transceiver=null,this.localAudioStream=null,this.localSoundDetector=new p,this.remoteSoundDetector=new p,this.muted=!0,this.stream=null,this.remoteStream=null,this.localSoundDetector.onSound(this.onLocalSdSound.bind(this)),this.localSoundDetector.onSilence(this.onLocalSdSilence.bind(this)),this.remoteSoundDetector.onSound(this.onRemoteSdSound.bind(this)),this.remoteSoundDetector.onSilence(this.onRemoteSdSilence.bind(this))}var t,n,s;return Object(o.a)(e,[{key:"onMicFailed",value:function(e){return this.emitter.on("mic-failed",e)}},{key:"onDisplayStatus",value:function(e){return this.emitter.on("display-status",e)}},{key:"onClose",value:function(e){return this.emitter.on("close",e)}},{key:"onStream",value:function(e){return this.emitter.on("stream",e)}},{key:"onInit",value:function(e){return this.emitter.on("init",e)}},{key:"onJoin",value:function(e){return this.emitter.on("join",e)}},{key:"onLeave",value:function(e){return this.emitter.on("leave",e)}},{key:"onUpdate",value:function(e){return this.emitter.on("update",e)}},{key:"onLocalSound",value:function(e){return this.emitter.on("local-sound",e)}},{key:"onRemoteSound",value:function(e){return this.emitter.on("remote-sound",e)}},{key:"onDoubleConnect",value:function(e){return this.emitter.on("double-connect",e)}},{key:"close",value:function(){this.sock&&(this.sock.onopen=null,this.sock.onerror=null,this.sock.onclose=null,this.sock.onmessage=null,this.sock.close(),this.sock=null,this.connected=!1,this.ice=null,this.channel=null),this.peer&&(this.peer.close(),this.peer=null,this.transceiver=null),this.stream&&this.stream.getAudioTracks().forEach((function(e){return e.stop()})),this.remoteStream&&this.remoteStream.getAudioTracks().forEach((function(e){return e.stop()})),this.emitter.on("display-status","Disconnected"),this.localSoundDetector.setStream(null),this.remoteSoundDetector.setStream(null),this.status="closed"}},{key:"connect",value:(s=Object(r.a)(i.a.mark((function e(t,n,s){var r,a,o,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.sock){e.next=2;break}return e.abrupt("return");case 2:this.status="loadingTicket",this.emitter.emit("display-status","Awaiting Endpoint"),r=l.a,e.t0=t,e.next="debug"===e.t0?8:"workspace"===e.t0?13:17;break;case 8:return r+="/media_connect/".concat(a=n),s.readonly&&(r+="?readonly=true"),h("Open debug: channel ".concat(a)),e.abrupt("break",17);case 13:return r+="/workspaces/".concat(o=n,"/media_connect"),h("Open workspace: WID channel ".concat(o)),e.abrupt("break",17);case 17:return e.next=19,this.fetch.post(r,s);case 19:return c=e.sent,u=c.data.ticket,this.emitter.emit("display-status","Authenticating"),this.handleTicket(u),e.abrupt("return");case 24:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return s.apply(this,arguments)})},{key:"updateBandwidthRestriction",value:function(e,t){var n="AS";return"firefox"===d.a&&(t=1e3*(t>>>0),n="TIAS"),e=-1===e.indexOf("b="+n+":")?e.replace(/c=IN (.*)\r\n/,"c=IN $1\r\nb="+n+":"+t+"\r\n"):e.replace(new RegExp("b="+n+":.*\r\n"),"b="+n+":"+t+"\r\n")}},{key:"handleTicket",value:function(e){var t=this;"loadingTicket"===this.status&&(this.status="connecting",this.sock=new window.WebSocket("".concat(l.m,"/media-connect/").concat(e)),this.sock.onopen=Object(r.a)(i.a.mark((function e(){var n,s,a,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.status="opened",e.next=3,t.fetch.post(l.a+"/ice",{});case 3:n=e.sent,s=n.data,a=s.iceServers,o=s.ticket,t.emitter.emit("display-status","RTC Opening..."),e.prev=6,t.peer=new RTCPeerConnection({iceServers:a.servers},{optional:[{googDscp:!0},{googCpuOveruseDetection:!0},{googCpuOveruseEncodeUsage:!0},{googCpuUnderuseThreshold:55},{googCpuOverUseThreshold:85}]}),e.next=14;break;case 10:if(e.prev=10,e.t0=e.catch(6),null!==t.peer){e.next=14;break}return e.abrupt("return");case 14:h("Adding transceiver"),t.transceiver=t.peer.addTransceiver("audio",{direction:"sendrecv"}),t.peer.onconnectionstatechange=function(){switch(h("connection state change",t.peer.connectionState),t.peer.connectionState){case"connected":t.emitter.emit("display-status","Voice Connected"),t.status="connected";break;case"disconnected":case"failed":case"closed":t.close()}},t.peer.onsignalingstatechange=function(e){h("signaling state change",e)},t.peer.oniceconnectionstatechange=function(e){h("ice state change",e)},t.peer.onicegatheringstatechange=function(e){h("ice gathering state change",e)},t.peer.onnegotiationneeded=Object(r.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h("on negotiation needed"),e.next=3,t.peer.createOffer({iceRestart:!1,voiceActivityDetection:!0});case 3:return(n=e.sent).sdp=n.sdp.replace("useinbandfec=1","useinbandfec=1; stereo=1; maxaveragebitrate=64000"),n.sdp=t.updateBandwidthRestriction(n.sdp,64e3),e.next=8,t.peer.setLocalDescription(n);case 8:t.emitter.emit("display-status","Connecting..."),h("sending sdp",n),t.send({type:"media_init",data:{sdp:n,ticket:o}});case 11:case"end":return e.stop()}}),e)}))),t.peer.ontrack=function(e){h("on track",e),t.remoteStream=e.streams[0],t.remoteSoundDetector.setStream(e.streams[0]),e.transceiver.receiver.enabled=!0,e.transceiver.receiver.track.onmute=function(){return h("transceiver.receiver.track.onmute")},e.transceiver.receiver.track.onended=function(){return h("transceiver.receiver.track.onended")},e.transceiver.receiver.track.onunmute=function(){h("transceiver.receiver.track.onunmute"),t.emitter.emit("stream",e.streams[0])}},t.peer.onicecandidate=function(e){h("ice candidate",e)};case 23:case"end":return e.stop()}}),e,null,[[6,10]])}))),this.sock.onerror=function(e){h("Websocket error",e)},this.sock.onclose=function(e){h("Websocket closed",e),t.connected=!1,t.close(),t.emitter.emit("close",e)},this.sock.onmessage=function(){var e=Object(r.a)(i.a.mark((function e(n){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=JSON.parse(n.data),h(s.type,s.data),e.t0=s.type,e.next="media_init"===e.t0?5:"media_connected"===e.t0?8:"media_join"===e.t0?11:"media_leave"===e.t0?13:"media_update"===e.t0?15:"media_double_connected"===e.t0?26:28;break;case 5:return e.next=7,t.peer.setRemoteDescription(s.data.sdp);case 7:return e.abrupt("break",30);case 8:return t.id=s.data.id,t.emitter.emit("init",s.data),e.abrupt("break",30);case 11:return t.emitter.emit("join",s.data),e.abrupt("break",30);case 13:return t.emitter.emit("leave",s.data),e.abrupt("break",30);case 15:if(s.data.id!==t.id){e.next=24;break}if(s.data.state.muted===t.muted){e.next=24;break}if(!s.data.state.muted){e.next=22;break}return e.next=20,t.mute(!0);case 20:e.next=24;break;case 22:return e.next=24,t.unmute(!0);case 24:return t.emitter.emit("update",s.data),e.abrupt("break",30);case 26:return t.emitter.emit("double-connect"),e.abrupt("break",30);case 28:return e.abrupt("return");case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"send",value:function(e){this.sock&&this.sock.send(JSON.stringify(e))}},{key:"unmute",value:(n=Object(r.a)(i.a.mark((function e(t){var n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.muted){e.next=2;break}return e.abrupt("return");case 2:if(this.stream){e.next=13;break}return e.prev=3,e.next=6,navigator.mediaDevices.getUserMedia({audio:{autoGainControl:!0,echoCancellation:!0,latency:0,noiseSuppression:!1,sampleRate:48e3,sampleSize:16,volume:1},video:!1});case 6:this.stream=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),this.emitter.emit("mic-failed"),e.abrupt("return");case 13:return n=this.stream.getAudioTracks(),e.next=16,this.transceiver.sender.replaceTrack(n[0]);case 16:s=e.sent,h("replaced track",n[0],s),t||this.send({type:"media_unmute"}),this.localSoundDetector.setStream(this.stream),this.muted=!1;case 21:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(e){return n.apply(this,arguments)})},{key:"mute",value:(t=Object(r.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.muted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.transceiver.sender.replaceTrack(null);case 4:n=e.sent,h("replaced track",null,n),t||this.send({type:"media_mute"}),this.localSoundDetector.setStream(null),this.muted=!0;case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"deafen",value:function(){this.send({type:"media_deafen"})}},{key:"undeafen",value:function(){this.send({type:"media_undeafen"})}},{key:"onLocalSdSound",value:function(){this.send({type:"talking",data:!0}),this.emitter.emit("local-sound",1)}},{key:"onLocalSdSilence",value:function(){this.send({type:"talking",data:!1}),this.emitter.emit("local-sound",0)}},{key:"onRemoteSdSound",value:function(){this.emitter.emit("remote-sound",1)}},{key:"onRemoteSdSilence",value:function(){this.emitter.emit("remote-sound",0)}}]),e}(),m=function(){function e(t){Object(a.a)(this,e),this.fetch=t,this.status="new",this.displayStatus="Initialising",this.localSound=0,this.remoteSound=0,this.emitter=new c.c,this.mediaSession=new f(t),this.mediaSession.onInit(this.onMsInit.bind(this)),this.mediaSession.onJoin(this.onMsJoin.bind(this)),this.mediaSession.onLeave(this.onMsLeave.bind(this)),this.mediaSession.onClose(this.onMsClose.bind(this)),this.mediaSession.onUpdate(this.onMsUpdate.bind(this)),this.mediaSession.onStream(this.onMsStream.bind(this)),this.mediaSession.onDisplayStatus(this.onMsDisplayStatus.bind(this)),this.mediaSession.onLocalSound(this.onMsLocalSound.bind(this)),this.mediaSession.onRemoteSound(this.onMsRemoteSound.bind(this)),this.mediaSession.onDoubleConnect(this.onMsDoubleConnect.bind(this)),this.mediaSession.onMicFailed(this.onMsMicFailed.bind(this)),this.state={hasAudioTrack:!1,id:null,clients:{}}}var t,n,s;return Object(o.a)(e,[{key:"onMicFailed",value:function(e){return this.emitter.on("mic-failed",e)}},{key:"onStateUpdate",value:function(e){return this.emitter.on("state",e)}},{key:"onClose",value:function(e){return this.emitter.on("close",e)}},{key:"onStream",value:function(e){return this.emitter.on("stream",e)}},{key:"onLocalSound",value:function(e){return this.emitter.on("local-sound",e)}},{key:"onRemoteSound",value:function(e){return this.emitter.on("remote-sound",e)}},{key:"onDoubleConnect",value:function(e){return this.emitter.on("double-connect",e)}},{key:"connect",value:(s=Object(r.a)(i.a.mark((function e(t,n){var s,r=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.length>2&&void 0!==r[2]?r[2]:{},this.status="connecting",e.next=4,this.mediaSession.connect(t,n,s);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"disconnect",value:function(){this.status="disconnecting",this.mediaSession.close()}},{key:"mute",value:(n=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.mediaSession.mute());case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"unmute",value:(t=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.mediaSession.unmute());case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"deafen",value:function(){return this.mediaSession.deafen()}},{key:"undeafen",value:function(){return this.mediaSession.undeafen()}},{key:"onMsInit",value:function(e){this.status="connected",this.state.id=e.id;for(var t=0,n=Object.keys(e.clients);t<n.length;t++){var s=n[t];this.state.clients[parseInt(s,10)]=e.clients[s]}this.emitter.emit("state",this.state)}},{key:"onMsJoin",value:function(e){this.state.clients[e.id]=e.state,this.emitter.emit("state",this.state)}},{key:"onMsLeave",value:function(e){delete this.state.clients[e.id],this.emitter.emit("state",this.state)}},{key:"onMsClose",value:function(e){this.status="disconnected",this.emitter.emit("close",e)}},{key:"onMsUpdate",value:function(e){this.state.clients[e.id]=e.state,this.emitter.emit("state",this.state)}},{key:"onMsStream",value:function(e){this.emitter.emit("stream",e)}},{key:"onMsDisplayStatus",value:function(e){this.displayStatus=e}},{key:"onMsLocalSound",value:function(e){this.localSound=e,this.emitter.emit("local-sound",e)}},{key:"onMsRemoteSound",value:function(e){this.remoteSound=e,this.emitter.emit("remote-sound",e)}},{key:"onMsDoubleConnect",value:function(){this.emitter.emit("double-connect")}},{key:"onMsMicFailed",value:function(){this.emitter.emit("mic-failed")}},{key:"sockStatus",get:function(){return this.mediaSession.status}},{key:"userState",get:function(){return this.state.clients[this.state.id]}}]),e}()},sS1w:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("fbCW"),n("5DmW"),n("27RR"),n("tkto"),n("UxlC"),n("FZtP");var s=n("rePB"),i=n("sEfC"),r=n.n(i),a=n("L2JU"),o=n("G7T9"),l=n("X8k4"),c=n("wsB/"),u=n("WmPt"),d=(n("qePV"),{props:{drawerSize:{type:Number,default:250},open:{type:Boolean,default:!1}}}),h=(n("jqv0"),n("KHd+")),p=Object(h.a)(d,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"drawer"},[this._t("default"),this._v(" "),t("transition",[this.open?t("div",{staticClass:"drawer-drawer",style:{width:this.drawerSize+"px"}},[this._t("drawer")],2):this._e()])],2)}),[],!1,null,null,null).exports,f=n("VYah"),m=n("YxxY"),v=n("CkVh"),b=n("Kaxq"),g=(n("+2oP"),n("ToJy"),n("pDQq"),n("hSdx")),y={props:{color:{type:String,required:!0}}},w=(n("lnyD"),Object(h.a)(y,(function(){var e=this.$createElement;return(this._self._c||e)("span",{staticClass:"discuss-category-tag",style:{backgroundColor:this.color}})}),[],!1,null,null,null).exports);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C={components:{Icon:u.a,CategoryTag:w},data:function(){return{maxCoursesCount:8,allCourses:!1}},computed:k({},Object(a.e)(["user","course","isSmallDevice"]),{},Object(a.e)("discuss",["category","subcategory"]),{},Object(a.c)("discuss",["categories"]),{courses:function(){return this.user.courses.filter((function(e){return"active"===e.status&&e.features.discussion})).sort((function(e,t){return g.naturalComparator(e.code,t.code)}))},areCoursesFiltered:function(){return this.courses.length>this.maxCoursesCount},filteredCourses:function(){var e=this,t=this.maxCoursesCount,n=this.allCourses?this.courses:this.courses.slice(0,t);return n.find((function(t){return t.id===e.course.id}))||n.splice(Math.min(n.length,t-1),1,this.course),n}}),methods:k({},Object(a.d)("discuss",{toggleCategory:l.c.TOGGLE_CATEGORY,toggleSubcategory:l.c.TOGGLE_SUBCATEGORY}),{toggleAllCourses:function(){this.allCourses=!this.allCourses}})},x=(n("GRJB"),Object(h.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"discuss-sidebar"},[n("h1",{staticClass:"dsb-heading"},[e._v(e._s(e.$t("courses")))]),e._v(" "),e._l(e.filteredCourses,(function(t){return n("RouterLink",{key:t.id,staticClass:"dsb-item dsb-course",attrs:{"active-class":"selected",to:{name:"discuss-landing",params:{courseId:t.id}}}},[n("span",{staticClass:"dsb-course-code"},[e._v(e._s(t.code))]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.discussion.unread,expression:"course.discussion.unread"}],staticClass:"dsb-course-unread"},[e._v(e._s(t.discussion.unread))])])})),e._v(" "),e.areCoursesFiltered?n("div",{staticClass:"dsb-more",on:{click:e.toggleAllCourses}},[e._v("\n\t\t"+e._s(e.allCourses?e.$t("showLess"):e.$t("countMore",{count:e.courses.length-e.filteredCourses.length}))+"\n\t")]):e._e(),e._v(" "),n("h1",{staticClass:"dsb-heading"},[e._v(e._s(e.$t("discussion.categories")))]),e._v(" "),e._l(e.categories,(function(t){return[n("div",{key:"cat"+t.name,staticClass:"dsb-item dsb-category",attrs:{role:"button",tabindex:"0","aria-pressed":(!e.subcategory&&e.category===t).toString()},on:{click:function(n){return e.toggleCategory(t)},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:t.target.click()}}},[t.shared?n("Icon",{staticClass:"dsb-category-icon",attrs:{icon:"share"}}):n("CategoryTag",{staticClass:"dsb-category-tag",attrs:{color:t.color}}),e._v(" "),n("div",{staticClass:"dsb-category-name"},[e._v(e._s(t.name))])],1),e._v(" "),e.category===t?e._l(t.subcategories,(function(t){return n("div",{key:"subcat"+t,staticClass:"dsb-item dsb-subcategory",attrs:{role:"button",tabindex:"0","aria-pressed":(e.subcategory===t).toString()},on:{click:function(n){return e.toggleSubcategory(t)},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:t.target.click()}}},[e._v("\n\t\t\t\t"+e._s(t)+"\n\t\t\t")])})):e._e()]}))],2)}),[],!1,null,null,null).exports),j={components:{Icon:u.a,Sidebar:x},props:{onlineCount:{type:Number,required:!0}}},O=(n("TQLY"),Object(h.a)(j,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"discuss-sidebar-container"},[t("div",{staticClass:"dsbc-scroll"},[t("Sidebar",{attrs:{"new-thread":""}})],1),this._v(" "),t("div",{staticClass:"dsbc-online"},[t("Icon",{staticClass:"dsbc-online-icon",attrs:{icon:"person"}}),this._v(" "),t("span",[this._v(this._s(this.$tc("discussion.othersOnline",this.onlineCount)))])],1)])}),[],!1,null,null,null).exports),S=(n("x0AG"),n("2B1R"),n("T63A"),n("ODXe")),E=n("bt/X"),T=n.n(E),I=n("wd/R"),D=n.n(I),P=n("K24h"),A=n("VlpE"),N=n("Yswc"),R=n("EML8"),M=n("ySoy"),L=n("83PK"),F=n("b/yj"),B=n("JBdv"),q=n("HYmm");function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var U={components:{Icon:u.a,UserRoleLabel:L.a,MathRender:F.a,DateDisplay:B.a,AuthorName:q.a,Wrapper:{functional:!0,render:function(e,t){var n={name:"discuss-show",params:{threadId:t.parent.thread.id}};return M.f?e("div",{class:"discuss-feed-thread",on:{click:function(){return t.parent.$router.push(n)}}},[t.children]):e("router-link",{class:"discuss-feed-thread",attrs:{to:n}},[t.children])}}},props:{thread:{type:Object,required:!0},course:{type:Object,required:!0},realm:{type:Object,required:!0}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(a.c)("discuss",["categories","categoryFallbackColor","isUserRoleLabelVisible"]),{categoryStyle:function(){var e=this,t=this.categories.find((function(t){return t.name===e.thread.category}));return{color:t?t.color:this.categoryFallbackColor}},categoryIsShared:function(){var e=this.realm.settings.discuss_shared_category;return e&&this.thread.category===e},icon:function(){return this.thread.is_private||"approved"!==this.thread.approved_status?"hidden":this.thread.type}})},z=(n("UdAy"),Object(h.a)(U,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Wrapper",["pending"===e.thread.approved_status?n("header",{staticClass:"dft-pending"},[e._v("\n\t\t"+e._s(e.$t("discussion.pendingApproval"))+"\n\t")]):e._e(),e._v(" "),n("div",{staticClass:"dft-body"},[e.thread.is_seen?e._e():n("Icon",{staticClass:"dft-thread-unseen-icon",attrs:{icon:"circle"}}),e._v(" "),n("Icon",{staticClass:"dft-thread-type-icon",attrs:{icon:e.icon}}),e._v(" "),n("MathRender",{staticClass:"dft-thread-title",attrs:{latex:e.thread.title}}),e._v(" "),e.thread.is_endorsed?n("Icon",{staticClass:"dft-thread-badge endorsed",attrs:{icon:"badge",title:e.$t("discussion.endorsed")}}):e._e(),e._v(" "),e.thread.is_pinned?n("Icon",{staticClass:"dft-thread-badge pinned",attrs:{icon:"pin",title:e.$t("discussion.pinned")}}):e._e(),e._v(" "),e.thread.accepted_id?n("Icon",{staticClass:"dft-thread-badge answered",attrs:{icon:"tick",title:e.$t("discussion.answered")}}):e._e(),e._v(" "),e.thread.is_starred?n("Icon",{staticClass:"dft-thread-badge starred",attrs:{icon:"star",title:e.$t("discussion.starred")}}):e._e()],1),e._v(" "),n("footer",{staticClass:"dft-foot"},[n("div",{staticClass:"dft-foot-fill"},[n("div",{staticClass:"dft-thread-category-group",style:e.categoryStyle},[e.categoryIsShared?n("Icon",{staticClass:"dft-thread-category-icon",attrs:{icon:"share"}}):e._e(),e._v(" "),n("span",{staticClass:"dft-thread-category"},[e._v(e._s(e.thread.category))]),e._v(" "),e.thread.subcategory?n("span",{staticClass:"dft-thread-subcategory"},[e._v(e._s(e.thread.subcategory))]):e._e()],1),e._v(" "),n("AuthorName",{staticClass:"dft-thread-user",attrs:{object:e.thread}}),e._v(" "),e.isUserRoleLabelVisible(e.thread)?n("UserRoleLabel",{staticClass:"dft-thread-user-role",attrs:{user:e.thread.user,course:e.course}}):e._e(),e._v(" "),n("div",{staticClass:"dft-thread-date"},[n("DateDisplay",{attrs:{date:e.thread.created_at,format:"fromNowShort"}})],1)],1),e._v(" "),e.thread.reply_count?[n("Icon",{staticClass:"dft-thread-count-icon",attrs:{icon:"speech",title:e.$t("discussion.replies")}}),e._v(" "),n("div",{staticClass:"dft-thread-count",attrs:{title:e.$t("discussion.replies")}},[e._v("\n\t\t\t\t"+e._s(e.thread.reply_count.toLocaleString())+"\n\t\t\t\t"),e.thread.new_reply_count?n("span",{staticClass:"dft-thread-count-new",attrs:{title:e.$t("discussion.newReplies")}},[e._v("\n\t\t\t\t\t("+e._s(e.$t("countNew",{count:e.thread.new_reply_count.toLocaleString()}))+")\n\t\t\t\t")]):e._e()])]:e._e(),e._v(" "),e.thread.vote_count?[n("Icon",{staticClass:"dft-thread-count-icon",class:{active:1===e.thread.vote},attrs:{icon:"heart",title:e.$t("discussion.likes")}}),e._v(" "),n("div",{staticClass:"dft-thread-count",attrs:{title:e.$t("discussion.likes")}},[e._v("\n\t\t\t\t"+e._s(e.thread.vote_count.toLocaleString())+"\n\t\t\t")])]:e._e()],2)])}),[],!1,null,null,null).exports),V=n("FfD9"),H=n("8PNo"),W=n("9Arg");function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var K={components:{InfiniteScroll:P.a,FeedThread:z,ContextMenu:A.a,ContextMenuItem:b.a,ContextMenuSeparator:N.a,Icon:u.a,ShowMore:R.a,CategoryTag:w},inject:["discussApi","eventBus"],props:{course:{type:Object,required:!0},realm:{type:Object,required:!0},threads:{type:Array,required:!0},sorted:{type:Boolean,default:!1},messageHeading:{type:String,default:null},messageBody:{type:String,default:null}},data:function(){return{menuVisible:!1,menuX:0,menuY:0,menuThread:null,pinnedExpanded:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(a.e)(["user"]),{},Object(a.c)(["isStaff"]),{},Object(a.c)("discuss",["categories"]),{sortedThreads:function(){var e=this.threads.slice();return this.sorted&&e.sort(g.compositeComparator((function(e,t){return(e.is_pinned?0:1)-(t.is_pinned?0:1)}),(function(e,t){return t.created_at-e.created_at}))),e},groupedThreads:function(){var e=this,t=T()(this.sortedThreads,(function(t){return e.sorted&&t.is_pinned?"pinned":t.created_at.clone().startOf("isoWeek").valueOf()})),n=D()().startOf("isoWeek"),s=D()().subtract(7,"days").startOf("isoWeek");return Object.entries(t).map((function(t){var i=Object(S.a)(t,2),r=i[0],a={threads:i[1]};if("pinned"===r)a.key="pinned",a.heading=e.$t("discussion.pinned");else{a.key=+r;var o=D()(+r);o.isSame(n)?a.heading=e.$t("thisWeek"):o.isSame(s)?a.heading=e.$t("lastWeek"):a.heading=o.format("D MMM YYYY")}return a})).sort(g.compositeComparator((function(e,t){return("pinned"===e.key?0:1)-("pinned"===t.key?0:1)}),(function(e,t){return t.key-e.key})))}}),watch:{"$route.params.threadId":function(e){var t=this.$refs.threads.find((function(t){return t.thread.id===+e}));if(t){var n=W.o(t.$el.parentNode);n&&W.D(n,t.$el)}}},methods:{showThreadMenu:function(e,t){this.menuThread=e,this.menuVisible=!0,this.menuX=t.detail.clientX+window.pageXOffset,this.menuY=t.detail.clientY+window.pageYOffset},copyLink:function(e){var t=V.d(this.$router,e);H.a(t,{successMessage:this.$t("discussion.linkCopied")})},toggleRead:function(e){V.n(this.discussApi,this.eventBus,this.$i18n,e,this.course)},markAllAsRead:function(){V.e(this.discussApi,this.$i18n,this.threads,this.course)},openInNewTab:function(e){W.z(V.d(this.$router,e))},setCategory:function(e,t,n){V.f(this.discussApi,this.$i18n,e,t,n)},selectThread:function(e){var t=this;if(this.sortedThreads.length){var n=null;if(null==this.$route.params.threadId)n=e>0?this.sortedThreads[0].id:this.sortedThreads[this.sortedThreads.length-1].id;else{var s=this.sortedThreads.findIndex((function(e){return e.id===t.$route.params.threadId}));if(-1!==s){var i=this.sortedThreads.length;s=((s+e)%i+i)%i,n=this.sortedThreads[s].id}}null!==n&&this.$router.push({name:"discuss-show",params:{threadId:n}})}}}},Y=(n("/iNE"),Object(h.a)(K,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("InfiniteScroll",{on:{trigger:function(t){return e.$emit("load-more")}}},[n("div",{staticClass:"discuss-thread-feed",on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.selectThread(1))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.selectThread(-1))}]}},[e._l(e.groupedThreads,(function(t){return n("div",{key:t.key},[e.sorted?n("div",{staticClass:"dtf-group-heading"},[e._v(e._s(t.heading))]):e._e(),e._v(" "),n("ShowMore",{attrs:{items:t.threads,"collapsed-count":"pinned"===t.key?3:1/0,expanded:e.pinnedExpanded},on:{"update:expanded":function(t){e.pinnedExpanded=t}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.item;return[n("div",{staticClass:"dtf-item"},[n("FeedThread",{key:s.id,ref:"threads",refInFor:!0,attrs:{thread:s,course:e.course,realm:e.realm},nativeOn:{mobilecontextmenu:function(t){return t.preventDefault(),e.showThreadMenu(s,t)}}})],1)]}},{key:"footer",fn:function(s){var i=s.hiddenCount,r=s.expand,a=s.collapse;return["pinned"===t.key?[i?n("button",{staticClass:"dtf-group-more",on:{click:r}},[e._v(e._s(e.$tc("showCountMore",i)))]):e._e(),e._v(" "),e.pinnedExpanded?n("button",{staticClass:"dtf-group-more",on:{click:a}},[e._v(e._s(e.$t("showLess")))]):e._e()]:e._e()]}}],null,!0)})],1)})),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.messageHeading||e.messageBody,expression:"messageHeading || messageBody"}],staticClass:"dtf-message"},[n("div",{staticClass:"dtf-message-heading"},[e._v(e._s(e.messageHeading))]),e._v(" "),n("div",{staticClass:"dtf-message-body"},[e._v(e._s(e.messageBody))])]),e._v(" "),e.menuThread&&e.menuVisible?n("ContextMenu",{attrs:{"target-left":e.menuX,"target-top":e.menuY},on:{close:function(t){e.menuVisible=!1}}},[n("ContextMenuItem",{key:"copyLink",attrs:{text:e.$t("copyLinkButton")},on:{click:function(t){return e.copyLink(e.menuThread)}}}),e._v(" "),n("ContextMenuItem",{key:"toggleRead",attrs:{text:e.$t("discussion.threadMenu.mark"+(e.menuThread.is_seen?"Unread":"Read"))},on:{click:function(t){return e.toggleRead(e.menuThread)}}}),e._v(" "),n("ContextMenuItem",{key:"openNewTab",attrs:{text:e.$t("discussion.threadMenu.openNewTab")},on:{click:function(t){return e.openInNewTab(e.menuThread)}}}),e._v(" "),n("ContextMenuSeparator"),e._v(" "),e.isStaff||e.menuThread.user.id===e.user.id?n("ContextMenuItem",{key:"category",attrs:{text:e.$t("discussion.threadMenu.category")}},[n("ContextMenu",e._l(e.categories,(function(t){return n("ContextMenuItem",{key:t.name,attrs:{text:t.name,checked:!e.menuThread.subcategory&&t.name===e.menuThread.category},on:{click:function(n){return e.setCategory(e.menuThread,t.name,null)}},scopedSlots:e._u([{key:"left",fn:function(){return[t.shared?n("Icon",{staticClass:"dtf-category-glyph",attrs:{icon:"share"}}):n("CategoryTag",{staticClass:"dtf-category-glyph",attrs:{color:e.categories.find((function(e){return e.name===t.name})).color}})]},proxy:!0}],null,!0)},[e._v(" "),t.subcategories.length?n("ContextMenu",e._l(t.subcategories,(function(s){return n("ContextMenuItem",{key:s,attrs:{text:s,checked:s===e.menuThread.subcategory},on:{click:function(n){return e.setCategory(e.menuThread,t.name,s)}}})})),1):e._e()],1)})),1)],1):e._e(),e._v(" "),n("ContextMenuSeparator"),e._v(" "),n("ContextMenuItem",{key:"readAll",attrs:{text:e.$t("discussion.threadMenu.markAllAsRead")},on:{click:e.markAllAsRead}})],1):e._e()],2)])}),[],!1,null,null,null).exports),G={components:{Icon:u.a}},X=(n("R2XL"),Object(h.a)(G,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("RouterLink",{staticClass:"discuss-new-thread-button",attrs:{role:"button",to:{name:"discuss-new"}},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:(t.preventDefault(),t.target.click())}}},[n("Icon",{attrs:{icon:"compose"}}),e._v("\n\t"+e._s(e.$t("discussion.newThreadButton"))+"\n")],1)}),[],!1,null,null,null).exports),J=(n("yXV3"),n("SBq4")),Z=n("oDEV"),ee=n("NC1X"),te=n("4cYw"),ne=n("ZE4w"),se=n("OH48"),ie=n("F3Tp"),re=n("oNMn"),ae=n("kvrn"),oe=n.n(ae),le=n("KQm4"),ce=n("hjyn");function ue(e){for(var t=(new DOMParser).parseFromString(e,"text/html"),n=0,s="",i=[],r=0,a=Object(le.a)(t.body.childNodes);r<a.length;r++){var o=a[r];switch(o.nodeType){case Node.ELEMENT_NODE:s+=o.innerText,i.push([n,n+o.innerText.length]),n+=o.innerText.length;break;case Node.TEXT_NODE:s+=o.nodeValue,n+=o.nodeValue.length}}return{text:s,highlights:i}}var de={functional:!0,props:{fragments:{type:Array,default:function(){return[]}}},render:function(e,t){for(var n=t.props.fragments,s=[],i=e("span",{class:"discuss-search-result-separator"},[" … "]),r=0;r<n.length;r++){var a=ue(n[r]),o=a.text,l=a.highlights,c={scopedSlots:{highlight:function(t){return e("span",{class:"discuss-search-result-highlight"},[t])}}};s.push(e(ce.a,oe()([{attrs:{text:o,highlights:l}},c]))),r<n.length-1&&s.push(i)}return s}},he=(n("K6DV"),Object(h.a)(de,void 0,void 0,!1,null,null,null).exports);function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var fe={components:{Avatar:ie.a,DateDisplay:B.a,UserInfoPopup:re.a,SearchResultHighlight:he},props:{thread:{type:Object,required:!0}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(a.c)("discuss",["categories","categoryFallbackColor"]),{categoryStyle:function(){var e=this,t=this.categories.find((function(t){return t.name===e.thread.category}));return{color:t?t.color:this.categoryFallbackColor}}})},me=(n("Uler"),Object(h.a)(fe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("RouterLink",{staticClass:"discuss-search-thread",attrs:{to:{name:"discuss-show",params:{threadId:e.thread.id}}}},[n("UserInfoPopup",{attrs:{"user-id":e.thread.user_id},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.mouseEnter,i=t.mouseLeave;return[n("Avatar",{staticClass:"dst-avatar",attrs:{user:e.thread.is_anonymous?null:e.thread.user},nativeOn:{mouseenter:function(e){return s(e)},mouseleave:function(e){return i(e)}}})]}}])}),e._v(" "),n("div",{staticClass:"dst-body"},[n("div",{staticClass:"dst-title"},[e.thread.highlights.title?n("SearchResultHighlight",{attrs:{fragments:e.thread.highlights.title}}):[e._v(e._s(e.thread.title))]],2),e._v(" "),n("div",{staticClass:"dst-content"},[e.thread.highlights.document?n("SearchResultHighlight",{attrs:{fragments:e.thread.highlights.document}}):[e._v(e._s(e.thread.document))]],2),e._v(" "),n("div",{staticClass:"dst-footer"},[n("span",{staticClass:"dst-footer-text"},[n("DateDisplay",{attrs:{date:e.thread.created_at,format:"dddd D MMMM"}}),e._v(" in\n\t\t\t")],1),e._v(" "),n("span",{staticClass:"dst-category",style:e.categoryStyle},[e._v(e._s(e.thread.category))]),e._v(" "),e.thread.subcategory?n("span",{staticClass:"dst-subcategory",style:e.categoryStyle},[e._v(e._s(e.thread.subcategory))]):e._e()])])],1)}),[],!1,null,null,null).exports);function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ge={components:{DateTimeField:n("AuRJ").a,CategoryTag:w},computed:be({},Object(a.e)("discuss",["searchCategory","searchSubcategory","searchFilter"]),{},Object(o.h)("discuss",{searchDateFrom:l.c.SET_SEARCH_DATE_FROM,searchDateTo:l.c.SET_SEARCH_DATE_TO}),{},Object(a.c)("discuss",["categories","filters"])),methods:be({},Object(a.d)("discuss",{toggleSearchCategory:l.c.TOGGLE_SEARCH_CATEGORY,toggleSearchSubcategory:l.c.TOGGLE_SEARCH_SUBCATEGORY,toggleSearchFilter:l.c.TOGGLE_SEARCH_FILTER}))},ye=(n("D2rJ"),Object(h.a)(ge,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"discuss-search-sidebar"},[n("section",{staticClass:"dss-section"},[n("h2",{staticClass:"dss-heading"},[e._v("Filter")]),e._v(" "),e._l(e.filters,(function(t){return n("button",{key:t.filter,staticClass:"dss-item",class:{active:e.searchFilter===t.filter},on:{click:function(n){return e.toggleSearchFilter(t.filter)}}},[n("div",{staticClass:"dss-item-layout"},[n("span",{staticClass:"dss-item-text"},[e._v(e._s(t.label))])])])}))],2),e._v(" "),n("section",{staticClass:"dss-section"},[n("h2",{staticClass:"dss-heading"},[e._v("Category")]),e._v(" "),e._l(e.categories,(function(t){return[n("button",{key:"c-"+t.name,staticClass:"dss-item",class:{active:!e.searchSubcategory&&t===e.searchCategory},on:{click:function(n){return e.toggleSearchCategory(t)}}},[n("div",{staticClass:"dss-item-layout"},[n("CategoryTag",{staticClass:"dss-item-aside",attrs:{color:t.color}}),e._v(" "),n("span",{staticClass:"dss-item-text"},[e._v(e._s(t.name))])],1)]),e._v(" "),t===e.searchCategory?e._l(t.subcategories,(function(t){return n("button",{key:"s-"+t,staticClass:"dss-item dss-item-indent",class:{active:t===e.searchSubcategory},on:{click:function(n){return e.toggleSearchSubcategory(t)}}},[n("div",{staticClass:"dss-item-layout"},[n("span",{staticClass:"dss-item-text"},[e._v(e._s(t))])])])})):e._e()]}))],2),e._v(" "),n("section",{staticClass:"dss-section"},[n("h2",{staticClass:"dss-heading"},[e._v("Date")]),e._v(" "),n("div",{staticClass:"dss-field"},[n("DateTimeField",{attrs:{placeholder:"From"},model:{value:e.searchDateFrom,callback:function(t){e.searchDateFrom=t},expression:"searchDateFrom"}})],1),e._v(" "),n("div",{staticClass:"dss-field"},[n("DateTimeField",{attrs:{placeholder:"To"},model:{value:e.searchDateTo,callback:function(t){e.searchDateTo=t},expression:"searchDateTo"}})],1)])])}),[],!1,null,null,null).exports);function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ke={directives:{Autofocus:J.a},components:{FadeTransition:Z.a,Spinner:ee.a,EdSelect:te.a,Split:f.a,SplitPanel:m.a,ScrollView:ne.a,InfiniteScroll:P.a,Icon:u.a,PopupLayer:se.a,SearchThread:me,SearchSidebar:ye},data:function(){return{threadsFrac:1,sidebarFrac:250,focusedThread:null}},computed:_e({},Object(a.e)("discuss",["searchThreads","searchTotal","searchLoading","hasMoreSearchThreads"]),{},Object(o.h)("discuss",{searchQuery:l.c.SET_SEARCH_QUERY,searchSort:l.c.SET_SEARCH_SORT}),{fullView:function(){return null!=this.searchThreads}}),methods:_e({pluralize:g.pluralize},Object(a.b)("discuss",{loadNextThreadSearchPage:l.a.LOAD_NEXT_THREAD_SEARCH_PAGE}),{clear:function(){this.searchQuery="",this.$refs.input.focus()},moveThreadSelection:function(e){if(this.searchThreads.length){var t=0;if(this.focusedThread){var n=this.searchThreads.indexOf(this.focusedThread);-1!==n&&(t=Math.max(0,Math.min(this.searchThreads.length-1,n+e)))}else t=e>0?0:this.searchThreads.length-1;this.$refs.threads[t].$el.focus()}}})},Ce=(n("26FR"),Object(h.a)(ke,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("PopupLayer",[n("div",{staticClass:"discuss-search",class:{"dissch-full":e.fullView},on:{click:function(t){return t.target!==t.currentTarget?null:e.$emit("close")},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.$emit("close")}}},[n("div",{staticClass:"dissch-window"},[n("div",{staticClass:"dissch-bar"},[n("Icon",{staticClass:"dissch-bar-icon",attrs:{icon:"search"}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"},{name:"autofocus",rawName:"v-autofocus"}],ref:"input",staticClass:"dissch-bar-input",attrs:{placeholder:"Search"},domProps:{value:e.searchQuery},on:{input:function(t){t.target.composing||(e.searchQuery=t.target.value)}}}),e._v(" "),n("FadeTransition",{attrs:{duration:.2}},[e.searchLoading?n("Spinner",{staticClass:"dissch-bar-spinner"}):e._e()],1),e._v(" "),e.searchQuery?n("div",{staticClass:"dissch-bar-btn"},[n("button",{on:{click:e.clear}},[n("span",[e._v("Clear")])])]):e._e(),e._v(" "),n("div",{staticClass:"dissch-bar-btn"},[n("button",{on:{click:function(t){return e.$emit("close")}}},[n("Icon",{attrs:{icon:"cross"}})],1)])],1),e._v(" "),e.fullView?n("Split",{staticClass:"dissch-split",attrs:{orientation:"horizontal"}},[n("SplitPanel",{attrs:{"frac.sync":"threadsFrac"}},[n("InfiniteScroll",{on:{trigger:e.loadNextThreadSearchPage}},[n("ScrollView",{staticClass:"dissch-threads-scroll"},[n("div",{staticClass:"dissch-summary"},[n("span",{staticClass:"dissch-total"},[e._v(e._s(e.searchTotal||"No")+" "+e._s(e.pluralize(e.searchTotal,"result")))]),e._v(" "),n("EdSelect",{staticClass:"dissch-order",model:{value:e.searchSort,callback:function(t){e.searchSort=t},expression:"searchSort"}},[n("option",{attrs:{value:"relevance"}},[e._v("Most relevant")]),e._v(" "),n("option",{attrs:{value:"newest"}},[e._v("Newest")]),e._v(" "),n("option",{attrs:{value:"oldest"}},[e._v("Oldest")])])],1),e._v(" "),e.searchThreads&&0===e.searchThreads.length?n("div",{staticClass:"dissch-no-results"},[n("p",[e._v("Ed couldn't find any threads matching your search. Perhaps try:")]),e._v(" "),n("p",[n("ul",[n("li",[e._v("Using different keywords")]),e._v(" "),n("li",[e._v("Tweaking your filters")]),e._v(" "),n("li",[e._v("Looking for typos")])])])]):e._e(),e._v(" "),e.searchThreads?n("TransitionGroup",{attrs:{tag:"div"},nativeOn:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.moveThreadSelection(-1))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.moveThreadSelection(1))}]}},e._l(e.searchThreads,(function(t){return n("SearchThread",{key:t.id,ref:"threads",refInFor:!0,staticClass:"dissch-thread",attrs:{thread:t},nativeOn:{click:function(t){return e.$emit("close")},focus:function(n){e.focusedThread=t},blur:function(t){e.focusedThread=null}}})})),1):e._e(),e._v(" "),n("div",{staticClass:"dissch-no-more"},[e._v("\n\t\t\t\t\t\t\t\t​\n\t\t\t\t\t\t\t\t"),e.searchThreads.length&&!e.hasMoreSearchThreads?[e._v("No more results")]:e._e()],2)],1)],1)],1),e._v(" "),n("SplitPanel",{attrs:{sizing:"fixed",frac:e.sidebarFrac,"min-frac":150,"max-frac":500},on:{"update:frac":function(t){e.sidebarFrac=t}}},[n("ScrollView",{staticClass:"dissch-sidebar-scroll"},[n("SearchSidebar")],1)],1)],1):e._e()],1)])])}),[],!1,null,null,null).exports);function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oe={name:"DiscussIndexFull",inject:["keyboardShortcutManager"],directives:{ClickOutside:c.a},components:{Icon:u.a,Drawer:p,Split:f.a,SplitPanel:m.a,ContextMenuTrigger:v.a,ContextMenuItem:b.a,SidebarContainer:O,ThreadFeed:Y,NewThreadButton:X,Search:Ce},props:{threadList:{type:Object,required:!0},threadFeedMessageHeading:{type:null,required:!0,validator:function(e){return null==e||"string"==typeof e}},threadFeedMessageBody:{type:null,required:!0,validator:function(e){return null==e||"string"==typeof e}}},data:function(){return{drawerOpen:!1,filtersMenuVisible:!1,splitPanelSidebarFrac:200,splitPanelThreadsFrac:350,splitPanelViewFrac:1}},computed:je({},Object(a.e)(["isLarge","course","realm"]),{},Object(a.e)("discuss",["filter"]),{},Object(o.h)("discuss",{searchQuery:l.c.SET_SEARCH_QUERY,searchVisible:l.c.SET_SEARCH_VISIBLE}),{},Object(a.c)("discuss",["filters"]),{othersOnlineCount:function(){return Math.max(0,this.course.userOnlineCount-1)},selectedFilterItem:function(){var e=this;return this.filters.find((function(t){return t.filter===e.filter}))}}),created:function(){this.disposable=this.keyboardShortcutManager.register("/",this.toggleSearch,{description:"Toggle thread search"})},destroyed:function(){this.disposable.dispose()},methods:je({},Object(a.d)("discuss",{toggleFilter:l.c.TOGGLE_FILTER}),{loadMoreThreads:function(){this.$emit("load-more-threads")},openDrawer:function(){var e=this;setTimeout((function(){e.drawerOpen=!0}))},toggleSearch:function(){this.searchVisible=!this.searchVisible}})},Se=(n("b/5E"),Object(h.a)(Oe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Drawer",{directives:[{name:"click-outside",rawName:"v-click-outside",value:function(){return e.drawerOpen=!1},expression:"() => drawerOpen = false"}],staticClass:"discuss-index-full",attrs:{open:e.drawerOpen},on:{"update:open":function(t){e.drawerOpen=t}},scopedSlots:e._u([e.isLarge?{key:"drawer",fn:function(){return[n("div",{staticClass:"dif-drawer-layout"},[n("div",{staticClass:"dif-drawer-header"},[n("button",{staticClass:"dif-tf-header-hamburger",on:{click:function(t){e.drawerOpen=!1}}},[n("Icon",{attrs:{icon:"hamburger"}})],1)]),e._v(" "),n("SidebarContainer",{staticClass:"dif-drawer-sidebar",attrs:{"online-count":e.othersOnlineCount}})],1)]},proxy:!0}:null],null,!0)},[n("Split",{staticClass:"dif-split",attrs:{orientation:"horizontal",theme:"light","persist-id":"discussIndex"},nativeOn:{click:function(t){e.drawerOpen=!1}}},[e.isLarge?e._e():n("SplitPanel",{key:"sidebar",staticClass:"dif-split-panel-sidebar",attrs:{frac:e.splitPanelSidebarFrac,"min-frac":160,"max-frac":250,priority:10,sizing:"fixed",collapsable:"","collapsed-text":"Sidebar"},on:{"update:frac":function(t){e.splitPanelSidebarFrac=t}}},[n("div",{staticClass:"dif-sidebar-embedded-layout"},["active"===e.course.status?n("div",{staticClass:"dif-sidebar-embedded-new-thread-layout"},[n("NewThreadButton",{staticClass:"dif-sidebar-new-thread"})],1):e._e(),e._v(" "),n("SidebarContainer",{staticClass:"dif-sidebar-embedded",attrs:{"online-count":e.othersOnlineCount}})],1)]),e._v(" "),n("SplitPanel",{key:"threads",attrs:{frac:e.splitPanelThreadsFrac,"min-frac":250,"max-frac":450,priority:20,sizing:"fixed",collapsable:"","collapsed-text":"Threads"},on:{"update:frac":function(t){e.splitPanelThreadsFrac=t}}},[n("div",{staticClass:"dif-tf-container"},[n("div",{staticClass:"dif-tf-header dif-tf-header-lg media-lg"},[n("button",{staticClass:"dif-tf-header-hamburger",attrs:{title:e.$t("toggleMenu")},on:{click:e.openDrawer}},[n("Icon",{attrs:{icon:"hamburger"}})],1),e._v(" "),"active"===e.course.status?n("NewThreadButton"):e._e()],1),e._v(" "),n("div",{staticClass:"dif-tf-body"},[n("div",{staticClass:"dif-tf-header"},[n("div",{staticClass:"dif-search-container",class:{active:e.searchQuery}},[n("Icon",{attrs:{icon:"search"}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],staticClass:"dif-search-input",attrs:{"aria-label":e.$t("searchInput"),placeholder:e.$t("searchInput")},domProps:{value:e.searchQuery},on:{keydown:[function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.searchQuery=""},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.searchVisible=!0}],input:[function(t){t.target.composing||(e.searchQuery=t.target.value)},function(t){e.searchVisible=!0}],click:function(t){e.searchVisible=!0}}}),e._v(" "),e.searchQuery?n("button",{staticClass:"dif-search-clear",on:{click:function(t){e.searchQuery=""}}},[n("Icon",{attrs:{icon:"cross"}})],1):e._e()],1)]),e._v(" "),n("div",{staticClass:"dif-tf-actions"},[n("ContextMenuTrigger",{attrs:{active:e.filtersMenuVisible},on:{"update:active":function(t){e.filtersMenuVisible=t}},scopedSlots:e._u([{key:"trigger",fn:function(t){var s=t.trigger,i=t.attrs;return[n("button",e._b({staticClass:"dis-tl-action",class:{active:e.filtersMenuVisible},on:{click:s}},"button",i,!1),[null===e.filter?n("strong",[e._v(e._s(e.$t("discussion.filterMenu.filter")))]):n("I18n",{attrs:{path:"discussion.filterMenu.filteredBy"},scopedSlots:e._u([{key:"filter",fn:function(){return[n("strong",[e._v(e._s(e.selectedFilterItem.label))])]},proxy:!0}],null,!0)}),e._v(" "),n("Icon",{attrs:{icon:"chevron-down"}})],1)]}},{key:"items",fn:function(){return e._l(e.filters,(function(t){return n("ContextMenuItem",{key:t.filter,attrs:{text:t.label,checked:e.filter===t.filter},on:{click:function(n){return e.toggleFilter(t.filter)}}})}))},proxy:!0}])})],1),e._v(" "),n("ThreadFeed",{staticClass:"dif-tf",attrs:{threads:e.threadList.threads,sorted:!e.threadList.query,course:e.course,realm:e.realm,"message-heading":e.threadFeedMessageHeading,"message-body":e.threadFeedMessageBody},on:{"load-more":e.loadMoreThreads}})],1)])]),e._v(" "),n("SplitPanel",{key:"view",attrs:{frac:e.splitPanelViewFrac},on:{"update:frac":function(t){e.splitPanelViewFrac=t}}},[n("div",{staticClass:"dif-content"},[n("RouterView",{attrs:{"thread-list":e.threadList}})],1)])],1),e._v(" "),e._v(" "),e.searchVisible?n("Search",{on:{close:function(t){e.searchVisible=!1}}}):e._e()],1)}),[],!1,null,null,null).exports),Ee=n("wLLz"),Te=n("9asc"),Ie=n("hFFH");function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var Pe={components:{ActionSheet:Ee.a,ActionSheetGroup:Te.a,ActionSheetItem:Ie.a},data:function(){return{filterSheetOpen:!1,categorySheetOpen:!1,subcategorySheetOpen:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(a.e)(["course"]),{},Object(a.e)("discuss",["filter","category","subcategory"]),{},Object(a.c)("discuss",["categories","filters"]),{filterItem:function(){var e=this;return this.filters.find((function(t){return t.filter===e.filter}))},subcategories:function(){return this.category?this.category.subcategories:[]}}),methods:{toggleFilter:function(e){this.filterSheetOpen=!1,this.$store.commit("discuss/"+l.c.TOGGLE_FILTER,e)},toggleCategory:function(e){this.categorySheetOpen=!1,this.$store.commit("discuss/"+l.c.TOGGLE_CATEGORY,e)},toggleSubcategory:function(e){this.subcategorySheetOpen=!1,this.$store.commit("discuss/"+l.c.TOGGLE_SUBCATEGORY,e)}}},Ae=(n("ITSU"),Object(h.a)(Pe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"discuss-filter-tabs"},[n("button",{staticClass:"dft-tab",class:{"dft-tab-active":e.filter&&e.filterItem},on:{click:function(t){e.filterSheetOpen=!0}}},[e.filter&&e.filterItem?n("div",{staticClass:"dft-tab-heading"},[e._v("Filter")]):e._e(),e._v(" "),n("div",{staticClass:"dft-tab-text"},[e._v(e._s(e.filter&&e.filterItem?e.filterItem.label:"Filter"))])]),e._v(" "),n("button",{staticClass:"dft-tab",class:{"dft-tab-active":e.category},on:{click:function(t){e.categorySheetOpen=!0}}},[e.category?n("div",{staticClass:"dft-tab-heading"},[e._v("Category")]):e._e(),e._v(" "),n("div",{staticClass:"dft-tab-text"},[e._v(e._s(e.category?e.category.name:"Category"))])]),e._v(" "),e.subcategory||e.subcategories.length?n("button",{staticClass:"dft-tab",class:{"dft-tab-active":e.subcategory},on:{click:function(t){e.subcategorySheetOpen=!0}}},[e.subcategory?n("div",{staticClass:"dft-tab-heading"},[e._v("Subcategory")]):e._e(),e._v(" "),n("div",{staticClass:"dft-tab-text"},[e._v(e._s(e.subcategory?e.subcategory:"Subcategory"))])]):e._e(),e._v(" "),e.filterSheetOpen?n("ActionSheet",{on:{close:function(t){e.filterSheetOpen=!1}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("ActionSheetGroup",[n("ActionSheetItem",{attrs:{text:"Cancel",type:"cancel"},on:{click:function(t){e.filterSheetOpen=!1}}})],1)]},proxy:!0}],null,!1,2745589697)},[n("ActionSheetGroup",e._l(e.filters,(function(t){return n("ActionSheetItem",{key:t.filter,attrs:{text:t.label,checked:t.filter===e.filter},on:{click:function(n){return e.toggleFilter(t.filter)}}})})),1)],1):e._e(),e._v(" "),e.categorySheetOpen?n("ActionSheet",{on:{close:function(t){e.categorySheetOpen=!1}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("ActionSheetGroup",[n("ActionSheetItem",{attrs:{text:"Cancel",type:"cancel"},on:{click:function(t){e.categorySheetOpen=!1}}})],1)]},proxy:!0}],null,!1,1825881841)},[n("ActionSheetGroup",e._l(e.categories,(function(t){return n("ActionSheetItem",{key:t.name,attrs:{text:t.name,checked:e.category===t},on:{click:function(n){return e.toggleCategory(t)}}})})),1)],1):e._e(),e._v(" "),e.subcategorySheetOpen?n("ActionSheet",{on:{close:function(t){e.subcategorySheetOpen=!1}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("ActionSheetGroup",[n("ActionSheetItem",{attrs:{text:"Cancel",type:"cancel"},on:{click:function(t){e.subcategorySheetOpen=!1}}})],1)]},proxy:!0}],null,!1,57514037)},[n("ActionSheetGroup",e._l(e.subcategories,(function(t){return n("ActionSheetItem",{key:t,attrs:{text:t,checked:e.subcategory===t},on:{click:function(n){return e.toggleSubcategory(t)}}})})),1)],1):e._e()],1)}),[],!1,null,null,null).exports);function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var Re={name:"DiscussIndexCompact",components:{Icon:u.a,Spinner:ee.a,PopupLayer:se.a,FadeTransition:Z.a,ThreadFeed:Y,FilterTabs:Ae},props:{threadList:{type:Object,required:!0},searching:{type:Boolean,required:!0},threadFeedMessageHeading:{type:String,default:void 0},threadFeedMessageBody:{type:String,default:void 0}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(a.e)(["course","realm"]),{},Object(o.h)("discuss",{searchQuery:l.c.SET_SEARCH_QUERY}),{indexRouteActive:function(){return"discuss-index"===this.$route.name||"discuss-landing"===this.$route.name}}),methods:{loadMoreThreads:function(){this.$emit("load-more-threads")},toggleSearch:function(){this.$emit("toggle-search")}}},Me=(n("mc3f"),Object(h.a)(Re,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"discuss-index-compact"},[e.indexRouteActive?[n("FilterTabs",{staticClass:"dic-filter-tabs"}),e._v(" "),n("ThreadFeed",{attrs:{threads:e.threadList.threads,sorted:!e.threadList.query,course:e.course,realm:e.realm,"message-heading":e.threadFeedMessageHeading,"message-body":e.threadFeedMessageBody},on:{"load-more":e.loadMoreThreads}}),e._v(" "),n("PopupLayer",[n("FadeTransition",{attrs:{duration:.2}},[e.searching?n("form",{staticClass:"dic-search",attrs:{action:"",method:"POST"},on:{submit:function(e){e.preventDefault()}}},[n("Icon",{staticClass:"dic-search-icon",attrs:{icon:"search"}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],ref:"search",staticClass:"dic-search-input",attrs:{type:"search",placeholder:e.$t("searchInput")},domProps:{value:e.searchQuery},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.toggleSearch(t)},input:function(t){t.target.composing||(e.searchQuery=t.target.value)}}}),e._v(" "),n("Spinner",{directives:[{name:"show",rawName:"v-show",value:e.threadList.loading,expression:"threadList.loading"}],staticClass:"dic-search-spinner"}),e._v(" "),n("div",{staticClass:"dic-search-cancel",on:{click:e.toggleSearch}},[e._v("Cancel")])],1):e._e()])],1)]:e._e(),e._v(" "),"discuss-landing"!==e.$route.name?n("RouterView",{staticClass:"dic-router-view",attrs:{"thread-list":e.threadList}}):e._e()],2)}),[],!1,null,null,null).exports),Le={name:"DiscussIndexAccessible",components:{EdButton:n("4K9I").a},props:{threadList:{type:Object,required:!0}},computed:{indexRouteActive:function(){return"discuss-index"===this.$route.name||"discuss-landing"===this.$route.name}},methods:{loadMore:function(){this.$emit("load-more-threads")}}},Fe=(n("mn5C"),Object(h.a)(Le,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"discuss-index-accessible"},[e.indexRouteActive?n("div",{staticClass:"dia-container"},[n("EdButton",{attrs:{to:{name:"discuss-new"}}},[e._v("New Thread")]),e._v(" "),n("h1",[e._v("Threads")]),e._v(" "),n("div",{staticClass:"dia-thread-list"},[e._l(e.threadList.threads,(function(t){return n("RouterLink",{key:t.id,staticClass:"dia-tl-item",attrs:{to:{name:"discuss-show",params:{threadId:t.id}}}},[e._v("\n\t\t\t\t"+e._s(t.title)+"\n\t\t\t")])})),e._v(" "),e.threadList.hasMoreResults?n("EdButton",{on:{click:e.loadMore}},[e._v("Load More")]):e._e()],2)],1):n("RouterView",{attrs:{"thread-list":e.threadList}})],1)}),[],!1,null,null,null).exports),Be=n("clw3"),qe=n("/Yj0"),$e=(n("ma9I"),n("XbcX"),n("4mDm"),n("c9m3"),n("Tskq"),n("zKZe"),n("07d7"),n("PKPk"),n("3bBZ"),n("o0o1")),Ue=n.n($e),ze=(n("ls82"),n("HaE+")),Ve=n("1OyB"),He=n("vuIU"),We=n("Kw5r");function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ye=function(){function e(t,n){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(Ve.a)(this,e),s=Ke({limit:30},s),this.discussApi=t,this.emitter=new Be.c,this.threadsMap=new Map,this.threads=[],this.courseId=n,this.limit=s.limit,this.loading=!1,this.resetState=!1,this.reset("",null,null,null)}var t,n,s;return Object(He.a)(e,[{key:"onError",value:function(e){return this.emitter.on("error",e)}},{key:"onReset",value:function(e){return this.emitter.on("reset",e)}},{key:"getThread",value:function(e){return this.threadsMap.get(e)}},{key:"putThread",value:function(e){var t=this.threadsMap.get(e.id);if(t){for(var n=0,s=Object.keys(e);n<s.length;n++){var i=s[n];"is_seen"===i&&t.is_seen||We.default.set(t,i,e[i])}return t}return this.threadsMap.set(e.id,e),e}},{key:"prependThread",value:function(e){var t=this.getThread(e.id);return e=this.putThread(e),t||this.threads.unshift(e),e}},{key:"updateThread",value:function(e){var t=this.getThread(e.id);return!!t&&(Object.assign(t,e),!0)}},{key:"removeThread",value:function(e){for(var t=0;t<this.threads.length;t++)if(this.threads[t].id===e)return this.threads.splice(t,1),this.threadsMap.delete(e),!0;return!1}},{key:"reset",value:function(e,t,n,s){this.resetState=!0,this.query=e,this.filter=t,this.category=n,this.subcategory=s,this.offset=0,this.hasMoreResults=!0}},{key:"getThreadRequestData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.offset,n=e.limit;return{query:this.query,filter:this.filter,category:this.category,subcategory:this.subcategory,sort:this.query?void 0:"date",sortAscending:!!this.query&&void 0,offset:null!=t?t:this.offset,limit:null!=n?n:this.limit}}},{key:"loadMore",value:(s=Object(ze.a)(Ue.a.mark((function e(){var t,n;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasMoreResults){e.next=2;break}return e.abrupt("return");case 2:if(t=this.getThreadRequestData(),!this.loading){e.next=6;break}return this.pendingRequestData=t,e.abrupt("return");case 6:this.loading=!0,e.prev=7;case 8:if(!t){e.next=17;break}return n=this.resetState,this.resetState=null,e.next=13,this.loadMoreInternal(t,n);case 13:t=this.pendingRequestData,this.pendingRequestData=null,e.next=8;break;case 17:return e.prev=17,this.loading=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[7,,17,20]])}))),function(){return s.apply(this,arguments)})},{key:"loadMoreInternal",value:(n=Object(ze.a)(Ue.a.mark((function e(t,n){var s,i,r,a,o,l,c=this;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=[],i=0;case 2:if(!(i<5)){e.next=22;break}return r=void 0,e.prev=4,e.next=7,this.discussApi.getThreads(this.courseId,t);case 7:r=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),this.emitter.emit("error"),e.abrupt("return");case 14:if(s.push.apply(s,Object(le.a)(r)),r.length&&"date"===t.sort&&!t.sortAscending&&s.reduce((function(e,t){return e+(t.is_pinned?0:1)}),0)<t.limit){e.next=18;break}return e.abrupt("break",22);case 18:t=Ke({},t,{offset:t.offset+r.length});case 19:i++,e.next=2;break;case 22:for(this.hasMoreResults=s.length>0,this.hasMoreResults&&(this.offset+=s.length),n&&(this.threads.splice(0,this.threads.length),this.emitter.emit("reset")),a=function(){var e=l[o];e=c.putThread(e),c.threads.find((function(t){return t.id===e.id}))||c.threads.push(e)},o=0,l=s;o<l.length;o++)a();case 27:case"end":return e.stop()}}),e,this,[[4,10]])}))),function(e,t){return n.apply(this,arguments)})},{key:"refresh",value:(t=Object(ze.a)(Ue.a.mark((function e(){var t,n,s,i,r,a,o=this;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],s=Math.min(1e3,this.threads.length);s>0;s-=100)n.push(Math.min(100,s));return e.next=6,g.promiseMap(n,(function(e,t){var n=o.getThreadRequestData({offset:100*t,limit:e});return o.discussApi.getThreads(o.courseId,n)}),{concurrency:5});case 6:if(!(i=e.sent).some((function(e){return!e.success}))){e.next=9;break}return e.abrupt("return");case 9:for(r=i.flatMap((function(e){return e.value})),a=0;a<r.length;a++)r[a]=this.putThread(r[a]);(t=this.threads).splice.apply(t,[0,this.threads.length].concat(Object(le.a)(r)));case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Je={name:"DiscussIndex",components:{IndexFull:Se,IndexCompact:Me,IndexAccessible:Fe},inject:["discussApi","eventBus"],data:function(){return{threadList:null,searchUiVisible:!1}},computed:Xe({},Object(a.e)(["course","user","isSmallDevice"]),{},Object(o.h)("discuss",{filter:l.c.SET_FILTER,category:l.c.SET_CATEGORY,subcategory:l.c.SET_SUBCATEGORY,categoryChangedByUser:l.c.SET_CATEGORY_CHANGED_BY_USER,searchQuery:l.c.SET_SEARCH_QUERY}),{},Object(a.c)(["isStaff"]),{},Object(a.c)("discuss",["getThreadUserDisplayName","categories","filters","searchTrigger"]),{appbar:function(){var e=this,t={titleLarge:"%PREV% – ".concat(this.$t("discussion.discussion")),primaryActions:[],secondaryActions:[{icon:"search",handler:function(){return e.showSearch()}}]};return"active"===this.course.status&&t.primaryActions.push({icon:"compose",handler:function(){return e.$router.push({name:"discuss-new"})}}),t},view:function(){return this.user.settings.accessible?"accessible":this.isSmallDevice?"compact":"full"},searching:function(){return this.searchUiVisible||!!this.searchQuery},threadFeedMessageHeading:function(){if(0===this.threadList.threads.length&&!this.threadList.loading){var e=this.searchQuery?"noSearchResults":"noThreads";return this.$t("discussion.list.heading.".concat(e))}},threadFeedMessageBody:function(){return this.threadList.threads.length>0||this.threadList.loading?null:(this.searchQuery&&(e=this.filter?"noThreadsWithSearchQueryAndFilter":"noThreadsWithSearchQuery"),this.filter?e="noThreadsWithFilter":this.threadList.loading||(e="noThreads"),e?this.$t("discussion.list.body.".concat(e)):null);var e}}),watch:{course:"update",category:"resetThreadList",subcategory:"resetThreadList",searchQuery:function(e){"compact"===this.view&&(e?this.resetThreadListDebounced():this.resetThreadList())},searchTrigger:function(){this.loadNewSearchDebounced()},filter:function(e){this.resetThreadList();var t=Xe({},this.$route.query);e?t.filter=e:delete t.filter,this.$router.replace({query:t})},filters:{immediate:!0,handler:function(){var e=this;this.filters.find((function(t){return t.filter===e.filter}))||(this.filter=null)}},categories:{immediate:!0,handler:function(){var e=this.$route.query.category||"",t=this.categories.find((function(t){return t.name===e}))||this.categories.find((function(t){return t.name.toLowerCase()===e.toLowerCase()}));if(t){this.category=t,this.category.expanded=!0;var n=this.$route.query.subcategory||"",s=t.subcategories.find((function(e){return e===n}))||t.subcategories.find((function(e){return e.toLowerCase()===n.toLowerCase()}));this.subcategory=s||null,this.categoryChangedByUser=!1}else this.category=null,this.subcategory=null}}},created:function(){this.loadNewSearchDebounced=r()(this.loadNewSearch,500),this.resetThreadListDebounced=r()(this.resetThreadList,500),this.disposables=new Be.a(this.eventBus.on("stream:connected",this.onStreamConnected),this.eventBus.on("stream:thread.new",this.onStreamThreadNew),this.eventBus.on("stream:thread.delete",this.onStreamThreadDelete),this.eventBus.on("stream:thread.update",this.onStreamThreadUpdate),this.eventBus.on("stream:comment.new",this.onStreamCommentNew)),this.course.features.discussion?(this.$route.query.filter&&(this.filter=this.$route.query.filter),this.update()):this.$router.replace({name:"course"})},destroyed:function(){this.loadNewSearchDebounced.cancel(),this.resetThreadListDebounced.cancel(),this.resetSearch(),this.disposables.dispose()},methods:Xe({},Object(a.b)("discuss",{resetSearch:l.a.RESET_SEARCH,loadNewSearch:l.a.LOAD_NEW_SEARCH}),{update:function(){this.threadList=new Ye(this.discussApi,this.course.id),this.resetThreadList(),this.resetSearch()},resetThreadList:function(){this.resetThreadListDebounced.cancel();var e="compact"===this.view?this.searchQuery:"";this.threadList.reset(e,this.filter,this.category&&this.category.name,this.subcategory),this.threadList.loadMore()},onStreamConnected:function(){this.threadList.refresh()},onStreamThreadNew:function(e){var t=this,n=Xe({},e.data.thread);if(n.course_id===this.course.id){var s=this.threadList.getThread(n.id);if(s||(n.comments=[]),this.threadList.prependThread(n),!s&&n.user_id!==this.user.id)qe.b({title:this.$t("discussion.streamNewThread.title.".concat(n.type),{course:this.course.code}),text:this.$t("discussion.streamNewThread.text",{author:this.getThreadUserDisplayName(n),title:n.title})}).action.then((function(e){0===e&&t.$router.push({name:"discuss-show",params:{courseId:n.course_id,threadId:n.id}})}))}},onStreamThreadDelete:function(e){var t=e.data;this.threadList.removeThread(t.threadId)},onStreamThreadUpdate:function(e){var t=e.data;this.threadList.updateThread(t.thread);var n=this.threadList.getThread(t.thread.id);n&&"approved"!==n.approved_status&&!this.isStaff&&this.user.id!==n.user_id&&this.threadList.removeThread(n.id)},onStreamCommentNew:function(e){var t=e.data.comment,n=this.threadList.threads.find((function(e){return e.id===t.thread_id}));n&&(n.reply_count++,t.user_id!==this.user.id&&n.glanced_at&&n.new_reply_count++)},showSearch:function(){this.searchUiVisible=!0},toggleSearch:function(){this.searching?(this.searchUiVisible=!1,this.searchQuery=""):this.searchUiVisible=!0}})},Ze=(n("CI1/"),Object(h.a)(Je,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"discuss-index"},[e.threadList?["accessible"===e.view?n("IndexAccessible",{staticClass:"di-accessible",attrs:{"thread-list":e.threadList},on:{"load-more-threads":function(t){return e.threadList.loadMore()}}}):"compact"===e.view?n("IndexCompact",{attrs:{searching:e.searching,"thread-list":e.threadList,"thread-feed-message-heading":e.threadFeedMessageHeading,"thread-feed-message-body":e.threadFeedMessageBody},on:{"load-more-threads":function(t){return e.threadList.loadMore()},"toggle-search":e.toggleSearch}}):n("IndexFull",{staticClass:"di-full",attrs:{"thread-list":e.threadList,"thread-feed-message-heading":e.threadFeedMessageHeading,"thread-feed-message-body":e.threadFeedMessageBody},on:{"load-more-threads":function(t){return e.threadList.loadMore()}}})]:e._e()],2)}),[],!1,null,null,null));t.default=Ze.exports},sS5e:function(e,t,n){"use strict";n("pNMO"),n("ma9I"),n("TeQF"),n("yXV3"),n("2B1R"),n("5DmW"),n("27RR"),n("tkto"),n("Rm1S"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("L2JU"),l=n("/lWA"),c=n("WmPt"),u=n("YQsj"),d=n("oJzX"),h=n("hSdx"),p=n("9Arg"),f=n("e5Oz"),m=n("4PS8");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var b,g={components:{Icon:c.a,Terminal:u.a,Preview:d.a},mixins:[l.a],inject:["fetch","workspaceApi"],props:{sounds:{type:Boolean,default:!0},preview:{type:Boolean,default:!0}},data:function(){return{loading:!1,termReadonly:!0,state:"loading",status:"Status text",statusVisible:!1,outputFiles:[],previewVisible:!1,previewIndex:0}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.e)(["course"]),{ftrayVisible:function(){return this.outputFiles&&this.outputFiles.length&&"running"!==this.state},previewItems:function(){return this.outputFiles.map((function(e){switch(e.type){case"image":return{type:"image",url:e.url,filename:e.name};case"text":return{type:"text",text:window.atob(e.dataBase64),filename:e.name};case"csv":return{type:"csv",records:f.a(window.atob(e.dataBase64)),filename:e.name};case"pdf":return{type:"pdf",url:e.url,filename:e.name}}})).filter(Boolean)}}),watch:{status:function(e){e&&(this.statusVisible=!0)},state:function(e){e&&(this.statusVisible=!0)}},mounted:function(){this.runSession=null,this.statusHideTimeout=null},destroyed:function(){p.F(!0),this.runSession&&this.runSession.close()},methods:{onTerminalInput:function(e){this.runSession&&this.runSession.sendStdin(e)},onTerminalResized:function(){if(this.$refs.term.resizeToFit(),this.runSession){var e=this.$refs.term.size();this.runSession.sendResize(e.cols,e.rows)}},focus:function(){this.$refs.term.focus()},stop:function(){this.runSession.close(),this.onRunExit("error","Killed by user")},onRunExit:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.runSession&&this.runSession.close(),this.runSession=null,this.termReadonly=!0,this.loading=!1,this.state=e,this.status=t,n){for(var s=[],i=0,r=Object.keys(n);i<r.length;i++){var a=r[i],o=(a.match(/\.([^.]+)$/)||[void 0,""])[1].toLowerCase(),l=h.filenameExtensionToMime.get(o)||"application/octet-stream",c=null;switch(o){case"jpg":case"jpeg":case"gif":case"png":c="image";break;case"txt":c="text";break;case"pdf":c="pdf";break;case"csv":c="csv";break;default:continue}s.push({name:a,mime:l,type:c,dataBase64:n[a],url:"data:".concat(l,";base64,").concat(n[a])})}this.outputFiles=s}null!==this.statusHideTimeout&&(clearTimeout(this.statusHideTimeout),this.statusHideTimeout=null),this.$emit("did-run")},runCode:function(e){var t=this;this.termReadonly=!0,this.loading=!0,this.state="loading",this.status=e.buildCommand?"Building program...":"Waiting for server...",this.$refs.term.reset(),this.$refs.term.resizeToFit(),this.runSession=new m.a(this.fetch),this.runSession.onStart((function(){t.loading=!1,t.termReadonly=!1,t.state="running",t.status="Running",t.statusHideTimeout=setTimeout((function(){return t.statusVisible=!1}),1e3)})),this.runSession.onFrame((function(e){var n=e.data;t.$refs.term.write(n)})),this.runSession.onExit((function(e){var n=e.success,s=e.status,i=e.files;t.onRunExit(n?"success":"error",s,i)}));var n=this.$refs.term.size();switch(e.type){case"snippet":this.runSession.startSnippet(e.buildCommand,e.runCommand,this.course.id,n,e.files);break;case"challenge":this.runSession.startChallenge(e.param,e.commitHash,e.runCommand,n,{userId:e.userId,password:e.password,ipHash:e.ipHash});break;case"submission":this.runSession.startSubmission(e.param,e.runCommand,n,{password:e.password,ipHash:e.ipHash});break;case"solution":this.runSession.startSolution(e.param,e.runCommand,n,{password:e.password,ipHash:e.ipHash});break;default:throw Error("Unknown run type")}this.$emit("will-run")},runDatabase:(b=Object(r.a)(i.a.mark((function e(t,n,s){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.termReadonly=!0,this.loading=!0,this.state="loading",this.status="Waiting for server...",this.$refs.term.reset(),this.$refs.term.resizeToFit(),this.$emit("will-run"),e.prev=7,e.next=10,this.workspaceApi.runDatabase(t,n,s,this.course.id);case 10:r=e.sent,e.next=15;break;case 13:e.prev=13,e.t0=e.catch(7);case 15:this.loading=!1,r?(this.state=r.ok?"success":"error",this.status=r.ok?"Query successful":"Query unsuccessful",this.$refs.term.write(r.result.output)):(this.state="error",this.status="An unexpected error occurred"),this.$emit("did-run");case 18:case"end":return e.stop()}}),e,this,[[7,13]])}))),function(e,t,n){return b.apply(this,arguments)}),onStatusClick:function(){this.statusVisible=!1},fileThumbnailSrc:function(e){switch(e.type){case"image":return e.url;default:return n("wWKM")}},previewOrDownloadFile:function(e){this.preview?(this.previewIndex=this.outputFiles.indexOf(e),this.previewVisible=!0):p.i("data:".concat(e.mime,";base64,").concat(e.dataBase64))},onPreviewClose:function(){this.previewVisible=!1}}},y=(n("8cCn"),n("KHd+")),w=Object(y.a)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"runner",class:"runner-"+e.computedTheme},[n("Terminal",{ref:"term",staticClass:"runner-term",attrs:{readonly:e.termReadonly,sounds:e.sounds},on:{input:e.onTerminalInput,resized:e.onTerminalResized}}),e._v(" "),n("Transition",[e.ftrayVisible?n("div",{staticClass:"runner-ftray"},e._l(e.outputFiles,(function(t,s){return n("div",{key:s,staticClass:"runner-file",on:{click:function(n){return e.previewOrDownloadFile(t)}}},[n("div",{staticClass:"runner-file-icon"},[n("img",{staticClass:"runner-file-icon-img",attrs:{src:e.fileThumbnailSrc(t),draggable:"false"}})]),e._v(" "),n("div",{staticClass:"runner-file-name"},[e._v(e._s(t.name))])])})),0):e._e()]),e._v(" "),n("Transition",[e.statusVisible?n("div",{staticClass:"runner-status",class:e.state,on:{click:e.onStatusClick}},[n("div",{staticClass:"runner-status-icon-container"},[n("TransitionGroup",["loading"===e.state?n("Icon",{key:"loading",staticClass:"runner-status-icon spin",attrs:{icon:"ring"}}):e._e(),e._v(" "),"running"===e.state?n("Icon",{key:"running",staticClass:"runner-status-icon",attrs:{icon:"play"}}):e._e(),e._v(" "),"success"===e.state?n("Icon",{key:"success",staticClass:"runner-status-icon",attrs:{icon:"tick"}}):e._e(),e._v(" "),"error"===e.state?n("Icon",{key:"error",staticClass:"runner-status-icon",attrs:{icon:"clear"}}):e._e()],1)],1),e._v(" "),n("div",{staticClass:"runner-status-text"},[e._v(e._s(e.status))])]):e._e()]),e._v(" "),e.preview&&e.previewVisible?n("Preview",{attrs:{items:e.previewItems,index:e.previewIndex},on:{"update:index":function(t){e.previewIndex=t},close:e.onPreviewClose}}):e._e()],1)}),[],!1,null,null,null);t.a=w.exports},sTk7:function(e,t,n){},sah0:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("4Brf"),n("0oug"),n("ma9I"),n("TeQF"),n("fbCW"),n("yq1k"),n("4mDm"),n("2B1R"),n("Tskq"),n("zKZe"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("JTJg"),n("PKPk"),n("FZtP"),n("3bBZ");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("ODXe"),o=n("KQm4"),l=n("rePB"),c=n("BkRI"),u=n.n(c),d=n("L2JU"),h=n("DF/l"),p=n("4K9I"),f=n("6XG0"),m=n("4cYw"),v=n("IbLZ"),b=n("gD3A"),g=n("ZOv9"),y=n("hNx+"),w=n("+KDJ"),_=n("kvrn"),k=n.n(_),C=n("1OyB"),x=n("vuIU"),j=n("md7G"),O=n("foSv"),S=n("Ji7U"),E=n("loy4"),T=n("hSdx"),I=n("q6QK"),D=n("CkVh"),P=n("dA1T"),A=n("BI+k");function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var R={components:{EdCheck:f.a,EdButton:p.a,Codemirror:I.a,ContextMenuTrigger:D.a,CodemirrorSettingsMenuItems:P.a},props:{enabled:{type:Boolean,default:!1},source:{type:String,default:""}},data:function(){return{isMenuVisible:!1,showInvisibles:E.getObject("botEditor.showInvisibles",!1),detectIndentation:E.getObject("botEditor.detectIndentation",!0),softTabs:E.getObject("botEditor.softTabs",!1),tabSize:E.getObject("botEditor.tabSize",4)}},computed:{buttonText:function(){return"".concat(this.softTabs?"Spaces: ".concat(this.tabSize):"Tabs").concat(this.detectIndentation?" (Auto)":"")}},watch:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},T.generateStorageSyncWatchers(E,{showInvisibles:"botEditor.showInvisibles",detectIndentation:"botEditor.detectIndentation",softTabs:"botEditor.softTabs",tabSize:"botEditor.tabSize"}))},M=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(j.a)(this,Object(O.a)(t).call(this))).enabled=!1,n.source="",n.onSave=e,n}return Object(S.a)(t,e),Object(x.a)(t,[{key:"render",value:function(e){var t=this,n={on:{"update:enabled":function(e){return t.enabled=e},"update:source":function(e){return t.source=e}}};return e(A.a,{key:this.id,attrs:{title:"Bot Source",icon:"javascript",unclosable:!0}},[e(R,k()([{attrs:{enabled:this.enabled,source:this.source},on:{save:this.onSave}},n]))])}}]),t}(w.b),L=R,F=(n("gqwk"),n("KHd+")),B=(Object(F.a)(L,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bot-code"},[n("div",{staticClass:"botco-actions"},[n("EdCheck",{attrs:{label:"Bot enabled",value:e.enabled},on:{input:function(t){return e.$emit("update:enabled",t)}}}),e._v(" "),n("EdButton",{staticClass:"primary",on:{click:function(t){return e.$emit("save")}}},[e._v("\n\t\t\tSave\n\t\t")])],1),e._v(" "),n("Codemirror",{ref:"codemirror",staticClass:"botco-codemirror",attrs:{layout:"fill",filename:".js","line-numbers":"","show-invisibles":e.showInvisibles,"detect-indentation":e.detectIndentation,"tab-size":e.tabSize,"soft-tabs":e.softTabs,value:e.source},on:{input:function(t){return e.$emit("update:source",t)}}}),e._v(" "),n("div",{staticClass:"botco-statusbar"},[n("ContextMenuTrigger",{attrs:{active:e.isMenuVisible,action:"toggle","anchor-y":1,"target-anchor-y":0},on:{"update:active":function(t){e.isMenuVisible=t}},scopedSlots:e._u([{key:"trigger",fn:function(t){var s=t.trigger,i=t.attrs;return[n("button",e._b({staticClass:"botco-statusbar-btn",class:{active:e.isMenuVisible},on:{click:s}},"button",i,!1),[e._v("\n\t\t\t\t\t"+e._s(e.buttonText)+"\n\t\t\t\t")])]}},{key:"items",fn:function(){return[n("CodemirrorSettingsMenuItems",{attrs:{"show-invisibles":e.showInvisibles,"detect-indentation":e.detectIndentation,"soft-tabs":e.softTabs,"tab-size":e.tabSize},on:{"update:showInvisibles":function(t){e.showInvisibles=t},"update:show-invisibles":function(t){e.showInvisibles=t},"update:detectIndentation":function(t){e.detectIndentation=t},"update:detect-indentation":function(t){e.detectIndentation=t},"update:softTabs":function(t){e.softTabs=t},"update:soft-tabs":function(t){e.softTabs=t},"update:tabSize":function(t){e.tabSize=t},"update:tab-size":function(t){e.tabSize=t},convertIndentation:e.$refs.codemirror.convertIndentation}})]},proxy:!0}])})],1)],1)}),[],!1,null,null,null).exports,{components:{Message:n("LnxB").a}}),q=function(e){function t(){return Object(C.a)(this,t),Object(j.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(x.a)(t,[{key:"render",value:function(e){return e(A.a,{key:this.id,attrs:{title:"Documentation",icon:"question",unclosable:!0}},[e(B)])}}]),t}(w.b),$=B,U=(n("/mGf"),Object(F.a)($,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bot-docs"},[n("div",{staticClass:"bot-docs-content"},[n("Message",{attrs:{type:"warning"}},[e._v("\n\t\t\tBots are currently in beta. The API is subject to change.\n\t\t")]),e._v(" "),n("h1",[e._v("Bot Documentation")]),e._v(" "),n("p",[e._v("\n\t\t\tBots allow you to write custom JavaScript code to extend the functionality\n\t\t\tof Ed. Currently Ed offers a Discussion Bot to allow you to validate threads\n\t\t\tbefore they are created or updated.\n\t\t")]),e._v(" "),e._m(0),e._v(" "),n("p",[e._v("\n\t\t\tBot code is executed in a sandboxed context in the client's web browser.\n\t\t\tFor this reason, you should keep your code as simple as possible so\n\t\t\tthat its execution does not hinder the user experience of the webpage.\n\t\t")]),e._v(" "),n("p",[e._v("\n\t\t\tThe bot will be killed if it takes longer than 1 second to respond to\n\t\t\ta function callback.\n\t\t")]),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),e._m(4),e._v(" "),e._m(5),e._v(" "),e._m(6)],1)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("\n\t\t\tFunctions for various tasks can be registered with the "),t("code",[this._v("edBot")]),this._v("\n\t\t\tglobal variable.\n\t\t")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",[t("code",[this._v("edBot.validateThread(fn)")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("code",[this._v("fn")]),this._v(" is a function which will be called before a thread is\n\t\t\tcreated or updated. The return value of this function will determine whether\n\t\t\tthe thread is valid and if any error messages should be displayed to the user.\n\t\t\tThe return value may also be a promise, in which case it will be awaited.\n\t\t")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("code",[this._v("fn")]),this._v(" must accept a single "),t("code",[this._v("data")]),this._v(" argument which is\n\t\t\tan object with the following properties:\n\t\t")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[n("p",[n("code",[e._v("type")]),e._v(": the thread type as a string. It will be one of\n\t\t\t\t\t"),n("code",[e._v("'question'")]),e._v(", "),n("code",[e._v("'post'")]),e._v(" or "),n("code",[e._v("'announcement'")]),e._v(".\n\t\t\t\t")])]),e._v(" "),n("li",[n("p",[n("code",[e._v("title")]),e._v(": the thread title as a string.\n\t\t\t\t")])]),e._v(" "),n("li",[n("p",[n("code",[e._v("category")]),e._v(": the thread category as a string or "),n("code",[e._v("null")]),e._v("\n\t\t\t\t\tif none is selected.\n\t\t\t\t")])]),e._v(" "),n("li",[n("p",[n("code",[e._v("subcategory")]),e._v(": the thread subcategory as a string or "),n("code",[e._v("null")]),e._v("\n\t\t\t\t\tif none is selected.\n\t\t\t\t")])]),e._v(" "),n("li",[n("p",[n("code",[e._v("plaintext")]),e._v(": the thread content in plaintext as a string.\n\t\t\t\t")])]),e._v(" "),n("li",[n("p",[n("code",[e._v("xml")]),e._v(": the formatted thread content as an XML document.\n\t\t\t\t")])]),e._v(" "),n("li",[n("p",[n("code",[e._v("isNew")]),e._v(": "),n("code",[e._v("true")]),e._v(" if the thread is new, otherwise\n\t\t\t\t\t"),n("code",[e._v("false")]),e._v(" if the thread already exists and is being updated.\n\t\t\t\t")])]),e._v(" "),n("li",[n("p",[n("code",[e._v("isPinned")]),e._v(": a boolean value indicating if the thread is pinned.\n\t\t\t\t")])]),e._v(" "),n("li",[n("p",[n("code",[e._v("isPrivate")]),e._v(": a boolean value indicating if the thread is private.\n\t\t\t\t")])]),e._v(" "),n("li",[n("p",[n("code",[e._v("isAnonymous")]),e._v(": a boolean value indicating if the thread is anonymous.\n\t\t\t\t")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("code",[this._v("fn")]),this._v(" can return an object to indicate the validation result.\n\t\t\tIf no object is returned, the thread is assumed to be valid. The object\n\t\t\tcan have the following properties:\n\t\t")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[n("p",[n("code",[e._v("valid")]),e._v(": a boolean value indicating whether the thread is\n\t\t\t\t\tvalid. The thread will not be created or updated if the thread is\n\t\t\t\t\tinvalid.\n\t\t\t\t")])]),e._v(" "),n("li",[n("p",[n("code",[e._v("skippable")]),e._v(": a boolean value indicating whether the student\n\t\t\t\t\tcan post or save the thread when it is invalid. If this value is true\n\t\t\t\t\tthen a button will be displayed onscreen to allow the user to post\n\t\t\t\t\tor save the thread when "),n("code",[e._v("valid")]),e._v(" is false.\n\t\t\t\t")])]),e._v(" "),n("li",[n("p",[n("code",[e._v("errors")]),e._v(": an array of error messages that will be displayed\n\t\t\t\t\tto the user. Each item in the array must be an object with the following\n\t\t\t\t\tproperties:\n\t\t\t\t")]),e._v(" "),n("ul",[n("li",[n("p",[n("code",[e._v("field")]),e._v(": a string value indicating which field is invalid.\n\t\t\t\t\t\t\tValid values are:\n\t\t\t\t\t\t")]),e._v(" "),n("ul",[n("li",[n("p",[n("code",[e._v("'thread'")]),e._v(" (general errors related to the entire thread)")])]),e._v(" "),n("li",[n("p",[n("code",[e._v("'title'")])])]),e._v(" "),n("li",[n("p",[n("code",[e._v("'category'")])])]),e._v(" "),n("li",[n("p",[n("code",[e._v("'subcategory'")])])]),e._v(" "),n("li",[n("p",[n("code",[e._v("'content'")])])])])]),e._v(" "),n("li",[n("p",[n("code",[e._v("message")]),e._v(": the error message as a string.\n\t\t\t\t\t\t")])])])])])}],!1,null,null,null).exports,n("1mnw")),z=n("5/Cn"),V=n("/Yj0"),H=n("/jHr"),W=n("WPpO");function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var K,Y={components:{HeaderContainer:n("t19P").a,EdButton:p.a,EdCheck:f.a,ThreadEditor:W.a},props:{source:{type:String,default:""}},data:function(){return{model:{type:"question",title:"Where does the quick brown fox jump?",category:"",subcategory:"",content:'<document version="1.0"><paragraph>The quick brown fox jumps over the lazy dog.</paragraph></document>',is_pinned:!1,is_private:!1,is_anonymous:!1},isNew:!0,email:!1,errors:[],skippable:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(d.c)("discuss",["categories"])),created:function(){this.model.category=this.categories[0].name},methods:{validate:(K=Object(r.a)(i.a.mark((function e(){var t,n,s,r,a,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.errors=[],e.next=3,U.a(this.source);case 3:if(t=e.sent,!(n=t.error)){e.next=9;break}return e.next=8,z.a({icon:"error",title:"Thread validation bot failed",text:"An error occurred during thread validation.",subtext:"Error: ".concat(n)});case 8:return e.abrupt("return");case 9:return s=this.model,e.next=12,U.b({isNew:this.isNew,type:s.type,title:s.title,plaintext:H.f(s.content),xml:s.content,category:s.category||null,subcategory:s.subcategory||null,isPinned:s.is_pinned,isPrivate:s.is_private,isAnonymous:s.is_anonymous});case 12:if(r=e.sent,a=r.error,o=r.result,this.skippable=o.skippable,!a){e.next=20;break}return e.next=19,z.a({icon:"error",title:"Thread validation bot failed",text:"The thread validation bot was not successful due to an error.",subtext:"Error: ".concat(a)});case 19:return e.abrupt("return");case 20:o.valid?V.b({type:"success",text:"Thread is valid."}):this.errors=o.errors;case 21:case"end":return e.stop()}}),e,this)}))),function(){return K.apply(this,arguments)})}},G=function(e){function t(){var e;return Object(C.a)(this,t),(e=Object(j.a)(this,Object(O.a)(t).call(this))).source="",e}return Object(S.a)(t,e),Object(x.a)(t,[{key:"render",value:function(e){return e(A.a,{key:this.id,attrs:{title:"Tester",icon:"play",unclosable:!0}},[e(Y,{attrs:{source:this.source}})])}}]),t}(w.b),X=Y;n("14EI"),Object(F.a)(X,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("HeaderContainer",{staticClass:"bot-tester",scopedSlots:e._u([{key:"header",fn:function(){return[n("div",{staticClass:"botte-header"},[n("div",{staticClass:"botte-container"},[n("div",{staticClass:"botte-actions"},[n("EdCheck",{attrs:{label:"New thread"},model:{value:e.isNew,callback:function(t){e.isNew=t},expression:"isNew"}}),e._v(" "),n("EdButton",{staticClass:"primary",on:{click:e.validate}},[e._v("Validate")])],1)])])]},proxy:!0}])},[e._v(" "),n("div",{staticClass:"botte-container"},[n("div",{staticClass:"botte-body"},[n("ThreadEditor",{attrs:{value:e.model,email:e.email,errors:e.errors,"error-type":e.skippable?"warning":"error"},on:{"update:email":function(t){e.email=t}}})],1)])])}),[],!1,null,null,null).exports;function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ee,te,ne={name:"BotEditor",components:{PaneLayout:y.a},inject:["courseApi","keyboardShortcutManager"],data:function(){return{layout:new w.a,codeModel:new M(this.save),docsModel:new q,testerModel:new G,saving:!1}},computed:Z({},Object(d.e)(["course"])),watch:{"codeModel.source":function(e){this.testerModel.source=e}},created:function(){this.disposables=this.keyboardShortcutManager.register({default:"Control+s",mac:"Meta+s"},this.save,{description:"Save bot"});var e=this.course.settings.discussion;this.codeModel.enabled=e.bot_enabled,this.codeModel.source=e.bot_source||"\nedBot.validateThread(function (data) {\n\tconst errors = [];\n\n\tif (data.plaintext.length < 50) {\n\t\terrors.push({\n\t\t\tfield: 'content',\n\t\t\tmessage: 'Thread content is too short.',\n\t\t});\n\t}\n\n\treturn {\n\t\tvalid: errors.length === 0,\n\t\terrors: errors,\n\t};\n});\n",this.layout=w.a.deserialize({type:"axis",orientation:"horizontal",children:[{type:"pane",frac:3,selectedIndex:0,items:[this.codeModel]},{type:"pane",frac:2,selectedIndex:0,items:[this.docsModel,this.testerModel]}]})},destroyed:function(){this.disposables.dispose()},methods:{save:(ee=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.saving){e.next=2;break}return e.abrupt("return");case 2:return this.saving=!0,t=Z({},this.course.settings,{discussion:Z({},this.course.settings.discussion,{bot_enabled:this.codeModel.enabled,bot_source:this.codeModel.source})}),e.prev=4,e.next=7,this.courseApi.update(this.course.id,{settings:t});case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(4),V.b({type:"error",text:"Unable to save bot. Try again later."}),e.abrupt("return");case 13:return e.prev=13,this.saving=!1,e.finish(13);case 16:this.course.settings.discussion.bot_enabled=t.discussion.bot_enabled,this.course.settings.discussion.bot_source=t.discussion.bot_source,V.b({type:"success",text:"Bot saved."}),this.$emit("did-save");case 20:case"end":return e.stop()}}),e,this,[[4,9,13,16]])}))),function(){return ee.apply(this,arguments)})}},se=(n("eEzz"),Object(F.a)(ne,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bot-editor"},[n("PaneLayout",{staticClass:"bot-layout",attrs:{layout:e.layout,splittable:""},on:{"update:layout":function(t){e.layout=t}}})],1)}),[],!1,null,null,null).exports),ie=n("JO+Q"),re=n("VYah"),ae=n("YxxY"),oe=n("Dm8+"),le=n("gv/e"),ce={components:{Split:re.a,SplitPanel:ae.a,ListView:oe.a,Amber:b.a,Placeholder:le.a},props:{value:{type:Array,default:function(){return[]}}},data:function(){return{splitPanelListFrac:200,splitPanelBodyFrac:1,selectedCategory:null}},computed:{listViewItems:function(){return this.value.map((function(e){var t=e.category,n=e.template;return{category:t,hasTemplate:n&&!H.c(n)}}))},selectedListViewItem:{get:function(){var e=this;return this.listViewItems.find((function(t){return t.category===e.selectedCategory}))},set:function(e){this.selectedCategory=e&&e.category}},selectedItem:function(){var e=this;return this.value.find((function(t){return t.category===e.selectedCategory}))},selectedTemplate:{get:function(){return this.selectedItem?this.selectedItem.template||H.a:null},set:function(e){this.selectedItem.template=e}}}},ue=(n("MIeZ"),Object(F.a)(ce,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Split",{staticClass:"admin-template-editor",attrs:{orientation:"horizontal"}},[n("SplitPanel",{attrs:{frac:e.splitPanelListFrac,"min-frac":100,"max-frac":300,sizing:"fixed"},on:{"update:frac":function(t){e.splitPanelListFrac=t}}},[n("ListView",{staticClass:"atemped-list",attrs:{items:e.listViewItems,"selected-item":e.selectedListViewItem},on:{"update:selectedItem":function(t){e.selectedListViewItem=t},"update:selected-item":function(t){e.selectedListViewItem=t}},scopedSlots:e._u([{key:"item",fn:function(t){var s=t.item;return[n("div",{staticClass:"atemped-item",class:{"atemped-item-strong":s.hasTemplate}},[e._v("\n\t\t\t\t\t"+e._s(s.category)+"\n\t\t\t\t")])]}}])})],1),e._v(" "),n("SplitPanel",{attrs:{frac:e.splitPanelBodyFrac},on:{"update:frac":function(t){e.splitPanelBodyFrac=t}}},[e.selectedItem?n("Amber",{staticClass:"atemped-amber",model:{value:e.selectedTemplate,callback:function(t){e.selectedTemplate=t},expression:"selectedTemplate"}}):n("Placeholder",{staticClass:"atemped-placeholder"},[e._v("Select a category")])],1)],1)}),[],!1,null,null,null).exports),de=(n("yXV3"),n("TphV")),he=n("2PkB"),pe=n("xtk+"),fe={components:{Split:re.a,SplitPanel:ae.a,Navbar:de.a,NavbarButton:he.a,EdInput:pe.a,ListView:oe.a,Amber:b.a,Placeholder:le.a},props:{value:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1}},data:function(){return{nameId:T.uniqueId(),splitPanelListFrac:200,splitPanelBodyFrac:1,selectedItem:null}},methods:{newItem:function(){var e={name:"",content:H.a},t=[].concat(Object(o.a)(this.value),[e]);this.$emit("input",t),this.selectedItem=e},deleteItem:(te=Object(r.a)(i.a.mark((function e(){var t,n,s=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.b({icon:"warning",title:"Are you sure you want to delete this saved reply?",primaryAction:"Delete"});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:if(-1!==(t=this.value.indexOf(this.selectedItem))){e.next=7;break}return e.abrupt("return");case 7:n=this.value.filter((function(e){return e!==s.selectedItem})),this.$emit("input",n),this.selectedItem=n[Math.min(t,n.length-1)]||null;case 10:case"end":return e.stop()}}),e,this)}))),function(){return te.apply(this,arguments)})}},me=(n("YLae"),Object(F.a)(fe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Split",{staticClass:"admin-saved-replies-editor",attrs:{orientation:"horizontal"}},[n("SplitPanel",{attrs:{frac:e.splitPanelListFrac,"min-frac":100,"max-frac":300,sizing:"fixed"},on:{"update:frac":function(t){e.splitPanelListFrac=t}}},[n("div",{staticClass:"asre-list-layout"},[n("Navbar",{staticClass:"asre-navbar",attrs:{title:"Replies"},scopedSlots:e._u([{key:"right",fn:function(){return[n("NavbarButton",{attrs:{icon:"plus",disabled:e.disabled},on:{action:e.newItem}})]},proxy:!0}])}),e._v(" "),n("ListView",{staticClass:"asre-list",attrs:{items:e.value,"selected-item":e.selectedItem},on:{"update:selectedItem":function(t){e.selectedItem=t},"update:selected-item":function(t){e.selectedItem=t}},scopedSlots:e._u([{key:"item",fn:function(t){var s=t.item;return[n("div",{staticClass:"asre-item"},[e._v("\n\t\t\t\t\t\t"+e._s(s.name||"Untitled")+"\n\t\t\t\t\t")])]}}])})],1)]),e._v(" "),n("SplitPanel",{attrs:{frac:e.splitPanelBodyFrac},on:{"update:frac":function(t){e.splitPanelBodyFrac=t}}},[e.selectedItem?n("div",{staticClass:"asre-layout"},[n("Navbar",{attrs:{title:e.selectedItem.name||"Untitled"},scopedSlots:e._u([{key:"left",fn:function(){return[n("NavbarButton",{attrs:{text:"Delete",disabled:e.disabled},on:{action:e.deleteItem}})]},proxy:!0}],null,!1,4097854794)}),e._v(" "),n("div",{staticClass:"asre-name"},[n("label",{attrs:{for:e.nameId}},[e._v("Name:")]),e._v(" "),n("EdInput",{attrs:{id:e.nameId,disabled:e.disabled},model:{value:e.selectedItem.name,callback:function(t){e.$set(e.selectedItem,"name",t)},expression:"selectedItem.name"}})],1),e._v(" "),n("Amber",{staticClass:"asre-amber",model:{value:e.selectedItem.content,callback:function(t){e.$set(e.selectedItem,"content",t)},expression:"selectedItem.content"}})],1):n("Placeholder",{staticClass:"asre-placeholder"},[e._v("\n\t\t\tCreate or edit a saved reply\n\t\t")])],1)],1)}),[],!1,null,null,null).exports),ve=n("C7dE"),be=(n("zx1U"),Object(F.a)({},(function(e,t){return(0,t._c)("span",{staticClass:"admin-experimental-label",attrs:{title:"This setting may change or be removed in the future."}},[t._v("\n\tExperimental\n")])}),[],!0,null,null,null).exports),ge=n("/wT1");function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _e={name:"AdminDiscussion",inject:["courseApi"],components:{EdButton:p.a,EdCheck:f.a,EdSelect:m.a,EdField:v.a,Amber:b.a,FullscreenModal:g.a,BotEditor:se,DetailHeader:ie.a,TemplateEditor:ue,SavedRepliesEditor:me,CategoriesInput:ve.a,ExperimentalLabel:be},extends:ge.a,data:function(){return{saving:!1,settings:null,languages:h.a,categories:null,templateEditorValue:[],botEditorVisible:!1,savedReplies:[],highlightableLanguages:[{value:"cpp",label:"C/C++",checked:!1},{value:"python",label:"Python",checked:!1},{value:"javascript",label:"JavaScript",checked:!1},{value:"java",label:"Java",checked:!1},{value:"ruby",label:"Ruby",checked:!1},{value:"sql",label:"SQL",checked:!1}]}},computed:we({},Object(d.e)(["course"]),{},Object(d.c)(["isUserAdmin"]),{rejectionTemplate:{get:function(){return this.settings.discussion.rejection_comment_template||H.a},set:function(e){this.settings.discussion.rejection_comment_template=H.c(e)?null:e}}}),watch:{categories:function(e){var t=new Map(e.map((function(e){return[e.name,e.thread_template]}))),n=new Map(this.templateEditorValue.map((function(e){return[e.category,e.template]})));this.templateEditorValue=[].concat(Object(o.a)(Object(o.a)(t).map((function(e){var t=Object(a.a)(e,2),s=t[0],i=t[1];return{category:s,template:n.get(s)||i}}))),Object(o.a)(Object(o.a)(n).filter((function(e){var n=Object(a.a)(e,2),s=n[0],i=n[1];return!t.has(s)&&i&&!H.c(i)})).map((function(e){var t=Object(a.a)(e,2);return{category:t[0],template:t[1]}}))))}},created:function(){this.update()},methods:{update:function(){this.settings=u()(this.course.settings),this.categories=u()(this.settings.discussion.categories),this.savedReplies=this.settings.discussion.saved_replies||[];var e=!0,t=!1,n=void 0;try{for(var s,i=this.highlightableLanguages[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){var r=s.value;r.checked=this.settings.highlightable_languages.includes(r.value)}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},save:function(){var e=Object(r.a)(i.a.mark((function e(){var t,n,s,r,a,o,l,c,d,h=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.botEditorVisible){e.next=2;break}return e.abrupt("return");case 2:if(document.activeElement.blur(),0!==this.categories.length){e.next=5;break}return e.abrupt("return",V.b({type:"error",text:"Categories cannot be empty."}));case 5:for((t={settings:u()(this.settings)}).settings.discussion.categories=this.categories.map((function(e){var t=h.templateEditorValue.find((function(t){return t.category===e.name}));return we({},e,{thread_template:t?t.template:e.thread_template})})),n=!0,s=!1,r=void 0,e.prev=10,a=this.savedReplies[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)(l=o.value).name=l.name||"Untitled";e.next=18;break;case 14:e.prev=14,e.t0=e.catch(10),s=!0,r=e.t0;case 18:e.prev=18,e.prev=19,n||null==a.return||a.return();case 21:if(e.prev=21,!s){e.next=24;break}throw r;case 24:return e.finish(21);case 25:return e.finish(18);case 26:return t.settings.discussion.saved_replies=this.savedReplies,t.settings.highlightable_languages=this.highlightableLanguages.filter((function(e){return e.checked})).map((function(e){return e.value})),this.saving=!0,e.prev=29,e.next=32,this.courseApi.update(this.course.id,t);case 32:c=e.sent,e.next=40;break;case 35:return e.prev=35,e.t1=e.catch(29),d=400===e.t1.status&&"string"==typeof e.t1.data.message?e.t1.data.message:"Unable to save course settings.",V.b({type:"error",text:d}),e.abrupt("return");case 40:return e.prev=40,this.saving=!1,e.finish(40);case 43:V.b({type:"success",text:"Updated course settings."}),Object.assign(this.settings,u()(c.settings)),Object.assign(this.course,u()(c));case 46:case"end":return e.stop()}}),e,this,[[10,14,18,26],[19,,21,25],[29,35,40,43]])})));return function(){return e.apply(this,arguments)}}(),onBotSaved:function(){this.settings.discussion.bot_enabled=this.course.settings.discussion.bot_enabled,this.settings.discussion.bot_source=this.course.settings.discussion.bot_source}}},ke=(n("tCAL"),Object(F.a)(_e,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("DetailHeader",{attrs:{disabled:e.saving},on:{save:e.save}}),e._v(" "),n("h3",{staticClass:"adm"},[e._v("Discussion Features")]),e._v(" "),n("p",[n("EdCheck",{attrs:{label:"Private threads",description:"Enables the option to create threads that are private (visible to the author and staff only)",disabled:e.saving},model:{value:e.settings.discussion.private,callback:function(t){e.$set(e.settings.discussion,"private",t)},expression:"settings.discussion.private"}})],1),e._v(" "),e.isUserAdmin?n("p",[n("EdCheck",{attrs:{label:"Private threads only",description:"All new threads are always made private",disabled:e.saving},model:{value:e.settings.discussion.private_threads_only,callback:function(t){e.$set(e.settings.discussion,"private_threads_only",t)},expression:"settings.discussion.private_threads_only"}})],1):e._e(),e._v(" "),n("p",[n("EdCheck",{attrs:{label:"Private comments",description:"Enables the option for staff to create private comments (visible to staff only)",disabled:e.saving},model:{value:e.settings.discussion.private_comments,callback:function(t){e.$set(e.settings.discussion,"private_comments",t)},expression:"settings.discussion.private_comments"}})],1),e._v(" "),n("p",[n("EdCheck",{attrs:{label:"Anonymous threads",description:"Enables the option to create threads anonymously (the author's name will be hidden)",disabled:e.saving},model:{value:e.settings.discussion.anonymous,callback:function(t){e.$set(e.settings.discussion,"anonymous",t)},expression:"settings.discussion.anonymous"}})],1),e._v(" "),e.settings.discussion.anonymous?n("p",{staticClass:"adm-indented"},[n("EdCheck",{attrs:{label:"Names visible to staff",description:"Staff will be able to see the names of the authors of anonymous threads",value:!e.settings.discussion.anonymous_to_staff,disabled:e.saving},on:{input:function(t){e.settings.discussion.anonymous_to_staff=!t}}})],1):e._e(),e._v(" "),n("p",[n("EdCheck",{attrs:{label:"Deleted threads filter",description:'Adds a "Deleted" filter to the sidebar for staff to view deleted threads',disabled:e.saving},model:{value:e.settings.discussion.deleted,callback:function(t){e.$set(e.settings.discussion,"deleted",t)},expression:"settings.discussion.deleted"}})],1),e._v(" "),n("p",[n("EdCheck",{attrs:{label:"Full announcement emails",description:"Include the announcement text in announcement emails",disabled:e.saving},model:{value:e.settings.discussion.full_announcement_emails,callback:function(t){e.$set(e.settings.discussion,"full_announcement_emails",t)},expression:"settings.discussion.full_announcement_emails"}})],1),e._v(" "),n("p",[n("EdCheck",{attrs:{disabled:e.saving},model:{value:e.settings.discussion.question_reply_placeholder_hidden,callback:function(t){e.$set(e.settings.discussion,"question_reply_placeholder_hidden",t)},expression:"settings.discussion.question_reply_placeholder_hidden"}},[e._v("\n\t\t\tHide comment placeholder box for questions\n\t\t\t"),n("ExperimentalLabel")],1)],1),e._v(" "),n("p",[n("EdCheck",{attrs:{disabled:e.saving,description:"Allows instructors to see other instructors typing a reply to the same thread. Not visible to students."},model:{value:e.settings.discussion.typing_indicator_enabled,callback:function(t){e.$set(e.settings.discussion,"typing_indicator_enabled",t)},expression:"settings.discussion.typing_indicator_enabled"}},[e._v("\n\t\t\tShow instructor answer typing indicator\n\t\t\t"),n("ExperimentalLabel")],1)],1),e._v(" "),n("div",{staticClass:"adm-field"},[n("label",[e._v("Default Snippet Language")]),e._v(" "),n("EdSelect",{staticClass:"adm-field-input",attrs:{disabled:e.saving},model:{value:e.settings.discussion.default_snippet_language,callback:function(t){e.$set(e.settings.discussion,"default_snippet_language",t)},expression:"settings.discussion.default_snippet_language"}},[n("option",{attrs:{value:""}},[e._v("(No default)")]),e._v(" "),e._l(e.languages,(function(t){return n("option",{key:t.extension,domProps:{value:t.extension}},[e._v("\n\t\t\t\t"+e._s(t.language)+"\n\t\t\t")])}))],2)],1),e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Highlightable Languages")]},proxy:!0},{key:"description",fn:function(){return[e._v("Automatically syntax highlight code paragraphs based on the selected languages.")]},proxy:!0}])},[e._v(" "),e._v(" "),n("div",{staticClass:"adm-highlightable-languages"},e._l(e.highlightableLanguages,(function(t){return n("EdCheck",{key:t.value,attrs:{label:t.label,disabled:e.saving},model:{value:t.checked,callback:function(n){e.$set(t,"checked",n)},expression:"l.checked"}})})),1)]),e._v(" "),n("h3",{staticClass:"adm"},[e._v("Categories")]),e._v(" "),n("CategoriesInput",{staticClass:"adm-categories-input",attrs:{disabled:e.saving},model:{value:e.categories,callback:function(t){e.categories=t},expression:"categories"}}),e._v(" "),n("p",[n("EdCheck",{attrs:{label:"Category unselected by default",description:"Requires the user to explicitly select a category before they can begin typing the thread content. Recommended if you are using thread templates.",disabled:e.saving},model:{value:e.settings.discussion.category_unselected,callback:function(t){e.$set(e.settings.discussion,"category_unselected",t)},expression:"settings.discussion.category_unselected"}})],1),e._v(" "),n("h3",{staticClass:"adm"},[e._v("Thread Templates")]),e._v(" "),n("p",{staticClass:"adm-description"},[e._v("\n\t\tCustomise the initial content of new threads for each discussion category below.\n\t")]),e._v(" "),n("p",[n("EdCheck",{attrs:{label:"Enabled",disabled:e.saving},model:{value:e.settings.discussion.thread_templates_enabled,callback:function(t){e.$set(e.settings.discussion,"thread_templates_enabled",t)},expression:"settings.discussion.thread_templates_enabled"}})],1),e._v(" "),n("TemplateEditor",{model:{value:e.templateEditorValue,callback:function(t){e.templateEditorValue=t},expression:"templateEditorValue"}}),e._v(" "),n("h3",{staticClass:"adm"},[e._v("Saved Replies")]),e._v(" "),n("p",{staticClass:"adm-description"},[e._v("\n\t\tStore any frequently used replies among course staff to help speed things up.\n\t")]),e._v(" "),n("p",[n("EdCheck",{attrs:{label:"Enabled",disabled:e.saving},model:{value:e.settings.discussion.saved_replies_enabled,callback:function(t){e.$set(e.settings.discussion,"saved_replies_enabled",t)},expression:"settings.discussion.saved_replies_enabled"}})],1),e._v(" "),n("SavedRepliesEditor",{attrs:{disabled:e.saving},model:{value:e.savedReplies,callback:function(t){e.savedReplies=t},expression:"savedReplies"}}),e._v(" "),n("h3",{staticClass:"adm"},[e._v("Moderation")]),e._v(" "),n("p",[n("EdCheck",{attrs:{label:"New threads require approval",description:"New threads posted by students will be hidden from other students until it is approved by a staff member.",disabled:e.saving},model:{value:e.settings.discussion.threads_require_approval,callback:function(t){e.$set(e.settings.discussion,"threads_require_approval",t)},expression:"settings.discussion.threads_require_approval"}})],1),e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Decline thread template")]},proxy:!0},{key:"description",fn:function(){return[e._v("Enter the template for a comment that you can post to the student when declining a thread.")]},proxy:!0}])},[e._v(" "),e._v(" "),n("Amber",{staticClass:"adm-amber",model:{value:e.rejectionTemplate,callback:function(t){e.rejectionTemplate=t},expression:"rejectionTemplate"}})],1),e._v(" "),e.course.features.bots?[n("h3",{staticClass:"adm"},[e._v("Bots")]),e._v(" "),n("p",[n("EdButton",{on:{click:function(t){e.botEditorVisible=!0}}},[e._v("Show Bot Editor")])],1)]:e._e(),e._v(" "),e.botEditorVisible?n("FullscreenModal",{attrs:{title:"Bot Editor"},on:{close:function(t){e.botEditorVisible=!1}}},[n("BotEditor",{on:{"did-save":e.onBotSaved}})],1):e._e()],2)}),[],!1,null,null,null));t.default=ke.exports},sbB0:function(e,t,n){"use strict";var s=n("QmWB");n.n(s).a},sdmS:function(e,t,n){},sefE:function(e,t,n){},sl2b:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var s=n("hSdx");function i(e){switch(e.type){case"quiz-question":return"quiz-question-"+e.question.type;default:return"lesson-slide-"+e.type}}function r(e,t){switch(t){case"none":return"";case"Q1":return"Q".concat(e);case"1)":return"".concat(e,")");case"Question A":return"Question ".concat(Object(s.toAlphaBase)(e-1).toUpperCase());case"a)":return"".concat(Object(s.toAlphaBase)(e-1),")");default:return"Question ".concat(e)}}},sqlK:function(e,t,n){"use strict";var s=n("qyPC");n.n(s).a},svLx:function(e,t,n){},svOY:function(e,t,n){e.exports=n.p+"assets/sketch-eraser.89b01512.svg"},syKy:function(e,t,n){"use strict";n("w3D5");var s=n("KHd+"),i=Object(s.a)({},(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"table-view"},[this._t("default")],2)}),[],!1,null,null,null);t.a=i.exports},t19P:function(e,t,n){"use strict";var s={props:{scrollbarAlwaysVisible:{type:Boolean,default:!1}}},i=(n("pmaU"),n("KHd+")),r=Object(i.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header-container"},[e.$scopedSlots.header?n("header",{staticClass:"header-container-header"},[e._t("header")],2):e._e(),e._v(" "),n("div",{staticClass:"header-container-content"},[n("div",{ref:"content",staticClass:"header-container-scroll",class:{"header-container-scroll-scroll":e.scrollbarAlwaysVisible}},[e._t("default")],2),e._v(" "),e._t("overlay")],2)])}),[],!1,null,null,null);t.a=r.exports},t1TD:function(e,t,n){"use strict";var s,i=n("qJ5K"),r=n("nu3u"),a=n("rePB"),o=n("2U/o"),l=n("rMvd"),c=(n("SYor"),n("zBf9")),u=n("WmPt"),d=n("5G72"),h={components:{Icon:u.a,EdTextarea:d.a},extends:c.a,computed:{computedValue:function(){return this.value||""},feedbackIcon:function(){switch(this.correct){case!0:return"tick";case!1:return"cross"}},feedbackClass:function(){switch(this.correct){case!0:return"correct";case!1:return"incorrect"}},feedbackText:function(){switch(this.correct){case!0:return"Correct";case!1:return this.solution?this.question.regex?"Incorrect, correct answer must match the regular expression ".concat(this.solution):"Incorrect, correct answer is ".concat(this.solution):"Incorrect"}},valid:function(){return""!==this.computedValue.trim()}}},p=(n("vx0q"),n("KHd+")),f=Object(p.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quiz-question-show-sa"},[n("EdTextarea",{staticClass:"qqssa-input",attrs:{value:e.computedValue,readonly:!e.editable},on:{input:function(t){return e.$emit("input",t)}}}),e._v(" "),null!=e.correct?n("div",{staticClass:"qqssa-feedback",class:e.feedbackClass},[n("Icon",{staticClass:"qqssa-fb-icon",attrs:{icon:e.feedbackIcon}}),e._v("\n\t\t"+e._s(e.feedbackText)+"\n\t")],1):e._e()],1)}),[],!1,null,null,null).exports,m=n("d4Fw"),v=n("PXqa"),b=n("LzC0"),g=n("kYGP"),y=n("IbLZ"),w=n("gD3A"),_=n("ltWs"),k=n("/jHr"),C={components:{EdField:y.a,Amber:w.a,AmberDisplay:_.a},extends:c.a,computed:{computedValue:function(){return this.value||{content:null}},hasSolution:function(){return this.solution&&!Object(k.c)(this.solution)},valid:function(){return!0}},methods:{onInput:function(e){this.$emit("input",{content:e})}}},x=(n("6JOT"),Object(p.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quiz-question-show-ge"},[e.editable?n("Amber",{staticClass:"qqsge-amber",attrs:{value:e.computedValue.content},on:{input:e.onInput}}):n("EdField",[n("AmberDisplay",{staticClass:"qqsge-amber-display",attrs:{value:e.computedValue.content}})],1),e._v(" "),null!=e.correct&&e.hasSolution?n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Solution")]},proxy:!0}],null,!1,525193634)},[e._v(" "),n("AmberDisplay",{staticClass:"qqsge-amber-display",attrs:{value:e.solution}})],1):e._e()],1)}),[],!1,null,null,null).exports),j=n("E2AO"),O=(s={},Object(a.a)(s,j.a.TYPE_MULTIPLE_CHOICE,o.a),Object(a.a)(s,j.a.TYPE_TRUE_FALSE,l.a),Object(a.a)(s,j.a.TYPE_SHORT_ANSWER,f),Object(a.a)(s,j.a.TYPE_WORDCLOUD,f),Object(a.a)(s,j.a.TYPE_NUMERICAL,m.a),Object(a.a)(s,j.a.TYPE_REORDER,v.a),Object(a.a)(s,j.a.TYPE_HOTSPOT,b.a),Object(a.a)(s,j.a.TYPE_SKETCH,g.a),Object(a.a)(s,j.a.TYPE_GENERAL,x),s),S=n("ocVH"),E={components:{FormattedDisplay:i.a,Explanation:r.a},props:{question:{type:Object,required:!0},correct:{type:Boolean,default:void 0},solution:{type:null,default:null},editable:{type:Boolean,default:!0},value:{type:null,default:null},explanationVisible:{type:Boolean,default:!1},spans:{type:Array,default:void 0}},computed:{questionComponent:function(){return O[this.question.type]},hasExplanation:function(){return this.question.explanation&&!S.a(this.question.explanation,this.question.formatted)}}},T=(n("we0M"),Object(p.a)(E,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"quiz-question-show"},[n("FormattedDisplay",{staticClass:"qqshow-content",attrs:{value:e.question.content,formatted:e.question.formatted,spans:e.spans}}),e._v(" "),n(e.questionComponent,{tag:"component",attrs:{question:e.question,correct:e.correct,solution:e.solution,editable:e.editable,value:e.value,spans:e.spans},on:{input:function(t){return e.$emit("input",t)},valid:function(t){return e.$emit("valid",t)}}}),e._v(" "),e.hasExplanation&&e.explanationVisible?n("Explanation",{staticClass:"qqshow-explanation",attrs:{formatted:e.question.formatted,value:e.question.explanation,spans:e.spans}}):e._e()],1)}),[],!1,null,null,null));t.a=T.exports},t2Gm:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("+2oP"),n("ToJy"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("JfAA"),n("UxlC"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("L2JU"),l=n("NC1X"),c=n("IbLZ"),u=n("4cYw"),d=n("hSdx"),h=n("/Yj0");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var f,m={name:"NewCourse",components:{Spinner:l.a,EdField:c.a,EdSelect:u.a},inject:["realmApi","sessionService"],data:function(){return{errorMessage:null,realmId:null,loading:!1,name:"",code:"",year:(new Date).getFullYear().toString(),session:"Semester 1",appbar:{title:"Create Course"}}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.c)(["courseCreationRealms"]),{realms:function(){return this.courseCreationRealms.slice().sort((function(e,t){return d.naturalComparator(e.name,t.name)}))}}),created:function(){0!==this.realms.length?this.realmId=this.realms[0].id:this.$router.replace({name:"dashboard"})},methods:{submit:(f=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.errorMessage=null,this.loading=!0,t=null,e.prev=3,e.next=6,this.realmApi.createCourse(this.realmId,this.code,this.name,this.year,this.session);case 6:t=e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),this.errorMessage=e.t0.data.message,this.loading=!1;case 13:return e.next=15,this.sessionService.logInWithExistingSession();case 15:this.$router.push({name:"course",params:{courseId:t.id}}),h.b({type:"success",title:"Course created",text:"Welcome to ".concat(this.code,".")});case 17:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(){return f.apply(this,arguments)})}},v=(n("xBbn"),n("KHd+")),b=Object(v.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"start-container"},[n("form",{staticClass:"start-form",attrs:{method:"POST",novalidate:""},on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[n("div",{staticClass:"start-title"},[n("RouterLink",{attrs:{to:"/"}},[e._v("Ed")])],1),e._v(" "),e.errorMessage?n("div",{staticClass:"start-message"},[e._v(e._s(e.errorMessage))]):e._e(),e._v(" "),[n("EdField",{staticClass:"start-field conew-field",scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Code")]},proxy:!0}])},[e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],staticClass:"start-input",attrs:{type:"text",name:"code",placeholder:"e.g. CS101",disabled:e.loading,autofocus:""},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}})]),e._v(" "),n("EdField",{staticClass:"start-field conew-field",scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Name")]},proxy:!0}])},[e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"start-input",attrs:{type:"text",name:"name",placeholder:"e.g. Introduction to CS",disabled:e.loading},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),e._v(" "),n("EdField",{staticClass:"start-field conew-field",scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Year")]},proxy:!0}])},[e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.year,expression:"year"}],staticClass:"start-input",attrs:{type:"text",name:"year",disabled:e.loading},domProps:{value:e.year},on:{input:function(t){t.target.composing||(e.year=t.target.value)}}})]),e._v(" "),n("EdField",{staticClass:"start-field conew-field",scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Session")]},proxy:!0}])},[e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.session,expression:"session"}],staticClass:"start-input",attrs:{type:"text",disabled:e.loading},domProps:{value:e.session},on:{input:function(t){t.target.composing||(e.session=t.target.value)}}})]),e._v(" "),n("EdField",{staticClass:"start-field conew-field",scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Realm")]},proxy:!0}])},[e._v(" "),n("EdSelect",{staticClass:"start-input",attrs:{disabled:1===e.realms.length},model:{value:e.realmId,callback:function(t){e.realmId=t},expression:"realmId"}},e._l(e.realms,(function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v("\n\t\t\t\t\t\t"+e._s(t.name)+" – "+e._s(t.domain)+"\n\t\t\t\t\t")])})),0)],1),e._v(" "),n("button",{staticClass:"start-btn",attrs:{type:"submit",disabled:e.loading}},[e._v("\n\t\t\t\tCreate Course\n\t\t\t\t"),e.loading?n("Spinner",{staticClass:"start-spinner"}):e._e()],1)],e._v(" "),e.loading?e._e():n("div",{staticClass:"start-footer"},[n("p",[n("RouterLink",{attrs:{to:{name:"dashboard"}}},[e._v("Back to Dashboard")])],1)])],2)])}),[],!1,null,null,null);t.default=b.exports},t2Ru:function(e,t,n){},t3qq:function(e,t,n){},t4YW:function(e,t,n){},t5yQ:function(e,t,n){"use strict";var s=n("ty2x");n.n(s).a},t9Yz:function(e,t,n){},t9aX:function(e,t,n){"use strict";n("N9s4");var s=n("KHd+"),i=Object(s.a)({},(function(){var e=this.$createElement;this._self._c;return this._m(0)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"typing-indicator"},[t("div",{staticClass:"typi-dot"}),this._v(" "),t("div",{staticClass:"typi-dot"}),this._v(" "),t("div",{staticClass:"typi-dot"})])}],!1,null,null,null);t.a=i.exports},tCAL:function(e,t,n){"use strict";var s=n("O0Ln");n.n(s).a},tK0z:function(e,t,n){},tOAe:function(e,t,n){"use strict";var s=n("OF8v");n.n(s).a},tdKI:function(e,t,n){},tgAN:function(e,t,n){"use strict";var s=n("kBpu");n.n(s).a},tjHA:function(e,t,n){"use strict";n("nGoB");var s=n("KHd+"),i=Object(s.a)({},(function(){var e=this,t=e.$createElement;return(e._self._c||t)("button",{staticClass:"ed-button-link",on:{click:function(t){return e.$emit("click",t)}}},[e._t("default")],2)}),[],!1,null,null,null);t.a=i.exports},"tm+e":function(e,t,n){},tnfy:function(e,t,n){},trdX:function(e,t,n){},ttSX:function(e,t,n){},tveO:function(e,t,n){"use strict";var s=n("3tig");n.n(s).a},twYO:function(e,t,n){e.exports=n.p+"assets/resize-corner.b3899769.svg"},ty2x:function(e,t,n){},tyFN:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("TeQF"),n("2B1R"),n("5DmW"),n("27RR"),n("tkto"),n("SYor"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("L2JU"),l=n("xqs2"),c=n("clw3"),u=n("/jHr"),d=n("5/Cn"),h=n("/Yj0"),p=n("VYah"),f=n("YxxY"),m=n("WmPt");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var b={public:{icon:"hash",tooltip:"Public Channel"},private:{icon:"lock",tooltip:"Private Channel"},staff:{icon:"diamond",tooltip:"Staff Channel"}},g={functional:!0,props:{access:{type:String,required:!0}},render:function(e,t){var n=b[t.props.access];return n&&e(m.a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.data,{props:{icon:n.icon},attrs:{title:n.tooltip}}))}},y=n("KHd+"),w=Object(y.a)(g,void 0,void 0,!1,null,null,null).exports,_=(n("2mxR"),Object(y.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-loading-anim"},e._l(3,(function(t){return n("div",{key:t,staticClass:"cla-col"},e._l(3,(function(e){return n("div",{key:e,staticClass:"cla-block"})})),0)})),0)}),[],!1,null,null,null).exports),k=(n("4Brf"),n("0oug"),n("4mDm"),n("ToJy"),n("qePV"),n("07d7"),n("B6y2"),n("PKPk"),n("3bBZ"),n("hSdx")),C={components:{DisclosureButton:n("N+tE").a},props:{collapsed:{type:Boolean,default:!1}}},x=(n("ECNf"),Object(y.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-sidebar-group"},[n("div",{staticClass:"csg-content"},[n("DisclosureButton",{staticClass:"csg-disclosure",attrs:{value:!e.collapsed},on:{input:function(t){return e.$emit("update:collapsed",!t)}}},[e._t("default")],2),e._v(" "),n("div",{staticClass:"csg-actions"},[e._t("actions")],2)],1),e._v(" "),e.collapsed?e._e():n("div",{staticClass:"csg-items"},[e._t("items")],2)])}),[],!1,null,null,null).exports),j={components:{ChannelIcon:w},props:{selected:{type:Boolean,default:!1},badgeTooltip:{type:String,default:void 0},access:{type:String,default:void 0}}},O=(n("Pl9R"),Object(y.a)(j,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"chat-sidebar-item",class:{selected:e.selected},on:{click:function(t){return e.$emit("click",t)}}},[e.access?n("ChannelIcon",{staticClass:"csi-icon",attrs:{access:e.access}}):e._e(),e._v(" "),n("span",{staticClass:"csi-content"},[e._t("default")],2),e._v(" "),e.$scopedSlots.badge?n("span",{staticClass:"csi-badge",attrs:{title:e.badgeTooltip}},[e._t("badge")],2):e._e(),e._v(" "),e.$scopedSlots.aside?n("span",{staticClass:"csi-aside"},[e._t("aside")],2):e._e()],1)}),[],!1,null,null,null).exports),S=(n("QpEY"),Object(y.a)({},(function(){var e=this.$createElement;this._self._c;return this._m(0)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"chat-sidebar-placeholder"},[t("div",{staticClass:"csp-search"}),this._v(" "),t("div",[t("div",{staticClass:"csp-block csp-group"}),this._v(" "),t("div",{staticClass:"csp-block csp-item"}),this._v(" "),t("div",{staticClass:"csp-block csp-item"}),this._v(" "),t("div",{staticClass:"csp-block csp-item"}),this._v(" "),t("div",{staticClass:"csp-block csp-item"})])])}],!1,null,null,null).exports),E=n("CkVh"),T=n("Kaxq"),I=n("0XH5");function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A={components:{SidebarGroup:x,SidebarItem:O,SidebarPlaceholder:S,ContextMenuTrigger:E.a,ContextMenuItem:T.a,Icon:m.a,SearchInput:I.a},props:{channelSets:{type:Array,default:function(){return[]}},channels:{type:Array,default:function(){return[]}},selectedChannelId:{type:Number,default:void 0}},data:function(){return{channelSetGroups:{},menuGroup:null,menuChannel:null,searchQuery:""}},computed:P({},Object(o.e)("chat",["status"]),{},Object(o.c)("chat",["getChannelPermissionCreate","channelSetPermissionCreate","getChannelPermissions"]),{computedGroups:function(){var e=this.channelSetGroups,t=this.searchQuery,n=this.getChannelPermissionCreate,s=this.channelSetPermissionCreate;return Object.values(e).map((function(e){return{group:e,canCreateChannel:n("private",e.channelSet&&e.channelSet.selfChannelCreation),canCreateChannelSet:!e.channelSet&&s,filteredChannels:e.channels.filter((function(e){return k.validateSubstrDeep(e,t,"name")}))}})).filter((function(e){return!t||e.filteredChannels.length})).sort(k.compositeComparator((function(e,t){return(null==e.group.channelSet?0:1)-(null==t.group.channelSet?0:1)}),(function(e,t){return k.naturalComparator(e.group.name,t.group.name)})))}}),watch:{channels:"generateGroups",channelSets:"generateGroups"},created:function(){this.generateGroups()},methods:{generateGroups:function(){var e=this.channelSetGroups,t=this.channelSets,n=this.channels,s={0:{channelSet:null,channels:[],name:"Channels",expanded:!0}},i=!0,r=!1,a=void 0;try{for(var o,l=t[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value;s[c.id]=P({},e[c.id]||{expanded:!1},{channelSet:c,channels:[],name:c.name})}}catch(g){r=!0,a=g}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}var u=!0,d=!1,h=void 0;try{for(var p,f=n[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var m=p.value,v=s[m.setId||0];v&&v.channels.push(m)}}catch(g){d=!0,h=g}finally{try{u||null==f.return||f.return()}finally{if(d)throw h}}for(var b in s)s[b].channels.sort((function(e,t){return k.naturalComparator(e.name,t.name)}));this.channelSetGroups=s}}},N=(n("tveO"),Object(y.a)(A,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-sidebar"},["loading"===e.status?n("SidebarPlaceholder"):"error"!==e.status?[n("SearchInput",{staticClass:"csb-search",attrs:{placeholder:"Filter channels"},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),e._v(" "),e._l(e.computedGroups,(function(t){return n("SidebarGroup",{key:t.group.key,attrs:{collapsed:!t.group.expanded},on:{"update:collapsed":function(e){t.group.expanded=!e}},scopedSlots:e._u([{key:"actions",fn:function(){return[t.canCreateChannel||t.canCreateChannelSet?n("ContextMenuTrigger",{attrs:{active:e.menuGroup===t.group},on:{"update:active":function(n){e.menuGroup=n?t.group:null}},scopedSlots:e._u([{key:"trigger",fn:function(s){var i=s.trigger,r=s.attrs;return[n("button",e._b({staticClass:"csb-action",class:{active:e.menuGroup===t.group},on:{click:i}},"button",r,!1),[n("Icon",{attrs:{icon:"plus"}})],1)]}},{key:"items",fn:function(){return[t.canCreateChannel?n("ContextMenuItem",{key:"newChannel",attrs:{text:"New Channel..."},on:{click:function(n){return e.$emit("create-channel",t.group.channelSet)}}}):e._e()]},proxy:!0}],null,!0)}):e._e()]},proxy:!0},{key:"items",fn:function(){return e._l(t.filteredChannels,(function(t){return n("SidebarItem",{key:t.id,attrs:{access:t.access,selected:e.selectedChannelId===t.id,"badge-tooltip":"New Messages"},on:{click:function(n){return e.$emit("update:selectedChannelId",e.selectedChannelId===t.id?null:t.id)}},scopedSlots:e._u([t.unreadCount?{key:"badge",fn:function(){return[e._v(e._s(t.unreadCount))]},proxy:!0}:null,e.selectedChannelId===t.id&&e.getChannelPermissions(t.id).update?{key:"aside",fn:function(){return[n("ContextMenuTrigger",{attrs:{active:e.menuChannel===t},on:{"update:active":function(n){e.menuChannel=n?t:null}},scopedSlots:e._u([{key:"trigger",fn:function(s){var i=s.trigger,r=s.attrs;return[n("button",e._b({staticClass:"csb-action",class:{active:e.menuChannel===t},on:{click:function(e){return e.stopPropagation(),i(e)}}},"button",r,!1),[n("Icon",{attrs:{icon:"more-horiz"}})],1)]}},{key:"items",fn:function(){return[n("ContextMenuItem",{key:"delete",attrs:{text:"Delete Channel..."},on:{click:function(n){return e.$emit("delete-channel",t)}}})]},proxy:!0}],null,!0)})]},proxy:!0}:null],null,!0)},[e._v("\n\t\t\t\t\t"+e._s(t.name)+"\n\n\t\t\t\t\t")])}))},proxy:!0}],null,!0)},[e._v("\n\t\t\t"+e._s(t.group.name)+"\n\n\t\t\t")])}))]:e._e()],2)}),[],!1,null,null,null).exports),R=n("9Arg"),M=n("Pa8A"),L=n("YU3p"),F=n("gD3A"),B=n("UNns"),q=n("nVGi"),$=n("nsxv"),U={computed:{items:function(){return $.map((function(e){return{name:e.name,value:e.value}}))}}},z=(n("kDLI"),Object(y.a)(U,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"emoji-picker"},e._l(e.items,(function(t){return n("button",{key:t.value,staticClass:"emp-item",attrs:{title:t.name},on:{click:function(n){return e.$emit("input",t.value)}}},[e._v("\n\t\t"+e._s(t.value)+"\n\t")])})),0)}),[],!1,null,null,null).exports),V=n("t9aX"),H=n("0EHH"),W=n("oDEV"),Q={directives:{Tooltip:M.a},components:{TextareaEx:L.a,Amber:F.a,Icon:m.a,Popup:B.a,Trigger:q.a,EmojiPicker:z,TypingIndicator:V.a,NameList:H.a,FadeTransition:W.a},props:{value:{type:String,default:""},formatted:{type:Boolean,default:!1},userNamesTyping:{type:Array,default:function(){return[]}}},data:function(){return{emojiPickerVisible:!1}},computed:{valueIsEmpty:function(){return this.formatted?u.c(this.value):!this.value.trim()}},methods:{focus:function(){this.formatted?this.$refs.amber.focus():this.$refs.textarea.focus()},onEmojiInput:function(e){this.emojiPickerVisible=!1,this.formatted?this.$refs.amber.input(e):this.$refs.textarea.input(e),this.focus()},onKeydown:function(e){switch(e.key){case"Enter":!R.u(e)&&this.formatted||(e.preventDefault(),this.$emit("submit"));break;case"Escape":e.preventDefault(),this.$emit("cancel")}}}},K=(n("zsCn"),Object(y.a)(Q,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-inputbar",attrs:{tabindex:"-1"},on:{keydown:e.onKeydown}},[n("div",{staticClass:"chib-input"},[e.formatted?n("Amber",{ref:"amber",staticClass:"chib-amber",attrs:{value:e.value,"non-resizable":""},on:{input:function(t){return e.$emit("input",t)}}}):n("TextareaEx",{ref:"textarea",staticClass:"chib-textarea",attrs:{placeholder:"Post message",value:e.value},on:{input:function(t){return e.$emit("input",t)}},nativeOn:{blur:function(t){return e.$emit("blur")}}})],1),e._v(" "),n("div",{staticClass:"chib-input-actions"},[n("div",{staticClass:"chib-input-actions-group"},[n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Format",expression:"'Format'"}],staticClass:"chib-input-action",class:{active:e.formatted},on:{click:function(t){return e.$emit("update:formatted",!e.formatted)}}},[n("Icon",{attrs:{icon:"text-format"}})],1),e._v(" "),n("Trigger",{attrs:{action:"toggle",active:e.emojiPickerVisible},on:{"update:active":function(t){e.emojiPickerVisible=t}},scopedSlots:e._u([{key:"trigger",fn:function(t){var s=t.trigger,i=t.attrs;return[n("button",e._b({directives:[{name:"tooltip",rawName:"v-tooltip",value:"Emoji",expression:"'Emoji'"}],staticClass:"chib-input-action",class:{active:e.emojiPickerVisible},on:{mousedown:function(e){e.preventDefault()},click:s}},"button",i,!1),[n("Icon",{attrs:{icon:"face"}})],1)]}},{key:"target",fn:function(t){var s=t.targetLeft,i=t.targetTop,r=t.targetWidth,a=t.targetHeight;return[n("Popup",{attrs:{"target-left":s,"target-top":i,"target-width":r,"target-height":a,"clip-mode":"flip","light-dismissable":""},on:{close:function(t){e.emojiPickerVisible=!1}}},[n("EmojiPicker",{staticClass:"chib-emoji-picker",on:{input:e.onEmojiInput},nativeOn:{mousedown:function(e){e.preventDefault()}}})],1)]}}])})],1),e._v(" "),n("div",{staticClass:"chib-actions-group"},[n("FadeTransition",{attrs:{duration:.1}},[e.userNamesTyping.length?n("div",{staticClass:"chib-typing"},[n("TypingIndicator",{staticClass:"chib-typing-indicator"}),e._v(" "),n("span",{staticClass:"chib-typing-names"},[n("NameList",{attrs:{names:e.userNamesTyping}}),e._v("\n\t\t\t\t\t\t"+e._s(e.userNamesTyping.length>1?"are":"is")+" typing\n\t\t\t\t\t")],1)],1):e._e()])],1),e._v(" "),n("div",{staticClass:"chib-input-actions-group"},[e.$scopedSlots.actions?e._t("actions"):n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Send",expression:"'Send'"}],staticClass:"chib-input-action",class:{active:!e.valueIsEmpty},attrs:{disabled:e.valueIsEmpty},on:{click:function(t){return e.$emit("submit")}}},[n("Icon",{attrs:{icon:"send"}})],1)],2)])])}),[],!1,null,null,null).exports),Y=n("kvrn"),G=n.n(Y),X=n("wd/R"),J=n.n(X),Z=n("ZE4w"),ee=n("JBdv"),te=n("NC1X"),ne=n("tjHA"),se={components:{ContextMenuTrigger:E.a,ContextMenuItem:T.a,Icon:m.a},props:{deleted:{type:Boolean,default:!1},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1}},data:function(){return{menuVisible:!1,mouseOver:!1}}},ie=(n("lRrH"),Object(y.a)(se,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-item-wrapper",class:{highlighted:e.mouseOver||e.menuVisible}},[n("div",{staticClass:"ciw-content"},[e.deleted?n("div",{staticClass:"ciw-deleted"},[e._v("Message deleted.")]):e._t("default")],2),e._v(" "),e.deleted||!e.canEdit&&!e.canDelete?e._e():n("ContextMenuTrigger",{attrs:{active:e.menuVisible},on:{"update:active":function(t){e.menuVisible=t}},scopedSlots:e._u([{key:"trigger",fn:function(t){var s=t.trigger,i=t.attrs;return[n("button",e._b({staticClass:"ciw-menu",class:{active:e.menuVisible},on:{click:s,mouseenter:function(t){e.mouseOver=!0},mouseleave:function(t){e.mouseOver=!1}}},"button",i,!1),[n("Icon",{staticClass:"ciw-menu-icon",attrs:{icon:"more-horiz"}})],1)]}},{key:"items",fn:function(){return[e.canEdit?n("ContextMenuItem",{key:"edit",attrs:{text:"Edit"},on:{click:function(t){return e.$emit("edit")}}}):e._e(),e._v(" "),e.canDelete?n("ContextMenuItem",{key:"delete",attrs:{text:"Delete"},on:{click:function(t){return e.$emit("delete")}}}):e._e()]},proxy:!0}],null,!1,4210872889)})],1)}),[],!1,null,null,null).exports),re=n("F3Tp"),ae=n("83PK"),oe={components:{Avatar:re.a,UserRoleLabel:ae.a,DateDisplay:ee.a},props:{name:{type:String,required:!0},role:{type:String,default:void 0},presence:{type:String,default:void 0},date:{type:Object,required:!0}}},le=(n("/qqr"),Object(y.a)(oe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-item-user"},[n("Avatar",{staticClass:"chimu-avatar",attrs:{user:e.name,online:"online"===e.presence||void 0}}),e._v(" "),n("div",{staticClass:"chimu-body"},[n("div",{staticClass:"chimu-user"},[n("span",{staticClass:"chimu-user-name"},[e._v(e._s(e.name))]),e._v(" "),n("UserRoleLabel",{staticClass:"chimu-user-role",attrs:{role:e.role}}),e._v(" "),n("DateDisplay",{staticClass:"chimu-user-date",attrs:{date:e.date,format:"time"}})],1),e._v(" "),e._t("default")],2)],1)}),[],!1,null,null,null).exports),ce=(n("Rm1S"),{components:{AmberDisplay:n("ltWs").a},props:{content:{type:String,required:!0},formatted:{type:Boolean,required:!0}},computed:{isSingleEmoji:function(){var e;try{e=k.tryParseXml(this.amberContent)}catch(a){return!1}var t=e.documentElement;if(1!==t.childNodes.length)return!1;var n=t.firstChild;if("paragraph"!==n.nodeName||1!==n.childNodes.length)return!1;var s=n.firstChild;if(s.nodeType!==Node.TEXT_NODE)return!1;var i=s.nodeValue,r=i.match(k.reEmoji);return!(!r||r[0]!==i)},amberContent:function(){return this.formatted?this.content:u.b(this.content)}}}),ue=(n("dKf3"),Object(y.a)(ce,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"chat-item-message"},[t("AmberDisplay",{staticClass:"cim-amber",class:{"cim-big":this.isSingleEmoji},attrs:{value:this.amberContent}})],1)}),[],!1,null,null,null).exports),de={components:{EdButton:n("4K9I").a,Inputbar:K},props:{value:{type:String,required:!0},formatted:{type:Boolean,required:!0}}},he=(n("Fs0j"),Object(y.a)(de,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-item-message-editor"},[n("Inputbar",{attrs:{value:e.value,formatted:e.formatted},on:{input:function(t){return e.$emit("input",t)},"update:formatted":function(t){return e.$emit("update:formatted",t)},cancel:function(t){return e.$emit("cancel")},submit:function(t){return e.$emit("submit")}},scopedSlots:e._u([{key:"actions",fn:function(){return[n("EdButton",{staticClass:"cime-action",on:{click:function(t){return e.$emit("cancel")}}},[e._v("\n\t\t\t\tCancel\n\t\t\t")]),e._v(" "),n("EdButton",{staticClass:"cime-action primary",on:{click:function(t){return e.$emit("submit")}}},[e._v("\n\t\t\t\tSave\n\t\t\t")])]},proxy:!0}])})],1)}),[],!1,null,null,null).exports),pe={props:{url:{type:String,required:!0}}},fe=(n("xHE8"),Object(y.a)(pe,(function(){var e=this.$createElement;return(this._self._c||e)("img",{staticClass:"chat-item-image",attrs:{src:this.url}})}),[],!1,null,null,null).exports),me={components:{NameList:H.a},props:{names:{type:Array,required:!0}}},ve=(n("6NtP"),Object(y.a)(me,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"chat-item-action"},[t("NameList",{attrs:{names:this.names}}),this._v(" "),this._t("default")],2)}),[],!1,null,null,null).exports);function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var ge,ye={components:{ScrollView:Z.a,DateDisplay:ee.a,Spinner:te.a,EdButtonLink:ne.a,Items:{functional:!0,render:function(e,t){var n=t.parent,s=n.user,i=n.isStaff,r=n.editingEventId,a=n.editingEventInput,o=n.editingEventFormatted;return t.props.items.map((function n(l){switch(l.type){case"user":return e(le,{attrs:{name:l.author.name,role:l.author.courseRole,presence:l.author.presence,date:l.createdAt}},[l.items.map(n)]);case"message":var c=r===l.eventId,u=!c&&(i||l.authorId===s.id);return e(ie,{attrs:{deleted:!!l.deletedAt,canDelete:u,canEdit:u},on:{delete:function(){return t.parent.$emit("itemDelete",l.eventId)},edit:function(){return t.parent.$emit("itemEdit",l.eventId)}}},[function(){if(c){var n={on:{input:function(e){return t.parent.$emit("update:editingEventInput",e)},"update:formatted":function(e){return t.parent.$emit("update:editingEventFormatted",e)},cancel:function(){return t.parent.$emit("itemEditCancel")},submit:function(){return t.parent.$emit("itemEditSave")}}};return e(he,G()([{attrs:{value:a,formatted:o}},n]))}return e(ue,{attrs:{content:l.content,formatted:l.formatted}})}()]);case"image":return e(fe,{attrs:{url:l.url}});case"join":return e(ve,{attrs:{names:l.names}},[" joined the channel"]);case"leave":return e(ve,{attrs:{names:l.names}},[" left the channel"])}}))}},NewMessagesDisplay:{functional:!0,render:function(e,t){var n=t.parent,s=n.unreadCount,i=n.glancedAt,r="";return r+=s+" new ",r+=Object(k.pluralize)(s,"message"),[r+=" since ",e(ee.a,{attrs:{date:i,format:"calendar"}})]}}},props:{events:{type:Array,default:function(){return[]}},itemInterval:{type:Number,default:3e5},unreadCount:{type:Number,default:0},glancedAt:{type:Object,default:null},loading:{type:Boolean,default:!1},hasMore:{type:Boolean,default:!1},editingEventId:{type:Number,default:void 0},editingEventInput:{type:String,default:void 0},editingEventFormatted:{type:Boolean,default:void 0}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.e)(["user"]),{},Object(o.c)(["isStaff"]),{groups:function(){var e,t,n,s,i=this.events,r=this.itemInterval,a=[],o=J()(this.glancedAt).add(10,"seconds"),l=!1,c=function(n){(!t||"user"!==t.type||n.authorId!==t.authorId||n.createdAt-t.createdAt>=r)&&(t={type:"user",createdAt:n.createdAt,authorId:n.author.id,author:n.author,items:[]},e.items.push(t))},u=!0,d=!1,h=void 0;try{for(var p,f=i[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var m=p.value,v=null!=o&&m.createdAt>o;switch(e&&m.createdAt.isSame(e.date,"day")&&l===v||(e={date:m.createdAt,dateDisplay:(n=m.createdAt,s=void 0,s=J()(),n.isSame(s,"day")?"Today":n.year()===s.year()?n.format("dddd, MMMM Do"):n.format("MMMM Do, YYYY")),newBoundary:e&&l!==v,items:[]},a.push(e),t=null),l=v,m.type){case"message":c(m),t.items.push({type:"message",eventId:m.id,authorId:m.authorId,createdAt:m.createdAt,deletedAt:m.deletedAt,content:m.data.content,formatted:m.data.formatted});break;case"image":c(m),t.items.push({type:"image",createdAt:m.createdAt,url:m.url});break;case"join":case"leave":t&&t.type===m.type||(t={type:m.type,createdAt:m.createdAt,names:[]},e.items.push(t)),t.names.push(m.author.name)}}}catch(b){d=!0,h=b}finally{try{u||null==f.return||f.return()}finally{if(d)throw h}}return a}}),methods:{maintainScrollPosition:(ge=Object(r.a)(i.a.mark((function e(t){var n,s,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.$refs.scroll,s=n.$el,r=s.scrollHeight-s.clientHeight-s.scrollTop,e.next=5,t();case 5:return e.next=7,this.$nextTick();case 7:n.setScrollTop(s.scrollHeight-s.clientHeight-r);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return ge.apply(this,arguments)}),onScroll:function(e){var t=e.scrollTop;if(e.user){0===t&&this.$emit("loadMore");var n=this.$refs.scroll.$el;t===n.scrollHeight-n.clientHeight&&this.$emit("glance")}}}},we=(n("pQCh"),Object(y.a)(ye,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ScrollView",{ref:"scroll",staticClass:"chat-chat-view",attrs:{"stick-to-bottom":""},on:{scroll:e.onScroll}},[n("div",{staticClass:"ccv-loading"},[e.loading?n("Spinner",{staticClass:"ccv-loading-spinner"}):e.hasMore?n("EdButtonLink",{staticClass:"ccv-loading-button",on:{click:function(t){return e.$emit("loadMore")}}},[e._v("\n\t\t\tLoad more\n\t\t")]):n("span",{staticClass:"ccv-loading-no-more"},[e._v("Start of messages")])],1),e._v(" "),e._l(e.groups,(function(t,s){return n("div",{key:s,staticClass:"ccv-group"},[n("div",{staticClass:"ccv-divider-line",class:{"ccv-divider-line-new":t.newBoundary}}),e._v(" "),n("div",{staticClass:"ccv-divider-text",class:{"ccv-divider-text-new":t.newBoundary}},[n("span",{staticClass:"ccv-divider-content"},[t.newBoundary?[e._v("New Messages")]:n("DateDisplay",{attrs:{date:t.date}},[e._v(e._s(t.dateDisplay))])],2)]),e._v(" "),n("div",{staticClass:"ccv-container"},[n("Items",{attrs:{items:t.items}})],1)])})),e._v(" "),n("transition",[e.unreadCount?n("header",{staticClass:"ccv-sticky-header"},[n("span",[n("NewMessagesDisplay")],1),e._v(" "),n("button",{staticClass:"ccv-sticky-header-mark",on:{click:function(t){return e.$emit("glance")}}},[e._v("\n\t\t\t\tMark as Read\n\t\t\t")])]):e._e()])],2)}),[],!1,null,null,null).exports),_e={components:{Icon:m.a,Avatar:re.a,SearchInput:I.a,EdButtonLink:ne.a,ContextMenuTrigger:E.a,ContextMenuItem:T.a},props:{channel:{type:Object,required:!0},channelRoles:{type:Array,default:function(){return[]}}},data:function(){return{searchText:"",menuRole:null}},computed:{filteredChannelRoles:function(){var e=this.searchText;return this.channelRoles.filter((function(t){return k.validateSubstrDeep(t.user,e,"name")}))},groups:function(){var e=[],t=[],n=!0,s=!1,i=void 0;try{for(var r,a=this.filteredChannelRoles[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value;"online"===o.user.presence?e.push(o):t.push(o)}}catch(l){s=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}return[{text:"Online (".concat(e.length,")"),channelRoles:e},{text:"Offline",channelRoles:t}].filter((function(e){return e.channelRoles.length}))}},methods:{pluralize:k.pluralize,uninvite:function(e){window.r=e}}},ke=(n("O/Wd"),Object(y.a)(_e,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-channel-members"},[n("header",{staticClass:"ccm-header"},[n("h1",{staticClass:"ccm-heading"},[e._v("Members")]),e._v(" "),n("button",{staticClass:"ccm-close",on:{click:function(t){return e.$emit("close")}}},[n("Icon",{attrs:{icon:"cross"}})],1)]),e._v(" "),n("div",{staticClass:"ccm-message"},["public"===e.channel.access?[e._v("\n\t\t\tThis is a "),n("strong",[e._v("public")]),e._v(" channel. Everyone in the course\n\t\t\thas access to this channel.\n\t\t")]:"staff"===e.channel.access?[e._v("\n\t\t\tThis is a "),n("strong",[e._v("staff")]),e._v(" channel. Only staff have access to\n\t\t\tthis channel.\n\t\t")]:"private"===e.channel.access?[e._v("\n\t\t\tThis is a "),n("strong",[e._v("private")]),e._v(" channel. Users must be invited to\n\t\t\tthe channel.\n\t\t")]:e._e()],2),e._v(" "),"private"===e.channel.access?[n("div",{staticClass:"ccm-message"},[e._v("\n\t\t\tThis channel has "),n("strong",[e._v(e._s(e.channelRoles.length)+" "+e._s(e.pluralize(e.channelRoles.length,"member")))]),e._v(".\n\t\t")]),e._v(" "),n("EdButtonLink",{staticClass:"ccm-button",on:{click:function(t){return e.$emit("invite-users")}}},[e._v("\n\t\t\tInvite Users\n\t\t")]),e._v(" "),n("SearchInput",{staticClass:"ccm-search-input",model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}),e._v(" "),n("div",{staticClass:"ccm-groups"},e._l(e.groups,(function(t){return n("div",{key:t.text},[n("header",{staticClass:"ccm-group-header"},[e._v(e._s(t.text))]),e._v(" "),e._l(t.channelRoles,(function(t){return n("div",{key:t.userId,staticClass:"ccm-user"},[n("Avatar",{staticClass:"ccm-user-avatar",attrs:{user:t.user.name,online:"online"===t.user.presence}}),e._v(" "),n("div",{staticClass:"ccm-user-name"},[e._v(e._s(t.user.name))]),e._v(" "),n("ContextMenuTrigger",{attrs:{active:e.menuRole===t},on:{"update:active":function(n){e.menuRole=n?t:null}},scopedSlots:e._u([{key:"trigger",fn:function(s){var i=s.trigger,r=s.attrs;return[n("button",e._b({staticClass:"ccm-user-menu",class:{active:e.menuRole===t},on:{click:i}},"button",r,!1),[n("Icon",{attrs:{icon:"more-horiz"}})],1)]}},{key:"items",fn:function(){return[n("ContextMenuItem",{key:"uninvite",attrs:{text:"Uninvite"},on:{click:function(t){return e.$emit("uninvite-user",e.menuRole.userId)}}})]},proxy:!0}],null,!0)})],1)}))],2)})),0)]:e._e()],2)}),[],!1,null,null,null).exports);function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var je,Oe,Se,Ee,Te,Ie,De,Pe,Ae,Ne,Re,Me,Le,Fe={components:{Split:p.a,SplitPanel:f.a,Icon:m.a,ChannelIcon:w,LoadingAnim:_,Sidebar:N,Inputbar:K,ChatView:we,ChannelMembers:ke},inject:["chatService","eventBus"],data:function(){return{splitSidebarFrac:220,splitBodyFrac:1,splitChatFrac:1,splitMembersFrac:300,membersVisible:!1,input:"",formatted:!1,memberLimitReached:!1,editingEventId:null,editingEventInput:null,editingEventFormatted:null}},computed:xe({},Object(o.e)("chat",["status","channels","chatEvents"]),{},Object(o.c)("chat",["channelSet","channelSetsList","channelRolesList","channelsList","channel","channelChatEvents","channelPermissions","usersTypingInChannel"]),{channelId:{get:function(){return this.$store.state.chat.channelId},set:function(e){this.$store.commit("chat/"+l.c.SET_CHANNEL_ID,e)}},userNamesTyping:function(){return this.usersTypingInChannel(this.channel.id).map((function(e){return e.name}))}}),watch:{"channel.id":function(e,t){this.update(),null!=t&&this.glanceChannel({channelId:t})}},created:function(){this.disposable=new c.a(this.chatService.onChatEventCreate(this.onChatEventCreate),this.chatService.onChatEventUpdate(this.onChatEventUpdate),this.chatService.onChatEventDelete(this.onChatEventDelete),this.chatService.onChannelCreate(this.onChannelCreate),this.chatService.onChannelUpdate(this.onChannelUpdate),this.chatService.onChannelDelete(this.onChannelDelete),this.chatService.onChannelSetCreate(this.onChannelSetCreate),this.chatService.onChannelSetUpdate(this.onChannelSetUpdate),this.chatService.onChannelSetDelete(this.onChannelSetDelete),this.chatService.onChannelRoleCreate(this.onChannelRoleCreate),this.chatService.onChannelRoleUpdate(this.onChannelRoleUpdate),this.chatService.onChannelRoleDelete(this.onChannelRoleDelete),this.chatService.onChannelStartTyping(this.onChannelStartTyping),this.chatService.onChannelStopTyping(this.onChannelStopTyping),this.chatService.onUserPresence(this.onUserPresence))},destroyed:function(){this.disposable.dispose()},methods:xe({},Object(o.b)("chat",{loadChannelRoles:l.a.LOAD_CHANNEL_ROLES,loadMoreChatEventsAction:l.a.LOAD_MORE_CHAT_EVENTS,postMessage:l.a.POST_MESSAGE,uninviteUsers:l.a.UNINVITE_USERS,startTyping:l.a.START_TYPING,stopTyping:l.a.STOP_TYPING,glanceChannel:l.a.GLANCE_CHANNEL,joinChannel:l.a.JOIN_CHANNEL,leaveChannel:l.a.LEAVE_CHANNEL,updateChatEvent:l.a.UPDATE_CHAT_EVENT,deleteChatEvent:l.a.DELETE_CHAT_EVENT,deleteChannelSetAction:l.a.DELETE_CHANNEL_SET,deleteChannelAction:l.a.DELETE_CHANNEL}),{},Object(o.d)("chat",{mergeChatEvents:l.c.MERGE_CHAT_EVENTS,softDeleteChatEvent:l.c.SOFT_DELETE_CHAT_EVENT,mergeChannels:l.c.MERGE_CHANNELS,removeChannels:l.c.REMOVE_CHANNELS,mergeChannelSets:l.c.MERGE_CHANNEL_SETS,removeChannelSets:l.c.REMOVE_CHANNEL_SETS,mergeChannelRoles:l.c.MERGE_CHANNEL_ROLES,removeChannelRoles:l.c.REMOVE_CHANNEL_ROLES,mergeUsers:l.c.MERGE_USERS,setUserTyping:l.c.SET_USER_TYPING,removeUserTyping:l.c.REMOVE_USER_TYPING,setUserPresence:l.c.SET_USER_PRESENCE,setChannelUnreadCount:l.c.SET_CHANNEL_UNREAD_COUNT,setChannelGlancedAt:l.c.SET_CHANNEL_GLANCED_AT}),{update:(Le=Object(r.a)(i.a.mark((function e(){var t,n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.memberLimitReached=!1,t=this.channel,n=this.channelChatEvents,t){e.next=4;break}return e.abrupt("return");case 4:if(t.glancedAt){e.next=7;break}return e.next=7,this.glance();case 7:if("private"!==t.access){e.next=15;break}return e.prev=8,e.next=11,this.loadChannelRoles({channelId:t.id});case 11:e.next=15;break;case 13:e.prev=13,e.t0=e.catch(8);case 15:if((s=this.channelPermissions).read&&t.hasMoreChatEvents&&!n.length&&this.loadMoreChatEvents(),!s.post){e.next=21;break}return e.next=20,this.$nextTick();case 20:this.$refs.inputbar&&this.$refs.inputbar.focus();case 21:case"end":return e.stop()}}),e,this,[[8,13]])}))),function(){return Le.apply(this,arguments)}),join:(Me=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.joinChannel({channelId:this.channel.id});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),"member_limit"===e.t0.code&&(this.memberLimitReached=!0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(){return Me.apply(this,arguments)}),leave:function(){this.leaveChannel({channelId:this.channel.id})},loadMoreChatEvents:(Re=Object(r.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$refs.chat){e.next=5;break}return e.next=3,this.$refs.chat.maintainScrollPosition(Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadMoreChatEventsAction();case 2:case"end":return e.stop()}}),e)}))));case 3:e.next=7;break;case 5:return e.next=7,this.loadMoreChatEventsAction();case 7:case"end":return e.stop()}}),e,this)}))),function(){return Re.apply(this,arguments)}),glance:(Ne=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.glanceChannel({channelId:this.channel.id});case 1:case"end":return e.stop()}}),e,this)}))),function(){return Ne.apply(this,arguments)}),deleteItem:(Ae=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.b({icon:"warning",title:"Delete message?",text:"This cannot be undone.",primaryAction:"Delete"});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,this.deleteChatEvent(t);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),h.b({type:"error",text:"Unable to delete message."});case 12:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(e){return Ae.apply(this,arguments)}),editItem:function(e){var t=this.chatEvents[e];t&&"message"===t.type&&(this.editingEventId=e,this.editingEventInput=t.data.content,this.editingEventFormatted=t.data.formatted)},cancelEditItem:function(){this.editingEventId=null,this.editingEventInput=null,this.editingEventFormatted=null},saveEditItem:(Pe=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateChatEvent({chatEventId:this.editingEventId,content:this.editingEventInput,formatted:this.editingEventFormatted});case 2:this.editingEventId=null,this.editingEventInput=null,this.editingEventFormatted=null;case 5:case"end":return e.stop()}}),e,this)}))),function(){return Pe.apply(this,arguments)}),deleteChannel:(De=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.b({icon:"warning",title:'Delete channel "'.concat(t.name,'"?'),text:"This cannot be undone.",primaryAction:"Delete"});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:this.deleteChannelAction({channelId:t.id});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return De.apply(this,arguments)}),deleteChannelSet:(Ie=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.b({icon:"warning",title:'Delete channel set "'.concat(t.name,'" and all of its channels?'),text:"This cannot be undone.",primaryAction:"Delete"});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:this.deleteChannelSetAction({setId:t.id});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return Ie.apply(this,arguments)}),onUpdateEditingEventFormatted:(Te=Object(r.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.editingEventFormatted===t){e.next=6;break}return e.next=3,this.toggleFormatting(this.editingEventInput,this.editingEventFormatted);case 3:n=e.sent,this.editingEventInput=n.content,this.editingEventFormatted=n.formatted;case 6:case"end":return e.stop()}}),e,this)}))),function(e){return Te.apply(this,arguments)}),submit:(Ee=Object(r.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.input.trim(),!(this.formatted?u.c(t):!t)){e.next=4;break}return e.abrupt("return");case 4:return this.stopTyping(),e.next=7,this.postMessage({content:t,formatted:this.formatted});case 7:return this.input=this.formatted?u.a:"",e.next=10,this.$nextTick();case 10:(n=this.$refs.chat.$el).scrollTop=n.scrollHeight-n.clientHeight;case 12:case"end":return e.stop()}}),e,this)}))),function(){return Ee.apply(this,arguments)}),onUninviteUser:(Se=Object(r.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.channel.id,e.next=3,d.b({icon:"warning",title:"Uninvite this user?",text:"The user will be removed from the channel.",primaryAction:"Uninvite"});case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this.uninviteUsers({channelId:n,userIds:[t]});case 7:case"end":return e.stop()}}),e,this)}))),function(e){return Se.apply(this,arguments)}),toggleFormatting:(Oe=Object(r.a)(i.a.mark((function e(t,n){var s,r,a,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t,r=n,!n){e.next=14;break}if(a=u.f(t),o=u.b(a),t===o){e.next=10;break}return e.next=8,d.b({icon:"warning",title:"Are you sure you want to convert to plaintext?",text:"You will lose all formatting if you proceed.",primaryAction:"Remove Formatting"});case 8:if(e.sent){e.next=10;break}return e.abrupt("return");case 10:s=a,r=!1,e.next=16;break;case 14:s=u.b(t),r=!0;case 16:return e.abrupt("return",{content:s,formatted:r});case 17:case"end":return e.stop()}}),e)}))),function(e,t){return Oe.apply(this,arguments)}),onUpdateFormatted:(je=Object(r.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.formatted===t){e.next=6;break}return e.next=3,this.toggleFormatting(this.input,this.formatted);case 3:n=e.sent,this.input=n.content,this.formatted=n.formatted;case 6:case"end":return e.stop()}}),e,this)}))),function(e){return je.apply(this,arguments)}),onInput:function(){this.startTyping()},onBlur:function(){this.stopTyping()},onChatEventCreate:function(e){this.mergeChatEvents(e.entities.events),this.mergeUsers(e.entities.users)},onChatEventUpdate:function(e){this.mergeChatEvents(e.entities.events),this.mergeUsers(e.entities.users)},onChatEventDelete:function(e){this.softDeleteChatEvent(e.result)},onChannelCreate:function(e){this.mergeChannels([e])},onChannelUpdate:function(e){this.mergeChannels([e])},onChannelDelete:function(e){this.removeChannels([e.id])},onChannelSetCreate:function(e){this.mergeChannelSets([e])},onChannelSetUpdate:function(e){this.mergeChannelSets([e])},onChannelSetDelete:function(e){this.removeChannelSets([e.id])},onChannelRoleCreate:function(e){this.mergeChannelRoles(e)},onChannelRoleUpdate:function(e){this.mergeChannelRoles(e)},onChannelRoleDelete:function(e){this.removeChannelRoles(e.map((function(e){return e.id})))},onChannelStartTyping:function(e){var t=e.channelId,n=e.userId;this.setUserTyping({channelId:t,userId:n})},onChannelStopTyping:function(e){var t=e.channelId,n=e.userId;this.removeUserTyping({channelId:t,userId:n})},onUserPresence:function(e){this.setUserPresence(e)}})},Be=(n("dYAX"),Object(y.a)(Fe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-chat"},[n("Split",{staticClass:"cch-split-main",attrs:{orientation:"horizontal"}},[n("SplitPanel",{attrs:{frac:e.splitSidebarFrac,sizing:"fixed","min-frac":50,"max-frac":500},on:{"update:frac":function(t){e.splitSidebarFrac=t}}},[n("Sidebar",{staticClass:"cch-sidebar",attrs:{"channel-sets":e.channelSetsList,channels:e.channelsList,"selected-channel-id":e.channelId},on:{"update:selectedChannelId":function(t){e.channelId=t},"update:selected-channel-id":function(t){e.channelId=t},"create-channel-set":function(t){return e.eventBus.emit("chat:create-channel-set")},"delete-channel-set":e.deleteChannelSet,"create-channel":function(t){return e.eventBus.emit("chat:create-channel",t)},"delete-channel":e.deleteChannel}})],1),e._v(" "),n("SplitPanel",{attrs:{frac:e.splitBodyFrac},on:{"update:frac":function(t){e.splitBodyFrac=t}}},[n("div",{staticClass:"cch-content"},["loading"===e.status?n("div",{staticClass:"cch-loading-layout"},[n("LoadingAnim"),e._v(" "),n("div",{staticClass:"cch-loading-text"},[e._v("Loading Chat...")])],1):e.channel?[n("div",{staticClass:"cch-header"},[n("div",{staticClass:"cch-header-title"},[n("ChannelIcon",{staticClass:"cch-header-icon",attrs:{access:e.channel.access}}),e._v(" "),e.channelSet?n("span",{staticClass:"cch-header-channel-set"},[e._v(e._s(e.channelSet.name))]):e._e(),e._v(" "),n("span",{staticClass:"cch-header-channel"},[e._v(e._s(e.channel.name))])],1),e._v(" "),n("div",{staticClass:"cch-header-actions"},[n("button",{staticClass:"cch-header-action",class:{active:e.membersVisible},on:{click:function(t){e.membersVisible=!e.membersVisible}}},[n("Icon",{attrs:{icon:"people"}})],1)])]),e._v(" "),n("Split",{staticClass:"cch-split-channel",attrs:{orientation:"horizontal","invisible-dividers":""}},[n("SplitPanel",{attrs:{frac:e.splitChatFrac},on:{"update:frac":function(t){e.splitChatFrac=t}}},[n("div",{staticClass:"cch-content"},[e.channelPermissions.read&&e.channelChatEvents.length?n("ChatView",{ref:"chat",staticClass:"cch-chat",attrs:{events:e.channelChatEvents,"unread-count":e.channel.unreadCount,"glanced-at":e.channel.glancedAt,loading:!!e.channel.loadChatEventsOperation,"has-more":e.channel.hasMoreChatEvents,"editing-event-id":e.editingEventId,"editing-event-input":e.editingEventInput,"editing-event-formatted":e.editingEventFormatted},on:{"update:editingEventInput":function(t){e.editingEventInput=t},"update:editing-event-input":function(t){e.editingEventInput=t},"update:editingEventFormatted":e.onUpdateEditingEventFormatted,loadMore:e.loadMoreChatEvents,glance:e.glance,itemDelete:e.deleteItem,itemEdit:e.editItem,itemEditCancel:e.cancelEditItem,itemEditSave:e.saveEditItem}}):n("div",{staticClass:"cch-placeholder"},[e.memberLimitReached?n("div",{staticClass:"cch-placeholder-message"},[n("div",{staticClass:"cch-placeholder-message-bubble"},[e._v("\n\t\t\t\t\t\t\t\t\t\t\tThis channel has reached its member limit. Try joining another channel.\n\t\t\t\t\t\t\t\t\t\t")])]):e.channelPermissions.read?[n("div",{staticClass:"cch-placeholder-title"},[e._v("No messages")]),e._v(" "),n("div",{staticClass:"cch-placeholder-subtitle"},[e.channelPermissions.post?[e._v("Be the first to post a message in this channel!")]:[e._v("It's empty in here...")]],2)]:[n("div",{staticClass:"cch-placeholder-title"},[e._v("Permission denied")]),e._v(" "),n("div",{staticClass:"cch-placeholder-subtitle"},["private"===e.channel.access?[e.channel.selfInvites?[e._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\tJoin this channel to read and post messages in here.\n\t\t\t\t\t\t\t\t\t\t\t\t")]:[e._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\tYou must be invited to this private channel to read and post messages in here.\n\t\t\t\t\t\t\t\t\t\t\t\t")]]:[e._v("You do not have access to this channel.")]],2),e._v(" "),"private"===e.channel.access&&e.channel.selfInvites&&!e.memberLimitReached?n("div",{staticClass:"cch-placeholder-buttons"},[n("button",{staticClass:"cch-placeholder-button",on:{click:e.join}},[e._v("Join")])]):e._e()]],2),e._v(" "),n("div",{staticClass:"cch-footer"},[n("div",{staticClass:"cch-container"},[e.channelPermissions.post?n("Inputbar",{ref:"inputbar",staticClass:"cch-inputbar",attrs:{formatted:e.formatted,"user-names-typing":e.userNamesTyping},on:{submit:e.submit,"update:formatted":e.onUpdateFormatted,input:e.onInput,blur:e.onBlur},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}}):n("div",{staticClass:"cch-footer-message"},[e._v("\n\t\t\t\t\t\t\t\t\t\t\tYou do not have permission to post in this channel.\n\t\t\t\t\t\t\t\t\t\t")])],1)])],1)]),e._v(" "),e.membersVisible?n("SplitPanel",{attrs:{frac:e.splitMembersFrac,sizing:"fixed","min-frac":50,"max-frac":500},on:{"update:frac":function(t){e.splitMembersFrac=t}}},[n("ChannelMembers",{staticClass:"cch-members",attrs:{channel:e.channel,"channel-roles":e.channelRolesList},on:{close:function(t){e.membersVisible=!1},"invite-users":function(t){return e.eventBus.emit("chat:invite-users",e.channel.id)},"uninvite-user":function(t){return e.onUninviteUser(t)}}})],1):e._e()],1)]:n("div",{staticClass:"cch-placeholder"},[n("div",{staticClass:"cch-placeholder-title"},[e._v("Welcome to Chat")]),e._v(" "),n("div",{staticClass:"cch-placeholder-subtitle"},[e._v("Select a channel to get started")])])],2)])],1)],1)}),[],!1,null,null,null));t.default=Be.exports},"u+ZI":function(e,t,n){"use strict";var s=n("S5pG");n.n(s).a},uBPy:function(e,t,n){"use strict";var s=n("PcaW");n.n(s).a},uGrZ:function(e,t,n){},uGxL:function(e,t,n){"use strict";var s=n("x7dS");n.n(s).a},uM7l:function(e,t,n){var s=n("OBhP");e.exports=function(e){return s(e,4)}},uP0s:function(e,t,n){},uPCw:function(e,t,n){},uSvj:function(e,t,n){"use strict";var s=n("iZb5");n.n(s).a},uVqG:function(e,t,n){"use strict";var s=n("/OkB");n.n(s).a},"uXL/":function(e,t,n){},uZsG:function(e,t,n){"use strict";var s=n("1F7D");n.n(s).a},ueMK:function(e,t,n){},uexA:function(e,t,n){},uj1K:function(e,t,n){},ukqi:function(e,t,n){"use strict";var s=n("FcLS");n.n(s).a},urG9:function(e,t,n){},v0bE:function(e,t,n){"use strict";var s=n("HYBA");n.n(s).a},v2Iu:function(e,t,n){},v5sb:function(e,t,n){"use strict";var s=n("DBws");n.n(s).a},vF1J:function(e,t,n){"use strict";n("pNMO"),n("TeQF"),n("yXV3"),n("5DmW"),n("27RR"),n("tkto"),n("hByQ"),n("FZtP");var s=n("kvrn"),i=n.n(s),r=n("rePB"),a=n("hjyn");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={functional:!0,props:{text:{type:String,default:""},search:{type:String,default:""},ignoreCase:{type:Boolean,default:!1}},render:function(e,t){var n=t.props,s=n.text,r=s,o=n.search;n.ignoreCase&&(r=r.toLowerCase(),o=o.toLowerCase());var c=[],u=0;if(o)for(;;){var d=r.indexOf(o,u);if(-1===d)break;u=d+o.length,c.push([d,u])}var h=l({},t.data,{scopedSlots:l({highlight:function(t){return e("span",{class:"search-highlight"},[t])}},t.scopedSlots)});return e(a.a,i()([{attrs:{text:s,highlights:c}},h]))}},u=n("KHd+"),d=Object(u.a)(c,void 0,void 0,!1,null,null,null);t.a=d.exports},vFpM:function(e,t,n){},vFu3:function(e,t,n){"use strict";var s=n("EDlf");n.n(s).a},vIfc:function(e,t,n){"use strict";var s=n("o4LN");n.n(s).a},vL5B:function(e,t,n){"use strict";var s=n("LOEQ");n.n(s).a},vVwD:function(e,t,n){"use strict";n("pNMO"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("rePB"),i=n("L2JU");function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var a={components:{Avatar:n("F3Tp").a},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(i.e)(["user"]))},o=(n("wlVF"),n("KHd+")),l=Object(o.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"settings-user-info"},[n("Avatar",{staticClass:"setui-avatar",attrs:{user:e.user}}),e._v(" "),n("div",{staticClass:"setui-user"},[n("div",{staticClass:"setui-name"},[e._v(e._s(e.user.name))]),e._v(" "),n("div",{staticClass:"setui-email"},[e._v(e._s(e.user.email))])])],1)}),[],!1,null,null,null);t.a=l.exports},veFJ:function(e,t,n){"use strict";var s=n("e/ba");n.n(s).a},vfuN:function(e,t,n){"use strict";var s="data:text/html;base64,"+btoa("\n<script>\n\t(function () {\n\t\tfunction afterDOMContentLoaded(fn) {\n\t\t\tif (document.readyState !== 'complete' && document.readyState !== 'interactive') {\n\t\t\t\tvar listener = function () {\n\t\t\t\t\tdocument.removeEventListener('DOMContentLoaded', listener);\n\t\t\t\t\tfn();\n\t\t\t\t};\n\n\t\t\t\tdocument.addEventListener('DOMContentLoaded', listener);\n\t\t\t} else {\n\t\t\t\tfn();\n\t\t\t}\n\t\t}\n\n\t\tfunction onMessage(e) {\n\t\t\twindow.removeEventListener('message', onMessage);\n\n\t\t\tdocument.open();\n\t\t\tdocument.write(e.data.html);\n\t\t\tdocument.close();\n\n\t\t\tconsole.log = log.bind(console, 'log', console.log);\n\t\t\tconsole.warn = log.bind(console, 'warn', console.warn);\n\t\t\tconsole.error = log.bind(console, 'error', console.error);\n\t\t\twindow.addEventListener('error', onError);\n\n\t\t\tafterDOMContentLoaded(function () {\n\t\t\t\tif (e.data.css) {\n\t\t\t\t\tvar style = document.createElement('style');\n\t\t\t\t\tstyle.textContent = e.data.css;\n\t\t\t\t\tdocument.head.appendChild(style);\n\t\t\t\t}\n\n\t\t\t\tif (e.data.js) {\n\t\t\t\t\tvar js = document.createElement('script');\n\t\t\t\t\tjs.textContent = e.data.js;\n\t\t\t\t\tdocument.body.appendChild(js);\n\t\t\t\t}\n\n\t\t\t\tonResize();\n\t\t\t\twindow.addEventListener('resize', onResize);\n\t\t\t});\n\t\t}\n\n\t\tfunction onLoad() {\n\t\t\twindow.removeEventListener('load', onLoad);\n\t\t\twindow.parent.postMessage({ type: 'sandbox:load' }, '*');\n\t\t}\n\n\t\tfunction onError(e) {\n\t\t\twindow.parent.postMessage({\n\t\t\t\ttype: 'sandbox:error',\n\t\t\t\tmessage: e.message,\n\t\t\t}, '*');\n\t\t}\n\n\t\tvar heightEl = document.createElement('div');\n\t\theightEl.style.overflow = 'hidden';\n\n\t\tfunction calculateHeight() {\n\t\t\tdocument.body.appendChild(heightEl);\n\t\t\tvar height = heightEl.offsetTop;\n\t\t\theightEl.remove();\n\t\t\treturn height;\n\t\t}\n\n\t\tfunction onResize() {\n\t\t\twindow.parent.postMessage({\n\t\t\t\ttype: 'sandbox:height',\n\t\t\t\theight: calculateHeight(),\n\t\t\t}, '*');\n\t\t}\n\n\t\tfunction log() {\n\t\t\tvar level = arguments[0];\n\t\t\tvar original = arguments[1];\n\t\t\tvar args = [].slice.call(arguments, 2);\n\n\t\t\toriginal.apply(this, args);\n\n\t\t\twindow.parent.postMessage({\n\t\t\t\ttype: 'sandbox:log',\n\t\t\t\tlevel: level,\n\t\t\t\targs: args.map(String),\n\t\t\t}, '*');\n\t\t}\n\n\t\twindow.addEventListener('message', onMessage);\n\t\twindow.addEventListener('load', onLoad);\n\t})();\n<\/script>"),i={props:{html:{type:String,default:""},js:{type:String,default:""},css:{type:String,default:""},allowPopups:{type:Boolean,default:!1}},data:function(){return{src:s,key:0}},computed:{sandbox:function(){var e=["allow-scripts","allow-forms"];return this.allowPopups&&e.push("allow-popups","allow-modals"),e.join(" ")}},watch:{html:function(){this.key++},css:function(){this.key++},js:function(){this.key++},allowPopups:function(){this.key++}},mounted:function(){window.addEventListener("message",this.onMessage)},destroyed:function(){window.removeEventListener("message",this.onMessage)},methods:{onMessage:function(e){if(e.source===this.$el.contentWindow)switch(e.data.type){case"sandbox:load":e.source.postMessage({html:this.html,css:this.css,js:this.js},"*");break;case"sandbox:error":this.$emit("error",e.data.message);break;case"sandbox:log":this.$emit("log",{level:e.data.level,args:e.data.args});break;case"sandbox:height":this.$emit("height",e.data.height)}}}},r=n("KHd+"),a=Object(r.a)(i,(function(){var e=this.$createElement;return(this._self._c||e)("iframe",{key:this.key,staticClass:"sandbox",attrs:{sandbox:this.sandbox,src:this.src}})}),[],!1,null,null,null);t.a=a.exports},vjDR:function(e,t,n){},voaT:function(e,t,n){"use strict";var s=n("pQym");n.n(s).a},voyk:function(e,t,n){},vx0q:function(e,t,n){"use strict";var s=n("ks/X");n.n(s).a},"w+pX":function(e,t,n){"use strict";var s=n("SCrw");n.n(s).a},w1SZ:function(e,t,n){"use strict";var s={props:{type:{type:String,default:"general"}}},i=(n("s3ph"),n("KHd+")),r=Object(i.a)(s,(function(){var e=this.$createElement;return(this._self._c||e)("span",{staticClass:"lesson-icon",class:"lesson-icon-"+this.type})}),[],!1,null,null,null);t.a=r.exports},w1g4:function(e,t,n){"use strict";var s=n("1SMr");n.n(s).a},w3D5:function(e,t,n){"use strict";var s=n("GWWD");n.n(s).a},w4zT:function(e,t,n){"use strict";var s=n("OJSE");n.n(s).a},w60R:function(e,t,n){},wETJ:function(e,t,n){"use strict";var s=n("Rqbj");n.n(s).a},wGB5:function(e,t,n){e.exports=function(){return new Worker(n.p+"bot.worker.ac8ad82e.js")}},wLLz:function(e,t,n){"use strict";var s=n("OH48"),i=n("9Arg"),r={created:function(){i.F(!1)},destroyed:function(){i.F(!0)},methods:{onClick:function(e){e.target.dataset.clickDismiss&&this.$emit("close")}},render:function(){var e=arguments[0];return e(s.a,[e("transition",{attrs:{appear:!0}},[e("div",{class:"action-sheet",on:{click:this.onClick}},[e("div",{class:"asheet-inner",attrs:{"data-click-dismiss":!0}},[e("div",{class:"asheet-scroll",attrs:{"data-click-dismiss":!0}},[e("div",{class:"asheet-actions"},[this.$scopedSlots.default()])]),this.$scopedSlots.footer&&e("div",{class:"asheet-footer",attrs:{"data-click-dismiss":!0}},[e("div",{class:"asheet-actions"},[this.$scopedSlots.footer()])])])])])])}},a=(n("hd5i"),n("KHd+")),o=Object(a.a)(r,void 0,void 0,!1,null,null,null);t.a=o.exports},wPNs:function(e,t,n){"use strict";var s=n("F/vS");n.n(s).a},wShB:function(e,t,n){},wSwa:function(e,t,n){},wSyZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return d}));var s=n("JBdv"),i=n("6XG0"),r=n("WmPt"),a={functional:!0,render:function(e,t){var n=t.props,s=n.column,i=n.value;switch(s.type){case"boolean":return e(u,{attrs:{value:i}});case"date":return e(c,{attrs:{value:i,format:s.format}});case"check":return i&&e(d,{attrs:{value:i.getValue()},on:{input:i.setValue}});case"icon":return e(l,{attrs:{value:i}});default:return e(o,{attrs:{value:i}})}}},o={functional:!0,render:function(e,t){return[t.props.value]}},l={functional:!0,render:function(e,t){return e(r.a,{attrs:{icon:t.props.value}})}},c={functional:!0,render:function(e,t){return t.props.value&&e(s.a,{attrs:{date:t.props.value,format:t.props.format||"compact"}})}},u={functional:!0,render:function(e,t){return t.props.value?e("span",{style:"color: rgb(0, 200, 0)"},["✔"]):e("span",{style:"color: rgb(220, 40, 0)"},["✘"])}},d={functional:!0,render:function(e,t){return e(i.a,{attrs:{value:t.props.value},on:{input:t.listeners.input}})}}},"wW/4":function(e,t,n){},wWKM:function(e,t,n){e.exports=n.p+"assets/file-icon.8718f8ae.svg"},we0M:function(e,t,n){"use strict";var s=n("jsmB");n.n(s).a},whzu:function(e,t,n){"use strict";n("TeQF");var s=n("WmPt"),i=n("9z1j"),r=n("8f0z"),a=(n("pNMO"),n("4Brf"),n("0oug"),n("4mDm"),n("2B1R"),n("Tskq"),n("07d7"),n("PKPk"),n("3bBZ"),n("KQm4")),o=n("Pa8A"),l=n("3PXm"),c=n("b/yj"),u={directives:{Tooltip:o.a},components:{Icon:s.a,ProgressBar:l.a,MathRender:c.a},props:{result:{type:Object,required:!0},answersHidden:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},computed:{computedItems:function(){var e=this,t=new Map,n=!0,s=!1,i=void 0;try{for(var r,o=this.result.attempts[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var l=r.value,c=!0,u=!1,d=void 0;try{for(var h,p=l.responses[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var f=h.value;t.has(f.questionId)||t.set(f.questionId,[]),t.get(f.questionId).push(f)}}catch(m){u=!0,d=m}finally{try{c||null==p.return||p.return()}finally{if(u)throw d}}}}catch(m){s=!0,i=m}finally{try{n||null==o.return||o.return()}finally{if(s)throw i}}return this.result.items.reduce((function(e,t){return e.push.apply(e,Object(a.a)(t.questions)),e}),[]).map((function(n){return{questionId:n.id,assessed:n.quizQuestion.assessed,title:n.quizQuestion.contentPlaintext,type:n.quizQuestion.constructor.humanized,typeIcon:"quiz-question-".concat(n.quizQuestion.type),progress:[(t.has(n.id)?t.get(n.id).filter((function(e){return e.correct})).length:0)/(e.result.attempts.length||1),(t.has(n.id)?t.get(n.id).filter((function(e){return!e.correct})).length:0)/(e.result.attempts.length||1)]}}))}}},d=(n("nkcA"),n("KHd+")),h=Object(d.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("table",{staticClass:"sway-quiz-result-summary",class:{"sqzrs-answers-visible":!e.answersHidden,disabled:e.disabled}},[n("thead",[n("tr",[n("th",{staticClass:"sqzrs-col-question",attrs:{colspan:"3"}},[e._v("Question")]),e._v(" "),n("th",[e._v(e._s(e.answersHidden?"Progress":"Correctness"))])])]),e._v(" "),n("tbody",e._l(e.computedItems,(function(t,s){return n("tr",{key:t.questionId,class:{"sqzrs-assessed":t.assessed},on:{click:function(t){!e.disabled&&e.$emit("click",s)}}},[n("td",{staticClass:"sqzrs-col-number"},[e._v(e._s(s+1))]),e._v(" "),n("td",[n("Icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.type,expression:"computedItem.type"}],staticClass:"sqzrs-icon-type",attrs:{icon:t.typeIcon}})],1),e._v(" "),n("td",[n("MathRender",{staticClass:"sqzrs-title",attrs:{latex:t.title}})],1),e._v(" "),n("td",[n("ProgressBar",{staticClass:"sqzrs-question-progress",attrs:{value:t.progress}})],1)])})),0)])}),[],!1,null,null,null).exports,p=(n("ToJy"),n("hSdx")),f={props:{result:{type:Object,required:!0},answersHidden:{type:Boolean,default:!1}},computed:{questions:function(){return this.result.items.reduce((function(e,t){return e.push.apply(e,Object(a.a)(t.questions)),e}),[])},questionIndexToItemIndex:function(){for(var e=[],t=0;t<this.result.items.length;t++)for(var n=0;n<this.result.items[t].questions.length;n++)e.push(t);return e},assessed:function(){return this.questions.some((function(e){return e.quizQuestion.assessed}))},computedResult:function(){var e=this,t=this.result.attempts.map((function(t){var n=t.responses,s=new Map,i=!0,r=!1,a=void 0;try{for(var o,l=n[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value;s.set(c.questionId,c)}}catch(u){r=!0,a=u}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}return{user:t.user,progressPercentage:n.length/e.questions.length||0,scorePercentage:n.filter((function(e){return e.correct})).length/e.questions.filter((function(e){return e.quizQuestion.assessed})).length||0,scoreTally:n.filter((function(e){return e.correct})).length,responses:e.questions.map((function(e){var t=s.get(e.id);if(t){var n=["answered"];return null!=t.correct&&n.push(t.correct?"correct":"incorrect"),{class:n,correct:t.correct}}}))}})).sort((function(e,t){return p.naturalComparator(e.user.name,t.user.name)})),n={progressPercentage:0,scorePercentage:0,scoreTally:0,responses:this.questions.map((function(){return 0}))};if(t.length>0){var s=!0,i=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(s=(a=o.next()).done);s=!0){var l=a.value;n.progressPercentage+=l.progressPercentage,n.scorePercentage+=l.scorePercentage,n.scoreTally+=l.scoreTally;for(var c=0;c<n.responses.length;c++)n.responses[c]+=l.responses[c]&&l.responses[c].correct?1:0}}catch(d){i=!0,r=d}finally{try{s||null==o.return||o.return()}finally{if(i)throw r}}n.progressPercentage/=t.length,n.scorePercentage/=t.length,n.scoreTally=Math.round(n.scoreTally/t.length);for(var u=0;u<n.responses.length;u++)n.responses[u]/=t.length}return{attempts:t,totals:n}},attempts:function(){return this.computedResult.attempts},totals:function(){return this.computedResult.totals}},methods:{formatPercent:p.formatPercent}},m=(n("mWS5"),Object(d.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("table",{staticClass:"sway-quiz-result-table",class:{"sqzrt-answers-visible":!e.answersHidden}},[n("thead",[n("tr",[n("th",[e._v("Name")]),e._v(" "),n("th",[e._v("Progress")]),e._v(" "),e.assessed?n("th",[e._v("Score")]):e._e(),e._v(" "),e._l(e.questions,(function(t,s){return n("th",{key:t.id,staticClass:"sqzrt-cell-clickable",on:{click:function(t){return e.$emit("click",s)}}},[e._v("\n\t\t\t\tQ"+e._s(s+1)+"\n\t\t\t")])}))],2)]),e._v(" "),n("tbody",e._l(e.attempts,(function(t){return n("tr",{key:t.id},[n("td",[e._v(e._s(t.user.name))]),e._v(" "),n("td",{staticClass:"sqzrt-col-number"},[e._v(e._s(e.formatPercent(t.progressPercentage)))]),e._v(" "),e.assessed?n("td",{staticClass:"sqzrt-col-number"},[e._v(e._s(t.scoreTally)+" ("+e._s(e.formatPercent(t.scorePercentage))+")")]):e._e(),e._v(" "),e._l(t.responses,(function(t,s){return n("td",{key:s,staticClass:"sqzrt-cell-response sqzrt-cell-clickable",class:t&&t.class,on:{click:function(t){return e.$emit("click",e.questionIndexToItemIndex[s])}}},[t?[e._v(e._s(t.label))]:e._e()],2)}))],2)})),0),e._v(" "),e.assessed?n("tfoot",[n("tr",[n("th",[e._v("Room Average")]),e._v(" "),n("td",{staticClass:"sqzrt-col-number"},[e._v(e._s(e.formatPercent(e.totals.progressPercentage)))]),e._v(" "),n("td",{staticClass:"sqzrt-col-number"},[e._v(e._s(e.totals.scoreTally)+" ("+e._s(e.formatPercent(e.totals.scorePercentage))+")")]),e._v(" "),e._l(e.totals.responses,(function(t,s){return n("td",{key:s,staticClass:"sqzrt-col-number sqzrt-col-clickable",on:{click:function(t){return e.$emit("click",e.questionIndexToItemIndex[s])}}},[e.questions[s].quizQuestion.assessed?[e._v(e._s(e.formatPercent(t)))]:e._e()],2)}))],2)]):e._e()])}),[],!1,null,null,null).exports),v={id:"progress",text:"Progress"},b={id:"correctness",text:"Correctness"},g={id:"table",text:"Table"},y={id:"questionResults",text:"Question Results"},w={components:{Icon:s.a,TabsHeader:i.a,QuestionResult:r.a,ResultSummary:h,ResultTable:m},props:{result:{type:Object,required:!0},progressHidden:{type:Boolean,default:!1},correctnessHidden:{type:Boolean,default:!1},tableHidden:{type:Boolean,default:!1},namesHidden:{type:Boolean,default:!1},resultsHidden:{type:Boolean,default:!1},answersHidden:{type:Boolean,default:!1}},data:function(){return{itemIndex:0,selectedTab:null}},computed:{tabs:function(){return[!this.progressHidden&&v,!this.correctnessHidden&&b,!this.tableHidden&&g,!this.resultsHidden&&y].filter(Boolean)},item:function(){return this.result.items[this.itemIndex]},hasPrevItem:function(){return this.itemIndex>0},hasNextItem:function(){return this.itemIndex<this.result.items.length-1}},created:function(){this.selectedTab=this.tabs[0]},methods:{showItem:function(e){this.itemIndex=e,this.selectedTab=y},prevQuestion:function(){this.itemIndex--},nextQuestion:function(){this.itemIndex++}}},_=(n("624E"),Object(d.a)(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sway-quiz-result"},[e.tabs.length>1?n("TabsHeader",{attrs:{tabs:e.tabs},model:{value:e.selectedTab,callback:function(t){e.selectedTab=t},expression:"selectedTab"}}):e._e(),e._v(" "),"progress"===e.selectedTab.id?n("div",{staticClass:"sqzr-table-scroller"},[n("ResultSummary",{attrs:{result:e.result,disabled:e.resultsHidden,"answers-hidden":""},on:{click:function(t){return e.showItem(t)}}})],1):e._e(),e._v(" "),"correctness"===e.selectedTab.id?n("div",{staticClass:"sqzr-table-scroller"},[n("ResultSummary",{attrs:{result:e.result,disabled:e.resultsHidden},on:{click:function(t){return e.showItem(t)}}})],1):e._e(),e._v(" "),"table"===e.selectedTab.id?n("div",{staticClass:"sqzr-table-scroller"},[n("ResultTable",{attrs:{result:e.result,"answers-hidden":e.answersHidden},on:{click:function(t){return e.showItem(t)}}})],1):"questionResults"===e.selectedTab.id?n("div",[n("div",{staticClass:"sqzr-question-actions"},[n("button",{staticClass:"sqzr-question-action",attrs:{disabled:!e.hasPrevItem},on:{click:e.prevQuestion}},[n("Icon",{attrs:{icon:"chevron-left"}}),e._v(" "),n("span",[e._v("Previous Question")])],1),e._v(" "),n("span",{staticClass:"sqzr-question-actions-title"},[e._v("\n\t\t\t\tQuestion "),n("strong",[e._v(e._s(e.itemIndex+1))]),e._v("\n\t\t\t\tof "),n("strong",[e._v(e._s(e.result.items.length))])]),e._v(" "),n("button",{staticClass:"sqzr-question-action",attrs:{disabled:!e.hasNextItem},on:{click:e.nextQuestion}},[n("span",[e._v("Next Question")]),e._v(" "),n("Icon",{attrs:{icon:"chevron-right"}})],1)]),e._v(" "),e.item?e._l(e.item.questions,(function(t,s){return n("QuestionResult",{key:t.id,staticClass:"sqzr-question-result",attrs:{result:e.result,"item-index":e.itemIndex,"question-index":s,"names-hidden":e.namesHidden}})})):e._e()],2):e._e()],1)}),[],!1,null,null,null));t.a=_.exports},wjZH:function(e,t,n){"use strict";var s=n("mBgw");n.n(s).a},wlVF:function(e,t,n){"use strict";var s=n("UnDk");n.n(s).a},wlsM:function(e,t,n){"use strict";var s=n("04JP");n.n(s).a},wnNh:function(e,t,n){},"wsB/":function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("0oug"),n("4mDm"),n("Tskq"),n("07d7"),n("PKPk"),n("3bBZ");var s=n("G7T9"),i=new Map,r=new Map;function a(e){if(!e)return null;for(e.nodeType!==Node.ELEMENT_NODE&&(e=e.parentNode);e;){var t=s.e(e);if(t&&!t.$options.abstract)return t;e=e.parentNode}return null}document.addEventListener("click",(function(e){var t=!0,n=!1,s=void 0;try{for(var r,a=i.values()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){(0,r.value)(e)}}catch(o){n=!0,s=o}finally{try{t||null==a.return||a.return()}finally{if(n)throw s}}}),!0),document.addEventListener("click",(function(e){var t=!0,n=!1,s=void 0;try{for(var i,a=r.values()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){(0,i.value)(e)}}catch(o){n=!0,s=o}finally{try{t||null==a.return||a.return()}finally{if(n)throw s}}})),t.a={bind:function(e,t){var n=new Date;(t.modifiers.capture?i:r).set(e,(function(s){if(!(new Date-n<100)&&t.value){var i=e,r=a(i),o=s.target,l=a(o);r===l&&function(e,t){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}(i,o)||r!==l&&function(e,t){for(;t;){if(t===e)return!0;t=t.$parent}return!1}(r,l)||t.value(s)}}))},unbind:function(e,t){(t.modifiers.capture?i:r).delete(e)}}},wwwM:function(e,t,n){},wyzc:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("ma9I"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("UxlC"),n("SYor"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("Puqe"),l=n.n(o),c=n("L2JU"),u=n("vVwD"),d=n("4K9I"),h=n("xtk+"),p=n("IbLZ"),f=n("5/Cn");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var v,b,g={inject:["userApi","sessionService"],components:{UserInfo:u.a,EdButton:d.a,EdInput:h.a,EdField:p.a},data:function(){return{email:""}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(c.e)(["user"]),{disabled:function(){return!this.email.trim()}}),created:function(){this.continueMerge()},methods:{merge:(b=Object(r.a)(i.a.mark((function e(){var t,n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.disabled){e.next=2;break}return e.abrupt("return");case 2:return t=this.user,n=this.email.trim(),e.prev=4,e.next=7,this.userApi.mergeGenerateToken(t.id,n);case 7:e.next=21;break;case 9:e.prev=9,e.t0=e.catch(4),e.t1=e.t0.data&&e.t0.data.code,e.next="user_not_found"===e.t1?14:"user_not_distinct"===e.t1?16:18;break;case 14:return s="There is no Ed account with that email address.",e.abrupt("break",19);case 16:return s="You must enter the email address of another Ed account.",e.abrupt("break",19);case 18:s="Try again later.";case 19:return f.a({icon:"error",title:"Unable to merge accounts",text:s}),e.abrupt("return");case 21:this.user===t&&(this.email=""),f.a({icon:"info",title:"Verification email sent",text:"A verification email was sent to ".concat(n,". Check the email message for further instructions.")});case 23:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(){return b.apply(this,arguments)}),continueMerge:(v=Object(r.a)(i.a.mark((function e(){var t,n,s,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.$route.query,n=t.token,s=t.email,n&&s){e.next=3;break}return e.abrupt("return");case 3:return this.$router.replace({path:this.$route.path,query:l()(this.$route.query,["token","email"])}),r=this.user,e.next=7,f.b({icon:"warning",title:"Merge accounts?",text:"Please read the following carefully.\n\nYou are about to merge the Ed account at ".concat(s," into this account (").concat(r.email,"). The Ed account at ").concat(s," will be deleted after the merge. This cannot be undone."),primaryAction:"Merge Accounts",defaultAction:1});case 7:if(e.sent){e.next=9;break}return e.abrupt("return");case 9:return e.prev=9,e.next=12,this.userApi.mergeWithToken(r.id,n);case 12:e.next=26;break;case 14:e.prev=14,e.t0=e.catch(9),e.t1=e.t0.data&&e.t0.data.code,e.next="token_invalid"===e.t1?19:"token_expired"===e.t1?19:"user_forbidden"===e.t1?21:23;break;case 19:return a="The link has expired or is invalid. Try merging the accounts again to get a new email with a valid link.",e.abrupt("break",24);case 21:return a="You must be logged into the Ed account that initiated the merge.",e.abrupt("break",24);case 23:a="Try again later.";case 24:return f.a({icon:"error",title:"Unable to merge accounts",text:a}),e.abrupt("return");case 26:return e.next=28,f.d({icon:"info",title:"Account merge successful",text:"You must log out before changes will take effect.",primaryAction:"Log out",secondaryAction:"Later"});case 28:if(!e.sent){e.next=31;break}this.sessionService.logOut(),this.$router.push({name:"login"});case 31:case"end":return e.stop()}}),e,this,[[9,14]])}))),function(){return v.apply(this,arguments)})}},y=(n("y2ny"),n("KHd+")),w=Object(y.a)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{staticClass:"settings-heading"},[e._v("Merge Accounts")]),e._v(" "),n("p",{staticClass:"settings-text"},[e._v("\n\t\tYou can merge another Ed account into this one. After the merge, the old\n\t\taccount will be deleted.\n\t")]),e._v(" "),n("p",{staticClass:"settings-text settings-error"},[e._v("\n\t\tThis is a permanent operation and cannot be undone.\n\t")]),e._v(" "),n("UserInfo"),e._v(" "),n("EdField",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Email address of other Ed account to merge into this one")]},proxy:!0}])},[e._v(" "),n("form",{staticClass:"setmerge-input-layout",on:{submit:function(t){return t.preventDefault(),e.merge(t)}}},[n("EdInput",{model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),n("EdButton",{attrs:{type:"submit",disabled:e.disabled}},[e._v("Merge")])],1)])],1)}),[],!1,null,null,null);t.default=w.exports},x1RP:function(e,t,n){"use strict";var s=n("evZ0");n.n(s).a},x5kS:function(e,t,n){"use strict";var s=n("4qo9");n.n(s).a},x6K9:function(e,t,n){"use strict";var s=n("x9+w");n.n(s).a},"x7+J":function(e,t,n){e.exports=n.p+"assets/sketch-highlighter.bcd42f01.svg"},x7dS:function(e,t,n){},"x9+w":function(e,t,n){},x9Oe:function(e,t,n){"use strict";var s=n("q6sz");n.n(s).a},xBbn:function(e,t,n){"use strict";var s=n("s77E");n.n(s).a},xHE8:function(e,t,n){"use strict";var s=n("+c/7");n.n(s).a},xNPl:function(e,t,n){},xOnE:function(e,t,n){},xYCL:function(e,t,n){"use strict";var s=n("CMGH");n.n(s).a},xYnC:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("ma9I"),n("TeQF"),n("qePV"),n("5DmW"),n("27RR"),n("tkto"),n("UxlC"),n("FZtP");var s=n("o0o1"),i=n.n(s),r=(n("ls82"),n("HaE+")),a=n("rePB"),o=n("L2JU"),l=n("K4j9"),c=n("Pa8A"),u=n("t19P"),d=n("43W2"),h=n("TphV"),p=n("2PkB"),f=n("Oshs"),m=n("LwAd"),v=n("VYah"),b=n("YxxY"),g=n("WmPt"),y=n("OBDa"),w=n("Vzir"),_={components:{DialogLayout:y.a,CollectionViewSimple:w.a},data:function(){return{groups:[{heading:"Informational",items:[{type:"document",label:"Reading Document",icon:"lesson-slide-document"},{type:"pdf",label:"PDF Document",icon:"lesson-slide-pdf"},{type:"video",label:"Video",icon:"lesson-slide-video"},{type:"webpage",label:"Webpage Embed",icon:"lesson-slide-webpage"},{type:"html",label:"Custom HTML",icon:"lesson-slide-html"}]},{heading:"Exercise",items:[{type:"quiz",label:"Quiz",icon:"lesson-slide-quiz"},{type:"code",label:"Code Challenge",icon:"lesson-slide-code"},{type:"postgres",label:"SQL Challenge",icon:"lesson-slide-postgres"},{type:"rstudio",label:"RStudio Challenge",icon:"lesson-slide-rstudio"},{type:"jupyter",label:"Jupyter Challenge",icon:"lesson-slide-jupyter"},{type:"web",label:"Web Challenge",icon:"lesson-slide-web"},{type:"code-import",label:"Import Existing Challenges",icon:"lesson-slide-import-challenge"}]},{heading:"Other",items:[{type:"slide-clone",label:"Import Existing Slide",icon:"lesson-slide-import-slide"}]}]}},methods:{onItemClick:function(e){this.$emit("done",{type:e.type})}}},k=(n("6hLz"),n("KHd+")),C=Object(k.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogLayout",{staticClass:"sheet-new-slide",attrs:{title:"New Slide","no-padding":""}},[n("div",{staticClass:"sheet-new-slide-scroll"},[n("div",{staticClass:"sheet-new-slide-groups"},e._l(e.groups,(function(t,s){return n("div",{key:s,staticClass:"sheet-new-slide-group"},[n("h2",{staticClass:"sheet-new-slide-heading"},[e._v(e._s(t.heading))]),e._v(" "),n("CollectionViewSimple",{attrs:{align:"left",items:t.items},on:{"item-click":e.onItemClick}})],1)})),0)])])}),[],!1,null,null,null).exports,x=(n("XbcX"),n("yq1k"),n("4mDm"),n("2B1R"),n("ToJy"),n("c9m3"),n("Tskq"),n("07d7"),n("JTJg"),n("PKPk"),n("3bBZ"),n("bt/X")),j=n.n(x),O=n("BtCt"),S=n("0XH5"),E=n("vF1J"),T=n("0yhy"),I=n("NC1X"),D=n("4K9I"),P=n("6XG0"),A=n("/Yj0"),N=n("hSdx");function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L,F,B={components:{DialogLayout:y.a,SearchInput:S.a,SearchHighlight:E.a,Outline:T.a,Spinner:I.a,EdButton:D.a,EdCheck:P.a},inject:["challengeApi","lessonApi"],props:{lessonId:{type:Number,required:!0}},data:function(){return{loading:!1,importing:!1,items:[],searchQuery:""}},computed:M({},Object(o.e)(["user","course"]),{selectedChallenges:function(){return this.items.flatMap((function(e){return e.children.flatMap((function(e){return e.selected?e.challenge:[]}))}))},filteredItems:function(){var e=this.searchQuery.toLowerCase();return function t(n){var s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n.flatMap((function(n){if(s||n.text.toLowerCase().includes(e))return{item:n,children:n.children&&t(n.children,!0)};if(!n.children)return[];var i={item:n,children:t(n.children)};return i.children.length?i:[]}))}(this.items)}}),created:function(){this.update()},methods:M({pluralize:N.pluralize},Object(o.b)("lesson",{importChallenges:O.a.IMPORT_CHALLENGES}),{update:(F=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.challengeApi.getUserChallenges(this.type);case 4:t=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),A.b({type:"error",text:"Unable to fetch challenges."}),e.abrupt("return");case 11:return e.prev=11,this.loading=!1,e.finish(11);case 14:this.items=this.createItems(t);case 15:case"end":return e.stop()}}),e,this,[[1,7,11,14]])}))),function(){return F.apply(this,arguments)}),createItems:function(e){var t=this,n=new Map(this.user.courses.map((function(e){return[e.id,e]}))),s=j()(e,(function(e){return e.course_id})),i=function(e){return{type:"challenge",key:"challenge"+e.id,text:"".concat(e.category?e.category+" - ":"").concat(e.title),selected:!1,challenge:e}},r=Object.keys(s).map((function(e){var r=n.get(+e);if(r){var a=s[e].map(i).filter(Boolean);if(a.length)return a.sort(N.compositeComparator((function(e,t){return N.naturalComparator(e.challenge.category,t.challenge.category)}),(function(e,t){return N.naturalComparator(e.challenge.number,t.challenge.number)}),(function(e,t){return N.naturalComparator(e.challenge.title,t.challenge.title)}))),{type:"course",key:"course"+r.id,text:"".concat(r.code," ").concat(r.name," - ").concat(r.year,", ").concat(r.session).concat(r===t.course?" (this course)":""),expanded:!0,course:r,children:a}}})).filter(Boolean);return r.sort(N.compositeComparator((function(e,n){return(e.course===t.course?0:1)-(n.course===t.course?0:1)}),(function(e,t){return N.naturalComparator(e.text,t.text)}))),r},doImport:(L=Object(r.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.importing=!0,t=this.selectedChallenges.map((function(e){return e.id})),e.next=4,this.importChallenges(t);case 4:(n=e.sent).length!==t.length?(this.importing=!1,A.b({type:"error",text:"One or more challenges failed to import into this lesson."})):(A.b({type:"success",text:"Imported challenges successfully."}),this.$emit("done",n));case 6:case"end":return e.stop()}}),e,this)}))),function(){return L.apply(this,arguments)})})},q=(n("wlsM"),Object(k.a)(B,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogLayout",{staticClass:"sheet-import-challenges",attrs:{title:"Import Challenges",disabled:e.importing},scopedSlots:e._u([{key:"primaryActions",fn:function(){return[n("EdButton",{staticClass:"primary",attrs:{disabled:e.importing||0===e.selectedChallenges.length},on:{click:e.doImport}},[e._v("\n\t\t\tImport Challenges\n\t\t")])]},proxy:!0}])},[n("div",{staticClass:"sic-layout"},[n("p",{staticClass:"sic-info"},[e._v("\n\t\t\tSelect the challenges from the list below that you want to import into this\n\t\t\tlesson. You may only import challenges from courses in which you have\n\t\t\t"),n("strong",[e._v("staff")]),e._v(" access.\n\t\t")]),e._v(" "),n("SearchInput",{staticClass:"sic-search",model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),e._v(" "),e.loading?n("Spinner",{staticClass:"sic-spinner"}):[n("Outline",{staticClass:"sic-outline",attrs:{data:e.filteredItems,"key-selector":function(e){return e.item.key},"children-selector":function(e){return e.children},"expandable-selector":function(e){return null!=e.children},"expanded-selector":function(e){return e.item.expanded}},on:{"item-expand":function(e){var t=e.data,n=e.expanded;return t.item.expanded=n}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data;return[n("div",{staticClass:"sic-outline-item"},["course"!==s.item.type?n("EdCheck",{model:{value:s.item.selected,callback:function(t){e.$set(s.item,"selected",t)},expression:"wrapped.item.selected"}}):e._e(),e._v(" "),n("span",[n("SearchHighlight",{attrs:{text:s.item.text,search:e.searchQuery,"ignore-case":""}})],1)],1)]}}])})],e._v(" "),n("p",{staticClass:"sic-info"},[e._v("\n\t\t\t"+e._s(e.selectedChallenges.length?e.selectedChallenges.length:"No")+"\n\t\t\t"+e._s(e.pluralize(e.selectedChallenges.length,"challenge"))+" selected\n\t\t")])],2)])}),[],!1,null,null,null).exports);n("4Brf"),n("0oug");function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z={components:{DialogLayout:y.a,Outline:T.a,Spinner:I.a,EdButton:D.a,EdCheck:P.a,SearchInput:S.a,SearchHighlight:E.a},inject:["lessonApi"],props:{lessonId:{type:Number,required:!0}},data:function(){return{loading:!1,importing:!1,items:[],searchQuery:""}},computed:U({},Object(o.e)(["user","course"]),{selectedSlides:function(){return this.items.flatMap((function(e){return e.children.flatMap((function(e){return e.children.flatMap((function(e){return e.selected?e.slide:[]}))}))}))},filteredItems:function(){var e=this.searchQuery.toLowerCase();return function t(n){var s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n.flatMap((function(n){if(s||n.text.toLowerCase().includes(e))return{item:n,children:n.children&&t(n.children,!0)};if(!n.children)return[];var i={item:n,children:t(n.children)};return i.children.length?i:[]}))}(this.items)}}),created:function(){this.update()},methods:U({pluralize:N.pluralize},Object(o.b)("lesson",{importSlides:O.a.IMPORT_SLIDES}),{update:function(){var e=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.lessonApi.getUserLessons();case 4:t=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),A.b({type:"error",text:"Unable to fetch lessons."}),e.abrupt("return");case 11:return e.prev=11,this.loading=!1,e.finish(11);case 14:this.items=this.createItems(t);case 15:case"end":return e.stop()}}),e,this,[[1,7,11,14]])})));return function(){return e.apply(this,arguments)}}(),createItems:function(e){var t=this,n=new Map(this.user.courses.map((function(e){return[e.id,e]}))),s=j()(e,(function(e){return e.courseId})),i=function(e){return{type:"slide",key:"slide"+e.id,text:e.title,selected:!1,slide:e}},r=function(e){var t=e.slideSummaries.map(i);if(t.length)return{type:"lesson",key:"lesson"+e.id,text:e.title,expanded:!1,children:t}},a=Object.keys(s).map((function(e){var i=n.get(+e);if(i){var a=s[e].map(r).filter(Boolean);if(a.length)return{type:"course",key:"course"+i.id,text:"".concat(i.code," ").concat(i.name," - ").concat(i.year,", ").concat(i.session).concat(i===t.course?" (this course)":""),expanded:!0,course:i,children:a}}})).filter(Boolean);return a.sort(N.compositeComparator((function(e,n){return(e.course===t.course?0:1)-(n.course===t.course?0:1)}),(function(e,t){return N.naturalComparator(e.text,t.text)}))),a},getWrappedItemSelected:function(e){var t=this;return"slide"===e.item.type?e.item.selected:e.children.every((function(e){return t.getWrappedItemSelected(e)}))},setWrappedItemSelected:function(e,t){if("slide"===e.item.type)e.item.selected=t;else{var n=!0,s=!1,i=void 0;try{for(var r,a=e.children[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value;this.setWrappedItemSelected(o,t)}}catch(l){s=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}}},doImport:function(){var e=Object(r.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.importing=!0,t=this.selectedSlides.map((function(e){return e.id})),e.next=4,this.importSlides(t);case 4:(n=e.sent).length!==t.length?(this.importing=!1,A.b({type:"error",text:"One or more slides failed to import into this lesson."})):(A.b({type:"success",text:"Imported slides successfully."}),this.$emit("done",n));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()})},V=(n("+zYh"),Object(k.a)(z,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DialogLayout",{staticClass:"sheet-import-slide",attrs:{title:"Import Slides",disabled:e.importing},scopedSlots:e._u([{key:"primaryActions",fn:function(){return[n("EdButton",{staticClass:"primary",attrs:{disabled:e.importing||0===e.selectedSlides.length},on:{click:e.doImport}},[e._v("\n\t\t\tImport Slides\n\t\t")])]},proxy:!0}])},[n("div",{staticClass:"sisl-layout"},[n("p",{staticClass:"sisl-info"},[e._v("\n\t\t\tSelect the lesson from the list below to see its slides.\n\t\t\tYou may only import slides from lessons in courses that you have\n\t\t\t"),n("strong",[e._v("staff")]),e._v(" access.\n\t\t")]),e._v(" "),e.loading?n("Spinner",{staticClass:"sisl-spinner"}):[n("SearchInput",{staticClass:"sisl-search",model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),e._v(" "),n("Outline",{staticClass:"sisl-outline",attrs:{data:e.filteredItems,"key-selector":function(e){return e.item.key},"children-selector":function(e){return e.children},"expandable-selector":function(e){return null!=e.children},"expanded-selector":function(e){return e.item.expanded}},on:{"item-expand":function(e){var t=e.data,n=e.expanded;return t.item.expanded=n}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data;return[n("div",{staticClass:"sisl-outline-item"},["course"!==s.item.type?n("EdCheck",{attrs:{value:e.getWrappedItemSelected(s)},on:{input:function(t){return e.setWrappedItemSelected(s,t)}}}):e._e(),e._v(" "),n("span",[n("SearchHighlight",{attrs:{text:s.item.text,search:e.searchQuery,"ignore-case":""}})],1)],1)]}}])})],e._v(" "),n("p",{staticClass:"sisl-info"},[e._v("\n\t\t\t"+e._s(e.selectedSlides.length?e.selectedSlides.length:"No")+"\n\t\t\t"+e._s(e.pluralize(e.selectedSlides.length,"slide"))+" selected\n\t\t")])],2)])}),[],!1,null,null,null).exports),H=n("Q2AE"),W=n("sl2b"),Q=n("5/Cn");function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G,X,J,Z={name:"LessonEdit",directives:{Tooltip:c.a},components:{PortalTarget:l.PortalTarget,HeaderContainer:u.a,StatusMessage:d.a,Navbar:h.a,NavbarButton:p.a,SheetContainer:f.a,ReorderContainer:m.a,Split:v.a,SplitPanel:b.a,Icon:g.a},props:{lessonId:{type:Number,required:!0}},data:function(){return{errorMessage:null,loadingNewSlide:!1,sheetVisible:!1,selectedSlide:null,splitPanelSidebarFrac:250,splitPanelViewFrac:1}},computed:Y({},Object(o.e)("lesson",["loadingLesson"]),{},Object(o.c)(["isStaff"]),{},Object(o.c)("lesson",["lesson"]),{loading:function(){return this.loadingLesson||this.loadingNewSlide},navbarTitle:function(){return this.loadingLesson||!this.lesson?"Edit Lesson":'Editing "'.concat(this.lesson.title).concat(this.lesson.isHidden?" (hidden)":"",'"')}}),created:function(){if(!this.isStaff)return this.$router.replace({name:"lesson-index"}),void Q.a({icon:"error",title:"Permission denied",text:"You are not allowed to edit this lesson."});this.setNavbarVisible(!0),this.update(),this.created=!0},destroyed:function(){this.created&&(this.setNavbarVisible(!1),this.setLessonId(null))},methods:Y({},Object(o.d)({setNavbarVisible:H.c.SET_NAVBAR_VISIBLE}),{},Object(o.d)("lesson",{setLessonId:O.c.SET_LESSON_ID}),{},Object(o.b)("lesson",{loadLesson:O.a.LOAD_LESSON,createSlide:O.a.CREATE_SLIDE,deleteSlide:O.a.DELETE_SLIDE,reorderSlide:O.a.REORDER_SLIDE}),{slideClass:function(e){return{hidden:e.isHidden}},slideIcon:W.b,update:function(){var e=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.errorMessage=null,e.prev=1,e.next=4,this.loadLesson({id:this.lessonId});case 4:e.next=17;break;case 6:e.prev=6,e.t0=e.catch(1),e.t1=e.t0.status,e.next=404===e.t1?11:410===e.t1?13:15;break;case 11:return this.errorMessage="Lesson not found",e.abrupt("return");case 13:return this.errorMessage="Lesson was deleted",e.abrupt("return");case 15:return A.b({type:"error",text:"Could not load lesson."}),e.abrupt("return");case 17:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),showNewSlideSheet:function(){var e=this;this.$refs.sheetContainer.showSheet(C,(function(t){switch(e.$refs.sheetContainer.closeSheet(),t.type){case"code-import":e.showImportChallengeSheet();break;case"slide-clone":e.showImportSlidesSheet();break;default:e.performCreateSlide(t.type)}}))},showImportChallengeSheet:function(){var e=this,t=(this.$createElement,this),n={render:function(){var e=this,n=arguments[0];return n(q,{attrs:{lessonId:t.lesson.id},on:{done:function(t){return e.$emit("done",t)}}})}};this.$refs.sheetContainer.showSheet(n,(function(t){e.$refs.sheetContainer.closeSheet(),t.length&&e.$router.push({name:"lesson-slide-edit",params:{slideId:t[0].id}})}))},showImportSlidesSheet:function(){var e=this,t=(this.$createElement,this),n={render:function(){var e=this,n=arguments[0];return n(V,{attrs:{lessonId:t.lesson.id},on:{done:function(t){return e.$emit("done",t)}}})}};this.$refs.sheetContainer.showSheet(n,(function(t){e.$refs.sheetContainer.closeSheet(),t.length&&e.$router.push({name:"lesson-slide-edit",params:{slideId:t[0].id}})}))},performCreateSlide:(J=Object(r.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingNewSlide=!0,e.prev=1,e.next=4,this.createSlide({id:this.lesson.id,type:t});case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),A.b({type:"error",text:"Could not create slide."}),e.abrupt("return");case 11:return e.prev=11,this.loadingNewSlide=!1,e.finish(11);case 14:this.$router.push({name:"lesson-slide-edit",params:{slideId:n.id}});case 15:case"end":return e.stop()}}),e,this,[[1,7,11,14]])}))),function(e){return J.apply(this,arguments)}),performDeleteSlide:(X=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.b({title:'Delete slide "'.concat(t.title,'"?'),text:"This cannot be undone.",icon:"warning",primaryAction:"Delete",secondaryAction:"Cancel",defaultAction:1});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,this.deleteSlide(t.id);case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(4),A.b({type:"error",text:"Unable to delete slide."}),e.abrupt("return");case 13:this.$route.params.slideId===t.id&&this.$router.push({name:"lesson-edit"});case 14:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(e){return X.apply(this,arguments)}),onSlideReorder:(G=Object(r.a)(i.a.mark((function e(t){var n,s,r,a,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.oldIndex,s=t.newIndex,r=this.lesson.slides,a=r[n],o=r[s+(s>n?1:0)],e.prev=4,e.next=7,this.reorderSlide({id:a.id,beforeId:o?o.id:0});case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(4),A.b({type:"error",text:"Unable to reorder slides."}),e.abrupt("return");case 13:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(e){return G.apply(this,arguments)})})},ee=(n("KPrL"),Object(k.a)(Z,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("HeaderContainer",{staticClass:"lesson-edit",scopedSlots:e._u([{key:"header",fn:function(){return[n("Navbar",{attrs:{title:e.navbarTitle,secondary:""},scopedSlots:e._u([{key:"left",fn:function(){return[n("NavbarButton",{attrs:{text:"Lessons",icon:"chevron-left",to:{name:"lessons"}}})]},proxy:!0},{key:"right",fn:function(){return[n("PortalTarget",{staticClass:"lesedit-navbar-portal",attrs:{name:"slide-actions","slot-props":{disabled:e.sheetVisible}}})]},proxy:!0}])})]},proxy:!0}])},[e._v(" "),e.errorMessage?n("StatusMessage",[e._v(e._s(e.errorMessage))]):e._e(),e._v(" "),e.lesson?n("Split",{staticClass:"lesedit-split",attrs:{orientation:"horizontal"}},[n("SplitPanel",{attrs:{frac:e.splitPanelSidebarFrac,"min-frac":100,"max-frac":500,sizing:"fixed",collapsable:"","collapsed-text":"Slides"},on:{"update:frac":function(t){e.splitPanelSidebarFrac=t}}},[n("div",{staticClass:"lesedit-sb"},[n("div",{staticClass:"lesedit-sb-heading"},[e._v("Lesson")]),e._v(" "),n("RouterLink",{staticClass:"lesedit-sb-item",attrs:{to:{name:"lesson-edit"},exact:""}},[n("Icon",{staticClass:"lesedit-sb-item-icon",attrs:{icon:"settings"}}),e._v(" "),n("div",{staticClass:"lesedit-sb-item-title"},[e._v("Lesson Settings")])],1),e._v(" "),n("div",{staticClass:"lesedit-sb-heading"},[e._v("Slides")]),e._v(" "),e.lesson.slides.length?n("ReorderContainer",{attrs:{orientation:"vertical"},on:{"will-reorder":e.onSlideReorder}},[n("TransitionGroup",e._l(e.lesson.slides,(function(t){return n("RouterLink",{key:t.id,staticClass:"lesedit-sb-item",class:{hidden:t.isHidden},attrs:{to:{name:"lesson-slide-edit",params:{slideId:t.id}},draggable:"true",title:t.isHidden?"This slide is hidden and will not be shown to students":""}},[n("Icon",{staticClass:"lesedit-sb-item-icon",attrs:{icon:e.slideIcon(t)}}),e._v(" "),n("div",{staticClass:"lesedit-sb-item-title"},[e._v(e._s(t.title))]),e._v(" "),n("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Delete",expression:"'Delete'"}],staticClass:"lesedit-sb-item-delete-btn",on:{click:function(n){return n.preventDefault(),e.performDeleteSlide(t)}}},[n("Icon",{attrs:{icon:"cross"}})],1)],1)})),1)],1):e._e(),e._v(" "),n("div",{staticClass:"lesedit-sb-item lesedit-sb-item-new",on:{click:e.showNewSlideSheet}},[n("Icon",{staticClass:"lesedit-sb-item-icon",attrs:{icon:"plus"}}),e._v(" "),n("div",{staticClass:"lesedit-sb-item-title"},[e._v("New Slide")])],1)],1)]),e._v(" "),n("SplitPanel",{attrs:{frac:e.splitPanelViewFrac},on:{"update:frac":function(t){e.splitPanelViewFrac=t}}},[n("div",{staticClass:"lesedit-scroller"},[n("div",{staticClass:"lesedit-container"},[n("RouterView",{staticClass:"lesedit-slide",attrs:{lesson:e.lesson}})],1)])])],1):e._e(),e._v(" "),n("SheetContainer",{ref:"sheetContainer",staticClass:"lesedit-sheet-container",attrs:{"sheet-visible":e.sheetVisible},on:{"update:sheetVisible":function(t){e.sheetVisible=t},"update:sheet-visible":function(t){e.sheetVisible=t}}})],1)}),[],!1,null,null,null));t.default=ee.exports},xaMt:function(e,t,n){"use strict";var s=n("gAQY");n.n(s).a},xrGP:function(e,t,n){"use strict";var s=n("xwol");n.n(s).a},"xtk+":function(e,t,n){"use strict";n("pNMO"),n("TeQF"),n("qePV"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var s=n("rePB");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var r={props:{value:{type:[String,Number],default:null}},computed:{listeners:function(){var e=this;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.$listeners,{input:function(t){return e.$emit("input",t.target.value)}})}}},a=(n("5xuQ"),n("KHd+")),o=Object(a.a)(r,(function(){var e=this.$createElement;return(this._self._c||e)("input",this._g(this._b({staticClass:"ed-input",attrs:{type:"text"},domProps:{value:this.value}},"input",this.$attrs,!1),this.listeners))}),[],!1,null,null,null);t.a=o.exports},xwol:function(e,t,n){},xzIh:function(e,t,n){"use strict";var s=n("gxmw");n.n(s).a},y2ny:function(e,t,n){"use strict";var s=n("rn9D");n.n(s).a},y6Gm:function(e,t,n){"use strict";var s=n("t3qq");n.n(s).a},yFCc:function(e,t,n){"use strict";var s=n("R7V3");n.n(s).a},yFn6:function(e,t,n){},"yHR/":function(e,t,n){"use strict";var s=n("dGaT");n.n(s).a},yIrP:function(e,t,n){"use strict";var s=n("cs2i");n.n(s).a},yMlZ:function(e,t,n){"use strict";var s=n("WTSU");n.n(s).a},yVQn:function(e,t,n){},yYal:function(e,t,n){"use strict";n.r(t);n("SYor");var s,i=n("o0o1"),r=n.n(i),a=(n("ls82"),n("HaE+")),o=(n("4D86"),n("NC1X")),l=n("IbLZ"),c=n("bfN9"),u={name:"StartForgotPassword",components:{Spinner:o.a,EdField:l.a},inject:["userApi","sessionService"],data:function(){return{email:"",loading:!1,done:!1,errorMessage:null,appbar:{title:"Forgot Password"}}},computed:{disabled:function(){return this.loading||this.done}},created:function(){this.sessionService.logOut(),this.email=this.$route.query.email||""},methods:{onEmailKeyup:function(e){var t=Object(c.a)(e);t&&(this.$refs.submit.focus(),this.email=t)},resetPassword:(s=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loading&&!this.done){e.next=2;break}return e.abrupt("return");case 2:if(this.email=this.email.trim(),this.email){e.next=7;break}return this.errorMessage="Enter your email address.",this.$refs.email.focus(),e.abrupt("return");case 7:return this.loading=!0,e.prev=8,e.next=11,this.userApi.forgotPassword(this.email);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(8),400===e.t0.status&&"string"==typeof e.t0.data&&(this.errorMessage="No account exists with this email address."),e.abrupt("return");case 17:return e.prev=17,this.loading=!1,e.finish(17);case 20:this.done=!0;case 21:case"end":return e.stop()}}),e,this,[[8,13,17,20]])}))),function(){return s.apply(this,arguments)})}},d=n("KHd+"),h=Object(d.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"start-container"},[n("form",{staticClass:"start-form",attrs:{method:"POST",novalidate:""},on:{submit:function(t){return t.preventDefault(),e.resetPassword(t)}}},[n("div",{staticClass:"start-title"},[n("RouterLink",{attrs:{to:"/"}},[e._v("Ed")])],1),e._v(" "),e.done?e._e():[e.errorMessage?n("div",{staticClass:"start-message"},[e._v(e._s(e.errorMessage))]):e._e(),e._v(" "),n("EdField",{staticClass:"start-field",scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Email")]},proxy:!0}],null,!1,1485928759)},[e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],ref:"email",staticClass:"start-input",attrs:{type:"email",autocomplete:"off",autofocus:"",disabled:e.loading},domProps:{value:e.email},on:{keyup:e.onEmailKeyup,input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),n("button",{ref:"submit",staticClass:"start-btn danger",attrs:{type:"submit",disabled:e.loading}},[e._v("\n\t\t\t\tReset password\n\t\t\t\t"),e.loading?n("Spinner",{staticClass:"start-spinner"}):e._e()],1),e._v(" "),n("div",{staticClass:"start-footer"},[n("p",[n("RouterLink",{attrs:{to:{name:"login"}}},[e._v("Back to login")])],1)])],e._v(" "),e.done?[e._m(0),e._v(" "),n("RouterLink",{staticClass:"start-btn",attrs:{tag:"button",to:{name:"login"}}},[e._v("\n\t\t\t\tDone\n\t\t\t")])]:e._e()],2)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"start-message"},[t("p",[this._v("We have sent you an email with further instructions to reset your password.")]),this._v(" "),t("p",[this._v("Check your junk mail if you cannot find it.")])])}],!1,null,null,null);t.default=h.exports},yZJj:function(e,t,n){"use strict";var s=n("rwiz");n.n(s).a},ygYv:function(e,t,n){},ykPc:function(e,t,n){},ym1Z:function(e,t,n){},ym4s:function(e,t,n){},ym5W:function(e,t,n){},yni7:function(e,t,n){n("Zv1D");!function(){function e(){}function t(e){var t=e.length-1;return function(){var n=v.call(arguments,0,t),s=v.call(arguments,t);return e.apply(this,n.concat([s]))}}function n(e){return t((function(t,n){"function"!=typeof t&&(t=b(t));return e.call(this,(function(e){return t.apply(e,[e].concat(n))}))}))}function s(e){var t=v.call(arguments,1);return function(){return e.apply(this,t)}}function i(e,t){if(!t)throw new Error("prayer failed: "+e)}function r(e){i("a direction was passed",e===y||e===w)}function a(e,t,n){i("a parent is always present",e),i("leftward is properly set up",t?t[w]===n&&t.parent===e:e.ends[y]===n),i("rightward is properly set up",n?n[y]===t&&n.parent===e:e.ends[w]===t)}function o(){window.console&&console.warn('You are using the MathQuill API without specifying an interface version, which will fail in v1.0.0. Easiest fix is to do the following before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (2014–2015) → v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')}function l(e){return o(),Ne(e)}function c(t){function n(e){var t,n;return e&&e.nodeType?(n=(t=_(e).children(".mq-root-block").attr(Fe))&&C.byId[t].controller)?i[n.KIND_OF_MQ](n):null:null}function s(e,t){var n,s,r;for(n in t&&t.handlers&&(t.handlers={fns:t.handlers,APIClasses:i}),t)t.hasOwnProperty(n)&&(s=t[n],r=P[n],e[n]=r?r(s):s)}var i,r,a;if(!(R<=t&&t<=M))throw"Only interface versions between "+R+" and "+M+" supported. You specified: "+t;for(a in i={},n.L=y,n.R=w,n.saneKeyboardEvents=B,n.config=function(e){return s(D.p,e),this},n.registerEmbed=function(e,t){if(!/^[a-z][a-z0-9]*$/i.test(e))throw"Embed name must start with letter and be only letters and digits";N[e]=t},r=i.AbstractMathQuill=g(A,(function(e){e.init=function(e){this.__controller=e,this.__options=e.options,this.id=e.id,this.data=e.data},e.__mathquillify=function(e){var t,n=this.__controller,s=n.root,i=n.container;n.createTextarea(),t=i.addClass(e).contents().detach(),s.jQ=_('<span class="mq-root-block"/>').attr(Fe,s.id).appendTo(i),this.latex(t.text()),this.revert=function(){return i.empty().unbind(".mathquill").removeClass("mq-editable-field mq-math-mode mq-text-mode").append(t)}},e.config=function(e){return s(this.__options,e),this},e.el=function(){return this.__controller.container[0]},e.text=function(){return this.__controller.exportText()},e.latex=function(e){return arguments.length>0?(this.__controller.renderLatexMath(e),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this):this.__controller.exportLatex()},e.html=function(){return this.__controller.root.jQ.html().replace(/ mathquill-(?:command|block)-id="?\d+"?/g,"").replace(/<span class="?mq-cursor( mq-blink)?"?>.?<\/span>/i,"").replace(/ mq-hasCursor|mq-hasCursor ?/,"").replace(/ class=(""|(?= |>))/g,"")},e.reflow=function(){return this.__controller.root.postOrder("reflow"),this}})),n.prototype=r.prototype,i.EditableField=g(r,(function(t,n){t.__mathquillify=function(){return n.__mathquillify.apply(this,arguments),this.__controller.editable=!0,this.__controller.delegateMouseEvents(),this.__controller.editablesTextareaEvents(),this},t.focus=function(){return this.__controller.textarea.focus(),this},t.blur=function(){return this.__controller.textarea.blur(),this},t.write=function(e){return this.__controller.writeLatex(e),this.__controller.scrollHoriz(),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this},t.cmd=function(e){var t,n=this.__controller.notify(),s=n.cursor;return/^\\[a-z]+$/i.test(e)?(e=e.slice(1),(t=j[e]||Ie[e])&&(e=t(e),s.selection&&e.replaces(s.replaceSelection()),e.createLeftOf(s.show()),this.__controller.scrollHoriz())):s.parent.write(s,e),n.blurred&&s.hide().parent.blur(),this},t.select=function(){var e=this.__controller;for(e.notify("move").cursor.insAtRightEnd(e.root);e.cursor[y];)e.selectLeft();return this},t.clearSelection=function(){return this.__controller.cursor.clearSelection(),this},t.moveToDirEnd=function(e){return this.__controller.notify("move").cursor.insAtDirEnd(e,this.__controller.root),this},t.moveToLeftEnd=function(){return this.moveToDirEnd(y)},t.moveToRightEnd=function(){return this.moveToDirEnd(w)},t.keystroke=function(t){var n;for(t=t.replace(/^\s+|\s+$/g,"").split(/\s+/),n=0;n<t.length;n+=1)this.__controller.keystroke(t[n],{preventDefault:e});return this},t.typedText=function(e){for(var t=0;t<e.length;t+=1)this.__controller.typedText(e.charAt(t));return this},t.dropEmbedded=function(e,t,n){var s=e-_(window).scrollLeft(),i=t-_(window).scrollTop(),r=document.elementFromPoint(s,i);this.__controller.seek(_(r),e,t),Te().setOptions(n).createLeftOf(this.__controller.cursor)},t.clickAt=function(e,t,n){n=n||document.elementFromPoint(e,t);var s=this.__controller,i=s.root;return Me.contains(i.jQ[0],n)||(n=i.jQ[0]),s.seek(_(n),e+pageXOffset,t+pageYOffset),s.blurred&&this.focus(),this},t.ignoreNextMousedown=function(e){return this.__controller.cursor.options.ignoreNextMousedown=e,this}})),n.EditableField=function(){throw"wtf don't call me, I'm 'abstract'"},n.EditableField.prototype=i.EditableField.prototype,I)!function(e,s){var r=i[e]=s(i);n[e]=function(s,i){var a,o=n(s);return o instanceof r||!s||!s.nodeType?o:((a=T(r.RootBlock(),_(s),D())).KIND_OF_MQ=e,r(a).__mathquillify(i,t))},n[e].prototype=r.prototype}(a,I[a]);return n}function u(e){var t,n="moveOutOf deleteOutOf selectOutOf upOutOf downOutOf".split(" ");for(t=0;t<n.length;t+=1)!function(t){e[t]=function(e){this.controller.handle(t,e)}}(n[t]);e.reflow=function(){this.controller.handle("reflow"),this.controller.handle("edited"),this.controller.handle("edit")}}function d(e,t,n){return g(K,{ctrlSeq:e,htmlTemplate:"<"+t+" "+n+">&0</"+t+">"})}function h(e){var t=this.parent,n=e;do{if(n[w])return e.insLeftOf(t);n=n.parent.parent}while(n!==t);e.insRightOf(t)}function p(e,t){e.jQadd=function(){t.jQadd.apply(this,arguments),this.delimjQs=this.jQ.children(":first").add(this.jQ.children(":last")),this.contentjQ=this.jQ.children(":eq(1)")},e.reflow=function(){var e=this.contentjQ.outerHeight()/parseFloat(this.contentjQ.css("fontSize"));pe(this.delimjQs,Be(1+.2*(e-1),1.2),1.2*e)}}function f(e,t){t=t||e;var n=Se[e],i=Se[t];O[e]=s(Oe,y,e,n,t,i),O[n]=s(Oe,w,e,n,t,i)}var m,v,b,g,y,w,_,k,C,x,j,O,S,E,T,I,D,P,A,N,R,M,L,F,B,q,$,U,z,V,H,W,Q,K,Y,G,X,J,Z,ee,te,ne,se,ie,re,ae,oe,le,ce,ue,de,he,pe,fe,me,ve,be,ge,ye,we,_e,ke,Ce,xe,je,Oe,Se,Ee,Te,Ie,De,Pe,Ae,Ne,Re,Me=window.jQuery,Le="mathquill-command-id",Fe="mathquill-block-id",Be=Math.min,qe=Math.max;if(!Me)throw"MathQuill requires jQuery 1.5.2+ to be loaded first";for(re in v=[].slice,b=t((function(e,n){return t((function(t,s){if(e in t)return t[e].apply(t,n.concat(s))}))})),g=function(e,t,n){function s(e){return"object"==typeof e}function i(e){return"function"==typeof e}function r(){}return function e(n,a){function o(){var e=new l;return i(e.init)&&e.init.apply(e,arguments),e}function l(){}var c,u,d;return void 0===a&&(a=n,n=Object),o.Bare=l,c=r.prototype=n.prototype,(u=l.prototype=o.prototype=o.p=new r).constructor=o,o.extend=function(t){return e(o,t)},(o.open=function(e){if(d={},i(e)?d=e.call(o,u,c,o,n):s(e)&&(d=e),s(d))for(var r in d)t.call(d,r)&&(u[r]=d[r]);return i(u.init)||(u.init=n),o})(a)}}(0,{}.hasOwnProperty),y=-1,w=1,_=g(Me,(function(e){e.insDirOf=function(e,t){return e===y?this.insertBefore(t.first()):this.insertAfter(t.last())},e.insAtDirEnd=function(e,t){return e===y?this.prependTo(t):this.appendTo(t)}})),k=g((function(e){e.parent=0,e[y]=0,e[w]=0,e.init=function(e,t,n){this.parent=e,this[y]=t,this[w]=n},this.copy=function(e){return k(e.parent,e[y],e[w])}})),C=g((function(e){e[y]=0,e[w]=0,e.parent=0;var t=0;this.byId={},e.init=function(){this.id=t+=1,C.byId[this.id]=this,this.ends={},this.ends[y]=0,this.ends[w]=0},e.dispose=function(){delete C.byId[this.id]},e.toString=function(){return"{{ MathQuill Node #"+this.id+" }}"},e.jQ=_(),e.jQadd=function(e){return this.jQ=this.jQ.add(e)},e.jQize=function(e){function t(e){var n,s;for(e.getAttribute&&(n=e.getAttribute("mathquill-command-id"),s=e.getAttribute("mathquill-block-id"),n&&C.byId[n].jQadd(e),s&&C.byId[s].jQadd(e)),e=e.firstChild;e;e=e.nextSibling)t(e)}var n;for(e=_(e||this.html()),n=0;n<e.length;n+=1)t(e[n]);return e},e.createDir=function(e,t){r(e);var n=this;return n.jQize(),n.jQ.insDirOf(e,t.jQ),t[e]=n.adopt(t.parent,t[y],t[w]),n},e.createLeftOf=function(e){return this.createDir(y,e)},e.selectChildren=function(e,t){return E(e,t)},e.bubble=n((function(e){var t;for(t=this;t&&!1!==e(t);t=t.parent);return this})),e.postOrder=n((function(e){return function t(n){n.eachChild(t),e(n)}(this),this})),e.isEmpty=function(){return 0===this.ends[y]&&0===this.ends[w]},e.isStyleBlock=function(){return!1},e.children=function(){return x(this.ends[y],this.ends[w])},e.eachChild=function(){var e=this.children();return e.each.apply(e,arguments),this},e.foldChildren=function(e,t){return this.children().fold(e,t)},e.withDirAdopt=function(e,t,n,s){return x(this,this).withDirAdopt(e,t,n,s),this},e.adopt=function(e,t,n){return x(this,this).adopt(e,t,n),this},e.disown=function(){return x(this,this).disown(),this},e.remove=function(){return this.jQ.remove(),this.postOrder("dispose"),this.disown()}})),x=g((function(e){e.init=function(e,t,n){if(n===m&&(n=y),r(n),i("no half-empty fragments",!e==!t),this.ends={},e){i("withDir is passed to Fragment",e instanceof C),i("oppDir is passed to Fragment",t instanceof C),i("withDir and oppDir have the same parent",e.parent===t.parent),this.ends[n]=e,this.ends[-n]=t;var s=this.fold([],(function(e,t){return e.push.apply(e,t.jQ.get()),e}));this.jQ=this.jQ.add(s)}},e.jQ=_(),e.withDirAdopt=function(e,t,n,s){return e===y?this.adopt(t,n,s):this.adopt(t,s,n)},e.adopt=function(e,t,n){var s,i,r;return a(e,t,n),(s=this).disowned=!1,(i=s.ends[y])?(r=s.ends[w],t||(e.ends[y]=i),n?n[y]=r:e.ends[w]=r,s.ends[w][w]=n,s.each((function(n){n[y]=t,n.parent=e,t&&(t[w]=n),t=n})),s):this},e.disown=function(){var e,t,n=this,s=n.ends[y];return!s||n.disowned?n:(n.disowned=!0,e=n.ends[w],a(t=s.parent,s[y],s),a(t,e,e[w]),s[y]?s[y][w]=e[w]:t.ends[y]=e[w],e[w]?e[w][y]=s[y]:t.ends[w]=s[y],n)},e.remove=function(){return this.jQ.remove(),this.each("postOrder","dispose"),this.disown()},e.each=n((function(e){var t=this,n=t.ends[y];if(!n)return t;for(;n!==t.ends[w][w]&&!1!==e(n);n=n[w]);return t})),e.fold=function(e,t){return this.each((function(n){e=t.call(this,e,n)})),e}})),j={},O={},S=g(k,(function(e){e.init=function(e,t){this.parent=e,this.options=t;var n=this.jQ=this._jQ=_('<span class="mq-cursor">&#8203;</span>');this.blink=function(){n.toggleClass("mq-blink")},this.upDownCache={}},e.show=function(){return this.jQ=this._jQ.removeClass("mq-blink"),"intervalId"in this?clearInterval(this.intervalId):(this[w]?this.selection&&this.selection.ends[y][y]===this[y]?this.jQ.insertBefore(this.selection.jQ):this.jQ.insertBefore(this[w].jQ.first()):this.jQ.appendTo(this.parent.jQ),this.parent.focus()),this.intervalId=setInterval(this.blink,500),this},e.hide=function(){return"intervalId"in this&&clearInterval(this.intervalId),delete this.intervalId,this.jQ.detach(),this.jQ=_(),this},e.withDirInsertAt=function(e,t,n,s){var i=this.parent;this.parent=t,this[e]=n,this[-e]=s,i!==t&&i.blur&&i.blur(this)},e.insDirOf=function(e,t){return r(e),this.jQ.insDirOf(e,t.jQ),this.withDirInsertAt(e,t.parent,t[e],t),this.parent.jQ.addClass("mq-hasCursor"),this},e.insLeftOf=function(e){return this.insDirOf(y,e)},e.insRightOf=function(e){return this.insDirOf(w,e)},e.insAtDirEnd=function(e,t){return r(e),this.jQ.insAtDirEnd(e,t.jQ),this.withDirInsertAt(e,t,0,t.ends[e]),t.focus(),this},e.insAtLeftEnd=function(e){return this.insAtDirEnd(y,e)},e.insAtRightEnd=function(e){return this.insAtDirEnd(w,e)},e.jumpUpDown=function(e,t){var n,s,i=this;i.upDownCache[e.id]=k.copy(i),(n=i.upDownCache[t.id])?n[w]?i.insLeftOf(n[w]):i.insAtRightEnd(n.parent):(s=i.offset().left,t.seek(s,i))},e.offset=function(){var e=this.jQ.removeClass("mq-cursor").offset();return this.jQ.addClass("mq-cursor"),e},e.unwrapGramp=function(){var e=this.parent.parent,t=e.parent,n=e[w],s=e[y];if(e.disown().eachChild((function(i){i.isEmpty()||(i.children().adopt(t,s,n).each((function(t){t.jQ.insertBefore(e.jQ.first())})),s=i.ends[w])})),!this[w])if(this[y])this[w]=this[y][w];else for(;!this[w];){if(this.parent=this.parent[w],!this.parent){this[w]=e[w],this.parent=t;break}this[w]=this.parent.ends[y]}this[w]?this.insLeftOf(this[w]):this.insAtRightEnd(t),e.jQ.remove(),e[y].siblingDeleted&&e[y].siblingDeleted(this.options,w),e[w].siblingDeleted&&e[w].siblingDeleted(this.options,y)},e.startSelection=function(){var e,t=this.anticursor=k.copy(this),n=t.ancestors={};for(e=t;e.parent;e=e.parent)n[e.parent.id]=e},e.endSelection=function(){delete this.anticursor},e.select=function(){var e,t,n,s,r,a,o,l=this.anticursor;if(this[y]===l[y]&&this.parent===l.parent)return!1;for(e=this;e.parent;e=e.parent)if(e.parent.id in l.ancestors){t=e.parent;break}if(i("cursor and anticursor in the same tree",t),n=l.ancestors[t.id],a=w,e[y]!==n)for(o=e;o;o=o[w])if(o[w]===n[w]){a=y,s=e,r=n;break}return a===w&&(s=n,r=e),s instanceof k&&(s=s[w]),r instanceof k&&(r=r[y]),this.hide().selection=t.selectChildren(s,r),this.insDirOf(a,this.selection.ends[a]),this.selectionChanged(),!0},e.clearSelection=function(){return this.selection&&(this.selection.clear(),delete this.selection,this.selectionChanged()),this},e.deleteSelection=function(){this.selection&&(this[y]=this.selection.ends[y][y],this[w]=this.selection.ends[w][w],this.selection.remove(),this.selectionChanged(),delete this.selection)},e.replaceSelection=function(){var e=this.selection;return e&&(this[y]=e.ends[y][y],this[w]=e.ends[w][w],delete this.selection),e}})),E=g(x,(function(e,t){e.init=function(){t.init.apply(this,arguments),this.jQ=this.jQ.wrapAll('<span class="mq-selection"></span>').parent()},e.adopt=function(){return this.jQ.replaceWith(this.jQ=this.jQ.children()),t.adopt.apply(this,arguments)},e.clear=function(){return this.jQ.replaceWith(this.jQ[0].childNodes),this},e.join=function(e){return this.fold("",(function(t,n){return t+n[e]()}))}})),T=g((function(e){e.init=function(e,t,n){this.id=e.id,this.data={},this.root=e,this.container=t,this.options=n,e.controller=this,this.cursor=e.cursor=S(e,n)},e.handle=function(e,t){var n,s=this.options.handlers;s&&s.fns[e]&&(n=s.APIClasses[this.KIND_OF_MQ](this),t===y||t===w?s.fns[e](t,n):s.fns[e](n))};var t=[];this.onNotify=function(e){t.push(e)},e.notify=function(){for(var e=0;e<t.length;e+=1)t[e].apply(this.cursor,arguments);return this}})),I={},D=g(),P={},A=g(),N={},l.prototype=A.p,l.VERSION="v0.10.1",l.interfaceVersion=function(e){if(1!==e)throw"Only interface version 1 supported. You specified: "+e;return(o=function(){window.console&&console.warn('You called MathQuill.interfaceVersion(1); to specify the interface version, which will fail in v1.0.0. You can fix this easily by doing this before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (2014–2015) → v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')})(),l},l.getInterface=c,R=c.MIN=1,M=c.MAX=2,l.noConflict=function(){return window.MathQuill=L,l},L=window.MathQuill,window.MathQuill=l,F=g((function(e,t,n){function s(e,t){throw"Parse Error: "+t+" at "+(e=e?"'"+e+"'":"EOF")}var r,a,o;e.init=function(e){this._=e},e.parse=function(e){return this.skip(o)._(""+e,(function(e,t){return t}),s)},e.or=function(e){i("or is passed a parser",e instanceof n);var t=this;return n((function(n,s,i){return t._(n,s,(function(t){return e._(n,s,i)}))}))},e.then=function(e){var t=this;return n((function(s,r,a){return t._(s,(function(t,s){var o=e instanceof n?e:e(s);return i("a parser is returned",o instanceof n),o._(t,r,a)}),a)}))},e.many=function(){var e=this;return n((function(t,n,s){function i(e,n){return t=e,a.push(n),!0}function r(){return!1}for(var a=[];e._(t,i,r););return n(t,a)}))},e.times=function(e,t){arguments.length<2&&(t=e);var s=this;return n((function(n,i,r){function a(e,t){return d.push(t),n=e,!0}function o(e,t){return c=t,n=e,!1}function l(e,t){return!1}var c,u,d=[],h=!0;for(u=0;u<e;u+=1)if(!(h=s._(n,a,o)))return r(n,c);for(;u<t&&h;u+=1)h=s._(n,a,l);return i(n,d)}))},e.result=function(e){return this.then(a(e))},e.atMost=function(e){return this.times(0,e)},e.atLeast=function(e){var t=this;return t.times(e).then((function(e){return t.many().map((function(t){return e.concat(t)}))}))},e.map=function(e){return this.then((function(t){return a(e(t))}))},e.skip=function(e){return this.then((function(t){return e.result(t)}))},this.string=function(e){var t=e.length,s="expected '"+e+"'";return n((function(n,i,r){var a=n.slice(0,t);return a===e?i(n.slice(t),a):r(n,s)}))},r=this.regex=function(e){i("regexp parser is anchored","^"===e.toString().charAt(1));var t="expected "+e;return n((function(n,s,i){var r,a=e.exec(n);return a?(r=a[0],s(n.slice(r.length),r)):i(n,t)}))},a=n.succeed=function(e){return n((function(t,n){return n(t,e)}))},n.fail=function(e){return n((function(t,n,s){return s(t,e)}))},n.letter=r(/^[a-z]/i),n.letters=r(/^[a-z]*/i),n.digit=r(/^[0-9]/),n.digits=r(/^[0-9]*/),n.whitespace=r(/^\s+/),n.optWhitespace=r(/^\s*/),n.any=n((function(e,t,n){return e?t(e.slice(1),e.charAt(0)):n(e,"expected any character")})),n.all=n((function(e,t,n){return t("",e)})),o=n.eof=n((function(e,t,n){return e?n(e,"expected EOF"):t(e,e)}))})),B=function(){function t(e){var t,s=e.which||e.keyCode,i=n[s],r=[];return e.ctrlKey&&r.push("Ctrl"),e.originalEvent&&e.originalEvent.metaKey&&r.push("Meta"),e.altKey&&r.push("Alt"),e.shiftKey&&r.push("Shift"),t=i||String.fromCharCode(s),r.length||i?(r.push(t),r.join("-")):t}var n={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"};return function(n,s){function i(e){m=e,clearTimeout(c),c=setTimeout(e)}function r(t){i((function(n){m=e,clearTimeout(c),t(n)}))}function a(){s.keystroke(t(d),d)}function o(){if(!function(){var e=p[0];return"selectionStart"in e&&e.selectionStart!==e.selectionEnd}()){var e=p.val();1===e.length?(p.val(""),s.typedText(e)):e&&p[0].select&&p[0].select()}}function l(){var e=p.val();p.val(""),e&&s.paste(e)}var c,u,d=null,h=null,p=Me(n),f=Me(s.container||p),m=e;return f.bind("keydown keypress input keyup focusout paste",(function(e){m(e)})),u=!1,f.bind({keydown:function(e){d=e,h=null,u&&r((function(e){e&&"focusout"===e.type||!p[0].select||p[0].select()})),a()},keypress:function(e){d&&h&&a(),h=e,i(o)},keyup:function(e){d&&!h&&i(o)},focusout:function(){d=h=null},cut:function(){r((function(){s.cut()}))},copy:function(){r((function(){s.copy()}))},paste:function(e){p.focus(),i(l)}}),{select:function(t){m(),m=e,clearTimeout(c),p.val(t),t&&p[0].select&&p[0].select(),u=!!t}}}}(),T.open((function(e,t){e.exportText=function(){return this.root.foldChildren("",(function(e,t){return e+t.text()}))}})),T.open((function(e){e.focusBlurEvents=function(){function e(){clearTimeout(n),r.selection&&r.selection.jQ.addClass("mq-blur"),t()}function t(){r.hide().parent.blur(),s.container.removeClass("mq-focused"),_(window).unbind("blur",e)}var n,s=this,i=s.root,r=s.cursor;s.textarea.focus((function(){s.blurred=!1,clearTimeout(n),s.container.addClass("mq-focused"),r.parent||r.insAtRightEnd(i),r.selection?(r.selection.jQ.removeClass("mq-blur"),s.selectionChanged()):r.show()})).blur((function(){s.blurred=!0,n=setTimeout((function(){i.postOrder("intentionalBlur"),r.clearSelection().endSelection(),t()})),_(window).bind("blur",e)})),s.blurred=!0,r.hide().parent.blur()}})),T.open((function(e){e.keystroke=function(e,t){this.cursor.parent.keystroke(e,t,this)}})),C.open((function(e){e.keystroke=function(e,t,n){var s=n.cursor;switch(e){case"Ctrl-Shift-Backspace":case"Ctrl-Backspace":n.ctrlDeleteDir(y);break;case"Shift-Backspace":case"Backspace":n.backspace();break;case"Esc":case"Tab":return void n.escapeDir(w,e,t);case"Shift-Tab":case"Shift-Esc":return void n.escapeDir(y,e,t);case"End":n.notify("move").cursor.insAtRightEnd(s.parent);break;case"Ctrl-End":n.notify("move").cursor.insAtRightEnd(n.root);break;case"Shift-End":for(;s[w];)n.selectRight();break;case"Ctrl-Shift-End":for(;s[w]||s.parent!==n.root;)n.selectRight();break;case"Home":n.notify("move").cursor.insAtLeftEnd(s.parent);break;case"Ctrl-Home":n.notify("move").cursor.insAtLeftEnd(n.root);break;case"Shift-Home":for(;s[y];)n.selectLeft();break;case"Ctrl-Shift-Home":for(;s[y]||s.parent!==n.root;)n.selectLeft();break;case"Left":n.moveLeft();break;case"Shift-Left":n.selectLeft();break;case"Ctrl-Left":break;case"Right":n.moveRight();break;case"Shift-Right":n.selectRight();break;case"Ctrl-Right":break;case"Up":n.moveUp();break;case"Down":n.moveDown();break;case"Shift-Up":if(s[y])for(;s[y];)n.selectLeft();else n.selectLeft();case"Shift-Down":if(s[w])for(;s[w];)n.selectRight();else n.selectRight();case"Ctrl-Up":case"Ctrl-Down":break;case"Ctrl-Shift-Del":case"Ctrl-Del":n.ctrlDeleteDir(w);break;case"Shift-Del":case"Del":n.deleteForward();break;case"Meta-A":case"Ctrl-A":for(n.notify("move").cursor.insAtRightEnd(n.root);s[y];)n.selectLeft();break;default:return}t.preventDefault(),n.scrollHoriz()},e.moveOutOf=e.moveTowards=e.deleteOutOf=e.deleteTowards=e.unselectInto=e.selectOutOf=e.selectTowards=function(){i("overridden or never called on this node")}})),T.open((function(e){function t(e,t){var n=e.notify("upDown").cursor,s=t+"Into",i=t+"OutOf";return n[w][s]?n.insAtLeftEnd(n[w][s]):n[y][s]?n.insAtRightEnd(n[y][s]):n.parent.bubble((function(e){var t=e[i];if(t&&("function"==typeof t&&(t=e[i](n)),t instanceof C&&n.jumpUpDown(e,t),!0!==t))return!1})),e}this.onNotify((function(e){"move"!==e&&"upDown"!==e||this.show().clearSelection()})),e.escapeDir=function(e,t,n){r(e);var s=this.cursor;if(s.parent!==this.root&&n.preventDefault(),s.parent!==this.root)return s.parent.moveOutOf(e,s),this.notify("move")},P.leftRightIntoCmdGoes=function(e){if(e&&"up"!==e&&"down"!==e)throw'"up" or "down" required for leftRightIntoCmdGoes option, got "'+e+'"';return e},e.moveDir=function(e){r(e);var t=this.cursor,n=t.options.leftRightIntoCmdGoes;return t.selection?t.insDirOf(e,t.selection.ends[e]):t[e]?t[e].moveTowards(e,t,n):t.parent.moveOutOf(e,t,n),this.notify("move")},e.moveLeft=function(){return this.moveDir(y)},e.moveRight=function(){return this.moveDir(w)},e.moveUp=function(){return t(this,"up")},e.moveDown=function(){return t(this,"down")},this.onNotify((function(e){"upDown"!==e&&(this.upDownCache={})})),this.onNotify((function(e){"edit"===e&&this.show().deleteSelection()})),e.deleteDir=function(e){var t,n;return r(e),n=(t=this.cursor).selection,this.notify("edit"),n||(t[e]?t[e].deleteTowards(e,t):t.parent.deleteOutOf(e,t)),t[y].siblingDeleted&&t[y].siblingDeleted(t.options,w),t[w].siblingDeleted&&t[w].siblingDeleted(t.options,y),t.parent.bubble("reflow"),this},e.ctrlDeleteDir=function(e){r(e);var t=this.cursor;return!t[y]||t.selection?this.deleteDir():(this.notify("edit"),x(t.parent.ends[y],t[y]).remove(),t.insAtDirEnd(y,t.parent),t[y].siblingDeleted&&t[y].siblingDeleted(t.options,w),t[w].siblingDeleted&&t[w].siblingDeleted(t.options,y),t.parent.bubble("reflow"),this)},e.backspace=function(){return this.deleteDir(y)},e.deleteForward=function(){return this.deleteDir(w)},this.onNotify((function(e){"select"!==e&&this.endSelection()})),e.selectDir=function(e){var t,n=this.notify("select").cursor,s=n.selection;r(e),n.anticursor||n.startSelection(),(t=n[e])?s&&s.ends[e]===t&&n.anticursor[-e]!==t?t.unselectInto(e,n):t.selectTowards(e,n):n.parent.selectOutOf(e,n),n.clearSelection(),n.select()||n.show()},e.selectLeft=function(){return this.selectDir(y)},e.selectRight=function(){return this.selectDir(w)}})),q=function(){function e(e){var t,n=e[0]||W();for(t=1;t<e.length;t+=1)e[t].children().adopt(n,n.ends[w],0);return n}var t=F.string,n=F.regex,s=F.letter,i=F.any,r=F.optWhitespace,a=F.succeed,o=F.fail,l=s.map((function(e){return ee(e)})),c=n(/^[^${}\\_^]/).map((function(e){return V(e)})),u=n(/^[^\\a-eg-zA-Z]/).or(t("\\").then(n(/^[a-z]+/i).or(n(/^\s+/).result(" ")).or(i))).then((function(e){var t=j[e];return t?t(e).parser():o("unknown command: \\"+e)})).or(l).or(c),d=t("{").then((function(){return p})).skip(t("}")),h=r.then(d.or(u.map((function(e){var t=W();return e.adopt(t,0,0),t})))),p=h.many().map(e).skip(r),f=t("[").then(h.then((function(e){return"]"!==e.join("latex")?a(e):o()})).many().map(e).skip(r)).skip(t("]")),m=p;return m.block=h,m.optBlock=f,m}(),T.open((function(e,t){e.exportLatex=function(){return this.root.latex().replace(/(\\[a-z]+) (?![a-z])/gi,"$1")},e.writeLatex=function(e){var t=this.notify("edit").cursor,n=F.all,s=F.eof,i=q.skip(s).or(n.result(!1)).parse(e);return i&&!i.isEmpty()&&(i.children().adopt(t.parent,t[y],t[w]),i.jQize().insertBefore(t.jQ),t[y]=i.ends[w],i.finalizeInsert(t.options,t),i.ends[w][w].siblingCreated&&i.ends[w][w].siblingCreated(t.options,y),i.ends[y][y].siblingCreated&&i.ends[y][y].siblingCreated(t.options,w),t.parent.bubble("reflow")),this},e.renderLatexMath=function(e){var t,n,s=this.root,i=this.cursor,r=F.all,a=F.eof,o=q.skip(a).or(r.result(!1)).parse(e);s.eachChild("postOrder","dispose"),s.ends[y]=s.ends[w]=0,o&&o.children().adopt(s,0,0),t=s.jQ,o?(n=o.join("html"),t.html(n),s.jQize(t.children()),s.finalizeInsert(i.options)):t.empty(),delete i.selection,i.insAtRightEnd(s)},e.renderLatexText=function(e){var t,n,s,i,r,a,o,l,c=this.root,u=this.cursor;if(c.jQ.children().slice(1).remove(),c.eachChild("postOrder","dispose"),c.ends[y]=c.ends[w]=0,delete u.selection,u.show().insAtRightEnd(c),t=F.regex,n=F.string,s=F.eof,i=F.all,r=n("$").then(q).skip(n("$").or(s)).map((function(e){var t,n=G(u);return n.createBlocks(),t=n.ends[y],e.children().adopt(t,0,0),n})),a=n("\\$").result("$").or(t(/^[^$]/)).map(V),o=r.or(a).many().skip(s).or(i.result(!1)).parse(e)){for(l=0;l<o.length;l+=1)o[l].adopt(c,c.ends[w],0);c.jQize().appendTo(c.jQ),c.finalizeInsert(u.options)}}})),T.open((function(t){D.p.ignoreNextMousedown=e,t.delegateMouseEvents=function(){var t=this.root.jQ;this.container.bind("mousedown.mathquill",(function(n){function s(e){r=_(e.target)}function i(e){l.anticursor||l.startSelection(),o.seek(r,e.pageX,e.pageY).cursor.select(),r=m}var r,a=_(n.target).closest(".mq-root-block"),o=C.byId[a.attr(Fe)||t.attr(Fe)].controller,l=o.cursor,c=l.blink,u=o.textareaSpan,d=o.textarea;n.preventDefault(),n.target.unselectable=!0,l.options.ignoreNextMousedown(n)||(l.options.ignoreNextMousedown=e,o.blurred&&(o.editable||a.prepend(u),d.focus()),l.blink=e,o.seek(_(n.target),n.pageX,n.pageY).cursor.startSelection(),a.mousemove(s),_(n.target.ownerDocument).mousemove(i).mouseup((function e(t){l.blink=c,l.selection||(o.editable?l.show():u.detach()),a.unbind("mousemove",s),_(t.target.ownerDocument).unbind("mousemove",i).unbind("mouseup",e)})))}))}})),T.open((function(e){e.seek=function(e,t,n){var s,r,a,o=this.notify("select").cursor;return e&&((s=e.attr(Fe)||e.attr(Le))||(s=(r=e.parent()).attr(Fe)||r.attr(Le))),i("nodeId is the id of some Node that exists",a=s?C.byId[s]:this.root),o.clearSelection().show(),a.seek(t,o),this.scrollHoriz(),this}})),T.open((function(e){e.scrollHoriz=function(){var e,t,n,s,i,r=this.cursor,a=r.selection,o=this.root.jQ[0].getBoundingClientRect();if(a)if(s=(n=a.jQ[0].getBoundingClientRect()).left-(o.left+20),i=n.right-(o.right-20),a.ends[y]===r[w])if(s<0)t=s;else{if(!(i>0))return;t=n.left-i<o.left+20?s:i}else if(i>0)t=i;else{if(!(s<0))return;t=n.right-s>o.right-20?i:s}else if((e=r.jQ[0].getBoundingClientRect().left)>o.right-20)t=e-(o.right-20);else{if(!(e<o.left+20))return;t=e-(o.left+20)}this.root.jQ.stop().animate({scrollLeft:"+="+t},100)}})),T.open((function(e){D.p.substituteTextarea=function(){return _("<textarea autocapitalize=off autocomplete=off autocorrect=off spellcheck=false x-palm-disable-ste-all=true />")[0]},e.createTextarea=function(){var e,t=this.textareaSpan=_('<span class="mq-textarea"></span>'),n=this.options.substituteTextarea();if(!n.nodeType)throw"substituteTextarea() must return a DOM element, got "+n;n=this.textarea=_(n).appendTo(t),(e=this).cursor.selectionChanged=function(){e.selectionChanged()}},e.selectionChanged=function(){var e=this;fe(e.container[0]),e.textareaSelectionTimeout===m&&(e.textareaSelectionTimeout=setTimeout((function(){e.setTextareaSelection()})))},e.setTextareaSelection=function(){this.textareaSelectionTimeout=m;var e="";this.cursor.selection&&(e=this.cursor.selection.join("latex"),this.options.statelessClipboard&&(e="$"+e+"$")),this.selectFn(e)},e.staticMathTextareaEvents=function(){function e(){i.detach(),t.blurred=!0}var t=this,n=(t.root,t.cursor),s=t.textarea,i=t.textareaSpan;this.container.prepend(Me('<span class="mq-selectable">').text("$"+t.exportLatex()+"$")),t.blurred=!0,s.bind("cut paste",!1).bind("copy",(function(){t.setTextareaSelection()})).focus((function(){t.blurred=!1})).blur((function(){n.selection&&n.selection.clear(),setTimeout(e)})),t.selectFn=function(e){s.val(e),e&&s.select()}},D.p.substituteKeyboardEvents=B,e.editablesTextareaEvents=function(){var e=this.textarea,t=this.textareaSpan,n=this.options.substituteKeyboardEvents(e,this);this.selectFn=function(e){n.select(e)},this.container.prepend(t),this.focusBlurEvents()},e.typedText=function(e){if("\n"===e)return this.handle("enter");var t=this.notify().cursor;t.parent.write(t,e),this.scrollHoriz()},e.cut=function(){var e=this,t=e.cursor;t.selection&&setTimeout((function(){e.notify("edit"),t.parent.bubble("reflow")}))},e.copy=function(){this.setTextareaSelection()},e.paste=function(e){this.options.statelessClipboard&&(e="$"===e.slice(0,1)&&"$"===e.slice(-1)?e.slice(1,-1):"\\text{"+e+"}"),this.writeLatex(e).cursor.show()}})),$=g(C,(function(e,t){e.finalizeInsert=function(e,t){var n=this;n.postOrder("finalizeTree",e),n.postOrder("contactWeld",t),n.postOrder("blur"),n.postOrder("reflow"),n[w].siblingCreated&&n[w].siblingCreated(e,y),n[y].siblingCreated&&n[y].siblingCreated(e,w),n.bubble("reflow")}})),U=g($,(function(e,t){e.init=function(e,n,s){var i=this;t.init.call(i),i.ctrlSeq||(i.ctrlSeq=e),n&&(i.htmlTemplate=n),s&&(i.textTemplate=s)},e.replaces=function(e){e.disown(),this.replacedFragment=e},e.isEmpty=function(){return this.foldChildren(!0,(function(e,t){return e&&t.isEmpty()}))},e.parser=function(){var e=q.block,t=this;return e.times(t.numBlocks()).map((function(e){t.blocks=e;for(var n=0;n<e.length;n+=1)e[n].adopt(t,t.ends[w],0);return t}))},e.createLeftOf=function(e){var n=this,s=n.replacedFragment;n.createBlocks(),t.createLeftOf.call(n,e),s&&(s.adopt(n.ends[y],0,0),s.jQ.appendTo(n.ends[y].jQ)),n.finalizeInsert(e.options),n.placeCursor(e)},e.createBlocks=function(){var e,t=this,n=t.numBlocks(),s=t.blocks=Array(n);for(e=0;e<n;e+=1)(s[e]=W()).adopt(t,t.ends[w],0)},e.placeCursor=function(e){e.insAtRightEnd(this.foldChildren(this.ends[y],(function(e,t){return e.isEmpty()?e:t})))},e.moveTowards=function(e,t,n){var s=n&&this[n+"Into"];t.insAtDirEnd(-e,s||this.ends[-e])},e.deleteTowards=function(e,t){this.isEmpty()?t[e]=this.remove()[e]:this.moveTowards(e,t,null)},e.selectTowards=function(e,t){t[-e]=this,t[e]=this[e]},e.selectChildren=function(){return E(this,this)},e.unselectInto=function(e,t){t.insAtDirEnd(-e,t.anticursor.ancestors[this.id])},e.seek=function(e,t){function n(e){var t={};return t[y]=e.jQ.offset().left,t[w]=t[y]+e.jQ.outerWidth(),t}var s,i=this,r=n(i);return e<r[y]?t.insLeftOf(i):e>r[w]?t.insRightOf(i):(s=r[y],void i.eachChild((function(a){var o=n(a);return e<o[y]?(e-s<o[y]-e?a[y]?t.insAtRightEnd(a[y]):t.insLeftOf(i):t.insAtLeftEnd(a),!1):e>o[w]?void(a[w]?s=o[w]:r[w]-e<e-o[w]?t.insRightOf(i):t.insAtRightEnd(a)):(a.seek(e,t),!1)})))},e.numBlocks=function(){var e=this.htmlTemplate.match(/&\d+/g);return e?e.length:0},e.html=function(){var e,t,n,s=this,r=s.blocks,a=" mathquill-command-id="+s.id,o=s.htmlTemplate.match(/<[^<>]+>|[^<>]+/g);for(i("no unmatched angle brackets",o.join("")===this.htmlTemplate),e=0,t=o[0];t;t=o[e+=1])if("/>"===t.slice(-2))o[e]=t.slice(0,-2)+a+"/>";else if("<"===t.charAt(0)){i("not an unmatched top-level close tag","/"!==t.charAt(1)),o[e]=t.slice(0,-1)+a+">",n=1;do{i("no missing close tags",t=o[e+=1]),"</"===t.slice(0,2)?n-=1:"<"===t.charAt(0)&&"/>"!==t.slice(-2)&&(n+=1)}while(n>0)}return o.join("").replace(/>&(\d+)/g,(function(e,t){return" mathquill-block-id="+r[t].id+">"+r[t].join("html")}))},e.latex=function(){return this.foldChildren(this.ctrlSeq,(function(e,t){return e+"{"+(t.latex()||" ")+"}"}))},e.textTemplate=[""],e.text=function(){var e=this,t=0;return e.foldChildren(e.textTemplate[t],(function(n,s){t+=1;var i=s.text();return n&&"("===e.textTemplate[t]&&"("===i[0]&&")"===i.slice(-1)?n+i.slice(1,-1)+e.textTemplate[t]:n+s.text()+(e.textTemplate[t]||"")}))}})),z=g(U,(function(t,n){t.init=function(e,t,s){s||(s=e&&e.length>1?e.slice(1):e),n.init.call(this,e,t,[s])},t.parser=function(){return F.succeed(this)},t.numBlocks=function(){return 0},t.replaces=function(e){e.remove()},t.createBlocks=e,t.moveTowards=function(e,t){t.jQ.insDirOf(e,this.jQ),t[-e]=this,t[e]=this[e]},t.deleteTowards=function(e,t){t[e]=this.remove()[e]},t.seek=function(e,t){e-this.jQ.offset().left<this.jQ.outerWidth()/2?t.insLeftOf(this):t.insRightOf(this)},t.latex=function(){return this.ctrlSeq},t.text=function(){return this.textTemplate},t.placeCursor=e,t.isEmpty=function(){return!0}})),V=g(z,(function(e,t){e.init=function(e,n){t.init.call(this,e,"<span>"+(n||e)+"</span>")}})),H=g(z,(function(e,t){e.init=function(e,n,s){t.init.call(this,e,'<span class="mq-binary-operator">'+n+"</span>",s)}})),W=g($,(function(e,t){e.join=function(e){return this.foldChildren("",(function(t,n){return t+n[e]()}))},e.html=function(){return this.join("html")},e.latex=function(){return this.join("latex")},e.text=function(){return this.ends[y]===this.ends[w]&&0!==this.ends[y]?this.ends[y].text():this.join("text")},e.keystroke=function(e,n,s){return!s.options.spaceBehavesLikeTab||"Spacebar"!==e&&"Shift-Spacebar"!==e?t.keystroke.apply(this,arguments):(n.preventDefault(),void s.escapeDir("Shift-Spacebar"===e?y:w,e,n))},e.moveOutOf=function(e,t,n){n&&this.parent[n+"Into"]||!this[e]?t.insDirOf(e,this.parent):t.insAtDirEnd(-e,this[e])},e.selectOutOf=function(e,t){t.insDirOf(e,this.parent)},e.deleteOutOf=function(e,t){t.unwrapGramp()},e.seek=function(e,t){var n=this.ends[w];if(!n||n.jQ.offset().left+n.jQ.outerWidth()<e)return t.insAtRightEnd(this);if(e<this.ends[y].jQ.offset().left)return t.insAtLeftEnd(this);for(;e<n.jQ.offset().left;)n=n[y];return n.seek(e,t)},e.chToCmd=function(e,t){var n;return e.match(/^[a-eg-zA-Z]$/)?ee(e):/^\d$/.test(e)?J(e):t&&t.typingSlashWritesDivisionSymbol&&"/"===e?j["÷"](e):t&&t.typingAsteriskWritesTimesSymbol&&"*"===e?j["×"](e):(n=O[e]||j[e])?n(e):V(e)},e.write=function(e,t){var n=this.chToCmd(t,e.options);e.selection&&n.replaces(e.replaceSelection()),n.createLeftOf(e.show())},e.focus=function(){return this.jQ.addClass("mq-hasCursor"),this.jQ.removeClass("mq-empty"),this},e.blur=function(){return this.jQ.removeClass("mq-hasCursor"),this.isEmpty()&&this.jQ.addClass("mq-empty"),this}})),I.StaticMath=function(e){return g(e.AbstractMathQuill,(function(t,n){this.RootBlock=W,t.__mathquillify=function(e,t){return this.config(e),n.__mathquillify.call(this,"mq-math-mode"),this.__controller.delegateMouseEvents(),this.__controller.staticMathTextareaEvents(),this},t.init=function(){n.init.apply(this,arguments),this.__controller.root.postOrder("registerInnerField",this.innerFields=[],e.MathField)},t.latex=function(){var t=n.latex.apply(this,arguments);return arguments.length>0&&this.__controller.root.postOrder("registerInnerField",this.innerFields=[],e.MathField),t}}))},Q=g(W,u),I.MathField=function(t){return g(t.EditableField,(function(t,n){this.RootBlock=Q,t.__mathquillify=function(t,s){return this.config(t),s>1&&(this.__controller.root.reflow=e),n.__mathquillify.call(this,"mq-editable-field mq-math-mode"),delete this.__controller.root.reflow,this}}))},K=g(C,(function(e,t){function n(e){var t,n;if(e.jQ[0].normalize(),t=e.jQ[0].firstChild)return i("only node in TextBlock span is Text node",3===t.nodeType),(n=Y(t.data)).jQadd(t),e.children().disown(),n.adopt(e,0,0)}e.ctrlSeq="\\text",e.replaces=function(e){e instanceof x?this.replacedText=e.remove().jQ.text():"string"==typeof e&&(this.replacedText=e)},e.jQadd=function(e){t.jQadd.call(this,e),this.ends[y]&&this.ends[y].jQadd(this.jQ[0].firstChild)},e.createLeftOf=function(e){var n,s=this;if(t.createLeftOf.call(this,e),s[w].siblingCreated&&s[w].siblingCreated(e.options,y),s[y].siblingCreated&&s[y].siblingCreated(e.options,w),s.bubble("reflow"),e.insAtRightEnd(s),s.replacedText)for(n=0;n<s.replacedText.length;n+=1)s.write(e,s.replacedText.charAt(n))},e.parser=function(){var e=this,t=F.string,n=F.regex;return F.optWhitespace.then(t("{")).then(n(/^[^}]*/)).skip(t("}")).map((function(t){return 0===t.length?x():(Y(t).adopt(e,0,0),e)}))},e.textContents=function(){return this.foldChildren("",(function(e,t){return e+t.text}))},e.text=function(){return'"'+this.textContents()+'"'},e.latex=function(){var e=this.textContents();return 0===e.length?"":"\\text{"+e+"}"},e.html=function(){return'<span class="mq-text-mode" mathquill-command-id='+this.id+">"+this.textContents()+"</span>"},e.moveTowards=function(e,t){t.insAtDirEnd(-e,this)},e.moveOutOf=function(e,t){t.insDirOf(e,this)},e.unselectInto=e.moveTowards,e.selectTowards=U.prototype.selectTowards,e.deleteTowards=U.prototype.deleteTowards,e.selectOutOf=function(e,t){t.insDirOf(e,this)},e.deleteOutOf=function(e,t){this.isEmpty()&&t.insRightOf(this)},e.write=function(e,n){var s,i;e.show().deleteSelection(),"$"!==n?e[y]?e[y].appendText(n):Y(n).createLeftOf(e):this.isEmpty()?(e.insRightOf(this),V("\\$","$").createLeftOf(e)):e[w]?e[y]?(s=K(),(i=this.ends[y]).disown().jQ.detach(),i.adopt(s,0,0),e.insLeftOf(this),t.createLeftOf.call(s,e)):e.insLeftOf(this):e.insRightOf(this)},e.seek=function(e,t){var s,i,r,a,o,l,c,u;for(t.hide(),s=n(this),i=this.jQ.width()/this.text.length,(r=Math.round((e-this.jQ.offset().left)/i))<=0?t.insAtLeftEnd(this):r>=s.text.length?t.insAtRightEnd(this):t.insLeftOf(s.splitRight(r)),l=o=(a=e-t.show().offset().left)&&a<0?y:w;t[o]&&a*l>0;)t[o].moveTowards(o,t),l=a,a=e-t.offset().left;o*a<-o*l&&t[-o].moveTowards(-o,t),t.anticursor?t.anticursor.parent===this&&(c=t[y]&&t[y].text.length,this.anticursorPosition===c?t.anticursor=k.copy(t):(this.anticursorPosition<c?(u=t[y].splitRight(this.anticursorPosition),t[y]=u):u=t[w].splitRight(this.anticursorPosition-c),t.anticursor=k(this,u[y],u))):this.anticursorPosition=t[y]&&t[y].text.length},e.blur=function(e){W.prototype.blur.call(this),e&&(""===this.textContents()?(this.remove(),e[y]===this?e[y]=this[y]:e[w]===this&&(e[w]=this[w])):n(this))},e.focus=W.prototype.focus})),Y=g(C,(function(e,t){function n(e,t){return t.charAt(e===y?0:-1+t.length)}e.init=function(e){t.init.call(this),this.text=e},e.jQadd=function(e){this.dom=e,this.jQ=_(e)},e.jQize=function(){return this.jQadd(document.createTextNode(this.text))},e.appendText=function(e){this.text+=e,this.dom.appendData(e)},e.prependText=function(e){this.text=e+this.text,this.dom.insertData(0,e)},e.insTextAtDirEnd=function(e,t){r(t),t===w?this.appendText(e):this.prependText(e)},e.splitRight=function(e){var t=Y(this.text.slice(e)).adopt(this.parent,this,this[w]);return t.jQadd(this.dom.splitText(e)),this.text=this.text.slice(0,e),t},e.moveTowards=function(e,t){var s,i;return r(e),s=n(-e,this.text),(i=this[-e])?i.insTextAtDirEnd(s,e):Y(s).createDir(-e,t),this.deleteTowards(e,t)},e.latex=function(){return this.text},e.deleteTowards=function(e,t){this.text.length>1?e===w?(this.dom.deleteData(0,1),this.text=this.text.slice(1)):(this.dom.deleteData(-1+this.text.length,1),this.text=this.text.slice(0,-1)):(this.remove(),this.jQ.remove(),t[e]=this[e])},e.selectTowards=function(e,t){var s,i,a,o;return r(e),s=t.anticursor,i=n(-e,this.text),s[e]===this?(a=Y(i).createDir(e,t),s[e]=a,t.insDirOf(e,a)):((o=this[-e])?o.insTextAtDirEnd(i,e):(a=Y(i).createDir(-e,t)).jQ.insDirOf(-e,t.selection.jQ),1===this.text.length&&s[-e]===this&&(s[-e]=this[-e])),this.deleteTowards(e,t)}})),j.text=j.textnormal=j.textrm=j.textup=j.textmd=K,j.em=j.italic=j.italics=j.emph=j.textit=j.textsl=d("\\textit","i",'class="mq-text-mode"'),j.strong=j.bold=j.textbf=d("\\textbf","b",'class="mq-text-mode"'),j.sf=j.textsf=d("\\textsf","span",'class="mq-sans-serif mq-text-mode"'),j.tt=j.texttt=d("\\texttt","span",'class="mq-monospace mq-text-mode"'),j.textsc=d("\\textsc","span",'style="font-variant:small-caps" class="mq-text-mode"'),j.uppercase=d("\\uppercase","span",'style="text-transform:uppercase" class="mq-text-mode"'),j.lowercase=d("\\lowercase","span",'style="text-transform:lowercase" class="mq-text-mode"'),G=g(U,(function(e,t){e.init=function(e){t.init.call(this,"$"),this.cursor=e},e.htmlTemplate='<span class="mq-math-mode">&0</span>',e.createBlocks=function(){t.createBlocks.call(this),this.ends[y].cursor=this.cursor,this.ends[y].write=function(e,t){"$"!==t?W.prototype.write.call(this,e,t):this.isEmpty()?(e.insRightOf(this.parent),this.parent.deleteTowards(dir,e),V("\\$","$").createLeftOf(e.show())):e[w]?e[y]?W.prototype.write.call(this,e,t):e.insLeftOf(this.parent):e.insRightOf(this.parent)}},e.latex=function(){return"$"+this.ends[y].latex()+"$"}})),X=g(Q,(function(e,t){e.keystroke=function(e){if("Spacebar"!==e&&"Shift-Spacebar"!==e)return t.keystroke.apply(this,arguments)},e.write=function(e,t){var n;(e.show().deleteSelection(),"$"===t)?G(e).createLeftOf(e):("<"===t?n="&lt;":">"===t&&(n="&gt;"),V(t,n).createLeftOf(e))}})),I.TextField=function(e){return g(e.EditableField,(function(e,t){this.RootBlock=X,e.__mathquillify=function(){return t.__mathquillify.call(this,"mq-editable-field mq-text-mode")},e.latex=function(e){return arguments.length>0?(this.__controller.renderLatexText(e),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this):this.__controller.exportLatex()}}))},O["\\"]=g(U,(function(e,t){e.ctrlSeq="\\",e.replaces=function(e){this._replacedFragment=e.disown(),this.isEmpty=function(){return!1}},e.htmlTemplate='<span class="mq-latex-command-input mq-non-leaf">\\<span>&0</span></span>',e.textTemplate=["\\"],e.createBlocks=function(){t.createBlocks.call(this),this.ends[y].focus=function(){return this.parent.jQ.addClass("mq-hasCursor"),this.isEmpty()&&this.parent.jQ.removeClass("mq-empty"),this},this.ends[y].blur=function(){return this.parent.jQ.removeClass("mq-hasCursor"),this.isEmpty()&&this.parent.jQ.addClass("mq-empty"),this},this.ends[y].write=function(e,t){e.show().deleteSelection(),t.match(/[a-z]/i)?V(t).createLeftOf(e):(this.parent.renderCommand(e),"\\"===t&&this.isEmpty()||this.parent.parent.write(e,t))},this.ends[y].keystroke=function(e,n,s){return"Tab"===e||"Enter"===e||"Spacebar"===e?(this.parent.renderCommand(s.cursor),void n.preventDefault()):t.keystroke.apply(this,arguments)}},e.createLeftOf=function(e){if(t.createLeftOf.call(this,e),this._replacedFragment){var n=this.jQ[0];this.jQ=this._replacedFragment.jQ.addClass("mq-blur").bind("mousedown mousemove",(function(e){return _(e.target=n).trigger(e),!1})).insertBefore(this.jQ).add(this.jQ)}},e.latex=function(){return"\\"+this.ends[y].latex()+" "},e.renderCommand=function(e){var t,n;this.jQ=this.jQ.last(),this.remove(),this[w]?e.insLeftOf(this[w]):e.insAtRightEnd(this.parent),(t=this.ends[y].latex())||(t=" "),(n=j[t]||Ie[t])?(n=n(t),this._replacedFragment&&n.replaces(this._replacedFragment),n.createLeftOf(e)):((n=K()).replaces(t),n.createLeftOf(e),e.insRightOf(n),this._replacedFragment&&this._replacedFragment.remove())}})),j.notin=j.cong=j.equiv=j.oplus=j.otimes=g(H,(function(e,t){e.init=function(e){t.init.call(this,"\\"+e+" ","&"+e+";")}})),j["≠"]=j.ne=j.neq=s(H,"\\ne ","&ne;"),j["∗"]=j.ast=j.star=j.loast=j.lowast=s(H,"\\ast ","&lowast;"),j.therefor=j.therefore=s(H,"\\therefore ","&there4;"),j.cuz=j.because=s(H,"\\because ","&#8757;"),j.prop=j.propto=s(H,"\\propto ","&prop;"),j["≈"]=j.asymp=j.approx=s(H,"\\approx ","&asymp;"),j.isin=j.in=s(H,"\\in ","&isin;"),j.ni=j.contains=s(H,"\\ni ","&ni;"),j.notni=j.niton=j.notcontains=j.doesnotcontain=s(H,"\\not\\ni ","&#8716;"),j.sub=j.subset=s(H,"\\subset ","&sub;"),j.sup=j.supset=j.superset=s(H,"\\supset ","&sup;"),j.nsub=j.notsub=j.nsubset=j.notsubset=s(H,"\\not\\subset ","&#8836;"),j.nsup=j.notsup=j.nsupset=j.notsupset=j.nsuperset=j.notsuperset=s(H,"\\not\\supset ","&#8837;"),j.sube=j.subeq=j.subsete=j.subseteq=s(H,"\\subseteq ","&sube;"),j.supe=j.supeq=j.supsete=j.supseteq=j.supersete=j.superseteq=s(H,"\\supseteq ","&supe;"),j.nsube=j.nsubeq=j.notsube=j.notsubeq=j.nsubsete=j.nsubseteq=j.notsubsete=j.notsubseteq=s(H,"\\not\\subseteq ","&#8840;"),j.nsupe=j.nsupeq=j.notsupe=j.notsupeq=j.nsupsete=j.nsupseteq=j.notsupsete=j.notsupseteq=j.nsupersete=j.nsuperseteq=j.notsupersete=j.notsuperseteq=s(H,"\\not\\supseteq ","&#8841;"),j.N=j.naturals=j.Naturals=s(V,"\\mathbb{N}","&#8469;"),j.P=j.primes=j.Primes=j.projective=j.Projective=j.probability=j.Probability=s(V,"\\mathbb{P}","&#8473;"),j.Z=j.integers=j.Integers=s(V,"\\mathbb{Z}","&#8484;"),j.Q=j.rationals=j.Rationals=s(V,"\\mathbb{Q}","&#8474;"),j.R=j.reals=j.Reals=s(V,"\\mathbb{R}","&#8477;"),j.C=j.complex=j.Complex=j.complexes=j.Complexes=j.complexplane=j.Complexplane=j.ComplexPlane=s(V,"\\mathbb{C}","&#8450;"),j.H=j.Hamiltonian=j.quaternions=j.Quaternions=s(V,"\\mathbb{H}","&#8461;"),j.quad=j.emsp=s(V,"\\quad ","    "),j.qquad=s(V,"\\qquad ","        "),j.diamond=s(V,"\\diamond ","&#9671;"),j.bigtriangleup=s(V,"\\bigtriangleup ","&#9651;"),j.ominus=s(V,"\\ominus ","&#8854;"),j.uplus=s(V,"\\uplus ","&#8846;"),j.bigtriangledown=s(V,"\\bigtriangledown ","&#9661;"),j.sqcap=s(V,"\\sqcap ","&#8851;"),j.triangleleft=s(V,"\\triangleleft ","&#8882;"),j.sqcup=s(V,"\\sqcup ","&#8852;"),j.triangleright=s(V,"\\triangleright ","&#8883;"),j.odot=j.circledot=s(V,"\\odot ","&#8857;"),j.bigcirc=s(V,"\\bigcirc ","&#9711;"),j.dagger=s(V,"\\dagger ","&#0134;"),j.ddagger=s(V,"\\ddagger ","&#135;"),j.wr=s(V,"\\wr ","&#8768;"),j.amalg=s(V,"\\amalg ","&#8720;"),j.models=s(V,"\\models ","&#8872;"),j.prec=s(V,"\\prec ","&#8826;"),j.succ=s(V,"\\succ ","&#8827;"),j.preceq=s(V,"\\preceq ","&#8828;"),j.succeq=s(V,"\\succeq ","&#8829;"),j.simeq=s(V,"\\simeq ","&#8771;"),j.mid=s(V,"\\mid ","&#8739;"),j.ll=s(V,"\\ll ","&#8810;"),j.gg=s(V,"\\gg ","&#8811;"),j.parallel=s(V,"\\parallel ","&#8741;"),j.nparallel=s(V,"\\nparallel ","&#8742;"),j.bowtie=s(V,"\\bowtie ","&#8904;"),j.sqsubset=s(V,"\\sqsubset ","&#8847;"),j.sqsupset=s(V,"\\sqsupset ","&#8848;"),j.smile=s(V,"\\smile ","&#8995;"),j.sqsubseteq=s(V,"\\sqsubseteq ","&#8849;"),j.sqsupseteq=s(V,"\\sqsupseteq ","&#8850;"),j.doteq=s(V,"\\doteq ","&#8784;"),j.frown=s(V,"\\frown ","&#8994;"),j.vdash=s(V,"\\vdash ","&#8870;"),j.dashv=s(V,"\\dashv ","&#8867;"),j.nless=s(V,"\\nless ","&#8814;"),j.ngtr=s(V,"\\ngtr ","&#8815;"),j.longleftarrow=s(V,"\\longleftarrow ","&#8592;"),j.longrightarrow=s(V,"\\longrightarrow ","&#8594;"),j.Longleftarrow=s(V,"\\Longleftarrow ","&#8656;"),j.Longrightarrow=s(V,"\\Longrightarrow ","&#8658;"),j.longleftrightarrow=s(V,"\\longleftrightarrow ","&#8596;"),j.updownarrow=s(V,"\\updownarrow ","&#8597;"),j.Longleftrightarrow=s(V,"\\Longleftrightarrow ","&#8660;"),j.Updownarrow=s(V,"\\Updownarrow ","&#8661;"),j.mapsto=s(V,"\\mapsto ","&#8614;"),j.nearrow=s(V,"\\nearrow ","&#8599;"),j.hookleftarrow=s(V,"\\hookleftarrow ","&#8617;"),j.hookrightarrow=s(V,"\\hookrightarrow ","&#8618;"),j.searrow=s(V,"\\searrow ","&#8600;"),j.leftharpoonup=s(V,"\\leftharpoonup ","&#8636;"),j.rightharpoonup=s(V,"\\rightharpoonup ","&#8640;"),j.swarrow=s(V,"\\swarrow ","&#8601;"),j.leftharpoondown=s(V,"\\leftharpoondown ","&#8637;"),j.rightharpoondown=s(V,"\\rightharpoondown ","&#8641;"),j.nwarrow=s(V,"\\nwarrow ","&#8598;"),j.ldots=s(V,"\\ldots ","&#8230;"),j.cdots=s(V,"\\cdots ","&#8943;"),j.vdots=s(V,"\\vdots ","&#8942;"),j.ddots=s(V,"\\ddots ","&#8945;"),j.surd=s(V,"\\surd ","&#8730;"),j.triangle=s(V,"\\triangle ","&#9651;"),j.ell=s(V,"\\ell ","&#8467;"),j.top=s(V,"\\top ","&#8868;"),j.flat=s(V,"\\flat ","&#9837;"),j.natural=s(V,"\\natural ","&#9838;"),j.sharp=s(V,"\\sharp ","&#9839;"),j.wp=s(V,"\\wp ","&#8472;"),j.bot=s(V,"\\bot ","&#8869;"),j.clubsuit=s(V,"\\clubsuit ","&#9827;"),j.diamondsuit=s(V,"\\diamondsuit ","&#9826;"),j.heartsuit=s(V,"\\heartsuit ","&#9825;"),j.spadesuit=s(V,"\\spadesuit ","&#9824;"),j.parallelogram=s(V,"\\parallelogram ","&#9649;"),j.square=s(V,"\\square ","&#11036;"),j.oint=s(V,"\\oint ","&#8750;"),j.bigcap=s(V,"\\bigcap ","&#8745;"),j.bigcup=s(V,"\\bigcup ","&#8746;"),j.bigsqcup=s(V,"\\bigsqcup ","&#8852;"),j.bigvee=s(V,"\\bigvee ","&#8744;"),j.bigwedge=s(V,"\\bigwedge ","&#8743;"),j.bigodot=s(V,"\\bigodot ","&#8857;"),j.bigotimes=s(V,"\\bigotimes ","&#8855;"),j.bigoplus=s(V,"\\bigoplus ","&#8853;"),j.biguplus=s(V,"\\biguplus ","&#8846;"),j.lfloor=s(V,"\\lfloor ","&#8970;"),j.rfloor=s(V,"\\rfloor ","&#8971;"),j.lceil=s(V,"\\lceil ","&#8968;"),j.rceil=s(V,"\\rceil ","&#8969;"),j.opencurlybrace=j.lbrace=s(V,"\\lbrace ","{"),j.closecurlybrace=j.rbrace=s(V,"\\rbrace ","}"),j.lbrack=s(V,"["),j.rbrack=s(V,"]"),j.slash=s(V,"/"),j.vert=s(V,"|"),j.perp=j.perpendicular=s(V,"\\perp ","&perp;"),j.nabla=j.del=s(V,"\\nabla ","&nabla;"),j.hbar=s(V,"\\hbar ","&#8463;"),j.AA=j.Angstrom=j.angstrom=s(V,"\\text\\AA ","&#8491;"),j.ring=j.circ=j.circle=s(V,"\\circ ","&#8728;"),j.bull=j.bullet=s(V,"\\bullet ","&bull;"),j.setminus=j.smallsetminus=s(V,"\\setminus ","&#8726;"),j.not=j["¬"]=j.neg=s(V,"\\neg ","&not;"),j["…"]=j.dots=j.ellip=j.hellip=j.ellipsis=j.hellipsis=s(V,"\\dots ","&hellip;"),j.converges=j.darr=j.dnarr=j.dnarrow=j.downarrow=s(V,"\\downarrow ","&darr;"),j.dArr=j.dnArr=j.dnArrow=j.Downarrow=s(V,"\\Downarrow ","&dArr;"),j.diverges=j.uarr=j.uparrow=s(V,"\\uparrow ","&uarr;"),j.uArr=j.Uparrow=s(V,"\\Uparrow ","&uArr;"),j.to=s(H,"\\to ","&rarr;"),j.rarr=j.rightarrow=s(V,"\\rightarrow ","&rarr;"),j.implies=s(H,"\\Rightarrow ","&rArr;"),j.rArr=j.Rightarrow=s(V,"\\Rightarrow ","&rArr;"),j.gets=s(H,"\\gets ","&larr;"),j.larr=j.leftarrow=s(V,"\\leftarrow ","&larr;"),j.impliedby=s(H,"\\Leftarrow ","&lArr;"),j.lArr=j.Leftarrow=s(V,"\\Leftarrow ","&lArr;"),j.harr=j.lrarr=j.leftrightarrow=s(V,"\\leftrightarrow ","&harr;"),j.iff=s(H,"\\Leftrightarrow ","&hArr;"),j.hArr=j.lrArr=j.Leftrightarrow=s(V,"\\Leftrightarrow ","&hArr;"),j.Re=j.Real=j.real=s(V,"\\Re ","&real;"),j.Im=j.imag=j.image=j.imagin=j.imaginary=j.Imaginary=s(V,"\\Im ","&image;"),j.part=j.partial=s(V,"\\partial ","&part;"),j.infty=j.infin=j.infinity=s(V,"\\infty ","&infin;"),j.alef=j.alefsym=j.aleph=j.alephsym=s(V,"\\aleph ","&alefsym;"),j.xist=j.xists=j.exist=j.exists=s(V,"\\exists ","&exist;"),j.nexists=j.nexist=s(V,"\\nexists ","&#8708;"),j.and=j.land=j.wedge=s(H,"\\wedge ","&and;"),j.or=j.lor=j.vee=s(H,"\\vee ","&or;"),j.o=j.O=j.empty=j.emptyset=j.oslash=j.Oslash=j.nothing=j.varnothing=s(H,"\\varnothing ","&empty;"),j.cup=j.union=s(H,"\\cup ","&cup;"),j.cap=j.intersect=j.intersection=s(H,"\\cap ","&cap;"),j.deg=j.degree=s(V,"\\degree ","&deg;"),j.ang=j.angle=s(V,"\\angle ","&ang;"),j.measuredangle=s(V,"\\measuredangle ","&#8737;"),J=g(V,(function(e,t){e.createLeftOf=function(e){e.options.autoSubscriptNumerals&&e.parent!==e.parent.parent.sub&&(e[y]instanceof Z&&!1!==e[y].isItalic||e[y]instanceof ye&&e[y][y]instanceof Z&&!1!==e[y][y].isItalic)?(j._().createLeftOf(e),t.createLeftOf.call(this,e),e.insRightOf(e.parent.parent)):t.createLeftOf.call(this,e)}})),Z=g(z,(function(e,t){e.init=function(e,n){t.init.call(this,e,"<var>"+(n||e)+"</var>")},e.text=function(){var e=this.ctrlSeq;return this.isPartOfOperator?"\\"==e[0]?e=e.slice(1,e.length):" "==e[e.length-1]&&(e=e.slice(0,-1)):(!this[y]||this[y]instanceof Z||this[y]instanceof H||"\\ "===this[y].ctrlSeq||(e="*"+e),!this[w]||this[w]instanceof H||this[w]instanceof ye||(e+="*")),e}})),D.p.autoCommands={_maxLength:0},P.autoCommands=function(e){var t,n,s,i,r;if(!/^[a-z]+(?: [a-z]+)*$/i.test(e))throw'"'+e+'" not a space-delimited list of only letters';for(t=e.split(" "),n={},s=0,i=0;i<t.length;i+=1){if((r=t[i]).length<2)throw'autocommand "'+r+'" not minimum length of 2';if(j[r]===ie)throw'"'+r+'" is a built-in operator name';n[r]=1,s=qe(s,r.length)}return n._maxLength=s,n},ee=g(Z,(function(e,t){function n(e){return!e||e instanceof H||e instanceof we}e.init=function(e){return t.init.call(this,this.letter=e)},e.createLeftOf=function(e){var n,s,i,r,a;if(t.createLeftOf.apply(this,arguments),(s=(n=e.options.autoCommands)._maxLength)>0){for(i="",r=this,a=0;r instanceof ee&&r.ctrlSeq===r.letter&&a<s;)i=r.letter+i,r=r[y],a+=1;for(;i.length;){if(n.hasOwnProperty(i)){for(a=1,r=this;a<i.length;a+=1,r=r[y]);return x(r,this).remove(),e[y]=r[y],j[i](i).createLeftOf(e)}i=i.slice(1)}}},e.italicize=function(e){return this.isItalic=e,this.isPartOfOperator=!e,this.jQ.toggleClass("mq-operator-name",!e),this},e.finalizeTree=e.siblingDeleted=e.siblingCreated=function(e,t){t!==y&&this[w]instanceof ee||this.autoUnItalicize(e)},e.autoUnItalicize=function(e){var t,s,i,r,a,o,l,c,u,d,h,p,f=e.autoOperatorNames;if(0!==f._maxLength){for(t=this.letter,s=this[y];s instanceof ee;s=s[y])t=s.letter+t;for(i=this[w];i instanceof ee;i=i[w])t+=i.letter;x(s[w]||this.parent.ends[y],i[y]||this.parent.ends[w]).each((function(e){e.italicize(!0).jQ.removeClass("mq-first mq-last mq-followed-by-supsub"),e.ctrlSeq=e.letter}));e:for(r=0,a=s[w]||this.parent.ends[y];r<t.length;r+=1,a=a[w])for(o=Be(f._maxLength,t.length-r);o>0;o-=1)if(l=t.slice(r,r+o),f.hasOwnProperty(l)){for(c=0,u=a;c<o;c+=1,u=u[w])u.italicize(!1),d=u;h=te.hasOwnProperty(l),a.ctrlSeq=(h?"\\":"\\operatorname{")+a.ctrlSeq,d.ctrlSeq+=h?" ":"}",se.hasOwnProperty(l)&&d[y][y][y].jQ.addClass("mq-last"),n(a[y])||a.jQ.addClass("mq-first"),n(d[w])||(d[w]instanceof ye?((p=d[w]).siblingCreated=p.siblingDeleted=function(){p.jQ.toggleClass("mq-after-operator-name",!(p[w]instanceof Oe))})():d.jQ.toggleClass("mq-last",!(d[w]instanceof Oe))),r+=o-1,a=d;continue e}}}})),te={},ne=D.p.autoOperatorNames={_maxLength:9},se={limsup:1,liminf:1,projlim:1,injlim:1},function(){var e,t,n,s,i="arg deg det dim exp gcd hom inf ker lg lim ln log max min sup limsup liminf injlim projlim Pr".split(" ");for(e=0;e<i.length;e+=1)te[i[e]]=ne[i[e]]=1;for(t="sin cos tan arcsin arccos arctan sinh cosh tanh sec csc cot coth".split(" "),e=0;e<t.length;e+=1)te[t[e]]=1;for(n="sin cos tan sec cosec csc cotan cot ctg".split(" "),e=0;e<n.length;e+=1)ne[n[e]]=ne["arc"+n[e]]=ne[n[e]+"h"]=ne["ar"+n[e]+"h"]=ne["arc"+n[e]+"h"]=1;for(s="gcf hcf lcm proj span".split(" "),e=0;e<s.length;e+=1)ne[s[e]]=1}(),P.autoOperatorNames=function(e){var t,n,s,i,r;if(!/^[a-z]+(?: [a-z]+)*$/i.test(e))throw'"'+e+'" not a space-delimited list of only letters';for(t=e.split(" "),n={},s=0,i=0;i<t.length;i+=1){if((r=t[i]).length<2)throw'"'+r+'" not minimum length of 2';n[r]=1,s=qe(s,r.length)}return n._maxLength=s,n},ie=g(z,(function(e,t){e.init=function(e){this.ctrlSeq=e},e.createLeftOf=function(e){var t,n=this.ctrlSeq;for(t=0;t<n.length;t+=1)ee(n.charAt(t)).createLeftOf(e)},e.parser=function(){var e,t=this.ctrlSeq,n=W();for(e=0;e<t.length;e+=1)ee(t.charAt(e)).adopt(n,n.ends[w],0);return F.succeed(n.children())}})),ne)ne.hasOwnProperty(re)&&(j[re]=ie);for(be in j.operatorname=g(U,(function(t){t.createLeftOf=e,t.numBlocks=function(){return 1},t.parser=function(){return q.block.map((function(e){return e.children()}))}})),j.f=g(ee,(function(e,t){e.init=function(){z.p.init.call(this,this.letter="f",'<var class="mq-f">f</var>')},e.italicize=function(e){return this.jQ.html("f").toggleClass("mq-f",e),t.italicize.apply(this,arguments)}})),j[" "]=j.space=s(V,"\\ ","&nbsp;"),j["'"]=j.prime=s(V,"'","&prime;"),j["″"]=j.dprime=s(V,"″","&Prime;"),j.backslash=s(V,"\\backslash ","\\"),O["\\"]||(O["\\"]=j.backslash),j.$=s(V,"\\$","$"),ae=g(z,(function(e,t){e.init=function(e,n){t.init.call(this,e,'<span class="mq-nonSymbola">'+(n||e)+"</span>")}})),j["@"]=ae,j["&"]=s(ae,"\\&","&amp;"),j["%"]=s(ae,"\\%","%"),j.alpha=j.beta=j.gamma=j.delta=j.zeta=j.eta=j.theta=j.iota=j.kappa=j.mu=j.nu=j.xi=j.rho=j.sigma=j.tau=j.chi=j.psi=j.omega=g(Z,(function(e,t){e.init=function(e){t.init.call(this,"\\"+e+" ","&"+e+";")}})),j.phi=s(Z,"\\phi ","&#981;"),j.phiv=j.varphi=s(Z,"\\varphi ","&phi;"),j.epsilon=s(Z,"\\epsilon ","&#1013;"),j.epsiv=j.varepsilon=s(Z,"\\varepsilon ","&epsilon;"),j.piv=j.varpi=s(Z,"\\varpi ","&piv;"),j.sigmaf=j.sigmav=j.varsigma=s(Z,"\\varsigma ","&sigmaf;"),j.thetav=j.vartheta=j.thetasym=s(Z,"\\vartheta ","&thetasym;"),j.upsilon=j.upsi=s(Z,"\\upsilon ","&upsilon;"),j.gammad=j.Gammad=j.digamma=s(Z,"\\digamma ","&#989;"),j.kappav=j.varkappa=s(Z,"\\varkappa ","&#1008;"),j.rhov=j.varrho=s(Z,"\\varrho ","&#1009;"),j.pi=j["π"]=s(ae,"\\pi ","&pi;"),j.lambda=s(ae,"\\lambda ","&lambda;"),j.Upsilon=j.Upsi=j.upsih=j.Upsih=s(z,"\\Upsilon ",'<var style="font-family: serif">&upsih;</var>'),j.Gamma=j.Delta=j.Theta=j.Lambda=j.Xi=j.Pi=j.Sigma=j.Phi=j.Psi=j.Omega=j.forall=g(V,(function(e,t){e.init=function(e){t.init.call(this,"\\"+e+" ","&"+e+";")}})),oe=g(U,(function(e){e.init=function(e){this.latex=e},e.createLeftOf=function(e){var t=q.parse(this.latex);t.children().adopt(e.parent,e[y],e[w]),e[y]=t.ends[w],t.jQize().insertBefore(e.jQ),t.finalizeInsert(e.options,e),t.ends[w][w].siblingCreated&&t.ends[w][w].siblingCreated(e.options,y),t.ends[y][y].siblingCreated&&t.ends[y][y].siblingCreated(e.options,w),e.parent.bubble("reflow")},e.parser=function(){var e=q.parse(this.latex).children();return F.succeed(e)}})),j["¹"]=s(oe,"^1"),j["²"]=s(oe,"^2"),j["³"]=s(oe,"^3"),j["¼"]=s(oe,"\\frac14"),j["½"]=s(oe,"\\frac12"),j["¾"]=s(oe,"\\frac34"),le=g(H,(function(e){e.init=V.prototype.init,e.contactWeld=e.siblingCreated=e.siblingDeleted=function(e,t){if(t!==w)return this.jQ[0].className=function e(t){return t[y]?t[y]instanceof H||/^[,;:\(\[]$/.test(t[y].ctrlSeq)?"":"mq-binary-operator":t.parent&&t.parent.parent&&t.parent.parent.isStyleBlock()?e(t.parent.parent):""}(this),this}})),j["+"]=s(le,"+","+"),j["–"]=j["-"]=s(le,"-","&minus;"),j["±"]=j.pm=j.plusmn=j.plusminus=s(le,"\\pm ","&plusmn;"),j.mp=j.mnplus=j.minusplus=s(le,"\\mp ","&#8723;"),O["*"]=j.sdot=j.cdot=s(H,"\\cdot ","&middot;","*"),ce=g(H,(function(e,t){e.init=function(e,n){this.data=e,this.strict=n;var s=n?"Strict":"";t.init.call(this,e["ctrlSeq"+s],e["html"+s],e["text"+s])},e.swap=function(e){this.strict=e;var t=e?"Strict":"";this.ctrlSeq=this.data["ctrlSeq"+t],this.jQ.html(this.data["html"+t]),this.textTemplate=[this.data["text"+t]]},e.deleteTowards=function(e,n){if(e===y&&!this.strict)return this.swap(!0),void this.bubble("reflow");t.deleteTowards.apply(this,arguments)}})),ue={ctrlSeq:"\\le ",html:"&le;",text:"≤",ctrlSeqStrict:"<",htmlStrict:"&lt;",textStrict:"<"},de={ctrlSeq:"\\ge ",html:"&ge;",text:"≥",ctrlSeqStrict:">",htmlStrict:"&gt;",textStrict:">"},j["<"]=j.lt=s(ce,ue,!0),j[">"]=j.gt=s(ce,de,!0),j["≤"]=j.le=j.leq=s(ce,ue,!1),j["≥"]=j.ge=j.geq=s(ce,de,!1),he=g(H,(function(e,t){e.init=function(){t.init.call(this,"=","=")},e.createLeftOf=function(e){if(e[y]instanceof ce&&e[y].strict)return e[y].swap(!1),void e[y].bubble("reflow");t.createLeftOf.apply(this,arguments)}})),j["="]=he,j["×"]=j.times=s(H,"\\times ","&times;","[x]"),j["÷"]=j.div=j.divide=j.divides=s(H,"\\div ","&divide;","[/]"),O["~"]=j.sim=s(H,"\\sim ","~","~"),fe=e,me=document.createElement("div").style,{transform:1,WebkitTransform:1,MozTransform:1,OTransform:1,msTransform:1})if(be in me){ve=be;break}for(Re in ve?pe=function(e,t,n){e.css(ve,"scale("+t+","+n+")")}:"filter"in me?(fe=function(e){e.className=e.className},pe=function(e,t,n){function s(){e.css("marginRight",(i.width()-1)*(t-1)/t+"px")}var i,r;t/=1+(n-1)/2,e.css("fontSize",n+"em"),e.hasClass("mq-matrixed-container")||e.addClass("mq-matrixed-container").wrapInner('<span class="mq-matrixed"></span>'),i=e.children().css("filter","progid:DXImageTransform.Microsoft.Matrix(M11="+t+",SizingMethod='auto expand')"),s(),r=setInterval(s),_(window).load((function(){clearTimeout(r),s()}))}):pe=function(e,t,n){e.css("fontSize",n+"em")},ge=g(U,(function(e,t){e.init=function(e,n,s){t.init.call(this,e,"<"+n+" "+s+">&0</"+n+">")}})),j.mathrm=s(ge,"\\mathrm","span",'class="mq-roman mq-font"'),j.mathit=s(ge,"\\mathit","i",'class="mq-font"'),j.mathbf=s(ge,"\\mathbf","b",'class="mq-font"'),j.mathsf=s(ge,"\\mathsf","span",'class="mq-sans-serif mq-font"'),j.mathtt=s(ge,"\\mathtt","span",'class="mq-monospace mq-font"'),j.underline=s(ge,"\\underline","span",'class="mq-non-leaf mq-underline"'),j.overline=j.bar=s(ge,"\\overline","span",'class="mq-non-leaf mq-overline"'),j.overrightarrow=s(ge,"\\overrightarrow","span",'class="mq-non-leaf mq-overarrow mq-arrow-right"'),j.overleftarrow=s(ge,"\\overleftarrow","span",'class="mq-non-leaf mq-overarrow mq-arrow-left"'),j.dot=g(U,(function(e,t){e.init=function(){t.init.call(this,"\\dot",'<span class="mq-non-leaf"><span class="mq-dot-recurring-inner"><span class="mq-dot-recurring">&#x2d9;</span><span class="mq-empty-box">&0</span></span></span>')}})),j.textcolor=g(U,(function(e,t){e.setColor=function(e){this.color=e,this.htmlTemplate='<span class="mq-textcolor" style="color:'+e+'">&0</span>'},e.latex=function(){return"\\textcolor{"+this.color+"}{"+this.blocks[0].latex()+"}"},e.parser=function(){var e=this,n=F.optWhitespace,s=F.string,i=F.regex;return n.then(s("{")).then(i(/^[#\w\s.,()%-]*/)).skip(s("}")).then((function(n){return e.setColor(n),t.parser.call(e)}))},e.isStyleBlock=function(){return!0}})),j.class=g(U,(function(e,t){e.parser=function(){var e=this,n=F.string,s=F.regex;return F.optWhitespace.then(n("{")).then(s(/^[-\w\s\\\xA0-\xFF]*/)).skip(n("}")).then((function(n){return e.cls=n||"",e.htmlTemplate='<span class="mq-class '+n+'">&0</span>',t.parser.call(e)}))},e.latex=function(){return"\\class{"+this.cls+"}{"+this.blocks[0].latex()+"}"},e.isStyleBlock=function(){return!0}})),ye=g(U,(function(e,t){e.ctrlSeq="_{...}^{...}",e.createLeftOf=function(e){if(this.replacedFragment||e[y]||!e.options.supSubsRequireOperand)return t.createLeftOf.apply(this,arguments)},e.contactWeld=function(e){var t,n,s,i,r,a;for(t=y;t;t=t===y&&w)if(this[t]instanceof ye){for(n="sub";n;n="sub"===n&&"sup")s=this[n],i=this[t][n],s&&(i?s.isEmpty()?a=k(i,0,i.ends[y]):(s.jQ.children().insAtDirEnd(-t,i.jQ),r=s.children().disown(),a=k(i,r.ends[w],i.ends[y]),t===y?r.adopt(i,i.ends[w],0):r.adopt(i,0,i.ends[y])):this[t].addBlock(s.disown()),this.placeCursor=function(e,n){return function(s){s.insAtDirEnd(-t,e||n)}}(i,s));this.remove(),e&&e[y]===this&&(t===w&&a?a[y]?e.insRightOf(a[y]):e.insAtLeftEnd(a.parent):e.insRightOf(this[t]));break}},D.p.charsThatBreakOutOfSupSub="",e.finalizeTree=function(){this.ends[y].write=function(e,t){if(e.options.autoSubscriptNumerals&&this===this.parent.sub){if("_"===t)return;var n=this.chToCmd(t,e.options);return n instanceof z?e.deleteSelection():e.clearSelection().insRightOf(this.parent),n.createLeftOf(e.show())}e[y]&&!e[w]&&!e.selection&&e.options.charsThatBreakOutOfSupSub.indexOf(t)>-1&&e.insRightOf(this.parent),W.p.write.apply(this,arguments)}},e.moveTowards=function(e,n,s){n.options.autoSubscriptNumerals&&!this.sup?n.insDirOf(e,this):t.moveTowards.apply(this,arguments)},e.deleteTowards=function(e,n){if(n.options.autoSubscriptNumerals&&this.sub){var s=this.sub.ends[-e];s instanceof z?s.remove():s&&s.deleteTowards(e,n.insAtDirEnd(-e,this.sub)),this.sub.isEmpty()&&(this.sub.deleteOutOf(y,n.insAtLeftEnd(this.sub)),this.sup&&n.insDirOf(-e,this))}else t.deleteTowards.apply(this,arguments)},e.latex=function(){function e(e,t){var n=t&&t.latex();return t?e+(1===n.length?n:"{"+(n||" ")+"}"):""}return e("_",this.sub)+e("^",this.sup)},e.addBlock=function(e){"sub"===this.supsub?(this.sup=this.upInto=this.sub.upOutOf=e,e.adopt(this,this.sub,0).downOutOf=this.sub,e.jQ=_('<span class="mq-sup"/>').append(e.jQ.children()).attr(Fe,e.id).prependTo(this.jQ)):(this.sub=this.downInto=this.sup.downOutOf=e,e.adopt(this,0,this.sup).upOutOf=this.sup,e.jQ=_('<span class="mq-sub"></span>').append(e.jQ.children()).attr(Fe,e.id).appendTo(this.jQ.removeClass("mq-sup-only")),this.jQ.append('<span style="display:inline-block;width:0">&#8203;</span>'));for(var t=0;t<2;t+=1)!function(e,t,n,s){e[t].deleteOutOf=function(i,r){if(r.insDirOf(this[i]?-i:i,this.parent),!this.isEmpty()){var a=this.ends[i];this.children().disown().withDirAdopt(i,r.parent,r[i],r[-i]).jQ.insDirOf(-i,r.jQ),r[-i]=a}e.supsub=n,delete e[t],delete e[s+"Into"],e[n][s+"OutOf"]=h,delete e[n].deleteOutOf,"sub"===t&&_(e.jQ.addClass("mq-sup-only")[0].lastChild).remove(),this.remove()}}(this,"sub sup".split(" ")[t],"sup sub".split(" ")[t],"down up".split(" ")[t])}})),j.subscript=j._=g(ye,(function(e,t){e.supsub="sub",e.htmlTemplate='<span class="mq-supsub mq-non-leaf"><span class="mq-sub">&0</span><span style="display:inline-block;width:0">&#8203;</span></span>',e.textTemplate=["_"],e.finalizeTree=function(){this.downInto=this.sub=this.ends[y],this.sub.upOutOf=h,t.finalizeTree.call(this)}})),j.superscript=j.supscript=j["^"]=g(ye,(function(e,t){e.supsub="sup",e.htmlTemplate='<span class="mq-supsub mq-non-leaf mq-sup-only"><span class="mq-sup">&0</span></span>',e.textTemplate=["^"],e.finalizeTree=function(){this.upInto=this.sup=this.ends[w],this.sup.downOutOf=h,t.finalizeTree.call(this)}})),we=g(U,(function(e,t){e.init=function(e,t){var n='<span class="mq-large-operator mq-non-leaf"><span class="mq-to"><span>&1</span></span><big>'+t+'</big><span class="mq-from"><span>&0</span></span></span>';z.prototype.init.call(this,e,n)},e.createLeftOf=function(e){t.createLeftOf.apply(this,arguments),e.options.sumStartsWithNEquals&&(ee("n").createLeftOf(e),he().createLeftOf(e))},e.latex=function(){function e(e){return 1===e.length?e:"{"+(e||" ")+"}"}return this.ctrlSeq+"_"+e(this.ends[y].latex())+"^"+e(this.ends[w].latex())},e.parser=function(){var e,t=F.string,n=F.optWhitespace,s=F.succeed,i=q.block,r=this,a=r.blocks=[W(),W()];for(e=0;e<a.length;e+=1)a[e].adopt(r,r.ends[w],0);return n.then(t("_").or(t("^"))).then((function(e){var t=a["_"===e?0:1];return i.then((function(e){return e.children().adopt(t,t.ends[w],0),s(r)}))})).many().result(r)},e.finalizeTree=function(){this.downInto=this.ends[y],this.upInto=this.ends[w],this.ends[y].upOutOf=this.ends[w],this.ends[w].downOutOf=this.ends[y]}})),j["∑"]=j.sum=j.summation=s(we,"\\sum ","&sum;"),j["∏"]=j.prod=j.product=s(we,"\\prod ","&prod;"),j.coprod=j.coproduct=s(we,"\\coprod ","&#8720;"),j["∫"]=j.int=j.integral=g(we,(function(e,t){e.init=function(){z.prototype.init.call(this,"\\int ",'<span class="mq-int mq-non-leaf"><big>&int;</big><span class="mq-supsub mq-non-leaf"><span class="mq-sup"><span class="mq-sup-inner">&1</span></span><span class="mq-sub">&0</span><span style="display:inline-block;width:0">&#8203</span></span></span>')},e.createLeftOf=U.p.createLeftOf})),_e=j.frac=j.dfrac=j.cfrac=j.fraction=g(U,(function(e,t){e.ctrlSeq="\\frac",e.htmlTemplate='<span class="mq-fraction mq-non-leaf"><span class="mq-numerator">&0</span><span class="mq-denominator">&1</span><span style="display:inline-block;width:0">&#8203;</span></span>',e.textTemplate=["(",")/(",")"],e.finalizeTree=function(){this.upInto=this.ends[w].upOutOf=this.ends[y],this.downInto=this.ends[y].downOutOf=this.ends[w]}})),ke=j.over=O["/"]=g(_e,(function(t,n){t.createLeftOf=function(t){if(!this.replacedFragment){for(var s=t[y];s&&!(s instanceof H||s instanceof(j.text||e)||s instanceof we||"\\ "===s.ctrlSeq||/^[,;:]$/.test(s.ctrlSeq));)s=s[y];s instanceof we&&s[w]instanceof ye&&((s=s[w])[w]instanceof ye&&s[w].ctrlSeq!=s.ctrlSeq&&(s=s[w])),s!==t[y]&&(this.replaces(x(s[w]||t.parent.ends[y],t[y])),t[y]=s)}n.createLeftOf.call(this,t)}})),Ce=j.sqrt=j["√"]=g(U,(function(e,t){e.ctrlSeq="\\sqrt",e.htmlTemplate='<span class="mq-non-leaf"><span class="mq-scaled mq-sqrt-prefix">&radic;</span><span class="mq-non-leaf mq-sqrt-stem">&0</span></span>',e.textTemplate=["sqrt(",")"],e.parser=function(){return q.optBlock.then((function(e){return q.block.map((function(t){var n=xe();return n.blocks=[e,t],e.adopt(n,0,0),t.adopt(n,e,0),n}))})).or(t.parser.call(this))},e.reflow=function(){var e=this.ends[w].jQ;pe(e.prev(),1,e.innerHeight()/+e.css("fontSize").slice(0,-2)-.1)}})),j.hat=g(U,(function(e,t){e.ctrlSeq="\\hat",e.htmlTemplate='<span class="mq-non-leaf"><span class="mq-hat-prefix">^</span><span class="mq-hat-stem">&0</span></span>',e.textTemplate=["hat(",")"]})),xe=j.nthroot=g(Ce,(function(e,t){e.htmlTemplate='<sup class="mq-nthroot mq-non-leaf">&0</sup><span class="mq-scaled"><span class="mq-sqrt-prefix mq-scaled">&radic;</span><span class="mq-sqrt-stem mq-non-leaf">&1</span></span>',e.textTemplate=["sqrt[","](",")"],e.latex=function(){return"\\sqrt["+this.ends[y].latex()+"]{"+this.ends[w].latex()+"}"}})),je=g(U,(function(e,t){e.init=function(e,n,s){var i='<span class="mq-non-leaf"><span class="mq-diacritic-above">'+n+'</span><span class="mq-diacritic-stem">&0</span></span>';t.init.call(this,e,i,s)}})),j.vec=s(je,"\\vec","&rarr;",["vec(",")"]),j.tilde=s(je,"\\tilde","~",["tilde(",")"]),Oe=g(g(U,p),(function(t,n){t.init=function(e,t,s,i,r){n.init.call(this,"\\left"+i,m,[t,s]),this.side=e,this.sides={},this.sides[y]={ch:t,ctrlSeq:i},this.sides[w]={ch:s,ctrlSeq:r}},t.numBlocks=function(){return 1},t.html=function(){return this.htmlTemplate='<span class="mq-non-leaf"><span class="mq-scaled mq-paren'+(this.side===w?" mq-ghost":"")+'">'+this.sides[y].ch+'</span><span class="mq-non-leaf">&0</span><span class="mq-scaled mq-paren'+(this.side===y?" mq-ghost":"")+'">'+this.sides[w].ch+"</span></span>",n.html.call(this)},t.latex=function(){return"\\left"+this.sides[y].ctrlSeq+this.ends[y].latex()+"\\right"+this.sides[w].ctrlSeq},t.matchBrack=function(e,t,n){return n instanceof Oe&&n.side&&n.side!==-t&&(!e.restrictMismatchedBrackets||Se[this.sides[this.side].ch]===n.sides[n.side].ch||{"(":"]","[":")"}[this.sides[y].ch]===n.sides[w].ch)&&n},t.closeOpposing=function(e){e.side=0,e.sides[this.side]=this.sides[this.side],e.delimjQs.eq(this.side===y?0:1).removeClass("mq-ghost").html(this.sides[this.side].ch)},t.createLeftOf=function(e){var t,s,i;this.replacedFragment||(t=e.options,s="|"===this.sides[y].ch?this.matchBrack(t,w,e[w])||this.matchBrack(t,y,e[y])||this.matchBrack(t,0,e.parent.parent):this.matchBrack(t,-this.side,e[-this.side])||this.matchBrack(t,-this.side,e.parent.parent)),s?(i=this.side=-s.side,this.closeOpposing(s),s===e.parent.parent&&e[i]&&x(e[i],e.parent.ends[i],-i).disown().withDirAdopt(-i,s.parent,s,s[i]).jQ.insDirOf(i,s.jQ),s.bubble("reflow")):(i=(s=this).side,s.replacedFragment?s.side=0:e[-i]&&(s.replaces(x(e[-i],e.parent.ends[-i],i)),e[-i]=0),n.createLeftOf.call(s,e)),i===y?e.insAtLeftEnd(s.ends[y]):e.insRightOf(s)},t.placeCursor=e,t.unwrap=function(){this.ends[y].children().disown().adopt(this.parent,this,this[w]).jQ.insertAfter(this.jQ),this.remove()},t.deleteSide=function(e,t,n){var s,i,r,a=this.parent,o=this[e],l=a.ends[e];if(e===this.side)return this.unwrap(),void(o?n.insDirOf(-e,o):n.insAtDirEnd(e,a));if(s=n.options,i=!this.side,this.side=-e,this.matchBrack(s,e,this.ends[y].ends[this.side]))this.closeOpposing(this.ends[y].ends[this.side]),r=this.ends[y].ends[e],this.unwrap(),r.siblingCreated&&r.siblingCreated(n.options,e),o?n.insDirOf(-e,o):n.insAtDirEnd(e,a);else{if(this.matchBrack(s,e,this.parent.parent))this.parent.parent.closeOpposing(this),this.parent.parent.unwrap();else{if(t&&i)return this.unwrap(),void(o?n.insDirOf(-e,o):n.insAtDirEnd(e,a));this.sides[e]={ch:Se[this.sides[this.side].ch],ctrlSeq:Se[this.sides[this.side].ctrlSeq]},this.delimjQs.removeClass("mq-ghost").eq(e===y?0:1).addClass("mq-ghost").html(this.sides[e].ch)}o?(r=this.ends[y].ends[e],x(o,l,-e).disown().withDirAdopt(-e,this.ends[y],r,0).jQ.insAtDirEnd(e,this.ends[y].jQ.removeClass("mq-empty")),r.siblingCreated&&r.siblingCreated(n.options,e),n.insDirOf(-e,o)):t?n.insDirOf(e,this):n.insAtDirEnd(e,this.ends[y])}},t.deleteTowards=function(e,t){this.deleteSide(-e,!1,t)},t.finalizeTree=function(){this.ends[y].deleteOutOf=function(e,t){this.parent.deleteSide(e,!0,t)},this.finalizeTree=this.intentionalBlur=function(){this.delimjQs.eq(this.side===y?1:0).removeClass("mq-ghost"),this.side=0}},t.siblingCreated=function(e,t){t===-this.side&&this.finalizeTree()}})),Se={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{","\\{":"\\}","\\}":"\\{","&lang;":"&rang;","&rang;":"&lang;","\\langle ":"\\rangle ","\\rangle ":"\\langle ","|":"|","\\lVert ":"\\rVert ","\\rVert ":"\\lVert "},f("("),f("["),f("{","\\{"),j.langle=s(Oe,y,"&lang;","&rang;","\\langle ","\\rangle "),j.rangle=s(Oe,w,"&lang;","&rang;","\\langle ","\\rangle "),O["|"]=s(Oe,y,"|","|","|","|"),j.lVert=s(Oe,y,"&#8741;","&#8741;","\\lVert ","\\rVert "),j.rVert=s(Oe,w,"&#8741;","&#8741;","\\lVert ","\\rVert "),j.left=g(U,(function(e){e.parser=function(){var e=F.regex,t=F.string,n=(F.succeed,F.optWhitespace);return n.then(e(/^(?:[([|]|\\\{|\\langle\b|\\lVert\b)/)).then((function(s){var i="\\"===s.charAt(0)?s.slice(1):s;return"\\langle"==s&&(i="&lang;",s+=" "),"\\lVert"==s&&(i="&#8741;",s+=" "),q.then((function(r){return t("\\right").skip(n).then(e(/^(?:[\])|]|\\\}|\\rangle\b|\\rVert\b)/)).map((function(e){var t,n="\\"===e.charAt(0)?e.slice(1):e;return"\\rangle"==e&&(n="&rang;",e+=" "),"\\rVert"==e&&(n="&#8741;",e+=" "),(t=Oe(0,i,n,s,e)).blocks=[r],r.adopt(t,0,0),t}))}))}))}})),j.right=g(U,(function(e){e.parser=function(){return F.fail("unmatched \\right")}})),Ee=j.binom=j.binomial=g(g(U,p),(function(e,t){e.ctrlSeq="\\binom",e.htmlTemplate='<span class="mq-non-leaf"><span class="mq-paren mq-scaled">(</span><span class="mq-non-leaf"><span class="mq-array mq-non-leaf"><span>&0</span><span>&1</span></span></span><span class="mq-paren mq-scaled">)</span></span>',e.textTemplate=["choose(",",",")"]})),j.choose=g(Ee,(function(e){e.createLeftOf=ke.prototype.createLeftOf})),j.editable=j.MathQuillMathField=g(U,(function(e,t){e.ctrlSeq="\\MathQuillMathField",e.htmlTemplate='<span class="mq-editable-field"><span class="mq-root-block">&0</span></span>',e.parser=function(){var e=this,n=F.string,s=F.regex,i=F.succeed;return n("[").then(s(/^[a-z][a-z0-9]*/i)).skip(n("]")).map((function(t){e.name=t})).or(i()).then(t.parser.call(e))},e.finalizeTree=function(e){var t=T(this.ends[y],this.jQ,e);t.KIND_OF_MQ="MathField",t.editable=!0,t.createTextarea(),t.editablesTextareaEvents(),t.cursor.insAtRightEnd(t.root),u(t.root)},e.registerInnerField=function(e,t){e.push(e[this.name]=t(this.ends[y].controller))},e.latex=function(){return this.ends[y].latex()},e.text=function(){return this.ends[y].text()}})),Te=j.embed=g(z,(function(e,t){e.setOptions=function(e){function t(){return""}return this.text=e.text||t,this.htmlTemplate=e.htmlString||"",this.latex=e.latex||t,this},e.parser=function(){var e=this,t=F.string,n=F.regex,s=F.succeed;return t("{").then(n(/^[a-z][a-z0-9]*/i)).skip(t("}")).then((function(i){return t("[").then(n(/^[-\w\s]*/)).skip(t("]")).or(s()).map((function(t){return e.setOptions(N[i](t))}))}))}})),Ie={},j.begin=g(U,(function(e,t){e.parser=function(){var e=F.string,t=F.regex;return e("{").then(t(/^[a-z]+/i)).skip(e("}")).then((function(t){return(Ie[t]?Ie[t]().parser():F.fail("unknown environment type: "+t)).skip(e("\\end{"+t+"}"))}))}})),De=g(U,(function(e,t){e.template=[["\\begin{","}"],["\\end{","}"]],e.wrappers=function(){return[e.template[0].join(this.environment),e.template[1].join(this.environment)]}})),Pe=Ie.matrix=g(De,(function(e,t){var n="&",s="\\\\";e.parentheses={left:null,right:null},e.environment="matrix",e.reflow=function(){var e=this.jQ.children("table"),t=e.outerHeight()/+e.css("fontSize").slice(0,-2),n=this.jQ.children(".mq-paren");n.length&&pe(n,Be(1+.2*(t-1),1.2),1.05*t)},e.latex=function(){var e,t="";return this.eachChild((function(i){void 0!==e&&(t+=e!==i.row?s:n),e=i.row,t+=i.latex()})),this.wrappers().join(t)},e.html=function(){function e(e){return e?'<span class="mq-scaled mq-paren">'+e+"</span>":""}var n,s=[],i="",r=0;return this.eachChild((function(e){n!==e.row&&(n=e.row,i+="<tr>$tds</tr>",s[n]=[]),s[n].push("<td>&"+r+++"</td>")})),this.htmlTemplate='<span class="mq-matrix mq-non-leaf">'+e(this.parentheses.left)+'<table class="mq-non-leaf">'+i.replace(/\$tds/g,(function(){return s.shift().join("")}))+"</table>"+e(this.parentheses.right)+"</span>",t.html.call(this)},e.createBlocks=function(){this.blocks=[Ae(0,this),Ae(0,this),Ae(1,this),Ae(1,this)]},e.parser=function(){var e=this,t=F.optWhitespace,i=F.string;return t.then(i(n).or(i(s)).or(q.block)).many().skip(t).then((function(t){function n(){e.blocks.push(Ae(a,e,r)),r=[]}var i,r=[],a=0;for(e.blocks=[],i=0;i<t.length;i+=1)t[i]instanceof W?r.push(t[i]):(n(),t[i]===s&&(a+=1));return n(),e.autocorrect(),F.succeed(e)}))},e.finalizeTree=function(){var e=this.jQ.find("table");e.toggleClass("mq-rows-1",1===e.find("tr").length),this.relink()},e.relink=function(){var e,t,n,s,i=this.blocks,r=[];for(s=0;s<i.length;s+=1)e!==(n=i[s]).row&&(r[e=n.row]=[],t=0),r[e][t]=n,n[w]=i[s+1],n[y]=i[s-1],r[e-1]&&r[e-1][t]&&(n.upOutOf=r[e-1][t],r[e-1][t].downOutOf=n),t+=1;this.ends[y]=i[0],this.ends[w]=i[i.length-1]},e.autocorrect=function(e){var t,n,s,i,r,a,o=[];for(e=[],t=this.blocks,a=0;a<t.length;a+=1)e[r=t[a].row]=e[r]||[],e[r].push(t[a]),o[r]=e[r].length;if((n=Math.max.apply(null,o))!==Math.min.apply(null,o)){for(a=0;a<e.length;a+=1)for(s=n-e[a].length;s;)i=n*a+e[a].length,t.splice(i,0,Ae(a,this)),s-=1;this.relink()}},e.deleteCell=function(e){function t(e){var t,n=[];for(t=0;t<e.length;t+=1)e[t].isEmpty()&&n.push(e[t]);return n.length===e.length}function n(e){for(var t=0;t<e.length;t+=1)c.indexOf(e[t])>-1&&(e[t].remove(),c.splice(c.indexOf(e[t]),1))}var s,i,r=[],a=[],o=[],l=[],c=this.blocks;this.eachChild((function(t){s!==t.row&&(s=t.row,r[s]=[],i=0),a[i]=a[i]||[],a[i].push(t),r[s].push(t),t===e&&(o=r[s],l=a[i]),i+=1})),t(o)&&l.length>1&&(s=r.indexOf(o),this.eachChild((function(e){e.row>s&&(e.row-=1)})),n(o),this.jQ.find("tr").eq(s).remove()),t(l)&&o.length>1&&n(l),this.finalizeTree()},e.addRow=function(e){var t,n,s,i=[],r=[],a=[],o=_("<tr></tr>"),l=e.row,c=0;for(this.eachChild((function(t){t.row<=l&&i.push(t),t.row===l&&(t===e&&(n=c),c+=1),t.row>l&&(t.row+=1,a.push(t))})),s=0;s<c;s+=1)(t=Ae(l+1)).parent=this,r.push(t),t.jQ=_('<td class="mq-empty">').attr(Fe,t.id).appendTo(o);return this.jQ.find("tr").eq(l).after(o),this.blocks=i.concat(r,a),r[n]},e.addColumn=function(e){var t,n,s,i=[],r=[];for(this.eachChild((function(n){i[n.row]=i[n.row]||[],i[n.row].push(n),n===e&&(t=i[n.row].length)})),s=0;s<i.length;s+=1)(n=Ae(s)).parent=this,r.push(n),i[s].splice(t,0,n),n.jQ=_('<td class="mq-empty">').attr(Fe,n.id);return this.jQ.find("tr").each((function(e){_(this).find("td").eq(t-1).after(i[e][t].jQ)})),this.blocks=[].concat.apply([],i),r[e.row]},e.insert=function(e,t){var n=this[e](t);this.cursor=this.cursor||this.parent.cursor,this.finalizeTree(),this.bubble("reflow").cursor.insAtRightEnd(n)},e.backspace=function(e,t,n,s){var i=e[t];if(e.isEmpty()){for(this.deleteCell(e);i&&i[t]&&-1===this.blocks.indexOf(i);)i=i[t];i&&n.insAtDirEnd(-t,i),1===this.blocks.length&&this.blocks[0].isEmpty()&&(s(),this.finalizeTree()),this.bubble("edited")}}})),Ie.pmatrix=g(Pe,(function(e,t){e.environment="pmatrix",e.parentheses={left:"(",right:")"}})),Ie.bmatrix=g(Pe,(function(e,t){e.environment="bmatrix",e.parentheses={left:"[",right:"]"}})),Ie.Bmatrix=g(Pe,(function(e,t){e.environment="Bmatrix",e.parentheses={left:"{",right:"}"}})),Ie.vmatrix=g(Pe,(function(e,t){e.environment="vmatrix",e.parentheses={left:"|",right:"|"}})),Ie.Vmatrix=g(Pe,(function(e,t){e.environment="Vmatrix",e.parentheses={left:"&#8214;",right:"&#8214;"}})),Ae=g(W,(function(e,t){e.init=function(e,n,s){if(t.init.call(this),this.row=e,n&&this.adopt(n,n.ends[w],0),s)for(var i=0;i<s.length;i++)s[i].children().adopt(this,this.ends[w],0)},e.keystroke=function(e,n,s){switch(e){case"Shift-Spacebar":return n.preventDefault(),this.parent.insert("addColumn",this);case"Shift-Enter":return this.parent.insert("addRow",this)}return t.keystroke.apply(this,arguments)},e.deleteOutOf=function(e,n){var s=this,i=arguments;this.parent.backspace(this,e,n,(function(){return t.deleteOutOf.apply(s,i)}))}})),Ne=c(1))!function(e,t){"function"==typeof t?(l[e]=function(){return o(),t.apply(this,arguments)},l[e].prototype=t.prototype):l[e]=t}(Re,Ne[Re])}(),e.exports=window.MathQuill},yvbN:function(e,t,n){"use strict";var s=n("ZQNl");n.n(s).a},yy6F:function(e,t,n){e.exports=n.p+"assets/sketch-pen.9ddd98d1.svg"},"z/0E":function(e,t,n){"use strict";var s=n("YFHs");n.n(s).a},zBf9:function(e,t,n){"use strict";t.a={props:{question:{type:null,required:!0},value:{type:null,required:!0},solution:{type:null,default:null},correct:{type:Boolean,default:void 0},editable:{type:Boolean,default:!1},spans:{type:Array,default:void 0}},computed:{},watch:{valid:{immediate:!0,handler:function(e){this.$emit("valid",e)}}}}},"zL/o":function(e,t,n){"use strict";var s=n("C8/q");n.n(s).a},zO1N:function(e,t,n){"use strict";var s=n("Eho6");n.n(s).a},"zR+/":function(e,t,n){"use strict";var s=n("mI+f");n.n(s).a},zSi2:function(e,t,n){"use strict";var s=n("eltp");n.n(s).a},zTH7:function(e,t,n){"use strict";var s=n("oZ07");n.n(s).a},zWjI:function(e,t,n){"use strict";var s=n("7eln");n.n(s).a},zWr8:function(e,t,n){"use strict";t.a={props:{lesson:{required:!0},slide:{required:!0}}}},zZ0E:function(e,t,n){"use strict";var s=n("euJo");n.n(s).a},zetE:function(e,t,n){},ziPU:function(e,t,n){"use strict";var s=n("XlUh");n.n(s).a},zmpC:function(e,t,n){},zo9e:function(e,t,n){},zpA9:function(e){e.exports=JSON.parse('[{"tag":"a","attrs":["charset","coords","download","href","hreflang","name","ping","referrerpolicy","rel","rev","shape","target","type"]},{"tag":"abbr","attrs":[]},{"tag":"acronym","attrs":[]},{"tag":"address","attrs":[]},{"tag":"applet","attrs":["align","alt","archive","code","codebase","datafld","datasrc","height","hspace","mayscript","name","object","src","vspace","width"]},{"tag":"area","attrs":["accesskey","alt","coords","download","href","hreflang","name","media","nohref","referrerpolicy","rel","shape","tabindex","target","type"]},{"tag":"article","attrs":[]},{"tag":"aside","attrs":[]},{"tag":"audio","attrs":["autoplay","buffered","controls","loop","mozcurrentsampleoffset","muted","played","preload","src","volume"]},{"tag":"b","attrs":[]},{"tag":"base","attrs":["href","target"]},{"tag":"basefont","attrs":[]},{"tag":"bdi","attrs":[]},{"tag":"bdo","attrs":[]},{"tag":"bgsound","attrs":[]},{"tag":"big","attrs":[]},{"tag":"blink","attrs":[]},{"tag":"blockquote","attrs":["cite"]},{"tag":"body","attrs":["alink","background","bgcolor","bottommargin","leftmargin","link","onafterprint","onbeforeprint","onbeforeunload","onblur","onerror","onfocus","onhashchange","onlanguagechange","onload","onmessage","onoffline","ononline","onpopstate","onredo","onresize","onstorage","onundo","onunload","rightmargin","text","topmargin","vlink"]},{"tag":"br","attrs":["clear"]},{"tag":"button","attrs":["autofocus","autocomplete","disabled","form","formaction","formenctype","formmethod","formnovalidate","formtarget","name","type","value"]},{"tag":"canvas","attrs":["height","moz-opaque","width"]},{"tag":"caption","attrs":["align"]},{"tag":"center","attrs":[]},{"tag":"cite","attrs":[]},{"tag":"code","attrs":[]},{"tag":"col","attrs":["align","bgcolor","char","charoff","span","valign","width"]},{"tag":"colgroup","attrs":["align","bgcolor","char","charoff","span","valign","width"]},{"tag":"command","attrs":["checked","disabled","icon","label","radiogroup","type"]},{"tag":"content","attrs":[]},{"tag":"data","attrs":[]},{"tag":"datalist","attrs":[]},{"tag":"dd","attrs":["nowrap"]},{"tag":"del","attrs":["cite","datetime"]},{"tag":"details","attrs":["open"]},{"tag":"dfn","attrs":[]},{"tag":"dialog","attrs":["open"]},{"tag":"dir","attrs":["compact"]},{"tag":"div","attrs":["align"]},{"tag":"dl","attrs":[]},{"tag":"dt","attrs":[]},{"tag":"element","attrs":[]},{"tag":"em","attrs":[]},{"tag":"embed","attrs":["height","src","type","width"]},{"tag":"fieldset","attrs":["disabled","form","name"]},{"tag":"figcaption","attrs":[]},{"tag":"figure","attrs":[]},{"tag":"font","attrs":["color","face","size"]},{"tag":"footer","attrs":[]},{"tag":"form","attrs":["accept","accept-charset","action","autocapitalize","autocomplete","enctype","method","name","novalidate","target"]},{"tag":"frame","attrs":["frameborder","marginheight","marginwidth","name","noresize","scrolling","src"]},{"tag":"frameset","attrs":["cols","rows"]},{"tag":"h1","attrs":[]},{"tag":"h2","attrs":[]},{"tag":"h3","attrs":[]},{"tag":"h4","attrs":[]},{"tag":"h5","attrs":[]},{"tag":"h6","attrs":[]},{"tag":"head","attrs":["profile"]},{"tag":"header","attrs":[]},{"tag":"hgroup","attrs":[]},{"tag":"hr","attrs":["align","color","noshade","size","width"]},{"tag":"html","attrs":["manifest","version","xmlns"]},{"tag":"i","attrs":[]},{"tag":"iframe","attrs":["align","allowfullscreen","allowpaymentrequest","frameborder","height","longdesc","marginheight","marginwidth","name","referrerpolicy","scrolling","sandbox","src","srcdoc","width"]},{"tag":"image","attrs":[]},{"tag":"img","attrs":["align","alt","border","crossorigin","height","hspace","ismap","longdesc","name","onerror","referrerpolicy","sizes","src","srcset","usemap","vspace","width"]},{"tag":"ins","attrs":["cite","datetime"]},{"tag":"isindex","attrs":["action","prompt"]},{"tag":"kbd","attrs":[]},{"tag":"keygen","attrs":[]},{"tag":"label","attrs":["for","form"]},{"tag":"legend","attrs":[]},{"tag":"li","attrs":["value","type"]},{"tag":"link","attrs":["charset","crossorigin","disabled","href","hreflang","integrity","media","methods","prefetch","referrerpolicy","rel","rev","sizes","target","title","type"]},{"tag":"listing","attrs":[]},{"tag":"main","attrs":[]},{"tag":"map","attrs":["name"]},{"tag":"mark","attrs":[]},{"tag":"marquee","attrs":["behavior","bgcolor","direction","height","hspace","loop","scrollamount","scrolldelay","truespeed","vspace","width"]},{"tag":"menu","attrs":["button_menus","hr_separator","label","type"]},{"tag":"menuitem","attrs":["checked","command","default","disabled","icon","radiogroup","type"]},{"tag":"meta","attrs":["charset","content","http-equiv","name"]},{"tag":"meter","attrs":["form","high","low","max","min","optimum","value"]},{"tag":"multicol","attrs":[]},{"tag":"nav","attrs":[]},{"tag":"nextid","attrs":[]},{"tag":"nobr","attrs":[]},{"tag":"noembed","attrs":[]},{"tag":"noframes","attrs":[]},{"tag":"noscript","attrs":[]},{"tag":"object","attrs":["archive","border","classid","codebase","codetype","data","declare","form","height","name","standby","tabindex","type","typemustmatch","usemap","width"]},{"tag":"ol","attrs":["compact","reversed","start","type"]},{"tag":"optgroup","attrs":["disabled","label"]},{"tag":"option","attrs":["disabled","label","selected","value"]},{"tag":"output","attrs":["for"]},{"tag":"p","attrs":[]},{"tag":"param","attrs":["name","type","value","valuetype"]},{"tag":"picture","attrs":[]},{"tag":"plaintext","attrs":[]},{"tag":"pre","attrs":["cols","width","wrap"]},{"tag":"progress","attrs":["max","value"]},{"tag":"q","attrs":[]},{"tag":"rp","attrs":[]},{"tag":"rt","attrs":[]},{"tag":"rtc","attrs":[]},{"tag":"ruby","attrs":[]},{"tag":"s","attrs":[]},{"tag":"samp","attrs":[]},{"tag":"script","attrs":["async","crossorigin","defer","integrity","language","nomodule","src","text","type"]},{"tag":"section","attrs":[]},{"tag":"select","attrs":["autofocus","disabled","form","multiple","name","required","size"]},{"tag":"shadow","attrs":[]},{"tag":"slot","attrs":["name"]},{"tag":"small","attrs":[]},{"tag":"source","attrs":["media","sizes","src","srcset","type"]},{"tag":"spacer","attrs":[]},{"tag":"span","attrs":[]},{"tag":"strike","attrs":[]},{"tag":"strong","attrs":[]},{"tag":"style","attrs":["type","media","title","scoped"]},{"tag":"sub","attrs":[]},{"tag":"summary","attrs":["display_list_item"]},{"tag":"sup","attrs":[]},{"tag":"table","attrs":["align","bgcolor","border","cellpadding","cellspacing","frame","rules","summary","width"]},{"tag":"tbody","attrs":["align","bgcolor","char","charoff","valign"]},{"tag":"td","attrs":["abbr","align","axis","bgcolor","char","charoff","colspan","headers","rowspan","scope","valign","width"]},{"tag":"template","attrs":[]},{"tag":"textarea","attrs":["autocapitalize","autocomplete","autofocus","cols","disabled","form","maxlength","minlength","name","placeholder","readonly","required","rows","spellcheck","wrap"]},{"tag":"tfoot","attrs":["align","bgcolor","char","charoff","valign"]},{"tag":"th","attrs":["abbr","align","axis","bgcolor","char","charoff","colspan","headers","rowspan","scope","valign","width"]},{"tag":"thead","attrs":["align","bgcolor","char","charoff","valign"]},{"tag":"time","attrs":["datetime"]},{"tag":"title","attrs":[]},{"tag":"tr","attrs":["align","bgcolor","char","charoff","valign"]},{"tag":"track","attrs":["default","kind","label","src","srclang"]},{"tag":"tt","attrs":[]},{"tag":"u","attrs":[]},{"tag":"ul","attrs":["compact","type"]},{"tag":"var","attrs":[]},{"tag":"video","attrs":["autoplay","buffered","controls","crossorigin","height","loop","muted","played","poster","preload","src","width"]},{"tag":"wbr","attrs":[]},{"tag":"xmp","attrs":[]}]')},zsCn:function(e,t,n){"use strict";var s=n("ym1Z");n.n(s).a},ztjb:function(e,t,n){},zx1U:function(e,t,n){"use strict";var s=n("nlyi");n.n(s).a},zyfT:function(e,t,n){"use strict";var s=n("8Ho0");n.n(s).a}}]);